
package fire.pb.move;
import java.util.List;


import fire.pb.move.Pos;
import fire.pb.scene.manager.RoleManager;
import fire.pb.scene.movable.Role;
import fire.pb.scene.sPos.Position;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CCheckMove__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CCheckMove extends __CCheckMove__ {

	@Override
	protected void process() {
		final Role role = RoleManager.getInstance().getRoleByProtocol(this);
		if(null == role) return;
		if(null == role.getScene()) return;
		
		final long curTick = System.currentTimeMillis();
		if(! role.checkValidFrequency(curTick)){
			return;//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╃窔閺岀喖宕滆鐢盯鏌涚�ｎ偄濮嶉柡灞剧洴楠炲洭顢涘鍗烆槱闂備焦鐪归崹鑽ゅ垝椤栨稓鈹嶅┑鐘叉处閸婇攱銇勮箛鎾愁伒闁归鍏樺浠嬵敇閻旇渹缃曟繝寰锋澘锟芥洟宕导瀛樺剹婵炲棙鎸婚悡娆撴煟閹伴潧澧版繝锟芥禒瀣叆闁绘梻绮ˉ澶愭煙閾忣個顏堟偩閻戣姤鏅查柛鈩冾殘缁愮偤鎮楅惂鍛婂闂佽法鍠嶇划娆撳箚娓氾拷瀹曞ジ鎮㈤搹鍦闂備焦鐪归崹钘夘焽瑜嶉悺顓㈡⒒娴ｄ警鐒鹃柨鏇閸掓帡顢涢悙鑼煣闂佸壊鍋呭ú鏍础閹惰姤鐓熸俊顖氬悑閺嗏晠鏌ㄥ☉娆戠煉婵﹨娅ｇ槐鎺懳熼崗鐓庢畯闂備礁缍婇ˉ鎾诲礂濮楋拷瀵鈽夐姀鐘栤晠鏌曟竟顖氬暟閸樹粙鏌ｆ惔銏╁晱闁哥姵鐗犻垾锕傛倻閽樺鐎梺褰掑亰閸樿偐娆㈤悙娴嬫斀闁绘ɑ褰冮鎾煕濮橆剚鍤囨慨濠勭帛閹峰懘鎮烽柇锕�娈濈紓鍌欐祰椤曆囧磹閸ф宓佸璺号堝Σ鍫ユ煏韫囨洖啸妞ゆ梹甯炵槐鎾诲磼濞嗘垵濡藉銈庡幖濞差厼鐣烽姀銈嗙劶鐎广儱妫涢崢浠嬫煙閸忓吋鍎楅柛銊╀憾閺佹挻鎱ㄩ幇顒�濮﹂悗瑙勬礈閸犳牠銆佸Δ鍛＜婵浜ⅹ闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偞鐗犻、鏇㈡晝閿熺晫锟芥艾顦伴妵鍕箳閻愭潙顏堕梺缁樻尪閸婃牗绌辨繝鍥舵晬婵炲棙甯╅崝鍛存⒑閹肩偛锟芥牠銆冩繝鍥ц摕婵炴垯鍨归崡鎶芥煏婵炲灝鍔甸柟椋庡厴閹晝绱掑Ο杞扮盎闂備胶顭堢换鎰板触鐎ｎ喖纾挎い蹇撶墛閳锋帒銆掑顒佹悙濞存粍绻勭槐鎺旓拷锝庡亜閻忊晠鏌ㄩ悢绋跨亰缂佽尪宕垫禍绋库枎閹寸儐娼熼梺瑙勫礃椤曆呭閸忓吋鍙忔慨妤�妫楁晶楣冩煙閻戣姤鏁辨い锔惧閹棃濮�閳轰椒缂撻梻鍌欑窔濞佳囨偋閸℃蛋鍥敍濠婂懍绗夊銈嗙墬缁綁骞忛悜鑺ュ仭闁哄顑欐导鍐⒑缁嬫鍎忛柨鏇ㄤ邯楠炲啴濮�閵堝懎鑰垮┑鐐村灦閻熴儲绂掗鐐粹拺闁告稑锕︾粻鎾绘倵濮樼厧澧紒缁樼洴瀹曞爼顢楁担鍝勫箞婵＄偑鍊栭崝褏寰婃ィ鍐ㄧ？闁哄洢鍨洪悡銉︾節闂堟稒锛嶆俊鍙夋倐濮婃椽宕￠悙鏉戞灎闂佸搫鏈ú妯侯嚗閸曨偀妲堟慨妤�妫欓崰姗�姊绘担鍛婂暈妞ゎ厼娲顐ゆ嫚瀹割喗缍庨梺鎯х箺椤锟芥碍宀搁弻宥夊Ψ閵壯嶇礊闂佽法鍠曞Λ鍕�﹂悜钘夎摕婵炴垶锕╅悡銉╂煕閹扳晛濡芥繛鍫濆缁辨挻绗熸繝鍐伓濠电姷鏁告慨鏉懨洪敃鍌氱厱闁硅揪闄勯悡鏇熺節闂堟稑顏╅柛鏃�宀搁弻锛勶拷锝庡亝閳锋劙鏌曢崶褍顏い銏★耿閹瑩妫冨☉鎺戝緧闂傚倷鑳剁涵鍫曞疾濠靛纾婚柕鍫濐槺瀹撲線鎮楅敐搴℃灍闁哄懏绮撻弻锕�螣娓氼垱顎嗛梺褰掝棑閸忔﹢骞冨鍫熷殟闁靛／鍐ㄧ婵犵數濮伴崹鐓庘枖濞戙埄鏁勯柛娑樼摠閸婂爼鏌嶉崫鍕櫤闁绘挻娲熼弻锟犲磼濞戞﹩鍤嬮梺鍝ュ枔閸嬬喓妲愰幒鏃傜＜婵☆垳顑曢敓鑺ュ浮閺屻劑鎮㈢拠娈嬫挾绱掔�ｎ偄娴柍銉畵瀹曞爼顢楁担绋垮闂備線娼ч悧鍡涘箖閸ф鍋￠梺顓ㄥ閸欏棝鏌熼悡搴ｆ憼缂佽鐗撳畷鎴澪旈崨顔规嫼闁荤姴娲犻敓鍊熸珪閻忓棝姊洪崨濠庢畷濠电偛锕俊瀛樻媴閸撳弶鍍甸梺鑲╊焾閻忔艾鈻嶉姀锛勭閻庣數顭堝瓭濡炪倖鍨甸幊妯侯嚕閸涘﹦鐟归柨鐔剁矙瀵鎮㈤悡搴ｎ槶閻熸粌绻掗弫顔尖槈閵忥紕鍘搁梺鍛婁緱閸犳宕愰幇鐗堢厸閻忕偠顕ф慨鍌炴煙椤斿搫锟芥繂鐣烽幒鎴旀婵妫旂槐锟�?
		}
		
		checkmove(role, sceneid, curpos, poslist,curTick);
		
	}
	
	public static boolean checkmove(Role role,long sceneid, fire.pb.move.Pos curpos,List<fire.pb.move.Pos> poslist, long curTick)
	{
		if(role.getScene().getSceneID() != sceneid) return false;
		
		if(! role.checkMoveUnit())
		{
			//Scene.logger.debug("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇洟姊绘担钘壭撻柨姘亜閿旇鏋ょ紒杈ㄦ瀵挳濮�閳撅拷閹风粯绻涙潏鍓хК婵炲拑缍佹俊瀛樼節閸ャ劎鍘遍梺瑙勫劤椤曨厾绮婚悙鐑樼厵闁芥ê顦敓钘夘煼閺佹捇寮妶鍥┬ｉ梺鍝ュУ閻楃娀骞冨▎鎰瘈闁告劧缂氱花濠氭⒑绾懏顏犻柛瀣仧閿熻姤鑹惧﹢杈╂閹惧瓨濯撮柛婵嗗閿熻棄鐭傞弻娑㈡晲韫囨洜袦閻庢鍠栭…鐑藉极閹剧粯鍋愰柤纰卞墾缁卞弶绻濈喊妯活潑闁搞劌纾禍鎼佸Ω閳轰胶顔嗛悗鐟板鐎氬牓寮崼婵堫槰濡炪倕绻愬Λ娑㈠储椤栫偞鈷掑┑鐘查娴滄粍绻涚拠褏鐣垫鐐村姍楠炴﹢顢欓懖鈺佹憢濠电偛顕慨鎾敄閸涱垳涓嶉柟鎯板Г閻撴瑩鏌熼婊冾暭妞ゃ儱顦遍惀顏堝箚瑜忕粔娲煛瀹�瀣瘈鐎规洖鐖兼俊鐑藉Ψ瑜岄幃锝囩磽閸屾瑨鍏屽┑顕�鏀辩换娑㈡晸娴犲鐓熼柟鍨暙娴滄壆锟借娲栭悥鍏间繆濮濆矈妲峰┑鈩冨絻閻楁挸顫忓ú顏勫窛濠电姴鎳庨ˉ婵嗏攽閻欏懏瀚归梻渚囧墮缁夌敻寮查幖浣圭厽闁挎繂鎳忓﹢鐗堛亜韫囨洖鏋涢柡宀�鍠愰ˇ鐗堟償閳ュ啿绠ｉ梻浣告惈閺堫剟鎯勯姘煎殨闁圭虎鍠栨儫闂侀潧顦崕鍝勵焽妤ｅ啯鈷掑ù锝呮啞閸熺偤鎷戦柆宥嗙厵妞ゆ梻鍘ч敓钘夌仢椤曪絾绻濆顓熸珳闂佸壊鍋侀崹濠氬级閹间焦鈷戦柛婵嗗瀹告繈鏌涚�ｎ偓鑰跨�规洦鍋勮灃闁跨喍绮欓垾鏃堝礃椤斿槈褔鏌涢埄鍐剧劸闁稿绶氬娲箹閻愭彃濡ч梺鍛婄矆閻掞箑鏆╁┑鐘垫暩婵兘寮崨濠冨弿闁圭虎鍠楅弲婵嬫煏閸繍妲哥紒鐘靛█閻擃偊宕堕妸褉妲堢紒鐐劤椤兘寮婚垾鎰佸悑闁告劑鍔岄‖瀣磽娴ｅ弶顫夐柟椋庡厴濮婂宕掑顒婃嫹閹间焦鍋嬪┑鐘插閻瑩鏌熼悜妯虹劸闁哥喎鎳忕换婵嬫濞戞艾鈪辩紒鐐劤閵堟悂寮婚敐鍛傜喖宕归鍏煎劒闂備椒绱徊鎯ь渻娴犲钃熼柣鏃傗拡閺佸﹦绱掑☉姗嗗剱闁汇倓绶氬铏规嫚閳ヨ櫕鐏曞┑鈽嗗亜鐎氫即宕洪姀銈呯闁兼悂娼х壕顖炴⒑闂堟侗鐒鹃柛搴ら哺閻″繘姊婚崒姘拷鐑芥倿閿曞倹鍎戠憸鐗堝笒閺勩儵鏌涢弴銊ョ仩闁搞劌鍊块弻锝呂旈敓浠嬫偋婵犲倵鏋嶉柣妯款嚙缁犲綊寮堕崼婵嗏挃缂佸绮妵鍕敃閿濆棛顦伴梺鍝勭灱閸犳牠骞冨鍏剧喓鎷犻懠顒夋殹缂傚倸鍊风粈浣规櫠鎼淬劌纾婚柕鍫濐槸缁犳牗淇婇妶鍛櫤闁哄懏鐓￠獮鏍拷娑欘焽缁犳﹢鏌熺粙娆炬█婵﹥妞藉畷顐﹀礋闂堟稑澹夐梻浣藉吹閸熷潡寮插☉顫稏闊洦绋掗幆鐐烘偡濞嗗繐顏╅柛妯虹秺濮婃椽宕ㄦ繝浣虹箒闂佸摜濮垫穱娲Φ閹邦垼妯勫┑顔硷攻濡炰粙骞婇敓鐘参ч柛娑卞枟閻︼綁姊绘担鍛婃儓闁硅櫕鍔栭幈銊╁箻椤曞懏鏅梺鎸庣箓椤︿粙寮崘顔界叆闁哄浂浜濈�氬湱绱撴担鍝勑�规洜鏁稿Σ鎰板箻鐎涙ê顎撻梺鍏肩ゴ閸撴繈宕归悽绋跨厺鐎广儱顦～鍛存煏閸繃顥戦柟閿嬫そ閺岋綁鎮╅崗鍛板焻闂佸憡鏌ㄩ懟顖炲煝瀹ュ绠涢柣妤�鐗忛崢鐢告⒑閸涘﹤鐏熼柛濠冪墱閿熻姤鐔幏锟�, 濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愰崨鍌滃枎閳诲酣骞嗚椤斿嫮绱撻崒娆掑厡濠殿喗鎸抽幃妯侯潩鐠轰綍锕傛煕閺囥劌鏋ら柣銈忔嫹闂備礁婀遍崑鎾诲箚鐏炶娇娑㈡倷閻㈢數锛濇繛杈剧悼閺咁偊宕奸鍫熺厱濠电姴鍟扮粻鐐碉拷娈垮枛椤兘寮崘顔芥櫢闁稿﹦鍠撴禍浠嬫⒒娴ｈ櫣甯涢柤褰掔畺椤㈡岸顢橀悩鐢电劶闂佺硶鍓濋妵娑㈠绩娴犲鐓熼柟閭﹀幗缂嶆垿鏌ｈ箛銉х暤闁圭缍佹俊鑸靛緞鐎ｎ剙骞愰梻浣芥硶閸犳洘鎱ㄩ妶鍥╃焿闁圭儤妫戦幏鐑芥晲鎼粹�茬敖闂佸憡锕㈡禍璺侯潖濞差亝鎯炴い鎰剁到閻濐亪姊鸿ぐ鎺濇闁稿繑锕㈠濠氭晸閻樻彃绐涘銈嗘煥婢т粙鎮块崟顖涘�甸悷娆忓缁�鍐磼鐠囨彃锟藉潡骞冩ィ鍐╂櫢闁绘ê纾崝鐑芥⒑閹稿孩顥嗘俊顐㈠閹礁顭ㄩ崼鐔叉嫽婵炴挻鐔幏閿嬬箾娴ｅ啿娲﹂崑瀣煕閳╁啰鈽夌紒鐘靛█閺岀喖鏌囬敃锟介弸銈呪槈閹惧磭孝闂囧鏌ｉ幘铏崳闁圭晫濞�閺岋綁骞樼捄鐑樼�炬繛锝呮搐閿曨亝淇婇幆鎵杸闁哄倹顑欐导鎾绘⒒閸屾瑧鍔嶉悗绗涘厾娲晜閻ｅ矈娲稿銈呯箰鐎氼噣寮抽敃鍌涚厱婵犻潧妫楅銈嗕繆閹绘帞澧﹂柡灞炬礉缁犳盯寮撮悙鎰╁劜閵囧嫰寮敓鐣屾暜閻愬灚顫曢柟鎹愵嚙绾惧吋绻涢崱妯虹仴濠德ゆ椤啴濡舵惔鈥崇濠电偛妯婇崢濂告偩閻戣棄顫呴柨娑樺濞村嫰鏌ｆ惔顖滅У闁稿鎷烽梺褰掓敱濡炶棄顫忓ú顏勫窛濠电姴瀚悾鐢告煟鎼淬垹鍤柛鎾跺枛瀵偊骞樼紒妯烘疅闂侀潧顧�缁犳垿鏁撻懞銉ュ闁哄瞼鍠栭、娆撴儗椤愵偂閭柛鈺冨仱楠炲鎮崨顔碱伓闂佹寧绻傜花鑲╄姳娴犲鐓熼柨婵嗘閵囨繃鎱ㄦ繝鍐┿仢闁诡喚鍏橀弻鍥晝閿熻棄鈻撻崼鏇熲拺缂佸顑欓崕鎴︽煕鐎ｃ劌锟芥洟鎮鹃悜鑺ユ櫜闁割偁鍨婚弶绋库攽閻愭潙鐏﹂柣鐔濆洤鐭楅柛鈩冦仜閺�浠嬫煟濡偐甯涙繛鎳峰嫪绻嗘い鎰剁悼閹冲洭鎸婇悢鍝ョ瘈濠电姴鍊搁弳濠囨煛閿熶粙鎳為妷锝勭盎闂佸搫鍟ú銈嗙瑜版帒鏋侀柛顐犲劜閳锋垿鏌涘┑鍡楊伀闁绘帟娉曠槐鎺撴綇閵婏妇顦ㄧ紓浣稿�圭敮锟犲极閸愵喖纾兼慨姗�纭稿Σ鍫曟煟閻斿摜鐭婃い锔诲灠瀹撳嫰姊洪崜鎻掍簴闁稿孩鐓￠崺娑㈠箣閿旇棄锟界敻鏌涢敂璇插箹妞ゅ骸鐭傞弻娑㈠Χ閸℃瑦鍣板┑顔硷龚濞咃綁寮锟介、娆撳礈椤喗绮撳铏圭磼濡湱绻侀梺闈╃秶缁蹭粙鎮鹃悜钘夐唶闁哄洢鍔嶉弲銏＄節閵忥絾纭炬い鎴濇閳诲秴鐣濋崟顑芥嫽婵炶揪绲肩拃锕傛倿妤ｅ啯鐓涢柛顐亜婢ф挳鏌熼鎯у幋闁轰礁鍟村畷鎺戭潨閸喎顏舵繛杈剧秬閸婁粙鎮㈤悜妯轰粧闂佹枼鏅涢崯顖炲级閹间焦鈷掑ù锝堟鐢盯鏌ㄥ鑸电厽闊洦鏌ㄩ崫铏癸拷娈垮枟婵炲﹪宕洪敓鐘插窛妞ゆ梹鍎抽獮鍫ユ⒑鐠囨彃鍤辩紓宥呮瀹曟垿宕卞鏇熸そ瀵爼骞嬮弮锟介弬锟介梻浣哄仺閸庨亶宕崸妞硷拷鍌氱暦閸モ晝锛滃銈嗘⒒閺咁偊骞婇崘顔界厓閻犲洦鐓￠崣鍕拷瑙勬礃缁繘藝閹绘巻鏀芥い鏃囧Г閵囨繈鏌″畝瀣М闁诡喓鍨藉畷顐﹀Ψ瑜忛崢鎴︽⒒娴ｈ鍋犻柛鏂胯嫰椤洭鏁撻悩闈涚ウ闂佸憡鍔﹂悡鍫濐焽閵娾晜鐓ラ柣鏂垮閻瑧锟芥鍣崑濠囩嵁濡偐纾兼俊顖滅帛椤忕喖姊绘担鑺ョ《闁革綇绠撻獮蹇涙晸閿燂拷?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁绘劦鍓欓崝銈嗐亜椤撶姴鍘寸�殿喖顭烽弫鎰緞婵犲嫮鏉告俊鐐�栫敮濠勬媼閺屻儱鍑犳繛鍡樻尰閳锋垹绱撴担濮戭亞绮埡浣叉斀妞ゆ柨鎼敓鑺ヮ殜楠炴垿濮�閻橆偅顫嶉梺闈涚箳婵挳鎳撻崹顔规斀闁宠棄妫楅悘锝囩磼椤曞懎鐏︾�规洘娲橀幆鏃堝Ω閿旇瀚奸梺鍝勵槺閸嬬偞绔熼崱娴板洭鏁冮崒娑橈拷鍨叏濮楀棗浜滅�规挸妫涢敓鑺ヮ問閸犳盯顢氳閸┿儲寰勯幇顒夋綂闂佺粯锕㈠褎鎱ㄩ崼鏇熲拻濞达絽鎲￠崯鐐烘煕閺冩捇妾紒鍌氱Т閳规垹锟斤綆浜Λ宄邦渻閵堝棙绌块柟鐑芥敱閹便劍绻濋崒娑欏創闁绘挶鍊濋幃褰掑炊閵娿儳绁风紓浣哄У濡炶棄顫忓ú顏勬嵍妞ゆ挾鍠庡▓灞解攽閻愬弶鈻曢柛妯恒偢椤㈡岸鏁愰崱娆戠槇濠殿喗锕╅崢钘夆枍濠婂嫮绡�闁靛骏绲剧涵楣冩煥閺囶亞鐣垫い銏∶叅妞ゅ繐鎳夐幏娲⒑閸︻収鐒炬繛鎾棑缁骞樼紙鐘电畾濡炪倖鍔﹂崑鍕嵁閺嶎厽鎳氶柣鎰劋閻撴洟鏌￠崶銉ュ妤犵偞顭囬惀顏堝箲閹邦収妫勯梻鍥ь樀閺屻劌鈹戦崱妯烘闂佽鍨伴悧鎾愁嚕娴犲鏅搁柣妯虹－閸樹粙姊洪棃娑氱畾闁哄懏鐩幃姗�鎳犻鍌滐紲缂傚倷鐒﹂…鍥╃不閹炬番浜滈柡鍥朵簽缁嬭崵绱掔紒妯肩畵妞ゎ偅绻堥、姗�鎮㈤崫銉ョ濠电姷鏁告慨浼村垂閻撳簶鏋栨繛鎴炵矌濡惧爼姊绘笟锟藉褑澧濋梺鍝勬噺缁捇骞冮檱缁犳盯骞欓崘顏勬暩闂備浇鍋愰…鍫㈡闁稁鏁傞柛鏇樺妽閻庡搫鈹戦悙鍙夘棡闁圭顭烽幃鈥斥枎韫囷絾瀵岄柣搴秵娴滎亪顢撳Δ鍛厱婵☆垳绮亸锕傛煛鐏炵澧查柟宄版噽閹叉挳宕熼銈忕处闂傚倷娴囧銊╂倿閿曞倸绠查柛銉墮閺嬩線鏌熼崜褏甯涢柡鍛倐閺屻劑鎮ら崒娑橆伓" + role.getName() + "\t" + role.getTeamIndex());
			return false;
		}
		
		if (!role.canMove())
		{
			role.confirmCurPosition();
			return false;
		}
		
		if(role.isJumping())
		{
			//role.getJumpRole().confirmPositionToStart();
			return false;
		}
		
		int z = role.getPos().getZ();
		final Position destPos = new Position(curpos.x, curpos.y, z);
		final java.util.List<Position> positions = new java.util.ArrayList<Position>();
		positions.add(role.getPos());// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐差渻閵堝棗绗掓い锔垮嵆瀵煡顢旈崼鐔蜂画濠电姴锕ら崯鎵不缂佹﹩娈介柣鎰綑閻忔潙鈹戦鍡樺闂備線娼ч悧鍡涘箠閹扮増鍋柨鐔诲Г娣囧﹪鎮欓鍕舵嫹閺嶎灛娑欐媴閼叉繃鐩畷鐔碱敆娴ｇ濡冲┑鐘垫暩婵潙煤閿曞倸鐓曢柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘嚚鐟邦煥閿熶粙宕￠幎钘夎摕婵炴垶鐟﹂崕鐔兼煏婵犲繘妾梺娆惧弮濮婅櫣锟藉湱濮甸ˉ澶嬨亜閿旇鐏ラ柣蹇斿浮濮婄粯鎷呴崫銉よ檸濡炪倖鍨靛ú顓㈠极閹剧粯瀵犲鑸殿焽閸氬鈹戦埥鍡椾簻闁硅櫕锕㈤妴渚�寮撮姀鐙�娼婇梺鐐藉劚閸熸寧绂嶉崼鏇熲拻濞达絼璀﹂悞楣冩倵濞戞帗娅婃鐐村姍楠炲酣鎸婃径瀣拷顒勬⒑閻熸澘鈷旂紒顕呭灣閿熺晫鏁告慨鎾�︾捄銊﹀磯濞撴凹鍨伴崜鐗堢箾鐎电校闁圭鍟块～蹇撁洪鍕炊闂佸憡娲﹂崜姘跺箯闁秵鈷戦柣鎴旀櫆濞呮捇鏌涢妸銊╁摵缂佸矁椴哥换婵嬪炊閵娿儻鎷烽懡銈囩＜婵炴垶锕╅崕鎰版煛閸涱亝娅婃慨濠呮缁辨帒螣鐠囪尙顣查梺璇查閻忔氨鏁幒妞伙拷锕傚炊椤掍礁娈ラ梺闈涚墕濞层劑鏁嶅┑瀣拺缂佸瀵у﹢浼存煟閻旀繂鎳愭す鎶界叓閸ャ劎鈾侀柣鎾寸懅閿熺晫鎳撶�氼厼顭垮Ο浣曪絿绱掑Ο闀愮盎濡炪倖鎸鹃崑鐐哄磻閵夆晜鐓欓柧蹇ｅ亞閻帗淇婇銏犳殭闁宠棄顦～婊堝幢濡偐鞋闂傚倸鍊搁崐鐑芥嚄閸撲礁鍨濇い鏍仜缁犱即鏌熼梻瀵割槮闁汇値鍣ｉ弻鐔虹磼閵忕姵鐏堥梺钘夊暟閸犳牠寮婚敓鐘茬倞闁宠桨鐒﹂悗鑽ょ磽娴ｇ顣抽柛瀣ㄥ�濆璇测槈閵忊晜鏅濋梺鎸庣箓濞层劑鎮鹃棃娑辨富闁靛牆楠告晶顔姐亜閿曞倹娑фい顐㈢箻閹煎綊宕烽鐙呯床婵犵妲呴崹鐢稿磻閹伴偊鏁囬柛蹇氬亹缁犻箖鎮楀☉娆樼劷闁活厹鍊曢湁婵犲﹤绨肩花缁樸亜閺囶亞绋荤紒缁樼箓椤繈顢橀悢鍝ュ礁闂傚倷绀侀幉鈩冪瑹濡や胶顩叉繝闈涱儏濡﹢鏌ㄩ悢鍓佺煓婵﹦绮幏鍛村川婵犲倹娈樻繝鐢靛仩椤曟粎绮婚幘宕囨殾闁硅揪绠戠粻濠氭偣閸ヮ亜鐨烘い鏂挎濮婅櫣绱掑Ο铏逛紘濠碘槅鍋勭�氭澘鐣烽敓鐘茬闁兼亽鍎抽崢顏堟椤愩垺澶勬繛鍙夌墪閺嗏晠姊绘担鍛婂暈闁荤喖浜堕獮蹇涙煥鐎ｎ剛鐦堥梺姹囧灲濞佳嗏叿闂備焦鎮堕崝宀勫Χ缁嬭法鏆︽繛宸簻閸愶拷濡炪倖鎸鹃崑鐔妓囬锟藉娲传閸曨剙绐涙繝娈垮櫍閺�杈╃矙婢跺鍚嬪璺侯儑閸樼偓绻濆▓鍨灍闁告梹娲熼弫鎾绘嚍閵夘喗鐣兼繝銏ｎ潐濞茬喎鐣峰Δ鍛殐闁冲搫鍠氶崯搴ㄦ⒒娴ｇ儤鍤�妞ゆ洦鍙冨畷鎴︽偄缁楃尨鎷烽崒鐐茶摕闁靛濡囬崢閬嶆⒑闂堟稓澧曠紒缁樺灩閿熻姤淇洪～澶屾崲濠靛鍋ㄩ梻鍫熷垁閿濆棎浜滈柡鍐挎嫹闁绘濮撮悾鐑藉级鐠囩偓妫冨畷姗�顢旈崱娆忓箚闂傚倷鑳堕、濠囧箵椤忓棛涓嶉柟杈鹃檮閸嬪倹鎱ㄥΔ瀣闂佸搫鐬奸崰鎰焽韫囨柣鍋呴柛鎰ㄦ櫓閿熻棄绉瑰铏圭矙閸栤�冲闂佺绻戦敃銏狀嚕婵犳艾围闁搞儜鍕拷鎶芥⒑閸涘娈橀柛瀣洴閿濈偤鍩℃笟鍥ㄥ瘜闂侀潧鐗嗛崯顐︽晸缁愭牕娲ょ粻顖炴煟閹达絽袚闁抽攱甯￠弻娑氫沪閸撗勫櫘闂佸憡鏌ㄧ粔褰掑蓟閻旂⒈鏁婇柤娴嬫櫅閻撶喖鎮楃憴鍕缂佽鍊块幃鎯р攽鐎ｎ亞顦板銈嗗姇閻燁亪宕堕妸褍骞堟繝鐢靛仦閸ㄥ爼鏁冮銏╂綎婵°倕鍟扮壕濂告偣閸パ冪骇妞ゃ儯鍨介弻鈥崇暆鐎ｎ剛袦婵犳鍣幏鐑芥⒑闂堟稓绠氶柡鍛箞瀹曟繈宕妷褏锛濇繛杈剧到閹碱偅鐗庨梻浣哄劦閺呪晠宕圭捄渚殨濠电姵鑹鹃悞娲煕閹扳晛濡跨紒鎰仱閺岀喖宕楅懖鈺傛闂佹悶鍔岄…閿嬩繆鐎涙绡�闁稿被鍊栫�靛矂姊洪棃娑氬婵☆偅鐟╅崺娑㈠箛閻楀牆浠哄銈嗙墬椤ㄦ劙骞忛悜钘夌疀濞达絽婀辩粙浣圭節閻㈤潧浠滄俊顖氾攻缁傚秴顭ㄩ崘鎯ф櫊濠电娀娼уΛ宀勫绩娴犲鐓熸俊顖濐嚙缁插鏌ㄩ悢璇残撻柟顔煎�块弫鎰版倷閸忓憡鍕冮柣鐔哥懕缁查箖寮敓浠嬫⒒娴ｅ摜鏋冩俊顐㈠铻炴俊銈呮噺閸婂爼鏌ｅΟ鑲╁笡闁绘挶鍎甸弻锟犲炊閵夈儱顬嗙紓浣靛妿缁垶濡甸崟顖氬嵆妞ゅ繐妫涜ⅵ婵°倗濮烽崑鐐烘偋濡ゅ懎绠柛娑卞灡閸犲棝鏌涢弴銊ュ⒒濞寸姍鍕瘈闁汇垽娼ф禒婊勩亜閺囥劌骞楅柟渚垮姂楠炴﹢顢氶崨顔芥珗闂備胶纭堕崜婵堢矙閹达附鍋傞柡鍥ュ灪閻撴瑩鏌ｉ幋鐏活亜鈻撻鐐枑闁绘鐗嗙粭姘舵煛閸涱喖绲绘い顓炴健閹虫粓鎯夐鍛伌閽樼喖鏌″鍐ㄥ缂佺娀绠栭弻鐔猴拷鐢殿焾娴狅箓鎮樿箛搴″祮闁哄矉缍侀獮娆撳礋椤撶姷妲囬柣搴㈩問閸犳牠鈥﹂悜钘夌畺闁靛繈鍊栭崑鍌炲箹鏉堝墽绉垫俊鏌ヤ憾濮婄粯绗熼敓钘夘焽瑜旈幃褔宕卞銏＄☉铻栭柛婊�鐒﹂弲婊堟⒑鐠恒劌娅愰柟鍑ゆ嫹? 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柛銊ュ�歌灃闁挎繂鎳庨弳娆戠磼閻樺磭鈽夐棁澶愭煥濠靛棙鍣洪悹鎰剁磿缁辨帞锟斤絺鏅為崗宀�绱掓潏銊﹀磳鐎规洘甯掗～婵嬵敆婵犲啫顏堕梺缁樺灱婵倝宕愰崸妤佺叆闁哄洦姘ㄩ崝宥夋煙閸愯尙鐒告慨濠勭帛閹峰懘宕ㄦ繝鍌涙畼闂備浇宕甸崰鍡涘磿閹惰棄绠查柕蹇曞濞笺劑鏌ㄩ悢缁橆棄妞ゆ洩绲剧换婵嗩潩椤撶偘绨婚梻浣瑰劤缁绘劕锕㈤柆宥嗘櫖婵犲﹤鐗婇埛鎴︽⒒閸喓銆掔紒鐘插暱閳规垿顢欓悙顒佹瘓闂佽鍠楅敃銏犵暦婵傜唯闁挎棁顫夌�氬吋绻濋悽闈涗哗閻忓浚浜、姘愁樄闁绘侗鍠栬灃濞达絽鍚�缁ㄥ姊洪棃娑辩劸闁稿骸顭烽悡顒勵敆閸岋附瀚规繛鍫濈仢閺嬶附銇勯弴鍡楁搐閻撯�愁熆閼搁潧濮囨い顐㈡嚇閺岋絽顫滈敓钘夘焽瑜庨幈銊╁醇閺囩啿鎷绘繛杈剧到閹诧繝宕悙鐑樼厱闁哄啯鎹囧顔剧磼閸屾氨效鐎殿喕绮欓垾鏍敆婵犲嫮袦閻庤娲栭妶鍛婃叏閿熶粙鏌曡箛锝嗙窙缂佸崬鍟块埞鎴︽倷鐎涙ê闉嶉梺鐓庣秺缁犳牠寮崘顔嘉ㄧ憸婵嬪箯瀹勯偊娼╂い鎺戝�绘婵犳鍠栭敃銊モ枍閿濆绀岄柡宥庡幖閸楁娊鏌ｉ幇顓犮偞闁规灚鍊栨穱濠囨倷椤忓嫸鎷疯缁骞橀崜浣猴紳濠殿喗顭堝▔娑欘攰闂備礁婀辨晶妤�顭垮Ο鑲╀笉闁规儼濮ら悡娆撴煙椤栧棗鍟粭顓犵磽娴ｉ潧濡块柡浣筋嚙椤繐煤椤忓懎浠梺鍝勵槹鐎笛囧磹椤栫偞鈷戦悹鍥ｏ拷宕囦哗闂佹椿鍘奸崐鎼佹偩闁垮顕遍柡澶嬪灥閸炪劑鎮峰鍐炬█鐎殿喗鎮傚顕�宕奸悢鍝勫箞婵＄偑鍊栭崝褏寰婇崜褏鐭嗛柛鎰靛枟閻撴洖鈹戦悩鎻掝仾闁哄棭鍓熼弻鐔碱敊閻撳孩些闂佸疇顕у锔剧不濞戙垹绠奸柛鎰屽懏锛忕紓鍌氬�搁崐椋庣矆娓氾拷閹本鎷呯化鏇熺亙闂佸搫娲ㄦ慨鐢革綖閺囥垺鐓欓柣鎰靛墮婢ь垶鏌涘顒夊剶闁哄本鐩鎾Ω閵夈儳顔掗梻浣虹帛缁嬪繘宕圭涵鍛簷闂備胶绮敃銏狀焽瑜庣粋鎺戭煥閸喓鍘遍梺缁樻⒒椤牓鍩㈤弴鐐╂斀闁挎稑瀚弳顒侇殽閻愬弶鍠樼�殿喖澧庨幑鍕�﹂幋婵囨毌闂傚倸鍊烽懗鍫曞箠閹炬椿鏁嬫い鎾跺枑閸欏繘鏌熺紒銏犳灍闁哄懏鎮傞弻锝夋晲閸涙澘顏繛瀵稿Ь妞存悂骞堥妸锔剧瘈闁告劏鏂傛禒銏犖旈悩闈涗沪闁告梹鐗犻獮鍡涘籍閸繍娼婂銈庡亽閸犳岸鐛姀銏㈢＝闁稿本鑹鹃敓浠嬵棑濞嗐垽濡舵径濠勵唵閻庣懓瀚崺鍥晸閼恒儱绗掓い顐ｇ箞閹瑩顢楅敓浠嬵敂閸洘鐓熼幖娣�ゅ鎰箾閹绘帞绠荤�规洝顫夌粋鎺旓拷锝庝簼閻庮剟姊洪悷鏉库挃缂侇噮鍨跺畷鎴﹀箛閻楀牏鍘搁梺绋挎湰閿氶柛鏃�绮撻幃妤�顫濋崘韫睏缂備浇椴搁幑鍥х暦閹烘垟鏋庨柟鎼幗琚﹀┑锛勫亼閸婃牠宕归棃娴虫稑鈹戠�ｎ煉鎷锋笟锟藉鍊燁槷闁哄閰ｉ弻鐔煎箚瑜忛敍宥夋煥濞戞艾鏋庨柍瑙勫灴閹晝鎷犺娴兼劙姊虹涵鍛彧闁告梹顨嗙粩鐔煎即閵忊�充患閻庣櫢鎷烽悗锝庡亜椤忚泛螖閻橀潧浠滈柣蹇旂箞瀹曟繂顫濋懜闈涳拷鍨叏濡厧甯舵繛鍛Ч閹稿﹤鈹戠�ｎ偆鍙嗛梺鍝勬川閸嬫盯鏁撻挊澶岀Ш闁诡噯绻濋幃銏ゅ礂閼测晛寮虫繝鐢靛█濞佳兾涘▎鎾抽棷閻熸瑥瀚换鍡涙煠绾板崬澧伴悽顖涚洴閺屾洟宕惰椤忣厽銇勯姀鈩冪闁轰焦鍔欏畷鍫曞煛閸愨晜绶版繝纰夌磿閸嬫垿宕愰幋锕�鍨傛繛宸簵閿熻棄鍟村畷鍗炍旀繝鍌涱唫闂備礁鎲″ú锕傚矗韫囨稑绠柣鎴ｅГ閺呮煡骞栫�涙绠橀柡浣圭墪閳规垿妾辨い鏇熺矌缁辩偞鎷呴崜鍙夌稁婵犵數濮甸懝鍓у閸忚偐绠鹃柛鈩兠粭鎺楁煕濡嚖鎷烽幇浣瑰瘜闂侀潧鐗嗛崯顐︽倶閳哄懏鐓ラ柡鍥ュ妺闁垶鏌℃担鐟板闁诡喗鐟╁鍫曞箣閻樼數宓侀梻鍌欑缂嶅﹪宕戞繝鍥х婵炴垟鎳為崶顒夋晪闁跨喕妫勯～蹇撁洪鍕炊闂佸憡娲﹂崜娆撳磻瀹ュ鈷戦柟鑲╁仜婵拷濡炪倖娉﹂崶銊ヤ患闂佸壊鐓堥崑鍡涙偡瑜版帗鐓ラ柣鏂垮閻瑧锟芥鍠栭…閿嬩繆閹间礁鐓涢柛灞剧煯缁ㄤ粙姊绘担渚劸闁哄牜鍓涚划娆撳箣閿旂粯鏅滈梺璺ㄥ櫐閹凤拷
		for(final Pos p : poslist)
			positions.add(new Position(p.x, p.y, z));
		
		final int length = destPos.getDistance(role.getPos());
		if(role.isJumping())
		{
			//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁橈耿瀵鏁愭径濠勵吅濠电姴鐏氶崝鏍礊濡ゅ懏鈷戦悹鎭掑妼閺嬫瑦淇婇銏狀伃鐎规洘鍔欏畷鐑筋敇閻樼數鍔归梻浣告贡閸庛倕螞閹达箑绠柣鎴ｅГ閺呮煡骞栫划鐧告嫹閼碱剙鍤┑鐘垫暩閸嬫盯骞婂畝鍕瀭闁芥ê顦藉鏍ㄧ箾瀹割喕绨奸柛銈呯Ч閺屾洘寰勬繝鍌涚亾婵炲瓨绮犳禍锝呂涢悢濂夋富闁靛牆妫涙晶閬嶆煕鐎ｎ偆鈽夐弫鍫ユ煛鐏炶鍔滈柍閿嬪灦閵囧嫰骞掗悙鏉戭伓缂傚倷绀侀ˇ閬嶅极婵犳艾绠栭柨鐔哄Т鍞梺鍐叉惈閸婂宕㈡禒瀣拺闁告繂瀚弳娆撴煕婵犲懎鍚归柡渚囧枛閳藉鈻庡鍕泿闂備線娼чˇ顓㈠磿閸濆嫀锝夋惞閸︻厾锛滈柡澶婄墑閸斿秶浜搁鐔翠簻闁瑰墽鍋ㄩ崑銏拷瑙勬处娴滎亜鐣峰锟介、姗�鎮欓弶鎴濆濠电姴鐥夐弶鍖℃嫹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋娆忕仼闁汇値鍠楅妵鍕箛閳轰礁濮㈡繛瀛樼矆缁瑥顫忓ú顏呭殥闁靛牆鎲涢姀锛勭婵炴潙顑嗗▍鍥瑰鍜佺劸闁宠閰ｉ獮瀣偐闂堟稓顔岄梻鍌欒兌缁垶宕濋弴銏╂晪妞ゆ挾濮存慨顒勬煥閻斿墎鐭欐慨濠傛惈鏁堥柛銉戝懍绱欐繝鐢靛仒閸栫娀宕橀鍛櫑闂傚倸鍊峰ù鍥敋瑜忛敓鑺ョ▓閺呮繄鍒掑▎鎾抽唶闁靛鍎抽弻褍鈹戦悙鏉戠亶闁稿鎹囬弫鎾绘寠婢跺娅ょ紓浣芥閺咁偆鍒掑▎鎴炲珰闂佹鍨卞▍濠囨煛鐏炵晫效鐎规洦鍋婂畷鐔碱敃椤掍礁顏堕梺姹囧灮椤牏绮婚娑氱鐎瑰壊鍠曠花濂告煃闁垮鐏撮柡灞剧洴閺佸倻鎷犻幓鎺戭劀闂備胶绮敮鐐哄磻閹捐埖宕叉繛鎴欏灩缁犵粯銇勯弴鐐村櫤妞ゃ儲鐗滅槐鎾寸瑹閸パ勭亪濡炪値鍘鹃崗姗�鎮伴鍢夌喖鎳栭埡鍐跨床婵犵妲呴崹鎶藉储瑜旈悰顔碱吋婢跺鎷绘繛杈剧到閹诧繝宕悙鐑樼厱闁哄喛鎷锋い顓炴处缁傚秶绮欐惔鎾寸�婚梺鐟邦嚟婵磭绮径瀣瘈闁汇垽娼ф牎缂佺偓婢樼粔褰掑箖閿熺姵鍋勯柛蹇氬亹閸樼敻姊洪崜鑼帥闁哥姵鐗犲鍐测枎韫囷絿鍞甸悷婊冪Ч閹椽濡搁埡浣勶箓鏌涢弴銊ョ仩妞ゎ偄鎳橀弻宥夋寠婢跺妫￠梺姹囧�撶欢姘跺箖濡ゅ啯鍠嗛柛鏇ㄥ墰椤︻參姊洪崫銉バｉ柣妤冨█婵″瓨鎷呴懖婵囨瀹曘劑顢欓懞銉户闂傚倷绀侀崥瀣娴犲纾块柟璺侯潟閿熻棄鎳橀弻銊э拷锝冨妺缁ㄥ姊洪崫鍕枆闁稿瀚粋鎺楁晝閸屾稓鍘撻梻浣哥仢椤戝懘鎮橀幘顔界厸閻忕偛澧介埥澶愭煃閽樺妲告い顐ｇ矒瀹曠厧鈹戦崱鈺傛祮缂傚倸鍊搁崐鐑芥嚄閼稿灚鍙忛柣銏㈩焾缁犳煡鏌涢妷顔煎缂佺姵鐗楁穱濠囧Χ韫囨柨顏舵俊鐐�ら崑鍛崲閸儱绠栭柍鈺佸暞閸庣喖鏌曡箛瀣仼缂傚秴妫濆铏规嫚閹绘帩鍔夊銈嗘⒐閻楃姴鐣烽弶璇炬棃宕ㄩ鐘垫毇闂備胶顭堥張顒�顫濋妸鈺佹辈闁挎棁濮ら崣蹇斾繆閵堝拋鍎愰悗姘辨嚀椤啴濡堕崘銊т痪濠碘槅鍋勯崯顐︽偩閻戣棄纭�闁绘劏鏅滈悗璇测攽閻愬弶顥為柛銊ф暩閼洪亶濡烽埡鍌楁嫽婵炶揪绲块悺鏃堝吹濞嗘劗绠鹃柡澶嬪灥濡插鏌嶇拠鑼у┑顕嗘嫹闂侀潧鐗嗛幊鎰邦敊閸℃稒鈷戠紓浣姑悘鍗炩攽椤斿搫锟芥繂鐣烽幇鐗堝仺闁告稑锕﹂崣鍡椻攽閻樼粯娑ф俊顐ｇ箞椤㈡挸螖閿熶粙婀佸┑鐘诧工鐎氼噣鎯岀�ｎ喗鐓忛柛銉戝喚浼傜紓浣哄У閻╊垱淇婇悜鑺ユ櫇闁跨喍绮欓、鏃堟晸閿燂拷
			if(!role.getJumpRole().checkValidJump(positions, destPos))
			{
				role.getJumpRole().confirmPositionToStart();
				return false;
			}
		}
		else
		{
			// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柣妯荤垹閸ャ劎鍘遍梺闈涱槶閸ㄥ搫鈻嶉崶顒佺厱婵☆垳鍘ч埢鍫熸叏婵犲嫮甯涢柟宄版嚇閹煎綊鎮烽幍顕呭仹闂傚倷鐒﹂幃鍫曞礉瀹�鍕亯闁绘挸瀵掗崵鏇㈡煙闂傚鍔嶉柛銈嗗浮閺屾洟宕煎┑鍥х獩濡炪倧瀵岄崹璺侯潖濞差亜浼犻柛鏇ㄥ枤濡俱劑鎮楅惂鍛婂闂佽法鍠嶇划娆忕暦椤掑嫭鍋ㄩ柛娑橈功閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹ê锟藉爼鐓崶褜鍎忓┑顔煎�婚敓鍊燁潐濞叉鎹㈤崼銉ョ畺闁靛繈鍊曠粈鍌炴煠濞村娅呮鐐村姍濮婄粯鎷呴搹骞匡拷濠囨煕閹惧绠炵�规洘绻堝鎾閳╁啯顏熼梻浣稿悑娴滀粙宕曢懠顒傜焼閻庯綆鍋嗙弧锟介梺璺ㄥ枙婵倗绮悢鍏兼櫢闁芥ê顦藉鏍ㄧ箾瀹割喕绨荤紒鐘卞嵆楠炴牗娼忛崜褎鍋ч梺浼欑秮濞佳囧煘閹达附鍊烽柤纰卞墯閸曢箖姊虹粙鍖℃敾缂佽鍊块幃鎯х暋閹佃櫕鏂�闂佸壊鍋掗崜姘憋拷姘秺閺屻劌鈹戦崱娑憋拷妤�顭胯缁犳牠寮婚悢鍏煎�荤紒娑橆儐椤ユ牠姊洪悷鏉跨骇闁圭鍟块悾鐑芥偄绾拌鲸鏅㈤梺绋胯閸婃牞鈪插┑鐘殿暜缁辨洟宕戦幋锕�纾圭憸蹇曟閹炬剚娼╅悹楦挎椤㈠懘姊洪幆褎绂嬮柛瀣�婚幑銏ゅ幢濞戞瑧鍘介梺闈涚箞閸╁嫰鎮為崜褏纾奸柨鐔烘櫕閿熸枻缍嗛崑浣圭濠婂牊鐓涚�广儱鍟慨锟芥繝銏ｎ潐閿曘垽寮诲☉銏″�锋い蹇撳椤洤鈹戦纭锋敾婵＄偠妫勮灋闁告劦鐓佽ぐ鎺懳ч柛鈩冪懄閸掓盯鎮楃憴鍕８闁告梹鍨块妴浣糕槈濮楀棙鍍靛銈嗗笒閸婂骞夐幐搴ｇ瘈闁汇垽娼у暩闂佽桨绀侀幉锟犲箞閵娾晜鍊婚柦妯侯槹閻庮剟姊鸿ぐ鎺擄紵缂侊拷娴ｅ搫顥氱紓浣诡焽缁犻箖鏌熺�涙鎳冮柣蹇ｄ邯閺屾稓锟斤綆浜堕崕鏃堟煟閹垮啫浜扮�规洖鐖兼俊鎼佹晜鐟欏嫬顏虹紓鍌氬�烽懗鑸电箾閿熺晫绱掗悩宕囧⒌鐎殿喖顭锋俊鎼佸煛閸屾矮绨婚梺鑽ゅТ濞诧箓鎮鹃锕�绠荤紓浣诡焽閸樺灚绻涢幘纾嬪闁诲繑绻冩穱濠囨偩瀹�锟界壕鑲╃磽娴ｈ鐒界紒鐘靛仧閿熷�燁潐濞叉鏁埄鍐х箚闁割偅娲栭悙濠勬喐鎼淬劌纾规い鏍仦閳锋帡鏌涚仦鍓ф噭缂佷胶澧楁穱濠傤渻閻撳骸顫囬梺璇″枤閸嬨倝寮崘顔肩＜婵﹢纭搁崬鍫曟⒒娴ｅ搫甯舵い顐ｆ礋瀹曟劕螖閸涱喖鍓规繝銏ｅ煐閸旀牠鎮″▎鎾寸厽闁瑰鍊栭幋位澶愬冀椤撶喓鍘垫俊鐐差儏妤犳悂宕㈤幘顔界厸濞达絿鎳撴慨鍫ユ煙椤栨稒鐓ラ柍瑙勫灴瀹曞ジ濮�閳╁啯鐝ら梻鍌氬�搁崐宄懊归崶顒夋晪鐟滃繘鏁撻挊澶屼粵閻㈩垪锟藉磭鏆﹂柕蹇ョ磿闂勫嫮绱掗娑欑┛闁归鍏樺顕�宕煎┑鍫О婵＄偑鍊栭弻銊ノｉ崼锝庢▌闂佸搫鏈惄顖炲春閸曨垰绀傞柨鏃囨閸濈儤顨ラ悙鑼缂佺粯绻傞～婵嬵敇濞戞瑥顏归梻鍌欑閹诧繝宕濋弽顑句汗闁告劑鍓敐鍡欑瘈婵﹩鍘鹃崢钘夆攽鎺抽崐鎾绘倿閿斿彞鐒婃い鎾卞灪閻撶喖鏌ㄥ┑鍡樻悙闁告ê鐡ㄩ妵鍕閳藉棙鐤侀梺杞扮劍閹瑰洭骞冮崜褌娌柦妯侯槺閺屟勭節绾板纾块柛瀣灴瀹曟劙寮撮悩鍐插簥闂佸湱澧楀妯肩不閻樼粯鐓欓柣妤�鐗婄欢鏌ユ煕鐏炶濮傞柡灞剧☉閳藉顫滈崼婵嗩潬缂傚倷璁插Σ鍕箯閻戣姤鈷掑〒姘炬嫹婵炰匠鍕垫闊洦娲栫欢銈夋煕閹炬瀚崢褰掓⒑缂佹ê濮﹂柛蹇旂〒閹广垽宕卞Ο闀愮盎闂佽婢樻晶搴ㄥ箖婵傚憡鐓欓柛鎰絻閺嗭綁鏌＄仦鐣屝ら柟椋庡█閹崇娀顢栭搴℃嫅閹烽鎲撮崟顒傤槬閻庤娲﹂崜鐔煎春閵忊剝鍎熼柕濞垮劤椤撴椽姊虹紒妯兼噧闁硅櫕鍔栭幆鏃�绻濋崶銊㈡嫽婵炶揪绲块悺鏃堝吹濞嗘挻鐓曢柟瀵稿У濞呮洜绱掓潏鈺佷槐鐎规洖宕埥澶娢熺涵椋庡耿闂傚倷鑳剁涵鍫曞礈濠靛﹥鎳屾繝鐢靛仜閹虫劖绻涢敓浠嬫煛瀹�瀣М濠殿噯鎷烽梺缁樏崯鍧楀汲閸儲鈷戠紓浣股戠亸顓犵磼缂佹﹫鑰跨�殿喛顕ч埥澶愬閻橀潧濮堕梻浣告啞閸斿繘寮插┑瀣庡洭顢橀悩鐢碉紳婵炶揪绲块幊鎾存叏閸喐鍙忓┑鐘插�荤粔娲煏閸℃鏆ｅ┑锛勫厴閸╋繝宕掑鐐濡炲鍑介幏鐑芥偡閺夋妫岄梺鍝ュУ閻楃姴鐣峰鍫濋唶闁哄洨鍟块幏娲煛婢跺苯浠﹀鐟版钘濋柨鏇炲�归悡鏇炩攽閻樻彃锟藉綊宕戦妷锔绘闁绘劖褰冮弳锝囷拷瑙勬礃缁繘藝鏉堛劎绠剧�癸拷婵犱線鍋楅梺鍝勭焿缁犳垼鐏掗梺缁樿壘椤曨厾绮堟繝鍥ㄢ拺闂傚牊渚楀Σ鎾煛閸涱喚鐭掗柛鈺傜洴楠炴帒螖娴ｅ搫骞堥梺璇茬箳閸嬫稒鏅舵禒瀣疇闁糕剝绋掗悡鏇㈢叓閸ャ劍灏甸柣蹇氫含缁辨帗娼忛妸銉﹁癁濡炪們鍨哄畝绋跨暦閵娾晩鏁囬柣妯块哺椤㈡﹢姊虹拠鎻掝劉妞ゆ梹鐗犲畷浼村冀椤撴冻鎷烽敃鍌涚叆閻庯絺鏅濈粻姘舵⒑瑜版帗锛熺紒锟芥笟锟介幃鈥斥槈濡繐缍婇弫鎰板川椤旇棄鏋戦梻浣告啞缁诲倿鏌婇敐鍜佹綎缂備焦蓱婵挳鏌涘☉姗堟敾闁稿孩鎹囬弻锝夋倷閺夋垵姣堥梺绋款儏閿曘倝鎮鹃悜钘夊嵆闁诲繒绮浠嬨�侀弮鍫濈妞ゆ帒鍋婇幏鐑筋敆娴ｈ櫣鐦堥梺姹囧灲濞佳冪摥闂備胶顭堥敃锕傚极鐠囧樊鍤曢柕濠忓椤╃兘鎮楅敐搴′簽闁告妫勯埞鎴﹀煡閸℃浠╅梺鍦拡閸嬪棝鎯�椤忓浂妲诲銈庡弨濞夋洟骞戦崟顖氫紶闁告洖鍚�缁辨棃姊绘担鍛婃儓闁活厼顦辩槐鐐寸瑹閿熶粙鎮伴鍢夌喓娑甸柨瀣伓濠电偞鍨堕悷顖炴倿閼恒儯浜滈柨鏂跨仢瀹撳棙鎱ㄦ繝鍐┿仢鐎规洦鍋婂畷鐔碱敇閻樿京绀冮梻鍌欑閹芥粍鎱ㄩ悽鍛婂亱闁哄洢鍨洪崑鈺呮煟閹寸姷鎽傞柡浣稿暣閺屻劑寮撮鍛伓缂傚倷绶ら幏鐑芥倵閿濆骸鏋熼柍閿嬪浮閺屾盯顢曢妶鍛亖闂佸疇妫勯ˇ顖炩�﹂崸妤佸仭闁规鍠栭埅闈涒攽椤旂》鍔熺紒顕呭灦楠炲繘宕ㄧ�涙ê娈熼梺闈涳紡娓氬﹥瀚瑰┑鐘叉处閳锋垿鏌涘┑鍕姎閺嶁�斥攽閻愭彃绾ч柨鏇樺灲閻涱噣宕奸妷銉庘晠鏌嶆潪鎵鐟滃秹鈥︾捄銊﹀磯濞撴凹鍨伴崜鐗堢箾鐎涙鐭掑ù婊嗘硾椤繘鎼归崷顓狅紲濠碘槅鍨板ù姘濠婂棛浜藉┑鐘垫暩婵潙煤閵堝瑙︾憸鐗堝笚閻撴盯鏌涢妷銏℃珔濞存粌缍婇弻锟犳晸閼恒儳顩烽悗锝庡亞閸樿棄鈹戦埥鍡楃仴婵炲拑缍侀弫宥咁吋閸℃劒绨婚梺鎸庣箓濡盯宕ｉ敓浠嬫⒑閸濆嫮鐒跨紒缁樼箓閻ｇ兘濡搁埡濠冩櫓闂佽姤锚椤э拷闁归鍏橀獮鍥偋閸垹骞愰梺璇茬箳閸嬬娀顢氳閹便劑宕掗悙瀵稿幍濡炪倖鏌ㄩ幖顐︽晸閼恒儳绠撻柣锝囧厴楠炴帡骞嬮弮锟介～宥呪攽椤旂瓔娈旀俊顐ｆ⒒濡叉劙鏁撻敓锟�
			int cruiseid = role.getCruiseid();
			if(! role.checkValidMove(cruiseid, positions, destPos, curTick, length))
			{
				role.confirmCurPosition();
				return false;
			}
		}
		role.move(destPos);
		if(!role.isJumping())
			SceneBattle.process(role, length, curTick);
		return true;
	}
	

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 790435;

	public int getType() {
		return 790435;
	}

	public fire.pb.move.Pos curpos; // 人物当前点
	public java.util.LinkedList<fire.pb.move.Pos> poslist; // 路径上的关键点
	public long sceneid; // 场景id

	public CCheckMove() {
		curpos = new fire.pb.move.Pos();
		poslist = new java.util.LinkedList<fire.pb.move.Pos>();
	}

	public CCheckMove(fire.pb.move.Pos _curpos_, java.util.LinkedList<fire.pb.move.Pos> _poslist_, long _sceneid_) {
		this.curpos = _curpos_;
		this.poslist = _poslist_;
		this.sceneid = _sceneid_;
	}

	public final boolean _validator_() {
		if (!curpos._validator_()) return false;
		for (fire.pb.move.Pos _v_ : poslist)
			if (!_v_._validator_()) return false;
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(curpos);
		_os_.compact_uint32(poslist.size());
		for (fire.pb.move.Pos _v_ : poslist) {
			_os_.marshal(_v_);
		}
		_os_.marshal(sceneid);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		curpos.unmarshal(_os_);
		for (int _size_ = _os_.uncompact_uint32(); _size_ > 0; --_size_) {
			fire.pb.move.Pos _v_ = new fire.pb.move.Pos();
			_v_.unmarshal(_os_);
			poslist.add(_v_);
		}
		sceneid = _os_.unmarshal_long();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CCheckMove) {
			CCheckMove _o_ = (CCheckMove)_o1_;
			if (!curpos.equals(_o_.curpos)) return false;
			if (!poslist.equals(_o_.poslist)) return false;
			if (sceneid != _o_.sceneid) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += curpos.hashCode();
		_h_ += poslist.hashCode();
		_h_ += (int)sceneid;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(curpos).append(",");
		_sb_.append(poslist).append(",");
		_sb_.append(sceneid).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

