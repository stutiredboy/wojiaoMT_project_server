
package fire.pb.friends;
import java.util.Calendar;
import java.util.HashMap;
import java.util.Map;

import fire.pb.RoleConfigManager;
import fire.pb.activity.award.RewardMgr;
import fire.pb.common.SCommon;
import fire.pb.http.HttpCallBackHandler;
import fire.pb.main.ConfigManager;
import fire.pb.main.Gs;
import fire.pb.mission.instance.LevelGroupAward;
import fire.pb.talk.MessageMgr;
import fire.pb.util.FireProp;
import net.sf.json.JSONObject;

import org.apache.log4j.Logger;
import org.apache.http.client.methods.HttpGet;












// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CGetRecruitAward__ extends mkio.Protocol { }

/** 招募
*/
// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CGetRecruitAward extends __CGetRecruitAward__ {
	public static final Logger logger = Logger.getLogger("FRIEND");
	public static final String address = FireProp.getStringValue("sys", "sys.zhaomu.address");
	public static final String func1 = "/enlist/set_times_prize";
	public static final String func2 = "/enlist/set_prize_status";
	
	private static void distributeAward(final long roleid, final int awardid, final int IsDbPoint, Map<String, Object> paras) {
		if (paras == null)
			paras = new HashMap<String, Object>(20);
		
		fire.pb.activity.award.RewardMgr.getInstance().distributeAllAward(roleid, awardid, paras,
						fire.log.enums.YYLoggerTuJingEnum.tujing_Value_shifu, awardid,
						0, "闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰紓鍌氬�搁崐宄懊归崶褜娴栭柕濞у啫鐏婂┑鐐叉濞存岸宕甸弴銏＄厱濠电姴瀚▍蹇斾繆閹绘帩鐓奸柟顔筋焾缁犳盯濡烽敃锟介锟�");
	}
	
	private static class GetRecruitAwardHttpHandler extends HttpCallBackHandler {
		private HttpGet request;
		private final long roleId;
		private final int awardtype;
		private CGetRecruitAward proto;
		
		public GetRecruitAwardHttpHandler(long roleId, HttpGet request, int awardtype, CGetRecruitAward proto) {
			this.request = request;
			this.roleId = roleId;
			this.awardtype = awardtype;
			this.proto = proto;
		}
		
		@Override
		protected boolean process(JSONObject json) {
			final String errno = json.getString("errno");
			SGetRecruitAward snd = new SGetRecruitAward();
			snd.awardtype = proto.awardtype;
			snd.awardid = proto.awardid;
			snd.recruitrole = proto.recruitrole;
			snd.recruitserver = proto.recruitserver;
			snd.result = 0;
            if(errno.isEmpty() || errno.equals("")) {
            	new mkdb.Procedure() {
    				@Override
    				protected boolean process() {
    					//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閸愯弓鐢婚梻浣瑰濞叉牠宕愰幖浣稿瀭闁稿瞼鍋為悡鐔兼煏韫囧﹤澧查柛瀣█閺屻劑鎮㈢紒姗嗘闂佸摜鍣ラ崑濠囧春閵夛箑绶為柟閭﹀墻濞煎﹪姊虹紒妯曟垿顢欓弽顬綁鏁撻敓锟�?
    					if(awardtype == 1) {
    						RecruitAwards ra = ConfigManager.getInstance().getConf(RecruitAwards.class).get(proto.awardid);
    						if(ra == null) {
    							logger.info("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleId + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閹绘帞锟筋參姊婚崒姘卞闁稿繑鑹鹃埥澶娢熷鍕棃鐎规洏鍎甸幐濠冨緞鐎ｎ亝鐏庢俊鐐�戦崹娲�冮崱娆戠當闁绘柨鎽滅弧锟介梺鍛婃处閸橀箖宕㈤鍕拻闁稿本鐟ㄩ崗宀�鐥鐐靛煟鐎规洘绮岄埞鎴狅拷锝庣厜閹风兘宕橀鐓庣獩濡炪倖鐗楀銊х驳韫囨稒鈷戠紒澶婃鐎氬嘲鈻撻弴銏＄厽闁规儳顕幊鍥ㄦ叏婵犲啯銇濈�规洖缍婇、姘跺川椤撶偛顥愰梻鍌欑閻ゅ洤螞閸曨垁鍥偨缁嬭法鐣哄┑掳鍊ч幏閿嬨亜椤愶絿绠炴い銏★耿閹晠宕橀崣澶屽酱闂備浇顕х�涒晠顢欓弽顓為棷妞ゆ洩鎷风�规洘鍨垮畷銊╊敍閵堝棗顏堕梻鍌氱墛缁嬪繘宕戦姀顫嫹濞堝灝鏋涢柣鏍с偢閻涱喚锟斤綆鍠楅崐濠氭煕閳╁啯绀堥柡渚�绠栧濠氬磼濮橆剨鎷烽悜鑺ュ�块柨鏇炲�归崕鎴犳喐閻楀牆绗掔紒锟芥径宀嬫嫹閻у憡瀚归梺璺ㄥ枍缁瑩寮幘缁樺殟闁靛鍎卞В鍫ユ⒑閸涘﹥灏甸柛鐘崇墬娣囧﹪骞橀鑲╊槰闂侀潧顭堥崹娲綖瀹ュ鈷戦梻鍫熺〒缁犲啿鈹戦鎯у幋閽樻繈鏌ㄩ悤鍌涘?:" + proto.awardid + ",濠电姷鏁告慨鐑藉极閹间礁纾婚柣妯款嚙缁犲灚銇勮箛鎾搭棞缂佽翰鍊濋弻锕�螣閻氬绀嗗┑鐐村灦鑿ら柡锟芥禒瀣�甸柨婵嗙凹缁ㄥ鏌涚�ｎ亞效婵﹥妞藉Λ鍐ㄢ槈濮橆剦鏆繝鐢靛仜閻即宕濇惔銏㈢彾闁哄洢鍨洪崐閿嬨亜閹存繂缍栫紒銊ヮ煼濮婃椽宕崟顐ｇ仌闂佸湱鍏橀弨杈ㄧ┍婵犲洤鐭楀璺猴功椤戝倻绱撴笟鍥ф灈闁绘绻橀弫鎾诲棘閵堝洨校闂佸憡鎸荤粙鎾寸珶閺囥垺鍤冮柍鍝勵儐鐎氬綊鏌ｈ閹诧紕锟芥艾缍婂铏规崉閵娿儲鐏侀梺鍝勬媼閸嬪懐绮嬪澶婄濞达綀鍊介埡鍐╁枑閹兼惌鐓夌紞鏍煛閸ャ儱鐏柣鎾卞劦閺岋綁寮撮悙璇ф嫹閸︻叏鎷峰鐐");
    							snd.result = 0;
    						} else {
    							String [] awardLst = ra.getAwards().split(";");
    							for (String awardStr : awardLst) {
    								int pureAwardId = Integer.parseInt(awardStr);
    								CGetRecruitAward.distributeAward(roleId, pureAwardId, 0, null);
    							}
    							snd.result = 1;
    						}
    					} else if(awardtype == 2) {
    						//闂傚倸鍊搁崐鎼佸磹瀹勬噴褰掑炊閵娧呭骄闂佸壊鍋呴幆濠傗槈閵忕姷顦板銈嗙壄閹风兘鏌涢妷锝呭妞ゆ洟浜堕弻鈩冨緞鐎ｎ亞浠奸梺鎸庣♁閻╊垰顫忓ú顏勬嵍妞ゆ挆鍛Ъ缂傚倷闄嶉崝搴ㄥ磿閵堝洨鐭夐柟鐑樺焾濞尖晜銇勯幘瀵哥焼缂併劌顭峰娲捶椤撶偛濡洪梺鎼炲妿閺佸寮幘缁樺癄濠㈣埖顭囬崥瀣旈悩闈涗沪妞ゃ劌鎳橀垾锕傚Ω閳轰線鍞堕梺缁樻煥閹碱偊鐛崼銉︹拻濞达絽鎲＄拹锟犳煕鎼存稑锟芥繈鐛幇鏉夸紶闁靛／鍛殽婵犳鍠楅…鍫ュ春閺嶎厽鍋傛繛鎴炩棨瑜版帗鏅查柛鈩兠禒鈺呮⒑缁嬫鍎嶉柛銊у劋缁岃鲸绻濋崶鑸垫櫇濡炪倖甯婄粈渚�顢旈敓锟�?婵犵數濮烽弫鍛婃叏閻㈠壊鏁婇柡宥庡幖缁愭鎱ㄥΟ鎸庣【缂佺姷濞�閺岀喖骞戦幇闈涙缂佺偓宕橀褔鍩為幋锔藉亹闁圭粯甯╂禒鎯ь渻閵堝骸浜濇繛鍙夘焽閹广垹鈹戠�ｎ偒妫冨┑鐐村灥瀹曨剟宕滈柆宥嗏拺缂佸娼￠妤呮煟椤撶偛锟藉灝顕ｆ繝姘櫇闁跨喎锟界喓浜藉┑鐐存尰閸戝綊宕归崡鐐存瘎缂傚倸鍊搁崐椋庢閿熺姴闂い鏍仜缁狀垶鏌ㄩ悤鍌涘
//    						RecruitChargeAwards rca = ConfigManager.getInstance().getConf(RecruitChargeAwards.class).get(proto.awardid);
//    						if(rca == null) {
//    							logger.info("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleId + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閹绘帞锟筋參姊婚崒姘卞闁稿繑鑹鹃埥澶娢熷鍕棃鐎规洏鍎甸幐濠冨緞鐎ｎ亝鐏庢俊鐐�戦崹娲�冮崱娆戠當闁绘柨鎽滅弧锟介梺鍛婃处閸橀箖宕㈤鍕拻闁稿本鐟ㄩ崗宀�鐥鐐靛煟鐎规洘绮岄埞鎴狅拷锝庣厜閹风兘宕橀鐓庣獩濡炪倖鐗楀銊х驳韫囨稒鈷戠紒澶婃鐎氬嘲鈻撻弴銏＄厱閻庯急鍐ㄢ拤缂備胶绮惄顖氱暦閸楃倣鐔煎传閸曞灚缍嬬紓鍌氬�烽悞锕傚Φ濞戙垹鐤炬繛鎴旀噰閿熸枻绠撳畷绋课旀担闀愮敾闂備胶鍘ф竟濠囧礈濞嗘劗顩查柨鐕傛嫹" + proto.recruitrole + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰撮梻浣筋嚙濮橈箓锝炴径濞掑搫顫滈敓浠嬪Υ閸愨晝绡�闁稿本绮嶅▓楣冩⒑闂堟单鍫ュ疾濠婂牆鐤鹃柟闂寸劍閻撱儵鏌ｉ弴鐐诧拷鍦拷姘炬嫹?闂傚倸鍊搁崐椋庣矆娓氾拷瀹曘儳锟斤綆鍓涢惌鍫ユ煙缂併垹鏋涢柣銈囧亾缁绘繃绻濋崒婊冾杸闂佺顑傞弲鐘诲蓟濞戞鏃堝礃閵娿倖鐫忛梻浣哄皑閹峰嘲霉閻樺樊鍎愰柣鎾存礋閹﹢鎮欓幓鎺嗘寖闂侀潧妫欑敮鎺椻�﹂懗顖ｆ婵炲瓨绮嶇划鎾诲春閻愬搫绠ｉ柨鏃傜帛閺咁亪姊虹化鏇炲⒉闁挎碍銇勮箛銉﹀:" + proto.awardid + ",濠电姷鏁告慨鐑藉极閹间礁纾婚柣妯款嚙缁犲灚銇勮箛鎾搭棞缂佽翰鍊濋弻锕�螣閻氬绀嗗┑鐐村灦鑿ら柡锟芥禒瀣�甸柨婵嗙凹缁ㄥ鏌涚�ｎ亞效婵﹥妞藉Λ鍐ㄢ槈濮橆剦鏆繝鐢靛仜閻即宕濇惔銏㈢彾闁哄洢鍨洪崐閿嬨亜閹存繂缍栫紒銊ヮ煼濮婃椽宕崟顐ｇ仌闂佸湱鍏橀弨杈ㄧ┍婵犲洤鐭楀璺猴功椤戝倻绱撴笟鍥ф灈闁绘绻橀弫鎾诲棘閵堝洨校闂佸憡鎸荤粙鎾寸珶閺囥垺鍤冮柍鍝勵儐鐎氬綊鏌ｈ閹诧紕锟芥艾缍婂铏规崉閵娿儲鐏侀梺鍝勬媼閸嬪懐绮嬪澶婄濞达綀鍊介埡鍐╁枑閹兼惌鐓夌紞鏍煛閸ャ儱鐏柣鎾卞劦閺岋綁寮撮悙璇ф嫹閸︻叏鎷峰鐐");
//    							snd.result = 0;
//    						} else {
//    							String [] awardLst = rca.getAwards().split(";");
//    							for (String awardStr : awardLst) {
//    								int pureAwardId = Integer.parseInt(awardStr);
//    								CGetRecruitAward.distributeAward(roleId, pureAwardId, 0, null);
//    							}
//    							snd.result = 1;
//    						}
    					} else if(awardtype == 3) {
    						MyRecruitAwards mra = ConfigManager.getInstance().getConf(MyRecruitAwards.class).get(proto.awardid);
    						if(mra == null) {
    							logger.info("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleId + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閹绘帞锟筋參姊婚崒姘卞闁稿繑鑹鹃埥澶娢熷鍕棃鐎规洏鍎甸幐濠冨緞鐎ｎ亝鐏庢俊鐐�戦崹娲�冮崱娆戠當闁绘柨鎽滅弧锟介梺鍛婃处閸橀箖宕㈤鍕拻闁稿本鐟ㄩ崗宀�鐥鐐靛煟鐎规洘绮岄埞鎴狅拷锝庣厜閹风兘宕橀鐓庣獩濡炪倖鐗楀銊х驳韫囨稒鈷戠紒澶婃鐎氬嘲鈻撻弴銏＄厱閻庯急鍐ㄢ拤缂備胶绮惄顖氱暦閸楃倣鐔煎传閸曞灚缍嬬紓鍌氬�烽悞锕傚Φ濞戙垹鐤炬繛鎴旀噰閿熸枻绠撳畷绋课旀担闀愮敾闂備胶鍘ф竟濠囧礈濞嗘劗顩查柨鐕傛嫹" + proto.recruitrole + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰紓鍌氬�搁崐椋庢閿熺姴绐楅柡宥庡幗閸婅埖鎱ㄥ鍡楀⒒闁搞倖顨婇弻娑㈠即閵娿儰绨介梺鍝勬濡繈寮诲☉銏犲嵆闁靛鍎辩粻鍦磽娓氬﹥瀚归梺鍓插亖閸庢煡鍩涢幒鎳ㄥ綊鏁愰崨顔跨濠电媴鎷峰ù鐘差儐閻撴洟鏌￠崒婵囩《闁诲繘浜堕弻銊╂偄鐠囨畫鎾绘煕閹存繄绉虹�规洘绮撻幃銏ゆ偂楠烆兙鍎甸弻娑㈠箛閳轰礁唯濠碘剝褰冮悧鎾诲蓟閺囷紕鐤�闁哄洨鍊妷锔轰簻闁挎柨鍚嬬�氾拷?:" + proto.awardid + ",濠电姷鏁告慨鐑藉极閹间礁纾婚柣妯款嚙缁犲灚銇勮箛鎾搭棞缂佽翰鍊濋弻锕�螣閻氬绀嗗┑鐐村灦鑿ら柡锟芥禒瀣�甸柨婵嗙凹缁ㄥ鏌涚�ｎ亞效婵﹥妞藉Λ鍐ㄢ槈濮橆剦鏆繝鐢靛仜閻即宕濇惔銏㈢彾闁哄洢鍨洪崐閿嬨亜閹存繂缍栫紒銊ヮ煼濮婃椽宕崟顐ｇ仌闂佸湱鍏橀弨杈ㄧ┍婵犲洤鐭楀璺猴功椤戝倻绱撴笟鍥ф灈闁绘绻橀弫鎾诲棘閵堝洨校闂佸憡鎸荤粙鎾寸珶閺囥垺鍤冮柍鍝勵儐鐎氬綊鏌ｈ閹诧紕锟芥艾缍婂铏规崉閵娿儲鐏侀梺鍝勬媼閸嬪懐绮嬪澶婄濞达綀鍊介埡鍐╁枑閹兼惌鐓夌紞鏍煛閸ャ儱鐏柣鎾卞劦閺岋綁寮撮悙璇ф嫹閸︻叏鎷峰鐐");
    							snd.result = 0;
    						} else {
    							String [] awardLst = mra.getAwards().split(";");
    							for (String awardStr : awardLst) {
    								int pureAwardId = Integer.parseInt(awardStr);
    								CGetRecruitAward.distributeAward(roleId, pureAwardId, 0, null);
    							}
    							snd.result = 1;		
    							xbean.RecruitAward srcra = xtable.Rolerecruitaward.get(roleId);
    							if(srcra != null){
	    							srcra.setGetnum(srcra.getGetnum() + 1);
	    							final long now = Calendar.getInstance().getTimeInMillis();
	    							srcra.setGettime(now);
	    							logger.info("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleId + "]濠电姷鏁告慨鐑姐�傞挊澹╋綁宕ㄩ弶鎴狅紱闂佸憡渚楅崣搴ㄦ偄閸℃ü绻嗘い鏍ㄧ懅缁夋寧绻涢幋鐑嗙劯闁哄啫鐗嗙粈瀣煃閻氬瓨瀚瑰┑顔款潐椤ㄥ﹤顫忓ú顏勭闁绘劖褰冩慨宀勬⒑閸涘﹥鐓ラ梺甯秮婵℃挳宕ㄩ弶鎴ｆ憰闂侀潧顧�婵″洭宕㈤柆宥嗏拺闁哄倶鍎插▍鍛存煕閻曚礁浜扮�规洜鏁婚、妤佹媴閾忚鍟庣紓浣鸿檸閸欏啴藟閹捐泛濮柨鐔剁矙濮婃椽宕崟顕呮蕉闂佺锕ョ换鍌炴偩閻戣姤鍊荤紒娑橆儐閺咃綁姊虹紒妯兼噧闁瑰啿绻掗敓鑺ヨ壘缂嶅﹪寮婚妸鈺傚亞闁稿本绋戦锟�" + proto.recruitrole + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰紓鍌氬�搁崐椋庢閿熺姴绐楅柡宥庡幗閸婅埖鎱ㄥ鍡楀⒒闁搞倖顨婇弻娑㈠即閵娿儰绨介梺鍝勬濡繈寮诲☉銏犲嵆闁靛鍎辩粻鍦磽娓氬﹥瀚归梺鍓插亖閸庢煡鍩涢幒鎳ㄥ綊鏁愰崨顔跨濠电媴鎷峰ù鐘差儐閻撴洟鏌￠崒婵囩《闁诲繘浜堕弻銊╂偄鐠囨畫鎾绘煕閹存繄绉虹�规洘绮撻幃銏ゆ偂楠烆兙鍎甸弻娑㈠箛閳轰礁唯濠碘剝褰冮悧鎾诲蓟閺囷紕鐤�闁哄洨鍊妷锔轰簻闁挎柨鍚嬬�氾拷?:" + proto.awardid + "!" + roleId + "闂傚倸鍊峰ù鍥敋瑜嶉～婵嬫晝閸岋妇绋忔繝銏ｅ煐閸旀牠宕戦妶澶嬬厸闁搞儮鏅涘皬闂佺粯甯掗敃銉ф崲濞戙垹骞㈡俊顖濇娴犳挳姊洪幖鐐插缂佽鐗撳濠氬Ω閳哄倸浜滈梺鍛婄箓鐎氬懘鏁愭径瀣幈闂侀潧鐗嗗Λ娆撳煕閹烘鐓ラ柣鏃傚劋濞呮洟鏌熼搹顐ｅ暗闁跨喕濮ら崙褰掑储閻ｅ瞼鍗氶柣鏃傚帶楠炪垺绻涢崱妯哄閹兼潙锕铏规崉閵娿儲鐝㈤梺鐟板殩閹凤拷" + srcra.getGetnum() + "婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柟闂寸绾剧粯绻涢幋鐑嗙劯婵炴垶鐔幏鐑芥濞戞瑥鏆堝銈庡亝濞茬喖寮婚敓鐘茬倞闁靛鍎虫禒鍏间繆濡わ拷閹冲酣鍩為幋锔藉亹閻犲泧鍐х矗闂備胶绮〃鍛存晝椤忓嫮鏆﹂柟杈鹃檮閺呮悂鏌ㄩ悤鍌涘?.");
    							} else {
    								logger.error("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleId + "]濠电姷鏁告慨鐑姐�傞挊澹╋綁宕ㄩ弶鎴狅紱闂佸憡渚楅崣搴ㄦ偄閸℃ü绻嗘い鏍ㄧ懅缁夋寧绻涢幋鐑嗙劯闁哄啫鐗嗙粈瀣煃閻氬瓨瀚瑰┑顔款潐椤ㄥ﹤顫忓ú顏勭闁绘劖褰冩慨宀勬⒑閸涘﹥鐓ラ梺甯秮婵℃挳宕ㄩ弶鎴ｆ憰闂侀潧顧�婵″洭宕㈤柆宥嗏拺闁哄倶鍎插▍鍛存煕閻樺疇澹橀柍缁樻崌婵拷闁挎稑瀚鏇㈡⒑閸撴彃浜介柛瀣閹﹢鏁冮崒娑氬幐闁诲繒鍋涙晶钘壝洪幘顔界厸濞达綀顫夊畷宀勬煛娴ｈ宕岄柡浣规崌閺佹捇鏁撻敓锟�?,濠电姷鏁告慨鐑藉极閹间礁纾婚柣妯款嚙缁犲灚銇勮箛鎾搭棞缂佽翰鍊濋弻锕�螣閻氬绀嗗┑鐐村灦鑿ら柡瀣捣閿熺晫鏁婚崑濠囧磻閹惧墎绀婂〒姘炬嫹闁绘侗鍣ｅ浠嬪Ω閿曪拷椤庢捇姊洪崨濠勭細闁稿孩妞藉畷顒勫垂椤愩倗鐦堥梺姹囧灲濞佳勭閿曞倹鐓曢柕濞垮劤閸╋綁鏌℃担鍓插剶婵﹨娅ｇ槐鎺懳熼懖鈺冩毉婵犵绱曢崑娑橆焽閹洭姊婚崒姘拷鎼佸磹瀹勬噴褰掑炊瑜滃ù鏍煏婵炵偓娅嗛柛銈呭閺屻倗绮欑捄銊ょ驳濠电偛鎳愭慨鍨┍婵犲洤围闊洦鏌ㄩ鍫曟⒒娴ｉ涓茬紒韫矙閹ê顫濇潏鈺冪厯婵犵數濮寸�氼噣鎯岄幘瀵哥鐎癸拷閿熶粙藟閿燂拷!");
    							}
    						}
    					}
    					psendWhileCommit(roleId, snd);
    					return true;
    				}
    			}.submit();
            } else {
            	logger.info("CGetRecruitAward.GetRecruitAwardHttpHandler:errno=" + errno + ",message=" + json.getString("message"));
            	snd.result = 0;
            	gnet.link.Onlines.getInstance().send(roleId, snd);
            }
			return true;
		}
	}
	
	@Override
	protected void process() {
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		logger.info("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleid + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閹绘帞锟筋參姊婚崒姘卞闁稿繑鑹鹃埥澶娢熷鍕棃鐎规洏鍎甸幐濠冨緞鐎ｎ亝鐏庢俊鐐�戦崹娲�冮崱娆戠當闁绘柨鎽滅弧锟介梺鍛婃处閸橀箖宕㈤鍕拻闁稿本鐟ㄩ崗宀�鐥鐐靛煟鐎规洘绮岄埞鎴狅拷锝庣厜閹风兘宕橀鐓庣獩濡炪倖鐗楀銊х驳韫囨稒鈷戠紒澶婃鐎氬嘲鈻撻弴銏＄厽闁规儳顕幊鍥ㄦ叏婵犲啯銇濈�规洖缍婇、姘跺川椤撶偛顥愰梻鍌欑閻ゅ洤螞閸曨垁鍥偨缁嬭法鐣哄┑掳鍊ч幏閿嬨亜椤愶絿绠炴い銏★耿閹晠宕橀崣澶屽将缂傚倸鍊搁崐宄懊归崶褜娴栭柕濞у啫鐏婂┑鐐叉濞存岸宕甸弴銏＄厱濠电姴瀚▍蹇斾繆閹绘帩鐓奸柟顔筋焾缁犳盯濡烽敃锟介锟�!" + 
			"type=" + awardtype + ",id=" + awardid + ",recruitrole=" + recruitrole + "@server=" + recruitserver);
		try {
			String serverid = Gs.serverid;
			if(awardtype == 1) {
				//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰紓鍌氬�搁崐椋庣矆娓氾拷椤㈡牠宕ㄥ銈呮喘閹粙骞栭悜鍥ㄥ濞撴熬鎷风�殿噮鍣ｅ畷鐓庘攽閸℃瑧宕哄┑锛勫亼閸婃牕顫忔繝姘仱闁哄啫鐗嗛悿顕�鏌ㄩ悢璇残撶紒缁樼箞閹粙妫冨☉鎺撶�版繝鐢靛仒閸栫娀宕惰閿涙瑩鎮峰鍛暭閻㈩垱顨婂畷鎴狅拷锝庡枟閻撴盯鏌涢妷銏℃珔闁哄鍨块弻娑樷枎韫囨洜顔掗梺鍝勮閸旀垿骞冮妶澶婄＜婵炴垶锕╂导锟�
				RecruitAwards ra = ConfigManager.getInstance().getConf(RecruitAwards.class).get(awardid);
				if(ra == null) {
					logger.info("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleid + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閹绘帞锟筋參姊婚崒姘卞闁稿繑鑹鹃埥澶娢熷鍕棃鐎规洏鍎甸幐濠冨緞鐎ｎ亝鐏庢俊鐐�戦崹娲�冮崱娆戠當闁绘柨鎽滅弧锟介梺鍛婃处閸橀箖宕㈤鍕拻闁稿本鐟ㄩ崗宀�鐥鐐靛煟鐎规洘绮岄埞鎴狅拷锝庣厜閹风兘宕橀鐓庣獩濡炪倖鐗楀銊х驳韫囨稒鈷戠紒澶婃鐎氬嘲鈻撻弴銏＄厽闁规儳顕幊鍥ㄦ叏婵犲啯銇濈�规洖缍婇、姘跺川椤撶偛顥愰梻鍌欑閻ゅ洤螞閸曨垁鍥偨缁嬭法鐣哄┑掳鍊ч幏閿嬨亜椤愶絿绠炴い銏★耿閹晠宕橀崣澶屽酱闂備浇顕х�涒晠顢欓弽顓為棷妞ゆ洩鎷风�规洘鍨垮畷銊╊敍閵堝棗顏堕梻鍌氱墛缁嬪繘宕戦姀顫嫹濞堝灝鏋涢柣鏍с偢閻涱喚锟斤綆鍠楅崐濠氭煕閳╁啯绀堥柡渚�绠栧濠氬磼濮橆剨鎷烽悜鑺ュ�块柨鏇炲�归崕鎴犳喐閻楀牆绗掔紒锟芥径宀嬫嫹閻у憡瀚归梺璺ㄥ枍缁瑩寮幘缁樺殟闁靛鍎卞В鍫ユ⒑閸涘﹥灏甸柛鐘崇墬娣囧﹪骞橀鑲╊槰闂侀潧顭堥崹娲綖瀹ュ鈷戦梻鍫熺〒缁犲啿鈹戦鎯у幋閽樻繈鏌ㄩ悤鍌涘?:" + awardid + ",濠电姷鏁告慨鐑藉极閹间礁纾婚柣妯款嚙缁犲灚銇勮箛鎾搭棞缂佽翰鍊濋弻锕�螣閻氬绀嗗┑鐐村灦鑿ら柡锟芥禒瀣�甸柨婵嗙凹缁ㄥ鏌涚�ｎ亞效婵﹥妞藉Λ鍐ㄢ槈濮橆剦鏆繝鐢靛仜閻即宕濇惔銏㈢彾闁哄洢鍨洪崐閿嬨亜閹存繂缍栫紒銊ヮ煼濮婃椽宕崟顐ｇ仌闂佸湱鍏橀弨杈ㄧ┍婵犲洤鐭楀璺猴功椤戝倻绱撴笟鍥ф灈闁绘绻橀弫鎾诲棘閵堝洨校闂佸憡鎸荤粙鎾寸珶閺囥垺鍤冮柍鍝勵儐鐎氬綊鏌ｈ閹诧紕锟芥艾缍婂铏规崉閵娿儲鐏侀梺鍝勬媼閸嬪懐绮嬪澶婄濞达綀鍊介埡鍐╁枑閹兼惌鐓夌紞鏍煛閸ャ儱鐏柣鎾卞劦閺岋綁寮撮悙璇ф嫹閸︻叏鎷峰鐐");
					return;
				}
				final SCommon cc = RoleConfigManager.getRoleCommonConfig(423);
				int conditionLevel = cc != null ? Integer.parseInt(cc.getValue()) : 0; //闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰紓鍌氬�搁崐宄懊归崶褜娴栭柕濞у啫鐏婂┑鐐叉閹稿摜绮婚弶搴撴斀闁绘ɑ褰冮弳娆戠磼閸撲礁浠滈柍瑙勫灴閹晠骞撻幒鐐村缂佸绨遍弸鏃堟煏閸繃宸濈痪鍙ョ矙閺屾稓浠﹂崜褎鍣梺鍛婃煥缁夊墎妲愰幒鏃撴嫹閿濆骸浜滈柣蹇旀尦閹稿﹤鈹戠�ｎ亞楠囬梺鍓插亽閸嬪棝宕㈠☉娆戠闁割偅绮庨惌娆撴煛鐏炲墽娲村┑锛勫厴椤㈡瑩鎮℃惔顔芥祰闂傚倷鐒︽繛濠囧绩閸楃倣娑㈠礃椤旇壈鎽曢梺缁樻煥閸氬鎮炴禒瀣叆闁哄浂浜濈�氳绻濋埛锟界仦鑺ョ彎闂佸搫鐭夌紞渚�鐛▎鎾崇妞ゆ帪鎷锋い蹇ユ嫹
				final String buildurl = String.format(
						"http://%1$s%2$s?serverid=%3$s&roleid=%4$s&times=%5$s&level=%6$s",
						address, func1, serverid, roleid, ra.getNum(), conditionLevel); //闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰涢梻鍌氬�风粈渚�鎮块崶顒夋晪鐟滄棃寮绘繝鍥ㄦ櫜濠㈣泛锕ュΣ顒勬⒑閸涘﹥澶勯柛銊﹀缁牓宕橀鐣屽帗闂佸憡绻傜�氼剚绂嶉悙鐑樼厱闁绘洖鍊圭�氾拷(濠电姷鏁告慨鐑藉极閹间礁纾绘繛鎴欏灪閸嬨倝鏌曟繛褍鍟悘濠囨煙閸忚偐鏆橀柛鏂跨灱婢规洟宕稿Δ浣哄帾闂佸壊鍋呯换宥呂ｉ崨濠冨弿閻熸瑥瀚崣锟介梺鍝勮閸旀垿骞冮妶澶婄＜婵炴垶锕╂导锟�)濠电姷鏁告慨鐑藉极閸涘﹦绠鹃柨鐔诲Г缁绘稒鎷呴崘鍙夋悙缁炬儳婀遍幉鎼佹偋閸繄鐟查梺绋款儏椤戝寮婚敓鐘茬倞闁宠桨鐒﹂悗楣冩⒑閸涘﹦鎳冪紒缁橈耿瀵濡搁埡鍌氫簽闂佺鏈粙鎴︻敂閿燂拷
				final HttpGet request = new HttpGet(buildurl);
				Gs.getHttpClient().execute(request, new GetRecruitAwardHttpHandler(roleid, request, awardtype, this));
			} else if(awardtype == 2) {
				//闂傚倸鍊搁崐鎼佸磹閻戣姤鍤勯柛顐ｆ磵閿熸枻绠撳畷濂稿閳ュ啿绨ラ梻浣告贡婢ф顭垮Ο鑲╀笉闁绘绮悡銉╂煟閺囩偛锟藉湱锟芥熬鎷�?闂傚倸鍊搁崐鐑芥嚄閸撲礁鍨濇い鏍仜缁犱即鏌涘┑鍕姷闁归鍏樺畷褰掝敃閵忋垻鎳嗛梻浣哥－缁垶骞戦崶顑撅拷浣糕槈閵忊�筹拷鐑芥倵閻㈡鐒炬鐐茬墦濮婄粯鎷呴懞銉с�婇梺闈╃秶缁犳捇鐛箛娑欐櫢闁跨噦鎷�?//闂傚倸鍊搁崐鎼佸磹瀹勬噴褰掑炊閵娧呭骄闂佸壊鍋呴幆濠傗槈閵忕姷顦板銈嗙壄閹风兘鏌涢妷锝呭妞ゆ洟浜堕弻鈩冨緞鐎ｎ亞浠奸梺鎸庣♁閻╊垰顫忓ú顏勬嵍妞ゆ挆鍛Ъ缂傚倷闄嶉崝搴ㄥ磿閵堝洨鐭夐柟鐑樺焾濞尖晜銇勯幘瀵哥焼缂併劌顭峰娲捶椤撶偛濡洪梺鎼炲妿閺佸寮幘缁樺癄濠㈣埖顭囬崥瀣旈悩闈涗沪妞ゃ劌鎳橀垾锕傚Ω閳轰線鍞堕梺缁樻煥閹碱偊鐛崼銉︹拻濞达絽鎲＄拹锟犳煕鎼存稑锟芥繈鐛幇鏉夸紶闁靛／鍛殽婵犳鍠楅…鍫ュ春閺嶎厽鍋傛繛鎴炩棨瑜版帗鏅查柛鈩兠禒鈺呮⒑缁嬫鍎嶉柛銊у劋缁岃鲸绻濋崶鑸垫櫇濡炪倖甯婄粈渚�顢旈敓锟�?婵犵數濮烽弫鍛婃叏閻㈠壊鏁婇柡宥庡幖缁愭鎱ㄥΟ鎸庣【缂佺姷濞�閺岀喖骞戦幇闈涙缂佺偓宕橀褔鍩為幋锔藉亹闁圭粯甯╂禒鎯ь渻閵堝骸浜濇繛鍙夘焽閹广垹鈹戠�ｎ偒妫冨┑鐐村灥瀹曨剟宕滈柆宥嗏拺缂佸娼￠妤呮煟椤撶偛锟藉灝顕ｆ繝姘櫇闁跨喎锟界喓浜藉┑鐐存尰閸戝綊宕归崡鐐存瘎缂傚倸鍊搁崐椋庢閿熺姴闂い鏍仜缁狀垶鏌ㄩ悤鍌涘
//				RecruitChargeAwards rca = ConfigManager.getInstance().getConf(RecruitChargeAwards.class).get(awardid);
//				if(rca == null) {
//					logger.info("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleid + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閹绘帞锟筋參姊婚崒姘卞闁稿繑鑹鹃埥澶娢熷鍕棃鐎规洏鍎甸幐濠冨緞鐎ｎ亝鐏庢俊鐐�戦崹娲�冮崱娆戠當闁绘柨鎽滅弧锟介梺鍛婃处閸橀箖宕㈤鍕拻闁稿本鐟ㄩ崗宀�鐥鐐靛煟鐎规洘绮岄埞鎴狅拷锝庣厜閹风兘宕橀鐓庣獩濡炪倖鐗楀銊х驳韫囨稒鈷戠紒澶婃鐎氬嘲鈻撻弴銏＄厱閻庯急鍐ㄢ拤缂備胶绮惄顖氱暦閸楃倣鐔煎传閸曞灚缍嬬紓鍌氬�烽悞锕傚Φ濞戙垹鐤炬繛鎴旀噰閿熸枻绠撳畷绋课旀担闀愮敾闂備胶鍘ф竟濠囧礈濞嗘劗顩查柨鐕傛嫹" + recruitrole + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰撮梻浣筋嚙濮橈箓锝炴径濞掑搫顫滈敓浠嬪Υ閸愨晝绡�闁稿本绮嶅▓楣冩⒑闂堟单鍫ュ疾濠婂牆鐤鹃柟闂寸劍閻撱儵鏌ｉ弴鐐诧拷鍦拷姘炬嫹?闂傚倸鍊搁崐椋庣矆娓氾拷瀹曘儳锟斤綆鍓涢惌鍫ユ煙缂併垹鏋涢柣銈囧亾缁绘繃绻濋崒婊冾杸闂佺顑傞弲鐘诲蓟濞戞鏃堝礃閵娿倖鐫忛梻浣哄皑閹峰嘲霉閻樺樊鍎愰柣鎾存礋閹﹢鎮欓幓鎺嗘寖闂侀潧妫欑敮鎺椻�﹂懗顖ｆ婵炲瓨绮嶇划鎾诲春閻愬搫绠ｉ柨鏃傜帛閺咁亪姊虹化鏇炲⒉闁挎碍銇勮箛銉﹀:" + awardid + ",濠电姷鏁告慨鐑藉极閹间礁纾婚柣妯款嚙缁犲灚銇勮箛鎾搭棞缂佽翰鍊濋弻锕�螣閻氬绀嗗┑鐐村灦鑿ら柡锟芥禒瀣�甸柨婵嗙凹缁ㄥ鏌涚�ｎ亞效婵﹥妞藉Λ鍐ㄢ槈濮橆剦鏆繝鐢靛仜閻即宕濇惔銏㈢彾闁哄洢鍨洪崐閿嬨亜閹存繂缍栫紒銊ヮ煼濮婃椽宕崟顐ｇ仌闂佸湱鍏橀弨杈ㄧ┍婵犲洤鐭楀璺猴功椤戝倻绱撴笟鍥ф灈闁绘绻橀弫鎾诲棘閵堝洨校闂佸憡鎸荤粙鎾寸珶閺囥垺鍤冮柍鍝勵儐鐎氬綊鏌ｈ閹诧紕锟芥艾缍婂铏规崉閵娿儲鐏侀梺鍝勬媼閸嬪懐绮嬪澶婄濞达綀鍊介埡鍐╁枑閹兼惌鐓夌紞鏍煛閸ャ儱鐏柣鎾卞劦閺岋綁寮撮悙璇ф嫹閸︻叏鎷峰鐐");
//					return;
//				}
//				final String buildurl = String.format(
//						"http://%1$s%2$s?serverid=%3$s&roleid=%4$s&new_serverid=%5$s&new_roleid=%6$s&prize_type=%7$s&amount=%8$s",
//						address, func2, serverid, roleid, recruitserver, recruitrole, 1, rca.getLevel()); //濠电姷鏁告慨鐑藉极閸涘﹦绠鹃柨鐔诲Г缁绘稒鎷呴崘鍙夋悙缁炬儳婀遍幉鎼佹偋閸繄鐟查梺绋款儏椤戝寮婚敓鐘茬倞闁宠桨鐒﹂悗楣冩⒑閸涘﹦鎳冪紒缁樺浮閺佹捇宕愰悤浣圭秷濠电偛寮堕悧鏇犲弲闂侀潧臎閸屾粌澧鹃梻浣圭湽閸ㄥ綊骞夐敓鐘茬；闁挎繂顦伴悡鏇㈡煏婢舵ê鏋欑紒銊ヮ煼閺岋綁濡搁敂濮愪虎闂佸搫琚崝鎴﹀箖閵忋倖鍊绘俊顖濆吹瑜把勪繆閻愵亜锟姐倝宕㈡ィ鍐ｏ拷锔剧驳閻ㄦ槵_type=1闂傚倸鍊搁崐鎼佸磹閻戣姤鍤勯柛顐ｆ磵閿熸枻绠撳畷濂稿閳ュ啿绨ラ梻浣告贡婢ф顭垮Ο鑲╀笉闁绘绮悡銉╂煟閺囩偛锟藉湱锟芥熬鎷�??
//				final HttpGet request = new HttpGet(buildurl);
//				Gs.getHttpClient().execute(request, new GetRecruitAwardHttpHandler(roleid, request, awardtype, this));
			} else if(awardtype == 3) {
				//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐椤曞棙瀚归柛鎰靛枛瀹告繃銇勯幒鎴濇倯婵＄偠濮ゆ穱濠囧箹娴ｈ娅嗙紓鍌欑劍閿曗晠宕澶嬧拻濞达綀顫夐崑鐘绘煕鎼搭喖鐏︾�规洘绻冮幆鏃堝Ω閿旇瀵栭梻浣告啞濞诧箓宕归柆宥嗗亗婵炴垶鐔幏椋庢喆閸曨剚鍎庨梺鍝ュУ閻楃姴鐣烽鍕垫晣闁靛繆鍓濆▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹
				final long now = Calendar.getInstance().getTimeInMillis();
				Long gettime = xtable.Rolerecruitaward.selectGettime(roleid);
				long lastgettime = (gettime == null ? 0L : gettime.longValue());
				if (fire.pb.util.DateValidate.inTheSameWeek(lastgettime, now)){
					//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偞鐗犻、鏇㈠Χ韫囨柨顏跺┑顔矫畷顒勫储鐎甸潻鎷风憴鍕妞ゎ偄顦遍敓浠嬫涧閵堢顕ｉ崼鏇炵闁绘ê鐏氬В鍥⒒閸屾瑦绁版い顐㈩樀瀹曟洟骞庣粵瀣櫔濡炪倖鎸堕崹褰掓偂濠靛鐓ラ柣鏇炲�圭�氾拷?闂傚倸鍊搁崐鎼佸磹妞嬪孩顐芥慨姗嗗墻閻掕棄鈹戦悩瀹犲缂佺媭鍨堕弻銊╂偆閸屾稑顏�?,婵犵數濮烽弫鍛婃叏閻戝锟藉倿鎸婃竟鈺嬬秮瀹曠喖顢涘槌栧數闂備浇娉曢崳锕傚箯閿燂拷?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柟闂寸绾惧鏌ｉ幇顒佲枙闁绘帟濮ょ换娑㈠幢濡粯鍎庨梺杞扮鐎氫即寮诲☉銏犵労闁告剬鍛畳闂備浇妗ㄧ粈渚�宕锕�鐓橀柟杈剧畱绾惧吋绻濇繝鍌涙崳闁告梹鎮傚娲传閸曢潧鍔�闂佺懓鍤栭幏锟�?
					final SCommon cc = RoleConfigManager.getRoleCommonConfig(422);
					int maxnum = cc != null ? Integer.parseInt(cc.getValue()) : 0; //婵犵數濮烽弫鍛婃叏閻㈠壊鏁婇柡宥庡幖闂傤垱銇勯弽銊х煀缂佽翰鍊濋弻锝夋晲閸涱喗鎷遍悗瑙勬礃閻擄繝寮婚悢鍏煎亱闁割偆鍠撻崙锛勭磽娴ｅ搫啸濠电儑鎷烽梺鍝勬湰閻╊垶宕洪崟顖氱妞ゅ繋鐒﹂鍥⒒娴ｄ警鐒惧Δ鐘叉憸缁棁銇愰幒鎴ｆ憰濠电偞鍨崹褰掑础閹惰姤鐓忓┑鐐茬仢閸旀碍銇勯顐＄凹缂佺粯绋撻敓鐣屾暩椤牊鐗庨梻浣瑰绾板秹濡甸崟顖ｆ晣闁绘劖娼欐禒鎾倵鐟欏嫭绀�闁靛牏顭堥悾鐑藉础閻愬秵姊圭粭鐔煎炊椤垶锛囩紓鍌氬�搁崐鐑芥嚄閼搁潧鍨旀い鎾卞灩閸ㄥ倿鏌熼幆鏉啃撻柡鍛倐閺岋綁鏁愰崨顔芥嫳闂佸搫妫岄弲娑⑩�﹂懗顖ｆЪ濡炪們鍔岄敃顏呬繆閹绢喖绀冩い鏃傚帶閼板灝鈹戦悙鏉戠伇濡炲瓨鎮傚鎻掆攽閸モ晝鐦堥梻鍌氱墛缁嬫垿鏁撻挊澶樼吋闁炽儻绠撳畷濂稿Ψ閵夈儱娈ら梻浣芥硶閸ｏ箓骞忛敓锟�?
					int alreadynum = xtable.Rolerecruitaward.selectGetnum(roleid); //闂傚倸鍊峰ù鍥敋瑜嶉～婵嬫晝閸岋妇绋忔繝銏ｅ煐閸旀牠宕戦妶澶嬬厸闁搞儮鏅涘皬闂佺粯甯掗敃銉ф崲濞戙垹骞㈡俊顖濇娴犳挳姊洪幖鐐插缂佽鐗撳濠氬Ω閳哄倸浜滈梺鍛婄箓鐎氬懘鏁愭径瀣幈闂侀潧鐗嗗Λ娆撳煕閹烘鐓ラ柣鏃傚劋濞呮洟鏌熼搹顐ｅ暗闁跨喕濮ら崙褰掑储閻ｅ瞼鍗氶柣鏃傚帶楠炪垺绻涢崱妯哄閹兼潙锕ョ换娑欐綇閸撗冨煂濠电媴鎷烽弶鍫氭櫇娑撳秴螖閿濆懎鏆為柣鎾存礋閺屽秹濡烽妷褝绱炵紓浣哄У濠㈡﹢鈥﹂懗顖ｆЪ闂佺粯鎼换婵嗩嚕婵犳碍鏅搁柣妯诲絻閼板灝顪冮妶鍡樺暗闁哥姴閰ｉ、鏃堟晸閿燂拷
					if(alreadynum < maxnum) {
						//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柟闂寸绾剧粯绻涢幋鐐垫噧缂佸墎鍋ら弻娑㈠Ψ椤旂厧顫╃紓渚婃嫹闁割偆鍠撶弧锟介梻鍌氱墛缁嬫帡鏁嶉弮鍫熺厾闁哄娉曟禒銏ゆ婢舵劖鐓ユ繝闈涙閹兼劙鏌涢弬娆惧剶闁哄瞼鍠栭、娑樜熼崫鍕曢梻浣告惈閺堫剛绮欓幋锕�鐓″璺号堥弸搴ㄧ叓閸ラ绋绘い銉ヮ儑缁辨捇宕掑▎鎺戝帯婵犳鍠氶弫濠氬箖瑜嶈灃闁告劏鏅涙惔濠傗攽閻愭潙鐏熼柛銊ョ秺閻涱噣濮�閵堝洤褰勯梺鎼炲劘閸斿秶浜搁銏＄厓鐎瑰嫰鍋婂Ο锟藉┑顔硷攻濡炶棄鐣烽锕�绀嬫い鎺戯功瀹告繈姊绘担鐑樺殌闁搞倖鐗犻獮蹇涙晸閿燂拷,缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｇ紒锟芥繝鍥ㄧ叆闁绘柨澧庨惌娆撴煛鐏炲墽鈽夐柍钘夘樀瀹曪繝鎮欓崗鍝ユ暰闂傚倷绀侀幖顐⑽涢幘顔肩闁跨噦鎷�
					} else {
						//MessageMgr.psendMsgNotify(roleid, 170043, null);
						MessageMgr.sendMsgNotify(roleid, 170043, null);
						logger.info("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleid + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閹绘帞锟筋參姊婚崒姘卞闁稿繑鑹鹃埥澶娢熷鍕棃鐎规洏鍎甸幐濠冨緞鐎ｎ亝鐏庢俊鐐�戦崹娲�冮崱娆戠當闁绘柨鎽滅弧锟介梺鍛婃处閸橀箖宕㈤鍕拻闁稿本鐟ㄩ崗宀�鐥鐐靛煟鐎规洘绮岄埞鎴狅拷锝庣厜閹风兘宕橀鐓庣獩濡炪倖鐗楀銊х驳韫囨稒鈷戠紒澶婃鐎氬嘲鈻撻弴銏＄厱閻庯急鍐ㄢ拤缂備胶绮惄顖氱暦閸楃倣鐔煎传閸曞灚缍嬬紓鍌氬�烽悞锕傚Φ濞戙垹鐤炬繛鎴旀噰閿熸枻绠撳畷绋课旀担闀愮敾闂備胶鍘ф竟濠囧礈濞嗘劗顩查柨鐕傛嫹" + recruitrole + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰紓鍌氬�搁崐椋庢閿熺姴绐楅柡宥庡幗閸婅埖鎱ㄥ鍡楀⒒闁搞倖顨婇弻娑㈠即閵娿儰绨介梺鍝勬濡繈寮诲☉銏犲嵆闁靛鍎辩粻鍦磽娓氬﹥瀚归梺鍓插亖閸庢煡鍩涢幒鎳ㄥ綊鏁愰崨顔跨濠电媴鎷峰ù鐘差儐閻撴洟鏌￠崒婵囩《闁诲繘浜堕弻銊╂偄鐠囨畫鎾绘煕閹存繄绉虹�规洘绮撻幃銏ゆ偂楠烆兙鍎甸弻娑㈠箛閳轰礁唯濠碘剝褰冮悧鎾诲蓟閺囷紕鐤�闁哄洨鍊妷锔轰簻闁挎棁顕у▍宥嗘叏婵犲懏顏犻柟鍙夋尦瀹曠喖顢曢妶鍥ュ仭濠碉紕鍋戦崐鏍垂闂堟耽娲Ω瑜嶉崹婵嬫煕椤愩倕鏋庣紒鍓佸仜閳规垿鎮欓弶鎴犵懆缂傚倸绉撮敃顏勵嚕椤愶箑绠涢柡澶婄仢缁愭稑顪冮妶鍡樼闁瑰啿绻橀弫宥嗘媴閸︻厾鐦堥梺姹囧灲濞佳囶敁閹剧粯鐓欑�瑰嫭婢樺Σ濠氭婢舵劖鐓曢煫鍥ㄦ尭閹垹绱撳鍡楃仼闁跨喓鏅幊鎾诲箟閿涘嫭宕查柛顐犲劚閽冪喖鏌￠崶鈺佹灁缂佺娀绠栭弻娑⑩�﹂幋婵囩亪婵犳鍠栭柊锝咁潖濞差亜绠归柣鎰嚋閹风兘寮介锝嗘闂佺粯鍔曢悘姘讹綖閺囥垺鐓欓柟顖嗗懏鎲兼繝娈垮灡閹告娊寮诲☉妯锋斀闁告洦鍋勬慨銏狀渻閵堝棙鈷愰柛銊ユ贡濡叉劙骞樼�涙ê顎撻梺鍛婃尭瀵墎鐟ч梻鍌欑椤撲粙寮堕崹顕呯�虫俊鐐�ら崢鐓幟洪敂鐐床婵犻潧妫鈺傘亜閹烘垵锟芥悂鏁撻悾灞戒粶妞ゎ亜鍟存俊鍫曞幢濡ゅ啰鎳嗘俊鐐�ч梽鍕熆濮楋拷閸┿垽骞樺ú缁樻櫍闂侀潧绻嗗褔骞忓ú顏呪拺闁告稑锕﹂埥澶愭煥閺囶亞鐣垫鐐诧躬瀹曠喖顢涘☉姘箺婵犲痉鏉匡拷鎾舵閳ユ枼鏋旀繝濠傚娴滄粓鏌曡箛濠傚⒉缂侊拷閸愵亞纾奸柧蹇氼潐濞呮洜绱掗鐣屾噰妤犵偞鍔栭幆鏃堟晲韫囨柨顏跺銈嗗笂濡炴帞鎹㈤崱妯镐簻闁规媽娉涢惁婊堟煛閸℃ê娴柡灞诲�濆畷姗�鎳犻锟介悡鐔兼⒑鐠団�虫灓闁稿繑锕㈤悰顕�宕堕浣镐罕闂佸壊鍋呯喊宥囷拷姘矙濮婄粯鎷呴懞銉с�婇梺闈╃秶缁犳捇鐛箛娑欐櫢闁跨噦鎷�?(" + maxnum + ")闂傚倸鍊搁崐鎼佸磹閻戣姤鍊块柨鏃�鎷濋幏椋庣箔濞戞ɑ鍣介柣顓熺懇閺岀喓锟界數顭堟禒褔姊婚崟顐㈩伃闁哄矉绻濆畷姗�濡搁妷顖涘闁煎鍊楁稉宥夋煛閸屾侗鍎ラ柣鏂挎閹娼幏宀婂妳闂佺楠哥换鎴﹀Φ閸曨垰鍗抽柨鐔哄Т閹界敻姊洪柅娑氣敀闁告柨鐭侀悘鎺楁⒑閸涘﹦绠撻悗姘煎幖琚欓柟閭﹀枤绾捐棄霉閿濆懏鎯堟い搴＄焸閺屾盯濡搁敃锟介埢鏇㈡煛娴ｈ宕岄柟顔煎⒔娴狅箓鎮欓浣烘婵犵數濮幏鍐礋閸偆鏉归梻渚�娼уΛ妤呭疮閺夋垹鏆﹀┑鍌滎焾鍞梺闈涱槸閸戜粙姊介崟顓熷床婵犻潧娲ㄧ弧锟介梺绋挎湰缁矂路閿熶粙姊绘担渚劸妞ゆ垵鎳橀、鏍ㄥ緞閹邦剝鎽曢悗骞垮劚椤︻垱瀵奸悩缁樼厱闁哄洢鍨哄☉褔鏌涢幘宕囷紞缂佽鲸甯￠幃娆擃敆娴ｅ摜褰ч梻浣烘嚀閸ゆ牠骞忛敓锟�");
						return;
					}
				} else {
					//濠电姷鏁告慨鐑藉极閹间礁纾婚柣鎰惈閸ㄥ倿鏌涢锝嗙缂佺姳鍗抽弻娑樷攽閸曨偄濮㈤梺娲诲幗閹瑰洤顫忔繝姘唶闁绘柨鍢查獮蹇涙⒑閹稿海绠撴い锔诲灣缁鎮烽幊濠傜秺閺佹劙宕卞▎鎰晸闁荤偞纰嶇换鍫濐潖閾忚瀚氶柤纰卞墰椤斿﹪姊虹粙娆惧剳濠电儑鎷烽悗瑙勬礃閸ㄥ潡鐛崶顒佺劷闁挎棁濮ゅ▍鍡涙⒒閸屾瑧璐伴柛鎾寸懅缁棃鎮介崨濠備簵闂佸搫娲㈤崹娲偂閵夆晜鐓熼柡鍥╁仜閿熻棄婀遍敓鑺ョ啲閹凤拷?,婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柟闂寸绾惧鏌ｉ幇顒佹儓缂佺姳鍗抽弻鐔兼⒒鐎靛壊妲紓浣哄Х婵烇拷闁哄瞼鍠栭幃褔宕奸悢鍝勫殥闂備胶绮幐濠氭晝閵忋倕钃熼柕濞炬櫆閸嬪棝鏌涚仦鍓р槈妞ゅ骏鎷�(濠电姷鏁告慨鐑藉极閹间礁纾婚柣鎰惈閸ㄥ倿鏌涢锝嗙缂佺姳鍗抽弻鐔兼⒒鐎电濡介梺鍝勬噺缁诲牓寮婚弴銏犻唶婵犲灚鍔栫瑧缂傚倷鑳舵慨閿嬬箾閿熶粙鏌＄仦璇插闁诡喓鍊濆畷鎺戔槈濮楀棔绱�)闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閾忣偅鐝ㄦ繝鐢靛Х椤ｈ棄危閸涙潙纾婚柛娑欑暘閿熻棄鍟鍕箛椤戔晪绠撻弻鐔煎箥椤旂⒈鏆梺鎼炲�曢鍥儉椤忓牆绾ф繛鍡欏亾妤旈梻浣规た閸樹粙銆冩繝鍌ゆ綎闁惧繒鎳撶�垫煡鏌￠崶鈺佷粶闁冲嘲顦—鍐Χ閸愩劌顬堥梺纭呮珪閸旀洟顢氶妷锔剧瘈闁搞儜鍜佸敹闂佺澹堥幓顏嗗緤閸ф鏁婇柡鍥ュ灪閳锋垹绱掗娑欑┛闁瑰嘲鍢查悾鐑藉炊閳哄﹤鏁规繝鐢靛Л閹峰啴宕熼鐐茬哗闂備礁鎼惌澶屾崲濠靛棛鏆﹂梺顒�绋侀弫鍥煟閺傛娈犲ù纭锋嫹
					new mkdb.Procedure() {
	    				@Override
	    				protected boolean process() {
	    					logger.info("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleid + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閹绘帞锟筋參姊婚崒姘卞闁稿繑鑹鹃埥澶娢熷鍕棃鐎规洏鍎甸幐濠冨緞鐎ｎ亝鐏庢俊鐐�戦崹娲�冮崱娆戠當闁绘柨鎽滅弧锟介梺鍛婃处閸橀箖宕㈤鍕拻闁稿本鐟ㄩ崗宀�鐥鐐靛煟鐎规洘绮岄埞鎴狅拷锝庣厜閹风兘宕橀鐓庣獩濡炪倖鐗楀銊х驳韫囨稒鈷戠紒澶婃鐎氬嘲鈻撻弴銏＄厱閻庯急鍐ㄢ拤缂備胶绮惄顖氱暦閸楃倣鐔煎传閸曞灚缍嬬紓鍌氬�烽悞锕傚Φ濞戙垹鐤炬繛鎴旀噰閿熸枻绠撳畷绋课旀担闀愮敾闂備胶鍘ф竟濠囧礈濞嗘劗顩查柨鐕傛嫹" + recruitrole + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰紓鍌氬�搁崐椋庢閿熺姴绐楅柡宥庡幗閸婅埖鎱ㄥ鍡楀⒒闁搞倖顨婇弻娑㈠即閵娿儰绨介梺鍝勬濡繈寮诲☉銏犲嵆闁靛鍎辩粻鍦磽娓氬﹥瀚归梺鍓插亖閸庢煡鍩涢幒鎳ㄥ綊鏁愰崨顔跨濠电媴鎷峰ù鐘差儐閻撴洟鏌￠崒婵囩《闁诲繘浜堕弻銊╂偄鐠囨畫鎾绘煕閹存繄绉虹�规洘绮撻幃銏ゆ偂楠烆兙鍎甸弻娑㈠箛閳轰礁唯濠碘剝褰冮悧鎾诲蓟閺囷紕鐤�闁哄洨鍊妷锔轰簻闁挎棁顕у▍宥嗘叏婵犲懏顏犻柟鍙夋尦瀹曠喖顢曢妶鍥ュ仭濠碉紕鍋戦崐鏍垂闂堟耽娲Ω瑜嶉崹婵嬫煕椤愩倕鏋庣紒鍓佸仱閺岀喖鏌囬敃锟介獮鏍归悪锟介崹璺侯潖閾忚瀚氶柍銉ュ暱缁犳椽鏌ｉ姀鈺佺仭閻㈩垱顨嗙粚杈ㄧ節閸愵亪妾梺鍛婄☉閿曪箓宕㈤鍫熲拺闁硅偐鍋涢崝锟介柣蹇曞仦鐎氬氦顦寸紒杈ㄦ尰閹峰懐绮欓崠鈩冨闁告縿鍎抽惌鎾绘煟閻旂顥嬮柡鍡畵濮婃椽顢楅敓鐣岀矙娓氾拷瀵偊宕堕浣哄幗濠碘槅鍨卞鍧楀疮韫囨柧绻嗛柡灞诲劜閺佽京绱掔紒妯肩疄闁诡喕绮欏Λ鍐ㄢ槈濡や礁濯伴梻鍌欒兌閹虫捇骞夐敓鐘茬畺闁稿瞼鍋熷畵浣糕攽閻樺弶鎼愮紒鐘崇洴閺屸剝寰勬惔銏€�婇梺鍛娚戦幐鍐差潖濞差亜浼犻柛鏇ㄥ幐閺嬪棝姊洪崨濞掝亪濡剁粙璺ㄦ殾闁圭儤顨呮儫闂佸啿鎼崐濠氬储闁秵鈷戦柡鍌樺劜濞呭懘鏌涢悩瀹犲闁崇粯鎹囧顕�宕奸悢鍝勫籍闂備胶鎳撻悺銊ф崲瀹ュ憘锝夊箹娴ｈ鍤夐梺缁樺姉閸庛倝鎮″☉姗嗙唵閻犺桨璀﹂崕蹇斻亜閺囩喓鐭嬮柕鍥у婵＄兘鏁傞崜褏鍘掗梻浣烘嚀瀵爼骞冮崒姘煎殨闁割偅娲栫粻浼村箹濞ｎ剙鐏柛濠勫厴濮婄粯鎷呴崫銉︾�銈嗘肠閸ャ劎鍘愰梺鎸庣箓椤︻垶寮伴妷鈺傜厱闁哄洢鍔岄悘鐘电磼閿熶粙宕橀鐣屽帗闂佸憡绻傜�氼剚绂嶉悙鐑樼厱闁绘洖鍊圭�氬綊姊婚崒姘拷鎼佸磹妞嬪海鐭嗗ù锝堟〃閻掑﹪鏌涘☉娆愮稇缂佺媭鍨堕弻銊╂偆閸屾稑顏�?");
	    					xbean.RecruitAward srcra = xtable.Rolerecruitaward.get(roleid);
							if(srcra == null){
								logger.error("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleid + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呮嚑椤戞儳浜糳b闂傚倸鍊搁崐鎼佸磹瀹勬噴褰掑炊瑜滃ù鏍煏婵炵偓娅嗛柛銈呭閺屻倗绮欑捄銊ょ驳濠电偛鎳愭慨鍨┍婵犲洤围闊洦鏌ㄩ鍫曟⒒娴ｉ涓茬紒韫矙閹ê顫濇潏鈺冪厯婵犵數濮寸�氼噣鎯岄幘瀵哥鐎癸拷閿熶粙藟閿燂拷!");
	    						return false;
							}
							srcra.setGetnum(0);
	    					return true;
	    				}
					}.submit().get();
				}
				MyRecruitAwards mra = ConfigManager.getInstance().getConf(MyRecruitAwards.class).get(awardid);
				if(mra == null) {
					logger.info("CGetRecruitAward.闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼幍顔碱暭闁稿绻濋弻銊╁籍閸屾矮澹曢梺鍝勬缁捇寮婚敐澶婃闁圭瀛╅崰鎰版⒑缂佹绠氭繛澶嬬洴閸╃偤骞嬮敃锟界壕濂告煥閺冨洦顥夋い蹇ユ嫹" + roleid + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閹绘帞锟筋參姊婚崒姘卞闁稿繑鑹鹃埥澶娢熷鍕棃鐎规洏鍎甸幐濠冨緞鐎ｎ亝鐏庢俊鐐�戦崹娲�冮崱娆戠當闁绘柨鎽滅弧锟介梺鍛婃处閸橀箖宕㈤鍕拻闁稿本鐟ㄩ崗宀�鐥鐐靛煟鐎规洘绮岄埞鎴狅拷锝庣厜閹风兘宕橀鐓庣獩濡炪倖鐗楀銊х驳韫囨稒鈷戠紒澶婃鐎氬嘲鈻撻弴銏＄厱閻庯急鍐ㄢ拤缂備胶绮惄顖氱暦閸楃倣鐔煎传閸曞灚缍嬬紓鍌氬�烽悞锕傚Φ濞戙垹鐤炬繛鎴旀噰閿熸枻绠撳畷绋课旀担闀愮敾闂備胶鍘ф竟濠囧礈濞嗘劗顩查柨鐕傛嫹" + recruitrole + "]闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝堟缁�濠傗攽閻樺弶鎼愮紓浣叉櫊瀵爼宕煎顓熺彇闂佹椿鍘介悷鈺呭蓟閻旂尨鎷烽悽娈跨劸妞ゅ孩鎹囬弻鐔风暋閺夋寧些濡炪値鍋呯换鍫ャ�佸锟介幃鈺呭礃閸欏褰紓鍌氬�搁崐椋庢閿熺姴绐楅柡宥庡幗閸婅埖鎱ㄥ鍡楀⒒闁搞倖顨婇弻娑㈠即閵娿儰绨介梺鍝勬濡繈寮诲☉銏犲嵆闁靛鍎辩粻鍦磽娓氬﹥瀚归梺鍓插亖閸庢煡鍩涢幒鎳ㄥ綊鏁愰崨顔跨濠电媴鎷峰ù鐘差儐閻撴洟鏌￠崒婵囩《闁诲繘浜堕弻銊╂偄鐠囨畫鎾绘煕閹存繄绉虹�规洘绮撻幃銏ゆ偂楠烆兙鍎甸弻娑㈠箛閳轰礁唯濠碘剝褰冮悧鎾诲蓟閺囷紕鐤�闁哄洨鍊妷锔轰簻闁挎柨鍚嬬�氾拷?:" + awardid + ",濠电姷鏁告慨鐑藉极閹间礁纾婚柣妯款嚙缁犲灚銇勮箛鎾搭棞缂佽翰鍊濋弻锕�螣閻氬绀嗗┑鐐村灦鑿ら柡锟芥禒瀣�甸柨婵嗙凹缁ㄥ鏌涚�ｎ亞效婵﹥妞藉Λ鍐ㄢ槈濮橆剦鏆繝鐢靛仜閻即宕濇惔銏㈢彾闁哄洢鍨洪崐閿嬨亜閹存繂缍栫紒銊ヮ煼濮婃椽宕崟顐ｇ仌闂佸湱鍏橀弨杈ㄧ┍婵犲洤鐭楀璺猴功椤戝倻绱撴笟鍥ф灈闁绘绻橀弫鎾诲棘閵堝洨校闂佸憡鎸荤粙鎾寸珶閺囥垺鍤冮柍鍝勵儐鐎氬綊鏌ｈ閹诧紕锟芥艾缍婂铏规崉閵娿儲鐏侀梺鍝勬媼閸嬪懐绮嬪澶婄濞达綀鍊介埡鍐╁枑閹兼惌鐓夌紞鏍煛閸ャ儱鐏柣鎾卞劦閺岋綁寮撮悙璇ф嫹閸︻叏鎷峰鐐");
					return;
				}
				final String buildurl = String.format(
						"http://%1$s%2$s?serverid=%3$s&roleid=%4$s&new_serverid=%5$s&new_roleid=%6$s&prize_type=%7$s&amount=%8$s",
						address, func2, serverid, roleid, recruitserver, recruitrole, 0, mra.getLevel()); //濠电姷鏁告慨鐑藉极閸涘﹦绠鹃柨鐔诲Г缁绘稒鎷呴崘鍙夋悙缁炬儳婀遍幉鎼佹偋閸繄鐟查梺绋款儏椤戝寮婚敓鐘茬倞闁宠桨鐒﹂悗楣冩⒑閸涘﹦鎳冪紒缁樺浮閺佹捇宕愰悤浣圭秷濠电偛寮堕悧鏇犲弲闂侀潧臎閸屾粌澧鹃梻浣圭湽閸ㄥ綊骞夐敓鐘茬；闁挎繂顦伴悡鏇㈡煏婢舵ê鏋欑紒銊ヮ煼閺岋綁濡搁敂濮愪虎闂佸搫琚崝鎴﹀箖閵忋倖鍊绘俊顖濆吹瑜把勪繆閻愵亜锟姐倝宕㈡ィ鍐ｏ拷锔剧驳閻ㄦ槵_type=0缂傚倸鍊搁崐鎼佸磹閹间礁纾归柣鎴ｅГ閸婂潡鏌ㄩ弬鍨挃闁活厽鐟╅弻鐔封枎闄囬褍煤閿曪拷椤洩绠涘☉鎺炴嫹閿曞倸绠ｉ柣鎴濇閺咁剟姊婚崒娆愮グ婵炲娲熷畷鎶芥晝閸屾氨顔嗛梺璺ㄥ櫐閹凤拷
				final HttpGet request = new HttpGet(buildurl);
				Gs.getHttpClient().execute(request, new GetRecruitAwardHttpHandler(roleid, request, awardtype, this));
			}	
		} catch (Throwable e) {
			e.printStackTrace();
		}
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 806662;

	public int getType() {
		return 806662;
	}

	public int awardtype; // 奖励类型 1招募人数奖励 2招募玩家充值奖励 3招募玩家等级奖励
	public int awardid; // 配置招募奖励表里的id
	public long recruitrole; // 被招募的角色id
	public java.lang.String recruitserver; // 被招募的角色所在服务器id

	public CGetRecruitAward() {
		recruitserver = "";
	}

	public CGetRecruitAward(int _awardtype_, int _awardid_, long _recruitrole_, java.lang.String _recruitserver_) {
		this.awardtype = _awardtype_;
		this.awardid = _awardid_;
		this.recruitrole = _recruitrole_;
		this.recruitserver = _recruitserver_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(awardtype);
		_os_.marshal(awardid);
		_os_.marshal(recruitrole);
		_os_.marshal(recruitserver, "UTF-16LE");
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		awardtype = _os_.unmarshal_int();
		awardid = _os_.unmarshal_int();
		recruitrole = _os_.unmarshal_long();
		recruitserver = _os_.unmarshal_String("UTF-16LE");
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CGetRecruitAward) {
			CGetRecruitAward _o_ = (CGetRecruitAward)_o1_;
			if (awardtype != _o_.awardtype) return false;
			if (awardid != _o_.awardid) return false;
			if (recruitrole != _o_.recruitrole) return false;
			if (!recruitserver.equals(_o_.recruitserver)) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += awardtype;
		_h_ += awardid;
		_h_ += (int)recruitrole;
		_h_ += recruitserver.hashCode();
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(awardtype).append(",");
		_sb_.append(awardid).append(",");
		_sb_.append(recruitrole).append(",");
		_sb_.append("T").append(recruitserver.length()).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

