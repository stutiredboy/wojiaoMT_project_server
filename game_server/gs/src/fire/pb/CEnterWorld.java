
package fire.pb;

import fire.pb.state.DRoleOnlineFail;
import fire.pb.state.PRoleOnline;
import fire.pb.state.StateManager;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CEnterWorld__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CEnterWorld extends __CEnterWorld__ {
	@Override
	protected void process() {
		//XXX:婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鎯у⒔缁垳鎹㈠☉銏犵婵炲棗绻掗崝鎾⒑鏉炴壆顦︽い鎴濇婵＄敻宕熼姘鳖啋闁荤姾娅ｉ崕銈夋倵妤ｅ啯鈷戦柛娑橈功閹冲啰绱掔紒妯忣亪锝炶箛鏃傜瘈婵﹩鍓熼崬鍫曟⒑缂佹ɑ鐓ュ褍娴烽幑銏℃媴缁洘鏂�闂佺粯鍔栬ぐ鍐箖閹达附鐓熸俊銈呭暙閳诲牏锟芥鍠栭…閿嬩繆閸洖骞㈡俊顖氭惈娴煎酣姊绘担鍝ョШ闁稿锕畷婊堝Ω閳轰胶顔嗛梺缁樺灱濡嫰宕￠幎鑺ョ厪闊洦娲栧瓭闂佽瀵掗崢濂稿煘閹达附鍋愮紓浣股戦柨顓烆渻閵堝棗鐏ユ繛宸幖閻ｇ兘鏁愭径濠勵啋缂傚倷鐒﹂…鍥储闁秵鈷戦梻鍫熶緱濡狙呯磼閼艰泛袚濞ｅ洤锕畷绋课旀担鍝勫笚闂備礁鎲￠悷锝夊磿瀹曞洨鐜婚柡鍐ㄧ墛閻撴盯鎮橀悙鎻掆挃婵炲弶娼欓埞鎴﹀焺閸愩劌濮哥紓浣哄У閻╊垰顕ｉ锟介埢搴ㄥ矗閵壯冾槱闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌ょ喊鍗炲⒒婵¤尙鍏樺缁樻媴閻熼偊鍤嬪┑鐐插级閻楃姴鐣烽幇鏉跨濞达絽鎽滈敍婊堟⒑闂堟侗鐒鹃柛搴＄Х閵囨劙骞掗幘鍏呮睏闁诲海鎳撴竟濠囧窗閺嶎厼绀堝Δ锝呭暞閳锋垿寮堕悙闈涱暭妞わ妇鍏橀弻锝夊箳閻愮數鏆ゅΔ鐘靛仜閻楁挻淇婇幖浣肝ㄦい鏃囨缂傛捇姊绘担铏广�婇柛鎾寸箞閵嗗啴宕ㄧ�电绁﹂柣搴秵娴滄牠寮ㄦ禒瀣厓闁宠桨绀侀弳娆戠磼閹绘帩鐓奸柡宀嬬到铻栧ù锝囨嚀绾炬娊鎮楀▓鍨灈妞ゎ厾鍏橀獮鍐閵堝懐顦ч梺缁樻尭閸戜粙骞忛悜鑺ョ叆閻庯絻鍔嬬花濠氭⒑绾懏顏犻柛瀣仧閿熻姤淇洪～澶屾崲濠靛鐓曢柨鐔烘櫕娴狅箓鎮剧仦鍏碱敇闂傚倷绀侀幖顐﹀嫉椤掑倻鐭欓柟鐑橆殔缁犳岸鏌￠崘銊у妞ゎ偄鎳橀弻鏇＄疀鐎ｎ亞浼勯梺鍛娚戠敮鐐垫閹捐纾兼繛鍡樺姉閵堢増淇婇悙瀛樼稇闁硅姤绮撳顐︻敊閸㈠妫冮弫鎾寸鐎Ｑ嶆嫹閿曞倸鐐婃い蹇撴閺夌鈹戦悙鏉戠仸妞ゎ厼鍊块崺锟犲礃閳轰焦鐎鹃梻濠庡亜濞诧妇绮欓幒妤�纾婚柍鍝勬噺閻撶喖鏌熺�电鍓遍柣鎺旀櫕缁辨帡鎮╅懡銈囨毇闂佸搫琚崝宀勫煘閹达箑骞㈡俊顖滃劋椤忥繝姊绘担鐑樺殌闁告艾顑夊畷婵嗏枎閹惧疇鎽曢梺闈浥堥弲娑㈠础閹惰姤鐓忓┑鐐茬仢閿熻姤顨婇幆鍕償閵婏腹鎷烘繛鏉戝悑閻熝囧箖婵傚憡鐓曢煫鍥ㄦ閼板潡鏌ｅ☉鍗炴珝妤犵偞甯掕灃闁跨喓鏅划濠氭晲婢跺鍘搁梺鍛婂姈鐎笛咃拷姘辨嚀椤啴濡舵惔鈥茬盎缂備礁顦伴幐鎶藉春閻愬搫绠ｉ柨鏃傜帛閺呪晠姊洪崫鍕拷鍫曞磹閹捐埖顐介柣銏犳啞閳锋垹绱掔�ｎ偒鍎ラ柛搴＄箻閹顫濋鐔哄嚒闂佷紮绲块崗姗�骞冩禒瀣窛濠电姴瀚慨鎼佹煟鎼达紕鐣柛搴″船铻炵�癸拷閸曨偆顔嗗┑鐐叉▕娴滄繈鍩涢幋锔界厱婵炴垶锕崝鐔虹磼閻樿櫕宕岄柟顔筋殔椤繈顢楅敓钘壩ｆ繝姘闂侇剙绉甸悡娆戠磽娴ｉ潧鐏╅柡瀣枛閺岋綁骞樼�靛憡鍒涢梺鍝勬湰缁嬫垿鍩ユ径鎰闁绘劕顕禍楣冩⒒娴ｈ銇熼柛妯兼櫕閺侇噣鏁撻悩鑼舵憰闂佺粯姊婚埛鍫ュ极婵犲洦鐓欐い鏍ф閸燁偆绮婚敐鍛斀闁绘灏欏Λ鍕煏閸繃鍣介柛姗嗗亰閹宕归锝囧嚒闁诲孩鍑归崳锝夊极閹捐妫橀柕鍫濇川鏍″┑鐐茬摠缁秶鎹㈤崼銉ョ畺闁绘劦鍓涢梽鍕煕濞戞☉鍫ュ箯缂佹绠鹃弶鍫濆⒔鐎靛ジ鎮归敓浠嬫晝閸屾氨鍝楁繛瀵稿帶閻°劑鎮″▎鎰闁煎ジ顤傞崬娲⒑椤撗冪仭闁逛究鍔嶇换婵囨媴閾忓湱鍘柣搴ゎ潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍甸梺鍛婎殘閸嬫稓绮婚悙鐑樷拻闁稿本鐟чˇ锔界節閿熶粙鏌嗗鍛紵闂侀潧鐗嗛ˇ顓㈡晸閽樺鏆ｇ�规洖宕埥澶娢熺涵椋庝覆闂傚倷绀佹竟濠囨偂閸儱纾婚柛鈩冪懅娑撳秴螖閿濆懎鏆為柣鎾寸懇閹鎮藉▓璺ㄥ姼闂佸憡鎸稿畷顒勬箒闂佺粯鎸哥�涒晠藟閵忋倖鐓涚�癸拷閿熶粙宕伴幘缁樻櫢闁伙絽鏈弳鈺傘亜椤撶偟澧曢柡鍡忔櫅閳规垿鎮欓弶鎴犱桓闂佸湱顭堥幗婊呭垝閺冨洢浜归柟鐑樺灱閹芥洟姊虹紒妯荤叆闁告艾顑夊畷鎰磼濡寮垮┑掳鍊ч幏閿嬩繆椤愶絿鎳囬柟顕�绠栭幃婊堟嚍閵夈垺瀚肩紓鍌氬�烽悞锕佹懌闁诲繐绻嬮崡鎶藉蓟閿濆鐓涘┑鐘插�绘禒鎼佹倵濞堝灝鏋︽い鏇嗗洤鐓″鑸靛姇椤懘鏌ｅΟ鍏兼毄闁哄鎮傚濠氬磼濮橆剨鎷烽幖浣瑰亱濠电姴瀚惌娆撴煙鐎电啸濞戞挸绉归弻褑绠涢幘纾嬬缂佺偓宕橀崑鎰閹惧瓨濯撮梻鍫熺〒娴犵厧螖閻橀潧浠﹂柨鏇樺灲瀵鈽夊鐐闁挎繂楠告禍婵嬫倶韫囨柨顥嬬紒杈ㄥ笒閻ｆ繈宕橀鍏兼嚈缂傚倷鑳剁划顖滄崲閸繄鏆﹂柛顐ｆ礃閸ゅ鏌涢…鎴濅簼闁绘繍鍋勯埞鎴︽偐閹颁礁鏅遍梺鍝ュУ椤ㄥ骞楅锔藉�甸悷娆忓缁�鍐煥閺囨ê鐏╅柣锝囧厴婵＄兘鍩℃繝鍐╂珖闂備浇娅曢崕鍏兼叏閵堝憘娑㈠礃椤旇偐鐣洪梺鍐叉惈閹冲繘藟閸喓绠鹃柟瀵镐紳椤忓煻澶愬箛閻楀牃鎷绘繛杈剧到閹芥粎绮旈悜妯镐簻闁靛闄勫畷宀�锟借娲橀〃鍛达綖濠婂牊鏅搁柦妯侯樈閸ゆ洖鈹戦悩宕囶暡闁稿瀚伴弻娑滅疀閺囩偛浠樻繛瀛樼矋椤ㄥ﹪寮婚悢鍏煎殞闁绘鐗嗗☉褏绱撴担鍦弨缂佺姵鐗犻悰顔藉緞閹邦厼娈愰梺鍐叉惈閸熶即鏁嶅┑鍥╃閺夊牆澧介幃濂告煟閳╁啯顥堢�规洟娼ч埢搴ㄥ箻閺夋埊鎷烽崹顐ｅ弿婵妫楁禍婊咃拷瑙勬尭濡瑩銆冮妷鈺傚�烽柟缁樺笚濞堝鎮楃憴鍕妞ゎ厼鐗愰悘鍐⒑鐠恒劌鏋旈柡鍜佸亞閸掓帡宕奸～顔藉闁挎繂楠告禍鏍瑰鍕煉闁哄备锟芥剚鍚嬮柛鎰╁妼椤姊洪棃娑欘棡閻㈩垽绻濆璇测槈濮楀棙寤洪梺璺ㄥ枙婵倗绮嬪鍥ㄥ磯濞撴凹鍨辩紞搴ㄦ⒑閹呯妞ゎ偄顦悾閿嬪緞閹邦厾鍘繝鐢靛仜閻忔繈宕濆鍫熺厽婵犻潧瀚悘鍙夋叏婵犲啯銇濋柟顔惧厴瀵爼骞愭惔顔兼暏闂傚倷鑳堕幊鎾诲吹閺嶎厼绠柨鐕傛嫹?
		//TODO:10缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繐鐖煎娲嚍閵夊鍨归幑銏ゅ醇閵夈儴鎽曢梺缁樻煥閻ㄦ繈寮搁弮鍫熺厱妞ゎ厽鍨甸弸鐔兼煟韫囨挾效婵﹥妞藉畷顐﹀礋椤掑锛佺紓鍌欑贰閸犳骞戦崶褜鍤曞┑鐘崇閸嬪嫰鏌涜箛鏇炲付闁跨喓鏅划顖炲箞閵娿儙鏃堟晸閽樺）娑樷枎閹炬潙浠奸梺鍓插亝濞叉﹢鍩涢幋锔界厾婵炴潙顑嗗▍鎾绘煟閹烘垵鈷旂紒杈ㄦ尭椤撳ジ宕崘顓炴儓闁诲孩顔栭崰鏍�﹂悜钘夌畺闁靛繈鍊栭幆鐐烘煕閿旇寮跨紒杈ㄧ叀濮婄粯绗熼敓钘夘焽瑜忛幑銏ゅ箳閹炬潙寮块梺姹囧灩閹诧繝宕愰崼鏇熺厱妞ゆ劗濮撮崝婊堟煃闁垮鐏︾紒缁樼洴閹崇姵锛愬┑鍡橆唲婵°倗濮烽崑鐐恒�冮崱娑樜﹂柛鏇ㄥ灠鎯熼梺闈涱檧鐎靛苯螞閿旂晫绡�缁炬澘顦辩壕鍧楁煛娴ｇ瓔鍤欓柣锝囧厴閹垻鍠婃潏銊︽珦闂備礁鎲￠幐鍡涘礋椤掑倸绔奸梻鍌氬�搁崐宄懊归崶顒婄稏濠㈣埖鍔曠壕鍧楁煙閸撲胶鎽傞柡浣割儐閵囧嫰骞橀崡鐐典患闁搞儲鎸冲娲礃閸欏鍎撻梺鐟板暱缁绘﹢宕哄☉銏犵闁挎梻鏅崢鍗炩攽閻樼粯娑ч悗姘煎墴瀹曟繂顫濋鐐垫嚀椤劑宕橀敃锟芥禒顕�姊洪崫鍕拱闁烩晩鍨伴锝夘敋閿熶粙寮幘瀵割浄閻庯綆浜滈悗顓㈡⒑閸撹尙鍘涢柛锝庡櫍瀹曠敻寮撮悙鈺傛杸闂佺粯锚绾绢參銆傞弻銉︾厸闁告侗鍠氶崣锟介梺鍝勬湰閻╊垶銆侀弴銏╂晝妞ゎ偒鍘鹃崙褰掓⒒娴ｅ摜鏋冩い鏇嗗泚鍥偋閸懇鏀虫繝鐢靛Т濞诧箓宕愰柨瀣ㄤ簻闊洦鎸搁鐢告煙妞嬪骸鍘寸�殿喖锟界噥妲烽梺鍝勵儐閻楃娀寮婚妸鈺佸嵆闁绘劘顕滈幏椋庣矙濞嗘儳鏅犲┑鐘绘涧濞层垺绂嶅鍫熺厸鐎广儱鍟俊鍧楁煟椤撴粌锟芥牗绌辨繝鍥х煑濠㈣泛顑呴敓鑺ュ姍閺屸�崇暆鐎ｎ剛蓱闂佽鍨卞Λ鍐极瀹ュ绀嬫い鎾跺枑椤斿棝姊婚崒娆掑厡妞ゎ厼鐗婇〃銉х矙鐠恒劍娈惧銈嗗笒閸熺増绂嶆潏銊х瘈闁汇垽娼ф禒锕傛煕椤垵鐏︾�规洜顢婇妵鎰板箳閹惧厖绨垫繝鐢靛█濞佳囶敄閸℃稒鍋傞柕澶嗘櫆閻撶喖鏌￠崶鈺佷粶闁跨喕妫勫﹢閬嶆晸閼恒儳鍟查柟鍑ゆ嫹?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓哄┑鐐叉缁绘帗绂掓總鍛娾拺闁告稑锕ら悘鈺佲攽閻戝洦瀚归梻浣告惈閻ジ宕伴幘鑸殿潟闁圭儤顨呴～鍛存煟濡櫣锛嶅ù婊冪埣濮婄粯鎷呴崨濠冨創闂佺懓鍟跨换姗�鐛崘顔肩＜闁绘劘灏幗鏇㈡⒑闂堟单鍫ュ疾濠婂牆纾婚柛鈩冪♁閻撴洟鎮橀悙鎻掆挃闁宠棄顦伴妵鍕疀閵夛箑顏�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯顢曢敐鍡欙紩闂佽法鍠愰弸鑽ょ不閹惧磭鏆﹀┑鍌滎焾鍞梺鎸庢穿閹风兘鏌涢幘鐟扮厫缂佺粯绻堝Λ鍐ㄢ槈濮楀牊瀚瑰┑鐘冲焹閿熸枻绠撳畷濂稿閻欙拷濡粍绻濋悽闈浶ｇ痪鏉跨Ч閹繝鎮㈤崗鑲╁幍闂備緡鍙忕粻鎴︾嵁閺嶃劊浜滈柕澶堝労閸庢棃鏌″畝瀣瘈鐎规洜鍠栭、鏇綖椤旇棄顏堕梺鍓茬厛閸ｎ喖顭囬弽褉鏀介柣妯虹枃婢规鐥幆褍鎮戠紒缁樼洴瀹曞崬螣閾忓湱鎳嗛梻浣告啞閿曨偆鎹㈠┑瀣摕闁挎繂鐗忛悿锟介梺瑙勫劤婢у酣鎮块崟顖涒拺闁告稑锕ラ埛鎰版煕閵娿儲鍋ラ柟顔诲嵆椤㈡瑧鎹勯妸褎婢戞繝鐢靛仦閸ㄥ爼鎮烽妷鈺傛櫢闁芥ê顦介悡濂告煛鐏炶锟芥繈鐛笟锟介獮鎺楀箣濠靛棭娼涙繝鐢靛仜椤曨厽鍒婇銏犲瀭閻犺桨璀﹀鏍ㄧ箾瀹割喕绨荤紒鐘茬秺閺岋綁骞囬鐐电シ婵犳鍠栭惌鍌氼潖濞差亜宸濆┑鐘插暟閸欏棝姊哄ú璇插闁告鍥舵晪闁靛濡囩弧锟介梺鍛婃处閸橀箖鏁嶅鍐ｆ斀闁宠棄妫楅悘銉︺亜閺囧棗鍠氶崵鏇㈡煕瑜庨〃鍡涘煕閹达附鐓欑紒瀣閹癸絿绱掗悩铏磳闁哄瞼鍠栭弻銊э拷锝庝簽娴煎矂姊虹紒妯绘儎闁告挾鍠栭妴浣肝旈崨顓狀槹濡炪倖甯掗崐鎼佺嵁閹扮増鈷戦悹鍥皺缁犳娊鏌涚�ｎ剙鏋涚�规洘鍨块獮姗�宕滄担铏瑰姸闂佽鍑界紞鍡涘窗濡ゅ懏鍋傛繛鎴炩棨瑜版帗鏅查柛顐亝缂嶅牓鎮楃憴鍕闁活厼鍊垮濠氬焺閸愨晛顎撻柣鐔哥懃鐎氼剛澹曢幎鑺モ拺閺夌偞澹嗛崝宥夋煙閻熺増鍠樼�殿噮鍋婇獮妯肩磼濡粯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�?
		final int userId=((gnet.link.Dispatch)this.getContext()).userid;
		final xbean.User usr = xtable.User.select(userId);
		if(null == usr || !usr.getIdlist().contains(roleid))
		{
			StateManager.logger.error(new StringBuilder("CEnterWorld: 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幈濡炪値鍘介崹鍨濠靛鐓曟繛鍡楃箳缁犲鏌″畝瀣М濠殿噯鎷烽梺闈涚箚閺呮繈宕濋崫銉х＝濞撴艾锕ョ�氳绻濋姀锝嗙【闁哄牜鍓熷畷浼村箛閹殿喖褰勯梺鎼炲劘閸斿秶绮堥敓浠嬫⒑閹肩偛濡界紒璇插�块崺鐐哄箣閿旇棄浜归柣搴℃贡婵挳藟濠靛牏纾藉ù锝呮惈椤庢挾绱撳鍕獢鐎殿喖顭锋俊鎼佸Ψ閵忊剝鏉搁梻浣虹《閸撴繈銆冮崱妞绘灁闁靛鍎弨鑺ャ亜閺冿拷椤戞瑥顭囬幇顓滀簻闁靛鍎虫晶銏′繆閸欏濮嶆鐐搭焽閿熻姤绋掗敋妞ゅ孩鎹囧娲川婵犲嫧妲堥梺鎸庢磸閸庨潧鐣烽弴銏犵缂備焦菤閹锋椽姊洪崨濠冨磩閻忓繑鐟╁畷銏狀煥閸喓鍘甸梺鍛婂灟閸婃牜锟芥熬鎷� = ").append(userId).append("濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓洪梺缁樺姇閻忔岸宕宠缁辨挻鎷呯粙娆炬殺闂佺顑冮崐婵嗩嚕鐠囨祴妲堥柕蹇曞閵婏负浜滈柡鍐ㄥ�哥敮鑸点亜椤愮喐娅囩紒杈ㄦ尰缁楃喐绻濋崘顭戜紦闂傚倷绀佹竟濠囧磻閸℃稑绐楅柟鎹愭硾婵剟鏌ㄩ悢鍓佺煓婵﹤顭峰畷鎺戭潩閸楃儐鏉哥紓鍌欑椤戝棛鏁敓鐘叉瀬鐎广儱顦猾宥夋煕椤愩倕鏋旈柛姗�绠栧娲传閸曞灚歇濠电偛顦板ú妯肩矉閹烘顫呴柕鍫濇－濮婃寧绻濋姀锝呯厫闁告梹鐗犻幃锟犲Ψ閿斿墽鐦堥梻鍌氱墛缁嬫帡藟閻樺樊鐔嗙憸鎴炪仈閸濄儲宕叉繛鎴欏灩缁�鍌炴煟閹炬娊顎楁い顐㈢焸濮婂宕惰濡插湱绱掔紒妯肩畾妞わ附鐓￠弻锝堢疀閺冨倻鐤勯梺杞扮劍閹瑰洭骞婇悙鍝勎ㄧ憸宥夊煕閸儲鈷戦柣鐔稿閻ｎ參鏌涢妸銉хШ闁糕斂鍎插鍕箛椤掑缍傞梻浣虹帛椤牏浜搁鍫熸櫢闁芥ê顦辨禒銏ゆ煃鐟欏嫬鐏︽鐐诧躬閺屾稒绻濋崘鈺冾槹濡ょ姷鍋涢敃銉╁箚閺冨牆鐓￠柛鈩冾殕椤撳灝鈹戦悙宸殶闁告鍥ㄥ仱闁靛ň鏅涢悡鏇㈡煙鏉堥箖妾柣鎾寸懇閺屻倕霉鐎ｎ偅鐝旀繛瀵稿У缁捇寮婚妸鈺傚亜閻犲洦鐣幘瀵哥闁肩⒈鍓欓弸娑㈡煏閸℃洜绐旂�殿喕绮欐俊鎼佸Ψ瑜忛悰顕�姊绘担鍝ョШ闁稿锕畷婊冣槈閵忊�充患濠电偛妯婃禍婵嬪磹閻㈠憡鐓熼柣鏂挎啞缁跺弶銇勮箛锝勭盎妞ゎ厼娼￠幃鐑芥焽閿曪拷閸撳爼鎮楀▓鍨灈闁硅绻濋獮鍡涘籍閸惊鈺呮煥閺冿拷閸庢娊鐛澶嬧拻闁稿本鐟х拹浼存煕濞嗗繒绠崇紒顔碱煼楠炲鎮欑�涙褰块梻浣虹帛椤ㄥ懘鎮ч崟顒傤洸婵犲﹤鐗婇悡娆撴倵濞戞瑯鐒界紒鐘虫尰閵囧嫯绠涢敐鍕晼缂備浇椴哥敮鐐垫閹烘嚦鐔兼嚃閳哄啯婢栨繝鐢靛У椤旀牠宕抽鐐茬闁绘垼濮ら埛鎴︽⒒閸喓銆掔紒鐘冲哺閺屻劑鎮㈤崙銈嗗闁绘柨鎽滆ぐ褔姊烘导娆戠У闁告挾鍠庨～蹇曠磼濡顎撻梺鑽ゅ枛閸嬪﹪宕电�ｎ亖鏀介柣鎰邦杺閸ゅ姊婚崟顐㈩伀缂侇喖顑呴鍏煎緞濡粯娅嗛梻浣告啞濞茬喎顭囪閳绘捇濡搁妷顔藉瘜闂侀潧鐗嗗Λ妤佹叏瑜斿濠氬礋椤愩埄浼冮悗娈垮枟閻擄繝鐛弽銊﹀闁革富鍘煎鎶芥⒒娴ｈ櫣甯涙繛鍙夌墵瀹曟劙宕烽銊﹀婵鍋撶�氾拷?").append(roleid).append(", 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐差渻閵堝棗绗傜紒锟芥笟锟藉畷婊堫敇閻戝棙瀵岄梺闈涚墕濡鎱ㄨ缁辨帡鎮╅崘鑼紝闂佺粯渚楅崳锝嗘叏閿熶粙鏌曢崼婵囶棤闁告ɑ鎹囬弻鈩冨緞鐏炴垝娌繝銏㈡嚀濡繂鐣峰┑鍡╁悑闁糕剝鍔掔花濠氭⒑閸濆嫬锟芥悂鎮樺┑瀣垫晜妞ゆ劑鍊楃壕濂稿级閸稑濡界�规洖鐬奸敓鍊燁潐濞叉鏁幒妤嬬稏婵犻潧顑愰弫鍡椻攽閻樻彃鏆欐い蹇撶埣濮婃椽宕ㄦ繝鍕窗闂佺瀛╂繛濠囧箚瀹�鍕缂備焦锚閿熺晫鏁诲濠氬醇閻旇　妾ㄩ梺鐟板级閹倿寮婚敐澶樻晣闁绘梻顭堢壕鍐测攽椤旂》宸ユい顓炲槻閻ｉ攱绺介崨濠備簻闂佸憡鎸烽懗鍓佺不閹烘鈷掑ù锝堫潐閸嬬娀鏌涙繝鍐⒌闁靛棗鍟换婵嬪炊瑜戦幗鏇炩攽閻愭潙鐏熼柛銊ョ秺瀹曪繝骞庨懞銉у帾婵犵數鍋涢悘婵嬪礉濮橆厹浜滄い鎰靛亗缁ㄧ晫绱掓潏銊﹀磳鐎规洘甯掗～婵喰掑▎宥呯仾缂佺粯绋撻幏鐘侯槾闁伙綁娼ч埞鎴︽晬閸曨剚姣堥悗瑙勬礈閸犳牠銆佸☉姗嗘僵閺夊牃鏅滃鎴︽⒒閸屾瑧顦﹂柣銈呮搐椤╁ジ濡歌閻棗霉閿濆懏璐￠柣婵婂煐閹便劌螖鐎ｎ偄顏舵繝娈垮枛閿曘儱顪冮挊澶屾殾妞ゆ劧绠戠粈瀣亜閹虹偞瀚归梺绋款儏缁夌懓顫忓ú顏勭闁绘劖褰冮‖澶娾攽閿涘嫬浠掔紒顔界懇閻涱噣宕橀绛嬶拷鎰磽娴ｅ搫校缂佸鍨块崺銉﹀緞婵炵偓鐎婚梺鐟扮摠缁诲倸效閺屻儲鈷掗柛灞剧懆閸忓瞼绱掗鍛仩閻撱倝鏌″搴″箹缁炬儳缍婇弻娑㈡晜鐠囨彃浼庨梺鐟板槻閸㈡煡锝炲┑瀣�锋い鎺炴嫹妞ゅ骏鎷�?"));
			return;
		}
		StateManager.logger.info(new StringBuilder("roleid=").append(roleid).append(" 闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啰效婵狅拷娓氾拷濮婅櫣绱掑Ο铏逛淮濡炪値鍋呭ú鐔煎极閹剧粯瀵犲璺侯煭閹风兘宕稿纭锋嫹娴ｅ壊娼╅柤绋跨仛濞呫垺绻涚�电孝妞ゆ垵娲ら悾鍨瑹閿熶粙鎮￠锕�鐐婇柕濞э拷濡俱劑姊洪崫鍕櫤闁诡喖鍊垮濠氬Ω閳哄倸浜為梺绋挎湰缁嬫垿顢旈敓锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婎潊闁绘ê妯婂Λ宀勬⒑鏉炴壆顦﹂柨鏇ㄤ邯瀵鍨鹃幇浣告倯闁硅偐琛ラ敓钘夌－椤旀劗绱撻崒娆戝妽闁告梹鐗犻妴鍐╃節閸パ嗘憰闂佺偨鍎查崜姘跺触鐎ｎ喖绠圭紒顔炬閹风兘宕樺顔煎Η闂傚倸鍊峰ù鍥ь浖閵娧呯焼濞达絿灏ㄩ幏宄邦潩椤愩垹绁悗娈垮枦椤曆囧煡婢舵劕顫呴柍鍝勫�瑰▍鍥⒒娴ｈ櫣甯涙い顓炵墢娴滅鈻庨幇顕呮祫婵°倧绲介崯顖炲磹閻㈠憡鍋℃繛鍡楃箰椤忣亞绱掗敓浠嬫晸娴犲鍊垫繛鍫濈仢閺嬫盯鏌ｉ弽褋鍋㈤柣娑卞櫍瀹曞ジ濡烽妷搴樻櫊閺屾洘寰勬繝鍌ゅ妷濠殿喖锕ら…鐑藉极閹捐妫橀柕鍫濇川鏍￠梻浣侯焾椤戝懐锟芥矮鍗抽妴渚�寮崼婵嬪敹闂佸搫娲ㄩ崰鎾诲储娴犲鐓欓柛蹇氬亹閺嗘﹢鏌涙繛鍨拷鏇⑩�﹂崶顒�绠涙い鎾跺Х椤旀洟姊洪崨濠勬噧妞ぱ嶆嫹闂佸吋婢樺锟犲蓟閺囥垹骞㈡俊銈忔嫹闁哄棛鍋熺槐鎺旂磼濡偐鐤勯悗瑙勬礃椤牓藝鐎靛摜纾奸柣妯哄暱閸濈儤鎱ㄦ繝鍛仩缂佽鲸甯掕灒闁惧繘锟芥稓绀冨┑鐘殿暯濡插懘宕戦崟顓ㄦ嫹濮樼厧澧悡銈夋煕瑜庨〃鍡涘煕閹烘嚚褰掓晲閸偅缍堥梺绋款儑婵烇拷闁哄本绋掗幆鏃堫敊閸忚偐褰庨柣搴㈩問閸犳銇愰崘顔癸拷锕傚Ω閳轰線鍞跺┑鐘绘涧椤戝棝鏁嶅Δ锟介埞鎴︽倷瀹割喖娈舵繝娈垮枟閹告娊銆侀弽顓炲耿婵炴垶顭囬崢閬嶆⒑閸︻厼鍔嬮柛銈嗕亢閵囨劙骞掗幘瀛樼彸濠电姰鍨奸崺鏍懌濡炪們鍎查悧妤冩崲濞戙垹绠ｉ柣鎰綑闂夊秹姊虹紒妯绘儓缂佺粯绻傞锝嗙節濮橆厼浜滈梺缁樻尭濞寸兘藝閳哄懏鈷戦梻鍫熺〒婢ф洘淇婇锝庢疁妞ゃ垺妫冮弫鎾绘晸閿燂拷?"));
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閸ㄥ倸螖閿濆懎鏆欑紒鐘崇☉闇夐柨婵嗘噺鐠愶紕绱掔�ｂ晞鍏岀紒杈ㄦ崌瀹曟帒顫濋濠冨闁绘垼濮ら崐鍧楁煥閺囨氨鍔嶉柟鍐茬焸濮婄粯鎷呴崨濠傛殘闂佽崵鍠嗛崕鎶藉箲閵忕媭娼ㄩ柨鐔绘椤曪絾绻濆顓炰簻闂佹儳绻愬﹢閬嶆晬濠婂牊鈷戦梻鍫熺〒缁犲啿鈹戦鐐毈闁诡喗锕㈠畷濂稿Ψ閿旇瀚兼繝鐢靛仩鐏忣亪顢氳閻涱喖螖娴ｅ吀绨婚梺闈涱焾閸庡鐓鍌︽嫹濞堝灝鏋︽い鏇嗗洤鐓″鑸靛姇椤懘鏌ｅ锟藉褎鎱ㄩ崼鏇熲拻濞达絽鎲￠崯鐐烘煕閺冩捇妾紒鍌氱Ч瀵粙鈥栭濠勭М鐎规洜鍘ч埞鎴﹀礃閳哄倹婢戦梻鍌欑閻ゅ洤螞閸曨倠娑樜旀担渚锤濠电娀娼ч鍡涙偂閵夆晜鐓涢柛銉厑椤忓牊鍊堕柤纰卞墾閹峰嘲鈻撻崹顔界亪濡炪値鍘鹃崗姗�鐛崘顔碱潊妞ゎ偒鍘鹃崜銊︾箾鏉堝墽鍒版繝锟芥潏銊ь洸闁哄稁鍘介埛鎺懨归敐鍥剁劸妞ゃ儱绻橀弻锝夊箻瀹曞洤鈪甸悗瑙勬礃濠㈡鐏冮梺鍛婁緱閸犳牠鏁撻挊澶婎暢闁跨喕妫勭粻宥夊磿闁单鍥ㄥ閺夋垹鍘遍梺鐟扮摠缁剁柉銇愰幒鎴狀槯闂佸吋绁撮弲婊堝闯椤斿墽纾藉ù锝呭濡牓鏌涢悩宕囧⒌婵狅拷娴ｇ硶鏀介柣妯款嚋瀹搞儵鏌涢悢璺哄祮鐎规洘妞介弫鎰板幢閳哄偆鍟嶉梻浣虹帛閸旀牞銇愰崘顔兼辈婵炲棙鎸婚悡鐔兼煥濠靛棛绠崇紒鈽呮嫹婵°倗濮烽崑娑氱矓瑜版帒绠圭憸鐗堝俯閺佸啴鏌曢崼婵堢閻庢氨鎳撻埞鎴︽偐瀹曞浂鏆￠梺鎶芥敱閸ㄥ綊骞夐幖浣瑰亱闁割偅绻勯悷銊︾箾鐎涙鐭嗛柛妤佸▕瀵鈽夐姀鐘殿啋闁诲酣娼ч幉锟犲礆濞戞﹩娓婚柕鍫濆暙閻忣亪鏌ｅΔ鍐ㄐ㈤柣锝囧厴閹垻鍠婃潏銊︽珜闂備胶顭堥張顒傚垝鎼粹垾锝夊炊椤掍讲鎷绘繛鎾寸啲閹烽攱绻涙担鍐叉噺瀹曟煡鏌涢鐘插姎闁搞劌鍊圭换娑橆啅椤旂粯鍠氶梺杞扮閸婂潡寮婚敐澶婃闁割煈鍠楅崐顖炴⒑缂佹ɑ灏伴柣鐔叉櫊瀵鈽夐姀鐘殿吅濠电偛妫楁蹇涘箯閻戣棄鍐�妞ゆ劦鍓氱�氳鎱ㄥΟ鐓庝壕閻庢熬鎷�,闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮村杈┬㈤梻浣规偠閸庢椽宕滈敃鍌氭瀬闁告劦鍠楅悡銉╂煛閸ユ湹绨奸悗姘秺濮婂搫效閸パ嶆嫹濡ゅ懎纾婚柟鎹愬煐瀹曞弶绻濋棃娑欏窛缂佲槄鎷烽梻浣侯焾閺堫剛鍒掑畝鍔肩兘鏁撴禒瀣拻濞达絼璀﹂悞鐐亜閹寸偛鐏╅柟骞垮灩閳规垹锟斤綆浜ｉ幗鏇㈡⒑閸濆嫭鍌ㄩ柛銊ョ秺閺屽宕堕妸褏鐦堥梻鍌氱墛缁嬫帡骞栭幇顔剧＜闁归偊鍘惧ú瀛樻叏婵犲啯銇濈�规洏鍔嶇换婵囨償閵忋垺娈鹃梺璇叉捣濞呫垽骞忛悜鑺ョ厵闂傚倸顕ˇ锕傛煢閸愵亜鏋涢柡宀嬬秮瀵噣宕堕…鎴滃摋缂備胶鍋撻崕鎶藉Χ閹间礁钃熼柡鍥风磿閻わ拷闂佸搫娲ㄩ崐顐︽晲婢跺鍘介棅顐㈡处閹哥偓鏅堕敂鑺ュ弿濠电姴鍊归幆鍫ユ偂閵堝鍋ｉ柛銉ｅ妼缁茶崵绱掗悩鍙夋儓妞ゎ亜鍟存俊鍫曞礃閵娿儺鐎抽梻浣瑰濞诧附绂嶅鍫晪闁挎繂妫涚弧锟藉┑顔斤供閸撴瑥鐣甸崱娑欌拺缂備焦蓱椤ュ牊銇勯妷锔藉暗缂侇噯缍侀幃娆撴倻濡攱瀚奸梻浣告啞閹告槒銇愰崘鈺冾洸婵犻潧鐗忕壕濂告偣閸ャ劌绲婚柨鐔绘缂嶅﹪鐛崼銉ノ╅柍杞扮贰濞煎﹪姊洪棃娑氱疄闁搞劌顭烽弫宥呪攽閸モ晝顔曢柡澶婄墕婢т粙宕氭导瀛樼厵缁炬澘宕禍婵嬫煟濡わ拷闁帮絽顫忕紒妯诲閻熸瑥瀚禒鈺呮⒑閸涘﹥鐓ラ梺甯到椤曪綁顢曢敐鍥╃槇濠殿喗锕╅崜娑欏鐎ｎ喗鈷戦柛婵嗗閺嗘瑩鏌ｅΔ锟藉Λ娑氬垝閸儱绀冮柍鐟般仒缁ㄥ姊洪崫鍕拷鍦拷绗涘浄缍栫�广儱娲﹂崰鎰版煛閸愩劎澧曢柦鍐枑缁绘盯骞嬪▎蹇曚患闁哥儐鍨跺娲濞戞氨鐣鹃梺鍛婃尰缁诲牓骞冮悽绋跨睄闁稿本绮庨敍婵囩箾鏉堝墽绉い鏇熺墪閳绘捇鏁愰崶鈺冿紲缂傚倷鐒﹂…鍥╃不閹炬番浜滄い鎰╁灮缁犱即鎮￠妶鍡愪簻闊洦鎸搁褏绱掗崡鐐靛煟婵﹥妞藉畷銊︾節閸愵煈妲遍梻浣侯焾椤戝棝骞戦崶顒傚祦闊洦绋掗悡銉╂倵閿濆懐浠涢弫鍫ユ⒑閻熸澘鎮戦柣锝庝邯瀹曟椽宕熼姘憋紱闂侀潧顭堥崕顕�寮ㄩ懞銉ｄ簻闁哄喛鎷烽柡瀣帛缁楃喎鈽夐姀锛勫幈闂佽鍎抽顓灻虹�甸潻鎷峰▓鍨灍濠电偛锕顐﹀礃椤旇偐锛滃┑鐐村灦閼归箖鐛Δ鍛拻濞达絼璀﹂弨浼存煙濞茶绨界�垫澘锕ラ妶锝夊礂椤栨凹妲圭�垫澘瀚伴獮鍥敆閸屾粍姣庨梻鍌欒兌缁垶寮婚妸鈹匡拷鍐╂償鎺抽敓鑺ュ笚缁绘繂顫濋鐘插妇闂備礁澹婇崑鍛崲閸儺鏁佹俊銈勭贰濞堜粙鏌ｉ幇顓熷剹婵炲牊绮撻弻锛勪沪閸撗勫垱婵犵鍓濋幃鍌涗繆閻ゎ垼妲婚梺缁樻尵閸犳牠骞冨Δ鍐╁枂闁告洦鍓涢ˇ銊╂⒑閹肩偛濡介悗绗涘嫮鈹嶅┑鐘叉处閸婂鏌﹀Ο渚Ш闁告ɑ鎮傚铏圭矙閹稿孩鎷卞銈冨妼濡盯鏁撻懞銉ㄥ闁靛牏顭堥～蹇曠磼濡顎撶紓浣割儐鐎笛囧磹椤栨粎纾藉ù锝夘棑閸斿秹鏌熺粙鍨毐妞ゆ洩缍佸濠氬Ψ閵壯冨箰闂備礁鎲℃笟妤呭储妤ｅ啫浼犳俊銈勮兌缁犻箖鎮楅悽娈跨劸閻㈩垰鐖奸弻锝嗗箠闁告梹鍨甸悾鐑藉箛閺夊潡鍞堕梺鍝勬川婵銇愰崟顖涒拺闁硅偐鍋涢崝锔姐亜閵夛附灏甸柨鐔稿灊缁插宕戦幇顔筋潟闁圭儤顨呮儫闂侀潧鐗嗗ú銊╂偂閹剧粯鈷戦柛婵嗗閻忛亶鏌涢悩宕囧⒌闁诡喕鍗抽、姘舵晸閽樺鏆︾憸鐗堝俯閺佸﹪鏌涘▎宥呭姕闁稿鎳庨埞鎴︽晬閸曨偂鏉梺绋款焾閸婃繂鐣烽幋锕�宸濇い鏍ㄨ壘閻忓﹪姊虹憴鍕妞ゆ泦鍥у嚑濞撴熬鎷烽柡宀�鍠栧畷婊嗩槾閻㈩垱鐩幃妤呮偨闂堟刀銏°亜椤撯剝纭堕柟鐟板閹粌螣缂佹ê顏板┑鐘垫暩閸嬫盯鎮ф繝鍥х？闁规儼妫勯悡姗�鏌熺�电浠滅紒鐘靛█濮婅櫣绮欓崠鈩冩暰濠电偠灏欓崰鏍偘椤旂晫绡�闁告劏鏅涢崝鍛存⒑閺傘儲娅呴柛鐕佸灠閳绘挻瀵肩�涙ǚ鎷婚梺绋挎湰閼归箖鏁撴禒瀣垫婵炲棎鍨归～婵嬵敆婢跺苯濮洪柣鐔哥矋濮婂鎯侀鍕拺閻犳亽鍔岄弸娆愪繆椤愩垹顏柛鈺冨仱楠炲鏁冮敓浠嬫倶閹惰姤鐓ｉ煫鍥风到娴滄粓鏌＄�ｎ剙鈻堟慨濠呮閹风娀鍨惧畷鍥﹀摋闂備礁鎽滈崳銉╁垂閹惰棄绠查柕蹇曞Л閺�浠嬫煕閳撅拷閺呮粓宕撻棃娑辨富闁靛牆妫欑亸鎵磼鐎ｎ偄绗ч柨鐔诲Г閼归箖濡剁粙娆炬綎缂備焦蓱婵挳鏌涘☉姗堝伐闁哄棗鐗忕槐鎾存媴缁涘娈梺绋匡工椤兘寮幘缁樺殟闁靛鍎卞В鍫ユ⒑閸涘♁鑲╁垝濞嗗繒鏆︽慨姗嗗幘缁★拷闂佸憡鍔︽禍顏勵瀶椤曪拷濮婃椽宕ㄦ繝鍕ㄦ闂佹寧娲╃粻鎾崇暦閵忋倖鐒肩�广儱妫岄幏娲⒒閸屾氨澧涘☉鎾舵嚀閳藉濮�閻樻妲伴梻浣虹帛閸旓箓宕滃鑸靛剨闁哄啫鐗婇埛鎺楁煕鐏炲墽鎳呮い锔肩畵閺岀喓鍠婇崡鐐板枈濡ょ姷鍋涢敃銉╁箚閺冨牆惟闁挎洩鎷峰ù婊庡灡缁绘繈妫冨☉姗堟嫹婵犳埃锟斤箓宕奸妷銉ュ殤婵炴挻鐔幏鐑芥煛瀹�锟介崰鏍х暦濠婂棭妲鹃柣銏╁灡閻╊垶寮婚敓鐘插窛妞ゆ棁妫勯敓鑺ュ姍閺岋紕浠︾拠鎻掝潎闂佽鍠撻崐婵嗙暦閹烘垟妲堟慨妤�妫旂槐锟�
		gnet.link.Onlines.getInstance().insert(this, roleid);
		StateManager.logger.error(new StringBuilder("roleid=").append(roleid).append(" CEnterWorld: 闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啰效闁挎繄鍋涢埞鎴狅拷锝庡亝濞呭洭姊虹粙璺ㄧ効濠碘�虫川缁瑨绠涢弮鍌滅槇闂侀潧楠忕徊浠嬫偂閹扮増鐓曢柡鍐挎嫹闁绘濮撮悾鐑藉箣閿曪拷鍥存繝銏ｆ硾椤戝洭宕㈤幖浣光拺闁硅偐鍋涢崝妤呮煛閸涱喚鈽夐柣顭戝墴濮婄粯鎷呴搹鐟扮闁汇埄鍨辩敮锟犲极閸愵喖唯鐟滃骸鐣烽崣澶岀闁瑰瓨鐟ラ悘鈺傤殽閻愵亜鐏ǎ鍥э躬椤㈡稑鈹戦崶鏈靛摋濠电偛顕慨鐢稿箰閸愬樊娼栨繛宸簻缁犲綊鏌ｉ幇顓炵祷妞ゎ剙顦辩槐鎾存媴缁涘娈梺缁橆殕閹告悂顢氶敐鍡欑瘈婵﹩鍎甸埡鍛厓闁告繂瀚敓钘夋啞缁傚秴顭ㄩ崼鐔叉嫼闂佸憡绋戦敃锔剧不閹剧粯鍊垫慨姗嗗墯閸ゅ洤鈹戦鍡樺闂備線娼х换鍫ュ垂婵犳碍鏅繝濠傜墛閳锋垿鎮归幁鎺戝闁哄鐟ラ埞鎴︻敊閸濆嫸鎷烽弴銏╂晪闁靛鏅涚粈瀣亜閺嶃劍鐨戦柣銈忔嫹濠碉紕鍋戦崐鏍箰閻愵剚鍙忛柟缁㈠枤瀹撲焦淇婇妶鍕厡缂佲槄鎷风紓浣稿⒔婢ф鎽銈庡亜閿曨亪寮诲☉銏犖╃憸搴ㄥ汲椤掍降浜滈柕蹇婏拷韫濡炪倧绠戦顓㈡晸閽樺浠涙繝銏★耿閺佸啴顢旈崼婵堢枃闂佽法鍠撴慨鏉戞纯闂傚鍋勫ú锕傚蓟閵娾晩鏁傞悹楦裤��閺�浠嬫煟閹邦垰鐨哄褎娲熼弻锝堢疀閺冨倻鐤勯悗娈垮枟閹倿骞冮姀顫剨濞达綀顫夐弶鎼佹⒒娴ｈ櫣甯涢柛鏃�锕㈤、姘煥閸垹褰嗗銈嗗笒閸嬪﹪骞忓畡鎵虫灁闁割煈鍠楅悘鍫濐渻閵堝骸骞栭柛銏＄叀椤㈡岸鏁愭径濠勵啋濡炪倖姊婚埛鍫濐焽婵犲洦鈷戦柡鍌樺劜濞呭懘鏌涢悤浣哥仸妞ゃ垺妫冮幃銏ゅ礂鐏忔牗瀚藉┑鐐舵彧缂嶏拷濠殿喓鍊楀☉鐢稿醇閺囩喓鍘遍梺鎸庣箓缁绘帡鎮鹃崹顐闁绘劘灏欑粻濠氭煛娴ｈ宕岄柡浣规崌閺佹捇鏁撻敓锟�?"));
		
		PRoleOnline pRoleOnline = new PRoleOnline(userId,roleid);
		try
		{
			if (rolesnum > 0) 
				new mkdb.Procedure()
				{
					protected boolean process() throws Exception {
						final xbean.Properties roleProp = xtable.Properties.get(roleid);
						if (null == roleProp)
							return false;
						if(roleProp.getSysconfigmap().size() == 0){
							GameSystemConfig.resetSysConfig(roleProp);
						}
						
						Integer oldMaxScreenShowNum = roleProp.getSysconfigmap().get(SysConfigType.MaxScreenShowNum);
						if(oldMaxScreenShowNum == null)
							oldMaxScreenShowNum = 0;
						if(rolesnum == oldMaxScreenShowNum)
							return true;
						roleProp.getSysconfigmap().put(SysConfigType.MaxScreenShowNum, rolesnum);
						return true;
					};
				}.submit().get();
			pRoleOnline.submit().get();
		} catch (Exception e)
		{
			StateManager.logger.error(new StringBuilder("roleid=").append(roleid).append(" 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐差渻閵堝棗绗傜紒锟芥笟锟藉畷婊堫敇閻戝棙瀵岄梺闈涚墕濡鎱ㄨ缁辨帡鎮╅崘鑼紝闂佺粯渚楅崳锝嗘叏閿熶粙鏌曢崼婵囶棤闁告ɑ鎹囬弻鈩冨緞鐏炴垝娌繝銏㈡嚀濡繂鐣峰┑鍡╁悑闁糕剝鍔掔花濠氭⒑閸濆嫬锟芥悂鎮樺┑瀣垫晜妞ゆ挾鍠愰崣蹇撯攽閻樻彃顏悽顖涚洴閺岀喎鐣￠悧鍫濇畻閻庤娲忛崝宥囨崲濠靛纾兼繛鎴炵懅閺嗩參姊婚崒姘拷宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌涢埄鍐槈缁炬儳娼″鍫曞醇椤愵澀绨芥繛瀛樼矎妞村摜鎹㈠┑瀣仺闂傚牊绋堥弸鍛攽閻愭澘灏冮柛蹇曞亾缁嬫垿鍩ユ径鎰潊闁绘ê鐤囩欢銏ゆ⒒娴ｇ懓顕滄慨濠傤煼瀵煡顢曢妶鍥︾瑝婵°倧绲介崯顖炴偂閺囥垺鐓冮柍杞扮閺嬨倖绻涢崼鐕傝�块柟顔肩秺楠炲洭濡搁敂鐣屽絾缂傚倷鑳剁划顖滅矙閹达富鏁婇煫鍥ㄤ緱閺佸﹦绱撴担濮戭亪寮搁妶澶嬧拻濞达綀濮ら妴鍐磼閿熻姤绗熼敓钘夌暦閹版澘閿ゆ俊銈忔嫹闁藉啰鍠愮换娑㈠箣閻愬啯鑹惧嵄闁割偁鍎查悡鏇熶繆閵堝懎鏆欏ù鐙呯畵閺岋綀绠涢幘缂幯勬叏婵犲懏顏犵紒杈ㄥ笒铻ｉ柤娴嬫櫓閸炲墎绱撻崒娆掑厡濠殿喚鏁婚獮鎰板箹娓氬﹦绋忛棅顐㈡处濞叉粎澹曢崗闂寸箚妞ゆ牗绻嶉崵娆愩亜鎼淬垺灏扮紒缁樼洴楠炴﹢寮堕幋婵囩槗闂備焦鎮堕崝灞界暦椤掑嫬鐓濋柟鐐綑椤曢亶鎮楀☉娅辨岸骞忓ú顏呪拺闁煎鍊曢弸鎴炵節閵忊埗顏堝煝閹捐鐓涢柛娑卞枤閸樼敻姊洪崨濠傜仧闁稿﹥鐗滈敓鑺ョ啲閹凤拷?").append(e));
		}
		new DRoleOnlineFail().doDone(pRoleOnline);
	}
	

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 786437;

	public int getType() {
		return 786437;
	}

	public long roleid;
	public int rolesnum; // 同屏能看见的人数

	public CEnterWorld() {
	}

	public CEnterWorld(long _roleid_, int _rolesnum_) {
		this.roleid = _roleid_;
		this.rolesnum = _rolesnum_;
	}

	public final boolean _validator_() {
		if (roleid < 1) return false;
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(roleid);
		_os_.marshal(rolesnum);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		roleid = _os_.unmarshal_long();
		rolesnum = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CEnterWorld) {
			CEnterWorld _o_ = (CEnterWorld)_o1_;
			if (roleid != _o_.roleid) return false;
			if (rolesnum != _o_.rolesnum) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)roleid;
		_h_ += rolesnum;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(roleid).append(",");
		_sb_.append(rolesnum).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CEnterWorld _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(roleid - _o_.roleid);
		if (0 != _c_) return _c_;
		_c_ = rolesnum - _o_.rolesnum;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

