
package fire.pb.npc;

import fire.pb.activity.impexam.PApplyImpExamProc;
import fire.pb.activity.winner.CReqStartWinner;
import fire.pb.activity.winner.CStartWinnerBattle;
import fire.pb.battle.pvp.IPvPServiceHandle;
import fire.pb.battle.pvp.PvPServiceHandleFactory;
import fire.pb.circletask.CircleTask;
import fire.pb.circletask.CircleTaskManager;
import fire.pb.circletask.PAcceptCircTask;
import fire.pb.circletask.PSendMail2Dst;
import fire.pb.circletask.PSubmitCircleTask;
import fire.pb.circletask.SRenXingCircleTask;
import fire.pb.circletask.catchit.EnterCatchItBattle;
import fire.pb.effect.Module;
import fire.pb.game.MoneyType;
import fire.pb.instancezone.PInstNpcService;
import fire.pb.instancezone.bingfeng.BingFengLandMgr;
import fire.pb.instancezone.bingfeng.BingFengWangZuoConfig;
import fire.pb.instancezone.bingfeng.PBattletoBingFeng;
import fire.pb.instancezone.conf.InstanceZoneConfig;
import fire.pb.map.SceneNpcManager;
import fire.pb.master.MasterManager;
import fire.pb.mission.PAcceptMajorMission;
import fire.pb.mission.instance.InstanceManager;
import fire.pb.mission.instance.PBackInstanceScenceProc;
import fire.pb.mission.instance.PGiveInstanceProc;
import fire.pb.mission.instance.line.LineInstManager;
import fire.pb.ranklist.SRequestRankList;
import fire.pb.ranklist.proc.RankListManager;
import fire.pb.school.shouxi.CChallengeShouXiDiZi;
import fire.pb.school.shouxi.CCheckCanElect;
import fire.pb.school.shouxi.CReqCandidatesList;
import fire.pb.talk.MessageMgr;
import fire.pb.weibo.PTakeWeiBoAwardProc;


// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CNpcService__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CNpcService extends __CNpcService__ {

	boolean dealNpcServiceMapping(final long roleid, final int serviceid){
		try {		
			SNpcServiceMapping conf = NpcServiceManager.getInstance().getServiceMappingByServiceID(serviceid);
			if(null == conf)
				return false;
			int curType = conf.getType();
			//NPC闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閳╁啯鐝曢梻浣藉Г閿氭い锔诲枤缁辨棃寮撮姀鈾�鎷绘繛杈剧秬濞咃綁濡存繝鍥ㄧ厱闁规儳顕粻鐐烘煙椤旂偓鐒挎い锕�缍婇弻鐔碱敍濮樿京鍔Δ鐘靛仦椤洨妲愰幒鎳崇喖鎮�涙ê顏堕梺鍓茬厛閸嬪棛绮绘ィ鍐╃厵閻庣數顭堥崜鍗灻归悡搴㈩棦闁哄瞼鍠愬蹇涘礈瑜忛弳鐘绘⒑濞茶骞楁い銊ワ躬閹繝顢曢敃锟介悙濠囨煏婵炑嶆嫹婵′勘鍔戝铏圭磼濡鏆楅梺鍝ュУ閻楃姴顕ｆ繝姘櫢闁绘灏欓ˇ銊╂⒑闂堟侗鐒鹃柛搴☆煼楠炲繘鎮滈挊澶夌炊闂侀潧顧�闂勫嫬鈻撴导瀛樷拺闁告挻褰冩禍婵囩箾閸欏鑰块柟顕嗙節瀵挳鎮㈤搹璇″晭闂備胶纭堕崜婵嬨�冩繝鍥ㄥ仒婵犲﹤鐗婇ˉ濠冦亜閹烘埈妲稿褎鎸抽弻锛勪沪闂堚晜瀚圭�规洖娲﹀▓鏇㈡煟鎼搭垳绉甸柛鎾寸懇瀹曞搫鐣濋崟顒傚弰婵炴潙鍚嬮悷褏绮旈锟介弻锛勪沪閸撗勫垱闂佺偨鍎荤粻鎾荤嵁鐎ｎ亖鏀介柛銉㈡櫃婢规洖鈹戦悩鎰佸晱闁革綆鍨冲濠冪節濮橆剙鐎悷婊呭鐢帡鎮″锟介弻鐔告綇妤ｅ啯顎嶉梺绋匡功閸忔﹢寮婚妶鍥ф瀳闁告鍋涢～鈺侇渻閵堝啫锟窖囧箯閻戣姤鈷掗柛灞剧懄缁佺増銇勯弴鐔哄⒌鐎规洑鍗冲浠嬵敇閻愮绱梻浣侯潒閸曞灚鐣奸悗瑙勬尫缁舵岸寮诲☉銏犵疀闁稿繐鎽滈崙褰掓倵鐟欏嫭绀�妞わ妇鏁婚獮鍐崉鐞涒剝顫嶉梺鍦劋閸ㄧ敻鍩涙径濠庢富闁靛牆楠告禍婊呯磼婢跺本鍤�妞ゎ偄绻愮叅妞ゅ繐瀚槐鍫曟⒑閸涘﹥澶勯柛鐘宠壘椤﹪濡搁埡鍌楁嫼闂佸憡绋戦敃銈嗘叏婢舵劖鐓曢悗锝庡亝鐏忕數绱掓潏鈺佷槐鐎规洖宕埥澶娾枎鐏炴儳顏洪梻鍌欒兌椤牓寮甸鍕仭鐟滃繒鍒掗敐澶婄睄闁跨喓鏅幑銏犫槈閵忊�虫疄闂佸搫顦悘婵嬪箚閻愮儤鍊甸柛顭戝亝缁舵煡鏌ㄩ弴銊ょ盎闁伙綁顥撶划娆戞嫚閻愵剚顥堥柡浣规崌閹儳鐣濋敓浠嬫儗閸℃稒鐓曢悘鐐插⒔閳笺儳绱掔拠鍙夘棡闁靛洤瀚板浠嬪Ω瑜忛悾鍝勵渻閵堝懐绠冲┑鐑囨嫹闂佸搫鐭夌换婵嗙暦闁稁鏁囬柣妯虹仛濞堝ジ姊绘担鍛婃儓闁哄牜鍓欑叅婵☆垯璀﹂崵妤呮煕閺囥劌鐏犳鐐灪娣囧﹪顢涘┑鍡楁優閻熸粍婢橀幊鎰閹捐纾兼繛鍡樺灩閻℃﹢姊鸿ぐ鎺濇闁稿繑锕㈤獮鍐ㄎ旈崨顔芥珳闁硅偐琛ラ敓鍊熷皺閹稿鈹戦悙鑼憼缂侇喖绉堕崚鎺楀箻缂佹ê浜楀銈嗗姧缁犳垿鎮欐繝鍥ㄧ厪濠电姴绻掗悾閬嶆煛閸℃﹩娈曠紒缁樼箞閸╂盯鏁撴禒瀣妞ゆ帒鍋嗗Σ鎵磽閸屾瑨鍏岀紒顕呭灦閹嫰顢涘杈ㄦ婵犻潧鍊搁幉锟犲磻閸曨垱鐓ｉ煫鍥ㄦ尰鐠愶繝鏌￠崱鈺佸箻缂佽鲸鎹囧畷鎺戔枎閹邦喓鍋樺┑锛勫仜閻°劑骞冮崒鐐靛祦闁规壆澧楅崵鎺楁煏閸繃宸濋柣锝呯埣濮婅櫣绱掑Ο鐑╂嫽闂佸憡顭嗛崶銊ワ拷宄扳攽閻樻彃顏柛鐘冲姉閿熺晫娅㈤幏鐑芥煕閺囥劌浜炴い锔规櫊濮婃椽鎳為妷鍐句邯钘濋柦妯侯槶閿熻姤甯楃换婵嗩潩椤撶姴甯鹃梻浣稿閸嬪懐鎹㈤崘顔㈠鎮欓悜妯煎幘闂佽偐鈷堥崜娆撳煝閸儲鐓涢悘鐐插⒔濞叉潙鈹戦敍鍕幋闁轰焦鍔欏畷銊╊敇瑜忛敓鑺ュ▕濮婄粯鎷呴懞銉с�婇梺鍝ュУ閹瑰洤顕ｉ弻銉晝闁挎洩鎷烽柡瀣╃閳规垿鎮╃�圭姴顥濋梺钘夊暟閸犳牠寮婚妸銉㈡斀闁糕檧鏅滅瑧缂傚倷鑳舵刊瀵哥礊娓氾拷瀵濡搁妷銏℃杸闂佺硶鍓濋敋闁哄懍绮欏娲偡閺夊簱鎸冪紓渚囧櫘閸ㄥ爼骞冮敓鐘插嵆闁靛繒濮烽鎰版煛婢跺﹦澧曞褏鏅竟鏇㈠锤濡わ拷閺嬩線鏌涢鐘插姕闁抽攱鍨块弻娑樷攽閸℃浠惧┑鐙呮嫹濞寸厧鐡ㄩ悡鐔兼煃閸濆嫸宸ラ柣蹇曞У閵囧嫰寮撮鍡櫺滃Δ鐘靛仦閿曘垽銆佸▎鎾冲簥濠㈣泛妫欏▍濠囨煛鐏炵偓绀冪�垫澘瀚板畷鐓庘攽閹炬潙顏跺┑掳鍊曢幊蹇涘磿鎼淬劌绠规繛锝庡墮婵′粙鏌ｉ幘璺烘灈妤犵偞鐗楀蹇涘礈瑜忚摫闂備礁鎼Λ宀勫疾濞戔懇锟斤箓鎳楅锝喰俊鐐�戦崝宀勬晝閵堝鏁嬮柨婵嗘缁★拷濠殿喗锕╅崕鐢稿煛閸涱喚鍘撻梺鍛婄箓鐎氼剟鏁撻挊澶樼吋闁诡噣绠栭獮搴ㄦ嚍閵夈垺瀚介梻浣侯焾閺堫剟鎮疯瀹曟繂顓兼径瀣拷鐢电磼濡や胶鈽夐柟鍐茬箰閻ｇ兘寮婚妷锔惧幈闁诲繒鍋熼搹搴ㄥ吹閵堝棛绠鹃柟瀵稿�戝璺哄嚑閹兼番鍔嶉悡娆撴倵濞戞瑯鐒介柣顓炵焸閺屾盯骞橀崡鐐差瀳濡炪値浜滈崯瀛樹繆閸洖骞㈡俊顖炵細閺佸潡姊绘担瑙勫仩闁告柨绉撮—鍐╃鐎ｎ亞鐣洪梺璺ㄥ枔婵敻宕戦崟顖涚厱闊洦鑹炬禍褰掓煕濮楀棔閭慨濠冩そ瀹曟粓骞撻幒宥囧嚬缂傚倷娴囬褔宕弶鎴犳殾鐎规洖娲﹂崰鍡涙煕閺囨娅冪紒銊ヮ煼濡懘顢曢姀锛勩偒缂備浇灏Λ鍕敋閿濆鏁嬮柨鐔剁矙瀵鍨惧畷鍥ㄦ畷闂佽法鍠嶇划娆忕暦娴兼潙鍐�妞ゆ挻绮ｉ幏閿嬫媴閸撳弶鍍甸柣鐘叉惈閹碱偊鎳撻崹顔规斀闁宠棄妫楅悘鐔兼偣閿熶粙鏁傞挊澶樺殼闂佽法鍣﹂幏锟�?
			switch (curType) {
			case NpcServiceMappingTypes.NONE: {
				break;
			}
			case NpcServiceMappingTypes.ACCEPT_CIRCLE_TASK: {
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐差渻閵堝棗绗掗柨鏇缁瑨绠涢弮鍌滅槇闂侀潧楠忕徊鍓ф兜閻愵兙浜滈柟瀛樼箖閸犳﹢鏌曢崱妤佸殗妤犵偞鎹囬獮鎴澪旈敓鐣岀礊婵犲洤绠栭柍杞扮贰閸熷懏銇勯弮鍌氬付濠㈢懓鐗忕槐鎾存媴閸濆嫪澹曢梺绋块閸熷潡鈥﹂崶顒�鐏抽柟棰佺濞堛劑姊洪崜鎻掍簼婵炲弶鐗犻弻瀣炊閵婏絼绨婚梺瑙勬緲閻忔氨娆㈠杈╃＜闁靛鍎抽幗鐘电磼缂佹銆掗柨鐔诲Г缁嬫帡鈥﹂崶顒佸剹濠电姴瀚壕鐣岋拷骞垮劚閹锋垿鐓鍌︽嫹濞堝灝鏋︽い鏇嗗洤鐓″鑸靛姇椤懘鏌嶉崫鍕拷鐟扳枍閸ヮ剚鈷掑ù锝囨嚀椤曟粎绱掔拠鎻掞拷鍝ュ弲闂侀潧艌閺呪晠寮崶褉鏀介柛灞剧閸熺偤鏌嶉柨瀣伌闁哄瞼鍠栭幊鏍煛娴ｉ鎹曢梻浣芥硶閸犳洘鎱ㄩ妶澶嬪亱闁绘顕ц繚闂佸憡鍔﹂崰鏍嵁閵忥紕绠鹃柟瀵稿剱閻掓悂鏌ㄩ弴鐐诧拷褰掓偂閺囥垺鐓涢柛銉ｅ劚婵″ジ鏌＄�ｃ劌锟芥繈寮婚敐澶娢ч煫鍥ㄦ煥椤忓爼姊婚崒姘拷椋庣矆娴ｉ潻鑰块梺顒�绉寸壕濠氭煙閹规劦鍤欑紒鐘冲哺閹﹢鎮欑捄琛℃瀼濠电偞鍨崹娲磹閻戣姤鐓熼柕蹇嬪灪閺嗏晠鏌ㄥ☉娆戠畺缂佺粯绋掑蹇涘礈瑜嶉崺宀勬⒑閸︻厸鎷￠柛瀣嚇閹勬償閵婏腹鎷绘繛杈剧到閹碱偆鏁崜浣虹＝鐎广儱鎷戦崝鐔虹磼椤旂⒈鐓肩�殿喖锟界噥妾梺鍏兼緲閻忔繈濡撮幒鎴僵闁绘劦鍓欓鑸电節濞堝灝鏋涢柨鏇樺妼閳诲秹鏁愰崶顭戞綗闂佸湱鍎ら崵锕傛偄閼姐倗鏉稿┑顔斤供閸忔稑效濡ゅ懏鈷戦柣鐔告緲濡插鏌涢悢鍛婂唉鐎殿噮鍋婂畷姗�顢欓懖鈺嬬床婵犳鍠楅敃鈺呭礈濮樿泛纾挎い蹇撴噽缁★拷闂佹眹鍨藉褎绂掑鍕箚妞ゆ劧缍嗗▓姗�鏌熼獮鍨伈鐎规洖宕埥澶娢熼悡搴㈡啟闂傚倷绀侀崥瀣娴犲纾挎い鏍ㄧ〒椤╁弶绻濇繝鍌滃闁绘挻鐩弻娑㈠Ψ閵忊剝鐝旀繛瀵稿闂勫嫰濡甸崟顖毼ㄧ憸宥嗙闁秵鐓欐い鏃傜摂濞堟梹銇勯锝囩疄闁诡喗鐟╅、妤呮晸娴犲鏁傞柨鐕傛嫹
				int npcid = NpcServiceManager.getNpcIDByKey(npckey);
				new PAcceptCircTask(roleid, npckey, npcid, conf.getParam1(), true).submit();
				return true;
			}
			case NpcServiceMappingTypes.SUBMIT_CIRCLE_TASK: {
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闂囧鏌ㄥ┑鍡╂Ч濞存嚎鍊濋弻銈夊级閹稿骸浠撮悗娈垮枛閻栫厧鐣烽悡搴僵妞ゆ挾鍠撹ぐ鍛存⒒娴ｈ鍋犻柛鏂跨Ф閹广垽宕橀鍢夛箓鏌涢弴銊ョ仩闁告劧鎷锋俊鐐�栭崝锕�顭块敓鐣岀磼椤旂厧顣崇紒杈ㄦ尰缁楃喐绻濋崘顭戜紦婵犵數濮伴崹濂稿春閺嶎厼绀夐柡宥庡幗閸嬪倹绻涢崱妯诲鞍闁绘挾鍠栭弻鐔猴拷鐢告櫜缁辫櫕銇勮箛鎾跺闁稿﹤娼￠弻锝夊箛闂堟稑顫紓浣哄█缁犳牠骞冨Ο璺ㄧ杸闁哄啫鍊搁～褍鈹戦悙鍙夊櫣闁挎洦浜濠氭晬閸曨亝鍕冮柣鐘叉处瑜板啴锝為崶顒佸�垫繛鍫濈仢閺嬬喖鏌熼崨濠傗枙闁靛棔绶氬顕�宕煎┑鍡欑崺婵＄偑鍊栭幐鍡涘磼濠婂喚妲卞┑鐘垫暩婵兘銆傞鐐潟闁哄洢鍨圭壕濠氭煙鏉堝墽鐣辩痪鎯х秺閺屸�愁吋鎼达絼姹楁俊銈忕畳濞夋洟鎮块敓钘夆攽閻愭潙鐏︽い顓炴喘閺佸秹鎮㈤崗灏栨嫼濠殿喚鎳撳ú銈夋倶椤忓牊鐓欐い鏃囧亹閸╋綁鏌℃担瑙勫磳妤犵偛顑夐獮鎺楀籍閸屾粌搴婇梺璇插椤旀牠宕抽锟藉畷鎶芥晲閸涱垱娈鹃梺缁樻尭缁ㄥ爼寮ㄦ禒瀣厱闁斥晛鍟伴崯鏌ユ煙妞嬪骸鍘寸�规洖缍婇、娆戞喆閸曨剚婢戦梻浣告贡閸庛倖绻涙繝鍌滄殾闁圭増婢橀崡鎶芥煏韫囨洖啸闁哄苯鐗婄换娑㈠级閹存繃鍊┑鐐插悑閻熴儲鏅ラ梺鍝勮閸庢煡鎮″☉姗嗙唵閻犺櫣灏ㄩ崝鐔告叏濡濮傞柡宀嬬節閺佹捇鎳為妷褜娴勯柣搴秵閸嬪棝宕㈡禒瀣拺鐟滅増甯掓禍浼存煕閹炬潙鍝洪柛鈹垮灲瀵挳濮�閿涘嫬骞堥梻渚�娼ч悧鍡椕洪妶澶婂嚑閹兼番鍔嶉悡鍐偡濞嗗繐顏╅柣蹇撶摠閵囧嫰濮�閳ュ啿鎽甸梺杞扮劍閹瑰洭骞冮幆褏鏆嗛柨鐔诲Г缁嬪顓兼径瀣幐閻庡箍鍎辨鎼佺嵁閹达附鐓ラ柣鏃傤焾閻忓﹦绱掗敓鑺ョ瑹閿熶粙鏁愰悙娴嬫斀閻庯綆浜為悿锟藉┑鐐舵彧缁茶姤鏅堕敐澶樻晜闁割偆鍟块幏缁樼箾閹惧鍟查柟椋庡厴閺屻劑鎮㈢拠娈嬫挾绱掔�ｎ偅宕岄柛鈺冨仱楠炴帒螖娴ｅ搫骞堥梻浣告惈閸犳盯骞忛悜鑺ョ厱闁靛鍎虫禒銏°亜閺囶亞绉い銏℃礋閺佸啴鏁撻悾宀�涓嶉柤濮愬�楃壕钘壝归敐鍫濅簵闁瑰瓨绺鹃弸宥夋煏韫囧锟芥牠鍩涢幋锔藉仯闁诡厽甯掓俊鍏肩箾閸涱喖濮嶉柡宀�鍠栧畷娆撳Χ閸℃浼�
				new PSubmitCircleTask(conf.getParam1(), roleid, npckey, new java.util.ArrayList<fire.pb.npc.SubmitUnit>()).submit();
				return true;
			}
			case NpcServiceMappingTypes.QUERY_CIRCLE_TASK: {
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺岋綁骞樼�靛憡鍣紓浣介哺閹稿骞忛崨瀛橆棃婵炴垶鐭幃锝嗙節閻㈤潧浠滈柟鍐茬箻閺佸啴濮�閵堝懓鎽曢梺鏂ユ櫅閸燁垱鍒婇幘顔界厱闁圭偓娼欑徊濠氭煕閹惧綊鍝虹紒缁樼洴閺佹劙宕ㄩ鑺ュ�烽梻浣瑰濞诧附绂嶅┑鍥┾攳濠电姴娲ょ粻姘舵煙濞堝灝鏋ら柡澶嬫倐濮婃椽宕崟顐嫹瑜版帩鏁勬繛鍡樺姇椤曢亶鏌熼悙顒佺伇闁猴拷娴犲鐓ユ繛鎴灻鈺伱瑰鍐﹀仮闁哄本绋掔换婵嬪礃椤忓嫧鍚傞梺缁樻尪閸婃繈鎮￠锕�鐐婇柕濞э拷濡插牏绱掗悙顒�鍔ゆ繛纭风節瀵鏁愭径濠庢綂闂佹枼鏅涢崯顐ｇ閳哄懏鈷戦悹鎭掑妼閺嬫垿鏌涢妸锔剧畼婵炲棎鍨归～婵嬵敆婢跺﹥顓挎俊鐐�栧ú鈺呭箯妞嬪函鎷风憴鍕闁告鍥х厴闁硅揪绠戦獮銏℃叏濡厧浜鹃悗姘秺閺屾盯鈥﹂幋婵囩亐闂佺尨鎷峰ù鐘差儏缁犳娊鏌熼幆鐗堫棄缁炬儳缍婇弻锟犲炊閵夈儳浠奸梺姹囧�ら崰鏍箒闂佺绻愰崥瀣礊閹寸偞鍙忛悷娆忓閸欙拷闂佸搫澶囬崜婵嗩嚗閸曨剛绡�闁告洦鍓涘▓銈夋⒒娴ｅ搫鐨戦柟宄板槻闇夐柣妯烘▕閸庢劙鏌ｉ幘璺烘灈闁哄瞼鍠栭弻鍥晝閿熻姤鏅堕鐐寸厓缂備焦蓱缁�瀣煛鐏炲墽娲村┑鈥崇埣瀹曟儼顦抽柣搴☆煼濮婅櫣锟藉湱濯鎰版煕閵娿儲鍋ラ柕鍡曠椤繈鎳滈崹顐ｎ仧闂備椒绱徊浠嬫儔閸忚偐鈻旂�广儱顦伴悡娑氾拷骞垮劚妤犳悂鐛幋锔界叆闁绘梻顭堥悘濠勭磼閿熻姤绗熼敓浠嬫晲閻愭祴鏀介悗锝庝簽閻わ拷濠电偠鎻徊鑺ユ櫠閿濆鏁傞柛顐ゅ暱閹风粯绻涢幘瀵稿暡闁归鍏橀弻銊╂偄鐠囨畫鎾剁磼鐎ｎ偅宕岄柛鈺冨仱楠炴帒螖娴ｅ搫骞堥梻浣告惈閸犳盯骞忛悜鑺ョ厱闁靛鍎虫禒銏°亜閺囶亞绉い銏℃礋閺佸啴鏁撻悾宀�涓嶉柤濮愬�楃壕钘壝归敐鍫濅簵闁瑰瓨绺鹃弸宥夋煏韫囧锟芥牠鍩涢幋锔藉仯闁诡厽甯掓俊鍏肩箾閸涱喖濮嶉柡宀�鍠栧畷娆撳Χ閸℃浼�
				int npcid = NpcServiceManager.getNpcIDByKey(npckey);
				new fire.pb.circletask.catchit.PQueryCatchItTaskTime(roleid, npcid, conf.getParam1()).submit();
				return true;
			}
			case NpcServiceMappingTypes.QUERY_CIRCLE_TEAM: {
				break;
			}
			case NpcServiceMappingTypes.QUERY_CIRCLE_BATTLE: {
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮村杈┬㈤梻浣规偠閸庢椽宕滈敃鍌氭瀬闁告劦鍠楅悡銉╂煛閸ユ湹绨奸悗姘秺濮婂搫效閸パ嶆嫹濡ゅ懎纾婚柟鎹愬煐瀹曞弶绻濋棃娑欏窛缂佲槄鎷烽梻浣侯焾閺堫剛绮欓幋婵冩瀺鐟滄柨顫忛崫鍔借櫣鎷犻幓鎺旑啈闂備浇宕甸崯鍧楀疾閻樺樊鍤曞┑鐘崇閸嬪嫰鏌涘☉姗堝姛缂佸鐖煎娲川婵犲啫鐦烽梺鍛婁緱閸犳顢欒箛娑欌拻闁稿本鐟ч崝宥嗕繆閻愬弶鍋ョ�规洏鍨虹粋鎺旓拷锝庣厜閹风兘宕橀埡鍐槇闂佹悶鍎滈崱妯诲暫濠电姷鏁搁崑鐐哄垂椤栫偛鍨傜憸鐗堝笚閸婃寧绻涘顔荤凹闁绘挻娲熼弻鐔兼焽閿曪拷閺嬫稑霉濠婂懎浜鹃柕鍥у楠炴ê鐣烽崶鈹劌鈹戦纭锋敾婵＄偘绮欓悰顕�寮介鐔凤拷鐑芥偣閸ュ洤瀚鍫曟⒑閸濆嫮鈻夐柛妯虹秺閺佹捇鎸婃径濠冩閻庤娲栧畷顒勫煡婢跺á鐔奉煥閹邦喚鏆ら梺鍝勬湰閻╊垰顕ｉ幘顔嘉╅柕澶涘娴滈箖姊绘担鍦菇闁稿ě鍥х闁绘垼濮ら埛鎺懨归敐鍛暈閻犳劧绻濋弻娑氾拷锝庡亝瀹曞本顨ラ悙鍙夘棤濞寸媴闄勫顏堝箰鎼达絾鍒涢梺璇″枟閻熲晠骞冩禒瀣仺缁炬澘顦遍梻顖涚節閻㈤潧浠╅柟娲讳簽瀵板﹥绂掔�ｎ亞顔愬銈嗗姧缁叉寧鏅堕敓鐘斥拻闁稿本鐟ㄩ崗宀勬煕濡姴鎳愮粈濠傗攽閻樻彃顏☉鎾崇Ч閺屸�崇暤椤旇偐啸闁跨喕妫勯悘婵嬪Υ閹烘埈娼╅柣鎰靛墮椤忚埖绻濆▓鍨灈闁挎洏鍔岄埢宥夋晲閸ヮ煈娼熼梺鍦劋閸わ箓鎮㈤懡銈囨澑濠殿喗锕╅崗娑樞уΔ鍛拺闁荤喐婢樺Σ濠氭煕閻斿憡灏︾�殿噮鍋婂畷姗�顢欓懖鈺嬬床婵犳鍠楅敃鈺呭礈濮樿泛纾挎い蹇撴噽缁★拷闂佹眹鍨藉褎绂掑鍕箚妞ゆ劧缍嗗▓姗�鏌熼獮鍨伈鐎规洖宕埥澶娢熼悡搴㈡啟闂傚倷绀侀崥瀣娴犲纾挎い鏍ㄧ〒椤╁弶绻濇繝鍌滃闁绘挻鐩弻娑㈠箛椤撶儐鍤嬮柣搴㈣壘缂嶅﹤顫忛搹鍦煓闁割煈鍣崝澶嬬節閻㈤潧浠滈柨鏇樺�濋、姘舵晲閸モ晝鐓撻柟鐓庣摠閹稿锝炲鍛斀妞ゆ梻鐡旈悞浠嬫煕鐎ｎ偅灏甸柨鐔诲Г娣囨椽锝炴径灞惧床婵炴垯鍨归柋鍥ㄧ節闂堟稓澧旈柧蹇撻叄濮婃椽宕崟闈涘壄闂佺锕ュú鐔煎灳閿曞倹鍤勬い鏍电稻姝囧┑锛勫亼閸婃垿宕濆畝鍕櫇妞ゅ繐鐗婇崑妯汇亜閺囶亝瀚归悗瑙勬礀瀹曨剟鍩ユ径濞㈢喖鎳栭埡鍌滅М闂傚倸鍊风粈浣圭珶婵犲洤纾婚柛娑欐綑缁犳艾鈹戦悩鍙夋悙闁绘挻鐩弻娑樷槈閸楃偞鐏撻梺鍛婄懃濡繂顫忓ú顏勪紶闁告洦鍋撻幏鐤亹閹烘垹锛熼悗瑙勬礀濞村嫰骞忓畡閭︽僵妞ゆ帒瀚浼存⒑閸濆嫭婀扮紒瀣崌閺佹捇寮妶鍥┬ｉ梺绋款儏鐎氼剟婀佸銈嗘婵倝宕ｈ箛鎾斀闁绘ɑ褰冮顐︽偨椤栨稓娲撮柡宀�鍠庨悾锟犳偋閸繃顏ょ紓鍌欑贰閸犳岸寮幖浣规櫢闁哄倶鍊楃粔闈浢瑰鍕疄闁诡喚鍋撶�佃偐锟芥稒菤閹风粯绻涙潏鍓у埌闁硅绻濆畷顖炴倷閻戞鍘电紒鐐緲瀹曨剚绂嶉悧鍫熷弿濠电姳鑳堕惌娆戯拷瑙勬礈閸犳牠銆佸锟介幃鈺呮偨闂堟稑蝎闂備浇顕ф鍝ョ不瀹ュ纾块梺顒�绉寸粻鐘差熆閼搁潧濮囩紓浣叉櫅闇夐柣妯烘▕閸庢劙鏌涙繝鍕毈闁哄被鍔岄埞鎴﹀幢濞嗗繐姣堢紓鍌欓檷閸斿矂鈥﹂悜钘夎摕闁挎繂妫欓崕鐔搞亜閺冨倸甯剁紒鐘垫嚀椤啴濡舵惔婵堢泿闂佸摜鍠庨悺銊︾┍婵犲洤閱囬柡鍥╁仜閼板灝鈹戞幊閸婃洟宕导鏉戠疇闁糕剝绋掗埛鎴︽偣閸ャ劌绲绘い鎺嬪灲閺屾盯骞嬪┑鍫⑿ㄩ悗瑙勬礃缁矂鍩㈡惔銊ョ闁哄倸澧界紞宥夋⒒閸屾艾锟藉嘲霉閸パ�鏋栭柡鍥ュ灩闂傤垶鏌ㄩ弴鐐诧拷鍝ョ不椤栫偞鐓ラ柣鏇炲�圭�氾拷?
				int npcid = NpcServiceManager.getNpcIDByKey(npckey);
				EnterCatchItBattle enter = new EnterCatchItBattle(roleid, npckey, npcid, conf.getParam1());
				enter.enterBattle();
				return true;
			}
			case NpcServiceMappingTypes.CIRCLE_PRODUCE: {
				int npcid = NpcServiceManager.getNpcIDByKey(npckey);
				new fire.pb.item.PProduceItem(roleid, conf.getParam1(), npcid, conf.getParam2()).submit();
				return true;
			}
			case NpcServiceMappingTypes.RENXING_CIRCLE_TASK: {
				//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鎯у⒔缁垳鎹㈠☉銏犵婵炲棗绻掗崝鎾⒑鏉炴壆顦︽い鎴濇婵＄敻宕熼姘鳖啋闁荤姾娅ｉ崕銈夋倵妤ｅ啯鈷戦柛娑橈功閹冲啰绱掔紒妯哄闁炽儲妫冨畷姗�顢旀惔銏狀伓闂佹寧绻傜花濂告焽椤栨稏浜滈幖娣焺濞堟粓鏌＄仦鍓ф创濠碘剝鎮傞弫鍌炲礈瑜忛弶浠嬫⒒娴ｅ憡鎯堥悶姘煎亰瀹曟繈骞嬮敃锟界粻鏍煏閸繍妲哥痪鎯у悑缁绘盯骞嬮悜鍥︾返婵炲銆嬮幏锟�?闂傚倸鍊搁崐鎼佸磹瀹勬噴褰掑炊瑜忛弳锕傛煟閵忋埄鐒剧紒鎰殜閺岀喖鏌囬敃锟介弸娑㈡煕閵婏妇绠橀柨鐔烘櫕濞呫垽骞忛悜鑺ョ厱闁哄洢鍔屾晶顕�鏌涢幘宕囧煟婵﹥妞藉畷妤呮嚃閳瑰灝浠﹂梻浣告惈閹冲繘鎯勯姘辨殾闁荤喐澹嬮弨浠嬫倵閿濆骸浜為柛妯绘崌濮婃椽宕ㄦ繝鍕暤闁诲孩鍑归崜鐔奉嚕閹间焦鏅濋柛灞剧〒閸樼敻鎮楅悷鏉款仾婵犮垺锚鍗卞┑鐘崇閻撳啴鏌﹀Ο渚▓婵″弶鎮傞弻宥囨嫚閺屻儺锟芥鎽堕敐澶嬬厽闁圭偓濞婇妤�螖閺冨牊鈷掗柛灞捐壘閿熶粙顥撶划鍫熸媴閸濆嫷妫滃銈嗘尵婵挳宕瑰┑鍥ヤ簻闁哄秲鍔岄崵顒佺箾閸忚偐澧遍柟鍙夋倐閹囧醇濠靛牏鎳嗗┑鈩冾殔閹虫ê顫忓ú顏勫窛濠电姴鍟ˇ鈺呮⒑閸濄儱校鐎癸拷閹间礁绠栭柛褎顨嗛弲绋棵归悩宸剱闁抽攱鍨块幃宄扳枎韫囨搩浠肩紓渚婃嫹闁告劏鏅濈粻楣冩煕濞戝崬鏋熺紒锟介敓浠嬫⒑瀹曞洨甯涢柟鐟版搐椤曪絾绻濆顑┿劑鏌ㄩ弴顏呭闂佽法鍠撻弲顐﹀极婵犳艾绠栫�瑰嫭澹嬮弸搴ㄧ叓閸ャ劍鎯勫ù鐘插⒔缁辨挻绗熸繝鍐伓闂備礁鎲￠崝锕傚窗濡ゅ懏鍋傞柣鏂垮悑閻撴瑩鏌涢…鎴濇灈妞ゅ浚鍋嗙槐鎺楀煡閸涱喖顏堕梻浣筋嚙鐎涒晠顢欓弽顓炵獥婵炴垯鍩勯弫瀣喐閺冨牆鏄ラ柕澶涚畱缁剁偤鏌熼柇锕�澧绘繛鐓庯躬濮婃椽寮妷锔界彅闂佸摜鍣ラ崹鍫曘�侀弮鍫熷亜闁稿繐鐨烽幏缁樼箾鏉堝墽绉┑顔哄�楀☉鐢稿醇閺囩喓鍘遍梺鎸庣箓缁绘帡鎮鹃崹顐闁绘劘灏欑粻濠氭煛娴ｈ宕岄柡浣规崌閺佹捇鏁撻敓锟�?
				fire.pb.circletask.CircleTask sq = new CircleTask(roleid, true);
				int renxingtimes = sq.getRenXingCircTaskCount(roleid, conf.getParam1());
				gnet.link.Onlines.getInstance().send(roleid, new SRenXingCircleTask(serviceid, conf.getParam1(), renxingtimes, npckey));
				return true;
			}
			case NpcServiceMappingTypes.CHALLENGE_NPC: {
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К缂傚倷鑳舵慨閿嬬箾閿熶粙鏌″畝锟介崰鏍嵁閹达箑绠涢梻鍫熺♁椤斿嫮绱撻崒娆掑厡濠殿喚鍏樺畷浼村冀椤撶偠鎽曢梺闈浥堥弲婊堝磻閸曨垱鐓曟繝闈涙閻濇棃鏌曡箛瀣拷鏍偂閺囥垺鐓忓┑鐐茬仢閸旀岸鏌ㄩ悢缁橆棄婵炲皷锟芥剚鍤曢悹鍥ㄧゴ濡插牓鏌曡箛濠冩珕闁哄懏绻堝娲箰鎼达絿鐣靛┑鈽嗗亝閻╊垵妫熼梺闈涱槴閺呮粓鍩涢幋锔界厵闁兼祴鏅涙禒婊冣攽閳ョ偨鍋㈤柡灞剧♁缁绘繈宕掑☉妯规樊闁诲孩顔栭崰鏍�﹂悜钘夋瀬闁归偊鍘肩欢鐐烘倵閿濆簼鎮嶉柟椋庡厴閹粓鎳為妷銏″闂備礁澹婇崑鍡涘窗鎼淬劌绐楅柡鍥ュ灪閻撴瑧锟界懓瀚妯何ｆ繝姘厽闁挎繂绻掔弧锟介梺杞扮劍閹瑰洭寮幘缁樻櫢闁跨噦鎷�
				int npcid = NpcServiceManager.getNpcIDByKey(npckey);
				fire.pb.circletask.CircleTask sq = new CircleTask(roleid, true);
				boolean ret = sq.exeCircTaskBattle(roleid, npckey, conf.getParam1(), npcid);
				Module.logger.debug("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴楠炴﹢鎳犻澶嬓滈梻浣规偠閸斿秶鎹㈤崘顔嘉﹂柛鏇ㄥ灠閸愶拷闂侀潧臎娓氬﹥瀚归柟鐑橆殕閻撶喐绻濋棃娑欘棤闁糕晪缍侀弻鈥崇暆鐎ｎ剛鐦堥悗瑙勬礀閻栧吋淇婇悜钘壩ㄧ憸宀勫箖閿濆鈷掑ù锝呮贡濠�浠嬫煕婵犲喚娈滅�规洘鍨块獮姗�鎳滈棃娑樼哎婵犵數鍋為崹顖炲垂閸︻厾涓嶉柨婵嗘缁犻箖鏌涢埄鍐炬畼缂佺姵濞婇弻娑㈠籍閿熶粙骞愰崘宸綎闁绘垶蓱婵粓鏌熷▓鍨珮婵″樊鍣ｅ娲箰鎼淬垻鈹涚紓浣哄У閹瑰洤顕ｉ锕�绠荤紓浣姑禒濂告煟韫囨洖浠﹂柛搴″暱閳绘挸鐣濋崟顒傚幗闁瑰吋鐣崹濠氥�傞弻銉︾厵妞ゆ梻鍘ч敓钘夋健閹即顢欑捄銊ф澑濠电偞鍨堕悷锕�鈻嶉姀銈嗏拺閻犳亽鍔屽▍鎰版煙閸戙倖瀚�" + roleid + "]" + "exeCircTaskBattle缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鏁愭径濠勵吅闂佹寧绻傞幉娑㈠箻缂佹鍘辨繝鐢靛Т閸婂綊宕戦妷鈺傜厸閻忕偠顕ф慨鍌滐拷娈垮枟閹告娊骞冨▎鎴炲珰鐟滃海锟芥艾缍婇弻娑樷攽閸曨偄濮㈡繛鎴炴尭缁夊綊寮婚埄鍐ㄧ窞濠电姴瀚惃鎴︽⒑閻氬瓨瀚规繛瀵稿Т椤戝棝鎮￠悢闀愮箚妞ゆ牗绻冮鐘绘煥濞戞校闁靛洤瀚伴弫鎰板幢濞嗗繐缁╅梻浣告惈閺堫剛绮欓幒鏃�宕叉繝闈涱儏绾惧吋绻濇繝鍌氭殶闁告ü绮欏缁樻媴閸涘﹥鍎撻柣鐐村嚬閸嬪﹤鐣峰┑瀣闁挎洩鎷风紒鐘崇墵閺屾洟宕煎┑鎰︾紒鐐劤閸氬鎹㈠☉銏犵闁绘垵娲ｇ欢鍨箾鐎垫悶锟藉骞忛敓锟�:" + ret);
				return true;
			}
			case NpcServiceMappingTypes.ENTER_INST: {
	
				Integer instid = conf.getParam1();
				InstanceZoneConfig zoneconfig = fire.pb.instancezone.Module
						.getInstance().getInstanceZoneConfigs()
						.get(instid.intValue());
				if (zoneconfig == null) {
					return false;
				}
				new PInstNpcService(instid, serviceid, roleid).submit();
				return true;
			}
			case NpcServiceMappingTypes.ACCEPT_TUPO: {
				new PAcceptMajorMission(roleid, conf.getParam1(), true,true).call();
			}
			default:
				break;
			}
			return false;
		} catch (Exception e) {
			// TODO 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К闂備胶顭堢悮顐﹀礉鎼淬劌绠熼柟闂寸缁秹鏌涢锝嗗剷闁靛鏅滈悡鏇㈡煙閼割剙濡芥繛鍛閺屾稒鎯旈敐鍛亪闂佸搫鏈ú婵堢不濞戞熬鎷烽敐搴濈敖闁告梹娼欓埞鎴︽倷鐠鸿櫣姣㈠銈庡幖閻楁捇宕洪悙鍝勭闁挎棁妫勬禍褰掓煟閻樺弶鍘傞柛鎰屽懐鐓戦梻鍌欐祰椤曆咃拷娑掓櫊瀹曟瑨銇愰幒鎴犵厬闂佸憡鍔戦崝搴ㄥ汲閿曞倹鐓ユ繝闈涙婢с垽鏌ｉ妶蹇斿濠电姷鏁搁崑鐐哄垂閸洘鍋＄憸鏂跨暦閵忋倕绠荤紓浣骨氶幏娲⒑閸涘﹦鈽夐柨鏇缁骞樼紒妯猴拷鍨叏濡厧甯剁�殿噮鍠氶敓鍊燁潐濞叉牠宕捄銊ュ疾婵＄偑鍊曠换鎰板箠閹版澘鍌ㄩ梺顒�绉甸悡鐔煎箹閹碱厼鐏ｇ紒浣哄厴閺屾盯寮幐搴㈡嫳闂侀�涚┒閸旀垵鐣烽幒妤佸�烽悗鐢殿焾楠炴劙鏌ｆ惔锝嗩仧闁归鍏橀幃妤呮晲鎼粹�愁潾閻炴熬绠撻弻锝嗘償閵忊晛鏅遍梺闈╃秵閸ｏ絽鐣烽幎鑺ユ櫜闁告侗鍨卞▓楣冩⒑閸︻厼鍔嬫い銊ユ噹濞插潡姊绘担瑙勫仩闁稿孩绮撳畷姗�宕橀崣銉╁仐濠殿喖锕ら…宄扮暦閹烘垟鏋庨柟閭﹀枔閸嬫ɑ淇婇悙顏勶拷鏍р枖閿曞倸宸濇い鏃傚帶缁ㄣ儵姊绘担鍝ョШ闁稿锕畷鏇㈩敂閸旇姤妞介、鏂款吋閸℃ɑ鐝濋梻鍌欑窔濞佳呮崲閹烘挻鍙忓Δ锝呭暙缁犳椽鏌￠崶銉ョ仾闁抽攱鍨块弻鐔虹矙閹稿孩宕崇紓浣哄У閹稿濡甸崟顖涙櫆闁割煈鍠栫粊顕�鎮楀▓鍨灍闁绘搫绻濋悰顕�寮介妸锕�顎撻梺闈╁瘜閸樼厧顕ｉ幎鑺モ拻濞达綀娅ｇ敮娑欑箾閸欏澧电�规洘鍔欏畷鐑筋敇閵婏箑顏跺┑顔筋焽閸嬫挾锟芥熬鎷�? catch 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簻椤掋垺銇勯幇顖毿撻柟渚垮妼椤粓宕卞Δ锟介埛鎺楁⒑缂佹ê绗╂俊顐㈠閸╃偤骞嬮敂钘変汗闁诲骸婀辨慨鎾夊┑鍫㈢＝濞达絽鎼宀勬煕閵娿儳鍩ｇ�殿喖顭锋俊鎼佸煛閸屾矮绨介梻浣侯焾閺堫剛绮欓幋锔绘晜闁跨噦鎷�?
			Module.logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴楠炴﹢鎳犻澶嬓滈梻浣规偠閸斿秶鎹㈤崘顔嘉﹂柛鏇ㄥ灠閸愶拷闂侀潧臎娓氬﹥瀚归柟鐑橆殕閻撶喐绻濋棃娑欘棤闁糕晪缍侀弻鈥崇暆鐎ｎ剛鐦堥悗瑙勬礀閻栧吋淇婇悜钘壩ㄧ憸宀勫箖閿濆鈷掑ù锝呮贡濠�浠嬫煕婵犲喚娈滅�规洘鍨块獮姗�鎳滈棃娑樼哎婵犵數鍋為崹顖炲垂閸︻厾涓嶉柨婵嗘缁犻箖鏌涢埄鍐炬畼缂佺姵濞婇弻娑㈠籍閿熶粙骞愰崘宸綎闁绘垶蓱婵粓鏌熷▓鍨珮婵″樊鍣ｅ娲箰鎼淬垻鈹涚紓浣哄У閹瑰洤顕ｉ锕�绠荤紓浣姑禒濂告煟韫囨洖浠﹂柛搴″暱閳绘挸鐣濋崟顒傚幗闁瑰吋鐣崹濠氥�傞弻銉︾厵妞ゆ梻鍘ч敓钘夋健閹即顢欑捄銊ф澑濠电偞鍨堕悷锕�鈻嶉姀銈嗏拺閻犳亽鍔屽▍鎰版煙閸戙倖瀚�" + roleid + "]" + "serviceid:" + serviceid + "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿噮鍣ｉ弫鎾寸鐎ｎ亞顔嗗┑鐘绘涧椤戝懐绮婚姘兼富閻庯綆浜濋幑锝囩磼閻樿櫕鈷愮紒缁樼洴楠炲鎮欓崱妯虹仸鐎垫澘瀚板畷鐔碱敍濞戞艾骞堥梺璇插嚱缁茶姤鏅舵惔锝呭К闁跨喍绮欏娲传閸曨剚鎷卞┑鐐插级椤洭骞戦姀鐘闁靛繆锟界鎷烽柨瀣ㄤ簻闁瑰搫绉烽崗宀�鎲搁幍顔兼灈婵﹦绮幏鍛存嚍閵夛綇鎷烽崘顏嗙＜闁跨喕濮ょ粭鐔兼晸娴犲锟戒線寮介妸銉х獮闂佸綊鍋婇崜婵嬪箺閺囥垺鈷戦梻鍫熷崟閸儱鐤炬繝濠傜墕绾惧鏌涢埄鍐檨闁绘挻娲熼幃姗�鎮欓幓鎺嗘寖闂佸疇妫勯ˇ浼村Φ閸曨喚鐤�闁靛绠戦锟�");
			return false;			
		}
	}

	@Override
	public void process() {
		// protocol handle
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		if (!fire.pb.StateCommon.isOnline(roleid))
			return;
		if(100002 != serviceid && fire.pb.buff.Module.existState(roleid, fire.pb.buff.BuffConstant.StateType.STATE_BATTLE_FIGHTER))
			return;
		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闂囧鏌ㄥ┑鍡╂Ч濞存嚎鍊濋弻銈夊级閹稿骸浠村┑顔硷攻濡炰粙銆佸Δ鍛櫢闁伙絽鐬奸惌鎾淬亜閺囶亝瀚归梺杞扮劍閹瑰洤顕ｉ鍕ч柛銉㈡櫆濞堝ジ鏌ｆ惔銈庢綈婵炲弶鐗犳俊鍫曞川婵犱胶绠氶梺缁樺灱婵倝寮插┑瀣叆闁绘棁顕ц缂備礁鍊哥粔闈涱焽韫囨稑鐓涢柛鎰典悍缁卞啿鈹戦悙鑸靛涧缂佽弓绮欓獮澶愭晸閻樿尙鍘洪梺鍝勬储閸ㄦ椽鎮″☉姘炬嫹閻у憡瀚归柣搴秵閸嬪嫰顢旈敓锟�+B 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忓爼鏌ｆ惔銈庢綈婵炴彃绻樺畷鏇㈠箮閼恒儲娅㈤梺鍝勫�堕崐妤冪矓閻㈠憡鐓曢柣妯虹－婢у崬顭跨憴鍕鐎规洜顭堣灃濞达絽鎼獮宥夋⒒娴ｇ瓔鍤冮柛銊ㄦ珪閺呰泛螖閸氳棄顦板鍕箛椤掑偆鍟囬梻浣告惈椤︿即宕烘繝鍥╁彆妞ゆ帒瀚悡娑㈡倶閻愰鍤欓柨鐔诲Г缁诲牓鐛繝鍌楁斀閻庯綆浜為鐓庮渻閵堝棙顥嗛柛瀣姈閺呭爼顢涘锝嗘杸闂佺粯鍔樼亸娆撳箺閻樼數纾兼い鏃囧亹閻忚京绱掓潏鈺佷沪缂佺粯绻堝畷鎯邦樁闁硅姤娲栭埞鎴︽倷閺夋垹浠ч梺鎼炲妿閹虫捇寮鎴掔箚闁绘劦浜滈敓鑺ョ墪椤繑绻濆顒�鍋嶉悷婊勬閺佹劙鎮欓崫鍕幐闂佸憡渚楅崰鎺楀箯閸濆嫧鏀介柣鎰硾閽勫吋銇勯弴鍡楁川瀹撲焦淇婇妶鍕濞存粍绮撻弻鏇熺箾閸喖濮曞銈冨劘閸ㄥ綊鍩為幋锔芥櫖闁告洦鍓氬В鍫ユ倵鐟欏嫭绀堥柛鐘崇墵閵嗕礁鈽夊鍡樺兊濡炪倖甯幏鐑芥煛娴ｉ潧锟芥繂顫忕紒妯肩懝闁跨喕妫勯…鍥樄闁炽儻绠撳畷濂稿Ψ閵壯屾Х闁诲海娅㈤幏鐑芥煕閺囩儑宸ユい锔诲灦閸╃偤骞嬮敃锟介獮銏ゆ煃閸濆嫬锟芥悂鎯佸鍫熲拻濞撴熬鎷锋繛浣冲洦鍋嬮柛鈩冿供濞堜粙鏌涘☉姗堝姛妞も晜鐓￠弻娑㈠箻濡わ拷閹虫劙鏁嶅┑瀣�垫鐐茬仢閸旀岸鎮楀鐓庢灓缂侇噯缍佸顕�宕掗敂钘夘伓濠电偛鐗嗛悘婵嬪几閿斿浜滈柡鍥ф濞层倝鎮￠垾鎰佺唵閻犺桨璀﹂悡顒勬煟閹惧崬鍔﹂柡灞剧☉閳藉宕￠悙鍏哥敾婵犵數濮伴崹娲垂閸噮娼栭柧蹇氼潐鐎氭岸鏌熺紒妯虹瑨婵絾鍔楃槐鎾诲磼濮樻瘷銏′繆椤愶絿鎳呯紒顔碱儏椤撳ジ宕担鍝勫汲闂備礁鎲″ú锕傚礈濞嗗浚鍤曢柛褎顨嗛悡娆撴煠濞村娅堥挊鐔封攽閳╁啫绲婚柟鍐查叄婵℃挳骞掗幘鍓佺槇濠殿喗锕╅崢楣冨储椤忓牊鈷戦柛鎾村絻娴滄繄绱掔拠鎻掓殻閽樼喖鏌ｉ幇顔煎妺闁绘挾鍠栭弻鐔煎箚瑜嶉懜褰掓煕閺傝锟芥妲愰幒鎾寸秶闁靛鍎抽悷鏌ユ倵閸偅绶查悗姘煎枟缁傛帡鏁冮崒姘辩暰閻熸粌閰ｉ幃楣冾敆娴ｉ绠氶梺缁樺姦娴滄粓鏁撻懞銉уⅹ閻撱倝鏌嶉崫鍕殶缂侊拷婵犲倶锟芥帒顫濋悙顒�顏堕梻渚�娼уΛ鏃傜矆娓氾拷閸┿垺鎯旈妸銉ь吅闂佺粯鍔樼亸娆撴晬韫囨稒鈷掑〒姘炬嫹婵炰匠鍡楁闂備礁鎲″ú锕傚礈濞戞碍鏆滈柛鈩冪♁閳锋帡鏌涚仦鎹愬闁跨喕妫勯崲鏌ユ箒闂佹悶鍎洪崜銊х礊閺嵮岀唵闁兼悂娼ф慨鍥╃棯閹规劖纭堕柨鐔凤拷鐕佹綈婵炲弶鐗曠叅闁靛牆锛嗘径濠庢僵妞ゆ挻绮堢花濠氭⒑鐟欏嫬绀冩繛澶嬬洴瀵悂寮敓浠嬪Φ閸曨垰鐓涢柛娑卞枟閺嗙娀姊洪柅娑氣敀闁告柨鐭侀悘鎺楁⒑閸撹尙鍘涢柛鐘冲哺瀹曘垽顢曢敂瑙ｆ嫼缂傚倷鐒﹁摫閻忓繒鏁婚弻娑㈡偐瀹曞洤鈷岄悗娈垮枛椤兘寮幇顓炵窞濠电姴瀚烽崥鍛節閻㈤潧鈻堟繛浣冲厾娲Χ婢癸箑娲崺锟犲川椤旀儳骞楅梺鐟板悑閻ｎ亪宕规繝姘柈闁哄被鍎查悡娆撴煕閹存瑥锟芥牜锟芥熬鎷�?
		//NPC婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牆濮涚紓浣哄█缁犳牠寮婚妸鈺傚亜閻犲洦鐣幘鍓佺＜缂備焦顭囬埦渚�鏌熷畡鐗堝殗鐎规洘锕㈠畷锝嗗緞鐎ｎ偄锟介绱撴担鍝勪壕闁稿骸鍟块敃銏ゆ焼瀹ュ懐鐤呴梺褰掓？閻掞箓宕戠�ｎ喗鐓曟い鎰剁悼缁犳﹢鏌ｉ悢鍝ュ弨婵﹨娅ｇ划娆忊枎閹冨婵＄偑鍊栭崹鐢杆囬棃娑卞殨濠电姵纰嶉弲鎼佹煟濡灝鐨洪柛濠勫仱濮婅櫣锟藉湱濮甸妴鍐煟閹虹偟鐣甸柟顔筋殕閵堬綁宕橀埞鐐闂備礁鎲＄粙鎴︽晝閿曞倸绠犻柛鎰典簽绾捐偐绱撴担鐧稿叕闁兼媽娉曢敓鑺ヮ問閸犳牠鈥﹂悜钘夌畺闁靛繈鍊栭崑鍌炲箹鏉堝墽鎮奸柡鍡曞嵆濮婄粯鎷呴搹鐟扮濡炪們鍔岄幊姗�骞冭椤劑宕楅悙顒傛创鐎规洜鍠栭、娑樷槈閹烘挸顏瑰┑鐘垫暩閸嬬姷浜搁鍫晪鐟滄棃鎮伴鍢夋梹鎷呴崗鍝ョ泿闂備線娼ч…鍫ュ磿婵犳氨鍙曟い鎺戝亰閹峰嘲鈻撻崹顔界亪濡炪値鍘鹃崗姗�鐛崘顔碱潊闁靛牆妫楁禒蹇涙煟鎼淬垻鈾侀柨姘亜韫囨挾鍩ｆ慨濠傛惈鏁堥柛銉戝懍鐥俊鐐�栧褰掓偋閻樿绠栭柣鎰惈缁犳碍銇勯鏂ゆ嫹瀹曞洨楔闂佽鍣禍顏勭暦閵娾晩鏁嶆繝濠傚椤旀捇姊婚崒娆戭槮闁圭⒈鍋呭鍕炊椤掞拷缁�鍫熺節闂堟稒锛嶉柛銈嗩殜閺屾盯寮撮妸銉ょ爱濠碘剝褰冮悧濠勬崲濞戙垹骞㈡俊銈勮兌椤╃増绻涚�垫悶锟藉骞忛敓锟�
		if(PNpcAwardProc.containedByNpcAward(this.serviceid)){
			new PNpcAwardProc(roleid, this.serviceid).submit();
			return;
		}
		
		int npcId = NpcServiceManager.getNpcIDByKey(npckey);
		
		fire.pb.item.Pack bag = new fire.pb.item.Pack(roleid, true);
		long v = bag.getCurrency(MoneyType.MoneyType_ProfContribute);
		if (serviceid == NpcServices.ONE_LIEVEL_TITLE)
		{
			if (v >= 60)
			{
				new PAcceptCircTask(roleid, npckey, npcId, 1120000, true).submit();			
			}
			else
			{
				java.util.ArrayList<String> s = new java.util.ArrayList<String>();
				s.add("60");
				MessageMgr.sendMsgNotify(roleid, 190070, s);				
			}
			
			return;
		}
		
		if (serviceid == NpcServices.TWO_LIEVEL_TITLE)
		{
			if (v >= 120)
			{
				new PAcceptCircTask(roleid, npckey, npcId, 1130000, true).submit();		
			}
			else
			{
				java.util.ArrayList<String> s = new java.util.ArrayList<String>();
				s.add("120");
				MessageMgr.sendMsgNotify(roleid, 190070, s);				
			}
			
			return;
		}
		
		if (serviceid == NpcServices.THREE_LIEVEL_TITLE)
		{
			if (v >= 180)
			{
				new PAcceptCircTask(roleid, npckey, npcId, 1140000, true).submit();		
			}
			else
			{
				java.util.ArrayList<String> s = new java.util.ArrayList<String>();
				s.add("180");
				MessageMgr.sendMsgNotify(roleid, 190070, s);						
			}
			
			return;
		}
		
		//serviceid -> type -> params 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥╁彄闁搞儯鍔嶉悡銉︺亜韫囨碍纭鹃柍瑙勫灴椤㈡瑧绮电�ｎ剙濮洪梻浣告啞椤棝宕惰閸ゆ垿姊虹紒妯荤叆闁告艾顑夐幃鈥斥枎韫囧鎷烽幒鎴僵妞ゆ帒鍊烽搹搴㈢節濞堝灝鏋涢柛濠傜秺閵嗗啴濡烽埡鍌氾拷鐑藉级閸喎绀冮柨鐔诲Г鐎笛囧Φ閸曨垰顫呴柨娑樺閸ｄ即姊洪崷顓х劸闁挎洏鍎遍銉╁礋椤掑倻鐦堥梺绋胯閸婃牠藟婢舵劖鈷掗柛灞捐壘閿熻姤鎮傚畷鎰版倻閼恒儱娈戦梺鍛婃尫缁�渚�宕瑰┑鍥ヤ簻闁哄稁鍋勬禍褰掓煥閻斿憡鐏紒鐘虫尭閻ｉ攱绺界粙璇俱劍銇勯弮鍥撴繛鍛閺岋綁鎮㈤崫銉х厐缂備胶绮敮鈥崇暦濮樿泛绠虫俊銈忔嫹闂佸崬娲弻鏇熷緞閸繂濮㈤梺鎸庣♁缁矂鍩為幋锔藉亹閻犲泧鍕毎闂備礁鎲″褰掓偋濠婂牊鏅搁柤鎭掑劥婢规绱撳鍜冭含妤犵偛鍟悾锟犲箥閾忣偆锟藉妫呴銏″闁瑰皷鏅滅粋鎺楀礈瑜忕壕钘夈�掑顒婃敾閻庢艾缍婂铏规崉閵娿儲鐏嗗┑鈽嗗亜鐎氫即宕洪悙鍝勭闁挎棁妫勯敓鐣屽厴閺屾稑鈻庤箛锝喰㈤梺鍝勵儐閻熲晛顫忓ú顏勫窛濠电姴瀚崳褔姊洪崫銉ユ珡闁稿锕獮鍐箚瑜忛弳瀣煙闁垮鈷愭俊顐㈠暙閻ｇ兘濡搁埡濠冩櫍闂佺粯顭堥婊堝箯閻戣姤鍊风�瑰壊鍠楃�靛矂姊洪棃娑氬婵☆偅顨堢划顓㈠磼濠婂懐锛滈梺璺ㄥ枙婵倝骞忛崨鏉戞嵍妞ゆ挆鍕偒闂傚倷绀侀崯鍧楀箹椤愶箑绠犻煫鍥ㄧ☉閻撴洟鏌熸潏楣冩闁稿缍侀弻鐔碱敇閻旈鐟ㄦ繝纰橈拷鍐叉倯缂佺粯鐩畷銊╊敊閻撳寒娼氶梻浣告惈閻ジ宕伴弽褏鏆︽繛鍡樻尭鍥撮梺绯曞墲椤ㄥ繑瀵奸敓锟�?
		if (dealNpcServiceMapping(roleid, serviceid)) {
			Module.logger.error("NPC闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閳╁啯鐝曢梻浣藉Г閿氭い锔诲枤缁辨棃寮撮姀鈾�鎷绘繛杈剧秬濞咃綁濡存繝鍥ㄧ厱闁规儳顕粻鐐烘煙椤旂偓鐒挎い锕�缍婇弻鐔碱敍濮樿京鍔Δ鐘靛仦椤洨妲愰幒鎳崇喖鎮�涙ê顏堕梺鍓茬厛閸嬪棛绮绘ィ鍐╃厵閻庣數顭堥崜鍗灻归悡搴㈩棦闁哄瞼鍠愬蹇涘礈瑜忛弳鐘绘⒑濞茶骞楁い銊ワ躬閹繝顢曢敃锟介悙濠囨煏婵炑嶆嫹婵′勘鍔戝铏圭磼濡鏆楅梺鍝ュУ閻楃姴顕ｆ繝姘櫢闁绘灏欓ˇ銊╂⒑闂堟侗鐒鹃柛搴☆煼楠炲繘鎮滈挊澶夌炊闂侀潧顧�闂勫嫬鈻撴导瀛樷拺闁告挻褰冩禍婵囩箾閸欏鑰块柟顕嗙節瀵挳鎮㈤搹璇″晭闂備胶纭堕崜婵嬨�冩繝鍥ㄥ仒婵犲﹤鐗婇ˉ濠冦亜閹烘埈妲稿褎鎸抽弻锛勪沪闂堚晜瀚圭�规洖娲﹀▓鏇㈡煟鎼搭垳绉甸柛鎾寸懇瀹曞搫鐣濋崟顒傚弰婵炴潙鍚嬮悷褏绮旈锟介弻锛勪沪閸撗勫垱闂佺偨鍎荤粻鎾荤嵁鐎ｎ亖鏀介柛銉㈡櫃婢规洖鈹戦悩鎰佸晱闁革綆鍨冲濠冪節濮橆剙鐎悷婊呭鐢帡鎮″锟介弻鐔告綇妤ｅ啯顎嶉梺绋匡功閸忔﹢寮婚妶鍥ф瀳闁告鍋涢～鈺侇渻閵堝啫锟窖囧箯閻戣姤鈷掗柛灞剧懄缁佺増銇勯弴鐔哄⒌鐎规洑鍗冲浠嬵敇閻愮绱梻浣侯潒閸曞灚鐣奸悗瑙勬尫缁舵岸寮诲☉銏犵疀闁稿繐鎽滈崙褰掓倵鐟欏嫭绀�妞わ妇鏁婚獮鍐崉鐞涒剝顫嶉梺鍦劋閸ㄧ敻鍩涙径濠庢富闁靛牆楠告禍婊呯磼婢跺本鍤�妞ゎ偄绻愮叅妞ゅ繐瀚槐鍫曟⒑閸涘﹥澶勯柛鐘宠壘椤﹪濡搁埡鍌楁嫼闂佸憡绋戦敃銈嗘叏閸パ岀唵鐟滃瞼鍒掑▎鎾虫瀬闁规崘顕х壕褰掓煟閺傛寧鎲哥憸鎶婂嫮绠鹃柨婵嗘噺閹兼劙鏌ㄩ弴銊ら偗妤犵偛鍟埢搴ㄥ箼閸愨晜娅嗛梻浣告啞濞叉繈宕洪弽顐嫹濮橆剚璐￠柟鍙夋倐瀵噣宕煎┑鍫㈡瀮婵犵數鍋涘Λ娆戞暜閸ャ劎顩茬憸鐗堝笚閻撴瑩鏌ｉ幋鐏活亪鎮橀埡鍛厸閻忕偟鍠庡ú锕傚煕閹寸姷纾藉ù锝囨娓氭盯鏌ｉ幒鏂夸壕闁靛洤瀚板鎾幢濡や礁娅ф繛鎴炴尭缁夊綊寮婚垾鎰佸悑閹肩补锟藉磭顔戦梻浣虹帛閹歌煤濮楋拷婵＄敻宕熼姘辩杸闂佸憡鎸烽懗鎯版懌缂傚倸鍊风欢銈夊箯閻戣姤鐓ラ柣鏃傜帛椤ュ鎽堕弽顓熺厽婵鎷锋繛浣冲嫮顩插┑鍌氭啞閻撴洟鏌曟繛鍨拷妤呮儗濞嗘埊鎷峰▓鍨灈妞ゎ厾鍏樺顐﹀箻缂佹ê浜归梺鑲┾拡閸撴瑩鏁撻悾灞戒槐婵﹨娅ｉ敓钘夋贡婵敻濡撮崘顏嗙＜闁圭粯甯楅崑銉モ攽椤曞棙瀚归梻渚�娼ч悧鍡椢涘☉銏犲偍闁归棿鐒﹂埛鎴︽煕濞戞﹫姊楃紒璺哄船闇夋繝濠傚缁犳捇鏌嶇拠鑼ｇ紒缁樼箞瀹曞爼濡歌楠炴劙鏌ｆ惔锝嗩仧闁归鍏橀幃妤呮晲鎼粹�愁潾閻炴熬绠撳缁樻媴缁涘娈愰梺鍝ュУ閹瑰洤鐣疯ぐ鎺撳癄濠㈣泛鏈▓鎯ь渻閵堝棗濮х紒鐘冲灥閺侇噣姊绘担鐟邦嚋婵炴祴鏅犻獮蹇涙煥鐎ｎ剛顔曢梺鍛婁緱閸ｎ喖鈻撳鍕弿濠电姴鍊归幆鍫ュ极閸儲鐓曢柕澶嬪灥閹冲孩鎱ㄩ崼鏇熲拻濞达綀顫夐崑鐘绘煕閺傝法校缂佺粯绋掔换婵嬪磼濠婂嫭顔曞┑鐐存綑閸氬顭囧▎鎴犱笉婵炴垶鐟ｆ禍婊堟煛閸愭寧瀚归梺绋块閸熷潡鎮鹃悜钘壩ㄩ柍鍝勫�甸幏铏圭磽閸屾瑧鍔嶉拑閬嶆煟閹惧崬鍔﹂柡宀�鍠栭幊鐐哄Ψ瑜忛悡澶娾攽椤旂》姊楃紒顔界懃閻ｇ兘鎮㈢喊杈ㄦ櫖濠电偞鍨堕懝鎯ь嚕閹惰姤鈷掑ù锝堟鐢稒绻涢崣澶屽⒌鐎规洘鍔欏畷鐑筋敇閵婏箑顏跺┑顔筋焽閸嬫挾锟芥熬鎷�" + roleid + "]闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕婵犲倹鍋ラ柡灞诲姂瀵挳鎮欑拠褎瀚圭憸鐗堝笒绾惧潡鏌熺�电校闁哥姵鍔欓弻锝呂旈敓浠嬫偋閸℃瑧绠旈柟鐑樻⒒绾惧ジ鏌ㄩ悢璇残撶�垫澘瀚悾婵堬拷锝庡亜椤忓爼姊虹拫搴″暞閸熺偤鎮楀顒傜Ш婵﹨娅ｉ幑鍕Ω閵夛妇锟借櫣绱撴笟鍥ф灍闁荤啿鏅涢锝夘敃閿曪拷缁犺崵绱撴担濮戭亜鈻撻悢鍏尖拺闂傚牊渚楀Σ鍫曟煕鎼粹�宠埞鐞氭瑩鏌涢鐘插姕闁抽攱鍨块弻娑樷槈濡攱顎囧銈呯箰閻楀棗娲块梻浣哥秺濡法绮堟笟锟藉鍛婄瑹閿熶粙寮诲☉銏犵疀闂傚牊绋掗悘鍫濐渻閵堝骸浜滈柟铏耿瀵寮撮姀鐘诲敹濠电娀娼уú銈呪枍瑜斿铏圭矙閸栤�冲闂佺顑嗛惄顖炲灳閺冨牆绀冩い鏂挎瑜旈弻娑㈠焺閸愮偓鐤侀梺鎼炲�曢澶婎潖濞差亜鎹舵い鎾跺仜楠炲顪冮妶鍐ㄥ姕闁瑰憡鍎冲嵄闁圭増婢樼粻铏繆閵堝嫮鍔嶆繛鍛灲濮婃椽宕楅梻纾嬪焻闂佺姘︽禍顒�鈻庨姀銈嗗�烽柣鎴灻敓鐣屾暬閺屻劌鈹戦崱妤佹婵犲痉銈嗩仩缂佽鲸甯℃俊鎼佸Ψ椤旀儳鎮戞繝娈垮枛閿曘劌鈻嶉敐澶嬫櫢闁芥ê顦扮拹鈥斥攽椤旂偓鏆挊鐔奉熆閼搁潧濮堥柣鎾寸懇閺屾盯骞囬姘辨缂備胶濮垫繛濠囧蓟閵娾晜鍋勯悹鍥ㄧ暙閹剧粯鐓熼柡鍐╁灥婢у瓨顨ラ悙鑼闁轰焦鎹囬弫鎾绘晸閿燂拷" + serviceid + "].");
			return;
		}
		
		//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘劙婀侀梺绋跨箰閸氬绱為幋锔界厱闁靛鍎遍敓钘夋健瀵鏁愭径濠勵啋閻庤娲栧ú銈夊传濞差亝鈷戦柛婵嗗閸庢劙鏌ｅΔ渚囨畼闁瑰箍鍨归埥澶愬閻樻鍚呴梻浣虹帛閸旀瑥顭囪瀵娊鏁撻悩鏂ユ嫼闂佽崵鍠愬妯何ｆ繝姘厱闁靛骏绱曢崣锟介梺鎸庣箘閸嬫盯鍩為幋鐙呮嫹閿濆骸浜滃ù婊勵殜閺岀喖宕楅懖鈺傛闂佹悶鍔嶅Σ鎺楀Φ閹邦厽鍎熸い顐幘缁犳岸姊洪棃娑氬婵炲眰鍊曢弳鈺呮⒒娴ｄ警鐒炬い鎴濇閹嫰顢涘杈ㄦ濡炪倖鐗滈崕鎰板极瀹ュ棛绡�濠电姴鍊搁鈺呭箹閺夋埊宸ラ柍瑙勫灴閹晝绱掑Ο濠氭暘婵＄偑鍊栭崹鐢稿箠濮楋拷楠炲啫鈻庨幇顔剧槇闂佹悶鍎崝搴ㄥ储椤忓懐绡�闁汇垽娼ч敓绛嬪灦瀹曟﹢濡搁敂绛嬪敳闂備礁鎽滈崰鎾烩�﹂崼銉ョ厴闁硅揪闄勯崑鎰版煕椤垵浜濇慨锝呭濮婅櫣绮欏▎鎯у壋婵犵數鍎戦幏宄拔旈悩闈涗沪闁圭懓娲妴渚�寮崼婵嗚�垮┑鐐叉閸╁牆危閹间焦鈷掑ù锝堝Г绾爼鏌涢悩铏闁逛究鍔戞俊鍫曞炊閵娿儱绨ユ繝鐢靛仦閸垶宕归崷顓犱笉濠电姵纰嶉悡锝夌叓閸ラ鍒板ù婊庡灣閻ヮ亪顢橀妸锕�顏堕梻鍌氬�搁崐鐑芥嚄閸洖绠犻柟鎯у娑撳秶锟藉箍鍎遍ˇ顖炲垂閸岀偞鐓㈡俊顖欒濡叉椽鏌￠崱顓犵暤闁哄本绋戣灃闁告劑鍔嬪Ч妤呮⒑閸濆嫷鍎忛梺甯秮瀵鎮㈤悮瀛樺闁汇垺顔栭悞鐐亜鎼淬垺灏电紒杈ㄥ浮瀹曪繝鎮欓懠顒勭崜濠电儑绲藉ú銈夋晝椤忓牆绠栨繛鍡樻惄閺佸倿鏌涢弴鈥崇厫閻庢艾缍婇弻鈥愁吋鎼粹�崇缂備緤鎷峰鑸靛姈閻撴瑩寮堕崼婵嗏挃闁伙綀浜惀顏堟倷椤掞拷椤曟粎绱掔紒妯尖槈妞ゆ柨绻橀、娆撴嚒閵堝洦鏅ㄩ梻鍌欑閹测剝绌卞ú顏庣稏濠㈣泛鏈畷鍙夌箾閹存瑥鐏╂鐐灪娣囧﹪顢涘┑鎰闂傚倸顦粔鐟邦潖閾忓湱纾兼俊顖濐嚙闂夊秹姊洪懡銈呮珢缂佺姵鎸绘穱濠囨偨缁嬭法顦板銈嗙墬閼归箖宕妸鈺傗拺闂傚牊涓瑰☉銏犵闁冲搫鍋嗛崯鍥⒒閸屾艾锟芥悂宕愰幖浣诧拷锕傤敆閸曨偆顦梺鎸庢礀閸婂摜绮堥崼銉︾厽闁哄啫鍊哥敮鍫曟煢閸愵亜鏋涢柡宀嬬秮瀵噣宕掑Δ浣哥彵闂備浇妗ㄧ粈渚�鏁冮鍫濊摕闁挎洩鎷烽摶锝呫�掑鐓庣仭鐎涙繈姊绘担鍛婃儓妞ゆ垵妫濋幃鐑藉Ψ閳规拝鎷烽弮鍫濈妞ゆ柨妲堣閺屾盯骞囬埡浣割瀷婵炲濮存晶鐣屾閹惧瓨濯撮柛鎾村絻閸撻亶姊洪幖鐐插婵炲皷锟藉磭鏆︽繛宸簻椤懘鏌嶉埡浣告殭闁告柨鎳樺娲濞戣京鍔搁梺绋垮婵炲﹪骞冮崸妤佹櫢闁兼亽鍎扮换鍡涙煟閹板吀绨婚柨鐔诲Г閻楁粓寮锟介、鏃堝醇濠靛牜鍞靛┑锛勫仜椤戝懎霉妞嬪骸顥氬┑鍌氭啞閻撳繐鈹戦悩鑼闁告帊鍗抽弻娑㈠籍閹剧粯顎嶉梺閫涚┒閸斿秶鎹㈠┑瀣妞ゆ挾鍋熼濂告⒒娴ｇ儤鍤�闁搞垺鐓￠獮濠偽熼搹瑙勬闂侀潧顭俊鍥╁姬閿熶粙姊虹粙鎸庢拱缂佸甯￠幃楣冩偂鎼存ɑ鏂�闂佺粯蓱椤旀牠寮抽娑楃箚闁圭粯甯楅崵鍥╋拷瑙勬礃閸ㄥ灝鐣烽妸鈺佺骇闁瑰瓨绻勯敓绛嬪弮濮婃椽鎳￠妶鍛�鹃柣搴㈣壘閻楁捇寮幇顓炵窞濠电姴瀚弶鎼佹⒒娴ｅ憡鎯堟い锔诲灦閹ê鈹戦崱娆愭闂佺硶鍓濈粙鎺楀煕閹寸姷纾藉ù锝咁潠椤忓懏鍙忛柨鐔剁矙濮婃椽宕崟顒�娅ょ紓渚囧枟閹瑰洭鐛崘銊庣喖鎳￠妶鍥ㄥ殞闂備浇娉曢崰鏇炍涢崟顖ょ稏闊洦绋掗幆鐐烘偡濞嗗繐顏╅柛妯虹秺濮婃椽宕ㄦ繝浣虹箒闂佸摜濮甸悧鏇㈠煡婢跺寒妲剧紓浣介哺閹稿骞忛崨鏉戜紶闁告洘鍩婄紞渚�寮诲☉銏犖╅柕澹憛銊╂⒑鏉炴壆鍔嶉柟鐟版喘楠炲﹪鎮欓崫鍕庛劑鏌曟繛鍨姶婵☆偆鍠愭穱濠囨倷椤忓嫸鎷疯缁骞樼�靛壊娲搁梺鍓插亝濞叉牠寮告笟锟介弻鐔煎礈瑜忕敮娑㈡倵閻㈤潧孝妞ゎ叀娉曢幑鍕惞閸︻厺绱橀梻浣告惈濡瑩鎯勯姘兼綎闁惧繐婀遍惌娆撴煕瑜庨〃鍛嚕閻楀牏绠鹃悗娑欘焽閻﹪鏌ｉ弽褋鍋㈤柟顔诲嵆椤㈡瑩鎮惧畝锟介惁鍫ユ⒑閸涘﹤濮�闁哄懏鐩畷婵嬪川椤撗勫瘜闂侀潧鐗嗘鎼佺嵁濡ゅ懏鍋ㄦい鏍ㄧ矊娴犙呯磼椤旂晫鎳嗙紒鐘崇☉閳藉鈻庣仦鎯ь伖闂備浇宕垫慨鍨娴犲绀夐悘鐐缎掗弸宥夋煙閹殿喖顣奸柣鎾寸懇閺屾盯骞嬪▎蹇ユ嫹閺嶎偓鎷峰鐐
		if (CircleTaskManager.getInstance().isSendMailService(serviceid)){
			Module.logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幗闂侀潧绻堥崺鍕倿閸撗呯＜闁归偊鍙庡▓婊堟煛瀹�锟介崰鏍嵁瀹ュ鏁婄痪鎷岄哺濮ｅ姊绘担渚劸妞ゆ垶鍨归幑銏犫攽鐎ｎ亣鎽曢梺闈浥堥弲娑氱尵瀹ュ鐓曢悘鐐插⒔閻擃垰顭跨憴鍕婵﹥妞藉畷顐﹀礋椤掑锛佺紓鍌欑贰閸犳骞戦崶褜鍤曞┑鐘崇閺呮彃顭跨捄鐚存敾妞ゃ儲绻堝娲捶椤撗呭姼闁诲孩绋堥弲鐘茬暦娴兼潙绠涢柣妤�鐗冮幏铏圭磽閸屾瑧鍔嶆い顓炴川缁顫濋鐘殿啎婵犮垼娉涢鍥洪幘顔界厱闁冲搫鍟禒杈殽閻愬樊鍎旈柡浣稿暣閺佹捇鎮剧仦绛嬫婵犻潧鍊搁幉锟犳偂閵夆晜鐓涢柛鎰╁妽婢跺嫭銇勯妷銉Ч闁靛洤瀚粻娑㈠Ψ閿曪拷椤忥拷" + roleid + "]闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕婵犲倹鍋ラ柡灞诲姂瀵挳鎮欑拠褎瀚圭憸鐗堝笒绾惧潡鏌熺�电校闁哥姵鍔欓弻锝呂旈敓浠嬫偋閸℃瑧绠旈柟鐑樻⒒绾惧ジ鏌ㄩ悢璇残撶�垫澘瀚悾婵堬拷锝庡亜椤忓爼姊虹拫搴″暞閸熺偤鎮楀顒傜Ш婵﹨娅ｉ幑鍕Ω閵夛妇锟借櫣绱撴笟鍥ф灍闁荤啿鏅涢锝夘敃閿曪拷缁犺崵绱撴担濮戭亜鈻撻悢鍏尖拺闂傚牊渚楀Σ鍫曟煕鎼粹�宠埞鐞氭瑩鏌涢鐘插姕闁抽攱鍨块弻娑樷槈濡攱顎囧銈呯箰閻楀棗娲块梻浣哥秺濡法绮堟笟锟藉鍛婄瑹閿熶粙寮诲☉銏犵疀闂傚牊绋掗悘鍫濐渻閵堝骸浜滈柟铏耿瀵寮撮姀鐘诲敹濠电娀娼уú銈呪枍瑜斿铏圭矙閸栤�冲闂佺顑嗛惄顖炲灳閺冨牆绀冩い鏂挎瑜旈弻娑㈠焺閸愮偓鐤侀梺鎼炲�曢澶婎潖濞差亜鎹舵い鎾跺仜楠炲顪冮妶鍐ㄥ姕闁瑰憡鍎冲嵄闁圭増婢樼粻铏繆閵堝嫮鍔嶆繛鍛灲濮婃椽宕楅梻纾嬪焻闂佺姘︽禍顒�鈻庨姀銈嗗�烽柣鎴灻敓鐣屾暬閺屻劌鈹戦崱妤佹婵犲痉銈嗩仩缂佽鲸甯℃俊鎼佸Ψ椤旀儳鎮戞繝娈垮枛閿曘劌鈻嶉敐澶嬫櫢闁芥ê顦扮拹鈥斥攽椤旂偓鏆挊鐔奉熆閼搁潧濮堥柣鎾寸懇閺屾盯骞囬姘辨缂備胶濮垫繛濠囧蓟閵娾晜鍋勯悹鍥ㄧ暙閹剧粯鐓熼柡鍐╁灥婢у瓨顨ラ悙鑼闁轰焦鎹囬弫鎾绘晸閿燂拷" + serviceid + "]闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥╁彄闁搞儯鍔嶉悡銉︺亜韫囨碍纭鹃柍瑙勫灴椤㈡瑩鎯岄顐＄盎闁伙絿鍏橀、妤呭礋椤愩垹浜堕梺璇叉捣閺佽顭囨繝姘濡炲瀛╅崰鍡涙煕閺囥劌澧版い锔哄劤缁辨捇宕掑姣欍垽鏌ㄩ弴銊ょ盎妞ゆ洩缍侀、鏇㈡晝閿熺晫绮婚懡銈囩＝濞达綀鍋傞幋婵冩瀺闁靛繈鍊栭埛鎴︽偣閹帒濡兼繛鍛姍閺岀喖宕欓妶鍡楊伓?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝呂熷▎鎯ф缂備胶濮撮悘姘跺Φ閸曨喚鐤�闁圭偓鎯屽Λ銈囩磽娓氬﹥瀚规繝鐢靛Т濞诧箓鎮￠妷鈺傜厽闁哄啫娴傞崵娆戞偖濮樿京纾藉ù锝堟鐢盯鏌ｉ埡濠傜仸闁绘侗鍠栭～婊堟晸娴犲绠圭憸鐗堝俯閺佸啴鏌曟竟顖氭湰閺併倝姊婚崒姘拷鐑芥嚄閸洖绠犻柟鎯у娑撳秶锟藉箍鍎遍ˇ顖炲垂閸岀偞鐓㈡俊顖欒濡叉椽鏌￠崱顓犵暤闁哄本绋戣灃闁告劑鍔嬪Ч妤呮⒑閸濆嫷鍎忛梺甯秮瀵鎮㈤悮瀛樺闁汇垺顔栭悞鐐亜鎼淬垺灏电紒杈ㄥ浮瀹曪繝鎮欓懠顒勭崜濠电儑绲藉ú銈夋晝椤忓牆绠栨繛鍡樻惄閺佸倿鏌涢弴鈥崇厫閻庢艾缍婇弻鈥愁吋鎼粹�崇缂備緤鎷峰鑸靛姈閻撴瑩寮堕崼婵嗏挃闁伙綀浜惀顏堟倷椤掞拷椤曟粎绱掔紒妯尖槈妞ゆ柨绻橀、娆撴嚒閵堝洦鏅ㄩ梻鍌欑閹测剝绌卞ú顏庣稏濠㈣泛鏈畷鍙夌箾閹存瑥鐏╂鐐灪娣囧﹪顢涘┑鎰闂傚倸顦粔鐟邦潖閾忓湱纾兼俊顖濐嚙闂夊秹姊洪懡銈呮珢缂佺姵鎸绘穱濠囨偨缁嬭法顦板銈嗙墬閼归箖宕妸鈺傗拺闂傚牊涓瑰☉銏犵闁冲搫鍋嗛崯鍥⒒閸屾艾锟芥悂宕愰幖浣诧拷锕傤敆閸曨偆顦梺鎸庢礀閸婂摜绮堥崼銉︾厽闁哄啫鍊哥敮鍫曟煢閸愵亜鏋涢柡宀嬬秮瀵噣宕掑Δ浣哥彵闂備浇妗ㄧ粈渚�鏁冮鍫濊摕闁挎洩鎷烽摶锝呫�掑鐓庣仭鐎涙繈姊绘担鍛婃儓妞ゆ垵妫濋幃鐑藉Ψ閳规拝鎷烽弮鍫濈妞ゆ柨妲堣閺屾盯骞囬埡浣割瀷婵炲濮存晶鐣屾閹惧瓨濯撮柛鎾村絻閸撻亶姊洪幖鐐插婵炲皷锟藉磭鏆︽繛宸簻椤懘鏌嶉埡浣告殭闁告柨鎳樺娲濞戣京鍔搁梺绋垮婵炲﹪骞冮崸妤佹櫢闁兼亽鍎扮换鍡涙煟閹板吀绨婚柨鐔诲Г閻楁粓寮锟介、鏃堝醇濠靛牜鍞靛┑锛勫仜椤戝懎霉妞嬪骸顥氬┑鍌氭啞閻撳繐鈹戦悩鑼闁告帊鍗抽弻娑㈠籍閹剧粯顎嶉梺閫涚┒閸斿秶鎹㈠┑瀣妞ゆ挾鍋熼濂告⒒娴ｇ儤鍤�闁搞垺鐓￠獮濠偽熼搹瑙勬闂侀潧顭俊鍥╁姬閿熶粙姊虹粙鎸庢拱缂佸甯￠幃鐐附閸涘ň鎷婚梺绋挎湰閻熝囁囬敃鍌涚厵缁炬澘宕禍浼存煙椤栨碍婀扮�垫澘瀚禒锕傚箚瑜嶇花銉︾節閻㈤潧鈻堟繛浣冲吘娑樷槈閵忕姵杈堥梺鎸庢⒒閺咁偆寮ч敓鑺ョ節閻㈤潧孝闁稿﹥鎮傚铏節閸ャ劎鍘搁梺璺ㄥ枙婵倗绮嬮幒鏃撴嫹閿濆骸浜為柛姗�浜跺铏癸拷鍦У椤ュ淇婇锝庢當妞ゆ洩缍佹俊鎼佸煛閸屾粌寮抽梻浣虹帛濮婅崵鍒掗鐐堝寰勭�ｎ剛顔曠紒缁㈠弮椤ユ挾寮ч敓浠嬫倵濞堝灝鏋︽い鏇嗗洤鐓″鑸靛姇椤懘鏌ｅΟ鑽ゅⅵ闁告柨绉规俊鐢稿礋椤栨氨鐫勯梺绋挎湰閼圭偓绂掑Ο渚富闁靛牆楠告禍鎰版煛閸涱喚绠樻俊鍙夊姍楠炴锟介潧鎽滈幊婵囩節閻㈤潧孝闁哥噥鍋婇、鏃堝醇閺囩啿鎷绘繛杈剧秬婵倗娑甸崼鏇熺厱闁挎繂绻掗悾鍨殽閻愯尙绠婚柡浣规崌閺佹捇鏁撻敓锟�?.");
			int npcid = NpcServiceManager.getNpcIDByKey(npckey);
			new PSendMail2Dst(roleid, npcid, serviceid).submit();
			return;
		}
		
		if (serviceid == NpcServices.ENTER_CLAN_FIGHT)
		{
			new fire.pb.clan.fight.PEnterClanFightBattleField(roleid).submit();
			return;
		}
		
		if (!SceneNpcManager.checkDistance(npckey, roleid)) {
			MessageMgr.sendMsgNotify(roleid, 142369, null);
			return;
		}
		
		final SNpcShare share = NpcManager.getInstance().getNpcShareByID(npcId);
		if(share == null)
		{
			Module.logger.error("SNpcShare == null,npcId = "+ npcId + ",serviceid = "+serviceid+",roleid = " + roleid);
			return;
		}
		
		// 婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄婵犲灚鍔栫紞妤呮⒑鐠恒劌鏋欐俊顐㈠瀹曟劙宕烽鐘电効闂佸湱鍎ゅΛ鎴﹀箯閻戣姤鏅查幖绮癸拷鑼嚬婵犵數鍋涢幊宀勫垂閽樺娼栨繛宸簼閸ゅ秹鏌曟径濠傛灓濞存粠浜ｅΛ鐔奉渻閵堝棛澧遍柛瀣☉鏁堥柡灞诲劜閳锋垶銇勯幒鐐村缂備礁顦遍弫濠氬箖閿熺姴唯闁冲搫鍊婚崢浠嬫⒑閸濆嫬鏆欓柛濠呭吹閺侇喖鈽夊▎宥勭盎闂侀潧顦崕鍝勎ｉ搹鍦＜閺夊牄鍔嶇亸顓熴亜閹剧偨鍋㈢�规洦浜畷姗�顢橀悙鏉戝壍婵犲痉鏉匡拷妤佹叏閻戣棄纾绘繛鎴欏灩閻ゎ喗銇勯幇鈺佸姢濞存粈绮欏娲嚒閵堝憛銏＄箾濞村娅囧ù婊咁焾閳诲酣骞嬮悩闈涚闂備胶绮崝妤呭磿閵堝鐓曢柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘嚚鐟邦煥閿熶粙宕￠幎钘夎摕婵炴垯鍨圭粻濠氭倵闂堟稒鍟為柛锛卞喚娓婚柕鍫濇缁岃法绱掗煫顓犵煓闁诡噣绠栭弫鎾绘偐瀹曞洤濮洪梻浣瑰濡礁螞閸曨垱鍎婃繝濠傜墛閳锋帒銆掑鐐濠电偘鍖犻崶銊ヤ罕闂佺硶鍓濋妵鍌氣槈濡攱顫嶅┑鐐叉閸旀牠鎮靛畡閭︽富闁靛牆妫楃粭鎺楁倵濮樼厧寮柟顕嗙節閹晠宕归銏＄�鹃梻浣虹帛椤ㄥ懘鎮ч崱娆戠當鐟滄棃寮婚敐澶嬫櫜闁糕剝菧娴犮垽姊洪崷顓х劸闁挎洦浜獮鍐閵堝棗浠忛柣搴㈢♁閿氭い蹇撶埣濮婅櫣鎷惔鈥虫殲闁哥喓鍋ら幃妤�顫濋鍌溞ㄥ┑顔硷攻濡炶棄鐣烽妸锔剧瘈闁告劦鐓堝Σ閬嶆⒒娴ｅ憡鍟為柟绋款煼閹嫰顢涘杈ㄦ闂侀潧绻堥崐鏇犵不閻熸噴褰掓晲閸涱厼杈呴梺褰掓敱濡炶棄顫忓ú顏勫窛濠电姴鍟棄宥夋偡濠婂嫭绶查柛鐕佸灣缁顓奸崱娆樻祫闁诲函缍嗛崑鍡涘储闁秵鐓熼幖鎼灣缁夐潧霉濠婂嫮鐭掓い銏℃椤㈡棃宕奸悢鍝勫箰闂備礁鎲＄粙鎺戭熆濮楋拷閹繝骞囬悧鍫濓拷闈浢归敐鍛殭濞存粌缍婇弻銊╂偄鐠囨畫鎾剁磼鐎ｎ偄娴柡浣割儐缁绘稓锟界數顭堝瓭闂佸湱鈷堥崑濠囧灳閺冨牆绀冩い鏂挎瑜旈弻娑㈠焺閸愵亝鍣у銈庡�ら崨顖滐紲闂佺粯鍔﹂崜姘辨閼碱剛纾煎璺猴功缁夋椽鏌ｅ☉鍗炴珝鐎规洖宕埥澶婎潨閿熶粙宕崼鏇熲拺闂傚牊渚楀褍鈹戦垾铏枠鐎规洏鍨介獮姗�宕滄担鐚寸闯闂備胶顭堥張顒勬偡瑜斿畷婵嗩吋婢跺鐝旈柡澶婄墑閸斿﹥绂嶅鍫熺厪濠㈣泛鐗嗛崝銈咁熆瑜嬮崹浠嬪蓟閵娾晜鍋勯悹鍥ㄧ暙閹炬番浜滈柡鍐挎嫹闁绘濮撮悾鐑藉级鐠囩偓妫冨畷銊╊敇閻欙拷閸炲爼姊绘担绛嬫綈闁稿海鍘ц灋闁告洦鍘炬稉宥夋煛瀹ュ啫濡跨紒鐘荤畺閺屾盯鍩勯崗鈺傚灩娴滄悂顢橀姀锛勫幗濡炪倖鎸鹃崳銉モ枔閺冿拷閵囧嫰顢橀埄鍐�婇梺鍦嚀鐎氼厾绮悢纰辨晬婵﹩鍓欓ˉ搴♀攽閿涘嫬浜奸柛濠冪墪椤繗銇愰幒鎴犲摋缂備降鍔岄幗鍫曟⒒閸屾艾锟芥悂宕愰幖浣哥９闁归棿绀佺壕褰掓煙闂傚顦︾痪鎯х秺閺岋綁骞嬮敐鍛呮捇鏌涙繝鍌涘仴闁哄被鍔戝鎾倷鐠囇勫鐟滅増甯掔壕鍧楁煙鐎电校闁哥姵鍔欓弻锝呂旈敓浠嬫偋閸℃瑧绠旈柟鐑樻⒒绾惧ジ鏌ㄩ悢璇残撶�垫澘瀚悾婵堬拷锝庡亜椤忓爼姊虹拫搴″暞閸熺偤鎮楀顒傜Ш婵﹨娅ｉ幑鍕Ω閵夛妇锟借櫣绱撴笟鍥ф灍闁荤啿鏅涢锝夘敃閿曪拷缁犺崵绱撴担濮戭亜鈻撻悢鍏尖拺闂傚牊渚楀Σ鍫曟煕鎼粹�宠埞鐞氭瑩鏌涢鐘插姕闁抽攱鍨块弻娑樷槈濡攱顎囧銈呯箰閻楀棗娲块梻浣哥秺濡法绮堟笟锟藉鍛婄瑹閿熶粙寮诲☉銏犵疀闂傚牊绋掗悘鍫濐渻閵堝骸浜滈柟铏耿瀵寮撮姀鐘诲敹濠电娀娼уú銈呪枍瑜斿铏圭矙閸栤�冲闂佺顑嗛惄顖炲灳閺冨牆绀冩い鏂挎瑜旈弻娑㈠焺閸愮偓鐤侀梺鎼炲�曢澶婎潖濞差亜鎹舵い鎾跺仜楠炲顪冮妶鍐ㄥ姕闁瑰憡鍎冲嵄闁圭増婢樼粻铏繆閵堝嫮鍔嶆繛鍛灲濮婃椽宕楅梻纾嬪焻闂佺姘︽禍顒�鈻庨姀銈嗗�烽柣鎴烆焽閸樼敻姊绘笟鍥у伎缂佺姵鍨块悰顔碱潨閿熶粙寮诲☉妯滅喓绱掑Ο铏癸紦婵犳鍠栭敃銉ヮ渻娴犲绠犻柣鎰惈鍞梺鍛婂姇瑜扮偤鏌囬鐐村癄婵犻潧鏋硅ぐ鎺戠闁稿繗鍋愮粙鍥⒒閸屾艾浜為柛銊ョ埣瀵鏁愭径瀣珳闂佸憡渚楅崹铏閸モ晝纾奸柣鎰靛墮閸斻倝鏌曢崼鐔稿�愮�殿喖顭锋俊鎼佸煛閸屾矮绨婚梺鑽ゅТ濞诧箓鎮鹃锕�绠婚悹浣筋潐鐎氬綊鏌涢…鎴濅簼缂佽埖鐓￠幃妤�顫濋銏犵ギ闂佺粯渚楅崳锝呯暦閸洦鏁嗗璺侯儐濞呭秹姊绘担铏瑰笡閽冭京鎲搁弶鍨殶缂侇喖顭锋俊鐑藉煛閸屾瀚介梻浣侯焾閺堫剟鎮疯钘濋柨鏃傛櫕缁★拷闂佽法鍠嶇划娆撳蓟閸℃鍚嬮柛娑卞灠楠炲牓姊绘担绋款棌闁稿绶氬畷鏇㈡焼瀹ュ懐锛滈梺闈浥堥弲婊堟偂閺囩喓绡�闂傚牊绋掗ˉ婊堟煃缂佹ɑ绀堥柟鍙夋倐閹囧醇濠靛牏鎳栭梻浣侯焾閿曘倝鈥﹂悜钘夎摕闁靛牆顦粻鎺楁煙閻戞ê鐏ュ┑顔哄灲濮婃椽宕ㄦ繝鍕櫑闁诲孩纰嶅姗�锝炶箛鎾佹椽顢旈崟顏嗙倞闂備礁鎲″ú锕傚磻閸涱厸鏋旈柡灞诲劜閳锋垿鎮峰▎蹇擃伀闁硅棄鍟伴敓鍊燁潐濞叉粓寮繝姘瀬闁瑰墽绮崵宥夋煏婢诡垰鍟▓褰掓⒒娴ｇ儤鍤�闁搞倖鐗犻獮蹇涙晸閿燂拷
		if (share.npctype == 16) {
			if (serviceid == NpcServices.WATCH_INST_NPC_BATTLE) {
				new fire.pb.instancezone.PWatchNpcBattle(roleid, npckey).submit();
				return;
			}
			
			if (serviceid == NpcServices.END_INST_NPC_BATTLE) {
				new fire.pb.instancezone.PEndNpcBattle(roleid, npckey).submit();
				return;
			}
			
			fire.pb.instancezone.Module.doNpcService(roleid, npckey, share, serviceid);
			return;
		}
		
		if(!fire.pb.npc.NpcServiceManager.getInstance().hasServiceByNpcKey(roleid, npckey, serviceid))
			return;

		fire.pb.map.Npc gsnpc = fire.pb.map.SceneNpcManager.selectNpcByKey(npckey);
		if (gsnpc == null)
			return;
		
		if (serviceid == NpcServices.SEND_MAIL
				|| serviceid == NpcServices.CIRCTASK_SCHOOL1 || serviceid == NpcServices.CIRCTASK_SCHOOL2 
				|| serviceid == NpcServices.CIRCTASK_SCHOOL3 || serviceid == NpcServices.CIRCTASK_SCHOOL4
				 || serviceid == NpcServices.CIRCTASK_SCHOOL5 || serviceid == NpcServices.CIRCTASK_SCHOOL6
				 || serviceid == NpcServices.CIRCTASK_SCHOOL_SUBMIT1
				 || serviceid == NpcServices.CIRCTASK_SCHOOL_SUBMIT2
				 || serviceid == NpcServices.CIRCTASK_SCHOOL_SUBMIT3
				 || serviceid == NpcServices.CIRCTASK_SCHOOL_SUBMIT4
				 || serviceid == NpcServices.CIRCTASK_SCHOOL_SUBMIT5
				 || serviceid == NpcServices.CIRCTASK_SCHOOL_SUBMIT6
				 || serviceid == NpcServices.CATCH_IT
				 || serviceid == NpcServices.CATCH_IT_SUBMIT
				 || serviceid == NpcServices.CATCH_IT_Battle
				 || serviceid == NpcServices.CATCH_IT_QUERY) {
			CircleTaskManager.getInstance().process(roleid, npckey, serviceid);
			return;
		}
		
		if (serviceid == NpcServices.TIMER_NPC_Battle) {
			new fire.pb.activity.timernpc.PTimerNpcFightProc(roleid, npcId, npckey).submit();
			return;
		}
		
		if (serviceid == NpcServices.EVENT_NPC_Battle) {
			new fire.pb.mission.treasuremap.PEventNpcFightProc(roleid, npcId, npckey).submit();
			return;
		}
		
		if (serviceid == NpcServices.WATCH_NPC_BATTLE) {
			new fire.pb.activity.timernpc.PWatchNpcBattle(roleid, npcId, npckey).submit();
			return;
		}
		
		if (serviceid == NpcServices.WATCH_EVENTNPC_BATTLE) {
			new fire.pb.mission.treasuremap.PWatchNpcBattle(roleid, npcId, npckey).submit();
			return;
		}
		
		//TODO 婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊鐒﹂崕鎾绘⒑閹肩偛濡奸柛濠傛健瀵鈽夐姀鈺傛櫇闂佹寧绻傚Λ娑⑺囬妷褏纾藉ù锝呮惈灏忛梺鍛婎殕婵炲﹤顕ｆ繝姘亜闁稿繐鐨烽幏濠氭煟鎼达絾鏆╂い顓炵墛娣囧﹥绂掔�ｎ偀鎷虹紓浣割儐椤戞瑩宕曞澶嬬厱濠电姴鍟扮粻鐐碉拷娈垮枛椤嘲顕ｉ幘顔藉亜闁惧繗顕栭崯搴ㄦ⒒娴ｇ顥忛柣鎾崇墦瀹曚即寮介妸锕�寮块柣鐘荤細閵嗭拷闁猴拷娴犲鐓熼柟閭﹀墰閹界娀鎮樿箛锝呭箺闁靛洤瀚伴、姗�鎮╅幓鎺戠闁诲孩顔栭崰娑㈩敋瑜旈崺銉﹀緞婵犲孩鍍靛銈嗗姧缁茶姤鍒婇幍顔剧＝闁稿本鑹鹃敓鐣屽厴濮婅棄顓兼径濠傜�梺鑽ゅ枑婢瑰寮搁弮鍌涘枑闁哄倹顑欏鏍ㄧ箾瀹割喕绨兼い銉ョ墦閺屽秵娼幏灞藉帯濠德ゎ嚋缂嶄礁顫忓ú顏勫窛濠电姴瀚崳褏绱撴担铏瑰笡闁挎洏鍨介幃浼搭敊鐠恒劎鏉稿┑鐐村灦閻熴儵鏁撻挊澶樼吋闁哄被鍊濋獮渚�骞掗幋婵嗩潥婵犵數鍋涢幊蹇曞垝閹捐钃熼柣鏂垮悑閸ゅ啴鏌嶉崫鍕�氬鑸靛姈閻撱儵鏌ｉ弮鍌滃笡妞ゃ儱顦遍惀顏嗙磼閵忕姴绫嶅銈冨灪閻熲晠鐛幒妤�绠婚柛鎾茶兌濡插洨绱撴担绋库挃濠⒀勵殜閺佸啴顢曢敃锟界粻顖炴煟閹达絾顥夌紒锟介崘顔界厾缁炬澘宕晶鎾煟濞戞瑦宕屾慨濠勭帛閹峰懐绮电�ｎ亝鐣伴梻浣告憸婵敻鎮ч悩鑼殾闁圭増婢橀崹鍌涖亜閺囩偞鍣规繛鍫涘妽缁绘繈鎮介棃娴讹絿鐥弶璺ㄐх�规洘鍨垮畷鐔碱敍濞戞艾骞楁繝娈垮枟閿曗晠宕滃☉銏犵闁绘绮崐鍨叏濡澧繛鍏煎姉缁辨帞绱掑Ο鍏煎垱濡ょ姷鍋涢澶愬箖濞嗘挸鍨傛い鎰╁灪閻濇繈姊婚崒娆愮グ婵炲娲熷畷浼村箻鐠囪尙鏌у銈嗗姧缁犳垹澹曟繝姘厪闁割偅绻嶅Σ铏癸拷瑙勬尫缁舵岸骞冨Δ鍛櫜閹肩补鍓濋悘宥夋⒑閸濆嫭鍣虹紒璇茬墦瀵濡搁埡鍌氫簻闂佸憡鎸烽懗鍫曟偂閹剧粯鍊甸悷娆忓缁�鍐煟閻斿弶娅婃鐐插暣閸╋繝宕橀鍡床婵犵妲呴崹鎶藉储瑜旈悰顔嘉旈崨顔规嫽婵炶揪绲介幉锟犲箚閸儲鐓曞┑鐘插暞閸婃劙鏌熼鐭亪鍩為幋鐙呮嫹閿濆簼绨介柣锝嗘そ濮婅櫣娑甸崨顔兼锭闂傚倸瀚�氫即骞冮敓鐘插嵆闁靛繆锟界鎷烽悽鍛婄叆婵犻潧妫涙晶鏇㈡煟閹炬潙濮嶉柟顔筋殔椤繈鎮欓锟介锟�?,闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＝濞达絽鎼暩婵犵數鍎戦幏宄拔旈悩闈涗沪闁绘顨呴…鍥疀濞戞顦悷婊冪箺閹筋偊姊虹拠鍙夊攭妞ゎ偄顦叅婵鎷烽柟顕嗙節閺佹捇鎮╅懠鑸垫啺闂備胶绮鑽や焊閵娾晛绠�瑰嫭澹嬪Σ鍫熺箾閸℃﹩鐒介柛鏃堫棑缁辨挻鎷呴崫鍕戠偤鏌涙惔銈呯毢闁瑰箍鍨归埥澶愬閻樻鍟嬮梻浣哥秺椤ｏ箓鎳楅崼鏇炶Е閻庯綆鍠楅埛鎴︽煕濠靛棗顏繝锟介幍顔剧＜閻庯綆鍋勯悘鎾煙椤旇棄鍔ら柍瑙勫灩閿熸枻缍嗛崑鍛枍閵忥紕绠鹃悗鐢殿焾瀛濆銈嗗灥閹虫劖绔熼弴鐘电＜婵☆垵鍋愰鏇㈡⒑閻熼偊鍤熼柛瀣仱閹啴骞嬮敂鐣屽幗濡炪倖鎸鹃崑鐐核夐姀銈嗙厸閻忕偛澧藉ú瀵革拷娈垮枟閹歌櫕淇婇幖浣肝ㄧ憸宀勬偨婵犳碍鈷掑ù锝堟鐢盯鏌熷宀婂殭閻撱倝鏌ｉ弮鍌氬付闁藉啰鍠撻敓钘夌畭閸庨亶藝椤栫偞鍋傛繛鎴炩棨瑜版帗鏅查柛娑卞枛閺嗗牓姊虹拠鑼闁瑰憡鎮傞崺鐐哄箣閿旇棄锟界兘鏌ょ喊鍗炲妞わ絽鐖煎娲箹閻愭彃顬嬮梺绋跨昂閸婃鍒掑顓熺秶闁靛ě鍛闂備焦鎮堕崕顖炲礉鐏炶В鏋旈柕鍫濇媼濞撳鏌曢崼婵囶棞缂佹鍊块弻锝夊箳閻愮數鏆犻悶姘懇閺屾盯顢曢悩鎻掑闂佹娊鏀遍崹鍧楀蓟濞戞ǚ鏀介柛鈩冾殢娴犳儳鈹戦悪鍛婵炲鍘ч悺銊╂偂閻斿吋鐓冮柛婵嗗瀹搞儵鏌ｈ箛銉х暤闁哄矉绲介埥澶愬础閻愬褰庢俊銈囧Х閸嬬偟鏁幒鏇犱簷闂備浇娉曢崰鏇炍涢崟顔句罕婵犳鍠楅〃鎰板箯闁垮娈介柣鎰嚟婢ч亶鏌ㄩ悢璇残撶紒瀣笩閹筋偊鏌ｈ箛鎾剁闁告濞婂濠氭晲閸℃ê鍔呴梺鎸庣箓閹峰寮抽鐘电＝濞达綀娅ｇ敮娑氱磼鐠囪尙澧︽鐐插暞缁傛帞锟斤綆鍋掑Λ鍐ㄢ攽閻愭潙鐏︽い銊ョ墦楠炴垿寮撮姀鈾�鎷绘繛杈剧到閹芥粎绮斿ú顏呯厸闁跨喍绮欓弻鍡楊吋閸涱厾锟筋參姊虹粔鍡楀濞堟锟借鎸风欢姘舵偂椤愶箑鐐婇柕濞э拷濡俱劑姊洪崫鍕櫤闁诡喖鍊垮濠氬Ω閳哄倸浜為梺绋挎湰缁嬫垿顢旈敓锟�
		if (serviceid == 999999) {
			new fire.pb.activity.timernpc.PFightProc(roleid, npcId, npckey).submit();
			return;
		}
		
		if (serviceid == NpcServices.FORTUNE_WHEEL) {
			PReqFortuneWheel pwheel = new PReqFortuneWheel(roleid, npckey, npcId, true, NpcServices.FORTUNE_WHEEL);
			pwheel.submit();
			return;
		}
		
		if (serviceid == NpcServices.LEADER_SEE_CAMPAIGN_LIST) {// 婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鎯у⒔缁垳鎹㈠☉銏犵婵炲棗绻掓禒楣冩⒑缁嬫鍎嶉柛濠冪箞瀵寮撮悢铏诡啎閻熸粌绉归獮濠冩償閵娿儲杈堝┑掳鍊曢幊蹇涘煕閹寸姷纾奸悗锝庡幗绾爼鏌ｈ箛娑楁喚闁哄本绋撻敓鏂ょ秵閸嬪棝鍩ユ径瀣ㄤ簻闁哄倽娉曠粻浼存煃鐟欏嫬鐏寸�规洖鐖兼俊鐑藉Χ閸モ晜鏅ㄩ梻鍌氬�风粈渚�骞栭锕�纾归柟闂寸劍閸婅埖绻濋棃娑卞剰闁绘挻娲熼弻锟犲礃閵娧冾杸闂佺粯鎸婚惄顖炲蓟濞戙垹鐓㈤柨鐔剁矙瀵彃鈽夐姀鈥筹拷鍫曟煥濠靛棙宸濈痪鎯с偢瀵爼宕煎☉妯侯瀴閻庤娲栭惉濂告晸閸婄噥娼愭繛鍙夘焽閺侇噣骞掑Δ锟介悡婵嬪箹濞ｎ剙濡肩紒鐙呯稻缁绘繈妫冨☉娆欑礊闂佽瀛╁娆撳煘閹达附鍋愰柟棰佺閺呴亶姊洪崫銉バｉ柣妤冨█瀵偊宕橀鍢壯冾熆鐠虹儤锛旈柟椋庡厴閺佸啴鏁撴禒瀣仼闁跨喓濮寸粻銉︺亜閺冨洤袚妞ゆ梹娲熷缁樻媴娓氼垱鏁梺瑙勬た娴滎亜顫忔禒瀣妞ゆ牗姘ㄩ弻褔姊鸿ぐ鎺擄紵闁绘帪绠撻幃锟犲Ψ閳哄倻鍘介梺鍝勬川閸嬫盯鏁撻挊澶嬭础闁跨喕濮ら悢顒勫箯閿燂拷?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻愰湁闁稿繐鍚嬬紞鎴︽煕閵娿儱锟藉潡寮婚敐澶婄鐎规洖娲ら崫娲⒑閸濆嫷鍎愰柣妤侇殘閹广垹鈽夐姀鐘殿吅濠电偛妫楃换鎺撶妤ｅ啯鈷戦柛婵嗗閸ｈ櫣绱掔拠鑼ⅵ鐎殿喖顭峰鎾偄妞嬪海鐛梻浣虹《閸撴繆鎽梺缁樼箖濮婅崵妲愰幒妤佸�锋い鎺炴嫹闁告柣鍊楃槐鎾愁吋閸滃啳鍚悗娈垮枛椤兘骞冮姀銈嗗亗閹艰揪绲块弳浼存⒒娴ｅ憡鎯堟い锔诲灦瀵彃鈹戠�ｎ亞顔掔紓鍌欑劍椤洭宕㈡禒瀣拺閻熸瑥瀚崝銈夋煟鎺抽崝搴ｅ垝閸澁鎷烽敐搴℃灍闁绘挻鐩幃姗�鎮欐０婵嗘婵犳鍠栭崐鍧楀蓟閻旂⒈鏁婇柛婵嗗閹峰嘲鈹戦崱娆愭闂佸湱鍎ら崹鐔肺ｉ崼鐔稿弿婵°倧鎷锋俊顐ｆ⒒濡叉劙鏁撻敓锟�?  by changhao
			new fire.pb.school.shouxi.PSendCandidateList(roleid, npckey).submit();
			return;
		}
		if (serviceid == NpcServices.VOTING) {// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆欑喘闂備浇娉曢崰鎰板垂濠靛鍊块柨鏃傚亾瀹曞弶绻濋棃娑卞剰闁绘劕锕﹂幉鍛婃償閳儻缍侀、妤呭礋椤戣姤瀚奸梻浣告啞缁诲倻锟芥凹鍣ｉ崺銏″緞閹邦厾鍘介棅顐㈡处閺屻劍鎱ㄥ鍥锋嫹鐟欏嫭澶勯柛瀣工閻ｇ兘鎮㈤崗鐓庝缓闂傚倸鐗婄粙鎴澬ч弻銉︹拻闁稿本鐟чˇ锕�顭块悷甯含鐎规洘鍨垮畷銊╁级閹寸姷鏆板┑鐘垫暩婵挳骞忕�ｎ�喖宕熼娑掓嫼闂佸憡绻傜�氼垶锝為敃鍌涚厱闁哄喛鎷烽柛銊ユ健閻涱噣宕橀鍢壯冾熆鐠虹尨鍔熼柨娑欑矊閳规垿鎮欓弶鎴犱桓闂佹寧娲嶉弲婊咃拷闈涖偢閺佹捇鏁撻敓锟�
			new CReqCandidatesList(roleid, npckey).process();
			return;
		}
		if (serviceid == NpcServices.LEADER_CAMPAIGN) { //缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽、鏃堝川椤撗傜处婵犵绱曢崑鎴﹀磹閵堝纾婚柛鏇ㄥ幗瀹曟煡鏌熺�电校鐎规洖寮剁换婵嬫濞戞瑱绱炲┑鐐茬毞閺呮粓濡甸崟顖氱闁瑰瓨绻�閸犲﹦绱撴笟锟芥禍鑸电鐠轰警娼栫紓浣股戞刊鎾煠閹帒鍔ら柕鍡楋躬濮婃椽妫冮埡鍐ょ紓浣哄У閹瑰洭鎮伴璺ㄧ杸婵炴垶鐟﹀▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹?? by changhao
			new CCheckCanElect(roleid, npckey).process();
			return;
		}
		if (serviceid == NpcServices.LEADER_CHALLENGE) {// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К缂傚倷鑳舵慨閿嬬箾閿熶粙鏌″畝锟介崰鏍嵁閹达箑绠涢梻鍫熺♁椤斿嫮绱撻崒娆掑厡濠殿喚鍏樺畷浼村冀椤撶偠鎽曢梺闈浥堥弲婊堝磻閸曨垱鐓曟繝闈涙閻濇棃鏌曡箛瀣拷鏍偂閺囥垺鐓忓┑鐐茬仢閸旀岸鏌ㄩ悢缁橆棄婵炲皷锟芥剚鍤曢悹鍥ㄧゴ濡插牓鏌曡箛濠冩珕闁哄懏绻堝娲箰鎼达絿鐣靛┑鈽嗗亝閻╊垵妫熼梺闈涱槴閺呮粓鍩涢幋锔界厵闁兼祴鏅涙禒婊冣攽閳ョ偨鍋㈤柡灞剧♁缁绘繈宕掑鍛呫劍绻濈喊澶岀？闁轰浇顕ч悾鐑芥偄绾拌鲸鏅┑顔斤耿绾悂宕ú顏呯厽閹艰揪绱曢悾顓㈡煕鎼粹�宠埞閻撱倝鏌曟繛鐐珕闁稿鍊栨穱濠囶敍濠靛棔姹楃紒鐐礃濡嫰婀侀梺鎸庣箓鐎氼噣鎯屽▎鎾寸厱婵犻潧鐗嗛崝瀣庨崶褝韬い銏℃礋婵拷闁绘娅曢鎺楁煟鎼淬埄鍟忛柛鐘崇墵閳ワ箓鎮滈挊澶婄�梺璇″瀻閸涱喗顔曢梻浣规偠閸庮垶宕濆澶樻晩闁瑰墽绻濈换鍡涙煟閹板吀绨婚柨鐔诲Г閻楃姴顕ｆ繝姘╅柍杞版祰琚濋梺璇插嚱缂嶅棝宕悢绋跨窞濠电姴娴烽崣鍡涙⒑閸涘﹥绀�闁诲繑宀搁、娆撳籍閸啿鎷虹紓鍌欑劍閿氶柣蹇嬪劜缁绘稓鎷犺椤╊剟鏌ㄩ悢璇残撻柣鏃戝墴楠炲繘鏁撻敓锟�
			new CChallengeShouXiDiZi(roleid, npckey).process();
			return;
		}
		if (serviceid == NpcServices.LEADER_MY_CAMPAIGN) {// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩胶锟藉箍鍎遍ˇ顖滅矆鐎ｎ偁浜滈柟鍝勭Ф閸斿秵銇勯弬鎸庡枠婵﹦绮幏鍛存嚍閵壯侊拷濠囨⒑閸濄儱校闁圭顭烽獮鍫ュΩ瑜濋幏鐑芥濞戞瑦鍠愮紒鐐劤閵堟悂寮诲澶婁紶闁告洦鍓欏▍銈夋⒑閹惰姤鏁遍柛銊ョ埣婵＄敻宕熼姘鳖唺闂佺粯鍔栧娆擃敂閸撲胶纾介柛灞剧懅椤︼附銇勯敂鍨祮妤犵偞鍔欓獮搴ㄦ寠婢跺矈鍞甸梻浣侯攰閹活亪姊介崟顖氱；闁告洦鍨遍崐鍫曠叓閸パ勬崳闁告柨绉归弻锟犲磼閿旇棄顏堕梻鍌氬�搁崐鐑芥嚄閸撲礁鍨濇い鏍ㄧ箖閹冲矂鏌ｉ悢鍝ョ煁婵犮垺锕㈠畷顖炲级閹搭厼娈ㄩ梺褰掓？閻掞箓寮插鍫熺厱闁圭偓顨呴幏鎴犳閺屻儲鈷戦柛婵嗗濡叉悂鏌ｅΔ锟界�氭澘鐣峰┑鍡╁悑濠㈢櫢绠戦ˇ闈涚暦婵傜唯闁挎梹鍎抽獮鎰版⒑鐠囪尙绠抽柛瀣ㄥ�曢…鍥ㄧ節濮橆剛顔嗛悗鐟板婢瑰棝寮抽敃鍌涚厱闁靛绲芥俊鑺ャ亜閺冿拷閹哥粯绌辨繝鍥ㄥ�锋い蹇撳閹风兘寮介鐐舵憰闂侀潧艌閺呮稓鎲撮敃鍌涘�甸柨婵嗛閺嗗顭跨捄渚叕闁绘挶鍎甸弻娑㈠即閻愬吀绮靛銈嗘⒐濡啫顫忛搹鍦＜婵☆垵娅ｆ禒鏉戔攽閻愰鍤嬪┑鈥虫喘閺佹捇鎳為妷銊ヮ棟缂傚倸绉撮敃銈夛綖韫囨梻绡�婵﹩鍓涢敍婊冣攽椤旀枻渚涢柛鎾卞姂楠炲繘鎮滈懞銉ワ拷濠氭煠閹帒鍔氭繛鍫熷灴濮婃椽宕滈幓鎺嶇凹濠电偛寮堕悧鐘茬暦閹烘惟鐟滃酣宕伴幇鐗堢厸闁告劑鍔庢晶鏇犵磼閻樺磭澧甸柡灞剧椤﹁櫕銇勯妸銉﹀殗闁诡喗鐟︾换婵嬪礃閿旇法鐩庢俊鐐�栫敮鎺椝囬娑欐珷妞ゆ牜鍋為悡鐔兼煃閸濆嫸宸ラ柣蹇曞█閺岋綁鏁愰崶褍骞嬮梺璇″枔閸ㄥ宕版繝鍐╃秶闁靛闄勯悵婊勭節閻㈤潧浠╅柟娲讳簽瀵板﹪宕稿浼欐嫹閿曞倸閱囬柣鏂款殠閸ゃ倝鏌熼崗鑲╂殬闁告柨绉归崺娑㈠箳閹炽劌缍婇弫鎰板醇濠㈩剚鎸鹃惀顏堫敇閻愰潧鐓熼梺鍝勬湰閻╊垶寮幇顖滅杸闁哄洨濮靛▓鍏间繆閵堝洤啸闁稿绋撻幑銏狀潨閿熻棄顕ｉ锕�绠荤紓浣股戝▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹
			new fire.pb.school.shouxi.PMyElector(roleid, npckey).submit();
			return;
		}
		///////////////////闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屻倗鍠婇崡鐐测拻濠碘剝鐓￠弨杈╂崲濠靛棭鍤楅梺鍨儐缁舵煡鏌ㄩ悢璇残撻柟鐟版喘楠炲啴鎮欓悜妯绘珖闂佺鏈銊╂偂閹达附顥婃い鎰╁灪婢跺嫮绱掔�ｎ偄娴柟顔癸拷鏂ユ瀻闁瑰濮烽敍婵囩箾鏉堝墽绉繛浣冲洦鍊堕柍鍝勬噺閻撴盯鎮楅敐搴′簽婵炲弶鎸抽弻鈥崇暆鐎ｎ剛袦婵犲痉銈呯厫闁诡垱妫冮崺鍕礃椤忓啯鍠氬┑鐘垫暩閸庢垹寰婇挊澹濇椽濡舵径瀣珖濡炪倕绻愰幊宥囨崲閸℃稒鐓曟い鎰剁稻缁�锟介悗鐟版啞缁诲啴濡甸崟顖氱閻犺櫣鍎ら悗鎯ь渻閵堝棙鐓ユい锕傛涧椤繘鎼圭憴鍕彴闂佸湱绮敮鈺呭礉婢跺瞼纾奸柣鎰靛墯缁惰尙绱掓径瀣唉闁诡喗鍎抽埞鎴狅拷锝庝簽椤旀劖绻涙潏鍓хɑ闁烩剝娲熼獮妤呭即閵忊檧鎷洪柣鐘充航閸斿矂寮搁弬搴撴斀妞ゆ棁濮ょ亸锕傛煙椤旂晫鎳勭紒缁樼箞瀹曞爼濡歌鐢姊洪崫鍕垫Ш闁稿鍋炵粩鐔煎幢濞戞鐣烘繝闈涘�搁幉锟犳偂韫囨稓鍙撻柛銉ｅ妽缁�锟介弶鈺傜箞閹嘲顭ㄩ崨顓ф毉闁汇埄鍨遍〃濠傜暦閹达箑绠涢柣妤�鐗忛崢浠嬫⒑闂堟稓绠冲┑顕�鏀辩粋鎺戔槈濞嗘垹顔曢梺鍓插亞閸犳挸鐣风弧纾杢//////////////////////////////////////
		if (serviceid == NpcServices.WINNER_START) {// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屾盯骞囬姘卞闂佹眹鍨归…宄邦潖缂佹鐟归柨鐔绘椤洩顦归挊婵囥亜閹板墎鐣遍柣銈囧亾缁绘盯骞嬮悙璺侯棟濡炪們鍎插銊╁箟閹间焦鍋嬮柛顐ｇ箘閻熸煡姊虹紒妯诲鞍婵炲弶顭囬幑銏犫槈閵忕姷顓洪梺缁樺灥濞层倝宕ｉ弴銏♀拺闁绘艾鐡ㄧ�氳绻濋悽闈浶ｇ痪鏉跨Ч閹繝寮撮悢铏诡啎闂佺硶鍓濋〃鍫㈢不瀹曞洨纾奸柣妯烘▕閻撳ジ鏌＄仦闈╂嫹瀹曞洦娈曢柣搴秵閸撴稖鈪靛┑掳鍊楁慨鐑藉磻濞戞◤娲敇閳ь剨鎷锋担鑲濇梹鎷呴悷閭︼拷鎾绘⒑閼姐倕鏋戞繝銏∩戠粩鐔奉吋閸モ晝锛濋梺绋挎湰閼归箖鏁撴禒瀣垫婵炲棎鍨芥俊鑸靛緞婵犲嫷鍞甸梻浣虹帛閸ㄥ吋鎱ㄩ妶澶嬪亗闁哄洢鍨洪悡娆徝归悡搴ｆ憼婵炴嚪鍥ㄧ厸閻庯綆鍓欓弸娑㈡煛瀹�瀣М妤犵偞顭囬幑鍕倻濡》鎷烽悙顒傜闁挎繂鎳忛幖鎰版煥閺囥劋閭柕鍡曠閳藉螣闁垮鏉搁梻浣哥秺閸嬪﹪宕滃棰濇晩闁告洦鍘剧壕浠嬫煕鐏炲墽鎳呴柛鏂跨Ф閹叉悂寮堕崹顔芥闂佺偨鍎荤粻鎾诲箖濠婂牊瀵犲璺哄閹蹭即姊绘担鑺ョ《闁哥姵鎸婚幈銊╁级閹搭厼鏅犲┑鐘绘涧濞层垺绂嶅鍫熺厵闁绘垶锚閻忋儵鏌ㄩ悢缁橆棄妞ゎ厾鍏橀獮鍐晸閻樿尙顔掔紓鍌欑劍鑿ら柟閿嬫そ閺岋綁鎮╅崣澶岊槺闂佽法鍠庨敓鐣屽枑閻濐亪鏌ｈ箛鎾跺ⅱ缂佽鲸鎹囧畷鎺戭潩濮ｆ瑣鍨介弻銊╁即濡尨鎷峰┑瀣畺濡わ絽鍟崐濠氭煢濡警妯�闁哥偛鐖煎娲传閸曨剙绐涢梺绋款煭缂嶄線宕洪敓鐘插窛妞ゆ梹鍎冲鎶芥⒒娴ｅ憡鎯堥柛鐕佸亰瀹曟劙鎸婃径妯硷拷鍫曟煕濞戞﹫姊楃紒璇叉閺岀喓绱掑Ο铏诡儌闂佺硶鏅徊楣冨箞閵婏妇绡�闁告洦鍘肩粭锟犳⒑閻熸澘妲婚柟鍐茬箳缁參鎮㈢喊杈ㄦ櫖濠电姴锕ら崯顐ｇ搹濠电姷顣槐鏇㈠磻閹达箑纾归柡宥庡幖閸ㄥ倿鏌涢锝嗙闁搞劌鍊块弻娑滎槼妞ゃ劌鐗嗛悾鍨瑹閿熶粙鎮￠锕�鐐婇柕濞э拷濡俱劑姊洪崫鍕櫤闁诡喖鍊垮濠氬Ω閳哄倸浜為梺绋挎湰缁嬫垿顢旈敓锟�
			new CReqStartWinner(roleid, npckey).process();
			return;
		}
		if (serviceid == NpcServices.FIGHT_WINNER) {
			new CStartWinnerBattle(roleid, npckey).process();
			return;
		}
		////////////////////////闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屻倗鍠婇崡鐐测拻濠碘剝鐓￠弨杈╂崲濠靛棭鍤楅梺鍨儐缁舵煡鏌ㄩ悢璇残撻柟鐟版喘楠炲啴鎮欓悜妯绘珖闂佺鏈銊╂偂閹达附顥婃い鎰╁灪婢跺嫮绱掔�ｎ偄娴柟顔癸拷鏂ユ瀻闁瑰濮烽敍婵囩箾鏉堝墽绉繛浣冲洦鍊堕柍鍝勬噺閻撴盯鎮楅敐搴′簽婵炲弶鎸抽弻鈥崇暆鐎ｎ剛袦婵犲痉銈呯厫闁诡垱妫冮崺鍕礃椤忓啯鍠氬┑鐘垫暩閸庢垹寰婇挊澹濇椽濡舵径瀣珖濡炪倕绻愰幊宥囨崲閸℃稒鐓曟い鎰剁稻缁�锟介悗鐟版啞缁诲啴濡甸崟顖氱閻犺櫣鍎ら悗鎯ь渻閵堝棙鐓ユい锕傛涧椤繘鎼圭憴鍕彴闂佸湱绮敮鈺呭礉婢跺瞼纾奸柣鎰靛墯缁惰尙绱掓径瀣唉闁诡喗鍎抽埞鎴狅拷锝庝簽椤旀劖绻涙潏鍓хɑ闁烩剝娲熼獮妤呭即閵忊檧鎷洪柣鐘充航閸斿矂寮搁弬搴撴斀妞ゆ棁濮ょ亸锕傛煙椤旂晫鎳勭紒缁樼箞瀹曞爼濡歌鐢姊洪崫鍕垫Ш闁稿鍋炵粩鐔煎幢濞戞鐣烘繝闈涘�搁幉锟犳偂韫囨稓鍙撻柛銉ｅ妽缁�锟介弶鈺傜箞閹嘲顭ㄩ崨顓ф毉闁汇埄鍨遍〃濠傜暦閹达箑绠涙い鎾跺Х椤旀洟姊洪崜鎻掍簼缂佽瀚粋鎺楀閻橆偅鏂�闂佹寧绋戠�氼喖鈻撶粩锟�//////////////////////////////////////

		
		if (InstanceManager.getInstance().getInstNpcServers().contains(serviceid)) {
			new PGiveInstanceProc(roleid, npckey, serviceid).submit();
			return;
		}
		
		if (LineInstManager.getInstance().getInstNpcServers().contains(serviceid)) {
			new fire.pb.mission.instance.line.PGiveLineProc(roleid, npckey, serviceid).submit();
			return;
		}
		
		if (serviceid == NpcServices.BACK_COPY_SERVICE) {
			new PBackInstanceScenceProc(roleid).submit();
			return;
		}
		
		
		
		if(serviceid == 1923){
			fire.pb.mission.ExecuteReqGoto.trans2Pos(roleid, 1014, 39, 27, false);
			return;
		}
		if(serviceid == 1924){
			fire.pb.mission.ExecuteReqGoto.trans2Pos(roleid, 1004, 27, 89, false);
			return;
		}
		if(serviceid == 1925){
			fire.pb.mission.ExecuteReqGoto.trans2Pos(roleid, 1008, 89, 38, false);
			return;
		}

		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К缂傚倷鑳舵慨閿嬬箾閿熶粙鏌″畝锟介崰鏍х暦濠婂棭妲鹃柣銏╁灡閻╊垶寮诲☉娆戠瘈闁告侗鍘鹃崢顐︽⒑闁稓鈹掗柛鏂跨焷閻忔帡姊洪崷顓х劸婵炲鍏樻俊鎾箛椤斿墽锛濇繛杈剧到閹碱偄鐨梻浣告啞椤ㄥ棙绻涙繝鍌ゅ殨閻犲洦绁村Σ鍫熶繆椤栫偞鏁遍柡鍌︽嫹闂傚倷绀侀幉鈥趁洪敃鍌氱；闁告洦鍓氶崣蹇涙煛閸モ晛鍓辨繛鎾愁煼閺屾洟宕煎┑瀣碉拷妤�霉濠婂嫮绠栫紒缁樼洴閹崇娀顢楅敓浠嬪几濞戞熬鎷峰▓鍨灈妞ゎ厾鍏橀獮鍐閵堝懎绐涙繝鐢靛Т鐎氼喛鍊撮梻鍌氬�风粈渚�骞夐敓鐘茬闁糕剝绋戝婵囥亜閺冨倻鎽傞柛鐔锋噽缁辨捇宕掑顒婃嫹閹间礁纾瑰瀣椤愪粙鏌曢崼婵愭Ц缂佺媭鍨堕弻锝夊箣閿濆憛鎾绘煟閹惧瓨绀嬮柡宀�鍠愮�佃偐锟芥稒蓱闁款參姊洪崫鍕靛剳闁哥姵鐗犲濠氭晲婢跺﹦顔掗柣搴ｆ暩绾泛危閸繍娓婚柕鍫濋瀵劍绻涙径瀣妤犵偞鍨垮畷鐔碱敍濮橆偆鐐婇梻浣告啞濞茬喎顭囪娣囧﹥顦版惔锝囷紳婵炶揪缍佺紓姘瀶閹间焦鐓曟繛鍡樼懄鐎氬綊姊绘担铏广�婇柡鍛矒閹冾煥閸繄顔夐梺闈涚箳婵厼危閸儲鐓忛煫鍥ㄦ礀閳诲牓鏌涢悙鑼煟婵﹥妞藉Λ鍐ㄢ槈鏉堛剱銈夋⒑缁嬪尅鏀婚柣妤冨Т閻ｇ兘寮跺▎鐐兊闂佺厧鎽滈。浠嬪箯濞差亝鈷戦柛娑橈功缁犳捇鎮楀鐓庢珝闁诡喚鍋熼幑鍕Ω瑜忛敍婊堟⒒婵犲骸浜介柛姗�绠栭幆灞解枎閹惧鍘撻梺闈涱樈閸ㄦ娊鎮鹃棃娑掓斀闁斥晛鍟崐鎰版煕閳规儳澧查柟宄版噺缁楃喖顢涘ù鍓佸仱濮婂宕掑▎鎰偘濡炪倖娲橀悧鐘茬暦鐟欏嫭鍎熼柕濞垮劤椤︺劌顪冮妶搴″箺闁搞劌鐖艰棢鐎广儱妫涚弧锟介梺姹囧灲濞佳冪摥闂備焦鐪归崕閬嵥囬棃娑卞殨闁割偅娲栫粈宀勬煃閳轰礁鏆欐い蹇氭硾閳规垶骞婇柛濠冩崌閹偤鏁冮崒姘辩厬闂婎偄娲︾粙鎺楁偂濞戞﹩鐔嗛悹杞拌閸庡繑绻涢崼顐㈡灍缂佺粯绋戦蹇涱敊缂佹ê鏋ら梻浣芥〃缁�浣该洪銏犺摕闁哄浄绱曢悿锟介梺鍝勬川閸婎偊濡烽埡鍌滃幗闂佹寧绻傚Λ娆撳Φ濠靛洦鍙忓┑鐘叉噺椤忕娀鏌熸搴♀枅闁搞劍鍎抽悾鐑藉炊闁垮顏舵繝鐢靛У绾板秹鎮￠弴鐔虹闁瑰瓨绻傞懜褰掓煛鐎ｎ剙鏋涢柡宀嬬秮閺佹劙宕惰楠炲鈹戦纭峰姛缂侇噮鍨堕獮蹇涘川閺夋垵绐涙繝鐢靛Т閸婄懓鈻撳Ο鑽ょ瘈闁汇垽娼ф禒鈺傘亜閺囩喓鐭岀紒顔碱煼楠炴ê鐣烽崶銊︻啎婵犵數濮撮敃銈夊窗濮橆剦鐒介柍鍝勬噺閸嬶綁寮堕悙鏉戭棆缂佸娼￠弻鏇熷緞閸℃ɑ鐝曢梺缁樻尪閸庣敻寮婚敐澶婂嵆闁绘劘顕滈幏鐑藉捶椤撱劍瀚规慨妯煎亾鐎氾拷
		if (serviceid == NpcServices.ENTER_BINGFENG) {
			BingFengWangZuoConfig bfconfig = BingFengLandMgr.getInstance().getBingFengConfigByRoleLv(roleid);
			if (bfconfig != null) {
				int rankid = BingFengLandMgr.getInstance().getRankIdByInstzoneId(bfconfig.getInstzoneid());
				SRequestRankList requestRankList = RankListManager.getInstance().getRankListResponse(rankid, roleid, 0);
				gnet.link.Onlines.getInstance().send(roleid, requestRankList);
				fire.pb.instancezone.bingfeng.BingFengLandMgr.sendSBingFengInfo(roleid, rankid);
			}
			else {
				int rankid = BingFengLandMgr.getInstance().getRankIdByInstzoneId(1);
				SRequestRankList requestRankList = RankListManager.getInstance().getRankListResponse(rankid, roleid, 0);
				gnet.link.Onlines.getInstance().send(roleid, requestRankList);
				fire.pb.instancezone.bingfeng.BingFengLandMgr.sendSBingFengInfo(roleid, rankid);
			}
			return;
		}
		
		
		if (serviceid == 1078 || serviceid == 1079){
			new PReceiveAccountInfoAward(roleid,serviceid).submit();
			return;
		}
		
		if(serviceid == 1987){//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋婵愭綗闁跨喕妫勯崐鍧楀箰婵犲啰鐝堕柍鍝勵儑缁夘喚锟借娲忛崝鎴濐嚕閸洖绠ｉ柣娆忔噽楠炪垽姊婚崒娆戭槮闁规祴鍓濈粭鐔肺旈崨顓犵厬闁瑰吋鐣崝宥夊磻閸曨垱鐓曢柍鈺佸幘閼测晜宕查柛鈩兦滄禍婊堟煛瀹ュ啫濡块柟鍐叉噽缁辨帗寰勭�ｎ亶鍤嬬紓浣虹帛閻╊垶鐛�ｎ喗鍊婚柛鈩冪懃婵亶姊绘担鍛婃儓闁哥噥鍋婇幃褔宕卞▎鎴犵劶闁诲函缍嗛崰妤呮偂閸愵喗鐓熸慨姗嗗墰閹界娀鎮楀杈ㄥ殌闁宠鍨块、娆忊枎閻愵剛绉锋俊鐐�戦崝宀勬晝閵堝缍栭煫鍥ㄦ媼濞差亶鏁傞柛鏇ㄥ弾閸熷洭姊绘担铏瑰笡闁告梹鐗為妵鎰板礃閳哄倸寮块梺鍓插亝濞叉﹢鍩涢幋锔界厱婵炴垶锕弨濠氭倶韫囧骸宓嗛柡宀嬬秮閹垽宕ｆ径瀣綃婵°倗濮烽崑娑樜涘☉娆戭浄闁挎棁濮ゆ慨婊堟煙缁嬪灝顒㈡い銉ョ墢閿熷�燁潐濞插繘宕濋幋锔猴拷浣糕枎閹惧磭鐣鹃悷婊冪Ф缁濡烽埡鍌楁嫽婵炶揪绲块悺鏃堝吹濞嗘挻鍊垫繛鎴炲笚濞呭洨绱掗鐣屾噰妤犵偞甯掗—鍐╁濞嗘劕顏堕梺鎸庢礀閸婃悂鎮欐繝鍥ㄧ厓闁告繂瀚弳鏇犵磼濡わ拷椤﹂潧顫忓ú顏呭仭闂侇叏绠戝▓鑸电節濞堝灝娅嶆い銉︽尰缁旂喖寮撮悢娲闂佸憡绋戦敃锕傚储椤忓懐绡�闁汇垽娼у瓭缂備胶绮敮锟犲箖妤ｅ啯鐒肩�广儱妫涢崢鎾剁磽閸屾瑧鍔嶉拑杈╃磼閿熺晫锟斤綆鍠楅悡娑氾拷鐧告嫹閻庯綆鍓涢敍鐔哥箾鐎电顎撶紒鐘虫尭閻ｅ嘲顭ㄩ崱鈺傂ユ繝纰樺墲瑜板啴鎮ч幘璇茶摕鐟滃繒妲愰幒鎳崇喖鎮℃惔妯烘倕闂傚倸鍊稿ú銈壦囬悽绋胯摕闁靛鍎弨浠嬫煕閳╁啰鎳冩い銈忔嫹濠碉紕鍋戦崐鎴﹀磿闁单鍥ㄥ閺夋嚦锕傛煕閺囥劌鐏犻崬顖炴⒑閹稿孩鐓ュ褌绮欓幃楣冩濞戣鲸瀵岄梺闈涚墕缁ㄨ偐鑺辨繝姘厱闁绘棃顥撻幗鐘睬庨崶褝韬�规洖銈稿鎾倷濞堟寧袨闂傚倷绶氬褔鈥﹂崼銉ョ？婵炲樊浜濋崐鐢告煙缂併垹鏋熼柍閿嬪笒闇夐柨婵嗘噺閹牓鏌涢弮鎾剁暤闁哄矉绻濆畷銊╊敂閸涱喚褰嬮柣搴ゎ潐濞叉繈锝炴径宀嬫嫹娴ｅ啫浜归柨鐔诲Г缁嬫帡鏁嬫繛瀵稿Т閵堢顫忛搹鍦＜婵☆垵娅ｆ导鍥ㄧ節濞堝灝鏋旈柛濠冪箓椤曪綁寮婚妷銉ь啇婵炶揪绲藉﹢閬嶅矗閸℃稒鈷戠紓浣股戠粈锟介梺绋匡工濠�閬嶆晸閼恒儳鍟查柟鍑ゆ嫹?
			new PTakeWeiBoAwardProc(roleid).submit();
			return;
		}

		// PvP闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閳╁啯鐝曢梻浣藉Г閿氭い锔诲枤缁辨棃寮撮姀鈾�鎷绘繛杈剧秬濞咃綁濡存繝鍥ㄧ厱闁规儳顕粻鐐烘煙椤旂偓鐒挎い锕�缍婇弻鐔碱敍濮樿京鍔Δ鐘靛仦椤洨妲愰幒鎳崇喖鎮�涙ê顏堕梺鍓茬厛閸嬪棛绮绘ィ鍐╃厵閻庣數顭堥崜鍗灻归悡搴㈩棦闁哄瞼鍠愬蹇涘礈瑜忛弳鐘绘⒑濞茶骞楁い銊ワ躬閹繝顢曢敃锟介悙濠囨煏婵炑嶆嫹婵′勘鍔戝铏圭磼濡鏆楅梺鍝ュУ閻楃姴顕ｆ繝姘櫢闁绘灏欓敍婊冣攽椤旂煫顏囥亹婢舵劖鎯為幖娣妽閳锋垿鎮归崶锝忔嫹閾忣偆浜堕梻浣规偠閸斿苯顭囬垾鎰佸殨閻犲洦绁村Σ鍫熺箾閸℃ê濮囬柛鏂挎嚇濮婃椽骞愭惔锝傛闁诲孩鑹鹃幊鎾凰囪ぐ鎺撶厸鐎癸拷鐎ｎ剛锛熸繛瀵稿缁犳挸鐣峰鍡╂Ъ闂佸憡甯楅惄顖炲箖濡わ拷閳绘捇宕归鐣屼憾闂備浇顫夐悺鏇炩枍閺囩喓鈹嶅┑鐘叉搐缁犵懓霉閿濆牆锟戒粙濡搁埡鍌滃帾闂佸壊鍋呯换鍕櫠閺囥垺鐓熼柟鐑樻处閸ゆ瑩鏌嶇憴鍕伌闁诡喒鏅涢埢鎾诲箰鎼淬垻妲ｉ梻鍌欑閹诧繝骞愰懡銈嗗床闁割偁鍎辩粻鏍煥閻斿搫孝闁绘帗妞介弻娑㈠箛閸忓憡鍠氬┑鐐插级閹倸顫忓ú顏勭闁圭粯甯婄花鐓庘攽閻愭彃绾ч柣妤冨█楠炲繘骞嬮敂钘変簻闂佺绻楅崑鎰板矗閸℃せ鏀介柣妯肩帛濞懷勪繆椤愵偄骞栭崡杈╂喐閻楀牆绗氶柣鎾寸洴閺屾稑鈽夐崡鐐寸亶闂佺锕ラ崝娆撳蓟閿涘嫪娌悹鍥ㄥ絻椤洭姊虹拠鈥虫灁闁稿﹥绻傞悾鐑藉箳閹存梹顫嶅┑顔筋殔濡梻妲愰敓锟�?
		IPvPServiceHandle sHandle = PvPServiceHandleFactory.create(serviceid);
		if (sHandle != null) {
			sHandle.handle(roleid, serviceid);
			return;
		}

		if (BingFengLandMgr.bingFengServiceids.contains(serviceid)) {
			new PBattletoBingFeng(roleid, npcId).submit();
			return;
		}

		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴楠炴﹢宕ｆ径妯烩枈闂備胶绮敮鎺楁晝椤忓牆钃熼柡鍥╁枔缁犻箖鏌ｉ幇闈涘闁绘繃姊荤槐鎾存媴閸濆嫷锟藉矂鏌涢妸銉у煟鐎殿喖顭烽弫鎰緞婵犲嫷鍚呴梻浣瑰缁诲倿骞夊☉銏犵缂備焦顭囬崢浠嬫⒑鐟欏嫬鍔ゆい鏇ㄥ弮楠炲﹪宕熼娑氬帾闂佹悶鍎滈崘鍙ョ磾闁诲孩顔栭崰鏍晸閻ｅ苯娅忔俊鑼帶椤啴濡堕崘銊ュ缂備緡鍠楅幑鍥ь嚕婵犳碍鍋勯柛蹇撳悑閸庮亜顪冮妶鍡楀闁搞劌缍婇敐鐐哄箳濡や讲鎷洪柡澶屽仦婢瑰棝藝閿斿墽纾煎璺猴功缁夌儤顨ラ悙鎻掓殭闁宠閰ｉ獮姗�寮堕幋顖涘缂備焦眉缁诲棙銇勯弽顐沪闁轰線浜堕幃妤�顫濋鎯т划濠殿喖锕︾划顖炲箯閸涙潙宸濆┑鐘插�瑰▓妯肩磽閸屾瑧顦︽い鎴濇瀹曞綊宕稿Δ锟介弸渚�鏌涢幇闈涙灈閸烆垶姊虹�圭姵銆冮柤鍐茬埣閹偓銈ｉ崘鈹炬嫼闂佸憡绋戦敃銉﹀緞閸曨垱鐓曢柕濞炬櫃閹查箖鏌熼鍡欑瘈鐎殿喗鎸虫慨锟介柨娑樺鐢儳鈹戦悩鍨毄闁稿鐩幃妯衡攽鐎ｎ亞顦┑顔筋焾閸╂牠鎮￠悩鐢电＜閻庯綆鍘界涵鍓佺磼婢跺銇濋柡宀嬬磿娴狅妇鎷犻幓鎺濇綆闁诲孩顔栭崰妤�顭囧▎鎺斾航闂備焦鍎崇换姗�鏁撻懞銉с�掔紒锟介崟顖涒拻闁稿本鐟︾粊鐗堛亜閺囩喓澧电�规洦鍨堕、鏇㈡晝閿熶粙鎮欐繝鍕枑闁哄啫鐗嗛懜褰掓煕椤愶絾绀冮柍閿嬪灴濮婂宕奸悢鎭掞拷鎺旂磼閻樺啿鍝洪柡宀嬬節瀹曘劑顢欓崜褏鍘掔紓鍌欑贰閸犳牠鏁冮鍫涳拷渚�寮撮姀鈩冩珕闁荤喐鐟辩徊鍓э拷姘偢濮婄粯鎷呴崫鍕粯濡炪値鍋呭ú鐔风暦閹版澘鍗抽柣鎰仛閹冲啯绻濋悽闈浶ラ柡浣规倐瀹曟垿鎮╁ú缁樻櫔濠电姴锕ら幊鎰▔瀹ュ鐓欓柣鎴烇供濞堟柨顩奸崨瀛樷拺闁革富鍘奸。鍏肩節閵忊槅鐒界紒顔肩墦瀹曟﹢鍩炴径鍝ョ泿闂備礁鎼ú銊╁磻閻愭牳澶愭偐閻㈢數锛滈柣搴秵娴滅偟绮荤紒妯诲弿濠电姴鎳忛鐘绘煙閻熸澘顏┑鈩冩倐婵＄兘鏁傞幆褏绋堥梻鍌氬�烽懗鍫曞箠閹捐鍚归柡宥庡幖缁狀垶鏌ㄩ悤鍌涘
		if(serviceid == 1801){
			InstanceManager.getInstance().abandonInstanceTask(roleid);
			return;
		}
		
		if(MasterManager.masterService(roleid, serviceid)){
			return;
		}
		
		if (serviceid == NpcServices.IMPEXAM_STATE) {
			new PApplyImpExamProc(roleid,ImpExamType.IMPEXAM_STATE,1).submit();
			return;
		}
		
		if (serviceid == NpcServices.RESET_LINEINST) {
			new fire.pb.mission.instance.line.PSendResetLineTask(roleid).submit();
			return;
		}
		
		if (serviceid == NpcServices.QUERY_LINEINST) {
			new fire.pb.mission.instance.line.PQueryLineTime(roleid).submit();
			return;
		}
		
		if (serviceid == NpcServices.LOOK_YAO_QIAN) {
			new fire.pb.npc.PLookYaoQian(roleid, npckey).submit();
		}
	}


	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 795435;

	public int getType() {
		return 795435;
	}

	public long npckey; // npckey为npc的唯一ID
	public int serviceid; // 服务ID

	public CNpcService() {
	}

	public CNpcService(long _npckey_, int _serviceid_) {
		this.npckey = _npckey_;
		this.serviceid = _serviceid_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(npckey);
		_os_.marshal(serviceid);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		npckey = _os_.unmarshal_long();
		serviceid = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CNpcService) {
			CNpcService _o_ = (CNpcService)_o1_;
			if (npckey != _o_.npckey) return false;
			if (serviceid != _o_.serviceid) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)npckey;
		_h_ += serviceid;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(npckey).append(",");
		_sb_.append(serviceid).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CNpcService _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(npckey - _o_.npckey);
		if (0 != _c_) return _c_;
		_c_ = serviceid - _o_.serviceid;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}
