
package fire.pb.npc;

import fire.pb.PAddExpProc;
import fire.pb.activity.award.RewardMgr;
import fire.pb.activity.clanfight.ActivityClanFightManager;
import fire.pb.activity.timernpc.TimerNpcService;
import fire.pb.clan.ClanUtils;
import fire.pb.instancezone.InstanceZone;
import fire.pb.instancezone.InstanceZoneFactory;
import fire.pb.instancezone.conf.InstanceZoneConfig;
import fire.pb.instancezone.faction.FactionInstZone;
import fire.pb.map.Npc;
import fire.pb.map.SceneNpcManager;
import fire.pb.talk.MessageMgr;
import fire.pb.util.DateValidate;






// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __COpenChest__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class COpenChest extends __COpenChest__ {
	@Override
	protected void process() {
		// protocol handle
		final long roleId = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleId == -1)
			return;
		
		final fire.pb.map.Role role = fire.pb.map.RoleManager.getInstance().getRoleByID(roleId);
		if (null == role)
			return;
		
		InstanceZone instzone = InstanceZoneFactory.getRoleCurInstanceZone(roleId, true);
		if (instzone != null) {
			InstanceZoneConfig zoneconfig = fire.pb.instancezone.Module.getInstance().getInstanceZoneConfigs().get(instzone.getInstZoneId());
			if (zoneconfig != null) {
				long now = System.currentTimeMillis();
				if (zoneconfig.inEnterTime(now)) {
					new mkdb.Procedure() {
						protected boolean process() throws Exception {
							InstanceZone instzone = InstanceZoneFactory.getRoleCurInstanceZone(roleId, false);
							if (instzone instanceof FactionInstZone) {
								return ((FactionInstZone) instzone).openChest(roleId, chestnpckey);
							}

							return false;
						};
					}.submit();
					
					return;
				}
			}
			
			return;
		}

		if (!fire.pb.map.SceneNpcManager.checkDistance(chestnpckey, roleId))
			return;
		
		new mkdb.Procedure() {

			@Override
			protected boolean process() throws Exception {
				Npc npc = SceneNpcManager.getNpcByKey(chestnpckey);
				if (npc == null)
					return false;
				
				SBaoxiang chestcfg = ChestManager.getInstance().getChestConfig(npc.getNpcID());
				if (chestcfg == null)
					return false;
				
//////////////////////////////////////////////
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤濠�閬嶆晸閻ｅ本鍤�閻庢凹鍙冨畷宕囧鐎ｃ劋姹楅梺鍦劋閸ㄥ綊宕愰悙鐑樷拺闂傚牊涓瑰☉銏犲窛妞ゆ挶鍨诲畷鏇㈡⒒閸屾艾锟介绮堟担鍦彾濠电姴娲ょ壕濠氭煕濞戝崬鐏ｇ紒鎲嬬畱铻栭柨婵嗘噹閺嗘瑩鏌涢幋鐘残ラ柨鐔绘缁犲秹宕曢柆宓ュ洦瀵肩�涙ê浜楀┑鐐村灟閸ㄦ椽鎮￠弴銏＄厪濠㈣泛鐗嗛悘顏呯箾閸涱厽鍣介柨鐔诲Г缁嬫帞鎹㈤崼婵愭綎婵炲樊浜滅粻褰掓煟閹邦厼绲绘い顒�顦辩槐鎾存媴缁涘娈柣搴㈢煯閸楀啿顕ｉ锕�绠荤紓浣姑禒濂告煟韫囨洖浠ч柧蹇撳缁傛帟顦规慨濠囩細閵囨劙骞掑┑鍥舵闂備胶顭堢换鎴︽晝閵忕媭鍤曢悹鍥ㄧゴ濡插牓鏌曡箛鏇炐㈢�规挸妫濆娲濞戣京鍔搁梺绋垮婢瑰棝鎳為柆宥嗗亗閹煎瓨蓱閺傦拷闂備胶鍋ㄩ崕鏉戔枍閺囥垹鐓濋柡鍥ュ灪閻撴洟鏌熼幑鎰【闁哄瀛╅妵鍕敃閵忋垻顔囬柣鎾卞�栭妵鍕疀閹炬剚浠肩紓浣瑰姈缁嬫帞鎹㈠┑瀣仺闂傚牊鍒�閵忋倖鐓曢柣鏇氱娴滀即鎸婂┑瀣厓闁告繂瀚崳娲煃闁垮鐏撮柡宀�鍠栭幊鏍煛娴ｉ鎹曞┑鐘愁問閸犳牠宕愰幖浣圭畳婵犵數濮撮敃銈呂涘▎鎴炲厹濡わ絽鍟悡鐔兼煥濠靛棙鎼愰柛妯绘尦閺岀喖顢欓懡銈囩厯閻庤娲忛崝宥囨崲濠靛绀冮柍鍝勶梗閹村嘲鈹戦悩鍨毄闁稿鐩、姘额敇閻旂寮块梺鍦檸閸ｎ噣寮崟顖涚厱闁斥晛鍟伴埥澶愭煟閹惧瓨绀嬮柡宀�鍠愬蹇斻偅閸愨晩锟藉秹姊虹紒妯诲鞍婵炲弶顭囬幑銏犫槈閵忕姷顓洪梺缁樺灥濞层倝宕ｉ弴鐐╂斀妞ゆ梻銆嬮弨缁樸亜閵娿儳澧㈡俊鍙夊姍楠炴帒螖閿熶粙鏌嬮崶顒佺厸闁搞儯鍔庨。鏌ユ煕閻樺啿鍝烘慨濠冩そ瀹曨偊宕熼浣瑰闂備胶鍎甸弲鈺呭垂閸洜宓侀柛鎰靛枛閻撴稑霉閿濆洤鍔嬫繛鍫ョ畺濮婃椽骞栭悙鎻掑Η闂佽法鍠嶇划娆撶嵁韫囨柨顕遍悗娑欘焽閸樹粙姊虹紒姗嗙劸缂侇噣绠栭、妤呮偄閸忚偐鍘遍梺闈涱焾閸庢娊宕洪敐鍥锋嫹濞堝灝鏋︽い鏇嗗洤鐓″璺好￠悢鍏肩叆閻庯絽鐏氱紞灞解攽閻樻鏆俊鎻掓嚇瀹曡瀵奸弶鎴Ｐ曢柣搴秵閸犳牜绮婚悢灏佹斀闁稿本纰嶉崯鐐烘煃闁垮鐏╃紒杈ㄦ尰閹峰懘鎳栭埄鍐ㄧ仼濞存粍鎮傚Λ鍐ㄢ槈閹烘挻鏉搁梻浣虹帛閸ㄩ潧煤閿旀拝鎷峰顒傜Ш婵﹦绮幏鍛驳鐎ｎ亝鐣伴梻浣告憸婵敻銆冩繝鍥ラ柛鎰ㄦ櫇缁★拷闂佺鏈划宥呪枔妤ｅ啯鈷戠紓浣姑悘鈺呮煟閳╁啯顥堢�殿噮鍋婂畷鍫曨敆娴ｅ搫骞楅梻浣哥秺閸嬪﹪宕㈤崗鍏煎弿闁稿瞼鍋為悡鏇㈡煏婵炲灝鍔撮柣鎾冲悑椤ㄣ儵鎮欓幓鎺撴濡炪們鍨洪悷褔宕版繝鍐╃秶闁靛鍎遍崢鐐烘⒒閸屾瑨鍏岄柛妯犲洤绠烘繝濠傜墕閺嬩線鏌熼梻瀵割槮闁稿被鍔岄湁闁绘ê妯婇崕鎰版煟閹惧鎳囬柡灞剧缁犳盯骞橀搹顐拷顖炴⒑缁嬪灝顒㈡い銊ワ躬瀵鈽夐姀鐘栤晠鏌曟竟顖氱Ф缁�濠囨⒒娴ｈ姤纭堕柛鐘茬Ф閸掓帒鈻庤箛锝囧姺閻熸粍姊规穱濠囧醇閺囩偟顔愭繛杈剧稻閻℃洟骞楅弴銏♀拺闁圭娴风粻鎾淬亜閿旇鐏ｇ紒顔碱煼楠炲酣鎳為妷褍骞楅梻浣哥秺閸嬪﹪宕滃璺虹厺闁哄洨鍠撶粻鍓э拷鐟板閸犳牠鐛Ο鑲╃＜閺夊牄鍔嶅畷宀�锟借娲樼敮鎺楋綖濠靛鏁嗗┑鐘插暙椤忓爼鎮峰鍛暭閻㈩垱甯炵划缁樺鐎涙鍘炬繝娈垮枟閸旀洟鏁撻懞銉疁闁诡垰鏈鍕箛椤撶姴骞嶉梻浣虹帛閸ㄦ儼鎽銈冨劜閻楃娀寮婚悢鍓叉Ч閹肩补锟藉啿绠ｉ梻浣芥〃閻掞箓宕濋弽顓炵畾闁哄倸绨遍弨浠嬫煕椤愮姴鐏柡鍛姂濮婂宕掑▎鎴М闂佺濮ょ划鎾崇暦閹达箑绠ｉ柨鏇嫹缂侊拷婢舵劖鐓欓弶鍫濆⒔閻ｈ京绱掗悩宕囧⒈闁跨喓鏅幊鎾讹拷姘嵆瀹曟垶绻濋崶銊ヤ簵闂侀潧顦弲婊堟偂閺囥垺鐓欓柟娈垮櫘閺嗘粓鏌熸搴″幋妞ゃ垺绋戣灒闁惧繘锟芥稓绀勯梻鍌欑閹碱偊鎯屾径宀�绀婂〒姘炬嫹闁搞劑绠栭弫鍐磼濮橀硸鍞洪梻浣告贡閸嬫捇宕滃顓烆嚤闁跨噦鎷� by changhao
				Long clanfightid = xtable.Roleid2clanfightid.select(roleId);
				if (clanfightid != null && npc.getNpcID() == ActivityClanFightManager.VICTORY_BOX)
				{
					fire.pb.clan.fight.ClanFightBattleField bf = fire.pb.clan.fight.ClanFightFactory.getClanFightBattleField(clanfightid, true);
					if (bf != null)
					{
						if (!bf.getClanfightBean().getEnterroleids().containsKey(roleId))
						{
							return false;
						}
						
						boolean ok = bf.IsWinnerSide(roleId, true);
						if (ok == true)
						{
							mkdb.Procedure.pexecuteWhileCommit(new fire.pb.clan.fight.PClanFightOpenChest(clanfightid, roleId, chestnpckey));
							return true;
						}
					}
					
					return false;
				}
				
				xbean.Properties prop = xtable.Properties.select(roleId);
				if (prop == null)
				{
					return false;
				}
				
				int mapid = role.getMapId();
				if (mapid == ClanUtils.MAPID && npc.getNpcID() == ActivityClanFightManager.CELEBRATE_BOX) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁橈耿瀵鏁愭径濠勵吅濠电姴鐏氶崝鏍礊濡ゅ懏鈷戦悹鎭掑妼閺嬫瑦淇婇銏狀伃鐎规洘鍔欏畷鐑筋敇閻樼數鍔归梻浣告贡閸庛倕螞閹达箑绠柣鎴ｅГ閺呮煡骞栫划鐧告嫹閼碱剙鍤┑鐘垫暩閸嬫盯骞婂畝鍕瀭闁芥ê顦藉鏍ㄧ箾瀹割喕绨奸柛銈呯Ч閺屾洘寰勬繝鍌涚亾婵炲瓨绮犳禍锝呂涢悢濂夋富闁靛牆妫涙晶閬嶆煕鐎ｎ偆鈽夐弫鍫ユ煛鐏炶鍔滈柍閿嬪灦閵囧嫰骞掗悙鏉戭伓缂傚倷绀侀ˇ閬嶅极婵犳艾绠栭柨鐔哄Т鍞梺鍐叉惈閸婂宕㈡禒瀣拺闁告繂瀚弳娆撴煕婵犲懎鍚归柡渚囧枛閳藉鈻庡鍕泿闂備線娼чˇ顓㈠磿閸濆嫀锝夋惞閸︻厾锛滈柡澶婄墑閸斿秶浜搁鐔翠簻闁瑰墽鍋ㄩ崑銏拷瑙勬处娴滎亜鐣峰锟介、姗�鎮欓弶鎴濆濠电姴鐥夐弶鍖℃嫹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋娆忕仼闁汇値鍠楅妵鍕箛閳轰礁濮㈡繛瀛樼矆缁瑥顫忓ú顏呭殥闁靛牆鎲涢姀锛勭婵炴潙顑嗗▍鍥瑰鍜佺劸闁宠閰ｉ獮瀣偐闂堟稓顔岄梻鍌欒兌缁垶宕濆Δ鍛？闁靛牆顦悡鏇㈡煙鐎电校闁哥姵鍔欓弻锝呂旈敓浠嬫偋閸℃瑧绠旈柟鐑樺殮閻熼偊鐓ラ柨鐔剁矙瀹曪繝骞庨挊澶庢憰濠电偞鍨堕…鍌炴偄閻撳簼绱堕梺鍛婃处閸撴瑩鏁撶粵瀣仯缂佽鲸鎸婚幏鍛矙閸栤剝瀚归柛锔诲幗閺嗘粓鏌嶉埡浣告殲闁告瑥绻橀弻銊╂偄閸撲胶鐓撻梺鍝勬湰濞茬喎鐣烽悡搴樻斀闁搞儴鍩栭ˉ鏃堟⒒娴ｅ摜绉洪柡锟介崡鐑嗘富濞寸姴顑呴拑鐔兼煥濠靛棙顥為柛搴ｅ枛閺屽秹鍩℃担鍛婃缂佺虎鍙忛幏閿嬬節閻㈤潧校妞ゆ梹鐗犲畷鏉款潩鐠虹儤鐎紓鍌欑劍鐪夌紒璇叉閺岀喓绱掗姀鐘崇亪缂備緤鎷烽柛鎰ㄦ杺娴滄粓鐓崶銊﹀鞍妞ゃ儳濞�閺屻劌鈽夊▎鎴犵厜闂佸搫鐭夌紞渚�骞冮埡鍌涚秶闁冲搫锕ヨⅵ濠电姷鏁告刊鎾箯閻戣棄绾ч柛顐ｇ濞呭懎鈹戦鍛⒋闁哄被鍔戦幃銏ゅ礈娴ｈ櫣鍘梻浣筋嚃閸犳銆冮崼銉ョ疅闁圭虎鍠栫粈瀣亜閹虹偞瀚瑰銈忚吂閺呯姴顫忓ú顏勭闁绘劖褰冮‖鍫ユ⒑缂佹澧遍柛妯犲浂鏁嬮柨婵嗩樈閺佸啴鏌ㄩ弴顏呭缂備胶濮撮…鐑藉箖濡ゅ懏顥堟繛鎴烇供濡苯鈹戦悙瀛樼稇閻庢矮鍗冲濠氭晲閸℃ê鍔呭銈嗙墬缁孩鐗庨梻鍌欒兌椤牓顢栭幋锕�绠柣鎴ｅГ閳锋垹鎲搁悧鍫濈瑲闁轰浇椴告穱濠囨倷閼告妫勫銈庡亜缁绘垹鎹㈠┑鍡╂僵妞ゆ帒鍋婄槐鍙夌節濞堝灝鏋熼柨姘憋拷瑙勬处閸撶喖濡撮崒鐐村仺闁告稑艌閹锋椽姊洪崨濠勭畵閻庢凹鍙冨畷铏鐎ｎ偆鍘遍柣搴秵閸撴瑩寮搁弮鍫熺厱闁圭儤鎸稿ù顔撅拷瑙勬礀閵堟悂鏁愰悙渚晩闁芥ê顦芥导鎾绘⒒娴ｇ懓顕滅紒璇插�归〃銉╁箹娴ｇ鍤戦梺缁樻煥閸氬鎮￠悢鍏肩厵闁诡垎鍛喖缂備緤鎷烽悗锝庡枟閻撴稓锟界櫢鎷烽悗锝庡墰閻﹀牓鎮楃憴鍕閻㈩垱甯￠崺鐐哄箣閿曪拷閻愬﹪鏌嶉悷鏉跨殹闁圭兘鏀辩换婵嬪炊閵娿垺瀚肩紓鍌氬�烽悞锕傛晪缂備焦顨嗙敮锟犲蓟閻斿吋鍤嶉柕澹懐鍘滈梻浣芥〃閻掞箓骞戦崶褏鏆﹂柟鎵閸嬪棗霉閿濆懏璐＄紒澶愭敱缁绘繈鎮介棃娑楁勃缂備椒鐒﹂幐鍐差嚕閹绘巻鏀介柛顐ゅ櫏濞肩喖姊虹紒妯哄闁宦板妽閸掑﹪骞橀鐣屽幈闂佸湱鍋撳娆戝緤缂佹绠鹃柛顐ｇ☉婵倹鎱ㄦ繝鍐┿仢鐎规洜鍏橀、姗�鍩勯崘鎾呮嫹濡ゅ懏鈷戦柛婵勫劚鏍″銈冨妼閿曘倝鎮鹃悜钘夌闁挎洩鎷风紒锟界�ｎ偁浜滈柟閭﹀枛閺嬫垿鏌￠崒锔藉闂傚倸鍊烽懗鍫曗�﹂崼銉ュ珘妞ゆ帒瀚粈鍕煟閻旂鐝楅柨婵嗩槸瀹告繂鈹戦悩鎻掝伀妞ゆ梹娲熷娲礈閹绘帊绨肩紓浣筋嚙閸婂潡鐛崘顔肩闁绘鏁搁敍婊呯磽閸屾瑧鍔嶆い顓炴川缁骞樼紒妯煎帗缂傚倷鐒﹁摫鐎规洖鐬奸敓鍊燁潐濞叉牜绱炴繝鍥ワ拷浣糕枎閹炬潙浠奸柣蹇曞仜閸氬宕板鑸碘拻闁稿本鑹鹃敓鐣屽厴閹偤鏁傞幘鍛缂佹绋戦崢鐐偊鐠恒劎鏉稿┑鐐村灦閿氶柣搴弮濮婅櫣绮欓崠鈥冲闂佸摜濮甸幑鍥箖閵忋倕宸濋悗娑櫱氶幏缁樼箾鏉堝墽瀵奸悹锟介敃鍌涘�垮Δ锝呭暞閻撶喐銇勯幒鐐村闂侀潧鐗忛…鍫ユ偩閻戣棄绠ｆ繝闈涘暞椤秴鈹戦埥鍡楃仯闁稿鍨跺畷鎯邦槾闁绘挻鍨剁换婵嬪閿濆棛銆愰梺娲诲墮閵堟悂銆佸▎鎾冲嵆闁靛繆妾ч幏铏圭磽娓氬洤鐏℃繛鍙夌墬閺呭爼寮婚妷锕�鐝旈梻渚囧墮缁夌敻宕愰崼鏇犲彄闁搞儜鍥讹拷妤冿拷瑙勬尭濡繈寮婚垾宕囨殕閻庯綆鍓涜ⅵ婵°倗濮烽崑鐐衡�﹂崶顒佹櫢闁兼亽鍎抽埦浣广亜椤撶偞鍠橀挊婵喢归悡搴ｆ憼闁抽攱鍨块弻娑樷攽閸℃浼傚銈庡亾缁犳捇寮诲☉銏犵睄闁跨喍绮欏畷褰掑锤濡ゅ啫绁﹂梺鍛婂姦閸犳牕娲垮┑鐘灱濞夋盯鏁冮敃鍌涙櫖婵犲﹤鍟犻弨浠嬫煟閹邦厽缍戦柣蹇ョ畵閺屻劑寮村Δ浣圭彆闁诲酣娼ч妶鎼佸极閹剧粯鏅搁柨鐕傛嫹? by changhao
				{
					xbean.ClanInfo clanInfo = ClanUtils.getClanInfoById(roleId, true);
					if (clanInfo == null)
					{
						return false;
					}
						
					long clanid = clanInfo.getKey();
					xbean.EClanfightids ids = xtable.Clanid2clanfightids.select(clanid);
					for (Long i : ids.getIds())
					{
						fire.pb.clan.fight.ClanFightBattleField bf = fire.pb.clan.fight.ClanFightFactory.getClanFightBattleField(i, true);
						if (bf != null)
						{
							long day1 = 24 * 60 * 60 * 1000;
							long cur = System.currentTimeMillis();
							long t = bf.getClanfightBean().getDatetime() + day1;
							
							if(DateValidate.inTheSameDay(t, cur))
							{
								if (!bf.getClanfightBean().getEnterroleids().containsKey(roleId))
								{
									MessageMgr.sendMsgNotify(roleId, 410050, null); //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愰崨鍌滃枎閳诲酣骞嗚椤斿嫮绱撻崒娆掑厡濠殿喗鎸抽幃妯侯潩鐠轰綍锕傛煕閺囥劌鏋ら柣銈忔嫹闂備礁婀遍崑鎾诲箚鐏炶娇娑㈡倷閻㈢數锛濇繛杈剧悼閺咁偊宕奸鍫熺厱濠电姴鍟扮粻鐐碉拷娈垮枛椤兘骞冮姀銈嗘優闁革富鍘鹃崢顖炴⒒娴ｇ顥忛柣鎾崇墦瀹曟娊顢氶敓钘夌暦濠靛洤绶為柟閭﹀幐閹锋椽姊洪崨濠勨槈闁挎洩绠撻獮濠囧礃椤忓棛锛滅紓鍌欑劍閿曨偊鎳撶捄顭掓嫹濞堝灝鏋涙い顓犲厴瀵偊骞囬鐐电獮婵犵數濮寸�涒晝绱為崒鐐粹拻濞达綀娅ｇ敮娑㈡煥濮樿埖鐓曢柣鏃堟敱閸嬨儳锟芥鍠楁繛濠傜暦婵傜唯闁挎棁顫夌�氳偐绱撻崒娆戭槮妞ゆ垵鎳庨…鍥晸閻欙拷閺佷焦淇婇妶鍕濞存粍绮撻弻銊╁籍閸屾矮澹曢梺鍝勬－閸撴盯鏁撻懞銉晱闁哥姵鐩、姘愁樄闁糕斂鍎插鍕箾閵忋垹鏋涢柡灞诲妿閿熸枻绲介悘姘辩礊鐏炶В鏀介柣妯虹仛閺嗏晠鏌涚�ｎ偆鈽夐摶鐐寸箾閸℃ɑ灏紒锟芥径瀣╃箚闁靛牆鎳庨弳鐔兼煟椤撶喓鎳囬柡灞剧洴婵＄兘顢欓悡搴浇闂備胶绮幐楣冨窗閺嶎厾宓侀柡宥庣仈鎼搭煈鏁嗛柨鐔剁矙閹﹢宕￠悜鍡欏數闁荤喐鐟ユ刊鍫曞箣閿曪拷妗呴梺鍛婃处閸ㄩ亶寮插鍫熷仯闁搞儺浜滈惃鍝劽归悩铏�愭慨濠冩そ閹瑩鎸婃径濠傂ュ┑鐘殿暯閿熷�熸珪閸犳ɑ顨ラ悙鏉戠伌鐎规洜鍠栭、娑樞掔亸鏍ㄦ珚闁哄被鍔戝鎾敂閸涱収浼撶紓鍌欑婢т粙鎼规惔銊ュ瀭閻犺桨璀﹀鏍煣韫囨挻璐＄痪鎯у悑娣囧﹪顢涘┑鍥朵哗婵炲濮甸幃鍌炲蓟閿曞倸绀冩い鎾寸箓閹牓姊虹捄銊ユ瀻闁跨喓鏅崳銉ヮ焽閹邦厾绠鹃柛娆忥純閹寸姵宕叉繛鎴炵懅缁★拷闂佺琚崐鏍礊鎼粹檧鏀介柣鎰级閳绘洖霉濠婂嫮绠為挊鐔兼煕椤愩倕鏋旂紒鐘荤畺閺岀喓锟界數顭堟禒鈺侇熆鐟欏嫸鑰块柡灞界Т閻ｏ繝骞嶉灏栧徍婵犳鍠栭敃銊モ枍閿濆洤鍨濇繛鍡楃箚閺嬪酣鏌熼鍡楀暙椤ュ秹姊婚崒娆戝妽閻庣瑳鍏犳椽鏁傞悾宀婃锤濠电姴锕ら悧婊堝极鐎ｎ喗鐓ユ繝闈涙椤ョ姷绱掗埥鍛濠电姵顔栭崰妤呮晝閳哄懎绀堟繛鎴炵懃椤曢亶鎮楅敐搴℃灍闁抽攱鍨归幉鎼佹偋閸繀鍒婇梺鍝勬鐢偟妲愰幒妤佹櫢闁兼亽鍎抽悷褰掓煥閻斿墎鐭欓柣娑卞櫍瀹曟﹢顢欓懖鈺婂悈闂備焦瀵уΛ浣筋暰闂佸綊鏀卞钘夘潖濞差亜宸濆┑鐘插濡插牓姊洪幐搴㈢┛缂佹彃鐏濋埢搴ㄥ閵堝棛鍔堕悗骞垮劚濡盯宕㈤崡鐐╂斀闁宠棄妫楅悘鐘崇節閿熶粙鏌嗗鍡楀壒濠电偛妫欓崺濠囧箯妞嬪孩鍠嗛柛鏇ㄥ墰椤︺劑姊洪崨濠冣拹闁荤啿鏅犳俊瀛樻媴缁洘顫嶉梺闈涚箚閿熺晫顒查幏鐑芥倻閼恒儱锟界敻鏌ｉ姀鈽嗗晱闁绘帞鍋撻〃銉╂倷閹碱厽鐤佸┑顔硷攻濡炰粙骞冮悜钘夌骇闁圭楠搁敓绛嬪灦濮婅櫣鎷犻垾宕囦哗闂佹椿鍘奸崐鎼佹偩閻戣姤鍋￠柟娈垮枟濞堥箖姊洪幖鐐插姉闁哄懏绻堥幃锛勶拷锝庡枟閳锋垿鏌涢幘鏉戠祷濞存粍绻冪换娑㈠矗婢舵稖锟藉潡鏌熼鐧告嫹閺傘儲鐎婚棅顐㈡祫缁插墽锟介潧鐭傞弻锝嗘償椤栨粎校婵炲瓨绮犳禍顏堛�侀幘婢勬棃宕ㄩ鎯у箞婵犵妲呴崹闈涒枍閿濆绠洪柣妯肩帛閻撴瑥銆掑顒備虎濠碉紕鏅槐鎺旂磼濡偐鐤勯悗瑙勬礃閿曘垽宕洪悙鏉戠窞婵繂鏈妤佺節閻㈤潧啸妞わ綀妫勫嵄闁告稒娼欑壕濠氭煕閺囥劌鐏犻柣銈庡櫍閺岀喓绱掗姀鐘崇亪闂佸搫瀚ㄩ崕鐢稿蓟閵娾晜鍋勯柛婵嗗珔閵忋垻妫柟顖嗗啯鍊梺閫涚┒閸斿矂锝炲鍫熸櫢闁芥ê锛夊☉姘磯闁靛瀵屽鐔兼⒑鐠恒劌娅愰柟鍑ゆ嫹? by changhao	
									return false;
								}
								
								boolean ok = bf.IsWinnerSide(roleId, true);
								if (ok == true)
								{
									mkdb.Procedure.pexecuteWhileCommit(new fire.pb.clan.fight.PClanFightOpenChest(bf.getClanfightBean().getClanfightid(), roleId, chestnpckey));
									return true;
								}
								
								MessageMgr.sendMsgNotify(roleId, 410050, null); //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愰崨鍌滃枎閳诲酣骞嗚椤斿嫮绱撻崒娆掑厡濠殿喗鎸抽幃妯侯潩鐠轰綍锕傛煕閺囥劌鏋ら柣銈忔嫹闂備礁婀遍崑鎾诲箚鐏炶娇娑㈡倷閻㈢數锛濇繛杈剧悼閺咁偊宕奸鍫熺厱濠电姴鍟扮粻鐐碉拷娈垮枛椤兘骞冮姀銈嗘優闁革富鍘鹃崢顖炴⒒娴ｇ顥忛柣鎾崇墦瀹曟娊顢氶敓钘夌暦濠靛洤绶為柟閭﹀幐閹锋椽姊洪崨濠勨槈闁挎洩绠撻獮濠囧礃椤忓棛锛滅紓鍌欑劍閿曨偊鎳撶捄顭掓嫹濞堝灝鏋涙い顓犲厴瀵偊骞囬鐐电獮婵犵數濮寸�涒晝绱為崒鐐粹拻濞达綀娅ｇ敮娑㈡煥濮樿埖鐓曢柣鏃堟敱閸嬨儳锟芥鍠楁繛濠傜暦婵傜唯闁挎棁顫夌�氳偐绱撻崒娆戭槮妞ゆ垵鎳庨…鍥晸閻欙拷閺佷焦淇婇妶鍕濞存粍绮撻弻銊╁籍閸屾矮澹曢梺鍝勬－閸撴盯鏁撻懞銉晱闁哥姵鐩、姘愁樄闁糕斂鍎插鍕箾閵忋垹鏋涢柡灞诲妿閿熸枻绲介悘姘辩礊鐏炶В鏀介柣妯虹仛閺嗏晠鏌涚�ｎ偆鈽夐摶鐐寸箾閸℃ɑ灏紒锟芥径瀣╃箚闁靛牆鎳庨弳鐔兼煟椤撶喓鎳囬柡灞剧洴婵＄兘顢欓悡搴浇闂備胶绮幐楣冨窗閺嶎厾宓侀柡宥庣仈鎼搭煈鏁嗛柨鐔剁矙閹﹢宕￠悜鍡欏數闁荤喐鐟ユ刊鍫曞箣閿曪拷妗呴梺鍛婃处閸ㄩ亶寮插鍫熷仯闁搞儺浜滈惃鍝劽归悩铏�愭慨濠冩そ閹瑩鎸婃径濠傂ュ┑鐘殿暯閿熷�熸珪閸犳ɑ顨ラ悙鏉戠伌鐎规洜鍠栭、娑樞掔亸鏍ㄦ珚闁哄被鍔戝鎾敂閸涱収浼撶紓鍌欑婢т粙鎼规惔銊ュ瀭閻犺桨璀﹀鏍煣韫囨挻璐＄痪鎯у悑娣囧﹪顢涘┑鍥朵哗婵炲濮甸幃鍌炲蓟閿曞倸绀冩い鎾寸箓閹牓姊虹捄銊ユ瀻闁跨喓鏅崳銉ヮ焽閹邦厾绠鹃柛娆忥純閹寸姵宕叉繛鎴炵懅缁★拷闂佺琚崐鏍礊鎼粹檧鏀介柣鎰级閳绘洖霉濠婂嫮绠為挊鐔兼煕椤愩倕鏋旂紒鐘荤畺閺岀喓锟界數顭堟禒鈺侇熆鐟欏嫸鑰块柡灞界Т閻ｏ繝骞嶉灏栧徍婵犳鍠栭敃銊モ枍閿濆洤鍨濇繛鍡楃箚閺嬪酣鏌熼鍡楀暙椤ュ秹姊婚崒娆戝妽閻庣瑳鍏犳椽鏁傞悾宀婃锤濠电姴锕ら悧婊堝极鐎ｎ喗鐓ユ繝闈涙椤ョ姷绱掗埥鍛濠电姵顔栭崰妤呮晝閳哄懎绀堟繛鎴炵懃椤曢亶鎮楅敐搴℃灍闁抽攱鍨归幉鎼佹偋閸繀鍒婇梺鍝勬鐢偟妲愰幒妤佹櫢闁兼亽鍎抽悷褰掓煥閻斿墎鐭欓柣娑卞櫍瀹曟﹢顢欓懖鈺婂悈闂備焦瀵уΛ浣筋暰闂佸綊鏀卞钘夘潖濞差亜宸濆┑鐘插濡插牓姊洪幐搴㈢┛缂佹彃鐏濋埢搴ㄥ閵堝棛鍔堕悗骞垮劚濡盯宕㈤崡鐐╂斀闁宠棄妫楅悘鐘崇節閿熶粙鏌嗗鍡楀壒濠电偛妫欓崺濠囧箯妞嬪孩鍠嗛柛鏇ㄥ墰椤︺劑姊洪崨濠冣拹闁荤啿鏅犳俊瀛樻媴缁洘顫嶉梺闈涚箚閿熺晫顒查幏鐑芥倻閼恒儱锟界敻鏌ｉ姀鈽嗗晱闁绘帞鍋撻〃銉╂倷閹碱厽鐤佸┑顔硷攻濡炰粙骞冮悜钘夌骇闁圭楠搁敓绛嬪灦濮婅櫣鎷犻垾宕囦哗闂佹椿鍘奸崐鎼佹偩閻戣姤鍋￠柟娈垮枟濞堥箖姊洪幖鐐插姉闁哄懏绻堥幃锛勶拷锝庡枟閳锋垿鏌涢幘鏉戠祷濞存粍绻冪换娑㈠矗婢舵稖锟藉潡鏌熼鐧告嫹閺傘儲鐎婚棅顐㈡祫缁插墽锟介潧鐭傞弻锝嗘償椤栨粎校婵炲瓨绮犳禍顏堛�侀幘婢勬棃宕ㄩ鎯у箞婵犵妲呴崹闈涒枍閿濆绠洪柣妯肩帛閻撴瑥銆掑顒備虎濠碉紕鏅槐鎺旂磼濡偐鐤勯悗瑙勬礃閿曘垽宕洪悙鏉戠窞婵繂鏈妤佺節閻㈤潧啸妞わ綀妫勫嵄闁告稒娼欑壕濠氭煕閺囥劌鐏犻柣銈庡櫍閺岀喓绱掗姀鐘崇亪闂佸搫瀚ㄩ崕鐢稿蓟閵娾晜鍋勯柛婵嗗珔閵忋垻妫柟顖嗗啯鍊梺閫涚┒閸斿矂锝炲鍫熸櫢闁芥ê锛夊☉姘磯闁靛瀵屽鐔兼⒑鐠恒劌娅愰柟鍑ゆ嫹? by changhao	
								return false;
							}
						}
					}
					
					MessageMgr.sendMsgNotify(roleId, 410050, null); //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愰崨鍌滃枎閳诲酣骞嗚椤斿嫮绱撻崒娆掑厡濠殿喗鎸抽幃妯侯潩鐠轰綍锕傛煕閺囥劌鏋ら柣銈忔嫹闂備礁婀遍崑鎾诲箚鐏炶娇娑㈡倷閻㈢數锛濇繛杈剧悼閺咁偊宕奸鍫熺厱濠电姴鍟扮粻鐐碉拷娈垮枛椤兘骞冮姀銈嗘優闁革富鍘鹃崢顖炴⒒娴ｇ顥忛柣鎾崇墦瀹曟娊顢氶敓钘夌暦濠靛洤绶為柟閭﹀幐閹锋椽姊洪崨濠勨槈闁挎洩绠撻獮濠囧礃椤忓棛锛滅紓鍌欑劍閿曨偊鎳撶捄顭掓嫹濞堝灝鏋涙い顓犲厴瀵偊骞囬鐐电獮婵犵數濮寸�涒晝绱為崒鐐粹拻濞达綀娅ｇ敮娑㈡煥濮樿埖鐓曢柣鏃堟敱閸嬨儳锟芥鍠楁繛濠傜暦婵傜唯闁挎棁顫夌�氳偐绱撻崒娆戭槮妞ゆ垵鎳庨…鍥晸閻欙拷閺佷焦淇婇妶鍕濞存粍绮撻弻銊╁籍閸屾矮澹曢梺鍝勬－閸撴盯鏁撻懞銉晱闁哥姵鐩、姘愁樄闁糕斂鍎插鍕箾閵忋垹鏋涢柡灞诲妿閿熸枻绲介悘姘辩礊鐏炶В鏀介柣妯虹仛閺嗏晠鏌涚�ｎ偆鈽夐摶鐐寸箾閸℃ɑ灏紒锟芥径瀣╃箚闁靛牆鎳庨弳鐔兼煟椤撶喓鎳囬柡灞剧洴婵＄兘顢欓悡搴浇闂備胶绮幐楣冨窗閺嶎厾宓侀柡宥庣仈鎼搭煈鏁嗛柨鐔剁矙閹﹢宕￠悜鍡欏數闁荤喐鐟ユ刊鍫曞箣閿曪拷妗呴梺鍛婃处閸ㄩ亶寮插鍫熷仯闁搞儺浜滈惃鍝劽归悩铏�愭慨濠冩そ閹瑩鎸婃径濠傂ュ┑鐘殿暯閿熷�熸珪閸犳ɑ顨ラ悙鏉戠伌鐎规洜鍠栭、娑樞掔亸鏍ㄦ珚闁哄被鍔戝鎾敂閸涱収浼撶紓鍌欑婢т粙鎼规惔銊ュ瀭閻犺桨璀﹀鏍煣韫囨挻璐＄痪鎯у悑娣囧﹪顢涘┑鍥朵哗婵炲濮甸幃鍌炲蓟閿曞倸绀冩い鎾寸箓閹牓姊虹捄銊ユ瀻闁跨喓鏅崳銉ヮ焽閹邦厾绠鹃柛娆忥純閹寸姵宕叉繛鎴炵懅缁★拷闂佺琚崐鏍礊鎼粹檧鏀介柣鎰级閳绘洖霉濠婂嫮绠為挊鐔兼煕椤愩倕鏋旂紒鐘荤畺閺岀喓锟界數顭堟禒鈺侇熆鐟欏嫸鑰块柡灞界Т閻ｏ繝骞嶉灏栧徍婵犳鍠栭敃銊モ枍閿濆洤鍨濇繛鍡楃箚閺嬪酣鏌熼鍡楀暙椤ュ秹姊婚崒娆戝妽閻庣瑳鍏犳椽鏁傞悾宀婃锤濠电姴锕ら悧婊堝极鐎ｎ喗鐓ユ繝闈涙椤ョ姷绱掗埥鍛濠电姵顔栭崰妤呮晝閳哄懎绀堟繛鎴炵懃椤曢亶鎮楅敐搴℃灍闁抽攱鍨归幉鎼佹偋閸繀鍒婇梺鍝勬鐢偟妲愰幒妤佹櫢闁兼亽鍎抽悷褰掓煥閻斿墎鐭欓柣娑卞櫍瀹曟﹢顢欓懖鈺婂悈闂備焦瀵уΛ浣筋暰闂佸綊鏀卞钘夘潖濞差亜宸濆┑鐘插濡插牓姊洪幐搴㈢┛缂佹彃鐏濋埢搴ㄥ閵堝棛鍔堕悗骞垮劚濡盯宕㈤崡鐐╂斀闁宠棄妫楅悘鐘崇節閿熶粙鏌嗗鍡楀壒濠电偛妫欓崺濠囧箯妞嬪孩鍠嗛柛鏇ㄥ墰椤︺劑姊洪崨濠冣拹闁荤啿鏅犳俊瀛樻媴缁洘顫嶉梺闈涚箚閿熺晫顒查幏鐑芥倻閼恒儱锟界敻鏌ｉ姀鈽嗗晱闁绘帞鍋撻〃銉╂倷閹碱厽鐤佸┑顔硷攻濡炰粙骞冮悜钘夌骇闁圭楠搁敓绛嬪灦濮婅櫣鎷犻垾宕囦哗闂佹椿鍘奸崐鎼佹偩閻戣姤鍋￠柟娈垮枟濞堥箖姊洪幖鐐插姉闁哄懏绻堥幃锛勶拷锝庡枟閳锋垿鏌涢幘鏉戠祷濞存粍绻冪换娑㈠矗婢舵稖锟藉潡鏌熼鐧告嫹閺傘儲鐎婚棅顐㈡祫缁插墽锟介潧鐭傞弻锝嗘償椤栨粎校婵炲瓨绮犳禍顏堛�侀幘婢勬棃宕ㄩ鎯у箞婵犵妲呴崹闈涒枍閿濆绠洪柣妯肩帛閻撴瑥銆掑顒備虎濠碉紕鏅槐鎺旂磼濡偐鐤勯悗瑙勬礃閿曘垽宕洪悙鏉戠窞婵繂鏈妤佺節閻㈤潧啸妞わ綀妫勫嵄闁告稒娼欑壕濠氭煕閺囥劌鐏犻柣銈庡櫍閺岀喓绱掗姀鐘崇亪闂佸搫瀚ㄩ崕鐢稿蓟閵娾晜鍋勯柛婵嗗珔閵忋垻妫柟顖嗗啯鍊梺閫涚┒閸斿矂锝炲鍫熸櫢闁芥ê锛夊☉姘磯闁靛瀵屽鐔兼⒑鐠恒劌娅愰柟鍑ゆ嫹? by changhao	
					return false;
				}					
/////////////////////////////////////////////
				
				int biaoId = TimerNpcService.getInstance().getEventId(npc.getNpcID());
				
				int opentimes = chestcfg.getOpentimes();
				
				final long currentTime = System.currentTimeMillis();
				
				fire.pb.team.Team team = fire.pb.team.TeamManager.selectTeamByRoleId(roleId);
				if (null != team && team.isTeamLeader(roleId) && chestcfg.getOpenteam() == 1) {
					// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎娆戠┛闂傚倷娴囧▔鏇㈠窗閹版澘鍑犻柤濮愬�楁稉宥夋煙閹咃紞闁哄棴绠戦埞鎴﹀磼濠婂海鍔稿銈庡亜閹虫﹢寮诲澶娢ㄩ柕澶堝劜濮ｆ劗绱撴担闈涘Ω闁稿酣娼ч～蹇曠磼濡顎撶紓浣割儐椤戞瑥螞瀹�鍕拺缂佸顑欓崕搴ｇ磼閼镐絻澹橀柣锝囧厴瀵挳鎮㈤崫銉ら梻浣稿暱閹碱偊宕导瀛樺�块柛蹇氬亹缁★拷闂侀潧楠忕徊浠嬫偂閹扮増鐓曢柡鍐挎嫹闁绘濞�楠炲啴鍨鹃弬銉︾�婚梺鍦亾濞兼瑩鏁撻挊澶屼粵缂佺粯鐩獮瀣倻閸℃洜绀傞梻浣侯攰閹活亞绮婚幋鐘差棜闁秆勵殕閻撴盯鏌涢妷锝呭姎闁诲浚浜弻锝夊箻閸楃偛濮曠紓浣虹帛缁诲牆螞閸愩劉妲堟繛鍡樼懅缁�濠冪節绾版ê澧茬憸鏉垮暟缁辩偞绻濋崶褑鎽曢梺璺ㄥ枔婵潙顔忓┑鍥ヤ簻闁哄倸鐏濋埛鏃堟煟閵堝懎顏慨濠冩そ瀹曨偊宕熼鍛晧闂備礁鎲″褰掑垂閸ф宓侀柛鎰靛枛椤懘鏌曢崼婵囧櫧妞わ富鍘界换娑欐綇閸撗呅氬┑鐐叉嫅缂嶄礁鐣烽姀銈庢晬闁绘劗琛ラ幏缁樼箾鏉堝墽鎮奸柟铏崌椤㈡艾顭ㄩ崨顖滐紲闁荤姴娲﹁ぐ鍐敂椤撶媴鎷风憴鍕闁搞劍瀵ф穱濠囧醇閺囩偛鑰垮┑鈽嗗灠閹碱偅瀵兼惔銊︹拻濞达綀濮ょ涵鍫曟煕閻樿尙肖闁告帗甯掗埢搴ㄥ箻鐎圭姵鎲伴梻浣告惈濞层垽宕硅ぐ鎺撶厑闁搞儯鍔庣弧锟介梻鍌氱墛缁嬫帞绮婇埡鍌欑箚妞ゆ劗鍣﹂幏鐑藉棘閵夛附鏉搁梻浣虹帛閸旀洖顕ｉ崼鏇為棷闁惧繐婀辩壕鍏笺亜閺冨洤袚閻忓浚鍘介妵鍕敃閵忋垻顔囬柣鎾卞�栭妵鍕疀閹炬剚浠肩紓浣瑰姈缁嬫帞鎹㈠┑瀣仺闂傚牊鍒�閿熺姵鐓犻柛鎰絻椤ｆ娊鏌熼獮鍨仾缂佹鍠栭弫鎾绘寠婢舵ɑ缍庡┑鐐叉▕娴滄粎绮昏ぐ鎺撶厽闁归偊鍘肩徊缁樸亜椤掞拷濡繂顫忓ú顏勫窛濠电姴瀛╅悾閿嬬節閻㈤潧浠滈柨鏇ㄤ邯閹即顢氶敓钘夌暦濮楋拷椤㈡瑩鎳為妷锔讳户闂傚倷鑳剁划顖炩�﹂崼顫剨婵炲棙鎼╅弫鍥ㄧ箾瀹割喕绨奸柍閿嬪灴閺岀喓绮欓崹顕呭妷濡炪們鍎卞Λ娑㈠箖椤斿皷鏋庨柟鎯ь嚟閸樼敻姊哄Ч鍥э拷銈夊垂闁稁鏁傞柣妯兼暩绾惧ジ寮堕崼娑樺鐎规洖鐬奸敓鍊燁潐濞叉鏁幒妤�鐓濋幖娣妼缁狅絾绻濋棃娑欙紞闁诲孩鎸冲濠氬磼濞嗘垵濡介柣搴ｇ懗閸忕姴鎼鍏煎緞婵犲嫭鐓ｉ梻浣虹帛椤牓顢氳缁寮介鐔哄幗闂佸綊鍋婇崢楣冨汲濮楋拷閺屾稓锟斤綆浜濋崵鍥煛鐏炲墽娲存鐐叉喘婵℃悂鏁傞悾灞界悼闂傚倷绀侀幉锟犳晝閵忥紕顩查悹杞拌濞兼牗绻涘顔荤盎缂侊拷閸愵喗鐓曟繛鍡楁禋濡插綊鏌涙惔銏″碍妞ゎ亜鍟存俊鍫曞幢濡ゅ啩娣繝纰樻閸嬪懘鎯勯鐐叉瀬闁瑰墽绮崵宥夋煏婢诡垰鍟▓褰掓⒒娴ｇ儤鍤�闁搞倖鐗犻獮蹇涙晸閿燂拷?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐鍛傜喎鈻庨幆褎顔勭紓鍌欒兌婵挳鎮樺璺何﹂柛鏇ㄥ枤閻わ拷闂佸湱鍋撻幆灞轿涢悙鐢电＝濞达絿鏅崼顏堟煕婵犲啰绠炵�殿喛顕ч埥澶婎煥鎼粹懣顏呬繆閻愵亜锟芥垿宕濆畝鍕疇闁归偊鍠栭崹婵嗏攽閻樺磭顣查柛瀣姉缁辨挻鎷呯拠锛勫姺闂佸憡顭囬弫璇差潖濞差亜宸濆┑鐘插暙閻︾兘姊洪崨濠佺繁闁告﹢绠栭、鏇熺附閸涘ň鎷绘繛杈剧导鐠�锕傛倿妤ｅ啯鐓ラ柡鍥敓鑺ョ箞楠炲啴濡烽敂楣冩缂備礁顑堥崕濠氬箺閺囩偐鏀介柣鎰綑閻忕喖鏌涢妸褎鍤�闁轰緡鍠楁穱濠囨倷椤忓嫸鎷烽弽褜娼栧┑鐘宠壘閸屻劎鎲搁弮鍫熸櫜闁绘劒璀﹂弫鍌炴煕椤愩倕鏆遍柟鐤缁辨捇宕掑▎鎴濆闁藉啴浜堕幃妯跨疀閺囩儐鏆紓浣虹帛閻╊垶骞婇悩娲绘晢闁跨喍绮欏绋库槈濮樼偓瀚规繛鍫濈仢閺嬫稒銇勯銏℃暠濞ｅ洤锕獮鏍ㄦ媴閸濄儱骞愰梻浣侯焾閺堫剟鎯岄鎹愬С濞寸姴顑嗛埛鎺懨归敐鍕劅闁绘帡绠栭弻锟犲醇椤愩垹顫紓渚囧枟閻熲晠鐛�ｎ喗鏅滅紓浣股戝▍鍡涙⒒娴ｈ姤纭堕柛锝忕畵楠炲繘鏁撻敓锟�? 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柛銊ュ�歌灃闁挎繂鎳庨弳娆戠磼閻樺磭鈽夐棁澶愭煥濠靛棙鍣洪悹鎰剁磿缁辨帞锟斤絺鏅為崗宀�绱掓潏銊﹀磳鐎规洘甯掗～婵嬵敆婵犲啫顏堕梺缁樺灱婵倝宕愰崸妤佺叆闁哄洨鍋涢敓鐣屾暬閺佹捇寮妶鍥╂殼閻庤娲栭悥濂稿春閿熺姴绀冪憸蹇涙偡濠靛棌鏀介幒鎶藉磹瑜忓濠冪鐎ｎ亞鏌堝銈嗙墱閸嬬偤宕戦崒鐐寸厪濠㈣泛妫欏▍鍡涙煟閹捐泛鏋涢柡宀嬬節瀹曟帒顫濋崣妯挎婵＄偑鍊х徊鐐箾婵犲洤钃熼柨婵嗩樈閺佸洭鏌ｉ弮鍌氬妺闁革絼鍗冲娲传閸曨偒妲甸梺璺ㄥ枙濡嫮澹曢銏犳辈闁糕剝绋掗崐鐢告煥濠靛棝顎楀褌鍗抽弻锝夋晝閿熶粙鎮ч幘鎰佹綎闁绘垶蓱婵粓鏌熷▓鍨灈濠碘�茬矙濮婅櫣鎲撮崟顓熸啓閻庤娲滈弫鎼佸礆閹烘棑鎷烽敐搴℃灈缂佺姵濞婇弻锟犲礃閳哄倸闉嶉柣搴㈣壘缂嶅﹪寮婚妸銉㈡斀闁糕剝渚楅敓鑺ヮ殔闇夋繝濠傚缁犳牜绱掔紒妯兼创鐎规洏鍔戦、鏇㈠椤厾绀勫┑鐘愁問閸犳牠鏁冮妸銉㈡瀺闁挎繂顦粻鏌ユ煕閺囥劌鐏犻幆鐔兼⒑闂堟侗妾у┑鈥虫穿閵囨劕顫濋懜纰樻嫽婵炶揪绲块崕銈夊吹閿熶粙姊洪幖鐐诧拷鏍偋閻樿崵宓侀煫鍥ㄧ♁閺呮悂鏌ㄩ悤鍌涘
					final java.util.List<Long> members = team.getNormalMemberIds();
					this.lock(xtable.Locks.ROLELOCK, members);
					
					{
						xbean.BaoXiangInfo baoxiangInfo = xtable.Rolekaibaoxiang.select(roleId);
						if (baoxiangInfo != null) {
							if (DateValidate.inTheSameDay(baoxiangInfo.getLastopentime(), currentTime)) {
									if (baoxiangInfo.getOpentimes() >= opentimes) {
										MessageMgr.psendMsgNotifyWhileRollback(roleId, 166004, null);
										return false;
									}
							}	
						}
						int rolelevel = xtable.Properties.selectLevel(roleId);
						if (chestcfg.openlevel > rolelevel) {
							//缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鏁愭径濠勵吅闂佹寧绻傞幉娑㈠箻缂佹鍘辨繝鐢靛Т閸婂綊宕戦妷鈺傜厸閻忕偠顕ф慨鍌滐拷娈垮櫘閸撶喎鐣疯ぐ鎺濇晩閻熸瑥瀚惁閬嶆⒒閸屾瑧鍔嶆俊鐐叉健瀹曘垺绂掔�ｎ偄浠梺鍐叉惈閹冲酣鎷戦悢鍏肩厽闁哄倽娉曞▓閬嶆煛鐎ｎ亪鍙勬慨濠佺矙瀹曞爼顢楁径瀣珨闁荤喐绮岀粔鍫曞矗閸涘瓨鈷戦柟绋垮缁屽潡鏌熼悜鑺ユ暠闁靛洤瀚伴、姗�鎮欑�电硶鏁嶇紓鍌欒兌婵數绮欓幋锕�鐓″鑸靛姇缁犳娊鏌ｉ幇顓熺稇妞ゅ繐鐖煎娲箰鎼淬垻顦ラ梺绋匡工閹芥粎鍒掓繝姘櫜濠㈣泛顑囬崢浠嬫⒑閻熸壆鎽犵紒璇插暣钘熸繝濠傜墛閻撴盯鏌涘锟界粈浣规櫠鐎涙ɑ鍙忓┑鐘插亞閻撹偐锟借娲樼敮鎺楀煝鎼淬劌绠ｆ繝闈涙－閻庢挳姊婚崒娆愮グ妞ゆ洘鐗犲畷浼村冀椤撶喎浜梺缁樻尭濞寸兘寮抽敃鍌涚厸闁搞儯鍎遍悞娲煛娴ｅ摜效闁哄矉缍侀獮鍥敍濮樿鲸顕楁俊鐐�х�靛矂宕抽敐澶婅摕闁绘梻鍘х粈鍌炴煠濞村娅嗘繛鍫墴濮婃椽宕ㄦ繝鍐弳闂佹椿鍘奸崐鍧楃嵁閸愵喖鐏抽柡鍌樺劜閺傦拷闂佽鍑界紞鍡涘磻閸℃稑鍌ㄩ柟闂寸劍閳锋垿鏌涘☉姗堝伐濠殿喖鍊块弻娑㈠棘閹稿孩鎷辩紓浣稿�哥粔鐢碉拷浣冨亹閿熻姤绋掗…鍥储閸偂绻嗛柣鎰▕閸庡繐螖閻樿櫕鍊愮�规洏鍨介獮姗�顢欓悾灞藉箺婵犵數鍋為崹闈涚暦椤掞拷閳诲秴顓奸崶閿嬪閻熸瑥瀚粈锟界紓鍌氱Т閿曨亪濡存担绯曟瀻闁圭偓娼欐禍妤呮煙閸忓吋鍎楅柛鐘愁殘缁辩偤骞樼紒妯锋嫽闂佺鏈懝楣冩晸閻ｅ苯鍘撮柟铏殜瀹曟粍鎷呯粙璺ㄤ喊婵＄偑鍊栭悧婊堝磻閹达附鏅搁柦妯侯槸閺嗭絿锟借娲忛崝鎴︺�佸锟藉畷鍫曞Ω瑜夊Σ鍫ユ⒑鐎圭媭娼愰柛銊ョ仢閻ｇ兘宕￠悙鈺傜�婚梺褰掑亰閸欏酣宕惔銏㈢瘈闁汇垽娼ф禒锔界箾閸忚偐鎳囩�规洏鍎抽敓鏂ょ秵娴滃爼鎮為懞銉х闁糕剝蓱鐏忣厾鐥銊﹀闂傚倷娴囬～澶愬磿閸忓吋鍙忛柕鍫濐槹閸嬪倿鐓崶銊с�掗柛娆愭崌閺屾盯濡烽敐鍛闂佸憡鏌ｉ崐妤呮儉椤忓牆绠氱憸搴ㄥ磻閵夆晜鐓涢悘鐐插⒔閳藉鎽堕敐澶嬬厱闁挎棁顕ч獮姗�鏌ｉ幘瀛樺碍闁宠鍨块、娆戞兜闁垮鏆版繝纰夌磿閸嬬姴螞閸曨喚浜遍梻浣告啞閸旀垿宕濇径濞綁宕奸妷銉ч獓闂佸壊鍋呯喊宥呪枍閸涱厸鏀芥い鏃傤儠閸嬨垺鎱ㄦ繝鍕笡闁瑰嘲鎳忕粭鐔碱敍濠婂啫歇闂傚倸鍊风粈浣规償濠婂懎绶ら柛鎾楀懐鐒块悗骞垮劚椤︻垶鏌嬮崶顒佺厸闁搞儺鐓夐崗顒勬煙閻戣姤鏁辩紒妤冨枛閺佹捇鎸婃径妯烘濡炪倖娲╅幏椋庯拷瑙勬礀閵堟悂銆侀弴銏℃櫜闁糕剝顭囪ぐ鍡涙⒒閸屾艾锟界兘鎳楅崜浣瑰厹闁割偅娲栫粈鍫熺節闂堟侗鍎愰柡鍜佷邯濮婄粯鎷呴崨濠冨創濡炪倖鍨靛Λ婵嗙暦瑜版帗鍤嬮柣銏㈩暯閺�铏節閻㈤潧孝婵炴潙鍊垮顐﹀礃椤旂晫鍙嗛梺鍝勫暙閸婅崵鏁☉娆戠闁割偅绋戦崝姘舵煃鐟欏嫬鐏撮柟顔界懅閿熻姤绋掗…鍥╃矙閸パ�鏀介柣鎰级閳绘洟鏌涘Ο鎭掑仮闁诡喗鍎抽悾锟犲箯閺冿拷濡啴寮幘瀵割浄閻庯綆鍋勬禒鐓庘攽閻樼粯娑фい鎴濇瀵煡骞栨担鍦幗闂佹寧绻傞幊蹇擄耿閻楀牄浜滄い鎰剁稻缁�瀣煛瀹�锟介崰鏍箖濠婂喚娼ㄩ柛鈩冿供閸氬倿姊绘担鑺ャ�冪紒锟芥笟锟介、鏍ㄥ緞閹邦剝鎽曞┑鐐村灟閸ㄥ綊鎮炲ú顏呯厱闊洦娲栭灞矫瑰搴濋偗闁靛棔绶氬顕�宕奸悢鍛婎仧闂備浇娉曢崳锕傚箯閿燂拷?
							MessageMgr.sendMsgNotify(roleId, 166139, null);
							return false;
						}
					}
					
					for (Long rid : members) {
						xbean.BaoXiangInfo baoxiangInfo = xtable.Rolekaibaoxiang.get(rid);
						if (baoxiangInfo == null) {
							baoxiangInfo = xbean.Pod.newBaoXiangInfo();
							xtable.Rolekaibaoxiang.insert(rid, baoxiangInfo);
						}
						if (!DateValidate.inTheSameDay(baoxiangInfo.getLastopentime(), currentTime)) {
							baoxiangInfo.setOpentimes(0);
						}
						
						if (baoxiangInfo.getOpentimes() >= opentimes) {
							MessageMgr.psendMsgNotify(rid, 166003, null);
							continue;
						}
						
						// 缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁绘劦鍓欓崝銈囩磽瀹ュ拑韬�殿喖顭烽弫鎰緞婵犲嫷鍚呴梻浣瑰缁诲倿骞夊☉銏犵缂備焦顭囬崢杈ㄧ節閻㈤潧孝闁稿﹤缍婂畷鎴﹀Ψ閳哄倻鍘搁柣蹇曞仩椤曆勬叏閸屾粣鎷峰▓鍨灍闁瑰憡濞婇獮鍐ㄢ枎閹寸偛鐝伴悷婊冩捣閿熻姤鑹惧﹢閬嶅箟閹间焦鍋嬮柛顐ｇ箘閻熴劎绱掗悙顒�鍔ゆい顓犲厴瀵濡搁埡鍌氫簻闂佸憡绻傜�氬懘鏁愭径瀣幗闂佽鍎崇壕顓犵不婵犳碍鐓涢悘鐐插⒔濞插瓨銇勯姀鈩冪闁轰焦鍔欏畷鍫曞煛閸愨晜鐦掔紓鍌氬�搁崐椋庣矆娓氾拷閹崇喖顢涢悙鏉戯拷鑸电節闂堟侗鍎忛柣鎾达耿閺岀喐娼忛幆褏妲ｉ梺杞扮閿曨亪寮婚敃锟借灒濞撴凹鍨卞瓭闂備礁鎼鍡涙偡閳轰緡娼栨繛宸簻娴肩娀鏌涢弴銊ユ珮婵炵厧鐖煎娲川婵犲啰鍙嗛梺娲诲幖閸婂灝鐣峰ú顏呭�烽柛婵嗗椤撴椽姊洪幐搴㈢┛闁圭兘鏀遍〃銉╂倷椤忓嫮浠鹃梺閫涚┒閸斿矁鐏冮梺璺ㄥ枙濡嫯鐏嬪┑鐐叉閹稿寮查幖浣圭厪濠㈣泛妫欏▍鍡涙煃闁垮娴柡灞剧〒娴狅箓骞戦幇顒夋闂備浇娉曢崰鏇炍涢崟顖氱婵犲﹤鐗婇弲鎼佹煠閹帒鍔氶柛銈庡墴閺屾盯骞樼�靛憡鍒涢梺杞扮劍閹瑰洭骞婇悙鍝勎ㄧ憸蹇涘矗濠靛鈷戦柛娑橆煬濞堟棃鏌涢悢閿嬪仴妞ゃ垺宀搁弫鎰板幢濞嗘垹妲囨繝娈垮枟閿曗晠宕滃☉娆忣嚤閻庯綆鍠楅崐鐢告偡濞嗗繐顏紒锟介敓钘夆攽閻愰鍤嬬紒鐘冲灴閸┿垽骞樼紒妯轰簵闁瑰吋鎯岄崰妤冿拷闈涚焸濮婃椽妫冨☉姘暫濠碘槅鍋呴悷鈺呭春濞戙垹绠虫俊銈勮兌閸樺崬鈹戦埥鍡楃仯濠殿喗娼欑叅闁靛牆顦崙鐘裁归敐鍛暛濞存粍绮撻悡顐﹀炊閵婏箑鏆楁繝鈷�鍕创闁哄矉缍侀獮姗�宕￠悙鎻捫曢梻浣告惈閻绱炴担鍓插殨闁圭虎鍠楅崐鐑芥偣閸ュ洤瀚鍫曟⒑闂堚晛鐦滈柛娆忕箻楠炲繐鐣￠柇锔藉兊闂佺粯鍔﹂崜娆擃敂閿燂拷
						RewardMgr.getInstance().distributeAllAward(rid,
								chestcfg.rewardid, null,
								fire.log.enums.YYLoggerTuJingEnum.tujing_Value_baoxiang, 0,
								PAddExpProc.OTHER_QUEST, "濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柟鑲╁仜婵″ジ鏌涙繝鍌涘仴鐎殿喛顕ч埥澶愬閳哄倹娅囬梻浣瑰缁诲倸螞濞戔懞鍥Ψ瑜忕壕钘壝归敐鍛儓閺嶁�斥攽閻橆喖鐏柨鏇樺灲瀹曟椽鎮欓崫鍕吅闂佹寧妫佸Λ鍕瑜版帗鍊甸悷娆忓缁�锟藉┑鐐存綑閸婂灝顕ｉ幎鑺ユ櫢闁绘ɑ鏋奸幏铏圭磽娴ｅ壊鍎愭い鎴炵懇瀹曟洝绠涢弬璁崇盎闂佺懓鐡ㄧ换鍐夐悩缁樼厵妤犵偛鐏濋悘鈺呮煃鐟欏嫬鐏寸�规洖鐖奸崺锟犲礃椤忓拋娼撻梻鍌氬�烽懗鍫曗�﹂崼銉ュ珘妞ゆ帒鍊搁崹婵堬拷鐧告嫹闁告洍鏅幏鐑藉磼濮ｎ厽妞介、鏃堝川椤忓懎顏瑰┑鐘愁問閸犳岸骞婇幘瓒佹椽濡舵径瀣闂佸吋浜介崕鍝勨枔濠婂拑鎷风憴鍕闁搞劌娼￠悰顔嘉熼崗鐓庣彴闂佸憡鐟ラ崑濠勭不閹捐钃熸繛鎴欏灩閸楁娊鏌曟繛鍨姢濞寸姭鏅濈槐鎾存媴閸濆嫅锝夋煟閳哄﹤鐏︾�殿喛顕ч濂稿幢濡警娼梻浣筋潐椤旀牠宕板鑸靛仱婵鎷锋慨濠囩細閵囨劙骞掑┑鍥舵闂備礁鎼懟顖炈囨担鍐╊棨闂佽崵鍠愰悷銉э拷姘槻閳绘挻绂掔�ｎ偆鍘介梺褰掑亰閸ㄤ即鎯冮搹鍦＜闁绘ɑ褰冪痪褔鏌曢崶褍顏柡浣稿�块獮鍡氼檨闁哄棭鍙冨铏规嫚閳ュ磭浠┑鈽嗗亜閸燁垶骞堥妸鈺傛櫢濞寸姴顑嗛悡鐔镐繆椤栨繃顏犻柨娑樼Ч閺屻劑鎮㈤搹瑙勬啒闂佸憡鐟ラ崯顐︼綖韫囨洜纾兼俊顖濐嚙椤庢捇姊洪崨濠勨槈闁挎洏鍊濆鎶藉醇濠靛啯鏂�闂佺粯鍔欓·鍌炲吹鐎ｎ剛纾奸柣妯挎珪鐏忣參鏌ｉ敐鍥у幋濠殿噯鎷烽柟鐑樺▕瀹曟垿宕ㄧ�涙鍘遍梺纭呭焽閸斿秴鈻嶉崨顒煎綊鎮╃仦鍌氫划濠殿喖锕ㄥ▍锝囨閹烘嚦鐔烘嫚閼碱剦鏆￠梻浣筋嚙妤犳悂鎮樺杈ㄦ殰闁圭儤顨呰繚闂佸湱鍎ら幐鍓у姬閿熻棄鈹戦鏂や緵闁告﹢绠栧畷銏ゎ敂閸啿鎷洪梺鍛婃尰瑜板啯绂嶅┑鍫㈢＜閻犲洦褰冮弳锝夋寠閻斿吋鐓熼柟閭﹀幘閺嗘ê霉濠婂嫮鐭掗柡灞炬礃瀵板嫬鈽夊鍡樺枠濠电姭鎷冮崨顔芥瘓闂佸搫澶囬敓钘夌－閺嗗棝鏌ㄩ悢鍓佺煓鐎规洑鍗冲鍊燁槾闁哄棴闄勭换娑㈠幢濡纰嶉柛銉︽尦濮婅櫣鍖栭弴鐐测拤濡炪們鍔岀换鎴狅拷闈涖偢閺佹捇鏁撻敓锟�");
						
						baoxiangInfo.setOpentimes(baoxiangInfo.getOpentimes() + 1);
						baoxiangInfo.setLastopentime(currentTime);
					}
				}
				else {
					int rolelevel = xtable.Properties.selectLevel(roleId);
					if (chestcfg.openlevel > rolelevel) {
						//缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鏁愭径濠勵吅闂佹寧绻傞幉娑㈠箻缂佹鍘辨繝鐢靛Т閸婂綊宕戦妷鈺傜厸閻忕偠顕ф慨鍌滐拷娈垮櫘閸撶喎鐣疯ぐ鎺濇晩閻熸瑥瀚惁閬嶆⒒閸屾瑧鍔嶆俊鐐叉健瀹曘垺绂掔�ｎ偄浠梺鍐叉惈閹冲酣鎷戦悢鍏肩厽闁哄倽娉曞▓閬嶆煛鐎ｎ亪鍙勬慨濠佺矙瀹曞爼顢楁径瀣珨闁荤喐绮岀粔鍫曞矗閸涘瓨鈷戦柟绋垮缁屽潡鏌熼悜鑺ユ暠闁靛洤瀚伴、姗�鎮欑�电硶鏁嶇紓鍌欒兌婵數绮欓幋锕�鐓″鑸靛姇缁犳娊鏌ｉ幇顓熺稇妞ゅ繐鐖煎娲箰鎼淬垻顦ラ梺绋匡工閹芥粎鍒掓繝姘櫜濠㈣泛顑囬崢浠嬫⒑閻熸壆鎽犵紒璇插暣钘熸繝濠傜墛閻撴盯鏌涘锟界粈浣规櫠鐎涙ɑ鍙忓┑鐘插亞閻撹偐锟借娲樼敮鎺楀煝鎼淬劌绠ｆ繝闈涙－閻庢挳姊婚崒娆愮グ妞ゆ洘鐗犲畷浼村冀椤撶喎浜梺缁樻尭濞寸兘寮抽敃鍌涚厸闁搞儯鍎遍悞娲煛娴ｅ摜效闁哄矉缍侀獮鍥敍濮樿鲸顕楁俊鐐�х�靛矂宕抽敐澶婅摕闁绘梻鍘х粈鍌炴煠濞村娅嗘繛鍫墴濮婃椽宕ㄦ繝鍐弳闂佹椿鍘奸崐鍧楃嵁閸愵喖鐏抽柡鍌樺劜閺傦拷闂佽鍑界紞鍡涘磻閸℃稑鍌ㄩ柟闂寸劍閳锋垿鏌涘☉姗堝伐濠殿喖鍊块弻娑㈠棘閹稿孩鎷辩紓浣稿�哥粔鐢碉拷浣冨亹閿熻姤绋掗…鍥储閸偂绻嗛柣鎰▕閸庡繐螖閻樿櫕鍊愮�规洏鍨介獮姗�顢欓悾灞藉箺婵犵數鍋為崹闈涚暦椤掞拷閳诲秴顓奸崶閿嬪閻熸瑥瀚粈锟界紓鍌氱Т閿曨亪濡存担绯曟瀻闁圭偓娼欐禍妤呮煙閸忓吋鍎楅柛鐘愁殘缁辩偤骞樼紒妯锋嫽闂佺鏈懝楣冩晸閻ｅ苯鍘撮柟铏殜瀹曟粍鎷呯粙璺ㄤ喊婵＄偑鍊栭悧婊堝磻閹达附鏅搁柦妯侯槸閺嗭絿锟借娲忛崝鎴︺�佸锟藉畷鍫曞Ω瑜夊Σ鍫ユ⒑鐎圭媭娼愰柛銊ョ仢閻ｇ兘宕￠悙鈺傜�婚梺褰掑亰閸欏酣宕惔銏㈢瘈闁汇垽娼ф禒锔界箾閸忚偐鎳囩�规洏鍎抽敓鏂ょ秵娴滃爼鎮為懞銉х闁糕剝蓱鐏忣厾鐥銊﹀闂傚倷娴囬～澶愬磿閸忓吋鍙忛柕鍫濐槹閸嬪倿鐓崶銊с�掗柛娆愭崌閺屾盯濡烽敐鍛闂佸憡鏌ｉ崐妤呮儉椤忓牆绠氱憸搴ㄥ磻閵夆晜鐓涢悘鐐插⒔閳藉鎽堕敐澶嬬厱闁挎棁顕ч獮姗�鏌ｉ幘瀛樺碍闁宠鍨块、娆戞兜闁垮鏆版繝纰夌磿閸嬬姴螞閸曨喚浜遍梻浣告啞閸旀垿宕濇径濞綁宕奸妷銉ч獓闂佸壊鍋呯喊宥呪枍閸涱厸鏀芥い鏃傤儠閸嬨垺鎱ㄦ繝鍕笡闁瑰嘲鎳忕粭鐔碱敍濠婂啫歇闂傚倸鍊风粈浣规償濠婂懎绶ら柛鎾楀懐鐒块悗骞垮劚椤︻垶鏌嬮崶顒佺厸闁搞儺鐓夐崗顒勬煙閻戣姤鏁辩紒妤冨枛閺佹捇鎸婃径妯烘濡炪倖娲╅幏椋庯拷瑙勬礀閵堟悂銆侀弴銏℃櫜闁糕剝顭囪ぐ鍡涙⒒閸屾艾锟界兘鎳楅崜浣瑰厹闁割偅娲栫粈鍫熺節闂堟侗鍎愰柡鍜佷邯濮婄粯鎷呴崨濠冨創濡炪倖鍨靛Λ婵嗙暦瑜版帗鍤嬮柣銏㈩暯閺�铏節閻㈤潧孝婵炴潙鍊垮顐﹀礃椤旂晫鍙嗛梺鍝勫暙閸婅崵鏁☉娆戠闁割偅绋戦崝姘舵煃鐟欏嫬鐏撮柟顔界懅閿熻姤绋掗…鍥╃矙閸パ�鏀介柣鎰级閳绘洟鏌涘Ο鎭掑仮闁诡喗鍎抽悾锟犲箯閺冿拷濡啴寮幘瀵割浄閻庯綆鍋勬禒鐓庘攽閻樼粯娑фい鎴濇瀵煡骞栨担鍦幗闂佹寧绻傞幊蹇擄耿閻楀牄浜滄い鎰剁稻缁�瀣煛瀹�锟介崰鏍箖濠婂喚娼ㄩ柛鈩冿供閸氬倿姊绘担鑺ャ�冪紒锟芥笟锟介、鏍ㄥ緞閹邦剝鎽曞┑鐐村灟閸ㄥ綊鎮炲ú顏呯厱闊洦娲栭灞矫瑰搴濋偗闁靛棔绶氬顕�宕奸悢鍛婎仧闂備浇娉曢崳锕傚箯閿燂拷?
						MessageMgr.sendMsgNotify(roleId, 166139, null);
						return false;
					}
					
					if (npc.getNpcID() == 300002) {
						xbean.BestowNpcInfo npcInfo = xtable.Bestownpc.get(chestnpckey);
						if (npcInfo == null)
							return false;
						
						xbean.RoleBestowInfo bestowInfo = xtable.Rolebestow.get(roleId);
						if (bestowInfo == null) {
							bestowInfo = xbean.Pod.newRoleBestowInfo();
							xtable.Rolebestow.insert(roleId, bestowInfo);
						}
						
						long npcRoleId = npcInfo.getRoleid();
						xbean.RoleBestowCount bestowCount = bestowInfo.getRolebestowinfo().get(npcInfo.getRoleid());
						if (bestowCount == null) {
							bestowCount = xbean.Pod.newRoleBestowCount();
							bestowInfo.getRolebestowinfo().put(npcRoleId, bestowCount);
						}
						if (bestowCount.getOpentimes() >= opentimes) {
							MessageMgr.psendMsgNotifyWhileRollback(roleId, chestcfg.getOpenovermsg(), null);
							return false;
						}
						
						// 缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁绘劦鍓欓崝銈囩磽瀹ュ拑韬�殿喖顭烽弫鎰緞婵犲嫷鍚呴梻浣瑰缁诲倿骞夊☉銏犵缂備焦顭囬崢杈ㄧ節閻㈤潧孝闁稿﹤缍婂畷鎴﹀Ψ閳哄倻鍘搁柣蹇曞仩椤曆勬叏閸屾粣鎷峰▓鍨灍闁瑰憡濞婇獮鍐ㄢ枎閹寸偛鐝伴悷婊冩捣閿熻姤鑹惧﹢閬嶅箟閹间焦鍋嬮柛顐ｇ箘閻熴劎绱掗悙顒�鍔ゆい顓犲厴瀵濡搁埡鍌氫簻闂佸憡绻傜�氬懘鏁愭径瀣幗闂佽鍎崇壕顓犵不婵犳碍鐓涢悘鐐插⒔濞插瓨銇勯姀鈩冪闁轰焦鍔欏畷鍫曞煛閸愨晜鐦掔紓鍌氬�搁崐椋庣矆娓氾拷閹崇喖顢涢悙鏉戯拷鑸电節闂堟侗鍎忛柣鎾达耿閺岀喐娼忛幆褏妲ｉ梺杞扮閿曨亪寮婚敃锟借灒濞撴凹鍨卞瓭闂備礁鎼鍡涙偡閳轰緡娼栨繛宸簻娴肩娀鏌涢弴銊ユ珮婵炵厧鐖煎娲川婵犲啰鍙嗛梺娲诲幖閸婂灝鐣峰ú顏呭�烽柛婵嗗椤撴椽姊洪幐搴㈢┛闁圭兘鏀遍〃銉╂倷椤忓嫮浠鹃梺閫涚┒閸斿矁鐏冮梺璺ㄥ枙濡嫯鐏嬪┑鐐叉閹稿寮查幖浣圭厪濠㈣泛妫欏▍鍡涙煃闁垮娴柡灞剧〒娴狅箓骞戦幇顒夋闂備浇娉曢崰鏇炍涢崟顖氱婵犲﹤鐗婇弲鎼佹煠閹帒鍔氶柛銈庡墴閺屾盯骞樼�靛憡鍒涢梺杞扮劍閹瑰洭骞婇悙鍝勎ㄧ憸蹇涘矗濠靛鈷戦柛娑橆煬濞堟棃鏌涢悢閿嬪仴妞ゃ垺宀搁弫鎰板幢濞嗘垹妲囨繝娈垮枟閿曗晠宕滃☉娆忣嚤閻庯綆鍠楅崐鐢告偡濞嗗繐顏紒锟介敓钘夆攽閻愰鍤嬬紒鐘冲灴閸┿垽骞樼紒妯轰簵闁瑰吋鎯岄崰妤冿拷闈涚焸濮婃椽妫冨☉姘暫濠碘槅鍋呴悷鈺呭春濞戙垹绠虫俊銈勮兌閸樺崬鈹戦埥鍡楃仯濠殿喗娼欑叅闁靛牆顦崙鐘裁归敐鍛暛濞存粍绮撻悡顐﹀炊閵婏箑鏆楁繝鈷�鍕创闁哄矉缍侀獮姗�宕￠悙鎻捫曢梻浣告惈閻绱炴担鍓插殨闁圭虎鍠楅崐鐑芥偣閸ュ洤瀚鍫曟⒑闂堚晛鐦滈柛娆忕箻楠炲繐鐣￠柇锔藉兊闂佺粯鍔﹂崜娆擃敂閿燂拷
						RewardMgr.getInstance().distributeAllAward(roleId,
								chestcfg.rewardid, null,
								fire.log.enums.YYLoggerTuJingEnum.tujing_Value_baoxiang, 0,
								PAddExpProc.OTHER_QUEST, "濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柟鑲╁仜婵″ジ鏌涙繝鍌涘仴鐎殿喛顕ч埥澶愬閳哄倹娅囬梻浣瑰缁诲倸螞濞戔懞鍥Ψ瑜忕壕钘壝归敐鍛儓閺嶁�斥攽閻橆喖鐏柨鏇樺灲瀹曟椽鎮欓崫鍕吅闂佹寧妫佸Λ鍕瑜版帗鍊甸悷娆忓缁�锟藉┑鐐存綑閸婂灝顕ｉ幎鑺ユ櫢闁绘ɑ鏋奸幏铏圭磽娴ｅ壊鍎愭い鎴炵懇瀹曟洝绠涢弬璁崇盎闂佺懓鐡ㄧ换鍐夐悩缁樼厵妤犵偛鐏濋悘鈺呮煃鐟欏嫬鐏寸�规洖鐖奸崺锟犲礃椤忓拋娼撻梻鍌氬�烽懗鍫曗�﹂崼銉ュ珘妞ゆ帒鍊搁崹婵堬拷鐧告嫹闁告洍鏅幏鐑藉磼濮ｎ厽妞介、鏃堝川椤忓懎顏瑰┑鐘愁問閸犳岸骞婇幘瓒佹椽濡舵径瀣闂佸吋浜介崕鍝勨枔濠婂拑鎷风憴鍕闁搞劌娼￠悰顔嘉熼崗鐓庣彴闂佸憡鐟ラ崑濠勭不閹捐钃熸繛鎴欏灩閸楁娊鏌曟繛鍨姢濞寸姭鏅濈槐鎾存媴閸濆嫅锝夋煟閳哄﹤鐏︾�殿喛顕ч濂稿幢濡警娼梻浣筋潐椤旀牠宕板鑸靛仱婵鎷锋慨濠囩細閵囨劙骞掑┑鍥舵闂備礁鎼懟顖炈囨担鍐╊棨闂佽崵鍠愰悷銉э拷姘槻閳绘挻绂掔�ｎ偆鍘介梺褰掑亰閸ㄤ即鎯冮搹鍦＜闁绘ɑ褰冪痪褔鏌曢崶褍顏柡浣稿�块獮鍡氼檨闁哄棭鍙冨铏规嫚閳ュ磭浠┑鈽嗗亜閸燁垶骞堥妸鈺傛櫢濞寸姴顑嗛悡鐔镐繆椤栨繃顏犻柨娑樼Ч閺屻劑鎮㈤搹瑙勬啒闂佸憡鐟ラ崯顐︼綖韫囨洜纾兼俊顖濐嚙椤庢捇姊洪崨濠勨槈闁挎洏鍊濆鎶藉醇濠靛啯鏂�闂佺粯鍔欓·鍌炲吹鐎ｎ剛纾奸柣妯挎珪鐏忣參鏌ｉ敐鍥у幋濠殿噯鎷烽柟鐑樺▕瀹曟垿宕ㄧ�涙鍘遍梺纭呭焽閸斿秴鈻嶉崨顒煎綊鎮╃仦鍌氫划濠殿喖锕ㄥ▍锝囨閹烘嚦鐔烘嫚閼碱剦鏆￠梻浣筋嚙妤犳悂鎮樺杈ㄦ殰闁圭儤顨呰繚闂佸湱鍎ら幐鍓у姬閿熻棄鈹戦鏂や緵闁告﹢绠栧畷銏ゎ敂閸啿鎷洪梺鍛婃尰瑜板啯绂嶅┑鍫㈢＜閻犲洦褰冮弳锝夋寠閻斿吋鐓熼柟閭﹀幘閺嗘ê霉濠婂嫮鐭掗柡灞炬礃瀵板嫬鈽夊鍡樺枠濠电姭鎷冮崨顔芥瘓闂佸搫澶囬敓钘夌－閺嗗棝鏌ㄩ悢鍓佺煓鐎规洑鍗冲鍊燁槾闁哄棴闄勭换娑㈠幢濡纰嶉柛銉︽尦濮婅櫣鍖栭弴鐐测拤濡炪們鍔岀换鎴狅拷闈涖偢閺佹捇鏁撻敓锟�");
						
						bestowCount.setOpentimes(bestowCount.getOpentimes() + 1);
					
					}
					else {
						xbean.BaoXiangInfo baoxiangInfo = xtable.Rolekaibaoxiang.get(roleId);
						if (baoxiangInfo == null) {
							baoxiangInfo = xbean.Pod.newBaoXiangInfo();
							xtable.Rolekaibaoxiang.insert(roleId, baoxiangInfo);
						}
						
						if (!DateValidate.inTheSameDay(baoxiangInfo.getLastopentime(), currentTime)) {
							baoxiangInfo.setOpentimes(0);
						}
						
						if (baoxiangInfo.getOpentimes() >= opentimes) {
							MessageMgr.psendMsgNotifyWhileRollback(roleId, chestcfg.getOpenovermsg(), null);
							return false;
						}
						
						// 缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁绘劦鍓欓崝銈囩磽瀹ュ拑韬�殿喖顭烽弫鎰緞婵犲嫷鍚呴梻浣瑰缁诲倿骞夊☉銏犵缂備焦顭囬崢杈ㄧ節閻㈤潧孝闁稿﹤缍婂畷鎴﹀Ψ閳哄倻鍘搁柣蹇曞仩椤曆勬叏閸屾粣鎷峰▓鍨灍闁瑰憡濞婇獮鍐ㄢ枎閹寸偛鐝伴悷婊冩捣閿熻姤鑹惧﹢閬嶅箟閹间焦鍋嬮柛顐ｇ箘閻熴劎绱掗悙顒�鍔ゆい顓犲厴瀵濡搁埡鍌氫簻闂佸憡绻傜�氬懘鏁愭径瀣幗闂佽鍎崇壕顓犵不婵犳碍鐓涢悘鐐插⒔濞插瓨銇勯姀鈩冪闁轰焦鍔欏畷鍫曞煛閸愨晜鐦掔紓鍌氬�搁崐椋庣矆娓氾拷閹崇喖顢涢悙鏉戯拷鑸电節闂堟侗鍎忛柣鎾达耿閺岀喐娼忛幆褏妲ｉ梺杞扮閿曨亪寮婚敃锟借灒濞撴凹鍨卞瓭闂備礁鎼鍡涙偡閳轰緡娼栨繛宸簻娴肩娀鏌涢弴銊ユ珮婵炵厧鐖煎娲川婵犲啰鍙嗛梺娲诲幖閸婂灝鐣峰ú顏呭�烽柛婵嗗椤撴椽姊洪幐搴㈢┛闁圭兘鏀遍〃銉╂倷椤忓嫮浠鹃梺閫涚┒閸斿矁鐏冮梺璺ㄥ枙濡嫯鐏嬪┑鐐叉閹稿寮查幖浣圭厪濠㈣泛妫欏▍鍡涙煃闁垮娴柡灞剧〒娴狅箓骞戦幇顒夋闂備浇娉曢崰鏇炍涢崟顖氱婵犲﹤鐗婇弲鎼佹煠閹帒鍔氶柛銈庡墴閺屾盯骞樼�靛憡鍒涢梺杞扮劍閹瑰洭骞婇悙鍝勎ㄧ憸蹇涘矗濠靛鈷戦柛娑橆煬濞堟棃鏌涢悢閿嬪仴妞ゃ垺宀搁弫鎰板幢濞嗘垹妲囨繝娈垮枟閿曗晠宕滃☉娆忣嚤閻庯綆鍠楅崐鐢告偡濞嗗繐顏紒锟介敓钘夆攽閻愰鍤嬬紒鐘冲灴閸┿垽骞樼紒妯轰簵闁瑰吋鎯岄崰妤冿拷闈涚焸濮婃椽妫冨☉姘暫濠碘槅鍋呴悷鈺呭春濞戙垹绠虫俊銈勮兌閸樺崬鈹戦埥鍡楃仯濠殿喗娼欑叅闁靛牆顦崙鐘裁归敐鍛暛濞存粍绮撻悡顐﹀炊閵婏箑鏆楁繝鈷�鍕创闁哄矉缍侀獮姗�宕￠悙鎻捫曢梻浣告惈閻绱炴担鍓插殨闁圭虎鍠楅崐鐑芥偣閸ュ洤瀚鍫曟⒑闂堚晛鐦滈柛娆忕箻楠炲繐鐣￠柇锔藉兊闂佺粯鍔﹂崜娆擃敂閿燂拷
						RewardMgr.getInstance().distributeAllAward(roleId,
								chestcfg.rewardid, null,
								fire.log.enums.YYLoggerTuJingEnum.tujing_Value_baoxiang, 0,
								PAddExpProc.OTHER_QUEST, "濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柟鑲╁仜婵″ジ鏌涙繝鍌涘仴鐎殿喛顕ч埥澶愬閳哄倹娅囬梻浣瑰缁诲倸螞濞戔懞鍥Ψ瑜忕壕钘壝归敐鍛儓閺嶁�斥攽閻橆喖鐏柨鏇樺灲瀹曟椽鎮欓崫鍕吅闂佹寧妫佸Λ鍕瑜版帗鍊甸悷娆忓缁�锟藉┑鐐存綑閸婂灝顕ｉ幎鑺ユ櫢闁绘ɑ鏋奸幏铏圭磽娴ｅ壊鍎愭い鎴炵懇瀹曟洝绠涢弬璁崇盎闂佺懓鐡ㄧ换鍐夐悩缁樼厵妤犵偛鐏濋悘鈺呮煃鐟欏嫬鐏寸�规洖鐖奸崺锟犲礃椤忓拋娼撻梻鍌氬�烽懗鍫曗�﹂崼銉ュ珘妞ゆ帒鍊搁崹婵堬拷鐧告嫹闁告洍鏅幏鐑藉磼濮ｎ厽妞介、鏃堝川椤忓懎顏瑰┑鐘愁問閸犳岸骞婇幘瓒佹椽濡舵径瀣闂佸吋浜介崕鍝勨枔濠婂拑鎷风憴鍕闁搞劌娼￠悰顔嘉熼崗鐓庣彴闂佸憡鐟ラ崑濠勭不閹捐钃熸繛鎴欏灩閸楁娊鏌曟繛鍨姢濞寸姭鏅濈槐鎾存媴閸濆嫅锝夋煟閳哄﹤鐏︾�殿喛顕ч濂稿幢濡警娼梻浣筋潐椤旀牠宕板鑸靛仱婵鎷锋慨濠囩細閵囨劙骞掑┑鍥舵闂備礁鎼懟顖炈囨担鍐╊棨闂佽崵鍠愰悷銉э拷姘槻閳绘挻绂掔�ｎ偆鍘介梺褰掑亰閸ㄤ即鎯冮搹鍦＜闁绘ɑ褰冪痪褔鏌曢崶褍顏柡浣稿�块獮鍡氼檨闁哄棭鍙冨铏规嫚閳ュ磭浠┑鈽嗗亜閸燁垶骞堥妸鈺傛櫢濞寸姴顑嗛悡鐔镐繆椤栨繃顏犻柨娑樼Ч閺屻劑鎮㈤搹瑙勬啒闂佸憡鐟ラ崯顐︼綖韫囨洜纾兼俊顖濐嚙椤庢捇姊洪崨濠勨槈闁挎洏鍊濆鎶藉醇濠靛啯鏂�闂佺粯鍔欓·鍌炲吹鐎ｎ剛纾奸柣妯挎珪鐏忣參鏌ｉ敐鍥у幋濠殿噯鎷烽柟鐑樺▕瀹曟垿宕ㄧ�涙鍘遍梺纭呭焽閸斿秴鈻嶉崨顒煎綊鎮╃仦鍌氫划濠殿喖锕ㄥ▍锝囨閹烘嚦鐔烘嫚閼碱剦鏆￠梻浣筋嚙妤犳悂鎮樺杈ㄦ殰闁圭儤顨呰繚闂佸湱鍎ら幐鍓у姬閿熻棄鈹戦鏂や緵闁告﹢绠栧畷銏ゎ敂閸啿鎷洪梺鍛婃尰瑜板啯绂嶅┑鍫㈢＜閻犲洦褰冮弳锝夋寠閻斿吋鐓熼柟閭﹀幘閺嗘ê霉濠婂嫮鐭掗柡灞炬礃瀵板嫬鈽夊鍡樺枠濠电姭鎷冮崨顔芥瘓闂佸搫澶囬敓钘夌－閺嗗棝鏌ㄩ悢鍓佺煓鐎规洑鍗冲鍊燁槾闁哄棴闄勭换娑㈠幢濡纰嶉柛銉︽尦濮婅櫣鍖栭弴鐐测拤濡炪們鍔岀换鎴狅拷闈涖偢閺佹捇鏁撻敓锟�");
						
						baoxiangInfo.setOpentimes(baoxiangInfo.getOpentimes() + 1);
						baoxiangInfo.setLastopentime(currentTime);
					}
				}
				
				TimerNpcService.getInstance().removeEventNpc(biaoId, chestnpckey);
				return true;
			}
			
		}.submit();
		
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 795522;

	public int getType() {
		return 795522;
	}

	public long chestnpckey; // 宝箱的npckey

	public COpenChest() {
	}

	public COpenChest(long _chestnpckey_) {
		this.chestnpckey = _chestnpckey_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(chestnpckey);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		chestnpckey = _os_.unmarshal_long();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof COpenChest) {
			COpenChest _o_ = (COpenChest)_o1_;
			if (chestnpckey != _o_.chestnpckey) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)chestnpckey;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(chestnpckey).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(COpenChest _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(chestnpckey - _o_.chestnpckey);
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

