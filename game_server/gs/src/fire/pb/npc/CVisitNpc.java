
package fire.pb.npc;

import java.util.Collections;

import fire.pb.PropRole;
import fire.pb.main.ConfigManager;
import fire.pb.map.Npc;
import fire.pb.map.Role;
import fire.pb.map.RoleManager;
import fire.pb.map.SceneNpcManager;


// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CVisitNpc__ extends mkio.Protocol { }

/** 客户端请求访问 NPC
*/
// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CVisitNpc extends __CVisitNpc__ {
	private boolean checkGatherTask( long roleid, final SGatherConfig conf ) {
		if ( conf.tasks == null || conf.tasks.isEmpty() ) {
			Module.logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鏁愭径濠勵吅闂佹寧绻傞幉娑㈠箻缂佹鍘辨繝鐢靛Т閸婂綊宕戦妷鈺傜厸閻忕偠顕ф慨鍌滐拷娈垮枟濞兼瑩锝炲┑瀣殝婵炲牆灏呴幏鐑藉冀閵娧咁啎闁诲孩绋掗…鍥儗婵犲嫮纾界�广儱鎷戦煬顒傦拷娈垮枦椤曆囧煡婢舵劕顫呴柣妯兼暩閺夋悂姊绘担鍦菇闁搞劏妫勯…鍥槾闁轰緡鍣ｉ獮鎺楀箣閺冿拷閺傦拷闂備胶绮崝鏇烆嚕閸洖鐓濋柡鍥╀紳閻熼偊鐓ラ柛鎰典簻閻撶喖鎮楀▓鍨珮闁稿锕ら悾鐑藉醇閺囥劍鏅㈡繛杈剧到閹碱偊鐛Δ鍛拻濞达絼璀﹂弨浼存煕閳轰焦鍠樼�规洘绻傞濂稿川椤忓懐锟芥椽姊虹化鏇炲⒉缂佸甯￠幃锟犳偄閼测晛褰勯梺鎼炲劘閸斿秶浜搁銏＄厸闁糕槅鍘剧粙濠氭煙娓氬灝濡界紒缁樼箞瀹曟﹢鍩炴径姝屾濠德板�楁慨鐑藉磻閻愬搫绀夐柡宥庡幖缁犳岸鏌￠崘銊у妞ゎ偄鎳橀弻鏇＄疀婵犲啯鐝曢悶姘剧秮濮婂宕掑顒婃嫹閻戣姤鍤勯柛顐ｆ磵閿熸枻绠撳畷濂稿Ψ閿旇姤鐝栭梻渚�娼ч悧鍡椕洪妸褏鐭嗗┑鐘插�甸弨浠嬫煟濡绲婚柨鐔绘椤嘲顕ｉ幎鑺ユ櫇闁稿本绋撻崢鐢告煟鎼达絾鏆╂い顓炵墦椤㈡捇骞樼紒妯煎幍婵＄偛顑呮鎼佸储閹绢喗鐓涘ù锝囨嚀婵牓鏌熼娑欘棃闁糕晛瀚板畷姗�顢旈崘鈺佹灓闂傚倸鍊搁崐鐑芥嚄閸撲礁鍨濇い鏍仜缁犱即鏌熼梻瀵割槮闁汇値鍣ｉ弻鐔虹磼閵忕姵鐏堥梺钘夊暟閸犳劗鎹㈠☉銏犵闁绘劕鍟畝绋款嚕閵婏妇顩烽悗锝庡亞閸橀亶姊洪弬銉︽珔闁哥姵鑹鹃埢鎾诲閻樺棗缍婇幃鈺冧沪閸屾矮鍒掓繝娈垮枛閿曘儱顪冮挊澶屾殾妞ゆ劧绠戠粈瀣亜閹烘埈妲归柨鐔村劦濮婄粯鎷呮笟顖滃姼濡炪倖鍨甸崯鏉戠暦閹邦兘鏀介柛鈾�鏅涘▓銊︾節閻㈤潧校缁炬澘绉瑰鏌ュ箵閹烘繄鍞甸柣鐘烘〃鐠�锕傚磿閹邦厾绠鹃柛娑卞枤閻帗鎱ㄦ繝鍐┿仢妤犵偞鐗犻幃娆撳箵閹烘埈娼欓梻鍌欑閹诧繝寮婚妸鈺傜厐闁挎繂顦敓鎴掔閳诲酣骞橀崘鑼綁缂傚倷绀佸畷顒勫春瀹勬挳姊婚崒姘拷鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐差渻閵堝棗绗掓い锔垮嵆瀵煡顢旈崼鐔蜂画濠电姴锕ら崯鎵不婵犳碍鐓涘ù锝堫潐瀹曞矂鏌熷畷鍥т槐濠碉紕鏌夐ˇ顕�鏌＄�ｎ偅顥堟慨濠冩そ瀹曨偊宕熼锟藉▍銈囩磽娴ｇ瓔鍤欓悗姘緲閻ｅ嘲顫濈捄铏诡唺闂佺懓鐡ㄥ褰掓倵婵犳碍鈷戦悷娆忓閸斻倗鐥紒銏犲籍妞ゃ垺鐟︾换婵嬪磼濡や焦鏉搁梻浣瑰缁嬫垹锟芥凹鍓氱粋鎺曨樄闁哄本娲熷畷鍗炍旀繝鍌氬婵°倗濮烽崑娑氭崲濮楋拷楠炲啫顭ㄩ崼鐔风檮婵犮垼娉涢惌鍫澪ｉ悧鍫滅箚闁绘劦浜滈敓鑺ョ墪椤繑绻濆顒�鍋嶉悷婊勬楠炲﹪骞樼拠鎻掔�銈嗘椤寮敓浠嬫⒒娴ｈ櫣甯涢柛鏃�鐗曢…鍥р枎閹炬潙锟藉爼鏌涘Δ鍐ㄥ壉婵炴挸顭烽幃妤�鈽夊▍铏灴瀹曟劙骞囬鍡樺婵炲牆鐏濋弸鐔兼煟閹垮嫮绡�鐎规洘妞介弫鎾绘偐閹绘帞鐛╂俊鐐�栧褰掑磿閹剁晫宓佹俊銈呮噺閳锋帒鈹戦悩鏌ヮ�楀ù婊勭矋缁绘稓鎷犺閻ｉ亶鎮￠妶澶嬬厸鐎广儱鍟俊鎸庛亜閳哄懏鏁辩紒缁樼箖缁绘繈宕掑顓犱壕闂備胶绮弻銊ノ涘☉銏犵疅缂佸娉曢弳鍡涙煥閻斿墎鐭欑�规洘宀搁獮鎺楀箣閺冿拷閻庡姊虹憴鍕婵炲懏娲栧嵄妞ゆ帒瀚埛鎴︽⒒閸喓銆掔紒鐘靛仱閺屾稒绻濋崘鈺冾槶闂佺粯纰嶉崕鎶筋敇閸忕厧绶為悗锝庡墮楠炲牊淇婇悙顏勶拷鏍礉閹达箑纾归柡鍥ュ灩閸戠娀鏌￠崘銊у闁绘挻娲樼换娑㈠幢濡ゅ啰顔囧銈呮禋閸樿姤绌辨繝鍥舵晝闁靛繆锟借櫕鐣绘俊鐐�戦崹鍝劽洪悢鍛婂弿闁跨喍绮欓弻宥夊Ψ閿曪拷婢ь垱淇婇弻銉ゆ喚婵﹦绮幏鍛村川婵犲懐顢呮俊鐐�ら崢濂告偋閹捐崵宓佹俊銈忔嫹妞ゎ厹鍔戝畷鐓庘攽閸モ晪鎷烽锟介—鍐Χ閸℃鈹涢梺鐟板槻閸㈡煡鍩為幋锕�鐒洪柛鎰ㄦ櫅閿熻姤鍔欓弻娑㈠煛鐎ｎ剛鐦堥悗瑙勬礃鐢帡鈥﹂妸鈺佺闁靛ě灞芥暪濠电姷鏁告慨鐑藉极閹间礁纾婚柣鎰惈缁犳澘鈹戦悩宕囶暡闁搞倕鑻灃闁挎繂鎳庨弳鐐烘煛閸涱喚绠為柡灞炬礃缁旂喖顢涘姣欙綁鎮楀鎰佹綈闁逛究鍔岃灒闁绘挸绨兼竟鏇㈡煟鎼淬垻鍟查柟鍑ゆ嫹");
			return true;
		}
		if ( fire.pb.mission.Module.getInstance().checkGather(roleid, conf) ) {
			return true;
		}
		return false;
	}
	private void gatherProcess( long roleid, int gatherid ) {
		// 
		SGatherConfig conf = ConfigManager.getInstance().getConf(fire.pb.npc.SGatherConfig.class).get(gatherid );
		if ( conf == null ) {
			Module.logger.error( "婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁诡垎鍐ｆ寖缂備緡鍣崹鎶藉箲閵忕姭妲堥柕蹇曞Х椤撴椽姊虹紒妯哄闁诲繑宀稿畷瀹狀槾缂佽鲸鎸婚幏鍛矙濞嗙偓娈洪梻浣侯焾椤戝啴宕愬┑鍡╁殨閻犲洦绁村Σ鍫ユ煏韫囨洖顫嶉柕濠忚礋娴滄粓鏌￠崘銊ワ拷鍝ユ暜閼哥偣浜滄い鎰枑濞呭洨绱掓潏銊﹀鞍缂佹鍠愮换婵嬪礃椤垳绱﹂梻鍌氬�风粈浣圭珶婵犲洤纾婚柛鈩冪☉缁愭鏌熼幑鎰【濠殿噮鍓熼弻銊╂偄閸撲胶鐓撳┑顔硷工椤嘲鐣烽幒鎴僵闁告鍎愰弶鍝ョ磽閸屾瑧顦︽い鎴濇閺侇噣鏁撻悩鍙夌�悗骞垮劚椤︻垳鐚惧澶嬬厱妞ゆ劑鍊曢弸鏃堟煕濮楋拷缁犳牕顫忓ú顏勪紶闁告洖鐏氭瓏婵犵數鍋涢ˇ鏉棵哄Ο鑲╃焿闁圭儤顨呴～鍛存煏閸繃锛嶆慨濠冨缁绘繈濮�閿濆懐鍘梺鍛婃⒐閻楃娀骞冮敓鐘参ㄩ柨鏂垮⒔閻﹀牓姊婚崒姘卞缂佸甯¤棢闁绘劗鍎ら悡娆撴煕韫囨洖甯跺┑顔肩Ч閺岋紕浠﹂崜褎鍒涢悗娈垮櫘閸撴瑩鍩㈡惔銊ョ畾鐟滃秵绔熸惔銊︹拻濞达絿鐡旈崵鍐煕閻樻剚娈滈柕鍡楀暣瀹曘劍娼忛崜褏鈼ゆ繝鐢靛█濞佳囶敄閹版澘鏋侀柛銉墯閻撶喖鏌熼柇锕�澧紒鐙欏洦鐓欓柧蹇ｅ亞閹冲洦鎱ㄦ繝鍕笡闁瑰嘲鎳樺畷銊︾節閸愩劌澹嶉梻鍌欑閹碱偊鎮у鍫濈婵炲棙鍨靛鍙夌節绾版ɑ顫婇柛顭戝灣閹峰啴鏁冮崒姘優濠德板�曢幊蹇涙偂閺囥垺鐓涢柛銉ｅ劚婵″ジ鏌ｈ箛鏇炐ｆい銊ｅ劦閹瑩顢旈崟顓濈棯濠电儑绲藉ú銈夋晝椤忓牄锟戒礁鈽夊Ο閿嬫杸闂佺硶鍓濋〃鍡涘磿椤忓牊鐓熼柣鏂挎憸閻绻濋姀鈽呰�挎鐐诧龚缁犳盯寮撮悢宄扮哎婵犵數濞�濞佳囶敄閸℃稑纾婚柕濞炬櫆閳锋帡鏌涢銈呮灁闁崇鍎崇槐鎺楊敊閼测晛鐓熷┑顔硷攻濡炰粙骞冮悜钘夌骇闁圭瀛╅惁锝囩磽閸屾瑨鍏岀紒顕呭灦瀹曟繂鈻庨幘宕囩暫闂佽鍨庨敓浠嬪绩娴犲鐓曟い鎰Т閻忣噣鏌ｉ幘瀛樺碍闁宠鍨块幃娆撳矗婢舵ɑ锟ラ梻浣侯焾椤戝棝骞愰崜褎顫曢柣鎰摠閸庣喖鏌曡箛瀣伄闁伙箑鐗撳鍝勑ч崶褏浼堝┑鐐板尃閸曨厼鈪伴梻鍌氬�烽懗鍫曞储瑜忕槐鐐寸節閸曨厺绗夐梺鍝勭▉閸樹粙宕戝Ο姹囦簻闁哄浂浜濈�氳绻濆▓鍨珯闁归鍏樺娲倷閽樺濮ら柣蹇撶箲閻熝呭垝鐠囧樊娼╅柤鍝ヮ暯閹锋椽姊婚崒姘卞缂佸鎸婚弲鍫曞即閵忊�筹拷鍨叏濡厧甯堕柡瀣ㄥ�濋弻鐔风暋閹殿喚楔闂佽鍟崶褔鍞跺┑鐘诧工閹虫劙鎮鹃悙顑跨箚闁绘劦浜滈敓鑺ョ墵瀹曟繂螖娴ｇ懓寮块梺鍦檸閸犳寮查幖浣圭厾闁诡厽甯掗崝銈咁熆瑜旀禍鍫曞蓟閻旇偐宓侀柛顭戝枤娴犲ジ姊虹�圭媭娼愰柛銊ョ秺閺佹捇寮妶鍥┬ｆ繛瀛樼矌閸嬨倕鐣烽姀銈嗙劶鐎广儱妫岄幏娲煟閻樺厖鑸柛鏂跨焸瀵顓奸崶鈺冿紲濡炪倖姊婚弲顐﹀箠閸愵喗鐓熼柨婵嗘噹濡茬粯銇勯锝囩煉闁轰焦鎸荤粋鎺旓拷锝庝簼濡差剟姊洪弬銉︽珔闁哥噥鍨遍崚濠囧箻椤旇В鎷洪梺鍓茬厛閸ｎ噣宕曢幇鐗堢厓缂備焦蓱缁�瀣叏婵犲偆鐓肩�规洘甯掗～婵嬵敆婵犲啫顏堕悗鐟板閸ｇ銇愰幒鎴犲�炲銈嗗笒椤︿即寮查鍫熲拺闁告繂瀚埢澶愭煕濡亽鍋㈢�规洖缍婂畷鎺懶掗鐐电Ш鐎规洘顨婂畷妤呮嚃閳哄啠鏋忛梻鍌欑劍閻綊宕愰妶澶婇棷闁挎繂顦拑鐔兼煃閳轰礁鏆欑紒鍓佸仱閹鏁愭惔婵堟晼婵炲濮撮妶绋款潖濞差亜浼犻柛鏇ㄥ墾缁便劎绱撴担鍝勑ｉ柟鐟版搐椤曪絾绻濆顓熸珳婵犮垼娉涢敃锕傛儓閸曨垱鈷戠紒瀣濠�鐗堛亜閵娿儲顥犻柨鐔诲Г绾板秹鎯勯姘兼綎闁绘垶蓱婵粓鏌熷▓鍨珮婵″樊鍠氱槐鎾存媴閸撳弶楔闂佽桨绀侀…鐑芥偘椤曪拷瀹曞ジ濡烽妷搴樻櫊閺屾洘寰勫Ο鐑樼亶閻庣偣鍊栧钘夘潖閾忕懓瀵查柡鍥╁仜閳峰顪冮妶鍐ㄥ闁硅櫕锕㈠畷鍝勨槈濞嗗繒绐為悗鐧告嫹闁跨喓鏅竟鏇㈡寠婢规繂缍婇弫鎰緞濡椿妫栨俊鐐�х拋锝夋⒔閸曨垰桅闁告洦鍨伴崡鎶芥煏婵炲灝鍔氱紒鐘侯嚙閳规垿鍨鹃崘鑼獓闂佸憡姊归悷鈺呮偘椤斿槈鐔煎礂閻撳海褰撮梻浣藉亹閳峰牓宕滈妸褎顫曢柛娆忣槺缁★拷濠电偛鐗嗛悘婵嬪几閻斿吋鐓ラ柡鍥殕濞呭﹦锟借娲橀〃鍛村煡婢舵劕顫呴柣妯兼暩瀹曡泛鈹戦悩鍨毄濠殿喗娼欑叅闁挎洖鍊搁悡鏇㈡煙鏉堥箖妾柣鎾跺枛閺岋綁寮幐搴℃殘缂備浇娉涘鍓佹崲濞戙垹閱囨慨姗嗗幗閻濇岸姊洪崫鍕伇闁哥姵鐗曢悾宄扳枎閹炬緞褔鏌涢埄鍐炬濞寸》鎷�?" + gatherid );
			return;
		}

		if ( !checkGatherTask( roleid, conf ) )
			return;

		fire.msp.npc.GCheckGathering send = new fire.msp.npc.GCheckGathering();
		send.gatherkey = npckey;
		send.roleid = roleid;
		fire.pb.GsClient.sendToScene( send );
	}
	
	public static void getScenarioQuests( 
			final long roleid,
			final int npcid, 
			SVisitNpc svisitNpc ) {
		try {
			svisitNpc.scenarioquests.clear();
			svisitNpc.scenarioquests = new fire.pb.mission.MissionColumn(roleid, true).getMissionsByNpcid(npcid, svisitNpc);
			Collections.sort(svisitNpc.scenarioquests);

		} catch ( Exception e ) {
			e.printStackTrace();
		}
	}
	
	private void onVisitNpc( final long roleid, final SNpcShare share ) {
		//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁橈耿瀵鏁愭径濠勵吅濠电姴鐏氶崝鏍礊濡ゅ懏鈷戦悹鎭掑妼閺嬫瑦淇婇銏狀伃鐎规洘鍔欏畷鐑筋敇閻樼數鍔归梻浣告贡閸庛倕螞閹达箑绠柣鎴ｅГ閺呮煡骞栫划鐧告嫹閼碱剙鍤┑鐘垫暩閸嬫盯骞婂畝鍕瀭闁芥ê顦藉鏍ㄧ箾瀹割喕绨奸柛銈呯Ч閺屾洘寰勬繝鍌涚亾婵炲瓨绮犳禍锝呂涢悢濂夋富闁靛牆妫涙晶閬嶆煕鐎ｎ偆鈽夐弫鍫ユ煛鐏炶鍔滈柍閿嬪灦閵囧嫰骞掗悙鏉戭伓缂傚倷绀侀ˇ閬嶅极婵犳艾绠栭柨鐔哄Т鍞梺鍐叉惈閸婂宕㈡禒瀣拺闁告繂瀚弳娆撴煕婵犲懎鍚归柡渚囧枛閳藉鈻庡鍕泿闂備線娼чˇ顓㈠磿閸濆嫀锝夋惞閸︻厾锛滈柡澶婄墑閸斿秶浜搁鐔翠簻闁瑰墽鍋ㄩ崑銏拷瑙勬处娴滎亜鐣峰锟介、姗�鎮欓弶鎴濆濠电姴鐥夐弶鍖℃嫹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋娆忕仼闁汇値鍠楅妵鍕箛閳轰礁濮㈡繛瀛樼矆缁瑥顫忓ú顏呭殥闁靛牆鎲涢姀锛勭婵炴潙顑嗗▍鍥瑰鍜佺劸闁宠閰ｉ獮瀣偐闂堟稓顔岄梻鍌欒兌缁垶宕濆Δ鍛？闁靛牆顦悡鏇㈡煙鐎电校闁哥姵鍔欓弻锝呂旈敓浠嬫偋閸℃瑧绠旈柟鐑樺殮閻熼偊鐓ラ柨鐔剁矙瀹曪繝骞庨挊澶庢憰濠电偞鍨崹鍦不婵犳碍鍊甸梻鍫熺♁閸熺偤鏌涢敍鍗炲枤濞撳鏌曢崼婵囶棡缂佸矁娉曠槐鎺楃叓椤撶姷鐓撻梺璇″櫍缁犳牠寮幘缁樺亹鐎规洖娲ゆ慨娲⒒娴ｇ懓顕滄俊顐＄铻為柛鏇ㄥ灡閸庡﹥绻濇繝鍌滃闁抽攱甯掗妴鎺戭潩閻愵剙顏舵繝鐢靛仒閸栫娀宕堕妸銉ょ綍闂備胶纭堕崜婵嬪Φ閸屾埃妲堟俊顖炴敱椤秴鈹戦悙鍙夘棡闁告梹鐗犻幃闈涚暋闁附瀵岄梺闈涚墕濡绮幒妤佸�垫慨妯煎帶瀵噣鏌熼鍡欑瘈闁诡喒鏅犲畷褰掝敃閵忥紕锟介箖姊绘担铏瑰笡妞ゃ劌鎳橀幃褔宕卞▎鎴犵暥閻熸粍妫冨濠氭晲婢跺娅滈梺绯曞墲鑿уù鐘灲濮婃椽宕烽褏鍔搁梺鎸庢处娴滎亪鐛崘顔碱潊闁靛牆妫楁禒蹇涙煟鎼淬垻鈾侀柨姘亜韫囨挾鍩ｆ慨濠呮閹奉偅鎯旈垾铏闂佸摜鍠撻崑銈夊箖濡わ拷椤繈顢楅崒婧炪劌鈹戦纭锋敾婵＄偠妫勯悾鐑藉Ω閿斿墽鐦堥梺鍛婂姦閻撳牆危闁秵鈷掑ù锝呮啞閸熺偤鏌熺粙娆剧吋闁诡垰瀚伴、娑橆潩鏉堛劍顔曢梻渚�娼х换鍫ュ磹閺囩姷涓嶉柣鐔稿櫞瑜版帗鏅查柛娑卞幖鏉堝懘姊鸿ぐ鎺撴暠婵＄偠妫勯～蹇撁洪鍕獩婵犵數濮撮崯顐︽瀹ュ鍋℃繝濠傚缁舵煡鏌涢悤浣哥仯缂侇喖顑呴濂稿幢濞嗘ɑ绁梺璇插嚱缂嶅棝宕戦崱娑樺偍闂侇剙绉甸悡鐔煎箹閹碱厼鐏ｇ紒澶愭涧闇夋繝濠傚閻帗銇勯姀鈩冾棃妞ゃ垺妫冨畷濂告偄閸濆嫬绠伴梻鍌欑閹诧紕绮欓幒鎴唵婵鎷烽柟顕嗙節楠炲洭鎮ч崼婵撴嫹闂堟耽褰掓晲閸涱厽娈繛瀛樼矊缂嶅﹪寮婚妸鈺傚亜閻犲洦鐣幘鍓佺＜閻庯綆鍋勫ù顕�鏌℃担鍓插剱缂佺粯绋撻敓鐣屾暩椤牆鐡梻浣告贡閳峰牓宕戞繝鍥х伋闁哄啫鐗嗙粈鍐┿亜閺傛寧顫嶇憸鏃堝蓟濞戙垹鐒洪柛鎰典簼閸Ｑ冾渻閵堝骸锟姐倝宕ㄩ婊愮床闂備胶绮崝锕傚礈濮樿鲸顐介柤纰卞墰绾剧厧顭跨捄鐚村姛缂佸妞介弻锝呪槈閸楃偞鐝濋悗瑙勬礀瀹曨剟鍩ユ径濠庢建闁跨喍绮欏畷顒勫醇閺囩啿鎷洪梻鍌氱墛娓氭顬婅閳规垿鍨鹃搹顐㈡灎閻庤娲忛崹浠嬬嵁濮楋拷瀹曟粍鎷呴悮瀵搁棷闂傚倷鑳堕…鍫ュ嫉椤掑嫭鍋＄憸鏂跨暦濠靛棭鍚嬪璺侯儏閻濇棃鏌℃径濠勫闁告柨锕ョ粋宥咁煥閸喓鍘繝銏ｆ硾閻楀棝宕濋妶鍜佺唵鐟滃宕规禒瀣摕闁靛ň鏅滈崑鍕偣閸ャ劎鏆欓柟鐐暘娴滄粓鏌￠崘鎸庡闂佺粯顨堟慨鎾偩閻戣棄绾ч悹鍥╁亾濡啫鐣烽妸鈺婃晣闁绘瑱鎷烽柛鐐茬埣濮婄粯鎷呯粵瀣秷闂佺娴烽崢褑鐏嬮梺鍛婃处閸樼偓绋夊澶嬬厸鐎广儱鍟俊璺ㄧ磼閻樿崵鐣洪柡灞剧洴閸╁嫰宕楅埡鍌氱仼濞存粍鎮傞、姗�濮�閿涘嫬骞楁俊鐐�栭幐楣冨闯閵夈儮鏋旈柡鍐挎嫹闁靛洤瀚伴、姗�鍩勯崘顏傦拷濠囨⒑閸︻厽鍤�閻庢凹鍘剧划顓㈡偄绾拌鲸鏅┑顔斤供閸撴瑩藟鎼粹檧鏀介柨娑樺娴滃ジ鏌涙繝鍐ⅹ妞ゎ偄绻橀幃鐑藉箯閺冿拷閻╊垰鐣峰锟介垾锕傚箣閻愮數鈻夋繝鐢靛Х閺佸憡鎱ㄩ悽鍛婂殞闁告挆鍐炬闂佺绻楅崑鎰不妤ｅ啯鐓曢柍鈺佸幘椤忓牊鍊堕柕澶堝劗閺�浠嬫煃閵夈劌鐨洪柣顓熺懄閹便劍绻濋崒娑欏創闁绘挶鍊濋幃瑙勬媴閸濄儻绱為梺鐑╂櫅濞撮妲愰幘璇茬＜婵ɑ鐦烽姀銈嗙叆闁哄洦锚閿熻姤绻堥獮鍐箚瑜忛弳瀣煙娴ｅ啯鐝柡鍌︽嫹闂傚倷鑳剁涵鍫曞礈濠靛鍋￠柨鏇嫹闁崇粯鎹囧鎾閳撅拷閹锋椽姊洪崨濠勨槈闁挎洏鍎插鍕礋椤栨稓鍘遍柣搴秵娴滄繈宕宠ぐ鎺戠閺夊牄鍔婃禍婊堟煙閻戞ê鐏ユい蹇ｄ邯閺屽秹鏌ㄧ�ｎ亞浼岄梺鍝勬湰缁嬫垿鍩為幋锕�骞㈡俊銈咃梗缁辨繃绻濈喊妯哄⒉鐟滄澘鍟扮槐鐐寸節閸パ嗘憰闂佹寧绻傞幊澶娢ｉ崼鐔虹闁糕剝顨堢粻鍐裁归悡搴ゅ闁宠鍨块、娆戞兜瀹勯绱ｆ俊鐐�ら崢濂稿床閺屻儲鍋╅柣鎴ｆ缁犳娊鏌熺�涙ɑ鈷愰柣搴☆煼濮婃椽鎮烽幍顔芥喖缂備浇顕ч崐鍧楀灳閺嶃劌绶為柟閭﹀幐閹锋椽鏌ｉ悩鍙夋悙鐎殿喖鐖奸獮鎴︽晲婢跺鍘介梺缁樻⒒椤牓鍩㈤弴鐙呮嫹鐟欏嫭纾搁柛鏃�鍨块妴浣糕槈濮楀棛鍙嗛梺鍛婁緱閸樿偐绮诲鑸碘拻闁稿本鑹鹃敓鐣屽厴閹虫宕奸弴姗堟嫹娴ｅ湱绡�闁搞儜鍜佸斀婵＄偑鍊曠换鎰涘☉娆戔枖鐎广儱顦伴悡娆撴倵閻㈡鐒炬い搴㈡崌閺岀喎鐣￠弶鎸幮╁銈庡亝缁诲牓銆佸Δ浣哥窞閻庯絾鎸嗛崶銊㈡嫼闂傚倸鐗婄粙鎺楀箹閹扮増鍊垫慨姗嗗亜瀹撳棝鏌ｅ☉鍗炴珝妤犵偞甯掕灃闁跨喓鏅划濠氭晲閸℃瑧鐦堥梺鍓茬厛閸嬪嫭鎱ㄩ崘顔界厵妞ゆ洖妫涚粔顔芥叏婵犲嫮甯涢柟宄版嚇瀹曘劍绻濋崘銊ュ闂備浇顕х�涒晠宕惔銊ョ闁瑰瓨绻勯弳锕傛煛閸ャ儱鐏柛瀣ㄥ妿缁辨帞锟斤綆鍘奸崝鐢告煙閼恒儲绀�闁宠鍨块幃娆撳级閹寸姳妗撻梺鑹帮骏閸婃牗绌辨繝鍥х闁圭儤鏌ㄩ埅鐢告⒑閸濆嫭婀扮紒瀣灱閻忓啴姊洪崨濠傚闁告柨顑夐獮瀣煥鐎ｎ剛顔曢柣搴ｆ暩椤牓顢撳畝鍕厱婵炲棗绻愰弳锝囷拷娈垮枛椤兘寮幇鏉块唶闁靛繈鍨哄鎴︽⒒娴ｇ瓔娼愮�规洘锚閻ｇ兘妫冨☉姘濡炪倕绻愰悧濠囧煕閹达附鐓熼柣鏂挎啞缁跺弶绻涢崼姘珚闁哄瞼鍠栧畷娆撳Χ閸℃浼�?
		if (share.npctype == 16) {
			fire.pb.instancezone.Module.visitNpc(roleid, npckey, share);
			return;
		}
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇牠姊绘担鑺ョ《闁哥姴绉堕崚鎺戔枎閹惧磭鐣洪梺绉嗗嫷娈㈤柡浣割儔閺屻劑鎮㈤崜浣虹厯閻庢鍠栭…宄邦嚕閹绢喗鍋勯柧蹇氼嚃閸熷酣姊绘担铏瑰笡闁告棑绠撳畷婊冾潩閼搁潧浠ч梺鍝勫暙閸婅崵澹曟總鍛婄厽闁逛即娼ф晶顕�鏌涢弬璇诧拷鏍崲濞戞矮鐒婇柡宥呯仛鐎氬綊鏌熸０浣哄妽缂傚秴楠搁埞鎴︽倷閸欏鏋欐繛瀛樼矊閻栫厧顕ｉ锕�骞㈡繛鎴炵懅閸欏棝姊虹紒妯烩拻闁稿簺鍊曢埢宥夊即閻樼數锛滃銈嗘婵倝藟閸儲鐓欐い鏃傚亾濞呮洜绱掗鐣屾噮闁圭懓瀚伴垾锕傚箳閺傝儻锟藉灝鈹戦悩鍨毄濠殿喕鍗冲畷瑙勭附缁嬫寧妲梺鍝勭▉閸樿偐绮堟径鎰厸鐎广儱楠搁獮妤呮煕鐎ｎ亜锟藉潡寮婚敓鐘茬倞闁宠桨鐒﹂悗顓熺箾鐎涙鐭嬬紒顔芥崌瀵鎮㈤悡搴ｉ獓闂佸壊鐓堥崳顕�寮抽姀銏㈢＝濞达絽澹婇崕鎾讹拷瑙勬礈閺佺危閹版澘绠虫俊銈勭劍濞呫垺绻涚�电孝妞ゆ垵妫濆鏌ュ箹娴ｅ湱鍘介梺鎸庣箓閹虫劙鎮樻潏鈺冩／闁硅鍔栭ˉ澶愭煏閸℃ê绗掓い顐ｇ箞椤㈡绻濋崘鈺傛瘞闂備浇顕х�涒晠鎳濋崜褏绀婂┑鐘插亞濞兼牗绻涘顔荤盎缂侊拷閸儲鐓欑紓浣姑粭鍌滅磼閵娿倗鐭欐慨濠冩そ瀹曨偊濡烽妷鎰╁灪娣囧﹪顢曢敐鍥ㄥ櫘缂備緡鍠栭鍛搭敇婵傜妞藉ù锝呮惈瀵娊姊绘担绋款棌闁稿妫濆畷浼村箻鐠囨彃鍋嶉梺褰掓？閻掞箓宕愰崹顐闁绘劘灏欐禒銏ゆ煕閺冿拷瀹�鎼佸蓟濞戙垺鍋嗗ù锝夋櫜缁ㄥ吋绻涢敐鍛悙闁挎洦浜滈悾椋庣矙鐠囩偓姊归幏鍛村传閸曨偆鐟查梻鍌氬�风粈渚�骞夐敓鐘冲仭闁挎繂顦壕璺拷瑙勬礀濞层劑鎮虫繝姘厸闁告劑鍔庢晶娑㈡煟閹惧銆掗柨鐔烘櫕濞呫垽骞忛悜鑺ョ叆闁绘柨澧庨惌娆戯拷瑙勬磻閸楀啿顕ｆ禒瀣垫晣闁绘劗鏁搁弳顐ｇ節閻㈤潧孝闁挎洏鍊濋幃褔宕卞▎鎴滅瑝闂佹寧绻傞ˇ浼存偂濞嗘挻鐓熼柟瀵稿�栭幋鐘辩剨妞ゆ挶鍨洪悡娑㈡倵閿濆啫濡奸柨鐔诲Г缁诲倿锝炶箛鏇犵＜婵☆垵顕ч鎾绘⒑閸涘﹦鈽夐柨鏇樺劦瀹曟洟骞樼紒妯锋嫼濠电偠灏褔鐛弽銊ｄ簻闁挎洩鎷风�规洦鍓熼、姘跺Ψ閿斿墽鐦堥梺鍛婂姦娴滆泛霉閸曨垱鐓熼幖鎼灣缁夐潧霉濠婂懎浠辩�规洏鍨介獮姗�顢欑憴锝嗗闂備礁鎲＄粙鎴︽晝閵堝棙鍙忛柨鏇炲�归悡鏇㈡煟濡澧繛鍫熺矌閿熷�燁潐濞叉﹢宕濆▎鎾宠摕闁靛ě宥嗗闁挎繂鍟俊铏圭磼閵娿儺鐓兼慨濠冩そ閹兘鎮ч崼鐔峰壍缂傚倷绀侀ˇ閬嶅礂濡櫣鏆︽俊銈忔嫹闁伙絾绻堥弫鎾寸鐎ｎ亞鐤呴梺褰掓？缁�浣虹棯瑜旈弻鐔虹矙閸喚妲板┑鈽嗗亖閸婃妲愰幘瀛樺濞寸姴顑呴幗鐢告⒑閸︻収鐒炬い顓犲厴閻涱喛绠涘☉妯虹獩濡炪倖鏌ㄩ幖顐ｇ娴煎瓨鈷戦柛锔诲弾閻掗箖鎮楅崹顐㈡诞闁轰焦鎹囬幊鐐哄Ψ椤旂晫鏉规繝娈垮枛閿曘儱顪冮挊澶屾殾闁靛濡囩粻楣冩煙閻戞绠戦梺顓у灠閳规垿鍨惧畷鍥х厽濡ょ姷鍋為悧妤呭箯閸涙潙浼犻柕澹嫭鐦掗梻鍌氬�风欢姘焽瑜旇棟妞ゆ劧绠戦悿鐐節婵犲倻澧曠痪鎯ь煼閺屾稑鐣濋敓浠嬪磻濞戞氨涓嶇憸鐗堝笒缁狙囨煕椤愶絿绠撻柍閿嬫⒒缁辨帞锟斤綆鍓涚敮娑氱磼缂佹娲寸�规洖銈搁幃銏犵暋閺夊晝鎴︽⒒娴ｅ摜鏋冩い顐㈩樀瀹曞綊宕稿纭锋嫹娴ｇ硶鏋庨柟瀵稿█閳瑰繘鏌ｆ惔顖滅У闁稿甯″畷銉╁川鐎涙ǚ鎷绘繛杈剧到閹诧紕鎷归敓鐘崇厱闊洦妫戦懓鍧楁寠閻斿吋鐓欓柛鎾楀懎绗￠梺鍝勬噺閹倿寮诲☉娆戠瘈闁告洦鍋呴悵鈥斥攽閻愭彃鎮戦柛鏃�鐗滈幑銏犫槈閵忕姷顔岄梺鍦劋濮婂顢欓幒妤佸�甸悷娆忓缁�鍐磼鐠囪尙澧﹂柣娑卞枤閿熸枻缍嗛崰妤呭疾濠婂牊鐓熸慨姗嗗墰閹界娀鎮楀杈ㄥ殌闂囧鏌ㄥ┑鍡樺窛闁靛棗锕ユ穱濠囧箵閹烘柨顤�婵烇絽娲ら敃顏堛�佸☉銏″�烽悗娑櫳戝▓鍛婁繆閻愵亜锟姐倝宕戦崟顓犵煋闁圭虎鍠栭悡姗�鏌熸潏鎯х槣闁轰礁锕弻锟犲磼濡尨鎷烽幘鑸殿偨闁汇垹鎲￠埛鎴︽煕濞戞ǚ妾ㄩ柤娴嬫櫅閸ㄦ繃绻涢崱妯诲蔼闁跨喐鍨濈粈渚�鍩㈡惔銈囩杸闁挎繂鎳忛鍨攽閻樼粯娑фい锕備憾閹敻鏁撻敓锟�
		if (share.npctype == 17) {
			fire.pb.mission.instance.InstanceManager.visitNpc(roleid, npckey, share);
			return;
		}
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸♀晜效婵炲瓨鍤庨崐婵嬪蓟閵堝绾ч柟绋块娴犳潙鈹戦纭锋敾婵＄偘绮欓妴浣肝旈崨顔芥闂佷紮绲介惉濂告儗閹剧粯鍊甸梻鍫熺♁閹茬鈽夐幘宕囆ч柡宀嬬到铻ｉ柤娴嬫櫅缁楋繝姊虹紒妯诲鞍闁荤啿鏅犲濠氭偄绾拌鲸鏅梺绯曞墲椤ㄥ懘寮抽悙娣簻闁哄喛鎷烽柛銊ョ仢椤繐煤椤忓嫮顔愰梺缁樺姈瑜板啯鎱ㄩ崼鏇熲拺闁告稑锕ョ亸鎵拷鐧告嫹缂佸娉曢弳锕傛煙鏉堝墽鐣遍幆鐔兼⒑閸愬弶鎯堥柛濠傤煼瀹曘垽鏌嗗鍡忔嫼闁荤喐鐟ョ�氼剟宕濋妶澶嬬厱闁绘梻绮涵鍫曟煟閵夘喕娴锋い锕�缍婇弻鈥崇暆鐎ｎ剛鐦堥悗瑙勬磸閸旀垿銆佸☉姗嗘僵妞ゆ劑鍊栧畷鐔兼⒒閸屾瑧顦﹂柣銈呮喘閿濈偞寰勯幇顒�鐎梺鍓插亝濞叉粌鐣垫担绯曟斀闁绘ê寮舵径鍕煟閹惧瓨绀�闁宠鍨块幃鈺呭箵閹烘挻顔夐柣搴ゎ潐濞叉牠鎯岄崒鐐茶摕闁绘柨鍚嬮幆鐐淬亜閹伴潧浜濋柣銈勭窔閹鎲撮崟顒傤槬闂侀潧鐗忛…鍫ヮ敋閿濆绾ч柟鎼幗瀵ゆ椽姊洪崜鎻掍簽闁哥姴閰ｉ、鏃堝醇閺囩啿鎷洪梺鍛婄☉閿曪箓鍩ユ径鎰厽閹烘娊宕濋幋婵堟殾闁归偊鍘剧弧锟藉┑顔斤供閸橀箖宕㈡ィ鍐┾拺閻犲洠锟藉啿绠洪柣銏╁灡鐢�崇暦濠靛棭娼╂い鎴犲仜缂嶅﹪骞冮鍫熸櫢濞寸姴顑呴崹鍌炴偣鏉炴媽顒熸繛鍏肩墬缁绘稑顔忛鑽ょ泿缂備胶濮寸紞濠囧蓟閿濆绠涙い鎾跺仧缁侀攱绻濆▓鍨灈闁活厼鍊搁～蹇撁洪鍕獩婵犵數濮撮崯浼村矗閸℃稒鈷戞繛鑼额嚙婢т即鏌涘Ο鐘叉祩閺佸鏌曟径娑橆洭缂佲槄鎷烽梻浣告啞濞诧箓宕㈡ィ鍐╂櫖婵犲﹤鍟犻弨浠嬫煃閽樺顥滈柣蹇ョ畵閺岋繝宕ㄩ弶璺ㄦ闂佸ジ缂氭禍顒勫箯閻樺樊鍟呮い鏃囨閻︽粓姊绘笟锟藉褔鎮ч崱妞㈡稑螖娴ｇ懓寮挎繝銏ｆ硾鑹岄柡锟介懞銉ｄ簻闁哄啫娲よ闁诲繐楠忕粻鎾诲蓟閳╁啯濯撮悷娆忓绾炬娊姊洪悷鎵紞闁稿鍊栨穱濠囨偪椤栵絾鞋闂備焦鐪归崐鏇狅拷姘嵆楠炲啫螖閿熶粙鍩㈤幘璇插瀭妞ゆ梻鏅禍顏呬繆閻愵亜锟姐倝宕㈡ィ鍐ㄧ婵☆垯璀﹂崵鏇熴亜閹板墎鐣辩紒鐘崇洴閺屸剝寰勬繝鍕檸缂備焦鍔栫粙鎴︹�旈崘顔嘉ч柛娑卞灣椤斿洭姊洪悷鏉挎毐缂佺粯锚椤曪綁鎼归銈囩槇闂佹悶鍎崝澶愬箯缂佹绠鹃弶鍫濆⒔缁夘剚绻涢崪鍐偧闁轰緡鍠栭埥澶愬閿涘嫬骞堥梻浣告惈閸燁垶骞愭ィ鍐╁仼闁汇垻顣幏椋庢喆閸曨剛顦ㄧ紓渚囧枛閻倿鏁愰悙娴嬫斀閻庯綆鍋勫▓婵嬫⒒閸屾氨澧涚紒瀣姍楠炲鎮滈懞銉㈡嫽婵炶揪绲介幉锟犲箚閸喓绠鹃悘鐐插�告俊浠嬫煙娓氬灝濡芥い锔惧閹棃鍩ラ崱姗嗘％闂傚倷绀侀崥瀣矈閹绢喖鐤炬繝闈涚墕椤ユ岸鏌﹀Ο渚＆鐟滅増甯楅弲鎻掝熆鐠轰警鍎愰梺娆惧弮濮婅櫣鎷犻懠顒傜暰闂佸搫鎳忕划鎾诲Υ閸愵喖唯闁冲搫鍊搁敓鐣屽厴閹鎮藉▓璺ㄥ姼闂佸啿鍢查惌鍌氼潖濞差亜浼犻柛鏇ㄥ幘閸斿湱绱撻崒姘毙＄紒锟芥笟锟介、姘舵晲閸℃瑯娴勯柣搴到閻忔岸寮插┑瀣拺闂傚牊绋撶粻鍐测攽椤旇偐锛嶉柛鎺撳浮椤㈡盯鎮欑划瑙勫濠电偠鎻紞渚�藟閹惧鈻旈柤纰卞墰绾惧ジ妫呴顐㈠箻闁活厽鐟ч敓鍊燁潐濞叉﹢鎮￠垾鎰佸殨濠电姵鑹惧敮濡炪倖鐗楃划搴ㄥ煟閵堝棛绡�闁汇垽娼у瓭闂佹寧娲忛崐婵嬪箖瑜庣换婵嬪炊瑜忛弻褔姊鸿ぐ鎺擄紵闁绘帪绠撻幃锟犲閳ヨ尙绠氬銈嗙墬閻熴劑顢楅悢闀愮箚闁告瑥顦伴妵婵嬫煛瀹�瀣瘈鐎规洟浜堕、姗�鎮╅崹顐ｎ啌闂傚倷绀侀幖顐﹀嫉椤掞拷鐓ゆ俊顖氬悑瀹曞弶绻涢幋娆忕仾闁稿﹪鏀遍妵鍕箳瀹ュ牆鍘￠悷婊勫閸犳牕顫忕紒妯诲闁兼亽鍎敓钘夊暟缁辨帡鏁撻懞銉﹀闁惧繐婀遍悡瀣⒑濮瑰洤鐏╅柣蹇旇壘閻ｇ兘宕ｆ径宀�顔曢梺鐟扮摠閻熴儵鎮橀埡鍐＜闁绘瑥鎳愮粔顕�鏌″畝瀣М妤犵偛娲、妯款槻闁哄懘浜跺娲传閸曨剦妫忛梺璺ㄥ枙婵倝寮告總绋跨哗濞寸姴顑嗛悡鐔兼煙闁箑鐏犻柣銊ユ惈椤儻顦伴柛銊ょ矙瀵鏁愰崨顏呮杸闂佸壊鍋嗛崰鎾活敊婵夛拷
		if (share.npctype == 28) {
			if (mkdb.Transaction.current() != null) {
				new fire.pb.circletask.catchit.PSendCatchItNpcService(share.getId(), npckey, roleid).call();
			}
			else {
				new fire.pb.circletask.catchit.PSendCatchItNpcService(share.getId(), npckey, roleid).submit();
			}
			return;
		}
		
		//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柛婵嗗椤忋儵鏌涙惔銊ゆ喚闁糕晝鍋ら獮瀣晜閽樺姹楅梻浣告啞閻熴儵藝娴兼潙绠栨繛鍡樺灩绾捐棄霉閿濆懏鎯堟い搴＄焸閺屾盯濡搁妷褍鐓熼悗娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭花浠嬫⒒娴ｄ警鐒鹃柡鍫墰缁瑩骞嬮敂缁樻櫆闂佽法鍣﹂幏锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁诡垎鍐ｆ寖缂備緡鍣崹鎶藉箲閵忕姭妲堥柕蹇曞Х椤撴椽姊虹紒妯虹仴婵☆偅鐩畷婵嬵敍濮橈絾鏂�闂佺粯鍔栧娆撴倶閿斿浜滄い鎾跺仦閸犳锟芥鍠楁繛濠傜暦閸楃偐妲堟繛鍡樺灥楠炲牓姊绘担鍛婃儓婵炲眰鍨藉畷婵堜沪閸撗屾锤闂佺粯鍔栭悾顏呯濠婂牊鐓ラ柡鍐ㄦ祩閸ゆ瑧锟芥鍣崰妤呭箞閵婏妇绡�闁告侗鍣禒鈺呮⒑閸︻厽鍤�閻庢氨澧楁穱濠囧箹娴ｈ倽銊╂煥閺冿拷閸庡磭绱為幒妤佲拻闁稿本鐟ㄩ崗宀勬煙閾忣偅宕岀�规洜鏁诲浠嬵敇閻愭鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭弻鍥晝閿熶粙寮稿☉銏＄厱闁靛濡囩粻姗�鏌ㄩ悢鐑樻珪婵炲懌鍨介獮蹇涙倻閼恒儳鍙嗛梺缁樻⒒閸庛倕鈻嶉弴銏＄厱闁圭儤鎸稿ù顔撅拷娈垮櫘閸ｏ絽鐣锋總鍛婂亜闁炬艾鍊荤槐锕傛⒒閸屾瑧鍔嶉柣顏勭秺瀹曞綊鎸婃径妯煎姺閻熸粌绉归幃楣冩倻閽樺）銊╂煃閸濆嫬锟界敻骞忛搹鍦＝闁稿本鐟ч崝宥夋嫅闁秵鐓冮梺鍨儏濞搭噣鏌＄仦鍓р槈閾伙綁鏌ｅΟ鍝勭骇濠㈣泛瀚伴弻娑欑節閸屾碍些闂佸疇顫夐崹鍧楀箖閳哄懎绠甸柟鐑樻尰椤撴儳鈹戦悙鑼憼缂侇喖绉堕崚鎺楀箻鐠囪尪鎽曢梺缁樻煥閸氬骞嗛悙鐑樼厽闁绘梻鈷堥弳鎺撶箾瀹�濠侀偗闁哄矉绲鹃幆鏃堝閿濆拋妫熺紓鍌氬�哥粔鎾晝椤忓嫷鍤曞┑鐘崇閺呮煡鏌涢埄鍏狀亪宕濋崨瀛樷拺闂傚牊鐩悰婊呯磼闊厾鐭欓挊鐔哥節闂堟稒锛嶆繛鎾愁煼閺屾洟宕煎┑鍫㈩唺缂備礁褰夐崡鎶藉蓟濞戞鏃堝礋椤掑倸娑у┑鐑囩到濞层倝鏁冮鍫濈畺闁伙絽鐬奸惌娆撴偣娓氼垳鍘涙俊鑼额潐娣囧﹪鎮欓鍕舵嫹閺嶎厽鍋嬫俊銈忔嫹妞ゎ偅绻堟俊鎼佸煛婵犲啯娅撳┑鐘垫暩婵潙煤閿曞倸鐓曢柟杈鹃檮閻撶喖鏌ｉ弮鍌ょ劸妞ゃ儱顑夐弻鐔兼偩鐏炲彨銉х磼鏉堛劌绗х紒杈ㄥ笒铻ｉ柛婵嗗濞兼碍淇婇妶鍥ラ柛瀣〒閹广垹顫滈敓浠嬬嵁閸愵煈鐓ラ柛顐ゅ枎閻у嫭绻濋姀锝嗙【妞わ箓浜堕幃娆愮節閸ャ劉鎷绘繛鎾寸啲閹烽攱绻涙担鍐叉瘽閵娾晜鏅搁柣锝呯灱绾惧ジ鏌ｅΟ鍝勬毐闁诲繐鐡ㄩ妵鍕閳╁喚妫冨Δ鐘靛仦閻楁骞忛崨鏉戠濠㈣泛顑呴鍦磽閸屾艾锟芥悂宕愰悜鑺ュ�块柨鏇氱劍閹冲矂姊绘担铏瑰笡闁圭鐖煎畷鏇㈡偨缁嬭儻鎽曢梺缁樻煥閸氬宕靛澶嬬厪濠㈣鍨伴幊鎰板储閹烘梻纾介柛灞剧懅鐠愪即鏌涢悩宕囧⒌闁炽儻绠撻幃婊堟偩鐏炵晫銈﹂梻浣虹《閸撴繈宕欓悷閭︾�堕柕濞炬櫆閳锋垹绱撴担鑲℃垿鎮￠妷锔跨箚妞ゆ劧绲跨粻鐐搭殽閻愭彃鏆熼柟鍙夋尦瀹曠喖顢楅敓浠嬶綖閿熺姵鈷戦柣鐔告緲濡插鏌ｉ鐐靛ⅵ鐎规洘绻堝畷銊э拷娑櫱氶幏铏圭磽娴ｅ壊鍎忛柣蹇旂箞椤㈡濮�閵堝棛鍘遍梺鍝勫枦閹烽攱銇勯妸銉у閸楅亶鏌熼悧鍫熺凡缂佺姾娅曟穱濠囧Χ閸曨厼濡藉┑鐐叉噷閸ㄨ櫣鎹㈠☉姘炬嫹閻㈡鐒剧�涙繂顪冮妶鍡楃仴婵☆偅绻傞锝夋嚑椤掑倻鐓撳┑鈽嗗亰濞佳呯礊婵犲洤绠栭柍杞扮贰閸熷懏銇勯弮鍌氬付濠㈢懓顦靛缁樻媴閻熸壋鏋欓梺鐚存嫹闂侇剙绉撮崹鍌炴煕瑜庨〃鍛存嫅閻斿摜绠鹃柟瀵稿�戝璺虹哗濞寸姴顑嗛悡鏇㈡煛閸ャ儱濡煎ù婊勭矊閳规垿顢欓悡搴妷缂備胶绮粙鎾绘晸閻ｅ本鏆╂い顓炵墦椤㈡捇骞橀崜浣猴紲闂佺粯顭堝▍鏇炵暦瀹�锟介敓鑺ヮ問閸犳牠鈥﹂悜钘夌畺闁靛繈鍊栭崑鍌炲箹鏉堝墽纾块柣娑掓櫅閳规垿鎮╅崹顐ｆ瘎婵犳鍠楅幐鍐茬暦閹扮増鍋ㄧ紒瀣仢閸ゆ垵鈹戦悙鍙夘棞缂侇噣绠栧顕�宕奸悢铚傛睏闂傚倸鍊搁悧濠勭矙閹邦喖鍨濋悹楦裤��閺�浠嬫煃閽樺顥滃ù婊勭箘缁辨帞鎷犻幓鎺炴嫹閸ф绠栭柟顖嗗懏娈濋梻渚囧弿闂勫嫬顕欏ú顏呪拺閻犳亽鍔岄弸宥囩磼椤旂晫鎳囧┑鈥崇摠閹峰懐鍖栭弴鐔猴拷濠氭⒑閸︻厼浜炬繛鍏肩懃閳绘捇骞囬悧鍫氭嫼闂佸憡鍔曞鍫曞箚閸儲鐓ラ柡鍥崝姘舵煟閳藉棗骞樼紒杈ㄦ崌瀹曟帒顫濋濠冨闁归棿绀佺壕褰掓煙闂傚顦︾痪鎯ф贡閿熺晫鎳撶�氫即宕戞繝鍌橈拷鎺撶節濮橆厾鍘甸梺缁樺灦钃遍柍閿嬪浮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗娉涢埞鎴︽偐濞堟寧姣岄梺璺ㄥ枙濡嫮澹曢銏犳槬闁挎繂顦伴悡娑樏归敐鍫綈鐎规洖鐭傞弻鈩冩媴鐟欏嫬纾抽梺杞扮劍閹瑰洭寮幘缁樻櫢闁跨噦鎷�
		if (fire.pb.mission.instance.line.LineInstManager.getInstance().checkLineNpc(share.getId())) {
			fire.pb.mission.instance.line.LineInstManager.visitNpc(roleid, npckey, share);
			return;
		}
		// added by cn
		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇洟姊绘担钘壭撻柨姘亜閿旇鏋ょ紒杈ㄦ瀵挳濮�閳撅拷閹风粯绻涙潏鍓хК婵炲拑缍佹俊瀛樼節閸ャ劎鍘遍梺瑙勫劤椤曨厾绮婚悙鐑樼厵闁芥ê顦敓钘夘煼閺佹捇寮妶鍥┬ｉ梺鍝ュУ閻楃娀骞冨▎鎰瘈闁告劧缂氱花濠氭⒑绾懏顏犻柛瀣仧閿熻姤鑹惧﹢杈╂閹烘梻纾奸柕蹇曞Т娴煎酣姊鸿ぐ鎺濇闁稿繑锚椤繒绱掑Ο璇差�撻梺鎯х箳閹虫挾绮敓鐘斥拺闁告稑锕ラ悡銉х磼缂佹◤顏堫敋閿濆绠甸柟鐑樼箘閸欏棝姊洪崜鎻掍簽闁哥姴閰ｉ弫鎾诲磹閻斿摜銆愰梺闈涙鐢帡锝炲┑瀣�锋い鎺炴嫹妞ゅ繗鍩栫换婵嗏枔閸喗鐏堥梺鎸庢磸閸庨亶鈥旈崘鈺冾浄閻庯綆浜為悾娲⒑缂佹ê鐏卞┑顔哄�濋幃鐐寸鐎ｎ偆鍙嗛梺鍝勬祩娴滄繄锟芥氨鎳撻埞鎴︽倷閼碱剙顣洪梺缁樼墱閸樠囷綖韫囨稒鎯為柛锔诲幘閻撴挸鈹戦悙鍙夘棡闁稿孩濞婂畷婊堝箮閼恒儮鎷洪梺鍛婄缚閸庤鲸鐗庨梻浣虹帛椤ㄥ牊鎱ㄩ崹顐も攳濠电姴娲ょ粻缁樸亜閺冨倸甯剁紒鎰洴閺岋絾鎯旈姀鈶╂闂佹寧宀搁弻銊╂偄缂佹﹩妫勫銈庡幘閸忔ê顕ｆ繝姘у璺猴功閻ｆ娊姊洪崷顓炲妺闁搞劌鐏氶幈銊︽償閵忋垻顔曢柣搴ｆ暩椤牓顢撳畝鍕厱闁靛鍔嶇涵鐐亜椤愩垻绠伴悡銈嗐亜韫囨挸顏い鏃�鍔欏铏圭磼濡搫顫嶉悷婊勬緲閸燁垶骞堥妸銉ф殕闁告洦鍏橀幏娲⒑閸涘﹦鈽夐柨鏇樺劦閹繝濡烽埡鍌滃幗濡炪倖甯掗崐鍝ユ暜閼哥偣浜滈柡鍥崝婊呯磼缂佹绠炵�规洜鍠栭、姗�鎮崨顖氱哎婵犵數濮烽。钘壩ｉ崨鏉戝瀭闁割偅娲栭悿楣冩煠绾板崬澧插┑顔藉▕閹綊宕惰閳绘洘绻涢幘鎰佺吋闁哄本娲熷畷鐓庘攽閸ヨ埖顥ｅ┑鐘愁問閸犳牠藝椤栫偛鐓橀柟杈惧瘜閺佸﹪鏌ら幁鎺戝姎闁哥偛顦靛鐑樻姜閹殿喖濡介梺鍦嚀濞差參鐛繝鍥ㄥ�烽柛婵嗗珋閵娾晜鐓ラ柡鍐ㄥ�藉鍛婁繆閹绘帞绉烘慨濠勭帛閹峰懘鎼归獮鍖℃嫹婵犲洦鐓涢柛灞捐壘閿熻棄鐏濋悾鐑藉即閵忕姷顔岄梺鍦劋缁诲倸鈻撻锔解拺闁告稑锕ユ径鍕煕閵婏箑顥嬬紒顔款嚙閳藉鈻庡鍕泿闂備浇顫夊畷妯衡枖濞戙垹鍑犻柟瀵稿亼娴滄粓鐓崶銊︾闁哄绋掗幈銊︾節閸曨厼绗￠梺鐟板槻閹虫﹢骞婇悙鍝勎ㄧ憸瀣晸閽樺韬慨濠冩そ濡啴鍩￠崘顎倗绱撴担鍝勑ｉ柟鐟版喘閹即顢欑捄銊ф澑濠电偞鍨堕悷锕�鈻嶉姀銈嗏拺閻犳亽鍔屽▍鎰版煙閸戙倖瀚�?,闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存鐐达耿閹崇娀顢楁径瀣撴粓姊绘担瑙勫仩闁告柨绉堕幑銏ゅ礃椤斿槈锕傛煕閺囥劌鐏犻柛鎰舵嫹闂備線娼ц噹濞撴艾锕ョ�氬綊鏌熼悜姗嗘畷闁绘挾鍠愮换婵嬫濞戞瑯妫ら梺绯曟櫔缂嶄線寮婚垾宕囨殕閻庯綆鍓涢惁鍫ユ倵鐟欏嫭绀�闁绘牕鍚嬫穱濠囨倻閽樺）銊ф喐瀹�鍕畺闁挎繂顦伴埛鎺懨归敐鍛础婵狅拷娴犲鐓曞┑鐘插枤濞堟粎锟借娲橀崹鍧楃嵁濮楋拷閹虫粓妫冨☉妯煎搸濠电姷鏁搁崑鐐哄垂椤栫偛鍨傞柛锔诲幘娑撳秹鏌ㄥ┑鍡橆棤缂佺娀绠栭弻娑㈠焺閸愮偓鐣肩紓浣哄У婵炲﹪寮诲☉銏犵睄闁跨喍绮欓獮鎰板礃瀹割喗缍庨梺缁樺灦钃卞┑顔界矒閺岀喎鈻撻崹顔界彯濠碘�虫▕閸ｏ絽顫忓ú顏勭閹兼番鍨婚埞娑氱磽娴ｅ搫校闁圭懓娲ら锝夘敃閿曪拷缁犺崵绱撴担濮戭亪鎯傞崟顒傜瘈闁靛骏绲剧涵楣冩煟椤掞拷閵堢顕ｉ崘娴嬫闁靛繆妾ч幏铏圭磽娴ｅ壊鍎忔繛纭风節瀹曪綁宕熼锟介悷閭︾叆闁告洦鍋勬慨绋库攽閳藉棗浜為柛鐘查叄閳ユ棃宕橀鍢壯囨煕閳╁啰鎳冮柍宄扮墦濮婅櫣绮欏▎鎯у壋闂佺顑冮崐鏇㈡偩閻戣棄鍗抽柣鎰У濮婂綊骞忛崨顕呮Ч閹艰揪绲块弳浼存⒒閸屾瑧绐旀繛浣冲洦鍋嬮柛鈩冪懕閹峰嘲顫濋鐔哄嚒濡炪値鍓欓敃銈夋偩閿熺姴绠犲┑鐘插閸わ拷濡炪値鍘归崝鎴濈暦閻旂⒈鏁囬柣姗�娼х敮銊╂⒒閸屾瑧顦﹂柟纰卞亝瀵板嫰宕堕浣规闂佸吋浜介崕杈ㄦ櫠椤栫偞鐓曟慨姗嗗墻閸庢棃鏌＄仦鍓ф创妤犵偛娲崺鈩冩媴閸撹尙锟借櫕淇婇悙顏勶拷銈夊礈濞嗘搩鏁勯柛銉㈡櫆椤洟鏌熼幆褏鎽犲┑顖涙尦閺屾稑鈹戦崱妤冨絽闂佹寧绻傞ˇ浼存偂濞嗘挻鐓熼柣鏂挎惈椤ｅジ鏌涢悩鎰佺劷闁跨喕濮ら鏍窗濞戙埄鏁嬬憸鏃堝春閵夛箑绶炲┑鐐灮閸犲酣鈥﹂妸鈺佸窛妞ゆ挾鍠撴禍鏍磽閸屾瑦绁板鏉戞憸閺侇噣骞掗弴鐘辫埅闂傚倷绀侀幉锛勬崲閸屾粣鎷峰鐓庡籍鐎殿噮鍋婇、鏃堝醇閻斿弶瀚介梻浣侯焾閺堫剟鎮疯钘濋柨鏇炲�归悡娆戠棯閺夊灝鑸瑰ù婊勭箘閿熻棄鐏氬妯硷拷姘緲閻ｇ兘宕奸弴銊︽櫌婵炶揪缍�椤顢旈悢鍏尖拻濞达絿顭堥幃鎴澝瑰锟界划娆忕暦閺囩喐缍囬柕濠忛檮閻濆嘲顪冮妶鍡欏⒈闁稿鍋ら幃锟犲即閻旂寮垮┑顔筋殔濡鏅舵繝姘厱閹兼番鍨洪ˉ鍫ユ煛瀹�瀣？濞寸媴绠撳畷婊嗩槼闁告帗绋戦—鍐Χ閸愩劎浠惧┑鐐跺皺閸犳牠濡存笟锟藉鎾綖椤斿墽鈼ゆ俊鐐�栭幐鐐叏閹绢喖鍚规い鎺戝�荤壕浠嬫煕鐏炴崘澹橀柨鐔诲Г閹倸鐣烽幇鏉夸紶闁靛／鍛帬闂備礁婀遍搹搴ㄥ窗濡ゅ懎纾婚悗锝庡枟閻撴洟鏌嶉埡浣告殶闁宠棄顦甸弻锝夊箻鏉堟崘锟藉潡鏌″畝锟介崰鎰焽韫囨柣鍋呴柛鎰ㄦ櫓閿熻棄绉瑰铏圭矙濞嗘儳鍓遍梺鎼炲妼濞尖�愁嚕鐠囨祴妲堟俊顖炴敱椤秹姊洪崨濠庢畼闁稿鍋ら幃姗�宕煎┑鎰瘜闂侀潧鐗嗛幊鎰不娴煎瓨鐓熼柡宥庡亜鐢埖銇勯銏㈢缂佽鲸甯掕灒閻犲洤妯婇敓鑺ユ崌濮婃椽宕ㄦ繝鍕ㄦ闂佹寧娲忛崕闈涚暦閺囥垹绠婚柟棰佺劍鐎靛矂姊洪棃娑氬缂佺粯鍔欓幆浣割煥閸喓鍘遍梺闈涱煭缁犳垿鍩㈤弴銏＄厵鐎规洖娲ゆ禒閬嶆煛鐏炶姤顥滄い鎾炽偢瀹曞崬鈻庤箛鎾旓箓姊虹拠鏌ヮ�楃紒鐘茬Ч瀹曟洟鏌嗗鍛枃闂佽宕橀褏绮诲ú顏呯厸闁搞儯鍎遍悘顏堟煃闁垮鐏撮柡宀�鍠撶划娆撳垂椤曞懎濡风紓鍌欑筏閹风兘鏌ㄩ悢鍓佺煓婵﹨娅ｇ划娆撳礌閳ュ厖绱ｇ紓鍌氬�哥粔鎾晝椤忓牏宓侀柛鎰靛枟閺呮悂鏌ｅΟ鍨毢妞わ负鍔岄—鍐Χ閸℃ǚ鎷婚梺鍝勬媼閸嬪﹤鐣烽姀銈呯缂備焦顭囬崢鍛婄節閵忥絾纭鹃柤娲诲灡缁傛帡鏁冮敓浠嬧�﹂崸妤佸仭闁绘鐗滃Λ锕傛煢濡崵绠為柡灞诲姂瀵挳鎮欑拠褎瀚圭憸鐗堝笚閸嬪倹绻涢幋娆忕仾闁绘挻娲熼弻宥夊煛娴ｅ憡娈堕梺鐟板暱閸燁偊婀侀梺缁樕戦悷銉╁箠閹邦喖顥氬┑鍌滎焾缁狙囨煕椤愶絿鈽夊┑鈥冲悑缁绘盯骞栭鐐寸彎闂佸搫鐬奸崰鏍�佸▎鎴炲枂闁告洦鍓涜ぐ瀣煟鎼淬値娼愭繛鍙夛耿閺佸啴濮�閻樺灚娈鹃梺鎸庣箓濡娆㈤悙鍝勭閺夊牆澧界粙缁樸亜鎼粹剝鍠樻慨濠傤煼瀹曟帒顫濋濠冨鐎瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟⒑閸濆嫮鈻夐柛妯垮亹缁絽螖娴ｈ櫣顔曢梺瑙勬儗閸樼晫娆㈠☉姘辩＝鐎广儱妫涙晶顏呫亜椤撶偞鍋ラ柟铏矒濡啫鈽夊鍡樼秼缂傚倸鍊烽懗鑸靛垔椤撱垹鍨傞柛顐ｆ礀閽冪喐绻涢幋鐐冩艾危閸喓绠鹃柛鈩兠慨澶岀磼鐎ｎ亝鍠橀柟顔筋殜閹兘鎮ч崼婵囨畼缂傚倷娴囬褔宕愰崸妤�鏄ラ柣鎰惈缁狅綁鏌ㄩ弮鍥棄濞存粌缍婂娲捶椤撶姴绗￠柣銏╁灱娴滎亪鐛箛鎾舵殝闁规鍠楀▓婵嬫⒑閻熸壆浠涢悽顖涘浮閺屽﹪鏁愭径鍫嫹娴ｇ硶鏋庨柟鐐綑娴犲ジ鎮楅惂鍛婂闂佽法鍠嶇划娆撳箚娓氾拷瀹曞ジ濮�閵忣澁绱查梻浣告啞閹稿棝宕橀悙顒佺様闂備浇妫勯崯铏仈閹间礁桅闁告洦鍨奸弫鍐┿亜椤愵偄鏋﹂柛姘煎亰濮婃椽宕崟顒佹嫳缂備礁顑嗛幑鍥极閹捐妫橀柕鍫濇川鏍″┑鐐茬摠缁秶鎹㈤崼锝嗭紓闂備線娼х换鍫ュ磹閺嶎厽鍋傞柕澶涘缁★拷闂傚倸鐗婄粙鎾存櫠閺囩伝褰掓偐鏉炴澘鎯堥梺璺ㄥ枙婵倝顢欓弽顓炵獥婵°倓鑳堕悵鍫曟煕閳╁啰鎳呯痪鍙ョ矙閺岀喖宕滆鐢盯鏌涙繝鍕幋闁哄矉缍侀獮瀣倷閸愨晛鍝烘鐐茬箲缁绘繂顫濋娑欏缂傚倷绀侀鍡欙拷绗涘喛鑰垮ù鐓庣摠閻撶喖鏌ｉ弮锟界换鍌毭洪妶鍥╃焼濠㈣泛鐭夐幏鐑界嵁閸喖濮庡銈忕細閸楁娊骞冮敓鐘冲亜闁硅偐鍋樼花濠氭椤愩垺澶勯柟鍛婃倐椤㈡棃顢曢妶鍥╋紲婵犮垼娉涚�涒晠顢旈悩缁樼叆闁绘柨鍤栭幏鐑芥偆娴ｅ湱绉锋繝鐢靛仜瀵爼鈥﹂崶顒�绠查柕蹇嬪�曠壕濂告煟閹邦厽缍戝ù鐘靛帶閳规垿鎮╃紒妯婚敪濡炪倖鍨靛Λ婵嗩嚕閼碱剛鐭欐俊顐︽涧缂嶅﹪骞冮埡渚囧晠妞ゆ梻鍘ф竟澶愭⒒娴ｅ憡鎯堥柟鍐茬箻楠炲啴宕掗悙鑼舵憰闂侀潧鐗嗛ˇ顖滅不閹烘鐓欓柣鎴灻悘銉モ攽椤斿ジ鍙勬慨濠冩そ楠炴牠鎮欑拠褎瀚归柕鍫濐槸缁�鍫ユ煟閺冨倸甯堕柦鍐枑缁绘盯骞嬪▎蹇曚患闁诡垳鍠栧娲濞戝磭纭�閻庡箍鍎卞ú銊┧囬鐐粹拻闁稿本鐟чˇ锕傛煙鐠囇呯？闁轰緡鍠栬灃闁告劏鏅滃▓鏉库攽鎺抽崐鏇㈠疮椤栨氨鏆﹂柛娆忣槺缁★拷闂傚倸鐗婃笟妤呭磿韫囨稒鐓熼柟閭﹀墾闊剟鏌＄仦璇诧拷妤冨垝濞嗘垶宕夐柕濞垮�楁す铏節閻㈤潧浠滈柟鍐查鐓ゆい鎾跺剱濞兼牜绱撴担鑲℃垶鍒婇幘顔界厽闁绘梻鍘ф禍浼存煕閵堝拋鍎忛柍瑙勫灴閹瑧锟藉灚鎮堕崑鐐烘⒑閸濆嫭鍣藉┑鐑囨嫹闂佺粯渚楅崰娑氱不濞戞ǚ妲堟繛鍡楅獜閹烽攱绻濆顓犲幘闂佽鍘界敮鎺楀礉閵堝鐓曟慨妤嬫嫹濞存粏娉涢～蹇涙惞鐟欏嫬鏋傞梺鍛婃处閸嬫帡鏁撻懞銉х煉闁哄本鐩崺锟犲磼濠婂啠鎷￠梻浣芥硶閸犳洘鎱ㄩ妶澶嬪亜妞ゆ帒瀚粻顖炴煥閻曞倹瀚�?,闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎妯恍氱紓鍌欒兌閸嬫捇宕曢崘宸劷闁跨喓濮撮拑鐔兼煥濠靛棭妲告い顐㈡嚇閺屾洝绠涙繝鍐╃彇闂佸憡姊归幃鍌氼潖閸濆嫅褔宕惰閹峰嘲螖閸涱厾锛涢梺瑙勫礃閸╂牕鐣烽崣澶岀闁瑰瓨鐟ラ悘鈺冪磼閻欏懐绋荤紒缁樼洴瀹曞崬螖閸愵亶鍞哄┑鐐差嚟婵烇拷缂佺姵鐗曢～蹇涙惞閸︻厾鐓撳┑鐐叉閸庢娊宕滈銏♀拺缂佸灏呴弨鑽ょ磼鐠囪尙澧曟い鏇稻缁绘繂顫濋锟藉畵鍡涙⒑缂佹ɑ顥嗘繛鍜冪秮椤㈡瑩寮撮姀鈥充画濠电姴锕ら崯鎷屽�撮梻浣芥硶閸犳洘鎱ㄩ妶澶婄鐟滅増甯掗崒銊モ攽閸屾粠鐒鹃柣鎾寸箞閺岀喖鎮欓浣虹▏濡炪倖娲熸禍鍫曞箖濡わ拷閳藉鈻庡Ο鐓庡Ш闂備礁鎲＄湁缂侇喗鐟╁濠氭偄閻撳海顦ч梺鍏肩ゴ閺呮粌鈻撻鍕拺闁硅偐鍋涙俊鍏笺亜椤撶姴鍘寸�规洘妞介弫鍌炴偩瀹�锟介幊婵嬫⒑鐠恒劌鏋嶇紒顔界懇閻涱喛绠涘☉妯碱吅闂佹寧娲╅幏椋庣棯椤撱劍瀚归梻鍌欐祰椤曆呮崲濡わ拷閻ｇ兘鎮界粙璺ㄧ枃闂佽宕橀褔鎮″锟介弻娑㈠箛闂堟稒鐏堥梺鎼炲妼閸婂綊濡甸崟顖氬嵆闁绘劖鎯屽Λ锟犳煟鎼搭澀浜㈡い顐㈩槺閹广垹鈹戠�ｎ偒妫冨┑鐐村灥瀹曨剟宕滄导瀛樷拺闁芥ê顦弳鐔兼煕閻樺磭澧电�殿喖顭锋俊鎼佸煛閸屾矮绨婚梻浣告啞缁诲倻锟芥艾鎳樻慨锟介柕蹇嬪灪閿涘繘姊虹拠鈥崇�婚柛鎰ㄦ櫅閿熺瓔鍨崇槐鎾存媴閾忕懓绗￠梺鐑╂櫓閸ㄥ爼鎮伴鎾呮嫹閿濆骸鏋熼柛濠傤煼閺屾盯濡烽姘兼喘闁哄鏅滃Λ鍐潖缂佹ɑ濯撮悷娆忓娴犫晠姊虹粙鍖℃敾婵炶尙鍠栭妴渚�寮介鐐靛�為梺鍐叉惈閸嬪棗顭囬悢鍏尖拺閻熸瑥瀚崝銈嗐亜閺囥劌寮柟顔惧厴閹兘骞嶉搹顐ｆ澑闂備胶绮摫鐟滄澘鍟村鍐测枎閹扳晙绨婚棅顐㈡处閹搁箖宕洪敐鍡樺弿濠电姴瀚敮娑㈡煙瀹勭増鍤囬柟宕囧仱婵＄柉顦伴柨鐔绘閿曨亜顫忓ú顏勪紶闁靛鍎涢姀銏㈢＜濠㈣泛锕﹂崺锝囷拷瑙勬礃瀹�鎼佺嵁閹烘绠ｉ柡鍐挎嫹闁诲骸顭峰Λ鍛搭敃閵忥紕銈紓浣瑰絻婢х晫妲愰悙瀛樺劅闁虫拝鎷烽柡锟芥禒瀣厽闁归偊鍓欑痪褔鏌嶇紒妯荤闂囧绻濇繝鍌氼伀闁活厽甯楅〃銉╂倷閺夋垹浼岄梺纭呮珪缁捇骞冨▎鎾寸劵婵炴垶姘ㄥ▔鍧楁⒒閸屾瑦绁版い顐㈩槸閻ｅ嘲螣鐞涒剝鐏冨┑鐐村灦椤洭骞楅妷褏纾介柛灞捐壘閿熺晫鍏橀幃鐐烘晝閸屾﹫鎷烽崘顔肩疀妞ゆ棁妫勬惔濠傗攽閻樼粯娑ф俊顐幖椤洭寮介妸褏顔曢悗鐟板閸犳洜鑺遍懡銈忔嫹閻熺増鍟炵紒璇插�块崺鐐哄箣閿旇棄浜归梺鍦帛鐢鈻撳鍫熲拺鐟滅増甯╁Λ鎴︽煙閾忣偅宕岄柍銉︽瀹曟﹢顢欓崲澹洦鐓曢柟鎵虫櫅婵″吋銇勯锟介悧鎾愁潖濞差亜绠伴幖娣灮閿涙﹢姊虹粙鎸庡攭閻忓繑鐟ч崚鎺戭潩椤撶喓绉堕梺闈浤涢崨顖涱潓闂傚倷鐒﹂幃鍫曞磿濞差亝鍋傞柛顐ｆ儕濞戙垹绀冮柕濞垮灪閺傦拷闂備胶绮崝鏍ь焽濞嗘挻鍊堕柛妤冨剱濞撳鎮楀☉娅虫垿宕愰幇顕嗘嫹鐟欏嫭绀冮柟鐟版搐铻為柛鎰╁妷濡插牓寮堕崼娑樺闁伙附绮撳缁樼瑹閿熻棄顭囪閹囧幢濡炪垺绋戦埢搴ㄥ箣濠婂懎澧鹃梻鍌氬�搁悧濠勭矙閸儱缁╅柤鎭掑劘娴滄粓鏌￠崶鈺佷沪闁革絽婀遍敓鑺ヮ問閸ｎ噣宕板鑸垫櫢闁兼亽鍎洪崯蹇涙煕閻樿櫕宕岀�规洘绻堥獮瀣晜閹呫偊闂佺懓鍚嬮悾顏堝礉瀹ュ鍚圭�广儱顦伴悡蹇擃熆鐠鸿櫣澧曢柣蹇ｄ邯閹顫濋鎯т划濠殿喖锕︾划顖炲箯閸涙潙宸濆┑鐘插暙閸撶敻姊绘担渚劸闁挎洏鍊濋幃銉╂偂鎼达絾娈鹃梺鍝勬储閸ㄥ湱绮婚悽鍛婄厵闁告繂瀚ˉ鐐烘煟鎼淬垺銇濇慨濠冩そ瀹曘劍绻濋崟銊︻潔闂備礁顓介弶鍨潎闂佽鍣换婵嗩嚕閹绢喖顫呴柨娑樺楠炴姊绘担鍛婃儓闁稿﹥鎮傞幃妯衡攽閸垺锛忛悷婊冩捣閹广垹鈽夐姀鐘茬獩濡炪倖鎸鹃崰搴ㄋ囬埡鍌滅闁挎繂鎳忛幖鎰版煥閺囥劋绨婚柣锝囧厴閺佹劙宕卞Δ鍐嵁濠电姷鏁告慨鎾磻閸℃鐒芥慨妯垮煐閳锋帒霉閿濆牆袚闁靛棗鍟撮弻锝夊箳閻愮數鏆ゅΔ鐘靛仦閸ㄥ灝鐣烽崼鏇ㄦ晢闁跨喍绮欏鍛婄瑹閿熶粙寮婚悢鐓庣鐟滃繒鏁☉銏＄厸闁告侗鍠楅崐鎰版煛鐏炶濮傞柟顔哄�濆畷鎺戔槈濮楀棔绱�,濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柟鑲╁仜婵″ジ鏌涙繝鍌涘仴鐎殿喛顕ч埥澶愬閳哄倹娅囬梻浣瑰缁诲倸螞濞戔懞鍥Ψ瑜忕壕钘壝归敐鍛儓鐏忓繘姊洪崨濠庢畷濠电偛锕ら锝囨嫚濞村顫嶅┑鈽嗗灦閺�閬嶅棘閿熶粙姊绘担鍛婂暈婵炶绠撳畷鎴﹀礋椤掍礁寮块梺闈涚箞閸婃牠鍩涢幋鐐电闁煎ジ顤傞崵娆愵殽閻愭惌娈滈柡宀�鍠栭幃鐑芥偋閸繃鐏庨柣搴㈩問閸犳牠鈥﹂悜钘夋瀬闁归偊鍘肩欢鐐烘倵閿濆簼绨风紒銊ヮ煼濮婃椽鎳￠妶鍛呫垺绻涘ù瀣珖濞存粎顭堥埢搴ㄥ箻瀹曞浂妲烽梻浣虹帛閸ㄥ吋鎱ㄩ妶澶婄厱闁硅揪闄勯崑锝夋煙椤撶喎绗掑┑鈥炽偢閺岋紕锟斤綆鍋嗛幊鍐煃鐟欏嫬鐏存い銏＄懇瀹曨偊宕熼懜闈涱伓濠德板�曢幊搴ㄥ几娴ｅ箍浜滈柡鍥朵簼鐎氬綊姊洪幖鐐插闁稿孩濞婇幃楣冩倻閽樺鍊為梺闈涱煭鐎靛矂宕惔鈾�鏀介柣妯虹仛閺嗏晛鈹戦鑺ュ唉闁轰礁鍟存俊鍫曞炊闁垮顏跺┑顔筋焽閸樠囩嵁濡ゅ懏鐓曢柟鐑樺煀闊剚顨ラ悙杈捐�挎い銏＄懇閹墽浠﹂挊澶岊啈闂傚倸鍊烽懗鍓佸垝椤栫偛钃熼柕濞炬櫅缁犺銇勯幇鎯扮闁跨喕妫勯崐鍨暦濡ゅ懎绀傞柣鎾抽娴煎酣姊绘担鐟邦嚋缂佽鍊块獮濠呯疀濞戞顔愰梺瑙勫婢ф鎮￠崘顔藉仭婵炲棗绻愰鈺呮煟韫囨梹灏﹂柡宀�鍠栭、娆撴偩鐏炴儳娅氶梻浣侯攰濞呮洜鍒掗幘婢勬盯宕橀妸銏☆潔濠电偛妫欓幐濠氬汲濡偐纾介柛灞捐壘閿熻姤鎮傚畷鎰版倻閼恒儱锟藉潡鏌ㄩ弴鐐诧拷褰掑磻閸岀偞鐓ユ繛鎴灻顐⑩槈閹惧磭效闁哄备锟芥剚鍚嬮幖绮癸拷宕囶啇缂傚倷鑳舵慨鐢告偋濡ゅ啯宕叉繛鎴烇供閸熷懏銇勯弮鍥у惞闁烩晛閰ｅ娲川婵犲孩鐣锋繝鐢靛仜閿曨亜顕ｆ繝姘嵆闁挎稑瀚弶鎼佹⒑閸濆嫭宸濋柛濠庡亰婵＄兘鏁傛潪鎵泿闂備焦瀵уΛ渚�顢氳椤曪綁顢欓懞銉ュ伎婵犵數濮撮崯顖炲Φ濠靛洣绻嗘い鎰╁灩閺嗘瑩妫佹径鎰厪濠㈣泛鐗嗛崝銈咁熆瑜濇俊鍥晸閼恒儺鍟忛柛鐘愁殙閵囨劙宕橀鐧告嫹閿曞倸惟闁宠桨绶氶崬鍫曟⒑缂佹ɑ顥嗘繛鎾虫贡閼洪亶鎮介崨濞炬嫽婵炶揪绲介幉锟犲箚閸喓绠鹃悘鐐插�搁悘鑼拷瑙勬礈閹虫挾鍙呭銈呯箰閹冲孩绂嶅Δ锟介埞鎴︽倷閸欏妫￠梺鍦焾椤嘲鐣烽幇鐗堝仺闁告稑锕﹂崢浠嬫⒑闂堟稓绠氭俊鎻掓嚇瀹曨垵绠涘☉娆戝幗闂佸湱鍎ら崹鐢稿煕閺冨牊鐓ラ柣鏃囶嚙琚氱紓浣割儐鐢偤骞戦姀銈呴唶婵犲灚鍔栫紞搴♀攽閻愬弶鈻曞ù婊勭矊椤斿繐鈹戦崱蹇旀杸闂佺粯蓱瑜板啴寮抽悢鍏肩厱婵炲棗绻戦ˉ婊勩亜椤忓嫬鏆ｅ┑鈥崇埣瀹曞崬螖閸愌勬▕濠电姷顣藉Σ鍛村磻閸涘瓨鍎庢い鏍仧瀹撲線鏌熸潏鍓х暠妞ゎ偄鎳橀弻锝咁潨閸℃ぞ绨奸梺鍝勫亰閹风兘姊绘担绛嬪殭闁告垹鏅槐鐐哄幢濞戞锛涢梺鍛婁緱閸樻悂寮稿澶嬬厪闊洢鍎崇壕璺ㄧ磼閻樿崵鐣洪柟顔筋殜閹棄鈻撶捄銊ュЪ闁诲孩绋掔换鍌炩�旈崘顔嘉ч柛鈩冾殘娴犳挳姊虹涵鍛彧闁挎洏鍨介悰顕�宕橀妸銏＄�婚梺褰掑亰閸犳岸鎯侀崼銉︹拺闁告稑锕ゆ慨褏绱撻崒娑欑殤闁奸缚椴哥换婵嗩潩椤撴稒瀚肩紓浣鸿檸閸樺ジ骞婅箛娑辨晜闁绘绮悡鏇㈡倵閿濆骸澧ù鐘欏洦鐓ラ柣鏃囶嚙琚氶梺鑹邦潐閸庢娊鏁冮姀鈩冪秶闁冲搫鍋嗗鐔兼⒑鐟欏嫬鍔ゆい鏇ㄥ弮閹兘鎮烽幍铏杸闂佺粯蓱瑜板啴寮冲▎鎰╀簻闊洦纰嶇涵楣冩煃鐟欏嫬鐏撮柟顔规櫊椤㈡瑩鎳栭埡锟界槐姗�姊绘担铏广�婇柡鍛矒閹囨偐閼碱剚娈惧┑鐘绘涧椤戝懘宕橀敓钘夘渻閵堝棙灏甸柛鐘插缁傚秴螖閸涱喒鎷洪梺鍛婄☉閿曘倖鎱ㄩ敃鍌涚厱闁绘ɑ鍓氬▓婊堟煙椤旀瑣鍊楅悿锟介梺鐟扮仢閸熶即宕悽鍛婄厽闁绘宕电槐鐗堢箾閸滃啰绋婚柡鍛埣瀵挳濮�閿涘嫬骞堥梻浣告惈閸犳盯骞忔搴嫹閻у憡瀚归梺褰掓？缁�渚�鎷戦悢鍏肩叆闁绘柨鎼瓭濡ょ姷鍋戦崹铏规崲濞戙垹绠ｉ柣鎴濇閻ｇ兘姊洪崫銉バｇ�癸拷缁嬫娼栨繛宸簻娴肩娀鏌涢弴銊ュ箻闁告柨婀辩槐鎾诲磼濮樻墎鏋岄梺鍦厴椤ユ挾妲愰幘瀛樺闁告繂瀚呴敐澶嬬厽闁冲搫锕ら悘鐘炽亜閺囶亞绉い銏″哺閺佹捇鎸婃径灞炬闂佸湱鍎ら崹鐔肺ｉ崼鐔剁箚妞ゆ牗绻傞崥鍦喐閻楀牊灏︽慨濠傤煼瀹曟帒顫濋濠冨鐎瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟⒑閸濆嫮鈻夐柛妯垮亹缁絽螖閸涱喚鍘搁悗骞垮劚妤犳悂鐛Δ鍛厱閻庯綆浜跺Σ鎼佹煃鐟欏嫬鐏寸�规洘甯掗…銊︽償閿濆懎歇闂傚倷绀侀幖顐︻敄閸曨厽顐芥慨妯挎硾閽冪喖鏌ｉ弮鍌氬付缂侊拷閸垺鍠愰煫鍥ㄦ礃閺嗘粍绻涢幋娆忕仾闁绘挻鐩弻娑樷槈閸楃偞鐏嶉梺绋匡攻閸旀瑩寮婚敍鍕勃閻犲洦褰冮～鍥⒑鐠団�虫灁闁稿﹥绻傞悾鐑藉箳閹存梹顫嶅┑顔筋殔濡梻妲愰敓锟�?,濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁橈耿瀵鏁愭径濠勵吅濠电姴鐏氶崝鏍礊濡ゅ懏鈷戦悹鎭掑妼閺嬫瑦淇婇銏狀伃鐎规洘鍔欏畷鐑筋敇閻樼數鍔归梻浣告贡閸庛倕螞閹达箑绠柣鎴ｅГ閺呮煡骞栫划鐧告嫹閼碱剙鍤┑鐘垫暩閸嬫盯骞婂畝鍕瀭闁芥ê顦藉鏍ㄧ箾瀹割喕绨奸柛銈呯Ч閺屾洘寰勬繝鍌涚亾婵炲瓨绮犳禍锝呂涢悢濂夋富闁靛牆妫涙晶閬嶆煕鐎ｎ偆鈽夐弫鍫ユ煛鐏炶鍔滈柍閿嬪灦閵囧嫰骞掗悙鏉戭伓缂傚倷绀侀ˇ閬嶅极婵犳艾绠栭柨鐔哄Т鍞梺鍐叉惈閸婂宕㈡禒瀣拺闁告繂瀚弳娆撴煕婵犲懎鍚归柡渚囧枛閳藉鈻庡鍕泿闂備線娼чˇ顓㈠磿閸濆嫀锝夋惞閸︻厾锛滈柡澶婄墑閸斿秶浜搁鐔翠簻闁瑰墽鍋ㄩ崑銏拷瑙勬处娴滎亜鐣峰锟介、姗�鎮欓弶鎴濆濠电姴鐥夐弶鍖℃嫹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋娆忕仼闁汇値鍠楅妵鍕箛閳轰礁濮㈡繛瀛樼矆缁瑥顫忓ú顏呭殥闁靛牆鎲涢姀锛勭婵炴潙顑嗗▍鍥瑰鍜佺劸闁宠閰ｉ獮瀣偐闂堟稓顔岄梻鍌欒兌缁垶宕濆Δ鍛？闁靛牆顦悡鏇㈡煙鐎电校闁哥姵鍔欓弻锝呂旈敓浠嬫偋閸℃瑧绠旈柟鐑樺殮閻熼偊鐓ラ柨鐔剁矙瀹曪繝骞庨挊澶庢憰濠电偞鍨崹鍦不婵犳碍鍊甸梻鍫熺♁閸熺偤鏌涢敐鍕祮婵﹨娅ｉ幏鐘诲灳閾忣偆褰庢繝鐢靛仒閸栫娀宕卞▎搴ゅ焻闂傚倸鍊烽懗鍫曞储瑜旈敐鐐哄即閵忕姷锛欏┑掳鍊曢幊蹇涘磿婵犲洦鐓曟い鎰Т閸旀粓鏌嶉柨瀣伌婵﹤顭峰畷濂告偄閻戞ê鍨遍梻浣虹帛缁嬫帞鍒掓惔锝嗩潟闁圭儤顨呯粻鐢告煙閻戞ê鐏嶉柟绋垮暙閳规垿鎮欓弶鎴犱患闂佽桨绀侀…鐑界嵁閸愩劉鏋庨柟鍨暞閺呫垽姊虹粙鎸庢拱缂侇喚濞�瀹曨垱鎯旈妸锔规嫽婵炶揪绲介幉锛勬嫻閿熺姵鐓ｉ煫鍥ㄦ崌閸欏嫮锟借娲樻繛濠囥�佸▎鎾冲簥濠㈣泛顑囧ú瀛橆殽閻愬樊鍎旈柟顔规櫊閹晫鍠婃径灞界哎婵犵绱曢崑鎴﹀磹閺嵮屾綎濠电姵鑹鹃悡鏇㈡煕椤愮姴鍔滈柛瀣�块弻銈吤圭�ｎ偅鐝ㄩ梺鍦厴椤ユ捇骞夐幘顔肩妞ゆ帒鍋嗗Σ鍫曟⒒娴ｄ警鐒剧紒缁樺灴閺佸啴濮�閵堝憘銉ッ归敐鍛棌婵炵鍔戦弻銊╂偄閸撲胶鐓撳Δ鐘靛仜閸熸挳宕洪敓鐘茬闁靛濡囬敓鍊熸珪缁绘繈濮�閿濆棛銆愰梺鍏兼た閸ㄦ娊鎳為柆宥呂ㄩ柕澶堝灪閺傦拷闂備胶绮敋闁诲繑宀稿鎶藉煛娴ｅ弶鏂�濡炪倖妫侀褍鐣甸崱娆欐嫹鐟欏嫭绀�缂傚秴锕獮鍐焺閸愨晛鍔呭┑鈽嗗灥瀹曞灚绂嶅▎鎰瘈闁汇垽娼ф禒锕傛煕椤垵鐏︾�规洜鎳撶叅妞ゅ繐瀚弻褍鈹戦悩缁樻锭妞ゆ垵妫濋幃锟犲Ψ閳哄倻鍘搁梺鍛婂姂閸斿矂鏁撻悾灞惧殌闁宠绉瑰鎾倻閸℃瑥鏁搁柣鐔哥矋缁诲嫰骞戦姀鐘斀闁糕檧鏅滅紞搴㈢節閻㈤潧校闁肩懓澧芥竟鏇㈠礂閼测晝顔曢梺绯曞墲閿氱紒妤佸浮閺屾稑螣閸戙倖瀚归柟棰佺劍鐎靛矂姊洪棃娑氬濡ょ姵鎮傞悰顕�寮介鐔哄幗濠德板�ч幏鐑芥煥閺囥劋閭┑鈩冩尦瀹曟﹢顢欓崲澶堝姂閺屽秵娼悧鍫▊缂備礁宕悥鐓庮潖濞差亝顥堟繛鎴ｉ哺椤庡棛绱撴担鍝勑ｉ柛銊ョ埣楠炲棝寮敓鐣屾崲濠靛纾兼俊銈勭劍閺夋悂姊绘担鍝ユ瀮婵☆偄瀚灋婵°倕鎳忛崐鍫曟煏婢舵稑顩紒鐘荤畺閺屾稑顭ㄩ崘銊︽缂備礁顦介崰姘舵晸閼恒儺鍟忛柛鐘愁殕缁绘稒绻濋崶褎鐎梺鍛婂姦閸犳牜澹曢崗鑲╃闁瑰鍋犳竟妯硷拷娈垮枟婵炲﹤顫忕紒妯诲闁惧繒鎳撶粭鈥斥攽閻愭彃绾ч柣妤冨Т閻ｇ兘骞囬弶鎸庡祶濡炪倖鎸堕崝宥囷拷姘愁潐閹便劌螣閻撳簼澹曢柣搴㈢啲閹凤拷?,缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁绘劦鍓欓崝銈囩磽瀹ュ拑韬�殿喖顭烽弫鎰緞婵犲嫷鍚呴梻浣瑰缁诲倿骞夊☉銏犵缂備焦顭囬崢閬嶆⒑闂堟稓澧曢柟鍐查叄椤㈡棃顢橀姀锛勫幐闁诲繒鍋涙晶钘壝虹�涙ǜ浜滈柕蹇婂墲缁�瀣煛娴ｇ懓濮嶇�规洖宕埢搴∥熼幁宥嗘皑缁辨捇宕掑顒婃嫹閻戣姤鍊块柨鏇炲�哥粈澶愭煛瀹ュ骸骞戦柨鐔绘閸熸潙鐣锋總绋课ㄩ柨鏃囧Г椤忕喖姊绘担钘壭撻柨姘亜閿曞倷鎲鹃柟顕�绠栭、姗�濮�閿涘嫬骞堥梺纭呭亹鐞涖儵鏁撻挊澶屾瀮闁糕晝鍋ら弻锝夊箻閸楃儑鎷峰┑瀣摕闁哄洨鍠撶粻楣冩煟閹伴潧澧柣婵囨⒒缁辨帞绱掗姀鐘蹭紟闂佸湱鍏橀弨杈╂崲濠靛棌鏋旈柛顭戝枟閻忓秴顪冮妶搴″箹闁绘鎸搁悾宄懊洪鍕敤濡炪倖鎸鹃崰搴㈢濡わ拷閳规垿鎮欓崣澶樻！闂佹悶鍔屽﹢杈ㄧ珶閺囥垺瀵犲瑙勭箓缂嶅﹪寮幇顓炵窞閻庯綆鍋婇弫顏堟⒒娴ｇ瓔鍤欑紒璇叉瀵煡鎮╃拠鑼舵憰闂佹寧绋戠�氭悂骞忛悜鑺ユ櫜閹肩补锟借尙鏁栭梻渚�娼уΛ娆戞暜閻愬灚顫曢柟鐑樻尰缂嶅洭鏌曟繛鍨姕閻犲洨鍋ゅ鐑樻姜閹殿喖濡介梺瑙勭摃瀹曠數鍒掔�ｎ喖绠抽柡鍐╂尰鐎氬綊鏌ㄥ┑鍡欏嚬缂併劏濮ら妵鍕晜閸濆嫬顫囧┑顔硷攻濡炶棄鐣峰锟藉畷锝嗗緞鐎ｎ亜澹嶉梻鍌欑閹芥粓宕板澶婄闁硅泛顫曢敓鎴掔閳诲酣骞橀崘鎻掔ギ闂備線娼х换鍡楊瀶瑜旈獮蹇涙惞閸︻厾锛濇繛鎾磋壘濞层倝鎮橀埄鍐闁告瑥顦辨晶顒勬煛閸涱厾鍩ｇ�规洩绲惧鍕醇濠婂懐娉块梻鍌欑窔濞佳団�﹂崼銉ョ？闁惧浚鍋呭▍鐘绘煏韫囧鐏痪鎯у悑閵囧嫰寮崒妤佸珱闂佺粯鎹侀崑鎰版晸閼恒儺鍟忛柛鐘崇墵閳ワ箓鏌ㄧ�ｂ晝绠氶梺缁樺灱婵倝寮插鍛＝濞达絿娅㈡笟娑欎繆椤愩垺鍣归柍瑙勫灴閺佸秹宕熼鈩冩線闂備胶顭堥敃銉╂偋濠婂牆鏋佹い鏇嫹妤犵偞甯掗—鍐ㄢ攽閸℃ê鏋犲銈冨灪缁嬫垿鍩ユ径濞炬瀻闁归偊鍠栨繛鍥⒒娴ｇ瓔鍤欐繛瀵稿厴瀵偆鎷犲顔惧姺婵犵數濮甸懝鍓х不椤栨粣鎷烽悷鏉款仾濠㈢懓顑夊鎼佸籍閸喓鍘卞銈庡幗閸ㄧ敻寮搁悢鍏肩厽闊洦鎸炬晶锔芥叏婵犲懏顏犵紒杈ㄥ笒铻ｉ柣鎾崇岸閸氬倿姊绘笟锟藉褔鎮ц箛娑掞拷锕傚醇閵夛箑浠奸悗鐟板閸ｆ潙煤椤忓秵鏅滈梺鍛婁緱閸犳顢旈悢鍏尖拻濞达綀娅ｇ敮娑欍亜椤撶偟澧㈠ù婊咁焾閳诲酣骞樼�涙ɑ鐝繝鐢靛Т閿曘倝宕悩璇茬哗濞寸姴顑嗛悡鐔镐繆椤栨侗鍎ラ柛銈咁儑閿熷�燁潐閹爼宕曢悽绋跨畺婵°倧鎷锋い顐ｇ箞閹剝鎯旈埥鍡樹氦闂傚倷绀侀悿鍥敋瑜忕划鏃�顦版惔锝勭瑝濠电偞鍨惰彜婵℃彃鐗婄换娑㈠幢濡や焦鎷遍柣搴㈢煯缁瑥顫忕紒妯诲濞撴凹鍨抽崝鎼佹⒑閸濆嫮澧遍柛鎾跺枛楠炲啴鎮滈懞銉︽珕闂佸憡鎸嗛崨顖氬Ъ闂傚倷鑳剁划顖炪�冮崨瀛樺亱闁告洦鍓涢々鍙夌節婵犲倻澧涢柣鎾寸洴閺屾盯濡烽姀鈩冪彅闂佸搫顑嗗Λ鍐蓟閿濆鏁囬柣鏃堫棑閻熸彃顪冮妶鍐ㄥΩ闁稿海鏁婚獮鍐ㄢ枎閹炬潙娈ゅ銈嗗笒閸嬪棝宕�ｎ喗鈷掑ù锝堝Г閵嗗啴鏌ｉ幒鐐电暤妤犵偞鍨垮畷鍫曨敆閿熶粙寮告笟锟介弻鐔煎礈瑜忕敮娑㈡煛閸涱喗鍊愰柡灞诲姂閹倝宕掑☉姗嗕紦
		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇牠姊绘担鑺ョ《闁哥姵鎹囧鏌ヮ敃閿濆洨褰鹃梺鍝勬储閸ㄦ椽宕戦敓鐘崇厵闁告劘顕滃銉х磽瀹ュ拑韬鐐插暣閸┾剝绗熼崶褎娅婃俊鐐�栧濠氬储瑜庢穱濠咁槾缂佽鲸鎹囧畷鎺戭潩椤掑﹥瀚归柛婵勫劤閻捇鏌ｉ姀鐘冲暈闁稿顑夐弻锟犲炊閿濆棗娅氶梺璺ㄥ枑閺嬬粯淇婇崶顒�绠查柛鏇ㄥ灠鎯熼梺鎸庢穿閹烽鐥紒銏犵仸婵﹨娅ｇ槐鎺懳熼搹閫涙闂佽棄鍟存禍鍫曞蓟閻斿吋鍊婚柟瀛樺笚閸犳艾鈹戦纭烽練婵炲拑绲块崚鎺戔枎閹寸偛纾梺闈浤涚仦鑺ユ毉缂傚倸鍊搁崐椋庢閿熺姴绐楁俊銈呮噹缁犳煡鏌涢妷鎴濊嫰濞堛劑鏌ｉ悩鍙夊缂佷焦娼欏嵄闁割偁鍎查悡蹇涚叓閸パ嶆敾婵炲懎妫濋弻锟犲川椤斿墽鐤勫┑顔硷攻濡炰粙鐛幇顓熷劅闁挎繂娲ㄩ弳銈嗙節绾版ɑ顫婇柛瀣嚇閹嫰顢涘┑鍥舵（闂傚倷绶氬褑澧濋梺鍝勬噺缁捇宕哄☉銏犵闁绘鏁搁敍婵囩箾鏉堝墽绉柛瀣�块獮瀣晝閿熺晫绮诲鑸电厱妞ゆ劗濮撮崝婊堟煟閹惧鎳囬柡灞剧洴楠炲鈻庤箛銉﹀闁哄稁鍋撻幏宄邦潩閻愵剙顏�?
		if (!checkNpcVisitable(roleid)){
			Module.logger.info("npc is unvisitable");
			return;
		}
		
		//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁橈耿瀵鏁愭径濠勵吅濠电姴鐏氶崝鏍礊濡ゅ懏鈷戦悹鎭掑妼閺嬫瑦淇婇銏狀伃鐎规洘鍔欏畷鐑筋敇閻樼數鍔归梻浣告贡閸庛倕螞閹达箑绠柣鎴ｅГ閺呮煡骞栫划鐧告嫹閼碱剙鍤┑鐘垫暩閸嬫盯骞婂畝鍕瀭闁芥ê顦藉鏍ㄧ箾瀹割喕绨奸柛銈呯Ч閺屾洘寰勬繝鍌涚亾婵炲瓨绮犳禍锝呂涢悢濂夋富闁靛牆妫涙晶閬嶆煕鐎ｎ偆鈽夐弫鍫ユ煛鐏炶鍔滈柍閿嬪灦閵囧嫰骞掗悙鏉戭伓缂傚倷绀侀ˇ閬嶅极婵犳艾绠栭柨鐔哄Т鍞梺鍐叉惈閸婂宕㈡禒瀣拺闁告繂瀚弳娆撴煕婵犲懎鍚归柡渚囧枛閳藉鈻庡鍕泿闂備線娼чˇ顓㈠磿閸濆嫀锝夋惞閸︻厾锛滈柡澶婄墑閸斿秶浜搁鐔翠簻闁瑰墽鍋ㄩ崑銏拷瑙勬处娴滎亜鐣峰锟介、姗�鎮欓弶鎴濆濠电姴鐥夐弶鍖℃嫹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋娆忕仼闁汇値鍠楅妵鍕箛閳轰礁濮㈡繛瀛樼矆缁瑥顫忓ú顏呭殥闁靛牆鎲涢姀锛勭婵炴潙顑嗗▍鍥瑰鍜佺劸闁宠閰ｉ獮瀣偐闂堟稓顔岄梻鍌欒兌缁垶宕濆Δ鍛？闁靛牆顦悡鏇㈡煙鐎电校闁哥姵鍔欓弻锝呂旈敓浠嬫偋閸℃瑧绠旈柟鐑樺殮閻熼偊鐓ラ柨鐔剁矙瀹曪繝骞庨挊澶庢憰濠电偞鍨崹鍦不婵犳碍鍊甸梻鍫熺♁閸熺偤鏌涢敍鍗炲枤濞撳鏌曢崼婵囶棡缂佸矁娉曠槐鎺楃叓椤撶姷鐓撻梺璇″櫍缁犳牠寮幘缁樺亹鐎规洖娲ゆ慨娲⒒娴ｇ懓顕滄俊顐＄铻為柛鏇ㄥ灡閸庡﹥绻濇繝鍌滃闁抽攱甯掗妴鎺戭潩閻愵剙顏舵繝鐢靛仒閸栫娀宕堕妸銉ょ綍闂備胶纭堕崜婵嬪Φ閸屾埃妲堟俊顖炴敱椤秴鈹戦悙鍙夘棡闁告梹鐗犻幃闈涚暋闁附瀵岄梺闈涚墕濡绮幒妤佺厱濠电姴鎳庨崥鐟邦熆鐟欏嫭绀嬬�规洘顨堢划顓熸姜閹殿喚娉块梻鍌欑閹碱偊宕鈷氭椽濡堕崱娆樻锤閻熸粎澧楃敮妤呮偂閻斿吋鐓欓柣鎴炆戠亸浼存煕婵犲啫濮嶉柡宀�鍠撶划娆撳礌闄囬崥顐︽⒑鐠団�虫灁闁搞劏妫勯～蹇氥亹閹烘垹鐤�濡炪倖鏌ㄦ晶浠嬪汲娴煎瓨鈷掗柛灞剧懅缁愭梹绻涙担鍐叉处閸嬪鏌涢埄鍐嚂闁瑰嘲鍢查～婵嬫偂鎼达絼妗撻柣搴ゎ潐濞叉﹢銆冮崨瀛樺仼婵犻潧顑嗛弲鎼佹煟閿濆懏婀版い顐ｆ礋閺岀喖鎮滃鍡樼暦闂佺顑嗛崝娆撳蓟閵堝棙鍙忛柟閭﹀墾閹峰嘲螖閸涱厽杈堝銈嗗姧闂勫嫰鍩涢幋锔界厱婵犻潧妫楅顏呯節閿熻姤瀵肩�涙鍘介梺鍐叉惈閿曘倝鎮橀敃鍌涚厪闁糕剝娲滅粣鏃傦拷娈垮枟閹歌櫕鎱ㄩ敓浠嬫煃閳轰礁鏆為柣婵囧▕濮婄粯鎷呯憴鍕哗闂佺瀵掗崳锝咁嚕閺屻儱鐓涢柛娑卞弨閸╃偤姊洪崜鎻掍簼婵炲弶锕㈤崺娑㈠箳閹炽劌缍婇弫鎰板川椤斿吋娈橀梻浣告憸閸犳捇宕戦悙鍝勭疄闁靛濡囩弧锟介梺绋胯閸婃宕ョ�ｎ喗鍊甸悷娆忓绾惧鏌涘Δ浣糕枙闁绘侗鍣ｅ畷鍫曨敆婢跺娅撻梻浣藉Г閿氭い锔诲灣閼洪亶濡烽敂鍓х槇闂佹眹鍨藉褎绂掗敃鍌涚厱妞ゎ厽鍨甸悘锔撅拷瑙勬礈椤㈠﹪濡甸幇鏉跨闁规崘娉涚敮鎺楁⒒娴ｈ鍋犻柛搴㈡そ瀹曟粌顫濋懜闈涗簵闂佺粯鏌ㄩ崥瀣偂濞戙垺鐓曢柟鎵虫櫅婵″灝顭胯閻╊垶寮婚埄鍐懝闁跨喕濮ょ粋宥夊醇閺囩偠鎽曢梺璺ㄥ枔婵挳鐛姀鈥茬箚妞ゆ牗绮庣敮娑㈡煛婢跺瞼褰戦梻鍌氬�搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姵濞婇弻銊╂偄閸戙倖瀚归柣鏇氱劍缂嶅牆鈹戦悙鎻掔骇闁绘娲滈崣鍛存⒑闂堟单鍫ュ疾濠婂牆纾挎俊銈呮噺閻撴洟鏌嶉埡浣告灓婵☆垰鎳愰幉鎼佹偋閸繄鐟查梺鍝勬噺閻擄繝寮诲☉妯锋闁告鍋涚�涳絽鈹戦埥鍡椾簻闁活厼鍊搁～蹇涙惞閸︻厾锛滃┑鈽嗗灥濞咃綁鎮烽幇顔剧＝濞撴艾娲ら弸鐔兼煟閻斿弶娅呮い鏇悼閹风姴顔忛鍏煎�┑鐘灱濞夋稖鐧岄梺闈浥堥弲婊堟偂閵夆晜鐓涢柛灞炬皑娴犮垽鏌嶉柨瀣棃闁哄矉绲介埥澶愬础閻愬浜梻浣哥枃椤宕归崸妤�绠栨繛鍡樻尭缁狙囨煙鐎电小闁瑰鍏樺缁樻媴鐟欏嫬浠╅梺鍛婃煥缁夋挳鈥旈崘顔藉癄濠㈣泛鏈▓楣冩⒑濮瑰洤鐏い锝庡櫍楠炲繘鎮滈懞銉︽珳闁硅偐琛ラ崜婵嬫倶瀹ュ鈷戦柟鎯板Г閺侀亶鎮介銈囩瘈鐎殿喛顕ч埥澶愬閳哄倹娅囬梻渚�娼ч悧鍡涘箠韫囨稒鍊跺〒姘炬嫹婵﹥妞藉Λ鍐ㄢ槈濞嗘ɑ锛侀梺姹囧焺閸ㄦ娊宕戦悢鑲猴綁骞囬弶璺唺濠德板�ч幏椋庣磼閻樺磭鈾侀柕鍥у瀵噣宕奸悤鍌滃惞婵犵锟藉啿绾ч柛鏃�娲熼崺鐐哄箣閿旂粯鏅╃紒缁㈠弮閺�閬嶅极閹�鏀介柨娑樺娴犫晜淇婇銏狀伃闁诡噣绠栭幃婊堟寠婢光斁鏅犻弻銊╁棘閸喒鎸冮梺浼欑畱閻楁挸顫忓ú顏勫窛濠电姴鍊歌闂備胶绮幐鎼佹偋閸℃绁梻鍌欑贰閸撴瑧绮旈悽绋跨厱闁圭儤鍤氳ぐ鎺撴櫜闁告侗鍠栭弳鍫ユ⒑閸濄儱鏋旈柛瀣ㄥ�濋獮鍡涘炊閵娿儳绐為悗鐧告嫹闁跨喓鏅竟鏇㈠礂缁楄桨绨婚梺鍝勫暙閸婄懓鈻嶉弴銏＄厵闁告劖褰冮弳锝夋煛瀹�瀣М闁轰焦鍔欏畷鎯邦槻妤犵偛顑呰灃闁绘﹢娼ф禒婊勭箾瀹割喖寮鐐插暢椤﹀湱锟借娲滈崢褔鍩為幋锕�绠婚柡澶嬪焾娴兼挸鈹戦敍鍕粶妞ゆ垵鎳庨湁濡炲楠搁ˉ姘归悩宸剱闁绘挻娲橀妵鍕箛椤斿す銏ゆ煟韫囧﹥娅婄�规洦鍨跺畷顐﹀Ψ瑜忛敍婵囩箾鏉堝墽鍒伴柟纰卞亝閻楀酣鏌ｆ惔锝嗩仧闁圭兘顥撶槐鎺旓拷锝庡亽閸庛儲绻涢崗鑲╁⒌闁哄睙鍡欑杸婵ê鍚嬬紞鍫ユ倵鐟欏嫭绀�妞わ妇鏁诲濠氬即閻旇櫣顔曢梺鍓茬厛閸犳牗鎱ㄩ弴銏♀拺缂備焦顭囩紓姘舵煕閵娿劍顥夋い顐㈢箰鐓ゆい蹇撴噹娴狀參姊洪崫鍕垫Ч閻庣瑳鍥舵晩闁跨喍绮欏缁樻媴閻戞ê娈岄梺鎼炲�栭悧鐘荤嵁韫囨稒鏅搁柨鐕傛嫹?
		SpecialNpcDialogProcessor processor = SpecialVisitProcessCreator.getInstance().createNpcDialogProcessor(roleid, npckey);
		if(null != processor){
			Module.logger.info("specialNpcDialog. npcid:"+share.id);
			processor.onVisitNpc();
			return;
		}
		
		final SVisitNpc svisitNpc = new SVisitNpc();
		svisitNpc.npckey = npckey;
		final java.util.List<Integer> services = NpcServiceManager.getInstance().getShowServicesIDSByNpcKey(roleid, npckey);
		if (null != services) {
			svisitNpc.services.addAll(services);
		}
		getScenarioQuests(roleid, share.id, svisitNpc);
		
		gnet.link.Onlines.getInstance().send(roleid, svisitNpc);
		Module.logger.info("SVisitNpc闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╃窔閺岀喖宕滆鐢盯鏌涚�ｎ偄濮堥柕鍥у瀵挳鎮欓幖顓燂紒闂佽瀛╅懝鍓х礊婵犲洤钃熸繛鎴欏灩缁犳盯姊婚崼鐔衡檨闁诲繐鐗撻幃妤呮偡閻楀牆鏆堢紓浣筋嚙閸熷瓨淇婇悽绋跨妞ゆ牗鑹鹃崬銊╂⒑闂堟丹娑㈡晸閽樺）锝夊醇閵夛妇鍘甸梺绋跨箰閸氬绱為幋锔界叆闁哄洦锚閿熻姤绻堝畷娲倷閸濆嫮顓洪梺缁樺姌鐏忔瑩鎮块崶顒佲拻濞达絼璀﹂悞楣冩煥閺囨ê鍔氶悡銈夋煟閺冨洤浜圭�规挷绶氶悡顐﹀炊閵婏妇鈹涢梺褰掝棑閸忔﹢寮幇顓熷劅闁斥晛鍟版禍顏堟⒒娴ｅ憡鎯堟い鎴濆缁牊绗熼敓浠嬪春閻愬搫绠ｉ柨鏃囨娴滃綊姊洪崨濠勬噧妞わ富鍨惰棟闁冲搫鎳忛埛鎴犵磽娴ｈ偂鎴犱焊閻楀牏绠鹃柛娆忣樈閻掍粙鏌熼獮鍨仼闁宠棄顦垫慨锟介柣妯活問閸氬懘姊绘担铏瑰笡闁告梹娲熼幃妯侯潩鐠烘椽妫峰銈嗘尵婵澹曟禒瀣厱閻忕偟鍋撻惃鎴﹀冀閿熺姵鈷戦柟鑲╁仜婵″吋绻濋敓浠嬪础閻愬稄缍侀獮鍥级鐠侯煈鍞烘繝寰锋澘锟芥捇鎮為敃锟介埢宥夊閿涘嫮顔曢柣搴ｆ暩椤牆鐡俊鐐�栭崹鐢稿箠閹邦喖鍨濋柛顐犲劚缁�鍐煃閻熻埇浠掔紒銊ヮ煼濮婃椽宕崟顐ｆ闂佺锕﹂幊鎾诲煝瀹ュ鍗抽柕蹇ョ磿閸樺崬鈹戦埥鍡楃仩闁圭⒈鍋婇幊婊嗐亹閹烘挾鍘撻柣鐔哥懃鐎氼剟鎮橀幘顔界厵妞ゆ梻鏅幊鍥╋拷娈垮枛閻栧ジ鐛�ｎ喗鍋愰弶鍫涘妽閳绘洟姊绘担绛嬪殭婵﹫绠撻敐鐐村緞婵炴帗妞介弫鍐磼濮橀硸妲舵繝鐢靛仜濡瑩骞栭埡鍛瀬閻庯綆鍠楅悡銉︾節闂堟稒顥炴い銉︽崌閺屾稓锟斤綆浜濋崵鍥煛鐏炲墽娲存鐐叉喘婵℃悂鏁傞悾灞界悼闂傚倷绀侀幉锟犳晝閵忥紕顩查悹杞拌濞兼牠鏌ц箛鎾磋础缁炬儳鍚嬫穱濠囶敍濠靛棗鎯炲銈忚礋閸庨潧顫忛搹鍦煓闁告牑锟藉厖绱ｆ繝鐢靛閹风兘姊洪锟界粔鐢稿疾閹间焦鐓犻柟顓熷笒閸斻倝鏌涢悢鍝ュ弨闁哄瞼鍠栧畷娆撳Χ閸℃浼�-" + getString(svisitNpc,share.id));
	}
	

	private String getString(SVisitNpc svisitNpc,int npcid) {
		StringBuffer sb = new StringBuffer();
		sb.append("NPC:[" + npcid + "],");
		sb.append("Services:[");
		for(Integer serviceid : svisitNpc.services){
			sb.append(serviceid +";");
		}
		sb.append("],");
		sb.append("ScenarioQuests:[");
		for(Integer serviceid : svisitNpc.scenarioquests){
			sb.append(serviceid +";");
		}
		sb.append("].");
		return sb.toString();
	}
	@Override
	protected void process() {

		//Module.logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幗闂侀潧绻堥崺鍕倿閸撗呯＜闁归偊鍙庡▓婊堟煛瀹�锟介崰鏍蓟閸ヮ剚鏅濋柨鐔剁矙瀵鈽夐姀锛勫幈闂侀潧顭俊鍥╃不閻愭惌娈介柣鎰嚟婢ь亪鎳ｉ幇顓滀簻闁硅櫣鍋炵�氬綊姊虹拠鍙夌濞存粍绻勯幑銏犫槈閵忕姴绐涘銈嗙墬椤曟挳鏁愰崥鍐查叄瀹曟儼顧傞棅顒夊墮閳规垿鍨惧畷鍥х厽閻庤娲忛崝鎴︺�佸▎鎾崇缁炬澘褰夐崫妤冪磽閸屾艾锟芥悂宕愰悜鑺ュ殑闁肩鐏氶崣蹇涙煙閹増顥夌痪顓ㄦ嫹闂備浇顫夐崕鐓幬涢崟顖涘珔闁绘柨鎽滅粻楣冩煙鐎电锟芥垵顫濋鈺嬬秮瀹曞ジ鎮㈢粙鍨紟婵犲痉鏉匡拷褔骞忛悜鑺ョ厽婵°倧鎷烽柨鏇ㄤ簻椤曪綁顢曢敃锟界粻姘辨喐婢舵劕缁╁ù鐘差儐閻撶喖鏌熼柇锕�澧紒鐙欏洦鐓曢柨婵嗙墛椤ュ鏌嶇憴鍕伌闁诡喗绮撳畷鍫曞Ω閵夘喕绱﹂梻鍌氬�搁崐椋庣矆娓氾拷楠炴牠顢曢敂钘夊壒婵犮垼娉涢懟顖滄閵堝鐓曞┑鐘插閺嬫柨霉濠婏拷缁瑥顫忕紒妯诲闁荤喐婢樻慨銏㈢磽娴ｈ櫣甯涢柨鏇樺灲瀵偊骞樼紒妯烘疅闂侀潧锛忔笟濠冨闁圭儤鍩堝〒濠氭煟閻斿憡绶查柡鍡涗憾閺屽秶鎲撮崟顐や紝闂佽鍠掗弲鐘荤嵁閸ャ劍濯撮柛娑橈攻閻濋亶姊婚崒娆戝妽闁诡喖鐖煎畷婵堬拷锝庡枛绾拷闂佹儳娴氶崑鍌滄崲閸℃稒鐓曟い鎰剁稻缁�锟界紓浣哄Х閹虫捇婀侀梺鎸庣箓濡盯骞楅崘顔界厵闁兼亽鍎茬粈锟介梺瀹狀潐閸ㄥ潡骞冨▎鎾崇骇闁瑰濮冲鎾剁磽閸屾瑧璐伴柛鐘崇閹便劑寮堕幋婵堛偒闂傚倷鑳剁划顖炲箰閸濄儻鎷烽崹顐㈢瑨闁靛棙甯楃换婵嗩潩椤撶姴甯鹃梻浣稿閸嬪懐鎹㈤崒鐐叉辈婵炲棗绻嗛弨浠嬫煃閵夈儱鏆遍柟顔藉灥鑿愰柛銉戝秷鍚銈冨灪濞茬喖寮幇鏉跨倞闁冲搫鍟鏍⒑鐠囨彃顒㈡い鏃�鐗犲畷鎶筋敋閿熻棄鐣烽幋锕�绀嬫い鏍电稻閺咃綁姊虹粙璺ㄧ闁告鍛偨闁绘劖绁撮弨浠嬫煟濡绲绘い蹇ｅ弮閺岋絽鈽夊▎鎰瀺缂備胶绮换鍌炲煝閹捐鍨傛い鏃傛櫕娴滎亝淇婇悙顏勶拷銈夊矗鎼淬劌绀堥柣鏃囧亹瀹撲焦淇婇妶鍛櫤闁哄懏鎮傞弻銊╂偆閸屾稑顏� id + " + NpcServiceManager.getNpcIDByKey(npckey));
		
		// protocol handle
		// TODO:濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓哄┑鐐叉缁绘帗绂掓ィ鍐┾拺缂佸顑欓崕宥夋煕婵犲啰绠炵�殿喖顭峰鎾偄閾忚鍟庨柣鐔哥矊缁夌懓鐣烽鐑嗘晝闁挎棁妫勯敓鍊熸硾閳规垿鎮╅崣澶婎槱闂佹娊鏀遍崹鍧楀箖瀹勬壋鏋庨煫鍥ㄦ惄娴犲ジ姊洪崨濠冪厽闁稿﹥娲熼垾锕傛嚄椤栵絾些婵犵數鍋為幐鎶藉绩鏉堚晝鍗氶柣鏃傚帶閸楁娊鏌曡箛濠忔嫹閾忣偆鏋�闂傚倷绶氬褔篓閿熺晫绱掗悩鍐茬仴妞ゆ洩缍佸畷褰掝敊鐟欏嫭鏉搁梻浣哥枃濡嫬螞濡ゅ懏鍊堕柨鐔哄У閸婄數绱掑Δ浣衡槈闁瑰啿绻樺畷妤�顭ㄩ崼鐔哄幈闂佸湱鍋撻〃鍛村箠閹扮増鏅繝濠傜墛閳锋垿鎮归幁鎺戝闁哄绉剁槐鎺楊敊閻ｅ本鍣ч梺浼欑悼閸忔﹢鐛幒妤�绠ｉ柡鍐挎嫹妞ゎ偄绉撮埞鎴︽倷閸欏妫炵紓浣虹帛閸旀牜锟介潧鍚嬮幆鏃堝閵忋垻妲囬柣搴″悁閸楁娊寮ㄩ崡鐑嗙唵婵鎷烽柡浣规崌閹崇偤濡烽敂缁㈡Ч婵＄偑鍊戦崹娲偋閻樿尙鏆﹂柛妤冨亹閺嬪孩绻涢崱妯哄妞ゅ繗娉涢埞鎴︻敊閺傘倓绶甸梺鍛婃尰缁嬫挾鍒掗弬妫垫椽顢旈崨顖氬箥婵＄偑鍊栧濠氭偤閺傚簱鏋旀慨妤嬫嫹闁哄瞼鍠栧畷锝嗗緞鐎ｎ亜鏀柣搴ゎ潐濞叉粓宕伴弽顓滐拷浣肝旈崨顓狅紲闂佹寧姊归崕鎶藉几閻樼粯鈷掗柛灞捐壘閿熺晫鍏橀幊妤呭醇閺囨鎷烽敃鍌氶唶婵犮垺绻傜紞濠囧箖濠婂牊瀵犲璺侯儑閿熺瓔鍓熼弻锝夋偐閸欏鎮欏┑鈽嗗灠閿曨亜鐣烽悽绋垮嵆闁绘梻绻濈花濠氭⒑鐟欏嫭绶插褍閰ｉ幃鐐綇閳哄啰锛滈梺璺ㄥ枍缁瑥鐣峰锟介、娆撴偩鐏炶棄绗氶梻鍌欑閹诧紕鎹㈤崒婊愭嫹濮樼厧澧寸�殿喗濞婇幃銏ゅ礂閼测晛骞嶉梻浣瑰劤濞存岸宕戦崱娆戜笉闁绘劕鐡ㄩ崣蹇撯攽閻樻彃鏆為柕鍥ㄧ箖椤ㄣ儵鎮欑�电鈷岄梺璇″枟閻熲晠鐛幘璇茬闁瑰疇娅曢〃濠傤潖缂佹ɑ濯撮柛娑橈工閺嗗牆鈹戦悙棰濆殝缂佺姵鎸搁悾宄邦煥閸愶絾顫嶅┑鐘欏啨浠掓慨瑙勵殜濮婂搫效閸パ呬患闂佺顕滅换婵嬪春濞戙垹绠虫俊銈勮兌閸橀亶鏌ｈ箛鏇炰沪鐎规洘蓱缁旂喎顫滈敓浠嬪蓟閵娾晜鍋勯悹鍥ㄧ暙閹剧粯鐓欐い鏃傚帶閿熻姤鎮傞幃楣冩倻閽樺鐤�闂佸搫顦冲▔鏇㈩敊閹邦厾绠鹃弶鍫濆⒔閸掍即鏌熼懞銉х煉闁轰礁绉撮埢搴ㄥ箻缁瀚奸柣鐔哥矌婢ф鏁Δ鍛櫖闁绘棁娅ｇ壕濂告煥閻旇袚闁瑰嘲鎳樺畷顐﹀礋閸偒妫ラ梻鍌欐祰瀹曠敻宕伴幇顓犵彾閻庯綆鍠栫紒鈺伱归悩宸剱闁绘挾鍠愭穱濠囶敍濠靛浂浠╅梺鍝勵儏閸燁偊鈥︾捄銊﹀枂闁告洜鏁搁崝椋庣磽娴ｄ粙鍝洪柟绋款煼楠炲繘宕ㄩ弶鎴犵厬婵犮垼娉涢鍥亹鐎ｎ喗鈷掑ù锝呮啞閹牓鏌￠崼顐㈠閻撱倝鏌ｉ弬娆炬疇闁搞倖娲熼弻娑欑節閸曨偅鐝″┑陇灏褔鍩為幋锔藉�烽柤纰卞墮閳峰﹪姊洪悷鏉挎闁瑰嚖鎷�,濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓哄┑鐐叉缁绘帗绂掓ィ鍐┾拺缂佸顑欓崕宥夋煕婵犲啰绠炵�殿喖顭峰鎾偄閾忚鍟庨柣鐔哥矊缁夌懓鐣烽鐑嗘晝闁挎棁妫勯敓鍊熸硾閳规垿鎮╅崣澶婎槱濡炪們鍎遍敃銉╁Φ閸曨垰绠涢柍杞拌兌娴犵偓绻濋姀锝嗙【閻庢矮鍗冲濠氭偄閻撳骸绐涙繝鐢靛Т閸燁偊宕径鎰�垫繛鍫濈仢閺嬨倖銇勯鐐靛ⅵ妞ゃ垺锕㈠畷妤呮偂鎼达絿鐛梺璇插嚱缂嶅棝宕滃▎蹇ｅ殨闁惧浚鍋嗙弧锟介梺姹囧灲濞佳囧煝閸喓绠惧ù锝呭暱閸氭ê鈽夊Ο閿嬬�婚梺瑙勫劤缁夋挳藝閻㈢绠栨繛鍡樺煀閹风兘妫冨☉娆愬枑濡炪倖姊瑰ú鐔奉潖濞差亜宸濆┑鐘辫兌缁讳線姊洪幖鐐插闁告濞婂畷娲閵堝懘鍞堕梺闈涱檧婵″洭宕㈤幖浣圭厽闊洦娲栨禒婊冾熆瑜岀划娆撳灳閺嶎厼绀傜紒妤勬〃缁ㄥ姊洪幐搴㈢；闁绘帪绠撻幃鐢割敂閸喓鍘梺鎼炲劀閸愬彞绱斿┑鐘殿暯閸撴繈骞冮崒娑楃箚闁绘垼濮ら弲婊呯磽娴ｇ櫢鍏紒杈殜濮婅櫣鎷犻崣澶婃敪濡炪値鍋勯ˇ顖滃弲濠殿喗顨愰幏椋庯拷瑙勬礀缂嶅﹤鐣风粙璇炬棃宕橀妸褋鍋婇梻鍌欑劍閹爼宕曞ú顏勭婵娉涚壕濠氭倵閿濆骸鏋熼柣鎾存礃閵囧嫰骞囬澶广垽鏌ｈ箛濠冩珕妞ゃ劊鍎甸幃娆愭綇閹规劧鎷烽幐搴㈠弿濠电姴鍋嗛悡鑲╋拷瑙勬礃鐢帡锝炲┑瀣垫晢濠电姴鍟鍫曟⒑瑜版帗锛熼柣鎺炵畵瀹曟垹锟斤綆鍠楅悡鏇㈡煙娴煎瓨娑ч柡瀣洴閺岋綁濡堕崶褌澹曠紓浣虹帛缁诲啰鎹㈠┑瀣＜婵炴垶顭囪ぐ鍛存⒒娴ｇ儤鍤�闁搞垺鐓″畷鏌ュ蓟閵夘垳绋忓┑鐘绘涧椤戝棝宕愰柨瀣ㄤ簻闁硅櫣鍋炵�氱懓顪冮妶鍛寸崪闁瑰嚖鎷�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐鍛傜喎鈻庨幆褎顔勭紓鍌欒兌婵挳鎮樺璺何﹂柛鏇ㄥ枤閻わ拷闂佸湱鍋撻幆灞轿涢悙鐢电＝濞达絿鏅崼顏堟煕婵犲啰绠炵�殿喛顕ч埥澶婎煥鎼粹懣顏呬繆閻愵亜锟芥垿宕濆畝鍕疇闁归偊鍘鹃悵鍫曟煛閸ャ儱鐏╅梺瑁ゅ�栨穱濠囧Χ閸曨喖鍘￠梺鍛婏供娴滎亜顫忓ú顏勭闁圭粯甯婄花鑲╃磽娴ｇ瓔鍤欑紒澶嬫綑瀹撳嫰鎮峰鍛暭閻㈩垱顨婇幃锟犲即閵忊�筹拷鐢告煥濞戞ê鑸归悗姘煎弮閹潧顫濋鑺ユ杸濡炪倖姊婚妴瀣绩缂佹ü绻嗛柣鎰閻瑩鏌曢崱鏇狀槮閾绘牠鏌涘☉鍗炴灍婵炲懌鍨藉鐑樺濞嗘垵鍩岄梺娲诲墮閵堟悂骞嗗畝鍕缂備焦顭囬崢浠嬫⒑闂堟稓绠冲┑顔炬暬瀹曨垶鎮欓悜妯煎幈闁诲函缍嗘禍婊堟晸閽樺鍋ョ�殿喖顭烽弫鎾绘偐閼碱剙锟界偤姊洪棃娑辨Ф闁稿氦娅曠粋鎺撱偅閸愨斁鎷虹紓鍌欑劍钃遍悘蹇庡嵆閺岋綁鎮㈤崣澶嬬彋閻庢鍠涢褔鍩ユ径濞㈢喖鏌ㄧ�ｎ偅婢戦梻鍌欒兌绾爼宕滃┑瀣拷鍐疀閺傛鍤ら悗鐧告嫹闁告洦鍏橀幏铏圭磽娴ｅ壊鍎忔繛纭风節椤㈡挸螖閸愵亞锛滅紓鍌欑劍閿曨偊鎳撶捄顭掓嫹濞堝灝鏋涙い顓㈡敱娣囧﹪骞栨担鍝ュ幐闂佺鏈惌顔捐姳婵犳碍鈷戦柤濮愬�曞瓭濠电偠顕滅粻鎾诲箖妤ｅ喚鏁冮柨鏇嫹缂佺姾宕电槐鎾存媴鐠囷紕鍔烽梺鍛婎焾濡嫰鍩為幋鐐茬疇闂佺锕ュú鐔风暦椤栫儐鏁冮柕蹇嬪灪閹冲啯绻濈喊澶岀？闁稿鍨垮畷鎰板冀椤剝妞介崺锟犲礃閵娧呯摌闂備礁鎲￠幐鍡涘礋椤愩垻鍝庡┑鐘垫暩婵烇拷婵炰匠鍏炬盯顢橀悜鍡欏姺闂佸啿鎼崐鑸电濠婂牊鐓欓柣鎴灻悘銉╂煥閻旇袚闁诡喖鍊垮顐﹀箻缂佹ê浠奸柣蹇曞仦閸ㄦ繄鍒掔捄渚富闁靛牆绨肩花濠氭煕閻旈鎽犲ǎ鍥э躬瀹曞ジ寮撮悙鑼讹拷鍨攽鎺抽崐鏇㈠疮娴兼潙绠熸い蹇撶墛閳锋帒霉閿濆牊顏犻悽顖涚洴閹粙顢涢敐鍕晼缂備緡鍠栭…鐑界嵁鐎ｎ喗鏅濋柨鐔剁矙閹�斥攽閸剚瀚规鐐茬仢閸旀碍銇勯敂璇茬仸鐎规洘锕㈤弫鎾绘寠婢舵ɑ瀵岄梺闈涚墕濡瑧浜搁悽鍛婄厱闁绘娅曞畷宀�锟借娲忛崹铏圭矉閹烘棑鎷烽敐搴′航婵☆偄鎳庨—鍐Χ閸℃顫囬梺鎼炲妿閸庛倕顕ラ崟顖氱妞ゆ帒鍊婚鏇㈡⒑閸涘﹦鎳冩い锕侀哺閺呭爼顢楅崒婊咃紲闂佺鏈粙鎴澝归锟介弻娑㈠煛鐎ｎ剛鐦堥悗瑙勬磸閸旀垿銆佸▎鎾崇畾鐟滃秶绮婚悙鐑樷拻濞达絿鐡旈崵娆撴煕閹寸姵娅曠紒杈╁仱瀹曞崬鈽夊Ο纭风幢闂備礁鎲″ú锕傚礈濮樿泛鐭楅煫鍥ㄧ♁閻撴洘銇勯幇顔夹㈤柛鏃�绮撻弻娑欑節閸曨剚姣堝┑顔硷工椤嘲鐣锋總鍛婂亜閻炴稈鍓濋敍鍫ユ⒒娴ｄ警鐒炬い鎴濆暣瀹曠懓煤椤忓偊鎷烽崘顔嘉ㄩ柍鍝勫�搁敓鐣屽厴閺屾稑鈻庤箛锝喰﹂梺鍝勵儑婵挳鈥旈崘顔嘉ч柛鎰╁妿娴犻箖姊虹紒姗嗘畼濠电儑鎷峰Δ鐘靛仜閿曨亪骞冨▎鎾充紶闁告洖绨洪崝鎴﹀蓟閵娾晛绫嶉柛銉仢閹惧墎纾煎Λ鐗堢箓娴滅増鎱ㄦ繝鍌ょ吋鐎规洘甯掗～婵嬵敆婵犲啫顏堕梺缁樺灱婵倝宕甸崟顖涚厱妞ゆ劧绲剧粈锟界紒鐐劤椤兘寮婚弴鐔虹闁绘劦鍓氶悵鏃傜磼閻愵剙鍔ゆ繛灏栵拷鎰佹綎婵炲樊浜堕弫鍡涙煥閻旂儤娅曠紒顔芥楠炴﹢顢欓挊澶夌棯婵＄偑鍊栧ú鈺呭箯閻戣姤鐓涢悘鐐插⒔椤吋銇勯敃浣圭彧闁靛洤瀚版俊鎼佸Ψ閿旂粯锛嗛柣搴㈩問閸犳鎮￠敓鐘靛祦闁哄秲鍔嶆刊鎾煕閿旇骞栫�殿噮鍠楃换婵堝枈濡椿娼戦梺鍓茬厛閸ㄦ娊骞忛崘顔芥櫇闁跨喕妫勫畵鍕⒑閸涘﹦鈽夐柨鏇悼閹广垽宕卞☉娆戝幘缂佺偓婢樺畷顒佹櫠娴煎瓨鍋ㄦい鏍ㄧ〒濞叉挳鏌＄仦鐐鐎规洘鍎奸ˇ鍙夈亜韫囷絽骞楅柕鍥у婵拷闁斥晛鍟伴ˇ浼存⒑鏉炴壆鍔嶉柛鏃�鐟ラ悾鐑藉醇閺囩偟鍘搁梺鍛婂姀閺呮粎娆㈡导瀛樷拻闁稿本鑹鹃敓钘夊槻闇夐柛銉戝本绂嗛梺闈浤涢崨顖滃姸濠电偞鎸婚悢顒勫箯妞嬪函鎷风憴鍕闁搞劏娉涢锝夊醇閺囩偟顓洪梺缁橆焾濞呮洟顢欓弴銏♀拻濞达絽鎲＄拹锟犳煕鎼存稑锟芥繂鐣峰ú顏勯唶婵犲灚鍔楅崝鐑芥⒑閸愬弶鎯堥柛濠呭煐缁傚秴顭ㄩ崼鐔哄幍闂佹儳绻掗幊鎾寸閿曞倹鍊垫慨姗嗗墰缁夌儤鎱ㄦ繝鍛仩闁瑰弶鎸冲畷鐔碱敆閿熻姤绂掗埡鍛拺缂佸灏呴弨鑽ょ磼鐠囨彃锟藉潡鏁愰悙鍓佺杸闁哄洨濮烽敍婊冣攽閳藉棗鐏ユい鏇嗗浂鏁侀柟鍓х帛閳锋垹绱撴担濮戭亪鎮橀敃鍌涚叆婵﹩鍘剧粻楣冩煕椤愶絿绠橀柣鎺戞啞閹便劍绻濋崨顕呬哗闂佸綊顥撴繛锟介柟宕囧█椤㈡宕掗妶鍛毉缂傚倸鍊搁崐宄懊归崶顒夋晪鐟滃繘鏁撻懞銉х叝闁告鍟块锝夘敃閿曪拷缁犺崵绱撴担濮戭亜鈻撻悢鍏尖拺闂傚牊渚楀Σ鍫曟煕鎼粹�宠埞鐞氭瑩鏌涢鐘插姕闁抽攱鍨块弻娑樷攽閸曨偄濮庨柡宥侊拷鏂ユ斀妞ゆ棁顫楀鍫濈闁瑰瓨绻勯弳锔芥叏濡寧纭剧紒鐘烘珪娣囧﹪濡惰箛鏂款伓闂傚倷绀佸畷顒�煤椤撱垹钃熼柨婵嗩槸缁秹鏌涢顐簼妞ゃ儲鐗滅槐鎾存媴閻熸澘顫庨梺绋款儍閸婃洟锝炶箛鏂诲亰閻熶降鍊撳Ч妤呮⒑閸︻厼鍔嬮柛銊﹀▕瀹曠増绻濋崶銊㈡嫼闂佸憡绋戦…顓㈡嚀鐠恒劎纾奸柣妯虹－婢ь亪鏌ｉ敐鍥у幋濠殿噯鎷烽梺闈涚墕濡绂掑ú顏呪拺闁告稑锕﹂埥澶愭煥閺囶亞鐣电�规洏鍨虹粋鎺旓拷锝庡亞閸樼敻姊虹粙璺ㄧ闁稿鍔欏鍐差潨閿熶粙寮诲☉銏犖╅柕澶樺枤閸氬姊虹化鏇熸珨闂傚嫬瀚划顓㈡偄閸忓吋娅㈡繛瀵稿Т椤戝懘鎷戦悢鍏肩厸闁搞儯鍎遍悘鈺傤殽閻愵亜鐏紒缁樼洴瀹曞崬螖閸愵亶鍚呮繝纰橈拷鍐茬骇闁告梹娲濋悘鍐⒑缂佹﹫鑰挎繛浣冲嫮顩锋繝濠傚娴滄粓鏌熺�涙绠ユ俊顖ゆ嫹闁诲孩顔栭崳顕�宕戞繝鍌滄殾婵鎷锋い銏＄懇閹崇偤濡烽敂璁虫埛濠电姷鏁搁崑娑㈩敋椤撶喐鍙忛柟缁㈠櫘閺佸嫰鏌涘☉鍗炵仯闁活厼妫濋弻娑㈠即閵娿儳浠梺缁樻尵閸犳劖绌辨繝鍥舵晬婵犻潧妫斿Ч妤呮煟閵忊晛鐏￠柣鈺婂灦瀵鏁愭径濠勵啋闁荤姾娅ｉ崕銈夋倶閸儲鈷戦柛婵嗗閻掕法绱掔紒妯肩畵闁伙絿鍏橀獮鎺楀箣閺冿拷椤秴鈹戦绛嬫當婵☆偅顨呴埢鎾斥攽鐎ｎ偀鎷绘繛杈剧悼閸庛倝宕甸敓浠嬫倵濞堝灝鏋涢柣鏍с偢閻涱噣宕橀鑲╋紲闂佺粯鍔樼亸顏堝箺閺囥垺鍊垫鐐茬仢閸旀碍淇婇锝庢疁妞ゃ垺纰嶅蹇涘Ω瑜忛鏇㈡⒑缁洖澧查柨姘攽椤斿吋澶勯柕鍥у缁犳盯濡烽敃锟介锟�?...
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0){
			Module.logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姵濞婇弻銊╂偄閸戙倖瀚归柣鏇氱劍缂嶅牆鈹戦悙鎻掔骇闁绘娲滈崣鍛存⒑闂堟单鍫ュ疾濠婂牆纾挎俊銈呮噺閻撴洟鏌嶉埡浣告灓婵☆垰鎳愰幉鎼佹偋閸繄鐟查梺鍝勬噺閻擄繝寮诲☉妯锋闁告鍋涚�涳絽鈹戦埥鍡椾簻闁活厼鍊搁～蹇涙惞閸︻厾锛滃┑鈽嗗灥濞咃綁鎮烽幇顔剧＝濞撴艾娲ら弸鐔兼煟閻斿弶娅呮い鏇悼閹风姴顔忛鍏煎�┑鐘灱濞夋稖鐧岄梺闈浥堥弲婊堟偂閵夆晜鐓涢柛灞炬皑娴犮垽鏌嶉柨瀣棃闁哄矉绲介埥澶愬础閻愬浜梻浣哥枃椤宕归崸妤�绠栨繛鍡樻尭缁狙囨煙鐎电小婵℃鎸荤换婵嗏枔閸喗鐏嶉柤鍨﹀洦鐓曢柡鍐挎嫹闁搞劌娼￠悰顕�宕卞Δ鍐╂畷闂佸憡娲﹂崑鍡涱敊閹烘梻纾介柛灞剧懅閸斿秵銇勯鐐村枠鐎规洏鍨藉Λ鍐ㄢ槈鏉堛劌鐦滈梻渚�娼ч悧鍡椢涘▎鎴滅剨闁汇垹鎲￠悡鏇㈡煟濡寧鐝�规洖鏈妵鍕閳╁喚妫冨Δ鐘靛仦閿曘垽銆佸▎鎴炲枂闁挎繂妫楅娲⒒閸屾瑨鍏屾い顓炵墦瀵敻顢楅崟顒�娈炴俊銈忕到閸燁垶寮查幖浣圭厽闁挎繂鎳撶�氫即鏌涘Ο缁樺唉闁哄瞼鍠栭、娆撳箚瑜屽Σ鎰版⒑鏉炴壆顦﹂柛鐔告綑閻ｇ兘骞掗幋鏃�顫嶅┑鈽嗗灠閹碱偊藟閹扮増鈷戦柤濮愬�曢弸鎴犵磼椤旂厧顒㈤柡鍛版硾铻栭柛鎰ㄦ櫆濞堜即姊洪崷顓炲妺婵﹤顭烽幆宀勫幢濡ゅ﹦鍞甸柣鐘荤細濞咃綁鎮為崸妤佺厵濡炲楠搁崢鎾煙椤栨艾锟藉灝鐣烽妸锔剧瘈闁稿被鍊撶槐锕傛⒒閸屾艾锟藉嘲霉閸パ�鏋栭柡鍥ュ灩缁愭锟藉箍鍎卞ú銈夊垂濠靛洨绠鹃柛鈩兩戠亸顓㈡煛鐎ｂ晝绐旈柡宀�鍠栧畷婊嗩槾閻㈩垱鐩弻娑㈠Χ閸涱垍褔鏌＄仦鐐鐎垫澘瀚板畷鐓庘攽閸℃娼涘┑鐘愁問閸ｎ垳寰婃禒瀣亱闁圭偓鍓氬鏍ㄧ箾瀹割喕绨荤紒鐘茬秺閺岋綁骞囬鐐电シ濡炪値鍓欓悧鎾愁潖閾忓湱纾兼俊顖滃帶閳綊姊洪棃娑氬ⅱ妞ゎ厼鐗撻、姘舵晲婢舵ɑ鏅濋梺鎸庢穿閹烽绱掗悩宕囨创闁哄矉绲借灃闁跨喍绮欓幃褔宕卞☉娆愭闂佷紮绲介懟顖炲储閹绢喗鐓涢悘鐐插⒔閳藉鏌嶇拠鍙夊攭缂佺姵鐩獮娆撳礋椤掞拷椤忓爼姊洪懡銈呮瀾閻庢艾鐗嗛埥澶愬閻樻妲伴梻渚�娼ц噹闁告洦鍓﹂崯搴ㄦ⒒閸屾瑧绐旀繛浣冲棗顤傞梻浣告惈閹冲寮查悩宸殨妞ゆ劧绲跨弧锟介梺鎼炲劘閸斿酣宕㈤柆宥嗩棅妞ゆ劑鍨烘径鍕煠閸︻厼浜剧紒鍌氱Х閵囨劙骞掗幘璺哄箰濠电姰鍨奸崺鏍矙閹烘棑鎷峰鐐? 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃瑥顤�闂侀潧妫楅崯鎾蓟閿濆绠抽柟鎼灥閸氼偊姊洪崫鍕拱缂佸鍨块崺銉﹀緞婵炵偓鐎婚梺褰掑亰閸犳岸鍩㈣箛鏇犵＝闁稿本鐟ㄩ崗灞解攽椤栵絽寮�规洖缍婂畷濂稿即閻愯埖鎲伴梻渚�娼ц墝闁哄懏绮撳畷鎴﹀幢濞戞瑧鍘遍柣蹇曞仜婢т粙鍩ユ径瀣ㄤ簻闊洢鍎茬�氾拷? " + roleid + "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇洟姊绘担钘壭撻柨姘亜閿旇鏋ょ紒杈ㄦ瀵挳濮�閳撅拷閹风粯绻涙潏鍓хК婵炲拑缍佹俊瀛樼節閸ャ劎鍘遍梺瑙勫劤椤曨厾绮婚悙鐑樼厵闁芥ê顦敓钘夘煼閺佹捇寮妶鍥┬ｉ梺鍝ュУ閻楃娀骞冨▎鎰瘈闁告劧缂氱花濠氭⒑閻熺増鎯堢紒澶婄埣钘濋柨鏇嫹闂囧鏌ｅΟ鐓庡妺妞ゅ繒濮风槐鎺撴綇閵婏箑闉嶉梺鐟板槻閹虫ê鐣峰鍫濈闁圭儤鍨甸ˉ搴ㄦ⒒娴ｇ瓔鍤欐繛瀵稿厴閹兘骞庨挊澶屽�為梺闈涱焾閸庡骞忛悜钘夊瀭妞ゆ劗濮崇花濠氭⒑閸︻厼鍔嬮柛銊ф暬椤㈡棃顢旈崼鐔哄帗闂備礁鐏濋鍛存倶閹绢喗鐓欐い鏃囧亹缁夌儤顨ラ悙鎵獢妤犵偞甯￠獮瀣攽閹邦噯鎷烽搹顐ょ瘈闁汇垽娼ф禒婊堟煙閸愯尙绠荤�规洘绻傞埢搴ㄥ箻鐎圭姵鎲伴梻浣虹帛濮婂宕㈣缁牓宕熼娑氬帾闂佸壊鍋呯换鍐夊鍕╀簻闊洢鍎茬�氾拷");
			return;
		}
		
		PropRole prole = new PropRole(roleid, true);	
		if(prole.getProperties().getCruise() > 0) {
			Module.logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姵濞婇弻銊╂偄閸戙倖瀚归柣鏇氱劍缂嶅牆鈹戦悙鎻掔骇闁绘娲滈崣鍛存⒑闂堟单鍫ュ疾濠婂牆纾挎俊銈呮噺閻撴洟鏌嶉埡浣告灓婵☆垰鎳愰幉鎼佹偋閸繄鐟查梺鍝勬噺閻擄繝寮诲☉妯锋闁告鍋涚�涳絽鈹戦埥鍡椾簻闁活厼鍊搁～蹇涙惞閸︻厾锛滃┑鈽嗗灥濞咃綁鎮烽幇顔剧＝濞撴艾娲ら弸鐔兼煟閻斿弶娅呮い鏇悼閹风姴顔忛鍏煎�┑鐘灱濞夋稖鐧岄梺闈浥堥弲婊堟偂閵夆晜鐓涢柛灞炬皑娴犮垽鏌嶉柨瀣棃闁哄矉绲介埥澶愬础閻愬浜梻浣哥枃椤宕归崸妤�绠栨繛鍡樻尭缁狙囨煙鐎电小婵℃鎸荤换婵嗏枔閸喗鐏嶉柤鍨﹀洦鐓曢柡鍐挎嫹闁搞劌娼￠悰顕�宕卞Δ鍐╂畷闂佸憡娲﹂崑鍡涱敊閹烘梻纾介柛灞剧懅閸斿秵銇勯鐐村枠鐎规洏鍨藉Λ鍐ㄢ槈鏉堛劌鐦滈梻渚�娼ч悧鍡椢涘▎鎴滅剨闁汇垹鎲￠悡鏇㈡煟濡寧鐝�规洖鏈妵鍕閳╁喚妫冨Δ鐘靛仦閿曘垽銆佸▎鎴炲枂闁挎繂妫楅娲⒒閸屾瑨鍏屾い顓炵墦瀵敻顢楅崟顒�娈炴俊銈忕到閸燁垶寮查幖浣圭厽闁挎繂鎳撶�氫即鏌涘Ο缁樺唉闁哄瞼鍠栭、娆撳箚瑜屽Σ鎰版⒑鏉炴壆顦﹂柛鐔告綑閻ｇ兘骞掗幋鏃�顫嶅┑鈽嗗灠閹碱偊藟閹扮増鈷戦柤濮愬�曢弸鎴犵磼椤旂厧顒㈤柡鍛版硾铻栭柛鎰ㄦ櫆濞堜即姊洪崷顓炲妺婵﹤顭烽幆宀勫幢濡ゅ﹦鍞甸柣鐘荤細濞咃綁鎮為崸妤佺厵濡炲楠搁崢鎾煙椤栨艾锟藉灝鐣烽妸锔剧瘈闁稿被鍊撶槐锕傛⒒閸屾艾锟藉嘲霉閸パ�鏋栭柡鍥ュ灩缁愭锟藉箍鍎卞ú銈夊垂濠靛洨绠鹃柛鈩兩戠亸顓㈡煛鐎ｂ晝绐旈柡宀�鍠栧畷婊嗩槾閻㈩垱鐩弻娑㈠Χ閸涱垍褔鏌＄仦鐐鐎垫澘瀚板畷鐓庘攽閸℃娼涘┑鐘愁問閸ｎ垳寰婃禒瀣亱闁圭偓鍓氬鏍ㄧ箾瀹割喕绨荤紒鐘茬秺閺岋綁骞囬鐐电シ濡炪値鍓欓悧鎾愁潖閾忓湱纾兼俊顖滃帶閳綊姊洪棃娑氬ⅱ妞ゎ厼鐗撻、姘舵晲婢舵ɑ鏅濋梺鎸庢穿閹烽绱掗悩宕囨创闁哄矉绲借灃闁跨喍绮欓幃褔宕卞☉娆愭闂佷紮绲介懟顖炲储閹绢喗鐓涢悘鐐插⒔閳藉鏌嶇拠鍙夊攭缂佺姵鐩獮娆撳礋椤掞拷椤忓爼姊洪懡銈呮瀾閻庢艾鐗嗛埥澶愬閻樻妲伴梻渚�娼ц噹闁告洦鍓﹂崯搴ㄦ⒒閸屾瑧绐旀繛浣冲棗顤傞梻浣告惈閹冲寮查悩宸殨妞ゆ劧绲跨弧锟介梺鎼炲劘閸斿酣宕㈤柆宥嗩棅妞ゆ劑鍨烘径鍕煠閸︻厼浜剧紒鍌氱Х閵囨劙骞掗幘璺哄箰濠电姰鍨奸崺鏍矙閹烘棑鎷峰鐐? 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃瑥顤�闂侀潧妫楅崯鎾蓟閿濆绠抽柟鎼灥閸氼偊姊洪崫鍕拱缂佸鍨块崺銉﹀緞婵炵偓鐎婚梺褰掑亰閸犳岸鍩㈣箛鏇犵＝闁稿本鐟ㄩ崗灞解攽椤栵絽寮�规洖缍婂畷濂稿即閻愯埖鎲伴梻渚�娼ц墝闁哄懏绮撳畷鎴﹀幢濞戞瑧鍘遍柣蹇曞仜婢т粙鍩ユ径瀣ㄤ簻闊洢鍎茬�氾拷? " + roleid + "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊炲銈嗗笒椤︿即寮查鍫熷仭婵犲﹤鍟撮崣鍕煏閸℃鏆ｅ┑锛勬焿椤︽挳鏌ｉ鐔烘噰闁哄本鐩濠氼敇濠婂喛鎷疯楠炲繘鎮滈挊澶愭暅濠德板�ч幏椋庣磼閻欐瑥娲﹂悡鏇熴亜閹板墎鎮兼い锝呭级缁绘盯宕ㄩ鐕佹＆闂佸搫鏈粙鏍不濞戙垹绫嶉柛灞剧矌閸樻粓姊绘担鍛婃儓闁哄牜鍓熼幆鍕敍閻愵亷鎷锋笟锟藉鎾閳╁啯鐝抽梻浣虹《閸撴繈鎮烽姣硷綁顢楅崒婊咃紳闂佺鏈悷褏绮佃箛娑欑厵濡炲楠搁崢鎾煛鐏炲墽娲存い銏℃礋婵″爼宕ㄩ鍙ョ按缂傚倸鍊风拋鎻捨ｉ崟顖氱闁绘垼濮ら埛鎺楁煕鐏炴崘澹橀柨鐔诲Г閹倿骞冭缁绘繈宕橀鍡樺殞婵犲痉鏉匡拷鏇㈠箠鎼达絽顥氶柛褎顨嗛悡娆撴煙濞堝灝鏋涙い锝呫偢閺岋綁骞樼�涙顦伴梺璇″枟椤ㄥ﹪寮幇顓熷劅婵犻潧娲ら弸銈嗙節绾版ɑ顫婇柛銊ょ矙楠炲繘鎮滈懞銉㈡嫽婵炶揪绲介幉锟犲箚閸儲鐓涢柛顐亜婢ф挳鏌熼姘伃妞ゃ垺鐩幃娆擃敂鎼淬垹顏舵繛鎾寸啲閹烽锟芥鍠楅幐铏叏閿熶粙鏌嶉埡浣告殲闁绘繃濞婂缁樻媴閾忓箍锟藉﹪鏌涢幘瀵哥疄闁诡喚鍏橀、娑樞掔涵椋庣ɑ閻庝絻鍋愰敓鑺ョ♁鑿ら柟椋庣帛缁绘稒娼忛崜褍顕遍柣鐙呮嫹闁挎洖鍊归崐鍧楁煟閹伴潧鍘靛ù婊勭矒閺岀喓锟芥稒顭囩粻鏍ㄣ亜閵夛絽鐏柨鐔凤拷鐕佹綈婵炲弶顭囬幑銏ゅ磼閻愯尙鍘洪柟鍏肩暘閸斿瞼绮绘繝姘�甸柛锔诲幖鏍￠梺纭呭紦閸楀啿顫忕紒妯肩懝闁跨喕妫勯…鍥樄闁诡啫鍥у耿婵炲瓨婢樺ú锔撅拷鐢靛帶椤垽濡堕崪浣光枅閻庤娲栭妶鍛婁繆閻戣姤鏅滈柟顖嗗啰鐟查梻鍌氬�风粈渚�骞夐敍鍕床闁稿本绮ｉ幏宄邦潩閻撳骸鈷嬮梺杞扮劍閹瑰洭骞婇悙鍝勎ㄩ柨鏇嫹闁跨喕濮ら崝鏍Φ閸曨垰顫呴柍鈺佸枤濡啴姊烘潪鎵妽闁圭懓娲顐﹀箻缂佹ɑ娅㈤梺璺ㄥ櫐閹凤拷?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊鐒﹂崕鎾剁磽娴ｅ搫校婵犮垺锕㈤崺鐐哄箣閿旇棄浜归悗瑙勬礀濞村倿寮抽敓鐘斥拺闁硅偐鍋涢敓鑺ユ礋閹崇喖顢涘┑鍫滅胺闂傚倷鐒︾�笛呮崲閸岀偛绠犻幖娣妼濮规煡鏌ｉ幇顔煎妺闁绘挻鐩弻娑樷槈閸楃偞鐏撶紓浣哄Х閸嬨倝寮婚敍鍕勃閻犲洦褰冮～鍥倵濞堝灝娅橀柛鎾跺枎閻ｇ柉銇愰幒婵囨櫓闁荤喐鐟ョ�氼剟鎯侀柆宥嗏拻闁稿本鐟ч崝宥嗕繆閻愬弶鍋ョ�规洏鍨介幃锟犵嵁椤掍胶鈽夐摶鏍煕濞戝彉鎮嶉柟椋庡厴閺佸倿鎮欓锟界壕顖炴⒑闂堟侗鐓紒鐘冲灩婢规洟顢涢悙绮规嫼闂佽鍨庨崨顖ｅ敹婵犵數濯撮幏鐑藉级閸稑濡兼い鏇憾閺屾盯濡烽姀鈩冪彇缂佺偓鍎抽妶鎼佸蓟閿濆绠涢梻鍫熺☉椤晠姊洪崨濠冪厽闁稿﹥绻堝濠氬即閵忕娀鍞堕梺缁樻⒒椤牓鏁撻懞銉ュ闁跨喕濮ら鏍窗濞戙埄鏁嬬憸鏃堝春閵夛箑绶炲┑鐘插閸嶉潧顪冮妶鍡楀Ё缂佽尪濮ら崚濠冨鐎涙ǚ鎷绘繛杈剧到閹诧繝宕悙鐑樼厵缂佸瀵чˉ銏拷瑙勬礈閸犳牠銆侀弴銏℃櫜闁搞儜鍡樺闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣捣閻棗銆掑鐐濡ょ姷鍋涢ˇ鐢稿极閹剧粯鍋愰柤鑹板煐閹蹭即姊绘笟锟藉褑鍣归梺鍛婁緱閸ㄦ娊宕㈤悩缁樷拻濞达絽婀卞﹢浠嬫煕閵娿儺鐓奸柍銉畵瀹曞ジ鎮ゆ担瑙勬殲闂傚倸鍊搁崐椋庣矆娓氾拷楠炲鍨剧搾浣规そ閺佸啴宕掑顒傦拷顓㈡⒑鐟欏嫷鍟忛柛鐘崇缁嬪顓兼径瀣幍闂佽鍨卞妯款暱闂備胶绮幐濠氭偡閳哄懎钃熼柣鏃傚劋閸犲棝鏌涢弴銊ヤ簻妞ゎ偄閰ｅ娲礈閹绘帊鑸繛瀛樼矤娴滎亜顕ｆ繝姘╅柍鍝勫�告禍婊堟煟閻樺弶澶勯柣锝庡亰楠炴绱掑Ο杞扮紦婵＄偑鍊栭悧鎾诲磹濡ゅ啫濮柨鐔剁矙閹鈻撻崹顔界亪濡炪値鍘鹃崗姗�鐛崘顔碱潊闁宠棄妫欐晥闂佺懓鍚嬮悾顏堝垂濞差亝鍋柛宀�鍋為埛鎺楁煕鐏炲墽鎳呴悹鎰嵆閺屾稑鈻庤箛鏇狀唺缂備緡鍠栭…鐑界嵁鐎ｎ喗鏅濋柨鐔烘櫕缁牓宕奸妷锔惧幈濡炪倖鍔х徊鍓х矆閸愵喗鐓曞┑鐘插閺嗩剟鏌熼鐓庢Щ闁宠姘︾粻娑㈠箼閸愌呮／缂傚倸鍊风欢銈夊箯閻戣姤鐓曟い鎰╁�曢弸鍌毭瑰鍕煁闁靛洤瀚伴獮妯兼崉鏉炵増鍩涘┑鐘媰瀹ュ洨袦闂佸搫鐭夌紞锟界紒鐘崇洴楠炴﹢鎼归锝庡敼缂傚倸鍊烽懗鍓佸垝椤栫偞鍎庢い鏍仧瀹撲焦淇婇婊冨付妞ゃ儲宀搁幃妤呮晲鎼存繃鍠氬┑鈽嗗亞閸犳牕顫忕紒妯诲闁荤喖鍋婇崵瀣攽閻愬銈撮柡鍛箘閸掓帗绻濆顒傤吅闂佹寧姊诲▍銏ゅ箯閻戣棄绫嶉柛顐ｇ箘椤︺劌顪冮妶鍡橆梿濠殿喓鍊曢埢宥夊閵堝棌鎷洪柣鐘充航閸斿苯鈻嶉幇鐗堢厵闁告垯鍊栫�氾拷.");
			return;
		}

		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╃窔閺岀喖宕滆鐢盯鏌涚�ｎ偄濮嶉柡灞剧洴楠炲洭顢涘鍗烆槱闂備焦鐪归崹鑽ゅ垝椤栨稓鈹嶅┑鐘叉处閸婇攱銇勮箛鎾愁伒闁归鍏樺浠嬵敇閻旇渹缃曟繝鐢靛Т閿曘倝鎮ч崱娆忣棜缂備焦顭囩粻楣冩煙鐎涙鎳冮柣蹇婃櫊閺屾盯濡搁妷銉嫹閸ф钃熸繛鎴炵煯濞岊亞绱撴担闈涚仼婵炲爜鍥ㄥ仭婵犲﹤鎳庨。濂告偨椤栨稑绗х紒顔肩墦瀹曟帡鎮欑�电骞堥梻濠庡亜濞诧箓鎳濋悙顒傤洸闁革富鍘剧壕濂告倵閿濆簼绨奸柛鐘成戦幈銊︾節閸愨斂浠㈠Δ鐘靛仦閻楃娀骞冨▎鎾崇闁圭儤绻勯敓鑺ュ▕濮婄粯鎷呮笟顖滃姼闂佹寧娲忛崐鏇⑩�﹂崶顒佹櫢闁绘ê鍟挎禒鎺戭渻閵堝棙绌块柟鐑筋棑閿熻姤顔栭崰鏇犲垝濞嗘挸鐏抽柡宥庡幖鍞梺闈涱槴閺呮稑顕ｉ弶娆炬富闁靛牆鍟悘顏呫亜閵娿儻韬�殿噮鍋婇獮妯硷拷闈涘濞村嫰鏌ｆ惔顖滅У闁稿瀚伴弫鎾诲磹閻旈鍘梺闈涙搐鐎氭澘顕ｉ锟介埢搴ㄦ倷椤掑倻鈼ユ繝鐢靛仜閻°劎鍒掑鍥у灊闁规崘顕ч拑鐔猴拷骞垮劚濡瑦鎱ㄥ鍫熺厵婵炲牆鐏濆▍妯讳繆瀹割喖鏋ょ紒杈ㄦ尰閹峰懘宕崟顓炵稇闂備焦鎮堕崕顖炲礉鎼淬劌鍌ㄦい蹇撶墛閳锋垿鏌熼懖鈺佷粶闁告棑鎷烽梻浣告啞閸旀洝銇愰悙鍨潟闁哄喛鎷峰ǎ鍥э躬婵″爼宕堕‖顔哄劦閺屾稓锟斤綆鍋嗛埥澶愭偂閵堝棎浜滈柟鎯у船閻忊晠鏌￠崟鈺佸姦闁哄苯绉归崺鈩冩媴閸涘﹥顔嶉梻浣藉吹閸犳捇骞婇幘璇茬厴闁硅揪闄勯崑鎰版煙缂佹ê绗氭繛鍫幖椤啴濡堕崨顖滎唶闂佺粯鐗滈崢褔锝炶箛鎾佹椽顢旈崟顏嗙倞闂備礁鎲″ú锕傚储閹间礁鍑犻柛鈩冪♁閳锋垿鏌涘☉妯锋闁兼祴鏅涢崹婵囩箾閸℃绠抽柡鍡畵閺岀喐娼忛崜褏鏆犻梺缁樻尰閻╊垶寮诲☉妯锋闁告鍋為悘鎾绘⒑閸涘鐒炬俊顐㈠閳ユ棃宕橀鍢壯囨煕濞戝崬鐏ｆい鏂挎喘濮婃椽鎮烽弶鎸庢瘣缂備胶绮敋闁伙絿鍏橀獮鍥偋閸繂澹撴俊鐐�曠换鎰版偋婵犲洤鐓曢柟鐑橆殕閻撴洟鎮橀悙鏉戠濠㈣锕㈤弻銊╂偄鐠囨畫鎾绘煙椤旂厧锟芥悂鎮鹃悜钘夌疀妞ゆ挆鍕懷囨煙閼圭増褰х紒鎻掓健閹偤宕楅懖鈺冾啎闁哄鐗嗘晶鐣岀矓椤掍椒绻嗘俊鐐靛帶婵倿鏌熼鎯т沪缂佺粯绻堝畷鍫曞Ω瑜嶉獮鍫熺節閻㈤潧浠﹂柛銊ョ埣閹兘鏁傞崜褏顦梺鐟邦嚟婵澹曟總鍛婄厽婵炲棙鐟︾�氬綊姊洪幖鐐插闁绘牜鍘ч锝嗙節濮橆儵鈺呮煃閸濆嫬锟藉憡绂嶉悙鐑樷拺缂佸瀵у﹢鎵磼鐎ｎ偄鐏存い銏℃閺佹捇鏁撻敓锟�?
		Npc npc = SceneNpcManager.selectNpcByKey(npckey);
		if (npc == null){
			Module.logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姵濞婇弻銊╂偄閸戙倖瀚归柣鏇氱劍缂嶅牆鈹戦悙鎻掔骇闁绘娲滈崣鍛存⒑闂堟单鍫ュ疾濠婂牆纾挎俊銈呮噺閻撴洟鏌嶉埡浣告灓婵☆垰鎳愰幉鎼佹偋閸繄鐟查梺鍝勬噺閻擄繝寮诲☉妯锋闁告鍋涚�涳絽鈹戦埥鍡椾簻闁活厼鍊搁～蹇涙惞閸︻厾锛滃┑鈽嗗灥濞咃綁鎮烽幇顔剧＝濞撴艾娲ら弸鐔兼煟閻斿弶娅呮い鏇悼閹风姴顔忛鍏煎�┑鐘灱濞夋稖鐧岄梺闈浥堥弲婊堟偂閵夆晜鐓涢柛灞炬皑娴犮垽鏌嶉柨瀣棃闁哄矉绲介埥澶愬础閻愬浜梻浣哥枃椤宕归崸妤�绠栨繛鍡樻尭缁狙囨煙鐎电小婵℃鎸荤换婵嗏枔閸喗鐏嶉柤鍨﹀洦鐓曢柡鍐挎嫹闁搞劌娼￠悰顕�宕卞Δ鍐╂畷闂佸憡娲﹂崑鍡涱敊閹烘梻纾介柛灞剧懅閸斿秵銇勯鐐村枠鐎规洏鍨藉Λ鍐ㄢ槈鏉堛劌鐦滈梻渚�娼ч悧鍡椢涘▎鎴滅剨闁汇垹鎲￠悡鏇㈡煟濡寧鐝�规洖鏈妵鍕閳╁喚妫冮悗娈垮枛閻栧ジ鐛�ｎ喖绫嶉柨鐔剁矙瀵剟鏁撴禒瀣拻濞达綀娅ｇ敮娑㈡煥濮樿埖鐓熼煫鍥ㄦ煥閸濊櫣锟芥鍠楁繛濠囧春閿熺姴宸濇い鏃�鍎抽獮鍫ユ⒑鐠囨彃鍤辩紓宥呮瀹曟粌鈻庨幇顕呮祫闁哄鐗冮弲顏堝箯妞嬪孩鍠嗛柛鏇ㄥ墰椤︺儳绱撻崒姘毙㈤柨鏇樺�濋幃楣冩煥鐎ｎ剟妾紓浣割儏閻忔繂鐣甸崱娑欌拺缂備焦锚婵牊銇勯弮锟介悧鐘茬暦椤掑嫬閱囬柡鍥╁暱閹风粯绻涙潏鍓у埌闁硅绻濆畷顖炴倷閻㈢數锛滈梺鍛婄箓鐎氼參宕戦妷褝鎷风憴鍕婵炶尙鍠栭悰顔芥償閵婏箑娈熼梺闈涱槶閸庤鲸绔熼幒妤佲拻濞达絿鍎ら崵锟芥繝鈷�鍛珪闁告帗甯￠、娑㈡倷閺夋垳绨垫繝鐢靛仜濡瑩宕归崷顓烆棜闁芥ê顥㈣ぐ鎺撴櫜濠㈣泛顑嗛柨顓㈡⒑鐠囪尙绠氶柡鍛█瀵鏁嶉崟鑸靛闁挎繂楠告晶顕�鏌＄�ｎ偆娲撮柡宀嬬磿娴狅箓宕滆閿熻姤甯￠弻銊╂偄閸涘﹦浼勭紓浣瑰絻椤嘲鐣峰┑鍡欐殕闁告洦鍓氬▍銏ゆ⒑閸忛棿鑸柛搴＄－缁鎮欑喊澶嬪婵炲牆鐏濋弸娑欍亜椤撶偛妲绘い鏇秮楠炴﹢顢欓挊澶夌盎闂備焦鍎崇换妤咁敋閺嶎厼鐤幖娣妽閳锋帒霉閿濆牊顏犻悽顖涚洴閺屾盯寮幘鍓佹殼閻庤娲樼划宀勶綖濠靛鍤嬮梻鍫熺◥閹寸兘姊绘担鍛婃儓闁哥噥鍋婇幃褎绻濋崶褏鍘遍梺纭呮彧闂勫嫰鎮￠弴銏＄叆闁哄啫娴傞崵娆愵殽閻愭惌娈曢柕鍥у缁犳盯寮撮悙瀵镐邯闂備礁鎼惉濂稿窗閺嵮呮殾婵炲棙鎸稿洿闂佺硶鍓濋〃蹇斿閿燂拷? 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃瑥顤�闂侀潧妫楅崯鎾蓟閿濆绠抽柟鎼灥閸氼偊姊洪崫鍕拱缂佸鍨块崺銉﹀緞婵炵偓鐎婚梺褰掑亰閸犳岸鍩㈣箛鏇犵＝闁稿本鐟ㄩ崗灞解攽椤栵絽寮�规洖缍婂畷濂稿即閻愯埖鎲伴梻渚�娼ц墝闁哄懏绮撳畷鎴﹀幢濞戞瑧鍘遍柣蹇曞仜婢т粙鍩ユ径瀣ㄤ簻闊洢鍎茬�氾拷? " + npckey);
			return;
		}
		final SNpcShare share = NpcManager.getInstance().getNpcShareByID( npc.getNpcID() );
		if ( share == null ){
			Module.logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姵濞婇弻銊╂偄閸戙倖瀚归柣鏇氱劍缂嶅牆鈹戦悙鎻掔骇闁绘娲滈崣鍛存⒑闂堟单鍫ュ疾濠婂牆纾挎俊銈呮噺閻撴洟鏌嶉埡浣告灓婵☆垰鎳愰幉鎼佹偋閸繄鐟查梺鍝勬噺閻擄繝寮诲☉妯锋闁告鍋涚�涳絽鈹戦埥鍡椾簻闁活厼鍊搁～蹇涙惞閸︻厾锛滃┑鈽嗗灥濞咃綁鎮烽幇顔剧＝濞撴艾娲ら弸鐔兼煟閻斿弶娅呮い鏇悼閹风姴顔忛鍏煎�┑鐘灱濞夋稖鐧岄梺闈浥堥弲婊堟偂閵夆晜鐓涢柛灞炬皑娴犮垽鏌嶉柨瀣棃闁哄矉绲介埥澶愬础閻愬浜梻浣哥枃椤宕归崸妤�绠栨繛鍡樻尭缁狙囨煙鐎电小婵℃鎸荤换婵嗏枔閸喗鐏嶉柤鍨﹀洦鐓曢柡鍐挎嫹闁搞劌娼￠悰顕�宕卞Δ鍐╂畷闂佸憡娲﹂崑鍡涱敊閹烘梻纾介柛灞剧懅閸斿秵銇勯鐐村枠鐎规洏鍨藉Λ鍐ㄢ槈鏉堛劌鐦滈梻渚�娼ч悧鍡椢涘▎鎴滅剨闁汇垹鎲￠悡鏇㈡煟濡寧鐝�规洖鏈妵鍕閳╁喚妫冨Δ鐘靛仦閿曘垽銆佸▎鎴炲枂闁挎繂妫楅娲⒒閸屾瑨鍏屾い顓炵墦瀵敻顢楅崟顒�娈炴俊銈忕到閸燁垶寮查幖浣圭厽闁挎繂鎳撶�氫即鏌涘Ο缁樺唉闁哄瞼鍠栭、娆撳箚瑜屽Σ鎰版⒑鏉炴壆顦﹂柛鐔告綑閻ｇ兘骞掗幋鏃�顫嶅┑鈽嗗灠閹碱偊藟閹扮増鈷戦柤濮愬�曢弸鎴犵磼椤旂厧顒㈤柡鍛版硾铻栭柛鎰ㄦ櫆濞堜即姊洪崷顓炲妺婵﹤顭烽幆宀勫幢濡ゅ﹦鍞甸柣鐘荤細濞咃綁鎮為崸妤佺厵濡炲楠搁崢鎾煙椤栨艾锟藉灝鐣烽妸锔剧瘈闁稿被鍊撶槐锕傛⒒閸屾艾锟介绮堟笟锟介獮澶愬灳鐡掍焦妞介弫鍐磼濮樻唻绱遍梻浣告啞娓氭宕㈠▎鎾存櫜濠㈣埖蓱閺呫垽姊洪崨濠冨闁稿繑锕㈤獮蹇撁洪鍛嫼闂佸憡绋戦敃銉т焊椤撶媴鎷峰▓鍨灈濠⒀冮閳诲酣濮�閻橆偅顫嶉梺闈涢獜缁辨洟宕㈤悽鍛娾拺闁告稑锕ら悘鐔兼煕婵犲啰澧遍柨鐔诲Г閻旑剟骞忛敓锟� 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃瑥顤�闂侀潧妫楅崯鎾蓟閿濆绠抽柟鎼灥閸氼偊姊洪崫鍕拱缂佸鍨块崺銉﹀緞婵炵偓鐎婚梺褰掑亰閸犳岸鍩㈣箛鏇犵＝闁稿本鐟ㄩ崗灞解攽椤栵絽寮�规洖缍婂畷濂稿即閻愯埖鎲伴梻渚�娼ц墝闁哄懏绮撳畷鎴﹀幢濞戞瑧鍘遍柣蹇曞仜婢т粙鍩ユ径瀣ㄤ簻闊洢鍎茬�氾拷? " + npc.getNpcID() + "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇洟姊绘担钘壭撻柨姘亜閿旇鏋ょ紒杈ㄦ瀵挳濮�閳撅拷閹风粯绻涙潏鍓хК婵炲拑缍佹俊瀛樼節閸ャ劎鍘遍梺瑙勫劤椤曨厾绮婚悙鐑樼厵闁芥ê顦敓钘夘煼閺佹捇寮妶鍥┬ｉ梺鍝ュУ閻楃娀骞冨▎鎰瘈闁告劧缂氱花濠氭⒑閻熺増鎯堢紒澶婄埣钘濋柨鏇嫹闂囧鏌ｅΟ鐓庡妺妞ゅ繒濮风槐鎺撴綇閵婏箑闉嶉梺鐟板槻閹虫ê鐣峰鍫濈闁圭儤鍨甸ˉ搴ㄦ⒒娴ｇ瓔鍤欐繛瀵稿厴閹兘骞庨挊澶屽�為梺闈涱焾閸庡骞忛悜钘夊瀭妞ゆ劗濮崇花濠氭⒑閸︻厼鍔嬮柛銊ф暬椤㈡棃顢旈崼鐔哄帗闂備礁鐏濋鍛存倶閹绢喗鐓欐い鏃囧亹缁夌儤顨ラ悙鎵獢妤犵偞甯￠獮瀣攽閹邦噯鎷烽搹顐ょ瘈闁汇垽娼ф禒婊堟煙閸愯尙绠荤�规洘绻傞埢搴ㄥ箻鐎圭姵鎲伴梻浣虹帛濮婂宕㈣缁牓宕熼娑氬帾闂佸壊鍋呯换鍐夊鍕╀簻闊洢鍎茬�氾拷 share濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柟鑲╁仜婵″ジ鏌涙繝鍌涘仴鐎殿喛顕ч埥澶愬閳哄倹娅囬梻浣瑰缁诲倸螞濞戔懞鍥Ψ瑜忕壕钘壝归敐鍛儓閺嶁�斥攽閻橆喖鐏い顓炵墦閹﹢宕橀瑙ｆ嫼闂佸湱顭堝ù椋庣不閹剧粯鐓欓柛鎰叀閸欏嫮锟芥鍠楁繛濠囧箖濞嗘挻鍊绘俊顖滃帶楠炲牓姊虹涵鍛棈闁规椿浜炲Σ鎰板即閻斿憡鐝￠梻鍌氬�风粈渚�骞栭锔藉剹濠㈣泛鐬肩粈濠偯归敐鍛棌闁搞倖娲栭湁闁绘ê妯婇崕蹇涘箚閻斿吋鈷戦梻鍫熶緱濡狙囨⒒閸曨偄顏╅柍缁樻崌閵嗗倿鏁撻敓锟�");
			return;
		}
		if ( share.npctype == 5 ) {
			Role role = RoleManager.getInstance().getRoleByID(roleid);
			if(!role.checkDistance(npc,400)){
				Module.logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姵濞婇弻銊╂偄閸戙倖瀚归柣鏇氱劍缂嶅牆鈹戦悙鎻掔骇闁绘娲滈崣鍛存⒑闂堟单鍫ュ疾濠婂牆纾挎俊銈呮噺閻撴洟鏌嶉埡浣告灓婵☆垰鎳愰幉鎼佹偋閸繄鐟查梺鍝勬噺閻擄繝寮诲☉妯锋闁告鍋涚�涳絽鈹戦埥鍡椾簻闁活厼鍊搁～蹇涙惞閸︻厾锛滃┑鈽嗗灥濞咃綁鎮烽幇顔剧＝濞撴艾娲ら弸鐔兼煟閻斿弶娅呮い鏇悼閹风姴顔忛鍏煎�┑鐘灱濞夋稖鐧岄梺闈浥堥弲婊堟偂閵夆晜鐓涢柛灞炬皑娴犮垽鏌嶉柨瀣棃闁哄矉绲介埥澶愬础閻愬浜梻浣哥枃椤宕归崸妤�绠栨繛鍡樻尭缁狙囨煙鐎电小婵℃鎸荤换婵嗏枔閸喗鐏嶉柤鍨﹀洦鐓曢柡鍐挎嫹闁搞劌娼￠悰顕�宕卞Δ鍐╂畷闂佸憡娲﹂崑鍡涱敊閹烘梻纾介柛灞剧懅閸斿秵銇勯鐐村枠鐎规洏鍨藉Λ鍐ㄢ槈鏉堛劌鐦滈梻渚�娼ч悧鍡椢涘▎鎴滅剨闁汇垹鎲￠悡鏇㈡煟濡寧鐝�规洖鏈妵鍕閳╁喚妫冨Δ鐘靛仦閿曘垽銆佸▎鎴炲枂闁挎繂妫楅娲⒒閸屾瑨鍏屾い顓炵墦瀵敻顢楅崟顒�娈炴俊銈忕到閸燁垶寮查幖浣圭厽闁挎繂鎳撶�氫即鏌涘Ο缁樺唉闁哄瞼鍠栭、娆撳箚瑜屽Σ鎰版⒑鏉炴壆顦﹂柛鐔告綑閻ｇ兘骞掗幋鏃�顫嶅┑鈽嗗灠閹碱偊藟閹扮増鈷戦柤濮愬�曢弸鎴犵磼椤旂厧顒㈤柡鍛版硾铻栭柛鎰ㄦ櫆濞堜即姊洪崷顓炲妺婵﹤顭烽幆宀勫幢濡ゅ﹦鍞甸柣鐘荤細濞咃綁鎮為崸妤佺厵濡炲楠搁崢鎾煙椤栨艾锟藉灝鐣烽妸锔剧瘈闁稿被鍊撶槐锕傛⒒閸屾艾锟藉嘲霉閸パ�鏋栭柡鍥ュ灩缁愭锟藉箍鍎卞ú銈夊垂濠靛洨绠鹃柛鈩兩戠亸顓㈡煛鐎ｂ晝绐旈柡宀�鍠栧畷婊嗩槾閻㈩垱鐩弻娑㈠Χ閸涱垍褔鏌＄仦鐐鐎垫澘瀚板畷鐓庘攽閸℃娼涘┑鐘愁問閸ｎ垳寰婃禒瀣亱闁圭偓鍓氬鏍ㄧ箾瀹割喕绨荤紒鐘茬秺閺岋綁骞囬鐐电シ濡炪値鍓欓悧蹇曟閹烘绀堢憸鎴濐瀶閹间焦鐓曟繛鍡楃箰閺嗘瑩鏌ｉ敐鍛Щ妞ゎ偅绻勯幑鍕惞鐠団�虫暯濠电姴鐥夐弶鍖℃嫹閹剧粯鍊块柨鏇嫹闁宠绉撮…銊╁醇閻斿弶瀚奸梻浣告啞缁嬫垿鏁冮敐鍥偨闁告浼濋悷閭︾叆闁告洦鍘鹃悿鍕⒑閹稿海绠橀柛瀣洴椤㈡ɑ绺界粙鍨獩濡炪倕绻愰幊蹇涘级閸涘﹣绻嗛柣鎰典簻閿熻姤鐗曢～蹇旂節濮橆厼浠遍梺鍝勫暙閻楀﹪宕愰崸妤佺厵妞ゆ牭绲挎禍褰掓煟閻旂厧浜伴柣鎾卞劦楠炴牜鍒掗惂鍛婂闁哄倶鍎茬�氼剟姊婚崒娆愮グ妞ゆ洘鐗犲畷鏉款潩鐠鸿櫣锛涢梺闈涚墕閹虫劙寮抽敂鍓х＜閻庯綆鍙庨崵锕傛煛閸愭寧瀚归梺鐟板槻閹虫ê鐣烽敐鍡楃窞濠电姴绨肩槐顏堟⒒閸屾艾锟芥悂宕愭搴ｇ焼濞撴熬鎷锋鐐差樀閺佸秹宕熼锟芥惔濠囨⒑缁嬫寧婀扮紒顕嗙秮楠炲繐鐣￠柇锔藉兊闂佺粯鎸告鎼佸煕鐎ｎ亶娓婚柕鍫濆暙閻忣亝淇婇銏犳殻鐎规洘妞介弫鎾绘偐閼碱剦妲版俊鐐�曠换鎰涚�靛憡顫曢柤纰卞墰绾句粙鏌涚仦鎹愬闁跨喓鏅崗姗�骞冮悙鐑樻櫇闁稿本绋掑▍鏃傜磽閸屾艾锟界兘鎮為敃鍌毼﹂柛鈩冪☉瀹告繃銇勯弽銊х幓缂佸崬寮舵穱濠囨倷椤忓嫸鎷烽弽褜娼栧┑鐘宠壘閻撴洟鏌涢鐘插姕闁稿鍊块弻銈吤圭�ｎ偅鐝ㄩ梺鐟板槻閸㈡煡鍩㈤幘璇插瀭妞ゆ梻鏅禍鐐电磽閸屾瑧璐伴柛鐘愁殜閹兘鍩￠崨顓囥儱霉閿濆懎顥忔繛绗哄姂閺屻劑鎮㈤崜浣虹厯濡ょ姷鍋涢崯顐﹀煝鎼淬劌绠婚柡澶嬪灣缂傛捇姊绘担鍛婂暈缂佸搫娼″畷鏇熸綇閳哄啰鐒奸梺鍓插亖閸庢煡鍩涢幒妤佺厱閻忕偞宕樻竟姗�鏌ㄩ悢缁橆棄闁搞垺鐓″﹢渚�姊洪幖鐐插妧闁跨喍绮欏鎼佸冀椤撶喓鍘搁梺鎼炲劘閸庨亶鎮橀埡鍛拻闁稿被鍊曢悘锕傛煛鐏炶濮傜�殿喗鎸抽幃娆戞嫚瑜庣�氬綊鏌涘┑鍕姢濞戞挸绉甸妵鍕冀椤愵澀娌梺缁樻尪閸庣敻寮婚敐澶婂嵆闁绘劘顕滈幏鐑藉捶椤撱劍瀚规慨妯煎亾鐎氾拷? 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃瑥顤�闂侀潧妫楅崯鎾蓟閿濆绠抽柟鎼灥閸氼偊姊洪崫鍕拱缂佸鍨块崺銉﹀緞婵炵偓鐎婚梺褰掑亰閸犳岸鍩㈣箛鏇犵＝闁稿本鐟ㄩ崗灞解攽椤栵絽寮�规洖缍婂畷濂稿即閻愯埖鎲伴梻渚�娼ц墝闁哄懏绮撳畷鎴﹀幢濞戞瑧鍘遍柣蹇曞仜婢т粙鍩ユ径瀣ㄤ簻闊洢鍎茬�氾拷? " + npc.getNpcID());
				return;
			}
			gatherProcess( roleid, share.id );
			return;
		}
		if (!fire.pb.map.SceneNpcManager.checkDistance(npckey, roleid)){
			Module.logger.error("npc闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽幃娆戞嫚瑜庣�氬湱鎲搁悧鍫濈瑨缁炬儳娼￠弻鐔猴拷鐢殿焾鏍￠梺鍝ュУ閸旀瑩寮婚敐鍛傛棃鏁撴禒瀣亱闁糕剝鐟х粻鏃堟煙閻戞ɑ鈷掔痪鎯с偢閺屻劑鎮㈢拠娈嬫挾锟藉灚婢樼�氼剟鎮惧┑鍫嫹閿濆骸浜滄い蹇撶埣濮婅櫣鎷惔鈥虫殲闁哥喓鍋ら幃妤�顫濋鍌溞ㄥ┑顔硷龚濞咃綁骞戦崟顖毼╅柕澶涘閿熷�熸缁辨挻绗熼崶褎鐏嶉梺鑽ゅ暱閺呮盯顢氶敐澶樻晝闁挎洩鎷风紒鐘哄吹缁辨挻鎷呮慨鎴簻閳绘捇鎮㈤崗灏栨嫼闂傚倸鐗婃笟妤�危閸洘鐓曢幖绮癸拷瀹犲煘閻炴碍鐟╅弻娑㈩敃閻樻彃濮曢梺鎶芥敱閸ㄥ潡寮婚悢鍏煎殐闁宠桨妞掔划鑸电節瀵版灚鍊曟禍褰掓煟閵夘喕绨界紒杈ㄥ浮婵拷闁绘灏欓惈鍕煟鎼淬値娼愭繛鍙壝悾婵嬪箹娴ｅ搫绁﹂梺鍦劋閸わ箓寮敓浠嬪箯閸涱垱鍠嗛柛鏇ㄥ幖缁�渚�姊婚崒姘拷椋庣矆娓氾拷楠炲鍩勯崘顏嗘嚌濠德板�撻懗鍫曘�呴崣澶岀瘈闂傚牊渚楅崕婊呯磽瀹ュ棛澧遍柨鐔绘缁犲秹宕曢柆宥呯疇濠㈣埖鍔曠紒鈺呮煠閹帒鍔樺ù婊勭矒閺岋繝宕橀妸銉嫹婵犳艾绠洪柛宀�鍋為悡鐔兼煙閻戞ɑ灏柛鏂诲�濆Λ浣瑰緞鐎ｎ剛鐦堟繝鐢靛Т閸婂潡顢撳Δ锟介…鑳槼闁瑰憡濞婂濠氭偄绾拌鲸鏅╅梺璇″瀻閸屾侗娼熼梺璇叉唉椤煤濠婂牃锟斤箓宕奸敐鍥︾胺婵犵數鍋犻幓顏嗗緤閽樺鍤曢柛鎾茬筏閹峰嘲顫濋鎯т划濠殿喖锕︾划顖炲箯閸涙潙宸濆┑鐘插�瑰▓妯肩磽閸屾瑦绁版い鏇嗗洤纾瑰┑鐘崇閺呮悂鏌ら幁鎺戝姎闁搞値鍓熼弻娑㈠箻鐠虹儤鐏堥梺闈涙缁舵艾顕ｉ锟藉畷鐓庘攽閸繂绠伴梻鍌欑閹诧繝宕濋敂鐣岊洸闁绘劗鍎ら弲顒佺節婵犲倹鍣界痪鍙ョ矙閺屾稓浠﹂崜褎鍣梺鍛婃煥缁夊綊寮婚妸銉僵閺夊牃鏅濋敍婊冣攽閿涘嫬鍓崇紒鐘冲灴楠炲﹪骞囬纰辨闂佺绻掗鏇熺濠婂牊鐓涢柛鎰╁妼閿熺晫鏁婚獮蹇涙晸閻樺磭鍘介梺鐟板⒔閹虫挻绂嶈ぐ鎺撶叆闁绘棁顕ц濡炪倖姊归悧鐘茬暦娴兼潙鍗抽柣妯诲絻閻忓﹤鈹戦悙鍙夘棡闁圭鐖奸弫鎾诲箣閹烘棏妲銈庡亝缁捇寮幘瀵割浄閻庯綆浜為悾鍝勨攽閻愬弶顥為柟绋款煼瀹曟垿濡搁埡鍌滃幈濠电娀娼х�氼剟宕濆杈╃＜闁跨喍绮欏畷濂稿Ψ閿旇瀚介梻浣侯焾閺堫剟鎳濇ィ鍐╂櫢闁芥ê顦Σ濠氭婢舵劖鐓曢柕澶嬪煀閹风兘鏌＄�ｎ偆澧甸柡宀嬬節瀹曞爼濡烽妷褌鎮ｉ梻鍌氬�搁崑鍡涘垂閸洖钃熼柕濞炬櫅閸楁娊鏌ｉ幇顖ｅ殝闁归鍏樺畷顐﹀Ψ瑜岀粭澶婎渻閵堝棛澧遍柛瀣仱閹繝濡烽埡鍌滃幗闂佸搫娲ㄩ崑娑㈡晸閽樺璐￠柨鐔诲Г閻旑剟骞忛敓锟�? 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃瑥顤�闂侀潧妫楅崯鎾蓟閿濆绠抽柟鎼灥閸氼偊姊洪崫鍕拱缂佸鍨块崺銉﹀緞婵炵偓鐎婚梺褰掑亰閸犳岸鍩㈣箛鏇犵＝闁稿本鐟ㄩ崗灞解攽椤栵絽寮�规洖缍婂畷濂稿即閻愯埖鎲伴梻渚�娼ц墝闁哄懏绮撳畷鎴﹀幢濞戞瑧鍘遍柣蹇曞仜婢т粙鍩ユ径瀣ㄤ簻闊洢鍎茬�氾拷? " + npc.getNpcID());
			return;
		}
		fire.pb.team.Team team = fire.pb.team.TeamManager.selectTeamByRoleId(roleid);
		if (team != null) {
			if (team.isTeamLeader(roleid)) {
				if (share.share==1) {
					for (Long member : team.getNormalMemberIds()) {
						onVisitNpc( member, share );
					}
				} else {
					onVisitNpc( roleid, share );
				}
			} else {
				if ( team.isAbsentMember( roleid ) ) {
					onVisitNpc( roleid, share );
				}
			}
		} else {
			onVisitNpc( roleid, share );
		}
	}

	

	private boolean checkNpcVisitable(long roleid) {

		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇牠姊绘担鑺ョ《闁哥姵鎹囧鏌ヮ敃閵堝懎鐏婃繝鐢靛У绾板秹宕戦幇鐗堝仯闁搞儺浜滈惃鐑樸亜閺冿拷閸旀洟鍩為幋锔藉�婚柛銉㈡櫇鏍￠梻浣告啞閹稿鎮烽敂鐣屸攳濠电姴娲﹂崵鍐煃閸濆嫬鏆熼柨娑欑矒濮婅櫣绱掑Ο蹇氬亹閹峰啴鏁冮敓浠嬧�﹂崶顒�绠涢柣妤�鐗忛崢顏堟⒑閹肩偛鍔�闁告劕褰炵槐鏃�淇婇妶鍥ラ柛瀣☉鐓ゆい鎾跺仧閺嗭附绻濇繝鍌氼仾濠殿垱鎸抽弻銈嗙鐎ｎ偅鏆犻梺鎼炲妼閻忔繈锝炶箛鎾佹椽顢旈崟顐ょ崺濠电姷鏁告慨瀵革拷姘煎弮瀹曞疇顦寸紒杈ㄦ尰閹峰懘鎼归悷鎵偧闂備焦瀵уú蹇涘垂娴犲宓侀柛鎰靛枟閺呮悂鏌ｅ▎娆愬闂佽桨绀侀崯鎾蓟閵娾晛鍗虫い蹇撴噹椤忓爼姊绘担铏瑰笡闁告梹娲熼弫鍐敂閸繆鎽曢梺鍝勬川閸犳挾寮ч敓浠嬫椤愩垺澶勯柟灏栨櫅鐓ゆい鎾跺剱濞撳鏌曢崼婵堢缂侊拷鐎ｎ喗鐓曢柡鍐挎嫹闁搞劌鐏濋锝嗙節濮橆厽娅滈梺绯曞墲閿氶柛鏂挎嚇濮婃椽妫冨☉姘辩杽闂佺硶鏅涚�氭澘顕ｉ幎鑺ユ櫢闁绘ê鍟块敓鐣屾暬閺岋綀顦查柟璇х磿閿熻姤鑹剧紞濠傤潖妤﹁￥浜归柟鐑樻惈缁辩數绱撴笟濠冨婵炴挻鐔幏鐑芥煙闁垮鐏撮柟顔哄灲瀹曟鎳栭埡浣告辈闂傚倷鑳剁划顖炲蓟閵娾晛绠规い鎰╁灮閹姐儵姊婚崒娆掑厡缂侇噮鍨跺畷婵嬪即閵忊剝娅囧銈呯箰閻楀棝鎷戦悢鐚存嫹楠炲灝鍔氭俊顐ｇ懄閹便劌顭ㄩ崼鐔哄幍濠电偛鐗嗛悘婵嬪几閻斿吋鐓曢悗锝嗘煥濞诧箓鍩涢幋锔解拻闁割偆鍠嶇欢杈ㄤ繆閸欏灏﹂柡宀嬬節瀹曘劑顢欓崜褏鍘滈梻浣筋嚃閸ｎ垳鎹㈠┑瀣畺闁靛繈鍊曠粻褰掓煟閹邦厼顥嬮柣鈺侀叄濮婄粯鎷呯粵瀣秷閻庤娲橀敋闁崇粯鏌ㄩ埥澶愬閻樻妲堕梻浣筋潐閸庡吋鎱ㄩ妶澹﹀绻濋崘锔跨盎闂佸湱鍎ら崺鍫澪ｇ粙娆剧唵鐟滃酣骞愰幎钘夎摕闁挎稑瀚▽顏堟⒒閸碍娅嗛悗姘贡閿熷�燁潐濞叉牕煤閿曪拷閳绘捇寮撮姀锛勫幗闁瑰吋鎯岄崹宕囩矓閻㈠憡鐓曢柟鎯ь嚟椤ジ鏌嶉鍕粵缂佺粯绻堥幃浠嬫濞磋翰鍎查妵鍕晲閸曨厾鐓撻悗瑙勬礃缁矂鍩為幋鐙呮嫹閿濆簼绨介柣锝嗘そ濮婅櫣绮欓幐搴㈡嫳缂備礁顑嗛崝妤呭箲閵忋倕骞㈡繛鎴炵懅閸樹粙姊虹涵鍛涧缂佹煡绠栬棢濠㈣埖鍔曢懜瑙勩亜閺嶃劌鍤繛鎾愁煼閺屾洟宕煎┑鍥舵！濡炪們鍎卞Λ娑㈡晸閸婄噥娼愭繛鍙夌矒瀵偊宕ㄦ繝鍕骄闂佸搫娲ㄦ慨椋庡閸忛棿绻嗘い鏍ㄧ箓娴滃綊鏌ｉ敃锟介悧鎾愁潖閸濆嫅褔宕惰娴煎牆鈹戦悙鏉垮皟闁糕�崇箰瀵版棃姊婚崒姘拷鐑芥倿閿曞倸绠栭柛顐ｆ礀缁�澶岋拷鐧告嫹闁告洦鍊犺閺岀喖姊荤�电濡介梺鍝勬噺閻擄繝寮婚敐澶婄疀妞ゆ挾鍠撶粙鍥╃磽娴ｇ顣抽柛瀣ㄥ�濋獮鍐潨閿熶粙骞冨▎鎾搭棃婵炴垶顨呴ˉ姘節閻㈤潧浠滈柣妤�鎳樺畷锟犲礃瀹割喗缍庡┑鐐叉▕娴滄粓骞戦懜鐐逛簻闁规崘娉涙禒婊冣攽閳ヨ櫕鎯堟い顏勫暣婵″爼宕橀妸銉�抽梻浣侯攰濞呮洟鏁冮姀銈囧祦闁告劦鍠栭悘鎶芥煛閸屾ê鍔滈柡鍌︽嫹闂備浇顕ч崙鐣岀礊閸℃稑纾婚柛鈩冪☉閸屻劑鏌ｉ姀鐘冲暈闁抽攱鍨块幃褰掑炊閿濆繑瀚圭�规洖娴勯幏閿嬬節濮橆厼锟藉爼鏌ｉ幇顖涚【鐞氭艾顪冮妶鍡樼叆缂佸澧庡Σ鎰板箻鐠囪尙锛滃┑鐐叉鐢晠宕悷鎵虫斀闁斥晛鍟徊濠氭倵濮橆偄宓嗛柣娑卞枦缁犳稑鈽夊▎蹇ユ嫹婵犳碍鐓犻柟顓熷笒閸旀鏌熸搴ｅ笡缂佺粯绋掑蹇涘礈瑜嶉閬嶆煟閻欏懏瀚归梺鎸庢礀閸婂綊宕愰崹顔ユ棃鏁愰崨顓熸闂佺顑囨慨鐢稿箞閵娿儙鐔兼偂鎼粹�茬帛濠电偛鐡ㄧ划宥嗙珶閸℃稒鏅搁柛濠勫櫏濞兼劖绻涢崣澶涜�跨�规洘绻傞埢搴ょ疀閿濆懏顓垮┑鐐差嚟婵挳顢栭幇鏉挎瀬闁告洦鍨遍悡銏′繆椤栨瑨顒熸俊鎻掔秺閺屾稒绻濋崒鐐插及濠殿喖锕ら…宄扮暦閹烘埈娼╂い鎺戯攻鐎氬綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤濠�閬嶆晸閻ｅ本鍤�閻庢矮鍗冲畷鎴炵節閸屾﹫鎷烽幒鎾剁瘈婵﹩鍘鹃崢鐢告⒑缂佹ê鐏﹂拑閬嶆煃闁垮濮堥柕鍥у椤㈡洟鏁愰崱娆樻О闂備線娼уú銈囷拷姘緲椤曪綁骞橀鍛櫆闂佸憡渚楅崣搴㈠閹炬枼鏀介幒鎶藉磹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋鐐殿暡鐎规洖寮堕幈銊ノ旂�ｎ偄顏堕柣搴㈩問閸ｎ噣宕戞繝鍥╁祦婵☆垵鍋愮壕鍏间繆椤栨粎甯涙い蹇曞枛濮婄粯鎷呴懞銉с�婇梺闈╃秶缁犳捇鐛箛娑欐櫢闁跨噦鎷�?
//		if(!fire.pb.activity.keju.KejuManager.getInstance().checkNpcVisitable(roleid,npckey)){
//			Module.logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇牠姊绘担鑺ョ《闁哥姵鎹囧鏌ヮ敃閵堝懎鐏婃繝鐢靛У绾板秹宕戦幇鐗堝仯闁搞儺浜滈惃鐑樸亜閺冿拷閸旀洟鍩為幋锔藉�婚柛銉㈡櫇鏍￠梻浣告啞閹稿鎮烽敂鐣屸攳濠电姴娲﹂崵鍐煃閸濆嫬鏆熼柨娑欑矒濮婅櫣绱掑Ο蹇氬亹閹峰啴鏁冮敓浠嬧�﹂崶顒�绠涢柣妤�鐗忛崢顏堟⒑閹肩偛鍔�闁告劕褰炵槐鏃�淇婇妶鍥ラ柛瀣☉鐓ゆい鎾跺仧閺嗭附绻濇繝鍌氼仾濠殿垱鎸抽弻銈嗙鐎ｎ偅鏆犻梺鎼炲妼閻忔繈锝炶箛鎾佹椽顢旈崟顐ょ崺濠电姷鏁告慨瀵革拷姘煎弮瀹曞疇顦寸紒杈ㄦ尰閹峰懘鎼归悷鎵偧闂備焦瀵уú蹇涘垂娴犲宓侀柛鎰靛枟閺呮悂鏌ｅ▎娆愬闂佽桨绀侀崯鎾蓟閵娾晛鍗虫い蹇撴噹椤忓爼姊绘担铏瑰笡闁告梹娲熼弫鍐敂閸繆鎽曢梺鍝勬川閸犳挾寮ч敓浠嬫椤愩垺澶勯柟灏栨櫅鐓ゆい鎾跺剱濞撳鏌曢崼婵堢缂侊拷鐎ｎ喗鐓曢柡鍐挎嫹闁搞劌鐏濋锝嗙節濮橆厽娅滈梺绯曞墲閿氶柛鏂挎嚇濮婃椽妫冨☉姘辩杽闂佺硶鏅涚�氭澘顕ｉ幎鑺ユ櫢闁绘ê鍟块敓鐣屾暬閺岋綀顦查柟璇х磿閿熻姤鑹剧紞濠傤潖妤﹁￥浜归柟鐑樻惈缁辩數绱撴笟濠冨婵炴挻鐔幏鐑芥煙闁垮鐏撮柟顔哄灲瀹曟鎳栭埡浣告辈闂傚倷鑳剁划顖炲蓟閵娾晛绠规い鎰╁灮閹姐儵姊婚崒娆掑厡缂侇噮鍨跺畷婵嬪即閵忊剝娅囧銈呯箰閻楀棝鎷戦悢鐚存嫹楠炲灝鍔氭俊顐ｇ懄閹便劌顭ㄩ崼鐔哄幍濠电偛鐗嗛悘婵嬪几閻斿吋鐓曢悗锝嗘煥濞诧箓鍩涢幋锔解拻闁割偆鍠嶇欢杈ㄤ繆閸欏灏﹂柡宀嬬節瀹曘劑顢欓崜褏鍘滈梻浣筋嚃閸ｎ垳鎹㈠┑瀣畺闁靛繈鍊曠粻褰掓煟閹邦厼顥嬮柣鈺侀叄濮婄粯鎷呯粵瀣秷閻庤娲橀敋闁崇粯鏌ㄩ埥澶愬閻樻妲堕梺鍝勵槸閻楀嫰宕濇惔锝囦笉濡わ絽鍟悡鐘电棯閺夊灝鑸瑰褍顭烽弻锝夊箻鐠哄搫褰�,闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存鐐达耿閹崇娀顢楁径瀣撴粓姊绘担瑙勫仩闁告柨绉堕幑銏ゅ礃椤斿槈锕傛煕閺囥劌鐏犻柛鎰舵嫹闂備線娼ц噹濞撴艾锕ョ�氬綊鏌熼悜姗嗘畷闁绘挾鍠愮换婵嬫濞戞瑯妫ら梺绯曟櫔缂嶄線寮婚垾宕囨殕閻庯綆鍓涢惁鍫ユ倵鐟欏嫭绀�闁绘牕鍚嬫穱濠囨倻閽樺）銊ф喐瀹�鍕畺闁挎繂顦伴埛鎺懨归敐鍛础婵狅拷娴犲鐓曞┑鐘插枤濞堟粎锟借娲橀崹鍧楃嵁濮楋拷閹虫粓妫冨☉妯煎搸濠电姷鏁搁崑鐐哄垂椤栫偛鍨傞柛锔诲幘娑撳秹鏌ㄥ┑鍡橆棤缂佺娀绠栭弻娑㈠焺閸愮偓鐣肩紓浣哄У婵炲﹪寮诲☉銏犵睄闁跨喍绮欓獮鎰板礃瀹割喗缍庨梺缁樺灦钃卞┑顔界矒閺岀喎鈻撻崹顔界彯濠碘�虫▕閸ｏ絽顫忓ú顏勭閹兼番鍨婚埞娑氱磽娴ｅ搫校闁圭懓娲ら锝夘敃閿曪拷缁犺崵绱撴担濮戭亪鎯傞崟顒傜瘈闁靛骏绲剧涵楣冩煟椤掞拷閵堢顕ｉ崘娴嬫闁靛繆妾ч幏铏圭磽娴ｅ壊鍎忔繛纭风節椤㈡挸螖閸愭寧瀚归悷娆忓婢跺嫰鏌涢幘瀵哥疄闁诡喗顭囬敓鏂ょ秵娴滄牠寮ㄦ禒瀣厽闁归偊鍘界紞鎴︽煟韫囨洖鏋涢柡灞剧洴婵℃悂濡疯妤旈梻浣筋嚃閸犳帡鏁撻懞銉︾伇闁猴拷娴犲鍊甸柨婵嗛娴滅偤鏌涘Ο缁樺�愭慨濠冩そ瀹曘劍绻濋崒姘兼綆闂備礁鎲￠弻銊╁嫉椤掑倻鐭夌�广儱妫楅閬嶆倵濞戞瑯鐒介柛妯虹仛娣囧﹪鎮欏顔煎壈婵°倗濮甸幃鍌氱暦閵忋倕绠绘い鏃傛櫕閸樿棄鈹戦悙鏉戠仴鐎规洦鍓欓埢宥咁吋閸ラ攱瀚归悷娆忓缁�锟界紓鍌氱Т閿曨亪濡存担绯曟瀻闁圭偓娼欐禍妤呮煙閸忓吋鍎楅柛鐘愁殘缁辩偤骞樼紒妯锋嫽闂佺鏈懝楣冩晸閻ｅ苯鍘撮柟铏殜瀹曟粍鎷呯粙璺ㄤ喊婵＄偑鍊栭悧婊堝磻閹达附鏅搁柦妯侯槸閺嗭絿锟借娲忛崝鎴︺�佸锟藉畷鍫曞Ω瑜夊Σ鍫ユ⒑鐎圭媭娼愰柛銊ョ仢閻ｇ兘宕￠悙鈺傜�婚梺褰掑亰閸欏酣宕惔銊︹拻闁稿本鐟х粣鏃�绻涙担鍐叉噺瀹曟煡鏌涢鐘插姎缁炬儳缍婇弻锟犲炊閳轰絿銉モ槈閹惧磭肖缂佽鲸鎸婚幏鍛殽閵婏妇鐭嬬紒鍌氱Т椤劑宕奸悢鍝勫箰闂備礁鎲￠崝鎴﹀礉瀹ュ棗绶為柛鏇ㄥ厵娴滄粓鏌曟径鍫濆姶婵″弶鎮傚Λ浣瑰緞閹邦厾鍘藉┑鐐叉閻燂妇锟芥艾缍婂娲箹閻愭彃顫呮繛瀛樼矤閸撶喖鐛幋锕�顫呴柣姗嗗亝椤秴鈹戦悙鍙夘棡闁告梹顨堢划鏃堝醇閺囩啿鎷洪梺鍛婄☉閿曘儳锟藉灚鐟╅弻娑㈠箛閳轰礁顬嬮梺鍛娚戠敮鈥愁潖婵犳艾纾兼繛鍡樺笒閸樷�愁渻閵堝啫鐏╅柨鏇ㄤ邯閵嗕礁顫濋澶屽弳闂佸憡渚楅崰鏍ㄦ償婵犲倵鏀介柣妯肩帛濞懷勪繆椤愶絿娲寸�殿喗濞婇弫鍐磼濞戞艾骞嶉梺鍝勵槸閻楀棙鏅舵禒瀣仼闂侇剙绉撮懜瑙勩亜閺嶎偄浠﹂柍閿嬪灴閺岀喓绮欓崹顕呭妷濡炪們鍎卞Λ娆戞崲濞戞瑥绶為悗锝庡亞椤︻厾绱撴笟鍥ф灕妞ゆ泦鍥风稏婵犻潧顑愰弫鍡楊熆鐠轰警鍎忛柣锔界矒濮婄粯绗熼敓钘夘焽瑜旈幃褔宕卞銏＄☉铻栧ù锝囨嚀瀵潡姊洪幐搴㈢闁稿﹤缍婇幃锟犲即閵忥紕鍘甸梺璇″瀻閸涱喗鍠栭梻浣圭湽閸斿秹宕归崸妤�钃熼柕濞炬櫆閸嬪嫰鎮归崶銊ф殭闁瑰墽绮悡鐔兼煛閸愨晛鐏ュ褍鐡ㄩ〃銉╂倷閼碱剛顔掗梺杞扮劍閹瑰洭寮幘缁樻櫢闁跨噦鎷�:"+roleid);
//			return false;
//		}
		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇牠姊绘担鑺ョ《闁哥姵鎹囧鏌ヮ敃閵堝懎鐏婃繝鐢靛У绾板秹宕戦幇鐗堝仯闁搞儺浜滈惃鐑樸亜閺冿拷閸旀洟鍩為幋锔藉�婚柛銉㈡櫇鏍￠梻浣告啞閹稿鎮烽敂鐣屸攳濠电姴娲﹂崵鍐煃閸濆嫬鏆熼柨娑欑矒濮婅櫣绱掑Ο蹇氬亹閹峰啴鏁冮敓浠嬧�﹂崶顒�绠涢柣妤�鐗忛崢顏堟⒑閹肩偛鍔�闁告劕褰炵槐鏃�淇婇妶鍥ラ柛瀣☉鐓ゆい鎾跺仧閺嗭附绻濇繝鍌氼仾濠殿垱鎸抽弻銈嗙鐎ｎ偅鏆犻梺鎼炲妼閻忔繈锝炶箛鎾佹椽顢旈崟顐ょ崺濠电姷鏁告慨瀵革拷姘煎弮瀹曞疇顦寸紒杈ㄦ尰閹峰懘鎼归悷鎵偧闂備焦瀵уú蹇涘垂娴犲宓侀柛鎰靛枟閺呮悂鏌ｅ▎娆愬闂佽桨绀侀崯鎾蓟閵娾晛鍗虫い蹇撴噹椤忓爼姊绘担铏瑰笡闁告梹娲熼弫鍐敂閸繆鎽曢梺鍝勬川閸犳挾寮ч敓浠嬫椤愩垺澶勯柟灏栨櫅鐓ゆい鎾跺剱濞撳鏌曢崼婵堢缂侊拷鐎ｎ喗鐓曢柡鍐挎嫹闁搞劌鐏濋锝嗙節濮橆厽娅滈梺绯曞墲閿氶柛鏂挎嚇濮婃椽妫冨☉姘辩杽闂佺硶鏅涚�氭澘顕ｉ幎鑺ユ櫢闁绘ê鍟块敓鐣屾暬閺岋綀顦查柟璇х磿閿熻姤鑹剧紞濠傤潖妤﹁￥浜归柟鐑樻惈缁辩數绱撴笟濠冨婵炴挻鐔幏鐑芥煙闁垮鐏撮柟顔哄灲瀹曟鎳栭埡浣告辈闂傚倷鑳剁划顖炲蓟閵娾晛绠规い鎰╁灮閹姐儵姊婚崒娆掑厡缂侇噮鍨跺畷婵嬪即閵忊剝娅囧銈呯箰閻楀棝鎷戦悢鐚存嫹楠炲灝鍔氭俊顐ｇ懄閹便劌顭ㄩ崼鐔哄幍濠电偛鐗嗛悘婵嬪几閻斿吋鐓曢悗锝嗘煥濞诧箓鍩涢幋锔解拻闁割偆鍠嶇欢杈ㄤ繆閸欏灏﹂柡宀嬬節瀹曘劑顢欓崜褏鍘滈梻浣筋嚃閸ｎ垳鎹㈠┑瀣畺闁靛繈鍊曠粻褰掓煟閹邦厼顥嬮柣鈺侀叄濮婄粯鎷呯粵瀣秷閻庤娲橀敋闁崇粯鏌ㄩ埥澶愬閻樻妲堕梻浣筋潐閸庡吋鎱ㄩ妶澹﹀绻濋崘锔跨盎闂佸湱鍎ら崺鍫澪ｇ粙娆剧唵鐟滃酣骞愰幎钘夎摕闁挎稑瀚▽顏堟⒒閸碍娅嗛悗姘贡閿熷�燁潐濞叉牕煤閿曪拷閳绘捇寮撮姀锛勫幗闁瑰吋鎯岄崹宕囩矓閻㈠憡鐓曢柟鎯ь嚟椤ジ鏌嶉鍕粵缂佺粯绻堥幃浠嬫濞磋翰鍎查妵鍕晲閸曨厾鐓撻悗瑙勬礃缁矂鍩為幋鐙呮嫹閿濆簼绨介柣锝嗘そ濮婅櫣绮欓幐搴㈡嫳缂備礁顑嗛崝妤呭箲閵忋倕骞㈡繛鎴炵懅閸樹粙姊虹涵鍛涧缂佹煡绠栬棢濠㈣埖鍔曢懜瑙勩亜閺嶃劌鍤繛鎾愁煼閺屾洟宕煎┑鍥舵！濡炪們鍎卞Λ娑㈡晸閸婄噥娼愭繛鍙夌矒瀵偊宕ㄦ繝鍕骄闂佸搫娲ㄦ慨椋庡閸忛棿绻嗘い鏍ㄧ箓娴滃綊鏌ｉ敃锟介悧鎾愁潖閸濆嫅褔宕惰娴煎牆鈹戦悙鏉垮皟闁糕�崇箰瀵版棃姊婚崒姘拷鐑芥倿閿曞倸绠栭柛顐ｆ礀缁�澶岋拷鐧告嫹闁告洦鍊犺閺岀喖姊荤�电濡介梺鍝勬噺閻擄繝寮婚敐澶婄疀妞ゆ挾鍠撶粙鍥╃磽娴ｇ顣抽柛瀣ㄥ�濋獮鍐潨閿熶粙骞冨▎鎾搭棃婵炴垶顨呴ˉ姘節閻㈤潧浠滈柣妤�鎳樺畷锟犲礃瀹割喗缍庡┑鐐叉▕娴滄粓骞戦懜鐐逛簻闁规崘娉涙禒婊冣攽閳ヨ櫕鎯堟い顏勫暣婵″爼宕橀妸銉�抽梻浣侯攰濞呮洟鏁冮姀銈囧祦闁告劦鍠栭悘鎶芥煛閸屾ê鍔滈柡鍌︽嫹闂備浇顕ч崙鐣岀礊閸℃稑纾婚柛鈩冪☉閸屻劑鏌ｉ姀鐘冲暈闁抽攱鍨块幃褰掑炊閿濆繑瀚圭�规洖娴勯幏閿嬬節濮橆厼锟藉爼鏌ｉ幇顖涚【鐞氭艾顪冮妶鍡樼叆缂佸澧庡Σ鎰板箻鐠囪尙锛滃┑鐐叉鐢晠宕悷鎵虫斀闁斥晛鍟徊濠氭倵濮橆偄宓嗛柣娑卞枦缁犳稑鈽夊▎蹇ユ嫹婵犳碍鐓犻柟顓熷笒閸旀鏌熸搴ｅ笡缂佺粯绋掑蹇涘礈瑜嶉閬嶆煟閻欏懏瀚归梺鎸庢礀閸婂綊宕愰崹顔ユ棃鏁愰崨顓熸闂佺顑囨慨鐢稿箞閵娿儙鐔兼偂鎼粹�茬帛濠电偛鐡ㄧ划宥嗙珶閸℃稒鏅搁柛濠勫櫏濞兼劖绻涢崣澶涜�跨�规洘绻傞埢搴ょ疀閿濆懏顓垮┑鐐差嚟婵挳顢栭幇鏉挎瀬闁告洦鍨遍悡銏′繆椤栨瑨顒熸俊鎻掔秺閺屾稒绻濋崒鐐插及濠殿喖锕ら…宄扮暦閹烘埈娼╂い鎺戯攻鐎氬綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤濠�閬嶆晸閻ｅ本鍤�閻庢矮鍗冲畷鎴炵節閸屾﹫鎷烽幒鎾剁瘈婵﹩鍘鹃崢鐢告⒑缂佹ê鐏﹂拑閬嶆煃闁垮濮堥柕鍥у椤㈡洟鏁愰崱娆樻О闂備線娼уú銈囷拷姘緲椤曪綁骞橀鍛櫆闂佸憡渚楅崣搴㈠閹炬枼鏀介幒鎶藉磹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋鐐殿暡鐎规洖寮堕幈銊ノ旂�ｎ偄顏堕柣搴㈩問閸ｎ噣宕戞繝鍥╁祦婵☆垵鍋愮壕鍏间繆椤栨粎甯涙い蹇曞枛濮婄粯鎷呴懞銉с�婇梺闈╃秶缁犳捇鐛箛娑欐櫢闁跨噦鎷�? end
		return true;
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 795433;

	public int getType() {
		return 795433;
	}

	public long npckey; // npckey为npc的唯一ID

	public CVisitNpc() {
	}

	public CVisitNpc(long _npckey_) {
		this.npckey = _npckey_;
	}

	public final boolean _validator_() {
		if (npckey < 0) return false;
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(npckey);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		npckey = _os_.unmarshal_long();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CVisitNpc) {
			CVisitNpc _o_ = (CVisitNpc)_o1_;
			if (npckey != _o_.npckey) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)npckey;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(npckey).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CVisitNpc _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(npckey - _o_.npckey);
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}
