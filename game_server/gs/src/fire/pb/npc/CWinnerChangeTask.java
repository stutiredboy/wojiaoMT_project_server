
package fire.pb.npc;

import java.util.Arrays;
import java.util.List;

import fire.pb.activity.winner.WinnerManager;
import fire.pb.activity.winner.WinnerRecord;
import fire.pb.circletask.SpecialQuestState;
import fire.pb.map.Npc;
import fire.pb.map.SceneNpcManager;
import fire.pb.mission.activelist.RoleLiveness;
import fire.pb.talk.MessageMgr;
import fire.pb.team.Team;
import fire.pb.team.TeamManager;
import fire.pb.util.TaskDlgUtil;








// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CWinnerChangeTask__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CWinnerChangeTask extends __CWinnerChangeTask__ {
	@Override
	protected void process() {
		// protocol handle
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌ょ喊鍗炲⒒婵℃煡鏀辩换婵嗩嚗闁垮绶查柨鐔诲Г閹瑰洭骞冮悙鐑樻櫇闁稿本姘ㄩ悡鎴︽椤愩垺澶勭紒瀣浮閹�斥枎閹寸姷锛濇繛杈剧秮濞佳囨倶閳哄懏鐓涢悗锝庡亞濞叉挳鏌″畝瀣М濠德ゅ煐閹棃鍩勯崘顏冩喚婵犵數鍎戠徊钘壝洪妶澶嬫櫇妞ゅ繐鎳嶇换鍡涙煕椤愶絾绀�鐎瑰憡绻冮妵鍕箻鐠虹儤鐎惧銈嗘煥椤﹂潧顫忛搹瑙勫珰闁圭粯甯╅崝澶岀磼閻愵剚绶茬紒澶嬫尦閹儳鈹戠�ｎ亞顔愭繛杈剧稻閻℃洟骞楅弴銏♀拺閻犳亽鍔岄弸鏂库攽椤旇姤灏﹂柟顔界懄缁绘繈宕堕妸褍甯楅梺鍝勵槺閸嬬偞绔熼崱娑樼畺濠靛倸鎲￠悡蹇涚叓閸ャ劍绀�鏉╂繈鎮峰鍛暭閻㈩垱顨婂畷鎴﹀箛閻楀牏鍘卞┑鐐叉濞存艾危閼测晝妫い鎾卞妽鐎氬湱绱撻崒姘拷鎼佸磹瀹勬噴褰掑炊閵婏絼绮撻梺褰掓？缁�浣虹不閺夊簱鏀介柣妯虹枃婢规绱掗悪锟介崹鍫曞蓟濞戞ǚ妲堟繛鍡樺姉缁嬪洦绻涚壕瀣汗濠电儑鎷烽梺鍝勬湰閻╊垰顕ｉ幘顔嘉╅柕澶堝労濞奸箖姊绘担鑺ョ《闁哥姴閰ｉ弫鎾绘偩鐏炶姤鐎惧銈呯箳婵妲愰幒鎾寸秶闁靛绠戦棄宥夋⒑閻熸澘妲婚柟铏姍楠炲骞橀鑲╊槹闂侀潧顭粻鎴︻敂閹间焦鈷掗柛灞剧懅椤︼附绻濋敓浠嬫焼瀹ヤ緤鎷烽敃鍌氶唶闁靛鍎抽弻鍫ユ⒑缁夊棗瀚峰▓锝囩磽瀹ュ棛澧甸柣鎿冨亰瀹曞爼濡搁敂瑙勫闂傚倸鍊哥�氼剛锟芥矮鍗冲璇测槈濡攱顫嶅┑顔筋殔閻楀棙瀵奸幇顓犵閻庢稒顭囬惌瀣磼椤旇姤灏い顐㈢箻閹煎綊宕烽鐘靛幆闂佽崵濮垫禍浠嬪礉鎼搭煈鏁婇柛銉墯閳锋垿鏌涘☉姗堥練濠㈣蓱閵囧嫰骞嬪┑鎰枅濡ょ姷鍋涘Λ娆戠箔閻斿吋鏅稿ù鐘差儏閺嬩線鏌熼悧鍫熺凡妤犵偑鍨虹换娑㈠幢濡櫣鍔搁梺鍝ュ枎闁帮絽顫忛搹瑙勫珰闁告瑥顦板畷鎶芥⒑鏉炴壆鍔嶉柟顔煎�块崹楣冩晝閸屾岸鍞堕梺闈涳紡瀹ュ棗顏堕梻浣哥仢椤戝嫮鎹㈤崱娑欑厽闁规澘鍚�缁ㄥ鏌ㄩ悢璇残撻柣妤佹礋閸┿垽寮崼鐔告珖闂佺鏈銊┧囬弶娆炬富闁靛牆妫楅柌婊堟煙閻戠瓔妫戦柨鐔诲Г椤旀牠宕伴弽褜鐒介柍銉﹀墯濞兼牠鏌ц箛姘兼綈鐎规洖顦甸弻鏇熺箾閸喖濮曢梺缁樼缚閸ㄨ棄顫忓ú顏呭仭闁哄瀵ч锟介梻浣烘嚀閸ゆ牠骞忛敓锟�
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if(roleid<=0){
			return;
		}
		new mkdb.Procedure() {
			@Override
			protected boolean process() throws Exception {
				Team team = TeamManager.selectTeamByRoleId(roleid);
				if (team == null){
					MessageMgr.sendMsgNotify(roleid, 140498, null);
					return false;
				}
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎喘濮婄粯鎷呯憴鍕哗闂佺瀛╁钘夌暦濠婂啠鏋庨柟瀛樼箥濡粓鎮峰鍛暭閻㈩垱顨婇幃鈥斥槈濮樼偓瀚规鐐茬仢閸旀艾螖閻樿櫕鍊愰柣娑卞櫍瀵粙顢橀悢鍝勫籍闂備礁鎲￠崝锔界濠婂牆鍑犳繛鎴欏灪閻撴盯鎮橀悙鎻掆挃婵炲弶娼欓埞鎴︽晬閸曨偄骞嬪銈冨灪閻熲晛鐣烽敐澶娢ㄩ柨鏃傚亾缂嶅酣姊婚崒姘拷鐑芥倿閿曞倸纾跨�规洖娲﹀畷鍙変繆閵堝懏瀚呯紓宥嗙墪椤法鎹勯搹鍦姽闂佺懓鍢查崲鏌ワ綖濠靛鏁囬柣鎰级閹虫瑩姊绘担鍛婃儓闁活剙銈稿畷浼村箻閼告娼熼梺鍦劋閸わ箓鎮㈢拋鎸庢そ椤㈡棃宕熼浣圭槕濠电姷鏁告慨鎾儉婢舵劕绾ч柛鏍ゅ墲鐎氬綊鏌￠崶銉ョ仼缂佺姷濞�閻擃偊宕堕妸褉妾ㄩ梺绋款儏閸婂湱鎹㈠☉銏犵婵炲棗绻掓禒楣冩⒑缂佹ɑ灏版繛鑼枛瀵鏁撻悩鑼�為梺闈涱槶閸庤櫕绂掗幆褉鏀介柣鎰綑濮ｅ棝鏌涢妷锝呭闁告ü绮欏Λ鍛搭敃閵忊�愁槱濠电偛寮堕悧鐘诲春閵忋倕閱囬柕澶涘閸樻悂鎮楅惂鍛婂闂佽法鍠嶇划娆忕暦娴兼潙鍐�妞ゆ挻绮ｉ幏閿嬫媴缁洘顫嶅┑鈽嗗灦閺�閬嶆倵婵犳碍鈷戦悷娆忓閸庢鏌涘Ο鐚存嫹閻旀彃寰嶆繝鐢靛Х椤ｎ喚妲愰弴銏犵；闁硅揪绠戠壕褰掓煛瀹ュ海浜规繛宸簻閻撴盯鏌涘☉鍗炲箻妞ゆ柨妫濆铏规崉閵娿儲鐝㈤梺鐟板殩閹凤拷?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亜顒㈡い鎰Г閹便劌顫滈崱妤�鈷掗梺缁樺笩濡嫰鍩為幋锔藉亹閻庡湱濮撮ˉ婵堢磽娴ｅ搫顎岄柛銊ョ埣瀵濡搁埡鍌氫簽闂佺鏈粙鎴︻敂閿燂拷?
				long currentTime = System.currentTimeMillis();
				if (!WinnerManager.getInstance().isInWinnerActiveTime(currentTime)) {
					return false;
				}
				if(acceptflag==1){
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌涢幇顒�绾ч柣銈呭閳规垶骞婇柛濞у懎绶ゅù鐘差儏閻ゎ喗銇勯幇鈺侊拷褔骞忓畡閭︽僵妞ゆ帒顦版晥闂備線娼уú銈囷拷姘嵆閻涱噣骞掑Δ锟界粻锝嗙節閸偄濮冮柟顕嗙悼缁辨捇宕掑▎鎴犵摌闂佸綊顥撻崗姗�寮诲☉銏╂晝闁绘ɑ褰冩慨鏇㈡⒑缂佹ɑ灏伴柣鐕傚閹广垹鈽夐姀鐘诲敹濠电娀娼ч悧鍛存惞鎼淬劍鈷戦柛婵嗗閸庡秹鏌涙繝鍐炬疁闁诡垽鎷峰銈呯箰閻楀棛绮诲杈ㄥ枑閻庯綆鍠栫壕濠氭煏韫囧锟芥牠鎮″☉姘炬嫹閻у憡瀚归柣搴秵閸撴稖鈪甸梺璇插椤旀牠宕抽锟藉畷婊堟偄妞嬪孩娈鹃悷婊呭鐢晠寮�ｎ喗鐓曟繛鎴濆船閺嬬喐銇勯弮锟介崹鐢稿煘閹达附鏅柛鏇ㄥ亗閺夘參姊虹粙鍖℃敾婵炲弶绮撻獮鎴﹀閵堝懐鐤�濡炪倖甯掗崐鐟扳枔閹屾富闁靛牆妫楃粭鎺楁倵濮樼厧骞樼紒顔碱煼楠炴帒螖娴ｅ弶瀚藉┑鐐舵彧缂嶏拷婵炲拑绲块弫顔尖槈閵忊�冲壋婵犮垼鍩栭崝鏍磻閿濆鐓ラ柣鏂垮閻瑩鏌℃担绋挎殻鐎规洘甯掗～婵嬵敆娴ｇ濮冩繝鐢靛Х閺佹悂宕戝☉妯滄稑螖閸愨晛搴婇梺绯曞墲缁嬫垹绱掗埡鍛厾闁诡厽甯掗崝妯好瑰鍕煉闁哄矉绻濆畷鍫曞煛娴ｉ攱鍕冩俊鐐�戦崕鎶藉磻閵堝绠栨俊銈忔嫹妞ゎ偅绻堥幃娆擃敆閿熶粙顢旈敓锟�
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏堕柣搴ゎ潐濞插繘宕曢幎鑺ユ櫢闁哄倶鍊楃粔鐢告煕閻樺磭澧卞瑙勬礋瀹曠螖娴ｅ搫骞嶉梻浣筋嚃閸ㄨ櫕鏅跺Δ鍚藉寰勯幇顒傤啇闂佸搫顦伴崺濠囩叕椤掑嫭鐓涢悘鐐额嚙閿熻姤绻堥獮濠傗攽鐎ｎ亞顓煎銈嗘閸嬫劖鏅堕姘ｆ斀闁绘劘灏欓幗鐘电磼椤旇偐鐏辩紒杈╁仦缁绘繈宕惰閹芥洖鈹戦悙鏉戠仧闁搞劎鎳撻弫顔戒繆閻愵亜锟芥牕顫忔繝姘偍鐟滄棃鏁愰悙渚晜闁割偆鍟块幏娲⒑鐟欏嫬鍔跺┑顔哄�濆顐︽焼瀹ュ棛鍘甸梺鑽ゅ枔婢ф宕板Ο纭锋嫹濞堝灝鏋涙い顓犲厴瀵偊骞囬鐐电獮婵犵數濮撮崰姘涢悢鍏尖拻濞达絿顭堥ˉ蹇涙煟閹惧磭澧︾�规洘婢樿灃闁告侗鍘鹃敍娆忣渻閵堝棛澧柛鈺佸暣瀵劑鎳為妷锝勭盎闂佸搫娲ㄩ崑鐐核夐悩鐢电＜閻庯綆浜堕悡濂告煛鐏炲墽娲寸�殿噮鍣ｉ弫鎾寸鐎ｎ偄浠梺瀹犳〃缁讹繝宕甸弴鐐╂斀闁绘ê纾。鏌ユ煛閸涱喖绲绘い顓℃硶閹瑰嫭绺介弬銈囩瘈闁糕晪绻濆畷銊╊敊閹冨婵犵數濮伴崹鐓庘枖濞戙垺鍋嬮柛鈩冪☉缁�澶愭煛婢跺娈憸鐗堝笚閸嬫劙鏌ょ喊鍗炲濡ゆ梹绻濆▓鍨灈闁挎洏鍎遍—鍐╃鐎ｎ亞鐣洪梺缁樺灱濡嫮绮婚妷锔轰簻闁哄啫鍊告禍鐐箾閸偄鐏︽慨濠勭帛閹峰懐鎲撮崟顐″摋闂備礁鎲￠弻銊ф崲閹邦垳浜遍梻浣告啞濞诧箓宕归柆宥呯；闁冲搫鍠涢幏鐑芥偡閺夋浠炬繝銏㈡嚀椤戝顕ｉ妸锔绢浄閻庯綆鍋勯敓鐣屾暬閺屻劌鈹戦崱妯诲闯闂佸憡蓱缁捇寮婚悢鍓叉Ч閹肩补锟藉啿绠ｉ梻浣芥〃閻掞箓骞愰懡銈囩焿闁圭儤妫戦幏鐑芥晲鎼粹�茬敖闂佸憡眉缁瑥顫忓ú顏咁棃婵炴垼椴搁埢鎾绘⒑閹肩偛濮�濞存粠鍓熼弫鎾绘嚍閵壯冩殹闂佺懓鍤栭幏锟�
					long teamleadid=team.getTeamLeaderId();
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏堕柣搴ゎ潐濞插繘宕曢幎鑺ユ櫢闁哄倶鍊楃粔鐢告煕閻樺磭澧卞瑙勬礋瀹曠螖娴ｅ搫骞嶉梻浣筋嚃閸ㄨ櫕鏅跺Δ鍚藉寰勯幇顒傤啇闂佸搫顦伴崺濠囩叕椤掑嫭鐓涢悘鐐额嚙閿熻姤顨婂畷鐗堢節閸パ咁攨闂佺粯鍔曞Ο濠傤焽閼恒儰绻嗛柣鎰典簻閿熻姤鐗犲畷婵嬪箳閺傚灝鐏婂┑鐐叉濞存岸宕甸弴銏＄厱妞ゆ劧绲剧粈锟介梻浣稿船濞诧妇鎹㈠☉銏犵闁诲繑妞挎禍顏堝灳閺嶎偓鎷烽敐搴濇喚婵炴挸顭烽弻鏇㈠醇濠靛棴鎷烽悷鎵虫瀺闁搞儺鍓氶悡鏇㈢叓閸ャ劍顥栭柤鐗堝椤ㄣ儵鎮欓幓鎺撴闂侀潧娲﹂崝娆撶嵁閹烘绠ｉ柣妯款嚋閹风兘鎮欓悜妯锋嫼闂傚倸鐗婃笟妤呮倿妤ｅ啯鐓曢幖杈剧磿閿涘秶绱掗纭峰伐闁伙綇绻濋弻鍥晜閽樺妲ｉ梻鍌欑窔濞佳囨偋閸℃﹩娈介柛娑橈功椤╂煡鏌″搴″箺闁绘挻娲栭埞鎴︽偐閹绘帗娈茬紓渚婃嫹濠㈣泛鏈崰鎰涙０浣藉厡缂佹劖姊归幈銊︾節閸愨斂浠㈠Δ鐘靛仦閻楃娀骞冨▎鎾崇闁圭儤鍤╅妷褏纾介柛灞剧懄缁佷即鎮樿箛锝勭凹闁逛究鍔戞俊鑸靛緞婵犲嫭鐓ｉ梻浣稿閸嬪懎煤閺嶎偆涓嶉柣銏犳啞閻撴瑩鎮峰▎蹇擃伌婵炲牊姊圭换婵嬫晸娴犲纭�闁绘劏鏅滈～宥夋⒑濮瑰洤鐏╅柟璇х節閹繝濡烽埡鍌氾拷鐢告煥濠靛棛鍑归柟鍙夊劤闇夌痪顓㈡敱鐎氾拷
					xbean.TaskDlgInfo task=TaskDlgUtil.getTaskDlgInfo(teamleadid, WinnerManager.WINNER_TASK_ID);
					if(task==null){
						WinnerManager.logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌涢幇顒�绾ч柣銈呭閳规垶骞婇柛濞у懎绶ゅù鐘差儏閻ゎ喗銇勯幇鈺侊拷褔骞忓畡閭︽僵妞ゆ帒顦版晥闂備線娼уú銈囷拷姘嵆閻涱噣骞掑Δ锟界粻锝嗙節閸偄濮冪紒杈ㄧ箞濮婄粯鎷呴懞銉ｏ拷鍐磼閿熻姤鎷呴懖婵囩☉閳规垹锟斤綆浜ｉ幗鏇㈡⒑閹稿海绠撴い锔诲灣缁鈽夊▎宥勭盎闂佺懓鎼粔鍫曞礉瀹ュ鐓曢幖娣灪鐏忕數绱掓潏銊﹀鞍缂佹鍠愮换婵嬪礃椤垳绱﹂梻鍌氬�风粈渚�骞夐敓鐘茬闁挎洖鍊哥粣妤佷繆閵堝懏鍣洪柛瀣�块弻锝夊籍閸喐鐝崇紓浣筋嚙濡瑩濡甸崟顖氬唨闁靛ě鍜佸悑闂備焦鎮堕崐鏍偡瑜忓Σ鎰板箳濡わ拷缁犵敻鏌熼悜妯肩畼闁告艾顑夊娲传閸曨厾鍔圭紓浣虹帛缁诲倿鎮鹃悜钘壩╅柍鍝勶攻閺呫垽姊虹粙鎸庢拱缂侇喖閰ｅ畷銏ゎ敍閻愮补鎷绘繛杈剧悼閻℃棃宕甸崘顔界厱闁绘ê纾晶杈╃磼鏉堚晛浠︾紒缁樼箞瀹曟帒顭ㄩ崟顒夊晭闂傚倷绀佹竟濠囧磻閸涱劶娲冀閵娿儱濮呴梻鍌氬�烽悞锔撅拷绗涘喚娼栧┑鐘崇閹偤骞栫划鐟扮伋闁挎繂顦柋鍥煛閸モ晛鏆遍柟椋庣帛缁绘稒娼忛崜褍顕遍柣鐙呮嫹闁挎洖鍊归崐鍨旈敐鍛殲闁绘挾鍠栭弻锝夊即濮橆収妯傞梻渚囧弾閸ㄦ娊鏁撻崐鐕佹綈婵炲弶绮撳畷浼村冀椤撴粣鎷锋担鑲濈喎鈻庨悙顑亞绱撻崒娆愵樂缂佽绻濆畷鎴炵節閸屻倖缍庡┑鐐叉▕娴滄繈宕甸幒妤佺厪闁割偅绻冮崯妤呮煏韫囥儳纾跨紒鐘荤畺閹綊宕堕崶褎鍣介柡鍡愬灲濮婃椽妫冨☉娆忣槱闂佸憡姊归悷銉╂偩瀹勯偊娼ㄩ柨鐔剁矙閵嗕礁顫濈捄鍝勮�垮┑鐐叉閸ㄧ喎螞閵娾晜鈷掗柛灞剧懅缁愭梹绻涙担鍐叉处閸嬪鏌涢埄鍐巢闁搞儯鍔岄閬嶆倵濞戞顏呯濡ゅ懏鈷戦梻鍫熶緱濡狙冣攽閳ヨ櫕宸濈紒顔剧帛閵堬綁宕橀埡鍐ㄥ箥闂佽娴烽弫鎼佲�﹂崼銉︽櫢闁兼亽鍎虫晶鍨殽閻愬樊鍎忛柍瑙勫灴楠炴﹢鎯傞崨濠傤伓闂佸壊鐓堥崯鏃囥亹閹烘挸浜楅柟鑹版彧缁查箖骞夋總鍛娾拺缂備焦蓱鐏忎即鏌ｉ埡濠傜仸鐎殿喛顕ч埥澶愬閻橀潧濮堕梻浣告啞閸旓附绂嶅┑瀣棷鐟滄柨顫忓ú顏勪紶闁告洟娼ч崜杈╃磽娴ｅ壊鍎愰悽顖ょ節婵℃挳宕橀鍢夈劑鏌嶉崫鍕拷鎼佹晸閻ｅ苯鍘撮柡灞稿墲瀵板嫮锟斤綆浜炴禒鍏肩箾鐎电甯堕柤娲诲灦閳ユ棃宕橀鍢壯囨煕閹扳晛濡垮ù鐘荤畺閹鎯傞崨濠傤伓闂備礁缍婂Λ璺ㄧ矆娓氾拷瀵憡绗熼敓浠嬪蓟閻旂厧绠氱憸婊堝吹閻旀悶浜滈柍鍝勫暙閸樻挳鏌熼绛嬫疁闁轰焦鍔栭幆鏂库攽閸繂姣堥梻鍌欐祰椤曆咃拷鍨浮瀹曟粌顫濇潏銊ュ簥濠电娀娼ч鍡涘磻閵娾晜鈷掗柛顐ゅ枎閸ㄤ線鏌曡箛瀣拷鏍磹閸偅鍙忔俊顖滃帶鐢埖顨ラ悙杈捐�块柡灞诲姂閹垻鎷犲▓瀣尵閻ヮ亪寮剁捄銊愩倝鏌涢悩璇у伐妞ゆ挸鍚嬪鍕箾椤喚鐣甸柡灞剧洴瀵挳濡搁妷褌鍝楅梻浣告啞閸斞囧箯閻戣姤鈷掑〒姘炬嫹婵炰匠鍥佸洭顢橀姀鐘碉紵婵犵數濮甸懝鍓х不椤栨粣鎷烽悷鏉款仾閻庢艾鐗撳顕�宕煎┑鍫О婵＄偑鍊曠换鎰涘☉銏犵閻犻缚銆�閺�浠嬫煟濮楀棗鏋涢柣蹇涗憾閺屾盯鍩￠崒婊冣拰閻庤娲樼换鍫濐嚕娴犲鏁囬柣鎰版涧楠炲牓姊绘担鍛婅础闁稿簺鍊濋妴鍐幢濞戞瑥浜楅梺鍝勬储閸ㄦ椽鎮″▎鎾寸厸濠㈣泛锕︽禒銏ゆ煙椤旀槒鍏岀紒杈ㄥ浮婵℃悂濡烽鎯ф倯闂備礁鎼惌澶屾閺囥垺鏅搁柡鍌樺�楃粔鐢告煕鐎ｎ亝顥滈悡銈夋煙缂併垹鏋熼柣鎾寸〒閿熺晫娅㈤幏鐑芥倵閿濆骸澧伴柣锕�鐗撻幃妤冩喆閸曨剛顦ラ悗瑙勬处閸撴繈鎮橀崘顔解拺閻犳亽鍔岄弸宥囩磼椤旂晫鎳囨鐐诧工椤劑宕遍幇顏呯潖闂備礁婀遍崕銈夊箰妤ｅ啫鍌ㄩ柟鍓х帛閻撶喖鏌ｅΟ澶稿惈妞わ讣濡囬惀顏嗙磼閵忕姴绫嶉梺璇″灠閼活垶鍩㈡惔銊ョ閻庣數顭堥獮鍫ユ⒒娴ｅ摜鏋冩俊妞煎妿缁牊绗熼敓浠嬨�侀弮鍫晣闁绘瑥鎳忕�氬綊鎮峰▎蹇擃仾缂侊拷閸愵喗鐓ラ柡鍥悘鑼拷瑙勬礃濡炰粙寮幘缁樺亹闁肩⒈鍓﹀Σ鐗堜繆閻愵亜锟芥洜鎹㈤幇鏉跨疇闊洦渚楅弫濠囨煙鐎涙濡囬柡锟芥禒瀣厽婵☆垵娅ｆ禒娑㈡煛閸″繑娅婇柡灞剧〒閿熸枻缍嗛崑鍡椕虹�涙ǜ浜滈柕蹇婏拷鍐叉懙濡炪們鍨洪敃銏ゅ箖閵忋垻鐭欓柛顭戝枙缁辩喐绻濆閿嬫緲閿熺獤鍛筏濞寸姴顑呯粣妤佹叏濡寧纭鹃柡瀣╃窔閹鏁愭惔鈥愁潽闂佸摜濮甸崝娆撶嵁閺嶎灔搴敆閿熻姤淇婇懖鈺冪＜闁绘﹢娼ф禒閬嶆煛鐏炵偓绀冪紒缁樼洴閹瑩顢楁担鍝勭稻闂傚倷绀侀幖顐﹀箠韫囨稑绠栭柛宀�鍋涢拑鐔兼煏婵炵偓娅嗛柛瀣閺屾稓浠﹂崜褉妲堝銈呴獜閹凤拷");
						return false;
					}
					Npc npc = SceneNpcManager.selectNpcByKey(task.getDstnpckey());
					if(npc==null){
						return false;
					}
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎喘濮婄粯鎷呴搹鐟扮闂佸憡姊瑰ú鐔笺�佸棰濇晣闁绘ê鍚�缁楀淇婇妶蹇曞埌闁哥噥鍨堕幃锟犲Ψ閳哄倻鍘介梺鍝勫暙濞村倿宕靛▎鎴炲仏婵浜壕钘壝归敐鍫燁仩閻㈩垱鐩弻锝夊煛婵犲倻浠╅梺浼欑悼閸忔ɑ淇婇幖浣哥厸濠电姴鍟▍宥夋⒒娓氾拷濞佳呮崲閹烘挻鍙忛柟缁㈠枛閻鈹戦悩鍙夊闁抽攱甯掗湁闁挎繂娲ㄩ幗鍌炴煕閵堝懎鏆ｉ柡灞剧洴閹晠骞囨担鍦殾缂傚倷鑳剁划顖滅矙閹烘梹宕叉繝闈涱儏閻愬﹦鎲告惔鈭ワ綁顢楅崟顑芥嫼闂佸搫鍊堕崕鎻掆枍閸涘瓨鐓曢柣鏃囨硾瀹撳棝鏌熼鐐効闁靛洦鍔欓獮鎺楀箻鐠哄搫绠為梻鍌欑窔濞佳囁囨导鏉戝瀭闁汇垻顣幏宄邦潩閻撳骸绫嶉梺璇″枤閺佸鐛幒鎳虫梹鎷呴崣澶婎伖闂傚倷鑳堕崢褔锝為弴銏犵９闁哄洢鍨归崙鐘绘煙鐎电啸缁炬儳鍚嬮妵鍕籍閸屾艾浠樺銈嗗竾閸ㄤ粙寮婚敓鐘插窛闁绘鐗忛妴鎰版煣缂佹澧甸柡灞剧☉閳藉宕￠悙鑼啋婵＄偑鍊栭弻銊ッ洪鐑嗘綎婵炲樊浜滃婵嗏攽閻樻彃顏ゆ俊鎻掔墦濮婃椽骞愭惔銏紭闂佺閰ｆ禍鍫曞春閵忕媭鍚嬪璺侯儏娴滃湱绱撻崒娆戝妽妞ゎ厼娲畷銏ゆ寠婢跺棙鏂�闂佸疇妫勫Λ妤呮倶閵夛妇绠鹃柛婊冨暟缁夘噣鏌℃担鍝バ㈡い鎾炽偢瀹曢亶骞囬鍡欐晨闂傚倷绀侀崯鍧楀箹椤愶箑鐤い鎰剁畱閸屻劑鏌熺紒銏犳灍闁绘挻鐟﹂妵鍕籍閸パ傛睏缂備礁顦冲▍锝夋晸閸婄噥娼愭繛鍙夌墵閹儵宕楅梻瀵哥畾闂佸綊妫跨粈浣告暜闁荤喐绮岀换妯讳繆閸洘鐓ラ悗锝傛櫇缁犳岸姊虹紒妯哄Е濞存粍绮撻弫鎾存叏閹邦剨鎷峰┑鍡欐殾闁硅揪绠戠粻濠氭偣閸ヮ亜鐨烘い鏂挎濮婅櫣鎹勯妸銉︾彚闂佺懓鍤栭幏锟�
					if (TaskDlgUtil.existTask(roleid, WinnerManager.WINNER_TASK_ID)||TaskDlgUtil.existTask(roleid, WinnerManager.WINNER_TASK_ID_ACCEPT)){
						WinnerManager.getInstance().abandonWinnerTask(roleid);
					}
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌涢幇顒�绾ч柣銈呭閳规垶骞婇柛濞у懎绶ゅù鐘差儏閻ゎ喗銇勯幇鈺侊拷褔骞忓畡閭︽僵妞ゆ帒顦版晥闂備線娼уú銈囷拷姘嵆閻涱噣骞掑Δ锟界粻锝嗙節閸偄濮冪紒杈ㄧ箞濮婄粯鎷呴懞銉ｏ拷鍐磼閿熻姤鎷呴懖婵囩☉閳规垹锟斤綆浜ｉ幗鏇㈡⒑閹稿海绠撴い锔诲灣缁鈽夊▎宥勭盎闂佸搫鍟崐鍝ユ暜鐠鸿　鏀介柍鈺佸暞閵囨繃鎱ㄦ繝鍛仩缂侇喗鐟ラ埢搴ㄥ箚瑜嶆竟澶岀磽閸屾瑦绁版い鏇嗗洦鍋嬮柟鐐墯閸ゆ洟鎮归崶褎鈻曢柛姘儔閺屾盯鍩勯崗鐙�浜敐鐐烘晸閻樻枼鎷洪柣鐔哥懃鐎氱兘宕箛娑欑厱闁绘ê纾妴鎺旂磼椤曞棛鍒伴摶鏍煕濞戝崬鏋撻柟閿嬫そ濮婃椽宕ㄦ繝鍕窗闂佺楠稿畷顒勫煝瀹ュ绠涢柣妤�鐗忛崢鍨繆閻愬樊鍎忓Δ鐘虫倐瀹曘垽骞橀鐣屽幐閻庣櫢鎷烽悗锝庡墰琚﹂梻浣筋嚃閸犳捇宕归挊澶屾殾妞ゆ劧绠戝敮閻熸粌绻樺畷銏ゅ箳閹存梹鏂�闂佺粯锕╅崑鍛垔娴煎瓨鐓曢柡鍥╁仧娴犳盯鏌ｉ妶鍕槮閾绘牠鏌ｅ锟藉褎绂掗敃鍌涚厱闁哄喛鎷烽柣鐔村劦閹箖鎮滈挊澹┾晠鏌ㄩ弬鍨挃闁伙箑鐗撳娲川婵犲倸顫呴梺鍝勬噺缁诲棝濡甸幇鏉块敜婵°倓璁查幏缁樼箾鏉堝墽绉繛鍜冪悼閺侇喖鈽夐姀锛勫弳濠殿喗顭堟禍顒�螞椤栨粎纾藉ù锝夋涧閻忊晝锟芥鍣崳锝夊蓟閺囥垹骞㈡俊銈勭濞堟姊虹拠鈥虫灍缂侇喗鎹囬獮濠囨倷閸濆嫀銊╂煏婢跺牆锟芥洜锟藉灚鐓″濠氬磼濞嗘垵濡介梺璇″枛閻栫厧鐣烽弴銏╂晬闁绘劘灏欓ˇ顕�鎮楅惂鍛婂闂佽法鍠曞Λ鍕敋閵夛妇绡�闁告洦鍘鹃敍婊冣攽閳藉棗鐏﹂柡鍛板皺閼鸿京鎷犲顔藉瘜闂侀潧鐗嗗Λ妤佹叏閿曞倹鐓曢柟鎯х摠閻ㄦ垿鏌ㄩ悢璇残撻柣鏃戝墴楠炲繘鏁撻敓锟�
					WinnerManager.getInstance().createWinnerTask(WinnerManager.WINNER_TASK_ID,roleid,npc,SpecialQuestState.UNDONE,0,task.getSumnum());//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎处缁绘繂顕ラ柨瀣凡闁跨喕濮ゅú鐔风暦椤栨稑顕遍悗娑櫭崜鐟扳攽閻愬弶顥為柟绋款煼閹�斥枎閹炬潙锟界敻鏌ｉ姀鈽嗗晱闁绘帡绠栧畷顖炲传閵壯咃紲闂佽鍨庨崘顏嗏棨缂傚倷绶￠崰妤呮偡閳轰緡鍤曞┑鐘崇閸嬪嫰鏌ｉ幘铏崳闁伙綁绠栭幃宄邦煥閸曨厾鐓夐悗瑙勬礈閺佸骞冮姀銈呯闁绘劖澹嗛惄搴ㄦ⒒娴ｇ鏆遍柟纰卞亰瀹曨垶顢曢敃锟介崒銊╂煙缂併垹鏋熼柣鎾寸懄閵囧嫰寮崶褌姹楃紓浣割槼濞咃綁鏁撻崐鐕佹綈婵炲弶鐗犻幃銉╁礂闂傚绠氶梺褰掓？缁�浣告暜闁荤喐绮岀换妯讳繆閸洘鐓ラ悗锝傛櫇缁犳岸姊虹紒妯哄Е濞存粍绮撻弫鎾存叏閹邦剨鎷峰┑鍡欐殾闁硅揪绠戠粻濠氭偣閸ヮ亜鐨烘い鏂挎濮婅櫣鎹勯妸銉︾彚闂佺懓鍤栭幏锟�
					WinnerManager.getInstance().addWinnerRole(roleid);//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤濞硷繝寮婚悢鐚存嫹閻㈡鐒鹃崯鍝ョ磽娓氬﹥瀚规繝鐢靛Т濞诧箓鎮￠妷鈺傜厽闁哄啫娴傞崵娆戞偖濮樿埖鈷戦梻鍫熺♁閹兼劙鎮楀顓熺凡妞ゆ洩缍侀獮姗�顢欓悡搴わ拷鍨攽鎺抽崐褔骞忛柨瀣ㄤ簻闊浄绲奸柇顖炴煛鐏炲墽鈽夐柍璇叉唉缁犳盯寮撮悪锟介崯瀣⒒娴ｅ憡鎯堥柣顓烆槺缁辩偞绗熼敓浠嬫偘椤曪拷瀹曞爼顢楁径瀣珜濠电偠鎻徊鍧楀箠閹捐绀堥柣銏㈡暩绾句粙鏌涚仦鍓ф噮缂佹稑绻橀弻鐔割槹鎼粹�冲箣闂佸搫鏈惄顖炵嵁閸ヮ剚顥堟繛鎴炵懅娴滃爼姊绘担铏瑰笡闁规悂绠栧畷浼村箛椤撶姭鏀虫繝鐢靛Т濞村倿寮鍡欑瘈闁割煈鍋勬慨鍥ㄧ箾閸偄骞樼紒杈ㄦ尰閹峰懘鎮烽幍顔俱偡婵＄偑鍊ら崢楣冨礂濡警鍤曞┑鐘崇閺呮悂鏌ｅΟ璇茬祷缂佹劖绋戦—鍐Χ閸℃鐟ㄩ梺绋匡工椤兘骞冮敓鐘茬缂備焦菤閹锋椽鏌ｉ悩鍙夌闁跨喎锟界喐鐝柣蹇撶墢缁辨捇宕掑姣欍垽鏌ㄩ弴妯猴拷婵嬪箖妤ｅ啯鍊婚柦妯侯樀閸炲爼姊洪崫鍕窛闁稿缍侀崺锟犲川椤旀儳寮抽梻浣告惈閸燁偊宕愰挊澶樼�堕柛娑橈梗缁诲棝鏌熺紒妯虹闁糕晪绲鹃幈銊︾節閸曨厼绗￠梺鐟板槻閹冲繒绮悢纰辨晬婵犲﹤鍟瓏闂傚倸鍊峰ù鍥х暦閻㈢闂柕澶涘椤╁弶銇勮箛鎾愁伀闁哄棴绠撻弻娑㈩敃閿濆棛顦ラ柟顖滃枛濮婃椽妫冨☉杈ㄐら梺绋块叄娴滄儼妫㈡繝銏ｅ煐閸旀牠鍩涢幒妤佺厱閻忕偛澧介幊鍛亜閿旇偐鐣甸柡宀�鍠庨湁閻庯綀鍩栫�氬綊鎮洪幒宥囧妽婵＄偘绮欏顐﹀礃椤旇偐锛滃┑顔斤供閸撴瑦绂嶉崼鏇熲拻濞达絿顭堥幃鎴犵磼娴ｈ灏︾�殿喗褰冮…銊╁椽閸愨晛顏跺┑顔斤供閸擄箓鎮℃總鍛婄厸鐎癸拷鐎ｎ剛袦閻庢鍣崜鐔风暦瑜版帩鏁婇柦妯侯檧閹风兘顢涢悙绮规嫼缂備礁顑呯亸鍛村礉閻斿吋鐓涘ù锝呭閻撹偐锟芥鍠栭…閿嬩繆閹间礁鐓涢柛灞剧煯缁ㄤ粙姊绘担渚劸闁哄牜鍓涚划娆撳箣閿旂粯鏅滈梺璺ㄥ櫐閹凤拷?
					MessageMgr.psendMsgNotifyWhileCommit(roleid, 140666, npc.getNpcID(), Arrays.asList(task.getSumnum()+"",npc.getName()));
					
					//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊鐒﹂崕鎾剁磽娴ｅ搫小闁告濞婂濠氭偄閸忓皷鎷婚柣搴ㄦ涧婢瑰﹤危椤斿墽纾藉ù锝呮惈鍟告繝娈垮枛閻忔氨绮氭潏銊х瘈闁搞儴鍩栭弲顒�鈹戦悩缁樻锭閻庢碍鎮傞獮蹇涙倻閼恒儲娅㈡繛瀵稿Т椤戝棝鎮″☉銏″�甸柨婵嗙凹缁ㄤ粙寮崼婢棃鎮╅棃娑楁勃闂佺粯顨嗗ú婵娿亹娴ｅ壊娓婚柕鍫濇闁叉粓鏌熷畡鏉挎Щ闁宠鍨块崹楣冩嚑椤掑倻鍘梻浣告惈閼活垳绮旇ぐ鎺戣摕闁靛ě宥嗗闁挎繂楠告禍婊呯棯閻愵剙鈻曟慨濠冩そ瀹曨偊宕熼鐘插Ы缂傚倸鍊哥粔宕囩矆娓氾拷椤㈡岸鏁愭径妯绘櫌闂佸憡娲﹂崑鍕倵椤撶儐娓婚柕鍫濇缁�锟介梺鐟板暱缁绘劙鍩㈤幘缁樻優闁革富鍘鹃敍婵嬫⒑缁嬫寧婀伴柣鐔濆懐椹抽煫鍥ㄧ♁閻撴瑧锟界懓瀚妯何ｆ繝姘厓閻熸瑥瀚悘鎾煙椤旇娅婃鐐存崌楠炴帒鈹戦崨顖滐紱缂傚倸鍊烽悞锕傚磿閾忣偅娅犲ù鐘差儏閸屻劎鎲搁弮鍫濈伋闁挎洖鍊搁柨銈嗕繆閵堝嫮顦︽繛鍫熺箞閹鎮介棃娑辨毉濡炪們鍔岀换鎴犵矉瀹ュ鏁傞柛顐ｇ箘閻ｅ搫鈹戦绛嬫闁归鍏橀弻鐔碱敊鐟欏嫭鐝栫紓浣介哺鐢帟鐏掗梺缁樻尭妤犲摜绮婚悙鐑樷拻闁稿本鐟х粣鏃�绻涙担鍐叉礌閿熸枻绠撳畷濂稿Ψ閵壯嶇吹闂傚倷绶￠崜娆戠矙娓氾拷瀵偊宕卞☉娆戝帾闂婎偄娲ら鍛存倶椤斿墽妫柟顖嗕礁浠梺鍝勬湰缁嬫挻绂掗敃鍌氱鐟滃危閸績鏀介柣鎰摠閸庢鏌涢悩宕囧⒌闁糕晝鍋ら獮瀣晜閼恒儲鐝梻浣告啞濞诧箓宕戦崟顖滃祦閻庯綆鍋嗙弧锟界紒鐐緲椤﹁京澹曢崸妤佺厱闊洦鏋忛幋鐐碘攳濠电姴娲﹂崐濠氭煠閹帒鍔滄繛鍛喘濮婅櫣鎹勯妸銉︾�虹紓渚囧枟閻熲晠鐛崱娑樼妞ゆ柨妲堥埡鍛厓闁告繂瀚敓鐣屾暬楠炲繒绱掑Ο鑲╊啎闁哄鐗嗘晶鐣岀矓椤掍胶绠鹃柛婊冨暟閹ジ鏌℃笟鍥ф灈闁宠棄顦～婵囨綇閳哄搴婂┑锛勫亼閸婃牕顫忚ぐ鎺戠？闁规儼妫勯悡婵嬫煕椤愵偅绶涢柟鐑筋棑閹叉挳宕熼鍌ゆК缂傚倸鍊哥粔鎾晝椤忓嫷鍤曞┑鐘宠壘楠炪垺淇婇妶鍜冨伐闁诡喗鍨垮娲川婵犱胶绻侀梺鍝ュУ缁嬫挸鈻庨姀銈咁潊闁靛牆妫岄幏缁樼箾鏉堝墽绉繛鍜冪悼閺侇喖鈽夐姀锛勫幐闁诲繒鍋犻褎鎱ㄩ崒娑辨闁绘劖鎯屽▓鏃�銇勯婊冨鐎规洜鍘ч埞鎴﹀醇濠靛棛顓洪梻浣筋嚙妤犲摜绮诲澶婄？闂侇剙鍗曢崶銊ヮ嚤閻庢稒锚娴滄姊洪崨濠傚Е闁哥姵顨婇幃锟犲礃椤旇偐楠囬梺缁樺姈濞兼瑩藟鐎ｎ偁浜滈柨鏃囧亹閻ｇ敻鏌″畝瀣瘈鐎规洖宕灒闁煎鍊ゅΣ鍓佺磽閸屾瑦绁板鏉戞憸閺侇噣鏁撻悩闈涚ウ婵犮垼娉涢惌澶愬箯閻戣姤鏅查幖绮癸拷鑼泿婵＄偑鍊曟蹇涘箯閿燂拷
					WinnerRecord record = WinnerManager.getInstance().teams.get(team.getTeamId());
					if(record!=null){
						record.setTeamScore(0);
						record.setRound(0);
						//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕婵犲倹鍋ラ柡灞诲姂瀵潙顫濋懜娈匡拷鏍ㄧ箾鐎涙鐭婄紓宥咃躬瀵鈽夐姀鐘电杸闂佺绻愰幗婊堝极閺嶎厽鈷戞繛鑼额嚙楠炴鏌熼悷鐗堝枠鐎殿喖顭烽弫鎰緞婵犲孩缍傞梻渚�娼х换鍡涘疾濠靛绀夐柟闂寸劍閳锋垿鏌﹀Ο渚Ц闁哄棛鍠栭弻娑㈡偐閺屻儱寮伴梺绯曟櫇閸嬨倝鐛�ｎ喗鏅滈柦妯侯槷濮规姊绘担鍛婂暈闁荤喆鍎佃棟濞村吋娼欑粻鏍ㄧ箾閸℃ɑ灏伴柣鎾跺枛閺岋綁寮幐搴㈠枑闂佺娅曞ú婊呮閹烘鍋愰柧蹇ｅ亜绾惧啿螖閻橀潧浠滈柛鐕佸亰閿濈偛顭ㄩ崼鐔告婵炲濮撮鍛不閺嶃劎绠鹃柛鈩兠慨鍫濃攽椤栨稒灏﹂柡灞剧洴楠炲洭濡搁敂鐣屽綗闂備浇娉曢崰鏇熸叏閵堝锟藉啯绻濋崒銈嗙稁濠电偛妯婃禍婊冾啅濠靛棌鏀介柣妯诲絻閺嗙喖鏌涘▎蹇旑棦闁哄矉绲鹃幆鏃堝閻樺弶鐦撻梻浣告啞閹搁箖宕伴弽褏鏆︽繛宸簻鍞梺鎸庢穿閹烽绱掗崜浣镐槐闁哄瞼鍠栭弻鍥晝閿熶粙鐛Δ浣虹闁告侗鍋勯悘鍙夋叏婵犲懏顏犻柟鐟板婵℃悂濡烽敂鎯х稈闂傚倷鑳堕幊鎾诲吹閺嶎厼绠柨鐕傛嫹?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫小闁告濞婂濠氭偄閸忓皷鎷婚柣搴＄仛閻℃洜绮ｅΔ鍛拺閺夌偞澹嗛ˇ锕傛倵濮樼厧澧撮柍銉閹瑰嫰濡搁敃锟界壕顖涚節闂堟稑锟藉綊寮搁懡銈嗗床婵犻潧顑呴弸渚�鏌熼柇锕�骞栫紒鍓佸仱閹鏁愭惔鈥茬凹闂佺粯绻冨ú鐔奉潖缂佹ɑ濯撮柦妯猴紞閹剧粯鐓ユ慨姗嗗幑娴滄粓鏌ㄩ弮鍥ㄧ《闁活厽鐟ч敓鍊燁潐濞叉粓寮紒妯圭箚闁兼悂娼х欢鐐烘倵閿濆簼鎮嶉柟椋庡厴瀹曞綊顢曢锝庡晬闂備胶绮崝妯间焊濞嗘劗顩烽柕蹇嬪�栭悡鏇㈡煛閸愭寧瀚圭紒鐐緲缁夌數绮氭潏銊х瘈闁搞儴鍩栭弲婵嬫⒑閹稿海绠撻悗娑掓櫊閹寧绗熼敓钘夘潖閾忚瀚氶柍銉ㄦ珪閻忓秹姊洪幐搴㈢８闁搞劌缍婇幃楣冩倻閽樺鍞堕梺鍝勬储閸斿秹寮查姀锛勭閺夊牆澧介崚浼存煙绾板崬浜伴柣娑卞櫍瀹曞ジ鎮㈤搹鍦闂備焦鐪归崹钘夘焽瑜庣粋鎺楁晝閸屾稓鍘遍梺闈涱焾閸庢娊宕洪敐澶嬬厵妞ゆ梹鍎抽崢鎾煛鐏炶姤顥滄い鎾炽偢瀹曘劑顢涢敐鍠版繂鈹戦敍鍕杭闁稿﹥鐗滈弫顕�骞掑Δ锟界壕褰掓煠婵劕锟芥洟藟濮橆兘鏀介柛灞剧矤閻掑墽绱掗悪娆忔处閻撴洘銇勯幇鍓佹偧闁宠棄顦埞鎴︽婵炲娲滃Σ鎰板箳濡や礁浜归梻鍌氱墛缁嬫劕危閹扮増鈷戦柛婵嗗閻掕法绱掗煫顓犵煓闁糕斂鍎插鍕箛椤掑偆鏀ㄩ梻浣虹帛閸旀洟顢氶掳浜归幖娣妽閻撶喖骞栧ǎ顒�鐒洪柛鐔风箻閺屾盯鎮╅崘鎻掓懙閻庢鍣崑鍛崲濠靛棭娼╂い鎺戝�婚弳顐⑩攽閻愬樊鍤熷┑顔芥尦椤㈡牠宕卞☉妯硷紱闂侀潧艌閺呮粓鎮￠弴鐔翠簻妞ゆ挾鍠庨悘銉ッ瑰鍕煁缂佺粯鐩畷銊╊敃閵忣澀鎮ｉ梻浣哥枃椤宕归崸妤�绠栭柍鍝勬噹閸ㄥ倹銇勯幇鍓佺ɑ闁伙箑閰ｅ缁樻媴娓氼垳鍔稿銈嗗灥濞差厼鐣烽幋锕�围濠㈣泛鑻粊锕傛⒑閸︻厼顣兼繝銏☆焽缁鎮烽幊濠傜秺閺佹劙宕ㄩ钘夋瀾闂備焦鐪归崐鏇灻洪妶澶婄厴闁硅揪绠戦悡锟犳煕閳╁喚娈樺ù鐘虫尦濮婃椽妫冨☉娆欑川闂佸綊顥撻崗妯侯潖濞差亜浼犻柛鏇㈡涧閸撴壆绱撴担鍓叉Ц缂傚秴锕幃浼搭敋閿熻棄顕ｆ禒瀣╅柨鏂垮⒔鑲栭梻鍌欑閹诧繝骞愰崱娑樿Е闂佸灝顑呴悘鎾煛瀹�瀣ɑ闁诡垱妫冩慨锟介柕蹇婃櫆濞堝綊鏌ｆ惔锝嗩仧闁归鍏橀弻鐔兼⒒鐎靛壊妲梺钘夊暟閸犳牠寮婚敓鐘茬倞闁宠桨鐒﹂悘渚�姊虹紒妯肩畾闁糕晜鐗犳俊鐢稿礋椤栨艾鍞ㄩ梺闈涱焾閸斿矂藟濠靛鈷戦柛婵嗗椤ユ捇鏌涢妸銊ュ惞婵″弶鍔欓獮鎺懳旀担瑙勵仧闂備椒绱徊浠嬫儗婢舵劕绠柣鎴ｅГ閺呮煡骞栫划鐟板⒉闁诲繐绉瑰铏圭磼濡鏆楅梺鍝ュУ閻楃娀鎮伴锟藉浠嬧�栭妷銉╁弰妞ゃ垺顨婇弫鎾寸鐎ｎ偅娅㈡繝娈垮枟閸旀洟鏁撻懞銉︾闁炽儻绠撳畷鍫曨敆閿熺晫绮诲☉娆嶄簻闁规崘娉涘暩闂佷紮绠戦悧鎾愁潖閾忚宕夐柕濞垮劜閻庤櫣绱撴笟鍥ф灍闁荤喆鍎甸幃楣冩倻閼恒儱锟借崵绱掑☉姗嗗剱闁哄拑缍佸铏圭磼濮楀棛鍔烽梺杞扮劍閹倸顕ｉ幎钘壩ㄩ柍鍝勫�甸幏缁樼箾鏉堝墽瀵奸悹锟介敃鍌涘�垮Δ锝呭暞閻撴盯鏌涢顐簻濠⒀冾嚟閿熷�燁潐濞叉ê顪冮挊澶屾殾婵鎷锋い銏＄懇閹剝鎯旈埄鍐惧悋闂傚倷鑳堕幊鎾诲触鐎ｎ喗鍋╂い蹇撶墕缁�澶岋拷骞垮劚椤︿即宕戦崒鐐寸厪濠㈣埖绋戦々顒傜磼閻樿崵鐣洪柡宀�鍠撻敓鐣屾暬閺呰尙妲愰搹顐犱簻闊洦鎸炬晶閬嶆煛娴ｇ锟藉綊濡甸崟顔剧杸闁规崘娉涢·锟介梻浣虹帛閹搁箖宕伴弽顓炶摕闁靛鍎弨浠嬫煕閳撅拷閺呮粌鏆╅梻鍌欒兌椤㈠﹦浜稿▎鎾崇；闁规崘顕х粻鐐烘煏婵犲繐顩紒鈽呮嫹闂備胶顭堢悮顐﹀磹濡ゅ懎瑙﹂悗锝庡枟閸婄敻鎮峰▎蹇擃仾缂侊拷閸愵喗鐓ラ柡鍥悘鏌ユ煏閸℃洜绐旂�殿噮鍣ｅ畷鐓庘攽閸偅效濠碉紕鍋戦崐鏍暜閹烘纾诲┑鐘叉搐缁狀垶鏌ｉ幋锝呅撻柟顖滃仱閺屾盯鏁傜拠鎻掔闂佹寧绋掔换鍐崲濞戞瑦缍囬柛鎾楀惙鎴︽⒑閹肩偛濡界紒璇茬墕閻ｇ兘濡烽埡濠冩櫇闂佹寧姊婚弲顐﹀储闁秵鐓熼幖鎼灣缁夌敻鏌涢幘瀵告噭缂佸倹甯熼ˇ瀵哥磼鏉堛劌娴い銏＄懇閹稿﹥寰勬繝鍐╁殘闂傚倷绀侀幖顐︽嚐椤栨娑樜旈崪浣规櫍婵犻潧鍊婚…鍫濐啅濠靛洢浜滈柡宥冨姀婢规﹢鎳栭弽顓熲拻闁稿本鑹鹃敓浠嬵棑缁牊绗熼敓浠嬬嵁婢舵劖鏅搁柣妯垮皺椤︻厼顪冮妶鍡楃瑨閻庢凹鍓欓蹇撯攽閸ャ儰绨婚梺鍝勭Ф閺佸摜绮欓懡銈嗗仏闁跨噦鎷�
						WinnerManager.getInstance().removeLastTeamidAddNew(record,roleid);
					}
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簻椤掋垺銇勯幇顏嗙煓闁哄被鍔戦幃銏ゅ传閸曟垯鍨婚惀顏堝箚瑜滈悡濂告煛鐏炲墽鈽夐柍钘夘樀瀹曪繝鎮欓幓鎺濆妧濠电姷鏁搁崑娑㈡儍閻戣棄鐤鹃柣妯款嚙閽冪喖鏌￠崶鈺佹灁缂佺娀绠栭弻锝夊箛闂堟稑顫梺缁樼箖濞茬喎顫忛搹鍦煓婵炲棙鍎抽崜浼存⒑缁嬪尅宸ユ繛灏栵拷鎰佸殨濠电姵鑹炬儫闂佸啿鎼崐鍛婄濠婂牊鈷戦柛娑橈功缁犳捇鎮楀顒佸殗闁轰焦鍔栧鍕拷锝庡墮鐢姊婚崒娆戭槮闁诲繑绻堥、鏍幢濡ゅ啯娈鹃悗鐧告嫹闁告洦鍓涢崢鎼佹倵閻у憡瀚归柣搴秵閸撴稖鈪甸梺璇插椤旀牠宕抽锟藉畷鎶芥晲閸涱垱娈炬繝闈涘�搁幉锟犲磻閸曨垱鐓曟繛鎴烇公閺�缁樸亜閺傝法绠绘慨濠傤煼瀹曟帒鈻庨幋顓熜滈梻浣侯攰婵倗鍒掑澶婄濠电姴娲ょ粻缁樸亜閺冨洤浜规い鏂挎濮婅櫣鎹勯妸銉︾彚闂佺懓鍤栭幏锟�
					xbean.Properties prop=xtable.Properties.select(roleid); 
					List<Long> teamMembers = team.getNormalMemberIds();
					for (Long mem : teamMembers) {
						WinnerManager.clearActiveTeamWinnerScore(mem);//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊鐒﹂崕鎾剁磽娴ｅ搫小闁告濞婂濠氭偄閸忓皷鎷婚柣搴ㄦ涧婢瑰﹤危椤斿墽纾藉ù锝呮惈鍟告繝娈垮枛閻忔氨绮氭潏銊х瘈闁搞儴鍩栭弲顒�鈹戦悩缁樻锭閻庢碍鎮傞獮蹇涙倻閼恒儲娅㈡繛瀵稿Т椤戝棝鎮″☉銏″�甸柨婵嗙凹缁ㄤ粙寮崼婢棃鎮╅棃娑楁勃闂佺粯顨嗙划鎾崇暦濮樿泛绠虫俊銈勭娴狀參姊虹憴鍕靛晱闁哥姵鐗犻悰顕�鏁撴禒瀣拻闁稿本鐟ч崝宥夋煕鎼达紕锛嶉柟骞垮灩铻栭柛婊冨暟缁嬪繑绻濋姀锝嗙【闁活厼顦甸獮蹇撶暋闁附鍍靛銈嗘尵閸嬫盯骞楅悽鍛娾拺闁告繂瀚悘閬嶆煕閻樿櫕灏垫俊鍙夊姍楠炴帡骞婂畷鍥ф瀻閻撱倖銇勮箛鎾愁仾闁哄棭浜滈埞鎴︽偐閼碱剚顥夐梺鍝勵槸鐏忓懘骞忛悜钘夊嵆闁靛繒濮烽悿鍥椤愩垺澶勭紒瀣灴閹繝寮撮姀锛勫幍闂佺粯鍨堕敃鈺佲枔閺囥垺鐓熼柟鎯х摠缁�鍐煏閸パ冾伃妤犵偛娲畷婊勬媴閻熼杩橀梻鍌欑閻ゅ洤螞閸曨垁鍥偨缁嬭儻鎽曢梺鎸庣箓閻楀繘鎮块敓浠嬫⒑閹稿海绠撻悗姘煎櫍瀹曟瑩宕烽鐘碉紳婵炶揪缍�濞咃絿鏁☉姘辩＜閻犲洩灏欐晶娑㈡煙娓氬灝濮傞柡浣规尰缁傛帞锟斤綆鍋嗛崢鎾绘⒑閼恒儍顏埶囨导鏉戝惞闁跨喍绮欏铏规崉閵娿儲鐏嗗┑鈽嗗亜鐎氼剟鈥﹂崶顒佹櫢闁绘灏幗鏇㈡⒑缂佹ɑ鈷掗柍宄扮墦瀵偄顓奸崱妯哄伎濠殿喗顨呭Λ妤佹櫠椤栨稓绠鹃柛顐ｇ箥閻撳ジ鏌熼绛嬫畼闁瑰弶鎸冲畷鐔碱敆閸屻倖肖闂傚倷绀侀幗婊勬叏閻㈠憡鍋嬮柣妯款嚙杩濇繛杈剧悼绾泛危閸喍绻嗘い鏍ㄦ皑缁犳壆绱撳鍜冭含妤犵偛锕ら…銊╁醇濠靛棛锟筋厼顪冮妶鍡楀闁稿鍊曞嵄妞ゆ帒瀚埛鎺楁煕鐏炲墽顣查柟鍏煎姈閵囧嫰鏁傞悙顒佹瘓閻庢鍠栭…鐑藉极閹邦厼绶炲┑鐘插閸熷姊绘担鐟板姢婵炲瓨宀稿畷鎴﹀川椤撶姵娈鹃梺瑙勫劶婵倝鎮″☉姘炬嫹楠炲灝鍔氱紒缁樺笧瀵囨晸閽樺鏀芥い鏃傘�嬮弨缁樹繆閻愭壆鐭欓柣娑卞櫍瀵粙顢橀悢鍑ゆ嫹閻戣姤鐓欑紓浣姑穱顖炴煟鎼达紕鎽犵紒缁樼箓閳绘捇宕归鐣屼憾闂佺厧鐏曢崶銊у幈闂佸搫鍊稿锟狀敁濡ゅ懎纭�闂侇剙绉甸悡娆撴煙濞堝灝鏋涙い锝呫偢閺岋繝宕ㄩ钘夛拷鎰版煛鐏炶濮傞柟顔哄�濆畷鎺戔槈濮楀棔绱�?
						MessageMgr.sendMsgNotify(mem, 170019, Arrays.asList(prop.getRolename()));
					}
					WinnerManager.logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌涢幇顒�绾ч柣銈呭閳规垶骞婇柛濞у懎绶ゅù鐘差儏閻ゎ喗銇勯幇鈺侊拷褔骞忓畡閭︽僵妞ゆ帒顦版晥闂備線娼уú銈囷拷姘嵆閻涱噣骞掑Δ锟界粻锝嗙節閸偄濮冪紒杈ㄧ箞濮婄粯鎷呴懞銉ｏ拷鍐磼閿熻姤鎷呴懖婵囩☉閳规垹锟斤綆浜ｉ幗鏇㈡⒑閹稿海绠撴い锔诲灣缁鈽夊▎宥勭盎闂佺懓鎼粔鍫曞礉瀹ュ鐓曢幖娣灪鐏忕數绱掓潏銊﹀鞍缂佹鍠愮换婵嬪礃椤垳绱﹂梻鍌氬�风粈渚�骞夐敓鐘茬闁挎洖鍊哥粣妤佷繆閵堝懏鍣洪柛瀣�块弻锝夊籍閸喐鐝崇紓浣筋嚙濡瑩濡甸崟顖氬唨闁靛ě鍜佸悑闂備焦鎮堕崐鏍偡瑜忓Σ鎰板箳濡わ拷缁犵敻鏌熼悜妯肩畼闁告艾顑夊娲传閸曨厾鍔圭紓浣虹帛缁诲倿鎮鹃悜钘壩╅柍鍝勶攻閺呫垽姊虹粙鎸庢拱缂侇喖閰ｅ畷銏ゎ敍閻愮补鎷绘繛杈剧悼閻℃棃宕甸崘顔界厱闁绘ê纾晶杈╃磼鏉堚晛浠︾紒缁樼箞瀹曟帒顭ㄩ崟顒夊晭闂傚倷绀佹竟濠囧磻閸涱劶娲冀閵娿儱濮呴梻鍌氬�烽悞锔撅拷绗涘喚娼栧┑鐘崇閹偤骞栫划鐟扮伋闁挎繂顦柋鍥煛閸モ晛鏆遍柟椋庣帛缁绘稒娼忛崜褍顕遍柣鐙呮嫹闁挎洖鍊归崐鍨旈敐鍛殲闁绘挾鍠栭弻锝夊即濮橆収妯傞梻渚囧弾閸ㄦ娊鏁撻崐鐕佹綈婵炲弶绮撳畷浼村冀椤撴粣鎷锋担鑲濈喎鈻庨悙顑亞绱撻崒娆愵樂缂佽绻濆畷鎴炵節閸屻倖缍庡┑鐐叉▕娴滄繈宕甸幒妤佺厪闁割偅绻冮崯妤呮煏韫囥儳纾跨紒鐘荤畺閹綊宕堕崶褎鍣介柡鍡愬灲濮婃椽妫冨☉娆忣槱闂佸憡姊归悷銉╂偩瀹勯偊娼ㄩ柨鐔剁矙閵嗕礁顫濈捄鍝勮�垮┑鐐叉閸ㄧ喎螞閵娾晜鈷掗柛灞剧懅缁愭梹绻涙担鍐叉处閸嬪鏌涢埄鍐巢闁搞儯鍔岄閬嶆倵濞戞顏呯濡ゅ懏鈷戦梻鍫熶緱濡狙冣攽閳ヨ櫕宸濈紒顔剧帛閵堬綁宕橀埡鍐ㄥ箥闂佽娴烽弫鎼佲�﹂崼銉︽櫢闁兼亽鍎虫晶鍨殽閻愬樊鍎忛柍瑙勫灴楠炴﹢鎯傞崨濠傤伓闂佸壊鐓堥崯鏃囥亹閹烘挸浜楅柟鑹版彧缁查箖骞夋總鍛娾拺缂備焦蓱鐏忕増绻涢懠顒�鏋涚�殿喖顭峰鎾偄閾忓湱妲囬梻濠庡亜濞诧箑煤濠婂牆姹查柣妯肩帛閳锋垿鏌涘☉姗堝姛缂佺姵纰嶇换娑㈠椽閸愵亞袦闂佽桨鐒﹂幑鍥х暦閹扮増鍋嗗ù锝呮贡缁夐攱绻濋悽闈涗沪缂佷焦鎸冲鏌ユ偐閼姐倕绁﹂棅顐㈡处缁嬫帡寮查幖浣圭叆闁绘洖鍊圭�氾拷?");
				}else{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌涢幇顖氱处闁汇垹顭峰缁樻媴閻熼偊鍤嬪┑鐐插级閻楃姴鐣烽幇顖樹汗闁圭儤鍨归敍娑㈡煟鎼搭垳绉甸柛瀣�婚幑銏ゅ幢濞戞瑧鍘梺鍓插亝缁诲啴宕宠ぐ鎺撶厸闁糕剝鐟ラ弸娑㈡煛瀹�瀣М妞ゃ垺锕㈤幃銏㈢矙鐠侯煈鏆″┑锛勫亼閸娿倖绂嶅鍫濈柈濞寸厧鐡ㄩ弲鎼佹煛閸屾ê锟芥绮旈棃娴㈢懓顭ㄩ崟顓犵杽濡ょ姷鍋為崹鍧楀极閹版澘鐐婇柍鍝勫亰缁憋繝姊绘担绛嬪殐闁搞劌瀛╅幏鍛存⒐閹邦剙鐏婇梻鍌氬�风粈渚�骞栭锔藉剹濠㈣泛鐬肩粈濠偯归敐鍛棌闁搞倖娲橀妵鍕箳閹存繍浠奸梺鎼炲妼閸婂綊濡甸崟顖氬嵆闁绘劖娼欏▍銈呪攽閻愯尙澧㈤柛搴涘�栫粚杈ㄧ節閸ャ劌锟介攱銇勮箛鎾愁伒闁归鍏樺鎾偐閸愭彃绨ラ梻浣哥秺閸嬪﹪宕滃☉銏犳辈闁挎柨顫曟禍婊堟煙閻戞ê鐏ユい蹇ｄ簽缁辨帡鎮╅崘鍙夎癁濠殿喖锕︾划顖炲箯閸涘瓨鎯為柣鐔稿椤愬ジ姊哄ú璁崇盎妞わ妇鏁婚獮鍐亹閹烘挻娅㈡繛瀵稿Т椤戝棝寮插┑瀣厱閻忕偞宕樻竟姗�鏌熼婊冧粶闁宠鍨块幃娆撳矗婢舵ɑ顥ｇ紓鍌欐祰椤曆兾涘┑鍡╁殨闁靛ň鏅滈崵宥夋煏婢舵稓瀵肩紒銊ヮ煼濮婃椽宕崟顒�绐涢梺绋款儑閸嬨倛妫㈤梺缁樺姉閸庛倝宕愰崹顐ｅ弿婵☆垳鍘ф禍楣冩倵濮樼偓瀚�
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簻椤掋垺銇勯幇顏嗙煓闁哄被鍔戦幃銏ゅ传閸曟垯鍨婚惀顏堝箚瑜滈悡濂告煛鐏炲墽鈽夐柍钘夘樀瀹曪繝鎮欓幓鎺濆妧濠电姷鏁搁崑娑㈡儍閻戣棄鐤鹃柣妯款嚙閽冪喖鏌￠崶鈺佹灁缂佺娀绠栭弻锝夊箛闂堟稑顫梺缁樼箖濞茬喎顫忛搹鍦煓婵炲棙鍎抽崜浼存⒑缁嬪尅宸ユ繛灏栵拷鎰佸殨濠电姵鑹炬儫闂佸啿鎼崐鍛婄濠婂牊鈷戦柛娑橈功缁犳捇鎮楀顒佸殗闁轰焦鍔栧鍕拷锝庡墮鐢姊婚崒娆戭槮闁诲繑绻堥、鏍幢濡ゅ啯娈鹃悗鐧告嫹闁告洦鍓涢崢鎼佹倵閻у憡瀚归柣搴秵閸撴稖鈪甸梺璇插椤旀牠宕抽锟藉畷婊堟偄妞嬪孩娈鹃悷婊呭鐢晠寮繝鍥ㄧ參婵☆垯璀﹀褔鏌熸搴″幋妞ゃ垺绋戦～婵嬫晲閸℃ɑ婢戝┑锛勫亼閸婃牕煤閺嶎灛娑樷槈濮樿京鐓嬮梺鍓插亝濞叉﹢鎮″▎鎾寸厱闁瑰瓨鐟ラ敓鑺ョ墱閿熻姤鐔幏锟�
					xbean.Properties prop=xtable.Properties.select(roleid); 
//					long teamleadid=team.getTeamLeaderId();
//					MessageMgr.sendMsgNotify(teamleadid, 160449, Arrays.asList(prop.getRolename()));
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簻椤掋垺銇勯幇顏嗙煓闁哄被鍔戦幃銏ゅ传閸曟垯鍨婚惀顏堝箚瑜滈悡濂告煛鐏炲墽鈽夐柍钘夘樀瀹曪繝鎮欓幓鎺濆妧濠电姷鏁搁崑娑㈡儍閻戣棄鐤鹃柣妯款嚙閽冪喖鏌￠崶鈺佹灁缂佺娀绠栭弻锝夊箛闂堟稑顫梺缁樼箖濞茬喎顫忛搹鍦煓婵炲棙鍎抽崜浼存⒑缁嬪尅宸ユ繛灏栵拷鎰佸殨濠电姵鑹炬儫闂佸啿鎼崐鍛婄濠婂牊鈷戦柛娑橈功缁犳捇鎮楀顒佸殗闁轰焦鍔栧鍕拷锝庡墮鐢姊婚崒娆戭槮闁诲繑绻堥、鏍幢濡ゅ啯娈鹃悗鐧告嫹闁告洦鍓涢崢鎼佹倵閻у憡瀚归柣搴秵閸撴稖鈪甸梺璇插椤旀牠宕抽锟藉畷鎶芥晲閸涱垱娈炬繝闈涘�搁幉锟犲磻閸曨垱鐓曟繛鎴烇公閺�缁樸亜閺傝法绠绘慨濠傤煼瀹曟帒鈻庨幋顓熜滈梻浣侯攰婵倗鍒掑澶婄濠电姴娲ょ粻缁樸亜閺冨洤浜规い鏂挎濮婅櫣鎹勯妸銉︾彚闂佺懓鍤栭幏锟�
					List<Long> teamMembers = team.getNormalMemberIds();
					for (Long mem : teamMembers) {
						MessageMgr.sendMsgNotify(mem, 160449, Arrays.asList(prop.getRolename()));
					}
					
				}
				return true;
			}
			
		}.submit();
		
		
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 795484;

	public int getType() {
		return 795484;
	}

	public int acceptflag; // 0表示取消    1表示接受

	public CWinnerChangeTask() {
	}

	public CWinnerChangeTask(int _acceptflag_) {
		this.acceptflag = _acceptflag_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(acceptflag);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		acceptflag = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CWinnerChangeTask) {
			CWinnerChangeTask _o_ = (CWinnerChangeTask)_o1_;
			if (acceptflag != _o_.acceptflag) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += acceptflag;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(acceptflag).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CWinnerChangeTask _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = acceptflag - _o_.acceptflag;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

