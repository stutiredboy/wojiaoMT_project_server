
package fire.pb.team.teammelon;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CTeamRollMelon__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CTeamRollMelon extends __CTeamRollMelon__ {
	@Override
	protected void process() {
		// protocol handle
		
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		mkdb.Procedure teamrollmelon = new mkdb.Procedure() 
		{
			@Override
			/*闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柛銊ュ�歌灃闁挎繂鎳庨弳娆戠磼閻樺磭鈽夐棁澶愭煥濠靛棙鍣洪悹鎰剁磿缁辨帞锟斤絺鏅為崗宀�绱掓潏銊﹀磳鐎规洘甯掗～婵嬵敆婵犲啫顏堕梺缁樺灱婵倝宕愰崸妤佺叆闁哄洨鍋涢敓鐣屾暬閺佹捇寮妶鍥╂殼閻庤娲栭悥濂稿春閿熺姴绀冪憸蹇涙偡濠靛棌鏀介幒鎶藉磹瑜忓濠冪鐎ｎ亞鏌堝銈嗙墱閸嬬偤宕戦崒鐐寸厪濠㈣泛妫欏▍鍡涙煟閹捐泛鏋涢柡宀嬬節瀹曟帒顫濋崣妯挎婵＄偑鍊х徊鐐箾婵犲洤钃熼柨婵嗩樈閺佸洭鏌ｉ弮鍌氬妺闁革絼鍗冲娲传閸曨偒妲甸梺璺ㄥ枙濡嫮澹曢銏犳辈闁糕剝绋掗崐鐢告煥濠靛棝顎楀褌鍗抽弻锝夋晝閿熶粙鎮ч幘鎰佹綎闁绘垶蓱婵粓鏌熷▓鍨灈濠碘�茬矙濮婅櫣鎲撮崟顓熸啓閻庤娲滈弫鎼佸礆閹烘棑鎷烽敐搴℃灈缂佺姵濞婇弻锟犲礃閳哄倸闉嶉柣搴㈣壘缂嶅﹪寮婚妸銉㈡斀闁糕剝渚楅敓鑺ヮ殔闇夋繝濠傚缁犳牜绱掔紒妯兼创鐎规洏鍔戦、娆撳礈瑜忛崢婊勭節濞堝灝鏋涢柨鏇樺妼閳诲秹鏁愭径濠勵槺闂佸搫绋侀崢濂稿础閹惰姤鐓熼柟閭﹀幘閵堟挳鏌熼弸顐拷婵嗩潖缂佹ɑ濯撮柛娑橈工閺嗗牆鈹戦纭峰伐婵狅拷闁秴鏋佹い鏇嫹闁诡喗鐟╅幃婊兾熼悜妯兼瀫闂備礁鎼ˇ顖炴偋閸曨垰绀夐幖杈剧到婵剟鏌ㄩ悢缁橆棄闁宠鍨块、娆撳棘閵堝嫮杩旈梻浣告啞钃遍柟顔煎�块悰顔跨疀閹句焦妞介、鏃堝川椤忓懎顏归梻鍌欑閹诧紕绮欓幋锔芥櫇闁挎洖鍊搁悡鈥愁熆閼搁潧濮堥柣鎾卞劦閺岋繝宕堕張鐢电泿濡炪倐鏅╅崜娑氭閹烘鏁婄痪鎷屼含閸氬螖閻橀潧浠︽い顓炴川濡叉劙骞掗幊宕囧枛閹喚锟芥稒锚椤忓爼姊洪崜鑼帥闁稿鎳樺畷锝堢疀閺傚墽绠氬銈嗙墬缁瞼鏁崼鏇熷仺妞ゆ牗姘ㄩ崺锝夋煛瀹�瀣？闁跨喐鏋荤徊濠氬礉瀹�鍕櫢闁兼亽鍎崇粻鐐碉拷娈垮枦椤曆囧煡婢舵劕顫呴柍銉ュ帠濮规姊洪懡銈呅㈡繛澹洤绀冪憸蹇涙儗濡ゅ懏鈷掗柛灞剧懄椤﹂绱掓鏍ф灓缂佽京鍋ゅ畷鍫曞煛閸屻倖缍楅梻浣告惈濞层劍鎱ㄩ幘顔煎瀭婵犻潧顑嗛悡鏇熴亜閹邦喖孝闁诲浚鍣ｉ弻锝夘敇閻戝棙楔缂備浇椴哥敮鎺楁偩濠靛牞鎷烽敐搴′簻妞ゅ骏鎷� by changhao*/
			protected boolean process()
			{	
				xbean.Properties roleprop = xtable.Properties.select(roleid);
				
				Long battlemelonid = xtable.Roleid2battlemelonid.select(roleid);
				if (battlemelonid == null)
				{
					psend(roleid, new fire.pb.team.STeamError(fire.pb.team.TeamError.SelfNotInTeam));
					fire.pb.team.TeamManager.logger.debug("CTeamRollMelon: "+roleid);
					return true;					
				}
				
				xbean.ETeamMelon eteammelon = xtable.Battlemelonid2melon.get(battlemelonid);
				if (eteammelon == null)
				{
					psend(roleid, new fire.pb.team.STeamError(fire.pb.team.TeamError.SelfNotInTeam));
					fire.pb.team.TeamManager.logger.debug("CTeamRollMelon:婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁诡垎鍐ｆ寖缂備緡鍣崹鎶藉箲閵忕姭妲堥柕蹇曞Х椤撴椽姊虹紒妯哄闁诲繑宀稿畷瀹狀槾缂佽鲸鎸婚幏鍛矙濞嗙偓娈洪梻浣侯焾椤戝啴宕愬┑鍡╁殨閻犲洦绁村Σ鍫ユ煏韫囨洖顫嶉柕濠忚礋娴滄粓鏌￠崘銊ワ拷鍝ユ暜閼哥偣浜滄い鎰枑濞呭洨绱掓潏銊﹀鞍缂佹鍠愮换婵嬪礃椤垳绱﹂梻鍌氬�风粈浣圭珶婵犲洤纾婚柛鈩冪☉缁愭鏌熼幑鎰【濠殿噮鍓熼弻銊╂偄閸撲胶鐓撳┑顔硷工椤嘲鐣烽幒鎴僵闁告鍎愰弶鍝ョ磽閸屾瑧顦︽い鎴濇閺侇噣鏁撻悩鍙夌�悗骞垮劚椤︻垳鐚惧澶嬬厱妞ゆ劑鍊曢弸鏃堟煕濮楋拷缁犳牕顫忓ú顏勪紶闁告洖鐏氭瓏婵犵數鍋涢ˇ鏉棵哄Ο鑲╃焿闁圭儤顨呴～鍛存煏閸繃锛嶆慨濠冨缁绘繈濮�閿濆懐鍘梺鍛婃⒐閻楃娀骞冮敓鐘参ㄩ柨鏂垮⒔閻﹀牓姊婚崒姘卞缂佸甯¤棢闁绘劗鍎ら悡鏇㈡煥濠靛棙顥為柕鍥ㄧ箞閺岀喖顢欓懖鈺冃ㄥΔ鐘靛仜濞差厼鐣峰鍕闁惧繗顫夐～灞解攽閻樻剚鍟忛柛鐘崇墵閺佸啴濡舵径鍡嫹閿曪拷閻ｏ繝骞嶉鑺ヮ啎闂備胶绮濠氬煕閸儱鏋侀柛鎰靛枟閻撳繘鐓崶褝鏀绘繛鍛暟缁辨帗娼忛妸锔绘濠殿喖锕︾划顖炲箯閸涙潙宸濆┑鐘插暙閸撻潧鈹戦悩顔肩伇婵炲绋戠叅妞ゆ挶鍨归弸渚�鏌熼崜褏甯涢悗鐢靛Т椤法鎹勯搹鍦姽缂備浇浜崑銈咁潖濞差亜浼犻柛鏇ㄥ墻濡垿姊虹粙鍖℃敾闁绘濮垫穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑鎯堥崟顖涒拺缂佸瀵у﹢浼存煠閸︻厼浜剧紒鍌涘笒椤粓鏁撻挊澶樻綎闁绘垶蓱婵粓鏌熷▓鍨灕缂佹劖顨嗙换娑氾拷娑欘焽閻倕霉濠婂簼绨绘い鏇稻缁绘繂顫濋鈹炬櫊閺屽秹宕崟顐嫹閸涘﹦顩叉繝濠傜墛閳锋垿鏌涘☉姗堝姛缂佺姵鎹囬幃妤�顫濋浣告畻闂佽桨鐒﹂崝鏍ь嚗閸曨叏鎷烽敐搴″妤犵偞顨婂缁樻媴缁涘缍堥梺绋垮婵炲﹪骞冨ú顏勎╃憸蹇涙儗閸℃稒鐓曢柟鏉垮悁缁ㄧ晫鐥幑鎰汗缂佽鲸鎸婚幏鍛嫚閿涘嫬濮烘繝鐢靛仦瑜板啴顢氶銏℃櫢闁稿﹦鍣ュ鎰箾閸欏澧柣锝囧厴椤㈡宕橀鍐焻闂傚倸鍊搁…顒勫磻閸曨個褰掑礋椤撶偟绛忔繝闈涘�搁幉锟犳倿閼恒儯浜滈柡宥庡亜娴狅箓鏌ｉ幘瀵告噭闁靛洤瀚板顕�鏁撴禒瀣嚑濠电姵纰嶉崵锟介梺绉嗗嫷娈曢柣鎾寸懄閵囧嫰寮崶鑸电秷濠电偛鎳庡ú銊ф閹烘挻缍囬柕濞垮劤閻熴劑鏌ф导娆戠М闁哄矉缍侀獮姗�骞庣粵瀣舵嫹濡ゅ啰纾奸柣姗�娼ф禒杈ㄦ叏婵犲偆鐓肩�规洘甯掗埢搴ㄥ箣閻橀潧搴婂┑鐘垫暩閸嬫﹢宕犻悩璇茬倞闁挎繂绻戠�氬綊鏌ㄩ弴鐐诧拷鎼佹煁閸ヮ剚鐓忓璺虹墕閸斻倝鏌ㄥ☉姘灈婵﹤鎼晥闁搞儜鍛磿婵＄偑鍊ら崢濂告偋閹捐绠氶悘鐐跺▏閺冨牆宸濇い鏃�鍎抽獮鍫ユ⒒娴ｅ憡鎯堟繛灞傚灲瀹曟繂鐣濋崟顒�锟藉爼鏌ㄩ悢鍝勑ｉ柣鎾跺枛閺岀喖骞嗚閸ょ喖鏌曢崱妯烘诞闁哄被鍔戦幃銏ゆ倻濡崵褰ф繝鐢靛仜閹冲矂宕规禒瀣祦闊洦绋掗崐濠氭煠閹帒鍔氶柨鐔烘櫕閺佸寮婚妸銉㈡斀闁糕剝渚楅敓鑺ヮ殔闇夋繝濠傚閻鏌曢崶褍顏紒鐘崇洴婵＄兘鏁冮敓浠嬵敂閿燂拷?"+roleid);
					return true;					
				}
				
				xbean.TeamMelon teammelon = eteammelon.getMelonid2melons().get(melonid);
				if (teammelon == null)
				{
					psend(roleid, new fire.pb.team.STeamError(fire.pb.team.TeamError.SelfNotInTeam));
					fire.pb.team.TeamManager.logger.debug("CTeamRollMelon:婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁诡垎鍐ｆ寖缂備緡鍣崹鎶藉箲閵忕姭妲堥柕蹇曞Х椤撴椽姊虹紒妯哄闁诲繑宀稿畷瀹狀槾缂佽鲸鎸婚幏鍛矙濞嗙偓娈洪梻浣侯焾椤戝啴宕愬┑鍡╁殨閻犲洦绁村Σ鍫ユ煏韫囨洖顫嶉柕濠忚礋娴滄粓鏌￠崘銊ワ拷鍝ユ暜閼哥偣浜滄い鎰枑濞呭洨绱掓潏銊﹀鞍缂佹鍠愮换婵嬪礃椤垳绱﹂梻鍌氬�风粈浣圭珶婵犲洤纾婚柛鈩冪☉缁愭鏌熼幑鎰【濠殿噮鍓熼弻銊╂偄閸撲胶鐓撳┑顔硷工椤嘲鐣烽幒鎴僵闁告鍎愰弶鍝ョ磽閸屾瑧顦︽い鎴濇閺侇噣鏁撻悩鍙夌�悗骞垮劚椤︻垳鐚惧澶嬬厱妞ゆ劑鍊曢弸鏃堟煕濮楋拷缁犳牕顫忓ú顏勪紶闁告洖鐏氭瓏婵犵數鍋涢ˇ鏉棵哄Ο鑲╃焿闁圭儤顨呴～鍛存煏閸繃锛嶆慨濠冨缁绘繈濮�閿濆懐鍘梺鍛婃⒐閻楃娀骞冮敓鐘参ㄩ柨鏂垮⒔閻﹀牓姊婚崒姘卞缂佸甯¤棢闁绘劗鍎ら悡鏇㈡煥濠靛棙顥為柕鍥ㄧ箞閺岀喖顢欓懖鈺冃ㄥΔ鐘靛仜濞差厼鐣峰鍕闁惧繗顫夐～灞解攽閻樻剚鍟忛柛鐘崇墵閺佸啴濡舵径鍡嫹閿曪拷閻ｏ繝骞嶉鑺ヮ啎闂備胶绮濠氬煕閸儱鏋侀柛鎰靛枟閻撳繘鐓崶褝鏀绘繛鍛暟缁辨帗娼忛妸锔绘濠殿喖锕︾划顖炲箯閸涙潙宸濆┑鐘插暙閸撻潧鈹戦悩顔肩伇婵炲绋戠叅妞ゆ挶鍨归弸渚�鏌熼崜褏甯涢悗鐢靛Т椤法鎹勯搹鍦姽缂備浇浜崑銈咁潖濞差亜浼犻柛鏇ㄥ墻濡垿姊虹粙鍖℃敾闁绘濮垫穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑鎯堥崟顖涒拺缂佸瀵у﹢浼存煠閸︻厼浜剧紒鍌涘笒椤粓鏁撻挊澶樻綎闁绘垶蓱婵粓鏌熷▓鍨灕缂佹劖顨嗙换娑氾拷娑欘焽閻倕霉濠婂簼绨绘い鏇稻缁绘繂顫濋鈹炬櫊閺屽秹宕崟顐嫹閸涘﹦顩叉繝濠傜墛閳锋垿鏌涘☉姗堝姛缂佺姵鎹囬幃妤�顫濋浣告畻闂佽桨鐒﹂崝鏍ь嚗閸曨叏鎷烽敐搴″妤犵偞顨婂缁樻媴缁涘缍堥梺绋垮婵炲﹪骞冨ú顏勎╃憸蹇涙儗閸℃稒鐓曢柟鏉垮悁缁ㄧ晫鐥幑鎰汗缂佽鲸鎸婚幏鍛嫚閿涘嫬濮烘繝鐢靛仦瑜板啴顢氶銏℃櫢闁稿﹦鍣ュ鎰箾閸欏澧柣锝囧厴椤㈡宕橀鍐焻闂傚倸鍊搁…顒勫磻閸曨個褰掑礋椤撶偟绛忔繝闈涘�搁幉锟犳倿閼恒儯浜滈柡宥庡亜娴狅箓鏌ｉ幘瀵告噭闁靛洤瀚板顕�鏁撴禒瀣嚑濠电姵纰嶉崵锟介梺绉嗗嫷娈曢柣鎾寸懄閵囧嫰寮崶鑸电秷濠电偛鎳庡ú銊ф閹烘挻缍囬柕濞垮劤閻熴劑鏌ф导娆戠М闁哄矉缍侀獮姗�骞庣粵瀣舵嫹濡ゅ啰纾奸柣姗�娼ф禒杈ㄦ叏婵犲偆鐓肩�规洘甯掗埢搴ㄥ箣閻橀潧搴婂┑鐘垫暩閸嬫﹢宕犻悩璇茬倞闁挎繂绻戠�氬綊鏌ㄩ弴鐐诧拷鎼佹煁閸ヮ剚鐓忓璺虹墕閸斻倝鏌ㄥ☉姘灈婵﹤鎼晥闁搞儜鍛磿婵＄偑鍊ら崢濂告偋閹捐绠氶悘鐐跺▏閺冨牆宸濇い鏃�鍎抽獮鍫ユ⒒娴ｅ憡鎯堟繛灞傚灲瀹曟繂鐣濋崟顒�锟藉爼鏌ㄩ悢鍝勑ｉ柣鎾跺枛閺岀喖骞嗚閸ょ喖鏌曢崱妯烘诞闁哄被鍔戦幃銏ゆ倻濡崵褰ф繝鐢靛仜閹冲矂宕规禒瀣祦闊洦绋掗崐濠氭煠閹帒鍔氶柨鐔烘櫕閺佸寮婚妸銉㈡斀闁糕剝渚楅敓鑺ヮ殔闇夋繝濠傚閻鏌曢崶褍顏紒鐘崇洴婵＄兘鏁冮敓浠嬵敂閿燂拷?"+roleid);
					return true;					
				}
				
				//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婎潊闁绘ê妯婂Λ宀勬⒑鏉炴壆顦﹂柨鏇ㄤ邯瀵鍨鹃幇浣告倯闁硅偐琛ラ敓钘夌－椤旀劗绱撻崒娆戝妽闁告梹鐗犻妴鍐幢濡皷鏀虫繝鐢靛Т濞层倕娲块梻浣告啞娓氭宕㈤挊澶嗘灁闁告挷鑳剁壕钘壝归敐鍥ㄥ殌闁轰礁澧界槐鎺楁偐閾忣偄纾抽悗娈垮枦椤曆囧煡婢跺鐓ラ幖绮规嚕椤忓懍绻嗛柣鎰典簻閿熻姤鍨垮畷婵嗙暆閸曨偆鐤囬梺褰掑亰閸橀箖鎮甸崼鏇熺厸闁搞倕鐖奸。锕�效濡ゅ懏鈷戦柛锔诲幖閸斿鏌熼幖浣虹暫鐎规洏鍨介幃浠嬪川婵炵偓瀚肩紓鍌氬�烽悞锕傛晪婵犳鍣粻鎾诲蓟濞戙垹绠婚悗闈涙啞閸ｄ即鏌﹀Ο鐓庢灈闁哄矉缍侀獮鍥敆閸屾瑧椹抽梻浣告憸婵敻宕濆▎鎾跺祦闁哄稁鍋勯崹婵嬫偡濞嗗繐顏存繛鍏煎灴濮婃椽骞栭悙璇ф嫹閺嶎厹锟藉啯绻濋崶褑鎽曞┑鐐村灟閸ㄥ綊宕￠幎鑺ョ厪濠电偛鐏濋崝姘亜椤愵偄浜炵紒杈ㄦ尰閹峰懘宕崟銊︾�扮紓鍌欒兌婵敻鎮ч悩宸殨濠电姵纰嶉弲鎻掝熆鐠虹尨鍔熼柣銈忔嫹闂傚倸鍊搁崐鎼佹偋婵犲嫮鐭欓柟杈捐缂嶆牗銇勯幇鍫曟闁抽攱鍨块弻娑樷槈濮楀牆濮涢梺鐟板暱閸熸挳寮诲☉銏″亜闁告稑锕︾粙鍥ь渻閵堝骸浜滅紒缁樺笧濡叉劙骞掗幊宕囧枔閹风姴顔忛鍡樺闁瑰墽绮悡鐔兼煟閺傛寧鎲搁柟鍐插暣閹顫濋悡搴㈢亶闁诲酣娼ч妶绋跨暦閸洦鏁嗗ù锝呭级鐎氬ジ姊绘担鍛婂暈缂佽鍊婚敓鑺ュ嚬閸欏啫鐣烽崘瑁佹椽顢旈崨顖氬箺闂備礁鍟块幖顐︽晝閵堝鍊堕柣妯肩帛閻撶喖鏌ㄥ┑鍡樻悙闁告ê鐡ㄩ妵鍕閿涘嫭鍒涢梺璇″枟缁挸鐣烽崡鐐嶇喓绱掑Ο鐓庡缓濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柟缁㈠枟閺呮繈鏌曢崼婵愭Ц缂佺姷濮烽敓钘夌畭閸庡崬煤閵娧呬笉闁哄倹顑欓悢鍡涙煠閹间焦娑у┑顔肩墦閺屽秹鏌ㄧ�ｎ亞浼岄梺鍝勬湰閻╊垶寮崒婊勫珰闁圭粯甯為鎰版⒒娴ｅ憡鍟為柡灞诲姂椤㈡牠宕卞☉妯滐箓鏌涢弴銊ョ仩閹喖姊洪棃娑辨閻庨潧鑻灋闁挎洖鍊归崐鐢告偡濞嗗繐顏紒锟介崘顔界厱闁靛鍎查崑銉э拷娈垮櫘閸嬪﹪鐛崶顒�绾ч悹鎭掑妼閿熺晫鍋ゅ娲濞戣京鍔搁梺绋垮閻擄繝骞冨Δ浣靛亝闁告劏鏅濋崢浠嬫煙閼圭増褰х紒杈ㄦ礋閹箖顢橀姀锛勫幈闁硅偐琛ラ敓钘夌枃閸╃偤姊婚崶褜妯�闁哄本鐩鎾Ω閵壯傚摋缂傚倷鑳舵刊顓㈠垂閹惰姤鏅搁柣锝呮湰閸わ拷闁诲孩鐭崡鍐茬暦閹寸偟绡�闁稿被鍊楅崝鐑芥⒑閸愬弶鎯堥柟鍐茬箻閹繝鎮㈤崗鑲╁幍闂佺粯鍔﹂崜娆撳煝閺囩喆浜滈幖娣焺濞堟绱掓潏銊ユ诞妞ゃ垺娲熸慨锟介柍璺虹仌閸曨剙寮挎繝鐢靛Т閹冲繘顢旈悩缁樼厵濡炲楠搁埢鍫ユ煕閵娾晝鐣洪柟鐓庣秺椤㈡洟鏁愭惔鈩冩殺闂傚倸鍊搁崐椋庣矆娓氾拷楠炲鍩勯崘顏嗘嚌濠德板�曢幊搴ㄥ垂閸岀偞鐓欓柛鎾茬劍濞呮洜锟借鎸风欢姘跺蓟閻旂厧绠氱憸宥夈�傚畷鍥╂／闁硅鍔栭ˉ澶愭煏閸℃ê绗掓い顐ｇ箞椤㈡鎷呯憴鍕拷宄扳攽閻愯尙鎽犵紒顔肩Ф閹广垽宕熼姘辩枀闂佸綊妫跨粈浣虹棯瑜旈弻鐔虹矙閸噮鍔夐梺绋块闁帮絽顫忔繝姘＜婵﹩鍓ㄩ幏鐑藉箹娴ｅ摜锛欓梺褰掓？缁�浣哄瑜版帗鐓欓梻鍌氼嚟椤︼妇鐥幆褎璐￠柨鐔烘櫕閹虫挾锟芥矮鍗冲畷鎴炵節閸屾﹫鎷烽幒鎾剁瘈婵﹩鍘鹃崢鐢告⒑缂佹ê鐏﹂拑閬嶆煃闁垮濮堥柕鍥у椤㈡洟鏁愰崱娆樻О闂備線娼уú銈囷拷姘緲椤曪綁骞橀鍛櫆闂佸憡渚楅崣搴㈠閹炬枼鏀介幒鎶藉磹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋鐐殿暡鐎规洖寮堕幈銊ノ旂�ｎ偄顏堕柣搴㈩問閸ｎ噣宕戞繝鍥╁祦婵☆垵鍋愮壕鍏间繆椤栨粎甯涙い蹇曞枛濮婄粯鎷呴懞銉с�婇梺闈╃秶缁犳捇鐛箛娑欐櫢闁跨噦鎷�? by changhao
				Integer rollpoint = teammelon.getMelonroleids().get(roleid);
				if (rollpoint == null)
				{
					psend(roleid, new fire.pb.team.STeamError(fire.pb.team.TeamError.SelfNotInTeam));
					fire.pb.team.TeamManager.logger.debug("CTeamRollMelon:婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁诡垎鍐ｆ寖缂備緡鍣崹鎶藉箲閵忕姭妲堥柕蹇曞Х椤撴椽姊虹紒妯哄闁诲繑宀稿畷瀹狀槾缂佽鲸鎸婚幏鍛矙濞嗙偓娈洪梻浣侯焾椤戝啴宕愬┑鍡╁殨閻犲洦绁村Σ鍫ユ煏韫囨洖顫嶉柕濠忚礋娴滄粓鏌￠崘銊ワ拷鍝ユ暜閼哥偣浜滄い鎰枑濞呭洨绱掓潏銊﹀鞍缂佹鍠愮换婵嬪礃椤垳绱﹂梻鍌氬�风粈浣圭珶婵犲洤纾婚柛鈩冪☉缁愭鏌熼幑鎰【濠殿噮鍓熼弻銊╂偄閸撲胶鐓撳┑顔硷工椤嘲鐣烽幒鎴僵闁告鍎愰弶鍝ョ磽閸屾瑧顦︽い鎴濇閺侇噣鏁撻悩鍙夌�悗骞垮劚椤︻垳鐚惧澶嬬厱妞ゆ劑鍊曢弸鏃堟煕濮楋拷缁犳牕顫忓ú顏勪紶闁告洖鐏氭瓏婵犵數鍋涢ˇ鏉棵哄Ο鑲╃焿闁圭儤顨呴～鍛存煏閸繃锛嶆慨濠冨缁绘繈濮�閿濆懐鍘梺鍛婃⒐閻楃娀骞冮敓鐘参ㄩ柨鏂垮⒔閻﹀牓姊婚崒姘卞缂佸甯¤棢闁绘劗鍎ら悡鏇㈡煥濠靛棙顥為柕鍥ㄧ箞閺岀喖顢欓懖鈺冃ㄥΔ鐘靛仜濞差厼鐣峰鍕闁惧繗顫夐～灞解攽閻樻剚鍟忛柛鐘崇墵閺佸啴濡舵径鍡嫹閿曪拷閻ｏ繝骞嶉鑺ヮ啎闂備胶绮濠氬煕閸儱鏋侀柛鎰靛枟閻撳繘鐓崶褝鏀绘繛鍛暟缁辨帗娼忛妸锔绘濠殿喖锕︾划顖炲箯閸涙潙宸濆┑鐘插暙閸撻潧鈹戦悩顔肩伇婵炲绋戠叅妞ゆ挶鍨归弸渚�鏌熼崜褏甯涢悗鐢靛Т椤法鎹勯搹鍦姽缂備浇浜崑銈咁潖濞差亜浼犻柛鏇ㄥ墻濡垿姊虹粙鍖℃敾闁绘濮垫穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑鎯堥崟顖涒拺缂佸瀵у﹢浼存煠閸︻厼浜剧紒鍌涘笒椤粓鏁撻挊澶樻綎闁绘垶蓱婵粓鏌熷▓鍨灕缂佹劖顨嗙换娑氾拷娑欘焽閻倕霉濠婂簼绨绘い鏇稻缁绘繂顫濋鈹炬櫊閺屽秹宕崟顐嫹閸涘﹦顩叉繝濠傜墛閳锋垿鏌涘☉姗堝姛缂佺姵鎹囬幃妤�顫濋浣告畻闂佽桨鐒﹂崝鏍ь嚗閸曨叏鎷烽敐搴″妤犵偞顨婂缁樻媴缁涘缍堥梺绋垮婵炲﹪骞冨ú顏勎╃憸蹇涙儗閸℃稒鐓曢柟鏉垮悁缁ㄧ晫鐥幑鎰汗缂佽鲸鎸婚幏鍛嫚閿涘嫬濮烘繝鐢靛仦瑜板啴顢氶銏℃櫢闁稿﹦鍣ュ鎰箾閸欏澧柣锝囧厴椤㈡宕橀鍐焻闂傚倸鍊搁…顒勫磻閸曨個褰掑礋椤撶偟绛忔繝闈涘�搁幉锟犳倿閼恒儯浜滈柡宥庡亜娴狅箓鏌ｉ幘瀵告噭闁靛洤瀚板顕�鏁撴禒瀣嚑濠电姵纰嶉崵锟介梺绉嗗嫷娈曢柣鎾寸懄閵囧嫰寮崶鑸电秷濠电偛鎳庡ú銊ф閹烘挻缍囬柕濞垮劤閻熴劑鏌ф导娆戠М闁哄矉缍侀獮姗�骞庣粵瀣舵嫹濡ゅ啰纾奸柣姗�娼ф禒杈ㄦ叏婵犲偆鐓肩�规洘甯掗埢搴ㄥ箣閻橀潧搴婂┑鐘垫暩閸嬫﹢宕犻悩璇茬倞闁挎繂绻戠�氬綊鏌ㄩ弴鐐诧拷鎼佹煁閸ヮ剚鐓忓璺虹墕閸斻倝鏌ㄥ☉姘灈婵﹤鎼晥闁搞儜鍛磿婵＄偑鍊ら崢濂告偋閹捐绠氶悘鐐跺▏閺冨牆宸濇い鏃�鍎抽獮鍫ユ⒒娴ｅ憡鎯堟繛灞傚灲瀹曟繂鐣濋崟顒�锟藉爼鏌ㄩ悢鍝勑ｉ柣鎾跺枛閺岀喖骞嗚閸ょ喖鏌曢崱妯烘诞闁哄被鍔戦幃銏ゆ倻濡崵褰ф繝鐢靛仜閹冲矂宕规禒瀣祦闊洦绋掗崐濠氭煠閹帒鍔氶柨鐔烘櫕閺佸寮婚妸銉㈡斀闁糕剝渚楅敓鑺ヮ殔闇夋繝濠傚閻鏌曢崶褍顏紒鐘崇洴婵＄兘鏁冮敓浠嬵敂閿燂拷?"+roleid);
					return true;	
				}
				
				Integer alreadroll = teammelon.getOpmelonroleids().get(roleid);
				if (alreadroll != null)
				{
					fire.pb.team.TeamManager.logger.debug("CTeamRollMelon:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊炲銈嗗笒椤︿即寮查鍫熷仭婵犲﹤鍟版晥闂佹寧绻勯崑娑㈠煘閹寸媴鎷烽敐搴′簼婵炲懎娲铏圭矙鐠恒劎鍔规繝纰橈拷铏窛缂侇喗鐟ㄧ粻娑㈠籍閸屾粎妲囬梻渚�娼ф蹇曞緤娴犲鍋傞柟鎵閻撴洟鏌￠崘鎸庡闂佺粯顨堟慨鎾偩閻戣棄绠ｉ柨鏇嫹閸ュ瓨绻濋姀锝嗙【妞ゆ垵娲畷銏ゅ箹娴ｅ厜鎷洪梺纭呭亹閸嬫盯宕濆Δ鍛厸闁告侗鍠氶埥澶愭煟椤垵澧存慨濠勭帛閹峰懘鎼归悷鎵偧闂佹眹鍩勯崹杈╂暜閿熺姴鏋侀柛鎰靛枛鍞悷婊冮閻ｇ兘宕ｆ径宀�顔曢梺鐟扮摠閻熴儵鎮橀埡鍌ゆ闁绘劦浜滈悘顏勄庨崶褝韬い銏＄☉閳规垿宕堕張闈涙憢婵犵數鍋涢顓熸叏閻㈢绠伴柛鎰▕濞兼牗绻涘顔荤盎缂佺姴缍婇弻锝夊箛椤撶偟绁峰銈庡墮椤﹁京妲愰幘瀛樺缂佹稑顑呭▓顓㈡⒑閸濄儱鏋庨柣掳鍔嶇粚杈ㄧ節閸ャ劌浠虹紓浣割儓濞夋洟藝閺夋娓婚柕鍫濇婢ь剚鎱ㄥΟ绋垮鐎规洘绻堥獮姗�顢欑憴锝嗗闂備礁鎲＄粙鎴︽晝閵堝棙鍙忕憸蹇曟閹烘鍋愰柛鎰皺娴犲摜绱撴担绋匡拷鍦暜閿熺姴鐏抽柡鍐ㄧ墕缁犮儵鏌ㄩ悢鍝勑ｉ柍閿嬪浮閺屾稓浠﹂幑鎰棟闂佽法鍠曟慨銈夊箖閸屾氨鏆﹂柟閭﹀弾濡插綊骞栨潏鍓ф偧闁绘帒鍚嬬换娑㈠箻鐎电鏆￠梺鍦厴閺�閬嶃�冮妷鈺傚�烽悗鐢殿焾閳峰苯顪冮妶鍐ㄧ仾婵炲弶鍨圭槐鐐哄川鐎涙鍘遍梺闈涱樈閸犳牗鏅舵繝姘厸濞达絿顭堥弳锝夋煛鐏炶濮傜�殿喗鎸抽、鏃堝川椤撗傜处闂傚倸鍊烽悞锕傛儑瑜版帒纾规俊銈呮噹绾惧鏌熼幑鎰厫鐎规洖寮剁换娑㈠箣濞嗗繒浠肩紓浣哄缂嶄線寮婚敐澶婄疀闁靛闄勯悵鏇㈡⒑閹稿海鈽夐柣妤�妫濋崺鐐哄箣閿旇棄锟界兘鏌涘▎蹇ｆТ闁哄鐟︾换娑氾拷娑欘焽閻绱掔拠鑼妞ゆ洩缍佸濠氬Ψ閵夈劍鎲伴梻渚�娼ч¨锟藉┑鈥虫喘瀹曘垽鏌嗗鍡忔嫼闂傚倸鐗婃笟妤�螣閸儲鐓曢柣妯挎珪缁�鍫ユ煠濞差亙鎲鹃柟绛圭節婵″爼宕熼鐐测挄闂傚倸顭崑鍕洪敂鍓х煓闁圭儤顨呴悡鏇㈡煙閻戞ê娈憸鐗堝笚閺呮煡鏌涢锝囨袱闁规儳澧庡Λ顖涖亜閹捐泛浠ч柛鈺嬬秮閺岋紕浠﹂崜褎鍒涢梺杞扮劍閸旀绮诲☉銏犲嵆闁绘娅曢鎾斥攽鎺抽崐妤佹叏閻戣棄纾绘繛鎴炵瀹曞弶鎱ㄥΔ瀣閻庢鍣崑濠囩嵁濡偐纾兼俊顖滅帛椤忕喖姊绘担鑺ョ《闁革綇绠撻獮蹇涙晸閿燂拷"+roleid);
					return true;
				}
				
				if (status == 0) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇牠姊绘担鑺ョ《闁哥姵鎹囧鏌ヮ敃閿旇姤娅㈤梺鍏间航閸庡瓨绔熷Ο姹囦簻闁挎柨鐏濆畵鍡椻攽閿涘嫭鏆�规洜鍠栭、娑橆潩妲屾牕鏁介梻鍌欒兌閹虫捇鎮洪妸褎宕茬�广儱妫涢々鐑芥煠濞村娅囩痪鎹愭閵嗘帒顫濋濠冩暰闁诲孩淇洪～澶屾崲濠靛顫呴柨婵嗘噽閸橆偊姊洪崨濠冣拹闁绘濞�楠炲啴鍨鹃弬銉︾�婚梺瑙勫劤椤曨參宕㈡禒瀣拺闁荤喖鍋婇崵鐔访归崗鑲╃疄妞ゃ垺妫冨畷鐔煎箣閻愬弶璇為悗瑙勬礈閸犳牠銆佸锟介幃銏ゆ煥鐎ｎ剨鎷锋ィ鍐┾拺缁绢厼鎳庢禍褰掓偠濞戞牕鍔氶崡閬嶆煕濞戞瑦缍戦柛姘愁潐娣囧﹪濡堕崨顔兼闂佺粯鎸诲ú鐔煎蓟閿熺姴鐐婇柕澶堝劚椤牓鎮楀▓鍨灈婵炵》绻濆濠氭偄閸撳弶效闁硅偐琛ラ敓钘夊暱缁狅綁姊绘担鑺ャ�冮柣鎺炵畵瀹曟繂鈻庤箛鏇熸闂佸湱鍎ら崹鐔肺ｉ崼鐔虹闁糕剝锚閻忋儳绱掗懠鑸电《缂佽鲸鎹囧畷鎺戭潩椤掑﹥瀚归柣鎴ｅГ閸ゅ嫰鏌ょ粙璺ㄤ粵闁告瑥绻樺濠氬醇閻旀亽锟芥帡鏌￠崱妤侇棤缂佽鲸甯為敓鏂ょ秵閸嬫帡宕曢妷锔剧闁稿繗鍋愭晶鐢告煛鐏炵喎妫涢悿锟介梺鐟板⒔椤ユ劗娑甸敓浠嬫⒒娴ｈ銇熼柛妯圭矙閹兘鍩￠崨顓℃憰闂佺粯妫佸▍锝夋儗濞嗘挻鐓曟い顓熷灥濞呮﹢鏌涢弬娆炬█婵﹥妞藉畷鐑筋敇閻斿搫濮藉┑鐐茬摠缁娀宕滃☉妯滐綁骞囬弶璺啋闁诲孩绋掗敋妞ゅ孩鎹囧娲川婵犲啫闉嶉悷婊勬緲閸熸潙鐣峰鍫熺劶鐎广儱妫岄幏娲煟閻斿摜鎳冮悗姘煎櫍楠炴宕橀搴㈠閻熸瑥瀚粈鍫ユ煛娴ｈ鍊愮�规洘宀搁獮鎺楀籍閹炬潙顏堕梺鎸庣箓缁ㄥジ骞夋ィ鍐╃厱婵﹩鍓﹂崕蹇斻亜椤撶偞鍋ラ柟铏矒閹顢旈崨顓犱紝閻庢鍠楅悡锟犮�佸Δ鍛妞ゆ垼濮ょ�氳偐绱撻崒姘拷鐑芥倿閿曞倹鏅┑鐘愁問閸犳牕煤閿曞倸桅闁告洦鍨伴崡鎶芥煏婵炲灝鍔氱紒顐㈢Ч閹鎲撮崟顒傦紭闂佹悶鍔嬬划娆撴偘椤曪拷瀵粙濡搁敃锟介鎾绘⒑缁嬭法绠版い锔藉閿熻姤鑹鹃妶绋款潖濞差亝鍤掗柕鍫濇啗閿濆悿鐟邦煥閿熺晫鍒掑▎蹇曟殾婵犻潧妫涢弳鍡涙煕閺囥劌浜滈柛銈嗗灴閹鐛崹顔煎濠电偛鐪伴崝搴㈢珶閺囥垹绀傜紒妤勬〃缁ㄥ姊洪崫鍕殭闁稿﹦鎳撻埢宥夊即閵忥紕鍘甸梺鍛婂姇瀵爼宕板锟介弻鈥崇暆鐎ｎ剙鍩岄梺瀹犳椤﹂潧鐣烽敓鐘冲�烽悗鐢殿焾缂嶅棝姊虹拠鍙夊攭妞ゎ偄顦叅闁哄诞鍛濡炪倖甯掔�氬摜绱為弽銊х瘈闂傚牊渚楅崕蹇曠磼閿熶粙宕掑鑲╁數闂佽鍨堕崑濠囧吹閸愵喗鐓曢柟鎯ь嚟閵嗘帗淇婇崣澶婂妤犵偞顭囬敓鑺ョ♁閿氭い搴㈡尵缁辨挻鎷呴崜鎻掑壈缂備降鍔戞禍鍫曠嵁閹版澘绀冩い鏃囆掗幏铏圭磽娴ｅ壊鍎愭い鎴炵懇瀹曟洟骞囬悧鍫㈠幍闂佽崵鍠撴晶妤呭箹閹扮増鐓熼柨婵嗘搐閸樺锟芥鍠楅幐铏叏閿熶粙鏌ｅΟ娲诲晱闁哥偞鎸冲缁樻媴缁嬫寧鍊繛瀛樼矆缁瑥鐣烽弴銏犵闁兼亽鍎辨禒濂告⒑鐟欏嫬鍔跺┑顔哄�濋崺娑㈠箳濡や胶鍘遍柣蹇曞仜婢т粙骞婇崟顓犵＜濞达絽鎼。鑲╃磼缂佹鈾佺�垫澘瀚敓鏂ょ秵閸嬪棝藝娴煎瓨鍊甸悷娆忓缁�鍐ㄢ攽閻愯韬�殿噮鍋婂畷姗�顢欓懖鈺嬬床婵犳鍠楅敃銏㈡兜閹间礁鑸归柣銏犳啞閳锋帒霉閿濆牆袚缁绢厼鐖奸弻娑㈡晲韫囨洜鏆ゅΔ鐘靛仜缁绘﹢寮幘缁樻櫢闁跨噦鎷�? by changhao
				{					
					teammelon.getMelonroleids().put(roleid, 0);
				}
				
				int num = teammelon.getOpnum();
				num ++;
				teammelon.setOpnum(num);
				
				teammelon.getOpmelonroleids().put(roleid, teammelon.getMelonroleids().get(roleid));
				
				fire.pb.team.teammelon.SOneTeamRollMelonInfo msg = new fire.pb.team.teammelon.SOneTeamRollMelonInfo();
				msg.itemid = teammelon.getItemid();
				msg.melonid = melonid;
				msg.rollinfo.roleid = roleid;
				msg.rollinfo.rolename = roleprop.getRolename();
				msg.rollinfo.roll = teammelon.getMelonroleids().get(roleid);
				
				for (Long e : eteammelon.getMelonerlist()) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╃窔閺岀喖宕滆鐢盯鏌涚�ｎ偄濮嶉柡灞剧洴楠炲洭顢涘鍗烆槱闂備焦鐪归崹褰掆�﹀畡閭︽綎缂備焦蓱婵挳鏌ｉ悢鐓庝喊闁搞倕顑呴埞鎴︽倷閹绘帞楠囬梺缁橆殘婵挳鎮鹃悜钘夌疀闁哄娉曢鎰箾鏉堝墽鎮兼い顓炵墦閹顢橀姀鈾�鎷虹紓浣割儓濞夋洟鎮橀柆宥嗙厱閻庯綆鍓欐禒閬嶆煙椤曞棛绡�鐎殿喗鎸虫慨锟介柨娑樺瀵娊姊绘担鍛婃儓闁哥噥鍋勯湁闁稿瞼鍋涢崥瑙勭箾閸℃ê濮︽繛鍫滅矙閺岋綁骞囬澶婃婵犫拃鍛毈闁哄矉绱曟禒锕傚礈瑜庨崚娑欑節绾版ê澧查柟顔煎�垮顐﹀磼閻愯尙顦悷婊冪箻瀵娊濡舵径瀣ф嫽闂佺鏈喊宥夊箹閹邦厹浜滈柨鏃傚亾閺嗩剛锟芥鍠涢褔鍩ユ径濠庣叆闁告侗鍨卞鎴︽⒒娴ｇ瓔娼愮�规洘锚閳诲秹寮撮姀鐘碉紮濡炪倖鐗楃划搴ｅ娴犲鐓曢悘鐐靛亾閻ㄦ垿寮介敓鐘斥拺闁硅偐鍋涙俊鍏肩節閿熶粙宕￠悙宥忕秮楠炲洭寮剁捄顭戝敽婵犲痉鏉匡拷鎾剁矆娴ｅ湱顩插┑鍌氭啞閳锋垿鏌涘☉姗堟缂佸爼浜堕弻娑㈡偐瀹曞洤鈷屽銈冨灪濡啴寮幘缁樻櫢闁跨噦鎷�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇洟姊绘担钘壭撻柨姘亜閿旇鏋ょ紒杈ㄦ瀵挳濮�閳撅拷閹风粯绻涙潏鍓хК婵炲拑缍佹俊瀛樼節閸ャ劎鍘遍梺瑙勫劤椤曨厾绮婚悙鐑樼厵闁芥ê顦敓钘夘煼閺佹捇寮妶鍥┬ｉ梺鍝ュУ閻楃娀骞冨▎鎰瘈闁告劧缂氱花濠氭⒑閻熺増鎯堢紒澶婂閹峰綊鎮ч崼婊呯畾濡炪倖鍔戦崹褰掑汲濞嗘挻鐓冮悷娆忓閻忔挳鏌熼鐣屾噧妞ゆ柨绻橀、娆撳礂绾板崬鏅欐繝纰夌磿閸嬫垿宕愰弽顐ｆ殰闁绘棁妗ㄩ悞濠冪箾閸℃ê鐏︽い顐ｆ礋閺岋綁骞囬澶婃闂佽崵鍠庣紞濠囧蓟閵娾晜鍋勭紓浣癸供濡嫬顪冮妶鍡樼┛缂傚秳绶氶妴渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐ゅ垝閸儱绀冮柍鐟般仒缁ㄥ姊洪崫鍕殭婵炲眰鍊栫粋宥堛亹閹烘挾鍙嗗┑鐐村灦閻熝囨儗婵犲洦鐓冮悷娆忓閻忓瓨銇勯姀锛勬噰鐎殿噮鍓熸俊鍫曞礋椤擄紕绠查梻鍌氬�风粈渚�骞夐敓鐘茬濠电姵纰嶉崕搴€亜閺嶎偄浠滅紒鐘崇墪闇夐柛蹇撳悑缂嶆垿鏌ｉ幘瀵告创闁哄本绋撴禒锕傚礈瑜忛悡鍌炴⒑娴兼瑧鐣遍柣妤�绻掑Σ鎰板箳濡わ拷缁�鍫㈡喐瀹ュ锟藉倹绺介崨濠傜彅闁哄鐗勯崝濠冪濠婂嫨浜滈柟鏉跨仛缁舵盯妫呴澶婂⒋闁哄矉绱曟禒锕傚礈瑜庨崚娑欑節绾版ê澧查柟顔煎�规穱濠囨偪椤栵絾顎夌紓鍌欐祰娴滎剟宕戦妶鍜佹綎婵炲樊浜滃婵嗏攽閻樻彃锟藉鎮烽弻銉︾厽闁靛繆鏅涢悘鑼磼缂佹绠炲┑鈥崇摠閹峰懐鍖栭弴鐕佹綌婵犵妲呴崹鍫曞绩闁稄缍栫�广儱鎳夐弨鑺ャ亜閺冨倻鍙撴い蹇撶墕鐟欙箓鎮楅敐搴″闁活厼鐗婇妵鍕箛閸撲焦鍋х紓浣叉閹烽绱撴担绋库挃濠⒀勵殙閹筋偄顪冮妶搴′簻闁挎洦浜璇测槈閵忕姈鈺冩喐鎼淬劌姹叉い鎺戝亰閹烽鎲撮崟顒傤槰闂佹悶鍔屽锟犳偘椤曪拷瀹曞爼顢楁径瀣珦缂備胶鍋撴刊鑺ャ仈閹间絸澶愭晸閻樻枼鎷绘繛杈剧秬濡嫯顣块梻浣瑰绾板秹濡甸崟顖毼ㄩ柨婵嗘噽娴煎洭姊洪棃娑欏闁告梹鐟╅悰顕�骞掑Δ锟界粻濠氭倵濞戞瑯鐒界憸鐗堟倐濮婂宕掑▎鎴М闂佽绁撮崜婵堢箔閻旇偤鏃堝川椤撶姷宕舵繝寰锋澘锟芥洟骞婃惔锝囩幓婵°倕鎳忛悡娆撴⒑椤撱劎鐣辨鐐搭焽缁辨帡鍩ラ崨顔碱伓闂傚倸鍊风粈渚�宕崸妤�鍚归柡宥庡幖缁狀垳锟界懓瀚崳纾嬨亹閹烘挻娅滈梺鍛婁緱閸犳宕伴幇顓犵閻庣數顭堝瓭婵犫拃鍛珪婵″弶鍔欓獮妯硷拷娑櫭鎾绘⒑閹呯闁硅櫕鎸剧划顓㈡晸閻樻枼鎷洪梺缁樺灍閺呮粌鈻嶉幘缁樼厱闁靛鍊曞畵鍡涙煙椤曪拷缁犳牠寮婚妸褝鎷烽敐搴″⒋婵＄虎鍣ｅ娲川婵犲嫧妲堥梺鎸庢磸閸婃牜绮嬪鍜佺叆闁告洦浜炵粻姘舵⒑缂佹ê濮囨俊顖氾躬瀹曟洝绠涢弴鐘碉紲闂侀潧臎閸愩劋绮俊鐐�愰弲娑㈠Χ閹间胶宓佹俊顖溿�嬮幏鐑芥濞戞瑦鍠愰梺浼欑畱閻楁挸顫忛崫鍕懷囧炊瑜忔导鍫濃攽閻愭澘灏冮柛鏇ㄥ弾濞村嫰姊虹�圭姵銆冪紒璁圭節閹垽宕卞☉娆戝幗闂佺粯姊婚…鍫ニ夌�ｎ亶鐔嗙憸婵嬫⒔閸曨垰桅闁告洦鍨伴～鍛存煃閵夈劌绱﹂悗娑掓櫅椤啴濡惰箛鏇犳殸缂傚倸绉撮敃顏勵嚕鐠囨祴妲堥柕蹇曞Х閸樻挳姊洪崜鑼帥闁哥姵纰嶇粋鎺撱偅閸愨斁鎷洪柣鐘叉礌閿熻棄纾禒顓炩攽閳藉棗浜滈柛鐕佸灦楠炲牓濡搁埡鍌涙婵炲濮撮鍡涙偂閸愵喗鐓忓璺虹墕閸旀岸鏌￠崱妤�鑸归柍瑙勫灴閸╁嫰宕橀妸銏＄亞婵犳鍠栭敃锔惧垝椤栨粎绠旈柣鏂垮悑閺呮悂鏌﹀Ο渚▓闁绘帞鏅幉鎼佸籍閸繄浼嬮梺鎸庢礀閸婃悂鏌嬮崶顒佺厪濠㈣泛鐗嗛崝銈夋煥濞戞艾鏋涙慨濠冩そ瀹曨偊宕熼鍛晧闂備胶顭堢�涒晠鎮￠垾宕囨殾闁硅揪瀵岄弫鍌炴煕椤愩倕鏋旈柛姗�浜堕弻锝堢疀閺囩偘娌梺绋垮婵炲﹪骞冮悙韬蹭汗闁圭儤鎸鹃崢鎼佹⒑鐠恒劌鏋欏┑顔哄�楃划瀣箳閺冩挻瀚归柨婵嗛娴滅偤鏌涘Ο鍦煓婵﹪缂氶妵鎰板箳閹存粌鏋堥梻浣规偠閸斿宕￠幎钘夌畾闁告劦鐓佸ú顏嶆晜闁告侗鍨伴獮宥夋⒒娴ｉ涓茬紒韫矙閹崇喖顢涘顓熺槑缂傚倸鍊搁崐宄懊归崶銊ｄ粓闁告縿鍎查弳婊堟煥閻斿搫袨闁跨喐鍨濈粈渚�鍩㈡惔銊ョ疀妞ゆ洩鎷锋俊缁㈠枤缁辨挻鎷呴崜鎻掑壈闂佽绻戠换鍫濈暦閿濆棛绡�闁搞儯鍔夐幏缁樼箾鏉堝墽鎮奸柣鈩冩瀹曠敻宕橀鐣屽幈闂侀潧顭堥崐鏇炵暤閸℃瑱鎷风憴鍕闁告梹鐟ラ悾鐑芥倻缁涘鏅ｉ梺缁橆焽閺佹悂寮抽妷鈺傗拻濞达綀娅ｇ敮娑㈡煛鐏炶濮傛鐐寸墵椤㈡洟濡堕崱鈺佷缓闂備線娼ч悧鍡浰囨导瀛樺亗闁哄洨濯撮幏鐑界嵁閸喖濮庨梺鐟板槻椤戝懓鐏掗梺璺ㄥ枙濡嫰鍩為幋锔绘晩缁绢厼鍢叉导鎰渻閵堝骸骞栭柛銏＄叀閹箖鎮滈挊澶岊唺闂佺懓鐡ㄥ褰掓倵婵犳碍鈷戦柛锔诲幖閸斿鏌涢妸褎鏆╅柡渚囧櫍椤㈡稑顭ㄩ崨顖ょ闯闂備胶顭堥張顒勬偡瑜忛幏瑙勫鐎涙鍘遍梺鎸庣箓妤犵鈻嶅鍥锋嫹鐟欏嫭绀�婵狅拷闁秴绠查柛鏇ㄥ灡閹偤鎮峰▎蹇擃仾妞ゆ梹娲樼换婵嬫偨闂堟稈鏋呭┑鐐板尃閸忕偓鐩、姗�鎮滈崱娆忓Ш闂備線娼ц墝闁哄懏绮撻幃锟犲Ψ閳哄倻鍘介梺鍝勫�搁悘婵嬨�傞幎鑺ョ厽妞ゆ挾鍠撻幊鍥煛鐏炵澧查柟宄版嚇閹兘寮跺▎鐐稈闂傚倷娴囬鏍窗濡ゅ懏鍋￠柍杞扮贰閸ゆ洟鏌涢锝嗙缂佺媴缍侀弻锝呂熼崗鍏兼瘎閻庤鎸风欢姘潖婵犳艾纾兼繛鍡樺焾濡差喚绱撻崒姘毙㈤柨鏇ㄤ簻閻ｇ兘骞嬮悙鐢电槇闂佹悶鍎滈崪浣剐ゅ┑鐘垫暩閸嬬偤宕归鐐插瀭婵炲樊浜滈悿鐐亜閹烘垵顏柣鎾跺枛閺岋繝宕掑鍙樿檸闂佽鍠楅崹鍫曞Φ閸曨垰唯闁靛鍨遍弫楣冩⒑闂堟稒鎼愰悗姘嵆閻涱噣宕堕锟介悡娑樏归敐鍫熴�冮柣銉簻閳规垿鎮╅鑲╀紘濠电偛顦扮粙鎾绘晸閼恒儱鍤柛鐘宠壘鍗遍柟鐗堟緲缁犳娊鏌￠崘鈺傚鞍閻庢艾缍婇弻銊モ攽閸℃侗锟芥霉濠婂嫮鐭掗柡宀嬬秬缁犳稒绻濋崘鈺冨絿缂傚倷娴囨ご鍝ユ暜閿熺姰锟戒礁鈻庨幘鏉戞異闂佸疇妗ㄧ拋鏌ュ矗濞差亝鈷掑ù锝堝Г閵嗗啴鏌ｉ幒鐐电暤妤犵偞鍨垮畷鍫曨敆閿熶粙寮告笟锟介弻鐔煎礈瑜忕敮娑㈡煛閸涱喗鍊愰柡灞诲姂閹倝宕掑☉姗嗕紦? by changhao
				{
					//TeamManager.logger.info("roll闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤濠�閬嶆晸閻ｅ本鍤�閻庢矮鍗冲畷鎴炵節閸屾﹫鎷烽幒鎾剁瘈婵﹩鍘鹃崢鐢告⒑缂佹ê鐏﹂拑閬嶆煃闁垮濮堥柕鍥у椤㈡洟鏁愰崱娆樻О闂備線娼уú銈囷拷姘緲椤曪綁骞橀鍛櫆闂佸憡渚楅崣搴㈠閹炬枼鏀介幒鎶藉磹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋鐐殿暡鐎规洖寮堕幈銊ノ旂�ｎ偄顏堕柣搴㈩問閸ｎ噣宕戞繝鍥╁祦婵☆垵鍋愮壕鍏间繆椤栨粎甯涙い蹇曞枛濮婄粯鎷呴懞銉с�婇梺闈╃秶缁犳捇鐛箛娑欐櫢闁跨噦鎷�?:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╃窔閺岀喖宕滆鐢盯鏌涚�ｎ偄濮嶉柡灞剧洴楠炲洭顢涘鍗烆槱闂備焦鐪归崹褰掆�﹀畡閭︽綎缂備焦蓱婵挳鏌ｉ悢鐓庝喊闁搞倕顑呴埞鎴︽倷閹绘帞楠囬梺缁橆殘婵挳鎮鹃悜钘夌疀闁哄娉曢鎰箾鏉堝墽鎮兼い顓炵墦閹顢橀姀鈾�鎷虹紓浣割儓濞夋洟鎮橀柆宥嗙厱閻庯綆鍓欐禒閬嶆煙椤曞棛绡�濠碉紕鍏橀崺锟犲磼濠婂啫绠洪梻鍌欑閹碱偄煤閵娾晛纾绘繛鎴欏灪閺呮悂鏌﹀Ο渚Ч閻犳劧绻濋弻銊╂偄鐠囨畫鎾绘煟閺冩垵澧存鐐茬箻閺佹捇鏁撻敓锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐鍛傜喎鈻庨幆褎顔勭紓鍌欒兌婵挳鎮樺璺何﹂柛鏇ㄥ枤閻わ拷闂佸湱鍋撻幆灞轿涢妶鍥╃＝濞撴艾锕ョ�氳绻濋悽闈浶㈡繛璇х畵閹繝濡烽埡鍌滃幗闂佸搫鍟ù鍌炲吹濞嗘垶鍋栨慨妯夸含绾捐棄霉閿濆牊顏犻悽顖涚洴閺岋綁鍩℃繝鍌滀哗闂佷紮绲块崗姗�銆侀弮鍫濋唶婵犻潧鐗滃Σ鐗堜繆閻愵亜锟芥洜鎹㈤幇鏉胯摕濠电姴鍋嗛悡銉╂煕椤愩倕鏆遍柟鐤缁辨帞绱掗姀鐘茬闂佺懓鍟跨换姗�骞冮悽鍓叉晜闁糕剝鐟ч敍婊冾渻閵堝棙鐓ラ柛姘儔楠炴垿鏁愭径瀣幈闂佸湱鍎ら幐绋棵归鎾呮嫹濞堝灝娅橀柛鎾寸懇閸┿垺鎯旈妸锕�锟介攱銇勯幒鎴濓拷濠氬煝婢舵劖鈷掗柛灞剧懆閸忓瞼绱掗鍛仸闁诡啫鍥у嵆闁绘垵妫涢崝鐑芥⒑绾懎鐓愮紒鏃撴嫹:" + e + "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存鐐达耿閹崇娀顢楁径瀣撴粓姊绘担瑙勫仩闁告柨绉堕幑銏ゅ礃椤斿槈锕傛煕閺囥劌鐏犻柛鎰舵嫹婵＄偑鍊栭崝锕�顭块敓鐣岀磼椤旂厧顣崇紒杈ㄦ尰缁楃喐绻濋崘顭戜紦婵犵數濮伴崹鐓庘枖濞戙埄鏁勯柛鈩冪☉閻鐓崶銊︾叄缂佽妫濋弻鏇㈠醇濠靛洤顎涢梺绋垮閸旀瑩骞冨Δ锟介～婵嬵敆閸屾簽銊モ攽椤旂》鏀绘俊鐐扮矙閻涱噣骞囬鐔峰妳闂佹寧绻傚ú銊╁汲椤撱垺鈷掑ù锝勮閻掔偓銇勯幋婵囧枠鐎规洘鍨甸埥澶愬閳哄倹娅旈梻渚�娼чˇ顐﹀疾濞戞氨鐭嗛悗锝庡亖娴滄粓鏌″鍐ㄥ闁汇劍鍨块弻锝夊Χ韫囨柨顏跺┑鐘殿暜缁辨洟宕戦幋锕�纾归柡宥庡亝閺嗘粌鈹戦悩韫礀鐟滅増甯掗悙濠囨煃閸濆嫬浜為柛瀣ㄥ姂濮婃椽妫冨☉姘辩杽闂佺锕ラ悧鐘诲春濞戙垹绠抽柟鐐藉妼缂嶅﹪寮幇鏉块唶婵犮埄鍓氶幐楣冩儉椤忓牜鏁囬柣鎰版涧閻撶喖姊洪崫鍕拱闁烩晩鍨跺顐﹀箛椤栨粎鏉搁梺鍝勬川婵潧鈻撻崗闂寸箚闁靛牆娲ゅ暩闂佺顑嗙粙鎾诲箲閵忕媭娼ㄩ柨鐔绘椤曪綁顢曢敃锟界粻鑽ょ磽娴ｈ偂鎴濃枍閵忋倖鈷戦悹鎭掑妼濞呮劙鏌熼崙銈嗗:" + msg.rollinfo.roll);
					mkdb.Procedure.psendWhileCommit(e, msg);			
				}
				
				for (Long e : eteammelon.getWatchmelonerlist()) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╃窔閺岀喖宕滆鐢盯鏌涚�ｎ偄濮嶉柡灞剧洴楠炲洭顢涘鍗烆槱闂備焦鐪归崹褰掆�﹀畡閭︽綎缂備焦蓱婵挳鏌ｉ悢鐓庝喊闁搞倕顑呴埞鎴︽倷閹绘帞楠囬梺缁橆殘婵挳鎮鹃悜钘夌疀闁哄娉曢鎰箾鏉堝墽鎮兼い顓炵墦閹顢橀姀鈾�鎷虹紓浣割儓濞夋洟鎮橀柆宥嗙厱閻庯綆鍓欐禒閬嶆煙椤曞棛绡�鐎殿喗鎸虫慨锟介柨娑樺瀵娊姊绘担鍛婃儓闁哥噥鍋勯湁闁稿瞼鍋涢崥瑙勭箾閸℃ê濮︽繛鍫滅矙閺岋綁骞囬澶婃婵犫拃鍛毈闁哄矉绱曟禒锕傚礈瑜庨崚娑欑節绾版ê澧查柟顔煎�垮顐﹀磼閻愯尙顦悷婊冪箻瀵埖绂掔�ｎ偀鎷绘繛杈剧到閹诧繝骞嗛崼銉︾厽妞ゆ帪鎷烽柕鍫㈩焾閻ｇ兘鎮ч崼鐔峰妳闂侀潧顭堥崕鎶藉储濞差亝鈷戦悷娆忓缁�鍐┿亜閺囧棗娲ら崹鍌炴煕鐏炲墽鈼ゅù婊勭矒閺岋繝宕橀妸銉嫹閻熸壋鏋嶉柡鍥╀紳閻熼偊鐓ラ柛鎰典簻閻撶喎鈹戦纭峰姛缂侇噮鍨堕獮蹇涘川閺夋垵绐涙繝鐢靛Т閸燁偊寮搁幋婵冩斀闁绘ɑ鍓氶崯蹇涙煕閻樻剚娈旀い顓炴搐閳诲酣骞掗弬鍓х秿婵犵數濮烽弫鍛婄箾閿熻姤绻涙担鍐叉祩閺佸嫰鏌涘☉妯兼憼閻庢艾鎳橀弻锝夊棘閹稿孩鍠愮紓浣哄█缁犳牠寮婚悢鐚存嫹閻㈡鐒惧ù鐘欏洦鐓熼柟鍨暙閻忥紕绱掔紒妯尖槈闁伙絾绻冪换婵囩瑹閿熶粙宕戝Δ鍛拺闁告繂瀚﹢浼存煟閳哄﹤鐏﹂柣娑卞枛铻ｅù锝嗘礃濡啴寮幘瀵割浄閻庯綆浜為悿鍥⒑閸︻厼顣兼繝銏★耿瀹曟帡濡搁埡鍌滃幍闁诲海鏁搁…鍫濇毄缂備焦鍎宠ぐ鐐靛垝濞嗘挸钃熸繛鎴炵煯濞岊亪鏌涢幘妤�瀚▍娆撴⒒娴ｄ警鐒剧紒缁樺姍閹崇喖顢涢悙鑼幋闂佺鎻�靛矂寮鍡欑闁瑰鍋熼幊鍐煕閻愬樊妲搁摶鏍煟濮楋拷濞佳勭濠婂懐纾肩紓浣癸公閼拌法锟芥鍣崑濠囩嵁濡偐纾兼俊顖滅帛椤忕喖姊绘担鑺ョ《闁革綇绠撻獮蹇涙晸閿燂拷 ROLL闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存鐐达耿閹崇娀顢楁径瀣撴粓姊绘担瑙勫仩闁告柨绉堕幑銏ゅ礃椤斿槈锕傛煕閺囥劌鐏犻柛鎰舵嫹婵＄偑鍊栭崝锕�顭块敓鐣岀磼椤旂厧顣崇紒杈ㄦ尰缁楃喐绻濋崘顭戜紦婵犵數濮伴崹濂稿春閺嶎厼绀夐柡宥庡幗閸嬪倹绻涢幋娆忕仾闁绘挻娲熼弻鏇熷緞閸繄浠惧┑鐐叉噹閹虫﹢寮诲☉銏犵闁哄鍨熼弸娆撴⒑閸濆嫯顫﹂柛濠冪箓椤曪綁宕奸弴鐐殿唶闁硅偐琛ラ敓钘夊级濡﹪姊婚崒娆戭槮闁圭⒈鍋婂鐢割敆閸屾粎鐓撻梺纭呮彧缁叉寧绂嶅▎鎾粹拻濞达絽鎲￠崯鐐烘煕閺冿拷閸ㄥ灝鐣峰┑鍫嫹閿濆函鎷烽鍡楀悩閺冨牆宸濇い鏃囶潐鐎氬ジ姊绘担鍛婂暈缂佽鍊婚敓鑺ユ皑閸忔ê鐣烽弴銏犵疀妞ゆ挻绻勭粻姘渻閵堝棗濮傞柛銊ョ秺瀵娊鏁愰崶閿嬪婵炲牆鐏濋弸娑欍亜椤撶姴鍘存鐐插暣婵拷闁靛牆妫楁禒蹇涙煟鎼淬垻鈾侀柨姘亜韫囨挾鍩ｆ慨濠傛惈鏁堥柛銉戝懍鐥俊鐐�栧褰掓偋閻樿绠栭柣鎰惈缁犳碍銇勯鏂ゆ嫹瀹曞洨楔闂佽鍠掗弲娑㈠煝鎼淬倗鐤�闁瑰灝鍟╁ǎ顔尖攽閻愯尙鎽犵紒顔肩Ф閸掓帡骞樼拠鑼舵憰閻庡箍鍎遍ˇ顖涘閻樼粯鐓曢柡鍥ュ灪濞懷囨煕閹捐鎲鹃柡宀嬬稻閹棃濮�閵忕姵娈归梻浣烘嚀閸ゆ牠骞忛敓锟�? by changhao
				{
					if (e != null)
						mkdb.Procedure.psendWhileCommit(e, msg);			
				}
				
				if (num >= teammelon.getMelonroleids().size())
				{
					new PTeamRollMelonInfo(battlemelonid, 0).call();
				}
				
				return true;
			}
			
		};
		teamrollmelon.submit();
	}
	
	/*
	 * 
	 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存鐐达耿瀹曪絾寰勫Ο鐑╂瀳闂傚倷鑳剁划顖滄暜閹烘鏅濇い蹇撶墕閽冪喖鏌￠崶鈺佹灁缂佺娀绠栭弻锝夊箛闂堟稑顫梺缁樼箖濮婅崵妲愰幘瀛樺闁告繂瀚烽敓钘夌焸閺屾盯濡搁妷褍鐓熼悗娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭花浠嬫⒒娴ｄ警鐒鹃柡鍫墰缁瑩骞嬮敂缁樻櫆闂佽法鍣﹂幏锟�?缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁诡垎鍐ｆ寖闂佺娅曢幑鍥灳閺冨牆绀冩い蹇撳鐎氬綊鏌ㄥ┑鍡欏嚬缂併劌銈搁弻鐔兼儌閸濄儳袦闂佸搫鐭夌紞渚�銆佸锟介幃娆撳箹椤撶噥妫ч梻鍌欑窔濞佳兾涘▎鎴炴殰闁圭儤顨愮紞鏍ㄧ節闂堟侗鍎愰柛濠囨敱閵囧嫰骞掗悙鏉戭伓婵＄偑鍊曠换鎰版偉閻撳寒娼栫紓浣股戞刊瀵哥磼濞戞﹩鍎忔繛鍫熷姍濮婃椽宕妷銉︾彙闂佺顑呴敃銈夋偩閻戣棄绠氶梺顓ㄩ檮浜涢梻鍌欑閸氬顭垮锟介幃妯衡攽鐎ｎ亞鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩娈跨劸妞ゎ亜鍟存俊鑸垫償閳ュ磭顔愭繝鐢靛仜濡﹪宕ｉ崘顔惧祦闁告劏鏅涢閬嶆煛婢跺娈鹃柕濞炬櫆閻撳啴鏌涘┑鍡楊仼闁跨喓鏅弫濠氱嵁韫囨拋娲敂閸涱亝瀚奸梻浣告啞缁嬫垿鏁冮敃鍌氱叀濠㈣埖鍔栭悡銉╂煛閸ユ湹绨介柟顔煎悑缁绘盯宕遍幇顒備紙闂佸搫鑻Λ妤咁敇婵傜骞㈡繛鍡楃箰缁犵偤姊婚崒娆戠獢婵炰匠鍥ｏ拷锕傚醇閵夈儳锛欏┑掳鍊曢幊蹇涘磿濡や胶绠鹃柛鈩兠慨锔界箾閸粎鐭欓柡宀嬬秮楠炲洭顢涘杈嚄缂傚倷鑳舵慨鏉戭嚕閸洖桅闁告洦鍨遍弲婊堟煙椤栧棗鏈В澶愭⒒娴ｇ瓔鍤冮柛銊ュ船铻為柛鎰ㄦ櫆閸欏繘鏌ㄩ悢鍓佺煓闁哄矉绲借灒闁惧繒娅㈢槐鐐烘⒑鐠恒劌鏋旈柣鈩冩瀹曪綁宕橀…鎴炵稁缂傚倷鐒﹁摫濠殿垱鎸抽弻娑樷槈濮楀牆浼愰梺鍝勬閻楀棝鍩為幋锔藉�峰Λ鐗堢箓濞堟繈姊婚崒姘仼閻庢凹鍠氶崚鎺旓拷锝庝憾閸氬鏌涘☉鍙樼凹闁诲骸顭峰铏规喆閸曨剙鍓归梺鎼炲姀娴滎剟鏁撻懞銉や孩妞ゎ偄顦遍幑銏犫槈閵忕姷顓洪梺缁樺姌鐏忔瑩鎮烽幓鎺嗘斀闁绘劕寮堕崳褰掓煥閺囨ê鍔︽鐐茬墦婵℃悂鏁傞崜褏妲囬梻浣侯焾閺堫剛绮欓幒妤�纾块柟鍓х帛閻撴稑霉閿濆懏鎲稿褝绠撻弻锛勪沪閸撗勫垱婵犵绱曢崗姗�鐛�ｎ亖鏀介柛鈩冾焽娴滈箖姊绘担绛嬪殭濡ょ姵鎮傞、姘额敇閻樻剚娼熼梺瑙勫礃椤曆呭閸忚偐绠鹃柛鈩兠慨澶愭煏閸喐绶叉い顏勫暣婵″爼宕卞Ο鍨簴闂備焦鎮堕崕顖炲礉鐏炲墽顩查梺顒�绉甸埛鎴︽偡濞嗗繐顏╃紒锟介崘顏庢嫹鐟欏嫭绀嬫繛浣冲洦鍋╅柛顭戝亞閻熷綊鏌ㄩ悢鍓佺煓鐎殿喛顕ч埥澶愬閻橀潧濮堕梻浣告啞閸旓附绂嶉弽顬綁宕奸姀銏紳婵炴挻鑹鹃敃銉э拷姘秺濮婃椽宕ㄦ繝鍌氼潊闂佸搫鍊搁崐鍦矉瀹ュ拋鐓ラ柛顐ゅ枔閸樻悂姊洪崨濠傚闁告柨绉归獮鏍箛椤戠偟鎳撻…銊╁幢閳哄倻绉烽梻渚�娼уú銈囷拷姘嵆瀵偊宕掗悙鏉戞疅闂侀潧锛忛崘銊︻吋婵犵绱曢崑鎴﹀磹閵堝棛顩叉繝濠傜墕閻ゎ噣鎮楀☉娅偐鎹㈤崱娑欑厱妞ゆ劧绲剧粈锟藉Δ鐘靛亼閸ㄧ儤绌辨繝鍥舵晬婵犲﹤鍟俊鍝勨攽閻愯尙澧遍柛瀣工椤繒绱掑Ο璇差�撴繛鎾村嚬閸ㄦ娊宕濈粙娆炬富闁靛牆妫楅悘銉︿繆椤愶絿绠炵�殿噮鍋婂畷姗�顢欑喊杈ㄧ秱闂備胶绮敋闁诲繑鑹鹃埢鎾淬偅閸愨斁鎷虹紓鍌欑劍閿曗晠鎮為悙顑句簻闁哄洤妫楀ú銈囩矆閸愵喗鐓ラ柣鏃傜帛椤ュ銇勯鍕殻濠碘�崇埣瀹曞崬螣閻戞ɑ顔傞梻鍌欑閹芥粓宕版惔鈽嗙劷闁跨喓濮峰畵渚�鐓崶銊﹀婵炲樊浜堕弫鍌炴煕濞戝彉绨奸悗姘冲亹缁辨捇宕掑顒婃嫹閻戣姤鍊块柨鏇炲�甸敓鏂ょ畵瀹曞ジ鎮㈤搹鐟伴獎婵犳鍠楅〃鎰板箯閻戣姤鐓涚�癸拷鐎ｎ剛蓱濡ょ姷鍋涢敃顏堝蓟濞戙垹妫橀柛褎顨呭浼存⒑鏉炴壆鍔嶉柟鐟版喘楠炲﹪鎮欓崫鍕庛劎鎲稿澶婃辈闁跨喓濮甸埛鎴︽煟閻斿憡绶叉繛鍫氭櫊閺岀喖宕欓妶鍡楊伓?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗嗘导鎰版⒑閹肩偛濡芥慨濠傜秺婵＄敻宕熼姘鳖啋闁荤姴鎼幖顐ｇ珶婢舵劖鈷戠紓浣股戦悡銉︿繆椤愶綆娈滃┑鈩冩尦楠炴帡骞嬮鐔峰厞闂備胶绮崝锕傚礈濞嗘搩鏁傞柤绋垮悁缁诲棝鏌曢崼婵囨悙閸熸悂姊虹粙娆惧剱缂佸鎹囬獮鎴﹀閻欙拷濞笺劑鏌ㄩ悢缁橆棄妞ゆ洩缍侀、鏇㈡晝閿熺晫绮婚懡銈囩＝濞达綀鍋傞幋婵冩瀺闁靛繈鍊栭埛鎴︽偣閹帒濡兼繛鍛姍閺岀喖宕欓妶鍡楊伓? by changhao
	 */
	public long calcMaxRollPoint(java.util.ArrayList<Long> roleids, xbean.TeamMelon teammelon)
	{
		int max = 0;
		long maxroleid = 0;
		for (Long roleid : roleids)
		{
			Integer rollpoint = teammelon.getMelonroleids().get(roleid);
			if (rollpoint >= max)
			{
				max = rollpoint;
				maxroleid = roleid;
			}
		}
		
		return maxroleid;
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 794523;

	public int getType() {
		return 794523;
	}

	public long melonid; // 分赃id by changhao
	public int status; // 1是ROLL 0是放弃 by changhao

	public CTeamRollMelon() {
	}

	public CTeamRollMelon(long _melonid_, int _status_) {
		this.melonid = _melonid_;
		this.status = _status_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(melonid);
		_os_.marshal(status);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		melonid = _os_.unmarshal_long();
		status = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CTeamRollMelon) {
			CTeamRollMelon _o_ = (CTeamRollMelon)_o1_;
			if (melonid != _o_.melonid) return false;
			if (status != _o_.status) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)melonid;
		_h_ += status;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(melonid).append(",");
		_sb_.append(status).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CTeamRollMelon _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(melonid - _o_.melonid);
		if (0 != _c_) return _c_;
		_c_ = status - _o_.status;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

