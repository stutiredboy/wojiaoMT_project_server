
package fire.pb.team.teammelon;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CRequestRollItemTips__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}
/***
 * 
 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姴顭烽弻锛勪沪缁嬪灝鈷夐悗鍨緲鐎氼噣鏁撻弬銈囩У濞存粍绻堥、娆撳川椤撴稒鏂�闂佺粯鍔曞鍫曞煝閺囩伝鐟邦煥閸愵亜鐓熼悗娈垮櫘閸嬪﹤鐣烽崼鏇ㄦ晢濞达絽鎼敮楣冩⒒婵犲骸浜滄繛璇х畱鐓ら柡宓嫭鐦庨梻鍌氬�风粈渚�骞夐敍鍕床闁告劦鍠撻敓钘夊暞缁绘繈宕掗妶鍡欑▉缂傚倸鍊烽悞锕傗�﹂崶顒佸仭鐟滅増甯楅悡鏇㈡煏婢跺鐏ラ柛鐘宠壘椤洭鎳￠妶鍥╋紳闂佺鏈悷褔藝閿斿浜滈柨鏇炲�烽幉鍓э拷娈垮櫘閸嬪棝骞忛悩缁樺殤妞ゆ帊鐒﹂鏇㈡⒒娴ｅ憡鎯堟繛灞傚灲瀹曞綊宕烽鐘辩瑝闂佹寧绻傞ˇ浼存偂閵夆晜鐓涢柛鎰╁妼閿熺晫鎳撻埢宥夊即閵忥紕鍘卞┑鈽嗗灠濠�閬嶆儗濞嗘劖鍙忓┑鐘插暞閵囨繃淇婇銏犳殭闁宠棄顦板蹇涘煛娴ｆ劅顏堟⒒閸屾瑨鍏屾い顓炵墢閿熻棄鐏氱敮鈥崇暦瑜版帒閱囬柡鍥╁仦閻庮剟姊洪悷鏉库挃缂侇噮鍨抽敓鐣屾暩婵挳鈥︾捄銊﹀磯濡わ箑鐏濋顓㈡⒑缂佹ê濮囨い鈺嬫嫹 item tips 濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆ繛纭风節瀵鎮㈤悮瀛樺闁汇垺顔栭悞鍓э拷娑欑箘缁辨挻鎷呴悾灞界墯闂佺锕ョ换鍫濐嚕婵犳碍鏅濋柨鐔凤拷鐔轰航濠电偞鎸婚崙褰掑垂闁秵鏅柛鈩冦仜閺�浠嬫煟閹邦剙绾ч柍缁樻礀闇夋繝濠傚缁犵偟锟借娲橀崹鍧楃嵁閸ヮ剚鍋嬮柛顐ｇ箑閸栨牠姊绘担瑙勫仩闁稿海鍎ょ粋宥咁煥閸喎鍓梺缁樺灦鑿уù婊勭矒閺屻劑寮崶璺烘濡ょ姷鍋為悧鐘诲蓟瀹ュ洦鍠嗛柛鏇ㄥ亞娴煎矂姊虹拠鈥虫灀闁哄懏绻勫Σ鎰板箳閹冲磭鍠愮换婵嗩潩椤撶喐顔冨┑鐘垫暩婵兘寮幖浣哥；婵炴垯鍨洪崕鎴澝归崗鍏肩稇缁炬崘顫夌换婵嬫濞戝崬鍓梺璺ㄥ枑閸ㄦ繄绮堟笟锟介敐鐐测攽鐎ｎ偄娈濋梺姹囧灲濞佳勬叏閹间焦鐓熼幖杈剧磿閻ｎ參鏌涙惔鈥宠埞閾荤偞绻涢幋娆忕仼闁活厽顨婇弻娑㈠焺閸愵亖妾ㄩ梺鎶芥敱閸ㄥ湱妲愰幘瀛樺闁兼祴鍓濋崹鍦垝閸儲鏅稿ù鐘差儐閳锋垹绱掔�ｎ亜鐨＄�规悶鍎茬换婵嬫晸娴犲鐒肩�广儱妫欏▍銏ゆ⒑閸忛棿鑸柛搴㈠▕瀹曨垶寮婚妷锔惧幍闂佸憡鍨崐鏍拷姘炬嫹 by changhao
 *
 */
public class CRequestRollItemTips extends __CRequestRollItemTips__ {
	@Override
	protected void process() {
		// protocol handle
		
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		Long battlemelonid = xtable.Roleid2battlemelonid.select(roleid);
		if (battlemelonid != null)
		{
			xbean.ETeamMelon teammelon = xtable.Battlemelonid2melon.select(battlemelonid);
			if (teammelon != null)
			{
				xbean.TeamMelon melon = teammelon.getMelonid2melons().get(this.melonid);
				if (melon != null)
				{
					xbean.Item item = melon.getItemdata();
					if (item != null)
					{
						fire.pb.item.ItemBase basicitem = fire.pb.item.Module.getInstance().getItemManager().toItemBase(item, 0, 0, 0);
						if (basicitem != null)
						{
							fire.pb.talk.SChatItemTips msg = new fire.pb.talk.SChatItemTips();
							msg.tips = basicitem.getTips(); 
							
							fire.pb.talk.DisplayInfo displayInfo = new fire.pb.talk.DisplayInfo();
							msg.displayinfo = displayInfo;
							msg.displayinfo.displaytype = fire.pb.talk.DisplayInfo.DISPLAY_ROLL_ITEM;
							msg.displayinfo.counterid = item.getId();
							gnet.link.Onlines.getInstance().send(roleid, msg);			
						}					
					}				
				}				
			}
		}
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 794525;

	public int getType() {
		return 794525;
	}

	public long melonid;

	public CRequestRollItemTips() {
	}

	public CRequestRollItemTips(long _melonid_) {
		this.melonid = _melonid_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(melonid);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		melonid = _os_.unmarshal_long();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CRequestRollItemTips) {
			CRequestRollItemTips _o_ = (CRequestRollItemTips)_o1_;
			if (melonid != _o_.melonid) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)melonid;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(melonid).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CRequestRollItemTips _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(melonid - _o_.melonid);
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

