
package fire.pb.team;
import fire.pb.StateCommon;
import fire.pb.buff.BuffAgent;
import fire.pb.buff.BuffConstant;
import fire.pb.buff.BuffRoleImpl;


// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CSetTeamLeader__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/***
 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厱妞ゎ厽鍨垫禍婵嬫煕濞嗗繒绠抽柨鐔凤拷鐕佹綈婵炲弶鐗曠叅闁靛ň鏅滈崕妤呮煕閳╁喚妯呯憸鐗堝笚閺呮煡鏌涢顐簼缂傚秴鐗嗛埞鎴︽倷閸欏娅ф繝娈垮枟閹稿啿锕㈡笟锟藉铏圭磼濡浚浜滆灒濠电姴娲ょ壕鍧楁煙閹殿喖顣奸柣鎾存礋閹鏁愰崨顓熷�庨梻渚囧弾閸ㄥ爼寮婚敍鍕勃闁告挆鍕灡闂備胶纭堕弲娑氾拷姘緲閻ｅ嘲顫滈敓浠嬨�侀弮锟介幏鍛嫚閳藉懏瀚归柛銉墯閳锋帒霉閿濆洦鍤�闁崇粯娲熼弻锟犳晸娴犲鐒肩�广儱鎳愰澶愭⒑閹肩偛鍔撮柛鎾寸懇閹锋垿鎮㈤崗鑲╁弳濠电娀娼уΛ顓炍ｉ崨濠佺箚妞ゆ劧缍囬懓鍧楁煛鐏炲墽娲撮柍銉畵楠炲鈹戦崶鈺�鎲鹃梻鍌欒兌椤牓鈥﹂鍕瀭濞村吋娼欓悡姗�鏌熸潏鎯х槣闁轰礁顑夐弻娑㈠焺閸愵亝鍣柤鍙夌墵濮婄粯鎷呴悜妯烘畬闂佹悶鍊栭悧鐘荤嵁韫囨稒鏅搁柨鐕傛嫹
 * @author changhao
 *
 */
public class CSetTeamLeader extends __CSetTeamLeader__ {
	private long now = 0L;//procedure闂傚倸鍊搁崐鎼佸磹瀹勬噴褰掑炊椤掑鏅悷婊冪Ч濠�渚�姊虹紒妯虹仴妞ゎ偅娲熼弫鎾绘寠婢跺鎷烽崸妞硷拷浣割潩閼稿灚娅㈡繛瀵稿Т椤戝洤鐣垫笟锟介悡顐﹀炊閵娧�妾ㄩ梺鍝勬噺閹倿寮婚妸鈺傚亞闁稿本绋戦锟�?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊閻樺樊妫岄梺杞扮閿曨亪寮婚垾鎰佸悑閹肩补锟藉磭顔愮紓鍌欑劍閸旀牠銆冩繝鍥ц摕闁炽儲鍓氶崥瀣箹缁櫢鎷烽崘宸妧闂傚倷娴囧銊х矆娴ｇ尨鎷峰顐㈠祮鐎殿喛顕ч埥澶愬閻橀潧濮堕梻浣告啞閸旀宕戦幘娲绘晣闁荤喐澹嬮弨浠嬫煟閹邦剛鎽犻悘蹇ｅ幗閵囧嫰顢橀悩鎻掑箣閻庢鍠涢褔鍩ユ径濠庢僵妞ゆ劧绲芥刊浼存⒒娴ｅ憡鍟為柟绋挎缁楃喐绻濋崘顭戜紦闂備礁婀遍崕銈夈�冮崱娑欏亗闁告劦鍠楅悡鐔兼煟閺冨偆鐒炬い銉ヮ儔瀵粙鏁嶉崟顓狅紳婵炶揪缍�濞咃絿鏁☉姘辩＜閻犲洩灏欐晶鏇㈡懚閻愮儤鐓曢柟鎵虫櫅婵￠攱淇婇幓鎺斿缂佺粯鐩畷鍗炍熼弴鐔风伌闁轰焦鎹囨俊鐑藉煛閸屾瀚藉┑鐐舵彧缁蹭粙骞夐敍鍕闁跨喓濮甸悡娑㈡煕濠婏拷缁�浣圭濠靛鐓欏〒姘仢婵倹顨ラ悙杈捐�挎い銏＄懇閹虫牠鍩℃担鍝ュ摋濠电姷鏁告慨浼村垂婵傜鏄ラ柡宥庡幖缁�澶愭煛瀹ュ骸骞栭柣銈夌畺閺岀喖姊荤�电濡介梺缁樻尪閸庣敻寮婚敐澶婂嵆闁绘劘顕滈幏鐑藉捶椤撱劍瀚规慨妯煎亾鐎氾拷?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫孝缂傚秴锕璇差吋婢跺﹣绱堕梺鍛婃处閸嬫捇骞忛柨瀣瘈婵ǜ鍎婚幏鐑藉川閺夋垹鐓戞繝銏ｆ硾閻ジ鎯侀崼鐔虹瘈闁汇垽娼у瓭闂佺锕ょ紞濠傜暦閹惰姤鍋╃�癸拷閿熺晫澹曟總鍛婄叆闁绘棁顕ц缂備胶绮换鍫濈暦閸洖惟闁靛鍨辩�氬綊鏌ｉ姀鐘冲暈闁绘挶鍎茬换婵嬫濞戞瑯妫﹀銈呭椤ㄥ﹪寮婚敍鍕舵嫹閿濆骸浜為柕鍡樺笧缁辨帗娼忛妸銉﹁癁闂佽桨鐒﹂幐鑽ょ矉閹烘棑鎷烽敐搴濋偗闁哥偠娉涢—鍐Χ鎼粹�茶埅闂佸摜濮甸〃鍫ユ晸閼恒儰浜㈡い顐㈩樀閵嗗啴濡烽埡鍌氾拷鐑芥煠绾板崬鍘搁柧蹇撻叄濮婃椽宕ㄦ繝鍐ｆ嫻缂佺偓婢樼粔鐢电矚鏉堛劎绡�闁搞儴鍩栭弲婵嬫⒑閹稿海绠撴繛璇х畵瀹曡櫕瀵肩�涙鍙冨┑鈽嗗灥瀹曠數绮诲锟介弻鐔煎矗婢跺锟芥劗锟芥鍣崜娆撳煝鎼淬劍鍊锋い鎺戝�婚埢澶嬬節閻㈤潧啸闁轰礁鎲￠幈銊╂偨閸涘﹤娈為梺鍛婃寙閸愮偓顥￠梻浣侯焾缁绘宕戦幇顔煎К闁跨喍绮欏濠氬磼濮樺崬顤�缂備礁顑嗙敮锟犵嵁閺嶎厼绠涙い鎾跺Х椤旀洟姊洪悷鏉挎毐闁搞垺鐓￠獮濠囧箛椤旂⒈妫滈梺鑺ッˉ銏ｃ亹閹烘挻娅滈梺鍛婃处閸橀箖鎮￠幘缁樷拺闁告稑锕︾粻姘箾閸滃啰鎮兼俊鍙夊姍楠炴帡寮敓鐣岋拷姘哺閺岀喓绱掑Ο铏圭懖濠电偛鐗嗘晶搴ｆ閹惧鐟归柛銉戝嫮浜堕柣搴ｆ閹烽绱掔�ｎ厽纭堕柡鍡畵閺屻劑鎮㈤崫鍕戯綁鏌涙繝鍕幋闁哄苯绉瑰畷顐﹀礋椤愵剚瀚圭憸鐗堝笒缁狙呯磼鐎ｎ亞姘ㄩ柡锟芥禒瀣厽婵☆垵娅ｆ禒娑㈡煛閸″繑娅呴柍瑙勫灴椤㈡瑧鍠婇崡鐐搭啀闂備浇娉曢崰鏇熸叏閵堝绀勭憸鐗堝笒閻鏌涢幇闈涙灍闁哄懏鐓￠弻锝夊箛椤掍讲鏋欓梺鍛婅壘椤戝寮诲☉妯锋闁告瑦顭囬崙褰掓⒑閸濆嫬浜伴柟宄板槻閳规垿鏁嶉崟顐℃澀闂佺锕ラ悧鏇綖韫囨梻绡�婵﹩鍓涢弻褍顪冮妶鍡楀闁稿﹥顨嗙粙澶婎吋婢跺鍘繝銏ｅ煐缁嬫挾妲愰幍顔剧＜閻犲洤寮堕ˉ銏ゆ煛鐏炲墽鈽夐柍璇叉唉缁犳盯鏁愰崱蹇旂亖闂傚倷绀侀幉鈥愁潖閻熸嫈鐔煎锤閸у獛ure濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫孝缂傚秴锕璇差吋婢跺﹣绱堕梺鍛婃处閸撴瑥鈻嶉敐澶嬧拺缂佸鍎婚～锕傛煕閺冿拷閸ㄥ灝顕ｆ繝姘櫇闁跨喎锟界喓浜藉┑鐐存尰閸戝綊宕归柆宥呯厺闁圭偓鏋奸弨浠嬫煟閹邦剛鎽犻悘蹇ｅ幗閵囧嫰顢橀悩鎻掑箣閻庢鍠涢褔鍩ユ径濞㈢喖宕楅崗鑲╂殾闂傚倷娴囧▔鏇㈠窗瀹ュ洤鍨濇繛鍡楃箳閺嗭箓鏌熸潏楣冩闁稿﹦鍏橀弻娑樷攽閸℃浼�闂佸憡锕㈡禍璺侯潖濞差亜鎹舵い鎾跺仜婵″搫顪冮妶鍐ㄥ婵☆偅绻傞悾鐑藉箛閻楀牆浠洪梺鍛婄☉鑹岄柟宄邦煼濮婃椽宕滈幓鎺嶇敖闂佸摜濮甸幑鍥春閿旂晫鐟归柨鐔剁矙瀵鈽夐姀鈥充簻闂佸憡绻傜�氼亜危閹扮増鈷戦柛婵嗗閻掕法绱撳鍕獢鐎殿噮鍋婇獮鍥级閸ф鏁规繝鐢靛Т閿曘倝宕鐐茬？闁规儳澧庣壕浠嬫煕鐏炲墽鎳勭紒浣规緲椤啰锟芥稒蓱閸婃劖顨ラ悙鏉戝缂佺粯绻傞～婵嬵敆閸屻倕鏁搁梻鍌欑閹诧紕绮欓幒鎴劷婵炲棙鍔曢閬嶆煟濡偐甯涢柣鎾存礋閺岋繝宕堕妷銉ヮ瀳婵犫拃鍌氬祮闁哄被鍔戦幃銏ゅ礄閵堝棗顏堕梺缁樻煥婢瑰﹥绂掗埡鍐＝濞达絼绮欓崫娲煙缁嬫鐓兼鐐茬箻瀹曘劑顢涘☉妯荤�梻浣告啞濞插繘宕濆鍥锋嫹濮橆剦鐓兼慨濠勭帛閹峰懘鎮滃Ο鐑樼暚闂備浇顫夌粊鎾礈濠靛牊宕叉繛鎴炵懅缁★拷闂佹悶鍎崝灞剧閹烘埈娓婚柕鍫濇缁屽潡鏌熸搴″幋闁哄备鍓濋幏鍛喆閸曨偆锛撻梻浣芥〃閻掞箓骞戦崶顒�鏋侀柟鍓х帛閺呮悂鏌ㄩ悤鍌涘?
	
	Team team;
	@Override
	protected void process() {
		// protocol handle
		TeamManager.logger.debug("Enter: " + this.getClass());
		final long oldLeaderRoleId = gnet.link.Onlines.getInstance().findRoleid(this);
		if (oldLeaderRoleId < 0)
			return;
		final long newLeaderRoleId = roleid;
		mkdb.Procedure setTeamLeaderP = new mkdb.Procedure()
		{

			@Override
			protected boolean process()
			{
				//lock start 
				Long teamId = xtable.Roleid2teamid.select(oldLeaderRoleId);
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯顢曢敐鍡欙紩闂佽法鍠愰弸鑽ょ不閹惧磭鏆﹀┑鍌滎焾椤懘鏌嶉妷銉ユ毐缂併劊鍎靛缁樻媴缁涘缍堟繝銏㈡嚀濡瑩寮茬捄浣曟棃宕ㄩ鐙呯幢闂佽鍑界紞鍡涘窗濡ゅ懏鍋傛繛鍡樻尰閻撴洟鏌熼悙顒夋當闁瑰啿娴风划顓㈡晸閻樻枼鎷虹紓浣割儐椤戞瑩宕曢幇鐗堝珔閺夊牃鏅濈壕鑲╃磽娴ｈ鐒芥繛鎻掝嚟閿熷�燁潐濞叉牕鐣烽鍐航闂備焦鍎崇换姗�鏁撻懞銉р檨妞ゃ垺锕㈠缁樻媴缁涘娈柣搴㈢▓閺呮繈宕版繝鍌ゅ悑濠㈣泛顑呭▓鐐翠繆閵堝繒鍒伴柛鐕佸亯缁绘岸姊绘担鍛婅础闁稿簺鍊濆畷娲醇濠垫劗鍔烽梺鍐叉惈閹冲繘鎮￠悢鍏肩厵濞寸厧鐡ㄥ☉褍顭胯閸犳濡甸崟顔剧杸婵﹩鍓涢崢顐ょ磽娴ｈ櫣甯涚紒璇插�块、姘跺Ψ閳轰礁鍤戝銈嗗姦濠線骞忛悜钘壩у璺猴工閹偤鏌ｆ惔顖滅У闁哥姵顨婇崺娑㈠箳濡や胶鍘遍梺鍝勬储閸斿本绂嶅鍕╀簻闊浄绲芥禍浼存煛鐏炶濮傞柟顔哄灲閹粌螣閼姐倕娑ч梻鍌欐祰濡椼劑鎮為敃鍌氱畺闁稿本姘ㄩ弳锕傛煏韫囥儳绉垫俊顖氬椤啴濡堕崘銊т痪闁藉啳浜槐鎺楁惞鐟欏嫭鐝紓渚囧枟閻熲晛鐣疯ぐ鎺濇晩闁告牑鍓濈�氬綊鏌涢…鎴濇灀闁猴拷娴犲鐓冮柦妯侯槹椤ユ粓鏌ｈ箛銉хМ闁哄本绋掗幆鏃堝閻樺吀鎮ｇ紓鍌欑贰閸犳牠鈥﹂悜鐣屽祦婵☆垰鍚嬬�氭岸鏌ら懝鏉跨厫闁硅尙澧楃换婵嬫偨闂堟稐娌梺鎼炲妼閻栧ジ寮崘顔肩厸濞撴艾娲ㄩ崝鐑芥⒑閸愬弶鎯堥柟鍐茬箻閹繝寮撮姀锛勫幍闂佺粯鍔﹂崜锕�鈻撻弮鍫熺厵闁惧浚鍋勬慨宥夋煙椤旇宓嗗┑锛勫厴閸╋繝宕掑Δ浣割伖闂傚倷鑳堕崢褔锝為弴銏犵９闁哄洨鍠撴晶锟犳⒒閸屾瑧顦﹂柟娴嬶拷鎰佹綎鐟滅増甯囬敓钘夊暞缁绘繈宕掑鍕啎濠电偞娼欓崥瀣焽濞嗘垹涓嶅┑鐘崇閸嬶綁鏌涘┑鍡楊仾闁诡垰鐗撻弻锝堢疀閹垮嫯鍚┑顔硷龚濞咃綁骞戦崟顖毼╅柕澶涘瑜版岸姊绘担鐑樺殌闁搞倖鐗犻獮蹇涙晸閿燂拷?
				if(teamId != null)
					team = new Team(teamId,false);
				else
					return true;
				if(!team.isTeamLeader(oldLeaderRoleId))
					return true;//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柟缁㈠枟閸庡顭块懜闈涘缂佺嫏鍥ㄧ厱闁哄秲鍊曟晶鏌ユ倵濮樻剚娼愬ǎ鍥э躬婵″爼宕熼鐐差瀴闂備礁鎲￠悷銉ф崲濮楋拷瀵鎮㈤搹鍦紲闂侀潧绻掓慨鐢告倶瀹ュ鈷戠紒瀣仢椤掋垺銇勯妸銉﹀殗濠碘剝鎸抽獮鎺楀箣椤撶喎鍏婇梻浣虹帛閸旓箓宕滃▎鎿冩晜闁割偅娲橀埛鎺懨归敐鍥╂憘闁搞倕鍟撮弻娑⑩�﹂幋婵堜桓闂佽鍠氶崑銈夊极閸愵喗鏅稿ù鐘差儛閺佸鏌曟径鍡樻珔缂侊拷鐎ｎ偁浜滈柡宥冨妽閻ㄦ垿鏌ｉ妶蹇斿婵犵绱曢崑鎴﹀磹閺嶎偅鏆滄い蹇撶墕缁狀垶鏌ｉ幋锝呅撻柣鎾存礋閹鏁愭惔婵堟晼闁轰礁鐗嗛埞鎴︻敊绾兘绶村┑鐐叉嫅缁插灝危閹版澘绠抽柟鍐茬－閸犳牠骞婇敓鐘参ч柛娑卞幗鏉堝牓姊婚崒姘拷椋庣矆娓氾拷楠炲鏁撻悩鍐叉疄婵°倧绲介崰姘跺极閸曨垱鐓曟い鎰Т閸擃剟鏌ｉ幋锝嗩棄缁炬儳銈搁弻锝夊箛椤斿厠澶愭煙瀹勯偊鐓兼慨濠呮缁瑩骞愭惔銏″闂備胶鍘у﹢閬嶅磻閹惧墎鐭夌�广儱妫楅閬嶆倵濞戞瑯鐒介柛妯虹仛娣囧﹪鎮欏顔煎壈婵°倗濮甸幃鍌氱暦閵忋倕绠绘い鏃傛櫕閸樻悂鎮楅惂鍛婂闂佽法鍠嶇划娆忕暦娴兼潙绠婚悹鍝勬惈閻忓﹤鈹戦悙鍙夘棡闁瑰憡鎮傚畷褰掑磼濞戞牔绨婚梺鍝勬川閸嬬偤宕抽悷鎵虫斀闁跨喓濯Λ鎴犵磼鏉堛劍灏伴柟宄版噽閹风娀鍩勯崘顏呮闂傚倷鐒﹂幃鍫曞礉瀹�鍕�舵繝闈涱儜缂嶆牠鐓崶銊﹀婵炲樊浜堕弫鍌炴煕閺囥劌浜為柣娑掓櫅閳规垿鎮╅崹顐ｆ瘎婵犳鍠栭顓㈡晸閼恒儱鍤柛鎾跺枎椤曪綁骞庨懞銉︽珫闂佸憡娲﹂崢楣冩晬濠靛洨绠鹃弶鍫濆⒔閸掍即鏌熺喊鍗炰簼闁绘閰ｅ鍝勑ч崶褏鍔撮梺鎼炲妽婵炲﹤鐣烽幋锕�围濠㈣泛鑻粊锕傛⒑绾懏褰х紒鐘冲灴閿濈偤宕ㄧ�涙鍘梺鍓插亝缁诲啴宕抽崷顓ㄦ嫹鐟欏嫭灏俊顐ｇ箓椤繐煤椤忓拋妫冨┑鐐村灦濮樸劑顢欐繝鍐瘈婵炲牆鐏濋弸鐔哥箾閸忚偐鎳囨い銏″哺閺佹劙宕ㄩ娑欑杺闂傚倷绶￠崣蹇涙⒔閸曨叏鎷烽棃娑氱劯婵﹥妞藉Λ鍐ㄢ槈濮橆剦鏆繝纰樻閸嬪懐绮欓幒妤�鐤鹃柛顐ｆ礃閻掕偐锟藉箍鍎卞Λ娑㈠储闁秵鐓熼幖鎼灣缁夌敻鏌涢幘瀵告噭缂佸倹甯￠崺锟犲磼濡湱鐩庨梻渚�娼ч悧鍡涘箠鎼淬劍鏅搁柤鎭掑劜閸婃劙鏌涢埡鍐ㄤ槐妤犵偛顑夐弫鍌炴寠婢舵稒瀚瑰瀣嚱閹风兘鎮烽弶娆炬闂佸摜濮甸悧鏇㈠煝閹捐閱囬柡鍥╁暱閹锋椽姊洪崨濠勨槈妞ゎ収鍓熼幃鐐寸附閸涘﹦鍘卞┑鐐村灥瀹曨剟鎮橀敐澶嬬厽闁圭偓鍓氶崕鏃堟煛瀹�瀣М闁诡喒鏅犻幊锟犲Χ閸モ晝宕堕梻鍌欑窔濞佳兾涢幘顔肩闁绘垼濮ら埛鎴︽煕濠靛棗顏撮柛搴㈠姈娣囧﹪顢曢姀鐘虫閻庢鍠栭…鐑藉箖閵忋倕宸濆┑鐘插鑲栨繝寰锋澘锟窖呭緤娴犲鐤い鏍剱閺佷胶锟藉箍鍎遍ˇ浼村煕閹达附鐓欓柟顖涙緲琚氶梺杞扮窔娴滃爼寮婚悢鍏煎仭闁绘鐗嗛弸鐘绘倵濞堝灝鏋涙い顓犲厴瀵偊骞囬鐐电獮婵犵數濮撮崰姘涢悢鍏尖拻濞达絿顭堥ˉ蹇涙煟閹惧磭澧︾�规洘婢樿灃闁告侗鍘鹃敍娆忣渻閵堝棛澧柛鈺佸暣瀵劑鎳為妷锝勭盎闂佸搫娲ㄩ崑鐐核夐悩鐢电＜濠㈣泛锕﹂崺锝夋煛瀹�锟介崰鏍х暦濞嗘挸围闁糕剝顨忔导锟�
				if(!team.isInTeam(newLeaderRoleId))
					return true;//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柟缁㈠枟閸庡顭块懜闈涘缂佺嫏鍥ㄧ厱闁哄秲鍊曟晶鏌ユ倵濮樻剚娼愬ǎ鍥э躬婵″爼宕熼鐐差瀴闂備礁鎲￠悷銉ф崲濮楋拷瀵鎮㈤搹鍦紲闂侀潧绻掓慨鐢告倶瀹ュ鈷戠紒瀣仢椤掋垺銇勯妸銉﹀殗濠碘剝鎸抽獮鎺楀箣椤撶喎鍏婇梻浣虹帛閸旓箓宕滃▎鎿冩晜闁割偅娲橀埛鎺懨归敐鍥╂憘闁搞倕鍟撮弻娑⑩�﹂幋婵堜桓闂佽鍠氶崑銈夊极閸愵喗鏅稿ù鐘差儛閺佸鏌曟径鍡樻珔缂侊拷鐎ｎ偁浜滈柡宥冨妽閻ㄦ垿鏌ｉ妶蹇斿婵犵绱曢崑鎴﹀磹閺嶎偅鏆滃┑鐘插椤愪粙鏌嶉妷锔剧獮婵炴垯鍨洪崑鍕倶韫囧海鍔嶉柡鍌︽嫹闂傚倷鑳剁划顖炲礉閺囩倣鐔哥節閸パ冩優闂佺粯鏌ㄩ崥瀣偂閺囩喍绻嗘い鏍ㄧ矊瀛濆┑鐐额嚋缁犳挸鐣烽幋锕�围濠㈣泛顑囬崢顏呯節閻㈤潧孝婵炲鍏樺畷銏犫槈閵忥紕鍘告繝銏ｆ硾椤戝棝濡靛┑鍥ㄥ弿濠电姴鍋嗛悡鑲╋拷瑙勬礃鐢帡锝炲┑瀣垫晢濠电姴鍟鍫曟⒑瑜版帗锛熺紒锟芥担鍝勵棜閻犲洦绁撮弨浠嬫煟濡搫绾ч柟鍏煎姉缁辨帡鎮敓浠嬪垂閸洖钃熼柨婵嗩槸缁狅綁鏌ㄥ┑鍡樺晽闁瑰墽绮悡鐔兼煙閹屽殶闁瑰啿鎳愮槐鎺撴綇閵娿儳顑傞梺璺ㄥ枑閺嬭崵绱為崱妯碱洸闁绘劕顕々鐑芥煏瀵版盯顣︾花濠氭⒑閻熺増鎯堟い鎴濇嚇閹﹢顢欓崜褏锛滃銈嗘礀閹冲骸顕ｉ绛嬫闁绘劕妯婇崕鏃堟煛娴ｇ锟藉骞夐幘顔芥櫜闁糕剝顨忔导鏍⒒閸屾艾锟介绮堟笟锟介獮澶愭晬閸曨厾鐓撻梺纭呮彧闂勫嫰寮插┑瀣叆闁哄洨鍋涢敓鑺ユ倐閹潡顢氶敓浠嬪蓟閵堝洤鏋堥柛妤冨仜椤偆绱掗悙顒�鍔ら柕鍫熸倐瀵鏁愰崨鍌滃枛瀹曨偊宕熼浣烘И闂傚倷娴囬褏鎹㈤崼銉ョ？闁汇垻顭堥拑鐔兼煏婵炵偓娅呴柛妤勬珪娣囧﹪顢涘┑鍥朵哗婵炲鍘ч悧鍡涒�旈崘顔嘉ч柛鎰╁妿娴犳儳鈹戦埥鍡椾簻闁哥噥鍋婇幃楣冩煥鐎ｎ剟妾梺鍛婄☉閿曘倖绂嶅鍫熲拺闁告稑锕﹂幊鍐┿亜閿旇鐏﹂柟顖欐祰椤﹁鎱ㄦ繝鍌ょ吋鐎规洘甯掗埢搴ㄥ箳閹存繂鑵愮紓鍌氬�风欢锟犲闯椤曪拷瀹曞湱鎹勬笟顖氭婵犵數濮甸懝鐐劔闂備焦瀵уΛ浣规叏閵堝鍋熼柣鎴ｅГ閻撴瑩鏌ら崷顓烆暭鐟滄妸鍛＜闁圭粯甯楅崑銉╂煙椤栨氨鐒哥�规洖宕—鍐磼濡粯婢戦梻鍌欒兌缁垵鎽悷婊勬緲閸熸挳寮幘瀵割浄閻庯綆鍋呴柨顓㈡煕濡ゅ懍鎲鹃柡灞剧洴椤㈡洟鎮╅幓鎺戭潥闂備胶绮幐鍫曞磿閻㈢钃熼柨婵嗩槸閸楁娊鏌ｉ幇顖ｅ殝闁归鍏樺畷鐑筋敇閵婏箑顏跺┑顔筋焽閸嬫挾锟芥熬鎷�?
				Long[] roleids = new Long[2];
				if(oldLeaderRoleId < newLeaderRoleId)
				{
					roleids[0] = oldLeaderRoleId;
					roleids[1] = newLeaderRoleId;
				}
				else
				{
					roleids[0] = newLeaderRoleId;
					roleids[1] = oldLeaderRoleId;
				}
				this.lock(mkdb.Lockeys.get(xtable.Locks.ROLELOCK,(Object[])roleids));
				//lock end

				now = System.currentTimeMillis();

				if (checkPvP(oldLeaderRoleId, newLeaderRoleId) != 0) {
					return true;
				}

				if(!checkLeaderOnline(oldLeaderRoleId))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傤槰缂備緡鍠栭惌鍌炲春閵夛箑绶為柟閭﹀墻濞煎﹪姊洪悙钘夊姎闁告ɑ鐗犻幃鐣岀磼濡偐鐦堥梺姹囧灲濞佳囧煝閸喓绠惧ù锝呭暱濞村倿寮崟顖涚厱闁斥晛鍟伴埦渚�鏌涚�ｎ亜锟藉潡寮婚敓鐘茬倞闁靛鍎虫禒楣冩⒑缂佹ɑ灏柛搴ｆ暬瀵鏁撻悩鑼紲濠电偞鍨堕敃鈺呭吹鐎ｎ喗鈷戦悹鍥ｏ拷宕囦哗闂佺粯顨呭Λ婵嬪春閻愬搫绠ｉ柨鏇嫹闁诲繑濞婇弻褑绠涢敐鍛盎婵炲濮甸幐鍐差潖濞差亜浼犻柛鏇ㄥ墯閹烽亶姊洪悜鈺傛珦闁搞劏椴哥粚杈ㄧ節閸パ囧敹闂佸搫娲ㄩ崑娑氱玻濞戙垺鈷戦柛婵嗗濡插綊鏌涢妸褎鏆�规洩绲剧换婵嬪炊閵娿垺瀚藉┑鐐舵彧缂嶏拷濠殿喓鍊濇俊鎾礃椤忓棛锛滈梺璺ㄥ枙婵倝骞忛崨瀛樻優闁革富鍘鹃崢鐘绘⒒娴ｈ棄鍚归柛鐘冲姈缁旂喖宕卞☉妯昏緢闂佹寧娲栭崐褰掓偂濞嗘挻鈷掗柛灞惧嚬閸ょ喐銇勯敂鑲╃暤闁哄本绋戦埢搴ょ疀閵夈儱顫犵紓鍌欐祰妞村摜鏁幒妤�鐓″璺侯煬濞尖晠鏌涜箛姘汗缂佸銇榓l闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴闇夐柨婵嗙墛閵嗗啴鏌ｉ幒鎴含闁哄本绋戦埥澶娾枎閹邦喚鈻忕紓鍌欒兌婵參宕归崼鏇炶摕闁靛ň鏅滈崑鍡涙煕鐏炲墽鈽夋い蹇ユ嫹?
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傤槰缂備緡鍠栭惌鍌炲春閵夛箑绶為柟閭﹀墻濞煎﹪姊洪悙钘夊姎闁告ɑ鐗犻幃鐣岀磼濡偐鐦堥梺姹囧灲濞佳囧煝閸喓绠惧ù锝呭暱濞村倿寮崟顖涚厱闁斥晛鍟伴埦渚�鏌涚�ｎ亜锟藉潡寮婚敓鐘茬倞闁靛鍎虫禒楣冩⒑缂佹ɑ灏柛搴ｆ暬瀵鏁撻悩鑼紲濠电偞鍨堕敃鈺呭吹鐎ｎ喗鈷戦悹鍥ｏ拷宕囦哗闂佺粯顨呭Λ婵嬪春閻愬搫绠ｉ柨鏇嫹闁诲繑濞婇弻褑绠涢敐鍛盎婵炲濮甸幐鍐差潖濞差亜浼犻柛鏇ㄥ墯閹烽亶姊洪悜鈺傛珦闁搞劏椴哥粚杈ㄧ節閸パ呯暰闂佽顔栭崰姘跺级閹间焦鈷戦柛婵嗗閿熻棄缍婇、鏍р枎閹邦剦鍤ら梺璺ㄥ櫐閹凤拷,LeaderID: " +oldLeaderRoleId);
				}
				else if(!checkTeamStatusValid(team))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｈ鲸顨ラ悙鎼畼缂佽鲸鎸搁濂稿幢濡ゅ啩鎮ｇ紓鍌欐祰妞村摜鏁垾宕囨殾婵犲﹤瀚刊鎾⒒閿熶粙骞囬褎缍楅梻鍌氬�风粈渚�骞栭锕�瀚夋い鎺戝閸庡孩銇勯弽銊ュ毈闁搞倖娲熼弻鐔虹磼閵忕姵鐏堥柟顖滃枛濮婃椽妫冨☉姘暫濠电偠顕滅粻鎾愁嚕閸欏闄勯柛娑樑堥幏缁樼箾鏉堝墽绉俊顐㈠钘熺�广儱妫庢禍婊勩亜閹扳晛鐒烘俊顖ゆ嫹闁诲氦顫夊ú妯好洪悢鑲╁祦閹兼番鍔嶇�电姴顭跨捄楦垮鐎殿喓鍔岄埞鎴︽偐椤旇偐浼囬梺绯曟櫆閻楃姴鐣峰┑瀣嵆闁绘ê鍚�缁楀姊洪悡搴綗闁稿ě鍥х濡炲瀛╅崰鍡涙煕閺囥劌澧版い锔哄劚閳规垿鎮欏顔筋�嗙紓浣哄У閹稿骞堥妸鈺傛櫢濞寸姴顑嗛悡蹇涚叓閸パ岀叚闁归鍏橀幖褰掝敃閵堝繑瀚瑰Δ锝呭暞閳锋帒霉閿濆懏鍟為柟顖氱墛閵囧嫰鏁傜拠鑼桓闂佽鍠楅敋闁宠鍨垮畷濂稿閳藉懐纭�闂佽崵鍠愮划宀�鎹㈤幒鎳筹綁骞囬弶璺唺濠德板�ч幏椋庣棯閹冩倯缂佺粯鐩獮瀣倷閸℃ê鐏╅柟椋庡█閹瑧锟介潧鎽滈惁鍫㈢磼閻愵剚绶叉い锕佷含婢规洟宕稿Δ浣哄幈闂婎偄娲﹀Λ鎴︽嚀鐠侯煉鎷峰▓鍨珮闁稿锕ら悾宄邦潨閿熶粙銆佸▎鎾村殟闁靛瀵屾禒褔姊婚崒娆戭槮闁告艾顑嗙粋宥嗙鐎ｎ亞锛熼梺鍝勮閸庤京澹曢崸妤佺厽闁哄倽娉曞▓閬嶆煛閿熻姤绂掔�ｎ偆鍘藉┑鈽嗗灠閹碱偆鐥椤法鎹勯崫鍕典純闂佸搫鑻粔褰掑蓟閵娧嶆嫹閿濆簼绨奸悹鍥╁仱濮婃椽宕崟顒佹嫳闂佺儵鏅╅崹鍫曟偘椤曪拷瀹曞爼顢楅敓鐣岀矆閸岀偞鐓曟繝闈涘閸斻倖绻涙径濠冨仴婵﹦绮幏鍛村川婵犲啫鍓垫俊鐐�栭崹闈浳涘┑瀣畾闁告洦鍨奸弫宥夋煟閹邦垰钄奸柟鑺ユ礋濮婅櫣鎹勯妸銉︾亖婵犳鍠楅幐鎶芥偘椤曪拷婵拷闁挎稑瀚鏇㈡⒑閻熼偊鍤熼柛搴㈠姇閳绘捇寮撮姀锛勫幈闂佺粯锚閸熷潡宕悜妯诲弿濠电姴鎳忛鐘绘煙妞嬪骸鈻堥柛銊﹀劤閻ｇ兘宕堕敃锟介幗瀣⒒閸屾瑧顦﹂柟鑺ョ矒瀹曚即骞囬澶屽姺濠电偛妫欓幐濠氬磻閳哄懏鐓熼柟杈剧到琚氶梺绋款儏鐎氼噣鎯�椤忓牆绠�癸拷閸曨偅鎳欓梻浣告惈閹锋垹绱炴担鍓叉綎闁惧繐婀辩壕鍏间繆椤栨碍鎯堟い顐㈢Ч濮婃椽宕ㄦ繝鍐虎闂佸憡渚楅崹顖滅箔婢舵劖鈷戦悷娆忓缁�鍐┿亜閺囧棗娲︾�氬懘鏌ｉ弬鍨倯闁绘挾鍠栭弻锟犲礃閵娿儻鎷烽悽绋跨闁跨喓濮甸悡娑樏归敐鍥剁劸妞ゅ浚鍙冮弻鐔碱敊閼测晝楔濡ょ姷鍋樼欢姘剁嵁閹烘绠ｆ繝鍨姉閿熺晫鍏樺缁樻媴閸濆嫬濮﹂梺鍛婃尰缁诲牓鍨鹃敃鍌氱倞闁冲搫鍋嗗鐔兼⒑鐟欏嫬鍔ら柣掳鍔嶉崚濠囧级閹炽劌缍婇幃鈺侇啅椤旂厧澹堥梻浣告贡閺咁偊寮拠宸綎婵炲樊浜濋崵鎺楁煏閸繃鍣烘慨锝嗗姍濮婃椽宕崟顒�娅ф繝鐢靛剳閹风兘姊虹拠鈥虫灆闁告濞婇妴浣糕枎閹惧磭顔掗梺鍛婁緱閸犳牠顢旈崼鏇熲拺闁圭娴风粻鎾绘煕閹存粎鐭欐鐐茬箻閹粎绮电�ｎ偅娅嶉梻浣虹帛閿氱�殿喖鐖奸幃妯绘媴閾忓湱锛濇繛杈剧导缁瑩宕ú顏呭仺妞ゆ牗绋戠粭鈺呮煟韫囨柨娴慨濠傤煼瀹曟帒顫濋濠冨闁归棿鐒﹂崑銈夋煏婵炵偓娅呯紒鎰殕閹便劌顫滈崱妤�绠荤紓浣叉閹风兘姊绘担鍦菇闁搞劏妫勯…鍥槼缂佸倹甯￠弫鍐磼濞戞艾骞堥梻渚�娼ч…鍫ュ磿閹惰棄鏄ラ柨婵嗘－濞堜粙鏌ｉ幇顒夊殶濠⒀呮暬閺屾盯鍩＄�ｎ剛鐦堥悗瑙勬磸閸旀垿銆佸锟介幃娆撶叓椤撶喎鏋ら梻鍌氬�搁崐鐑芥倿閿曞倸纾跨�规洖娲﹀畷鏌ユ煙闁箑澧鹃柤鏉挎健瀵爼宕煎顓熺彇婵炴垶鎸哥粔褰掑蓟閿熺姴纾兼繛鎴濆船閸斿矂姊虹紒妯荤叆婵☆偅绻堝濠氬Χ婢跺﹦顔愭繛杈剧秬椤鏌ㄩ鐔虹瘈婵炲牆鐏濋弸娑㈡煟濡や焦宕岀�殿喛顕ч埥澶愬閻樻爠鍥ㄧ厱婵炴垵宕鎯归悡搴℃殻婵﹥妞藉畷顐﹀礋椤曞懏钑夐梻浣侯焾閿曘儳鎹㈤崼銉﹀仒妞ゆ梻鏅悷褰掓煥閻斿墎鐭欓柣娑卞櫍楠炴帒螖閿熺晫绮婚敐鍡欑瘈闂傚牊绋掗敍宥嗙箾閸忚偐娲存慨濠勭帛閹峰懘鎮滃Ο鐑樼暚闂備礁鎲￠懝楣冾敄閸涚补锟斤箓宕惰閺嬪酣鏌熼幆褏鎽犳繛鍛搐椤啴濡堕崨顖滎唶闁诲孩鑹鹃崲鏌モ�﹂崶顒�鍐�鐟滃寮ㄦ禒瀣厽婵☆垵娅ｉ弸鍐熆鐟欏嫷鐒界紒杈ㄥ浮閺佹挻绂掔�ｎ亞顦ㄩ梺宕囨嚀閵囨鑺辨繝姘棅妞ゆ劑鍨烘径鍕煙閸涘﹥鍊愭い銏℃椤㈡棃宕奸悢鍝勫箺闂傚鍋勫ú锕傚箰閻愵剚娅犻柨鏃囧Г閸欏繐鈹戦悩鎻掓殲闁靛洦绻勯敓鍊燁潐濞诧箓宕戞繝鍌滄殾闁绘梻鈷堥弫鍡楊熆鐠轰警鍎滅紒杈殕缁绘繈鎮介棃娑楃捕闂佸鏉垮闁告帗甯掗悾婵嬪礋椤掞拷娴滎垶姊虹紒妯诲碍閻庡灚甯″畷鐢稿即閻旂繝绨婚梺瑙勬緲閻栫厧顬婇锟介弻锟犲川椤旇棄锟芥劙鏌＄仦璇插闁诡喓鍊濆畷鎺戔槈濮楀棔绱�?(illegal)
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｈ鲸顨ラ悙鎼畼缂佽鲸鎸搁濂稿幢濡ゅ啩鎮ｇ紓鍌欐祰妞村摜鏁垾宕囨殾婵犲﹤瀚刊鎾⒒閿熶粙骞囬褎缍楅梻鍌氬�风粈渚�骞栭锕�瀚夋い鎺戝閸庡孩銇勯弽銊ュ毈闁搞倖娲熼弻鐔虹磼閵忕姵鐏堥柟顖滃枛濮婃椽妫冨☉姘暫濠电偠顕滅粻鎾愁嚕閸欏闄勯柛娑樑堥幏缁樼箾鏉堝墽绉俊顐㈠钘熺�广儱妫庢禍婊勩亜閹扳晛鐒烘俊顖ゆ嫹闁诲氦顫夊ú妯好洪悢鑲╁祦閹兼番鍔嶇�电姴顭跨捄楦垮鐎殿喓鍔岄埞鎴︽偐椤旇偐浼囬梺绯曟櫆閻楃姴鐣峰┑瀣嵆闁绘ê鍚�缁楀姊洪悡搴綗闁稿ě鍥х濡炲瀛╅崰鍡涙煕閺囥劌澧版い锔哄劚閳规垿鎮欏顔筋�嗙紓浣哄У閹稿骞堥妸鈺傛櫢濞寸姴顑嗛悡蹇涚叓閸パ岀叚闁归鍏橀幖褰掝敃閵堝繑瀚瑰Δ锝呭暞閳锋帒霉閿濆懏鍟為柟顖氱墛閵囧嫰鏁傜拠鑼桓闂佽鍠楅敋闁宠鍨垮畷濂稿閳藉懐纭�闂佽崵鍠愮划宀�鎹㈤幒鎳筹綁骞囬弶璺唺濠德板�ч幏椋庣棯閹冩倯缂佺粯鐩獮瀣倷閸℃ê鐏╅柟椋庡█閹瑧锟介潧鎽滈惁鍫㈢磼閻愵剚绶叉い锕佷含婢规洟宕稿Δ浣哄幈闂婎偄娲﹀Λ鎴︽嚀鐠侯煉鎷峰▓鍨珮闁稿锕ら悾宄邦潨閿熶粙銆佸▎鎾村殟闁靛瀵屾禒褔姊婚崒娆戭槮闁告艾顑嗙粋宥嗙鐎ｎ亞锛熼梺鍝勮閸庤京澹曢崸妤佺厽闁哄倽娉曞▓閬嶆煛閿熻姤绂掔�ｎ偆鍘藉┑鈽嗗灠閹碱偆鐥椤法鎹勯崫鍕典純闂佸搫鑻粔褰掑蓟閵娧嶆嫹閿濆簼绨奸悹鍥╁仱濮婃椽宕崟顒佹嫳闂佺儵鏅╅崹鍫曟偘椤曪拷瀹曞爼顢楅敓鐣岀矆閸岀偞鐓曟繝闈涘閸斻倖绻涙径濠冨仴婵﹦绮幏鍛村川婵犲啫鍓垫俊鐐�栭崹闈浳涘┑瀣畾闁告洦鍨奸弫宥夋煟閹邦垰钄奸柟鑺ユ礋濮婅櫣鎹勯妸銉︾亖婵犳鍠楅幐鎶芥偘椤曪拷婵拷闁挎稑瀚鏇㈡⒑閻熼偊鍤熼柛搴㈠姇閳绘捇寮撮姀锛勫幈闂佺粯锚閸熷潡宕悜妯诲弿濠电姴鎳忛鐘绘煙妞嬪骸鈻堥柛銊﹀劤閻ｇ兘宕堕敃锟介幗瀣⒒閸屾瑧顦﹂柟鑺ョ矒瀹曚即骞囬澶屽姺濠电偛妫欓幐濠氬磻閳哄懏鐓熼柟杈剧到琚氶梺绋款儏鐎氼噣鎯�椤忓牆绠�癸拷閸曨偅鎳欓梻浣告惈閹锋垹绱炴担鍓叉綎闁惧繐婀辩壕鍏间繆椤栨碍鎯堟い顐㈢Ч濮婃椽宕ㄦ繝鍐虎闂佸憡渚楅崹顖滅箔婢舵劖鈷戦悷娆忓缁�鍐┿亜閺囧棗娲︾�氬懘鏌ｉ弬鍨倯闁绘挾鍠栭弻锟犲礃閵娿儻鎷烽悽绋跨闁跨喓濮甸悡娑樏归敐鍥剁劸妞ゅ浚鍙冮弻鐔碱敊閼测晝楔濡ょ姷鍋樼欢姘剁嵁閹烘绠ｆ繝鍨姉閿熺晫鍏樺缁樻媴閸濆嫬濮﹂梺鍛婃尰缁诲牓鍨鹃敃鍌氱倞闁冲搫鍋嗗鐔兼⒑鐟欏嫬鍔ら柣掳鍔嶉崚濠囧级閹炽劌缍婇幃鈺侇啅椤旂厧澹堥梻浣告贡閺咁偊寮拠宸綎婵炲樊浜濋崵鎺楁煏閸繃鍣洪柣婵勫灪缁绘繄鍠婂鍫熷闁惧浚鍋勭粣娑㈡⒑閸涘﹤绗氶悽顖ょ節閵嗕礁顫滈敓鑺ユ叏閿熶粙鏌嶉妷銉ュ笭缂併劌顭峰缁樻媴閾忕懓绗￠梺鐓庣秺缁犳牠骞冨ú顏勎╃憸婵嬪箯瀹勯偊娼╂い鎺戝�绘闂備礁鎼悮顐﹀礉瀹�鍕厴闁硅揪绠戦獮銏＄箾閸℃绠版慨锝呯墦濮婄粯鎷呮笟顖涙暞闁诲繐绻戦悷鈺佺暦閹达箑绠婚柤鎼佹涧鎼村﹤鈹戦悙鏉戠仸闁活収鍠栭埢浠嬵敂閸喓鍘遍柣蹇曞仜婢т粙宕弻銉︾厵濡炲楠搁崢瀵革拷娈垮枟閹告娊宕哄Δ鍛厸閻庯綆鍋勯鍫曟⒑閸濆嫬鏆欓柣妤�妫涚划鍫ュ礃閳瑰じ绨婚棅顐㈡处閹告悂顢楅姀銈嗗�垫慨姗嗗墰缁夋椽鏌＄仦璇插闁宠鍨垮畷鍗炩槈閹插瀚规俊銈忔嫹妞ゎ叀鍎婚¨渚�鏌涢悩宕囧⒌婵狅拷娓氾拷濮婅櫣绱掑鍫滅返闂佺顑呴幊搴ㄥ煝瀹ュ骞㈡繛鎴炵懅閸橆亪姊洪幖鐐插妧闁告劕褰炵槐鏂库攽閻樻剚鍟忛柛锝庡灦楠炲繘鎮滈懞銉㈡嫼闂佺粯鍔樺Λ鍕礉濮樿京妫紓浣靛灩楠炴鎮楁担鍐ㄤ汗濞寸媴绠撳畷婊嗩槾闁伙箑鐗忕槐鎺楀礈瑜嶉。濂告煥閺囥劌浜版鐐茬箰閻ｏ繝骞嶉鑺ヮ啎闂備焦鎮堕崕顖炲礉瀹ュ绐楅柡宥庡幗閳锋帒霉閿濆洤鍔嬮柛銈忔嫹闂備焦鎮堕崹娲偂閿熺姷宓佸┑鐘插亞濞笺劑鏌ㄩ悢鍓佺煓闁绘侗鍣ｅ畷姗�顢欓挊澶涙嫹婵犳碍鐓㈡俊顖欒濡茬儤銇勯幘璺哄付妞ゎ亜鍟存俊鍫曞幢濮楀棙鈷栭柣搴ゎ潐濞叉粓寮繝姘卞祦闁硅揪绠戦崡鎶芥煏韫囧﹥顎嗛柟宄邦煼濮婅櫣绮欓幐搴㈡嫳闂佽崵鍟欓崶浣告喘閺佸啴宕掑☉姘箥缂備胶鍋撳妯虹暦椤掍胶顩查柟娈垮櫙閹烽鎲撮崟顒傤槰闂佸憡姊归敃銏′繆閻㈢绠涢柡澶庢硶椤斿﹪鏌ｆ惔顖滅К闁糕晜鐗滈敓鑺ヨ壘缂嶅﹪寮诲☉銏犵疀闂傚牊绋掗悘鍫㈢磽娴ｅ搫校缂佸甯℃俊鐢稿礋椤栨氨鐫勯梺绋挎湰缁秹骞夊Ο琛℃斀闁绘劘娉涙禍褰掓煕閻樺磭澧い顐㈢箻閹煎湱鎲撮崟顐わ紡闂備線娼ч…鍫ュ磿閺屻儲鍋熼柕蹇嬪�栭埛鎴︽煟閻斿憡绶叉繛鍫氭櫊閺岀喖宕欓妶鍡楊伓,teamId: " +teamId);
				}
				else if(!checkTeamNotInSwitchStatus(team))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｈ鲸顨ラ悙鎼畼缂佽鲸鎸搁濂稿幢濡ゅ啩鎮ｇ紓鍌欐祰妞村摜鏁垾宕囨殾婵犲﹤瀚刊鎾⒒閿熶粙骞囬褎缍楅梻鍌氬�风粈渚�骞栭锕�瀚夋い鎺戝閸庡孩銇勯弽銊ュ毈闁搞倖娲熼弻鐔虹磼閵忕姵鐏堥柟顖滃枛濮婃椽妫冨☉姘暫濠电偠顕滅粻鎾愁嚕閸欏闄勯柛娑樑堥幏缁樼箾鏉堝墽鍒伴柟纰卞亞閺侇噣宕滄担铏癸紳閻庡箍鍎遍幏鎴﹀礉閻旇櫣纾兼い鏃傗拡閻撹偐锟芥鍠曠划娆撱�佸锟介幃娆撴嚋閸偄鏆梻鍌氬�峰ù鍥р枖閺囥垹绐楅柟鎯х摠閸欏繘鏌熺紒銏犳灍闁稿﹤鍢查埞鎴︽偐閹绘帩浠鹃梺鍝ュУ閸旀瑩鎮￠锕�鐐婇柕濞э拷濡插牏绱撴担鍝勑ｆ俊鐐扮矙瀵鏁愰崨鍌滃枔閸犲﹥娼忛妸锔诲敹闂傚倷绀佸﹢閬嶅礂濮楋拷钘熼柟鎹愵嚙缁犵喖鏌熺紒銏犳灈缂侊拷鐎ｎ偁浜滈柟鐑樺灥娴滅偞淇婇煫顓炲祮婵﹦绮幏鍛存惞閻熸壆顐奸梻浣烘嚀閹诧繝骞愰幎钘夋瀬闁瑰墽绮崵宥夋煏婢跺牆鍔氭い顐簻閳规垿鎮欓幓鎺撳�梺缁橆殕濞茬喖宕洪悙鍝勭闁挎洩鎷风痪鎯у悑閹便劌顫滈崱妤�绠归梺鍝勬閻楁挸顫忛搹鍦煓婵炲棙鍎抽崜浼存煟鎼淬垻鐓柛妤�鍟块锝囨嫚濞村顫嶅┑鐘诧工閹虫劙寮堕幖浣光拺閻熸瑥瀚粈鍐╃箾閸涱喗绀嬬�规洘鍔欓、娑㈡倷缁瀚煎┑鐐存綑閸氬鎮烽妸鈺婃晣闁惧繐婀辩壕鐣岋拷骞垮劚鐎氼噣藝閿斿浜滄い鎰╁灮缁犺崵锟借娲﹂崑濠傜暦閻旂厧绠犵�瑰嫮澧楅幖鎰版煟閹邦剨鍔熼柟鍙夌摃缁犳盯寮崒銈嗙カ濠电娀娼ч崐鎼佸箟閿熺姴鐓曢柟瀵稿仦閸欏繘鏌ｉ悢鍝勵暭闁瑰吋鍔欓弻銊╂偄鐠囨畫鎾寸箾閸欏澧遍柛娆忔噹椤啴濡堕崱妯虹殤闂佺顑嗛幑鍥极閹捐绠ｉ柟鐑樻濡差喖顪冮妶搴′簼缂佽鍟撮弫宥夊箛椤戣姤鏂�闂佹悶鍎崝宥夋偟濠婂牊鈷掗柛灞剧懅椤︼箓鏌熷ù瀣舵嫹鐡掍焦妞介弫鍐磼濮橀硸妲舵繝鐢靛仜濡瑩宕濆Δ鍛拷鍛存嚑椤掍礁鏋戦梺缁橆殔閻楀棛绮鑸电厓闂佸灝顑呴悘銉╂煃鐟欏嫬鐏寸�规洘甯掗～婵嬵敇閻愬瓨鐣兼繝鐢靛仜閻°劑宕垫惔銊ョ９婵犻潧顑呴拑鐔兼煟閺冨倸甯剁紒锟介崟顖涚厪闁割偅绻冮ˉ婊勩亜韫囥儲瀚�??
					//psend(oldLeaderRoleId, new STeamError(TeamError.InChangeLeaderStatus));
					fire.pb.talk.MessageMgr.psendMsgNotify(oldLeaderRoleId, 141210, null);
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｈ鲸顨ラ悙鎼畼缂佽鲸鎸搁濂稿幢濡ゅ啩鎮ｇ紓鍌欐祰妞村摜鏁垾宕囨殾婵犲﹤瀚刊鎾⒒閿熶粙骞囬褎缍楅梻鍌氬�风粈渚�骞栭锕�瀚夋い鎺戝閸庡孩銇勯弽銊ュ毈闁搞倖娲熼弻鐔虹磼閵忕姵鐏堥柟顖滃枛濮婃椽妫冨☉姘暫濠电偠顕滅粻鎾愁嚕閸欏闄勯柛娑樑堥幏缁樼箾鏉堝墽鍒伴柟纰卞亞閺侇噣宕滄担铏癸紳閻庡箍鍎遍幏鎴﹀礉閻旇櫣纾兼い鏃傗拡閻撹偐锟芥鍠曠划娆撱�佸锟介幃娆撴嚋閸偄鏆梻鍌氬�峰ù鍥р枖閺囥垹绐楅柟鎯х摠閸欏繘鏌熺紒銏犳灍闁稿﹤鍢查埞鎴︽偐閹绘帩浠鹃梺鍝ュУ閸旀瑩鎮￠锕�鐐婇柕濞э拷濡插牏绱撴担鍝勑ｆ俊鐐扮矙瀵鏁愰崨鍌滃枔閸犲﹥娼忛妸锔诲敹闂傚倷绀佸﹢閬嶅礂濮楋拷钘熼柟鎹愵嚙缁犵喖鏌熺紒銏犳灈缂侊拷鐎ｎ偁浜滈柟鐑樺灥娴滅偞淇婇煫顓炲祮婵﹦绮幏鍛存惞閻熸壆顐奸梻浣烘嚀閹诧繝骞愰幎钘夋瀬闁瑰墽绮崵宥夋煏婢跺牆鍔氭い顐簻閳规垿鎮欓幓鎺撳�梺缁橆殕濞茬喖宕洪悙鍝勭闁挎洩鎷风痪鎯у悑閹便劌顫滈崱妤�绠归梺鍝勬閻楁挸顫忛搹鍦煓婵炲棙鍎抽崜浼存煟鎼淬垻鐓柛妤�鍟块锝囨嫚濞村顫嶅┑鐘诧工閹虫劙寮堕幖浣光拺閻熸瑥瀚粈鍐╃箾閸涱喗绀嬬�规洘鍔欓、娑㈡倷缁瀚煎┑鐐存綑閸氬鎮烽妸鈺婃晣闁惧繐婀辩壕鐣岋拷骞垮劚鐎氼噣藝閿斿浜滄い鎰╁灮缁犺崵锟借娲﹂崑濠傜暦閻旂厧绠犵�瑰嫮澧楅幖鎰版煟閹邦剨鍔熼柟鍙夌摃缁犳盯寮崒銈嗙カ濠电娀娼ч崐鎼佸箟閿熺姴鐓曢柟瀵稿仦閸欏繘鏌ｉ悢鍝勵暭闁瑰吋鍔欓弻銊╂偄鐠囨畫鎾寸箾閸欏澧遍柛娆忔噹椤啴濡堕崱妯虹殤闂佺顑嗛幑鍥极閹捐绠ｉ柟鐑樻濡差喖顪冮妶搴′簼缂佽鍟撮弫宥夊箛椤戣姤鏂�闂佹悶鍎崝宥夋偟濠婂牊鈷掗柛灞剧懅椤︼箓鏌熷ù瀣舵嫹鐡掍焦妞介弫鍐磼濮橀硸妲舵繝鐢靛仜濡瑩宕濆Δ鍛拷鍛存嚑椤掍礁鏋戦梺缁橆殔閻楀棛绮鑸电厓闂佸灝顑呴悘銉╂煃鐟欏嫬鐏寸�规洘甯掗～婵嬵敇閻愬瓨鐣兼繝鐢靛仜閻°劑宕垫惔銊ョ９婵犻潧顑呴拑鐔兼煟閺冨倸甯剁紒锟介崟顖涚厪闁割偅绻冮ˉ婊勩亜韫囥儲瀚�??,teamId: " +teamId);
				}
				else if(!checkTeamNoSuccSwitchIn2min(team))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂侀潧顦弲婊堟偂閻斿吋鐓涢柛銉㈡櫅娴犳粓鏌ㄩ悢缁橆棄婵狅拷闁秵鏅搁柤鎭掑劤閸熸煡鏌熼崙銈嗗2闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎喘濮婄粯鎷呴崨濠呯闂佺绨洪崐婵嗙暦閻㈠憡鏅濋柨鐔剁矙閸┿儲寰勬繛銏㈠枛閺屻劎锟斤綆鍋呭鎴︽⒒娴ｇ瓔鍤欓柛鎴犳櫕缁辩偤宕卞Ο纰辨锤闂佺粯鍔掔拃锕傚极婵犲洦鐓曢柕澶樺枛婢ь垶鏌嶉柨瀣伌闁诡喖鍢查埢搴ょ疀閹垮啩鎮ｇ紓鍌欑筏閹风兘鏌涢幇銊︽澓濞存粍绮撻弻锟犲炊瑜庨ˉ婊堟煙閾忣偄濮嶉柟顖氱焸瀹曞崬鈽夊▎鎴濆箞闂備線锟芥稑宓嗘繛浣冲洤鍑犻柣鏂垮悑閻撶喖鏌熼幆褏鎽犵紒锟介崘顏嗙＜缂備焦顭囧ú瀛橆殽閻愬樊鍎忛柍瑙勫灴瀹曞崬顫濋鍌氬箣闂傚倸鍊风粈渚�骞栭锔绘晞闁糕剝绋掗崕搴€亜閺嶎偄浠滈柦鍐枛閺屻劌鈹戦崱娆忊叡闂佹眹鍊ч幏鐑芥⒒娴ｅ憡璐￠柛瀣尭椤洤鈻庨幘鍐插殤闂佺粯顭囩划顖炲煕閹达附鐓曟繝闈涙椤忣亝绻濋敓鑺ュ鐎涙鍘介梺鍐叉惈閿曘倝鎮橀悩鐐戒簻闁哄浂浜炵粔顔姐亜閵忊�冲摵闁轰焦鎹囬幐濠冨緞鐏炵偓顔曢梻浣告贡閸庛倝宕洪崼婵愮劷闁冲搫鍊舵禍婊堟煙閹规劖纭炬い搴㈡崌閺岀喐顦版惔鈥冲箣濡ょ姷鍋涘Λ婊埶囬锟介弻锟犳晸閼恒儳顩烽悗锝庡亞閸樹粙姊鸿ぐ鎺戜喊闁告鏅槐鐐哄箣閻樼數锛滈梺鑲┾拡閸撴稓鏁☉姘辩＜缂備焦顭囬妴鎺撶箾閹存繄浠涙い锔惧閹棃鏁愰崶顭戞綋闂傚倸鍊烽懗鍓佸垝椤栨稓鐟规俊銈呮噹闂傤垶鏌ㄥ┑鍡╂Ш鐎规挷绶氶幃妤呮晲鎼粹剝鐏嶉梺鍝勬噺缁诲牓寮婚妸鈺傚亜闁告挷鑳堕悡鎾绘⒑閹稿海绠橀柛瀣ㄥ�曢悾鐑藉Ω瑜濋幏宄扳槈濞嗘鍔烽梺鍛婄懃濡鍩為幋锔藉亹缂備焦蓱闁款厼鈹戦埥鍡椾簼闁荤喆鍎甸、娆掔疀閹绢垱鏂�闁诲函缍嗛崑鍡涘储娴犲鈷戦柟绋挎捣缁犳挻淇婇锝囨噰濠碉繝娼ч埞鎴﹀炊閵娿儱浼庡┑鐘垫暩婵挳宕戦崱娑欏亗闁兼祴鏅幏椋庢喆閸曨剛顦ㄩ柣銏╁灡鐢繝鏁愰悙娴嬫斀閻庯絽鐏氶弲銏＄箾鏉堝墽绉い鏇熺墵瀹曨垶鏁撴禒瀣拻闁稿本鑹鹃敓浠嬵棑缁牊绗熼敓浠嬬嵁濡わ拷椤劑宕熼锟藉鍧楁⒑濮瑰洤鐏╅柟璇х節瀹曟垹锟斤綆鍠楅悡鐔镐繆椤栨粌鍔嬮柍缁樻礋閺屾盯濡堕崱妯碱槹闂佸搫鐬奸崰鏍嵁閸℃稑绾ч柛鐔峰暞閹瑰洭寮婚敓鐘插窛妞ゆ棁妫勯敓鑺ュ姍閺岋紕浠︾拠鎻掝潎闂佽鍠撻崐婵嗙暦閹烘垟妲堟慨妤�妫旂槐锟�
					//psend(oldLeaderRoleId, new STeamError(TeamError.ChangeLeaderInCD));
					fire.pb.talk.MessageMgr.psendMsgNotify(oldLeaderRoleId, 141209, null);
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂侀潧顦弲婊堟偂閻斿吋鐓涢柛銉㈡櫅娴犳粓鏌ㄩ悢缁橆棄婵狅拷闁秵鏅搁柤鎭掑劤閸熸煡鏌熼崙銈嗗2闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎喘濮婄粯鎷呴崨濠呯闂佺绨洪崐婵嗙暦閻㈠憡鏅濋柨鐔剁矙閸┿儲寰勬繛銏㈠枛閺屻劎锟斤綆鍋呭鎴︽⒒娴ｇ瓔鍤欓柛鎴犳櫕缁辩偤宕卞Ο纰辨锤闂佺粯鍔掔拃锕傚极婵犲洦鐓曢柕澶樺枛婢ь垶鏌嶉柨瀣伌闁诡喖鍢查埢搴ょ疀閹垮啩鎮ｇ紓鍌欑筏閹风兘鏌涢幇銊︽澓濞存粍绮撻弻锟犲炊瑜庨ˉ婊堟煙閾忣偄濮嶉柟顖氱焸瀹曞崬鈽夊▎鎴濆箞闂備線锟芥稑宓嗘繛浣冲洤鍑犻柣鏂垮悑閻撶喖鏌熼幆褏鎽犵紒锟介崘顏嗙＜缂備焦顭囧ú瀛橆殽閻愬樊鍎忛柍瑙勫灴瀹曞崬顫濋鍌氬箣闂傚倸鍊风粈渚�骞栭锔绘晞闁糕剝绋掗崕搴€亜閺嶎偄浠滈柦鍐枛閺屻劌鈹戦崱娆忊叡闂佹眹鍊ч幏鐑芥⒒娴ｅ憡璐￠柛瀣尭椤洤鈻庨幘鍐插殤闂佺粯顭囩划顖炲煕閹达附鐓曟繝闈涙椤忣亝绻濋敓鑺ュ鐎涙鍘介梺鍐叉惈閿曘倝鎮橀悩鐐戒簻闁哄浂浜炵粔顔姐亜閵忊�冲摵闁轰焦鎹囬幐濠冨緞鐏炵偓顔曢梻浣告贡閸庛倝宕洪崼婵愮劷闁冲搫鍊舵禍婊堟煙閹规劖纭炬い搴㈡崌閺岀喐顦版惔鈥冲箣濡ょ姷鍋涘Λ婊埶囬锟介弻锟犳晸閼恒儳顩烽悗锝庡亞閸樹粙姊鸿ぐ鎺戜喊闁告鏅槐鐐哄箣閻樼數锛滈梺鑲┾拡閸撴稓鏁☉姘辩＜缂備焦顭囬妴鎺撶箾閹存繄浠涙い锔惧閹棃鏁愰崶顭戞綋闂傚倸鍊烽懗鍓佸垝椤栨稓鐟规俊銈呮噹闂傤垶鏌ㄥ┑鍡╂Ш鐎规挷绶氶幃妤呮晲鎼粹剝鐏嶉梺鍝勬噺缁诲牓寮婚妸鈺傚亜闁告挷鑳堕悡鎾绘⒑閹稿海绠橀柛瀣ㄥ�曢悾鐑藉Ω瑜濋幏宄扳槈濞嗘鍔烽梺鍛婄懃濡鍩為幋锔藉亹缂備焦蓱闁款厼鈹戦埥鍡椾簼闁荤喆鍎甸、娆掔疀閹绢垱鏂�闁诲函缍嗛崑鍡涘储娴犲鈷戦柟绋挎捣缁犳挻淇婇锝囨噰濠碉繝娼ч埞鎴﹀炊閵娿儱浼庡┑鐘垫暩婵挳宕戦崱娑欏亗闁兼祴鏅幏椋庢喆閸曨剛顦ㄩ柣銏╁灡鐢繝鏁愰悙娴嬫斀閻庯絽鐏氶弲銏＄箾鏉堝墽绉い鏇熺墵瀹曨垶鏁撴禒瀣拻闁稿本鑹鹃敓浠嬵棑缁牊绗熼敓浠嬬嵁濡わ拷椤劑宕熼锟藉鍧楁⒑濮瑰洤鐏╅柟璇х節瀹曟垹锟斤綆鍠楅悡鐔镐繆椤栨粌鍔嬮柍缁樻礋閺屾盯濡堕崱妯碱槹闂佸搫鐬奸崰鏍嵁閸℃稑绾ч柛鐔峰暞閹瑰洭寮婚敓鐘插窛妞ゆ棁妫勯敓鑺ュ姍閺岋紕浠︾拠鎻掝潎闂佽鍠撻崐婵嗙暦閹烘垟妲堟慨妤�妫旂槐锟�,teamId: " +teamId);
				}
				else if(!checkNewLeaderNormal(team, newLeaderRoleId))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐ｇ珶閺嚶颁汗闁圭儤鎸鹃崢浠嬫⒑绾懏褰х紒鏌ョ畺钘熷璺虹灱濡垱銇勯幘鍗炲閻庢艾缍婂濠氬磼濞嗘埈妲梺纭咁嚋缁绘繂鐣峰┑瀣嵆闁绘垵妫楀▓銊ヮ渻閵堝棗绗掗悗姘煎弮瀵煡骞撻幒婵堝數闁荤姾妗ㄧ拃锕傚磿閹邦厾绠鹃柛娑卞幗閸犳ɑ鎱ㄦ繝鍛仩缂侇喗鐟╅獮鎰償閵忊�愁伆缂傚倸鍊风粈渚�顢栭崨瀛樺亱闁规崘宕靛畵渚�鐓崶銊︾闁哥姴妫濋弻娑㈠即閵娿儱绠婚梺浼欑畱閻楁挸顫忓ú顏咁棃婵炴垯鍨诲畷顏嗙磽娴ｇ懓绲诲褑妫勯埥澶愬垂椤愮姴浜濋梺鍛婂姀閺呮繈宕㈤悽鍛娾拺闁稿繘妫块懜顏堟煕鎼淬垹鈻曢柟顖氱焸楠炴帒螖娴ｅ搫骞嶆俊鐐�栧濠氬储瑜嶅嵄濠电姵纰嶉悡鍐偡濞嗗繐顏╅柣蹇擃嚟閿熷�燁潐濞茬喐绂嶉崼鏇炴槬闁跨喓濮寸粈鍐煏婵犲繘妾慨锝呭濮婂宕掑▎鎰偘閻庤娲栭悘姘跺箞閵娾晛绠绘い鏃囧亹椤旀劕顪冮妶鍡楀Ё缂佺姵鍨圭划鑽ゆ喆閸曗晙绨婚梺瑙勫濞夋盯鎯佸鍫熺厸濞达絿顭堥敓钘夘煼楠炲顫㈠畝锟介悿锟介梺鍝勬川閸ｃ儱顭囬悢鍏尖拺闁革富鍘奸崝瀣煏閸ャ劎娲撮柡浣规崌瀵剟濡堕崶鈺傛婵°倗濮烽崑娑㈩敄閸涙潙鐓橀柟杈剧畱楠炪垽鏌嶉崫鍕拷宄邦潩閿旂晫绡�缁炬澘顦辩壕鍧楁煕鐎ｎ偄鐏寸�规洘鍔欐俊鑸靛緞婵犲嫸绱卞┑鐐存尰閻旑剟骞忔搴嫹鐟欏嫭绀夋い顐㈩槺缁骞掗弮鎾村闁挎繂绨肩花濂告煟鎼搭喖澧存慨濠冩そ瀹曠兘顢橀悜鍡樻瘔婵犵數濮伴崹娲晪濡炪倖鏌ㄧ换鎰板煘閹达箑鐐婇柕澶堝�楅惄搴ㄦ⒒娴ｅ憡鎯堢紒澶嬬叀瀹曟繂顓兼径瀣壄闂佺鎻梽鍕偂閺囩喐鍙忔俊銈忔嫹婵☆偅顨嗛弲鍓侊拷娑櫳戦崣蹇撯攽閻樻彃顏悽顖涚洴閺岀喎鐣￠悧鍫濇畻闂佸湱鍘х紞濠囧箖閻戣棄绠ユい鏇炴噹娴犺绻濈喊澶岀？闁稿鍨垮畷鎰板Χ婢跺﹤鍋嶆繝闈涘�搁幉锟犲磻鐎ｎ喗鐓欓柟顖嗗拑绱為梺鍝勬４闂勫嫮鎹㈠☉姗嗗晠妞ゆ棁宕甸崙褰掓⒑閸濆嫭鍣洪柟顔煎�垮濠氬Ω閳哄倸浜為梺绋挎湰缁嬫垿顢旈敓锟�??(闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鐘靛幀闂佸吋浜介崕鎶藉煡婢舵劖鎳氶柡宥庡幗閻撴洘绻涢幋婵嗚埞妤犵偞锕㈤弻銊モ槈濞嗘垶鍣紓浣虹帛缁诲牓骞冩禒瀣棃婵炵顔愮紞渚�寮诲☉銏犵厸濞达絽鎲″▓濠氭⒑鏉炴壆鍔嶉柟鐟版喘楠炲﹪鎮欓崫鍕庛劎鎲稿澶婄厱鐎癸拷閸曨剙锟界敻鎮峰▎蹇擃仾缂侊拷閿熶粙姊虹紒妯煎ⅹ闁靛牊鎮傛俊瀛樻媴閼叉繃妫冨畷銊╊敊閼恒儺浠ч梻鍌欒兌椤牓鏁冮敃鍌氱獥闁规儳澧庢稉宥夋煠閹帒鍔ょ紒鈽呮嫹闂備焦鐪归崹钘夘焽瑜庣粋鎺楀煛閸涱喚鍘靛┑鐐跺蔼椤斿﹦鑺遍悾宀嬫嫹閸偅绶查柨鏇ㄤ邯楠炲﹪寮介鐐靛幐闂佺鏈崙褰掓晸閽樺绠绘慨濠冩そ楠炴劖鎯旈姀銏╂К闂備胶顭堥敃銈囩礊婵犲倻鏆﹂柟鎵閸嬨劑鏌涘☉姗堝姛闁告ê澧界槐鎺楁倷椤掍胶鍑￠悗瑙勬处閸撴岸寮查崼鏇炵妞ゆ梻鍋撻敍蹇涙⒑鐠団�崇�诲ù锝夋櫜閸掓帡姊绘担鍛婃儓闁活剙銈稿畷浼村箻鐠囪尙鐤呴梺鍦檸閸犳牜绮堢�ｎ偁浜滈柟鎵虫櫅閻掔儤绻涢崗鍏尖拻缂佽鲸鎸婚幏鍛偊閹稿寒锟芥姊洪崨濞掝亪濡堕幖浣哥畺闁靛濡囬梽鍕磼鐎ｎ厼鍔甸柟鑺ユ礋濮婃椽骞愭惔锝囩暤濡炪倧瀵岄崹鍫曞箖閻愯娲敂閸涱垰骞堥梻浣筋潐婢瑰寮插☉娆庣箚闁割煈鍟旇ぐ鎺撳亗閹艰揪绲块崝顖氣攽椤旂》榫氭繛鍜冪秮楠炲繘鎮╃拠鑼紜闂佹儳娴氶崑鍡樼閹扮増鈷掑ù锝呮啞閹牓鏌熼搹顐㈠缂佺粯鐩弫鎾绘嚍閵夘喗顔旈梺缁樺姌椤曟粌顔忛妷锔轰簻妞ゆ挻绮屾慨鍌滐拷瑙勬礀閵堟悂骞冮姀銈呭窛濠电姴绨奸幋鐑芥⒒閸屾艾锟藉嘲霉閸パ�鏋栭柡鍥ュ灩闂傤垶鏌ㄩ弴鐐诧拷鍝ョ不椤栫偞鐓ラ柣鏇炲�圭�氾拷??)闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮敓浠嬪箯濠靛绠瀣捣缁犳梹绻涢幋鐐嗘垿宕虫禒瀣厽妞ゆ挾鍠撻幊鍥煛瀹�锟介崰鎾绘晸閼恒儳鈾佹い顓炴川缁濡烽埡鍌滃幗闂佺懓鎼粔鍫曟儗濞嗘挻鐓涚�癸拷鐎ｎ剛袦濡ょ姷鍋炵敮鈥愁嚕椤曪拷楠炴﹢寮堕幋顓濈处闂傚倷绀侀幖顐わ拷姘煎枛閳诲秴顫楅敐澶嬧拻闁稿本鑹鹃敓鑺ユ倐瀹曟劙骞栨担鍝ワ紮婵＄偛顑呭ù鐑芥儗閸℃褰掓晲閸喆锟藉啴鏌ｉ幒鎴含闁哄本绋戦埥澶娾枎閹邦喚鈻忕紓鍌欒兌婵參宕归崼鏇炶摕闁靛ň鏅滈崑鍡涙煕鐏炲墽鈽夋い蹇ユ嫹?
					psend(newLeaderRoleId, new STeamError(TeamError.MembersNotNormal));
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐ｇ珶閺嚶颁汗闁圭儤鎸鹃崢浠嬫⒑绾懏褰х紒鏌ョ畺钘熷璺虹灱濡垱銇勯幘鍗炲閻庢艾缍婂濠氬磼濞嗘埈妲梺纭咁嚋缁绘繂鐣峰┑瀣嵆闁绘垵妫楀▓銊ヮ渻閵堝棗绗掗悗姘煎弮瀵煡骞撻幒婵堝數闁荤姾妗ㄧ拃锕傚磿閹邦厾绠鹃柛娑卞幗閸犳ɑ鎱ㄦ繝鍛仩缂侇喗鐟╅獮鎰償閵忊�愁伆缂傚倸鍊风粈渚�顢栭崨瀛樺亱闁规崘宕靛畵渚�鐓崶銊︾闁哥姴妫濋弻娑㈠即閵娿儱绠婚梺浼欑畱閻楁挸顫忓ú顏咁棃婵炴垯鍨诲畷顏嗙磽娴ｇ懓绲诲褑妫勯埥澶愬垂椤愮姴浜濋梺鍛婂姀閺呮繈宕㈤悽鍛娾拺闁稿繘妫块懜顏堟煕鎼淬垹鈻曢柟顖氱焸楠炴帒螖娴ｅ搫骞嶆俊鐐�栧濠氬储瑜嶅嵄濠电姵纰嶉悡鍐偡濞嗗繐顏╅柣蹇擃嚟閿熷�燁潐濞茬喐绂嶉崼鏇炴槬闁跨喓濮寸粈鍐煏婵犲繘妾慨锝呭濮婂宕掑▎鎰偘閻庤娲栭悘姘跺箞閵娾晛绠绘い鏃囧亹椤旀劕顪冮妶鍡楀Ё缂佺姵鍨圭划鑽ゆ喆閸曗晙绨婚梺瑙勫濞夋盯鎯佸鍫熺厸濞达絿顭堥敓钘夘煼楠炲顫㈠畝锟介悿锟介梺鍝勬川閸ｃ儱顭囬悢鍏尖拺闁革富鍘奸崝瀣煏閸ャ劎娲撮柡浣规崌瀵剟濡堕崶鈺傛婵°倗濮烽崑娑㈩敄閸涙潙鐓橀柟杈剧畱楠炪垽鏌嶉崫鍕拷宄邦潩閿旂晫绡�缁炬澘顦辩壕鍧楁煕鐎ｎ偄鐏寸�规洘鍔欐俊鑸靛緞婵犲嫸绱卞┑鐐存尰閻旑剟骞忔搴嫹鐟欏嫭绀夋い顐㈩槺缁骞掗弮鎾村闁挎繂绨肩花濂告煟鎼搭喖澧存慨濠冩そ瀹曠兘顢橀悜鍡樻瘔婵犵數濮伴崹娲晪濡炪倖鏌ㄧ换鎰板煘閹达箑鐐婇柕澶堝�楅惄搴ㄦ⒒娴ｅ憡鎯堢紒澶嬬叀瀹曟繂顓兼径瀣壄闂佺鎻梽鍕偂閺囩喐鍙忔俊銈忔嫹婵☆偅顨嗛弲鍓侊拷娑櫳戦崣蹇撯攽閻樻彃顏悽顖涚洴閺岀喎鐣￠悧鍫濇畻闂佸湱鍘х紞濠囧箖閻戣棄绠ユい鏇炴噹娴犺绻濈喊澶岀？闁稿鍨垮畷鎰板Χ婢跺﹤鍋嶆繝闈涘�搁幉锟犲磻鐎ｎ喗鐓欓柟顖嗗拑绱為梺鍝勬４闂勫嫮鎹㈠☉姗嗗晠妞ゆ棁宕甸崙褰掓⒑閸濆嫭鍣洪柟顔煎�垮濠氬Ω閳哄倸浜為梺绋挎湰缁嬫垿顢旈敓锟�??,newLeaderRoleId: " +newLeaderRoleId);
				}
				else if(StateCommon.isTrusteeshipState(newLeaderRoleId)) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崷顓犵焿闁圭儤妫戦幏鐑芥晲鎼粹�茬凹濠电偛鎳岄崹钘夘潖濞差亝鍤嶉柕澶婂枤娴滎亣妫熷銈嗙墱閸嬫稑效閺屻儲鈷戞い鎺炴嫹缂佸鏁婚幃锟犲Ψ閳哄倻鍘介梺鍝勫暙閸婅崵鏁☉娆嶄簻闁靛鍎哄Σ铏圭磼鏉堛劍灏い鎾炽偢瀹曨亪宕橀鐐村創濠德板�楁慨鐑藉磻濞戙垹鐤い鎰╁劤娴滀粙姊洪懡銈呅㈡繛娴嬫櫇娴滅鈻庨幋鐘靛箵闂佺粯鍔楅崕銈夊煕閹寸姵鍠愰柣妤�鐗嗙粭鎺懨瑰锟介崡鎶藉蓟濞戙垹绠荤痪鎯ь儏椤ユ繈姊烘导娆戠М婵炰匠鍥舵晣闁稿繒鍘х欢鐐烘倵閿涘崬瀚褰掓⒒閸屾艾锟芥悂宕愰幖浣瑰亱濠电姴鍟伴悷瑙勪繆閵堝懏鍣洪柛瀣�归妵鍕箻閸楃偟浠鹃梺鎶芥敱鐢繝寮诲☉銏犲嵆闁靛鍎扮花璇差渻閵堝懏绂嬮柛娆忓暣瀵鎮㈢喊杈ㄦ櫔闂佺硶鍓濋悷褔鎯侀崼銉︹拺閺夌偞澹嗛崝宥夋煙濮濆苯鍚圭紒顔碱儔楠炴帡寮幘鏉戭伓闂佹寧绻傛鍛婄閹扮増鐓欑�瑰嫰鍋婇悡鍏兼叏婵犲懏顏犵紒顔界懇楠炴劖鎯旈姀鈥愁伆闂傚倷鑳堕崢褏绱炴繝鍕笉闁哄诞灞芥闂佽鍎兼慨銈夊磻閸曨垱鐓曢煫鍥ㄨ壘娴滃綊鏌涘锟芥禍璺侯潖閾忓湱纾兼俊顖氭禋娴滅偞绔熼弴銏╂晣闁绘柨鎲￠悵鐑芥⒑濮瑰洤鐏い锝庡櫍楠炲繐鐣￠幍铏亖闂佸壊鐓堥崰妤呮倶瀹ュ棛绡�闁汇垽娼ф禒婊堟煥閺囥劋绨绘い鏇稻缁绘繂顫濋锟介懓鍨攽鎺抽崐鏇㈡晝閵堝绠栭柟杈鹃檮閳锋垿鏌涘☉姗堟缂佸爼浜堕弻娑㈡偐瀹曞洤鈷堢紓渚囧枛閿曨亜鐣锋總绋垮嵆闁绘柨寮剁�氳棄鈹戦悙瀛樺鞍闁绘棏鍓熼獮蹇涙煥鐎ｎ剛顔曟繛杈剧到閸熷灝煤閻樼粯鏅搁柡鍌樺�楅悾鍨亜閵忊槄鑰块柟顔规櫊瀹曟宕妷褎鍠掗梻鍌氬�烽懗鍫曘�佹繝鍥х妞ゅ繐妫欐刊濂告煥濠靛棙宸濈紒锟芥繝鍥ㄧ厸鐎广儱楠搁獮妤呮煟閹惧磭绠伴柍瑙勫灴閹瑩骞嬪┑鍡樻闂侀潻绲肩划娆撳蓟閵娿儮妲堟繛鍡樺灩閻撳鈹戦纭烽練婵炲拑绲垮Σ鎰板箳閹冲磭鍠栧畷妤呮偂鎼淬垻褰涢梻鍌氬�烽懗鍫曘�佹繝鍌楁瀺闁哄洢鍨圭粈澶嬩繆閵堝嫯鍏岄柣婵嗙埣閺岋繝宕堕妷銉т患闂佹悶鍔岄崐褰掑Φ閸曨垰绫嶉柛銉ㄥ煐缂嶅牓姊洪崫鍕喊闁瑰嘲鍢查埞鎴︽晬閸曨偂鏉梺绋匡攻閻楁洝鐏嬫繛杈剧秬椤宕ｈ箛娑欑厪闁割偅绻嶅Σ鍝ョ棯閹呯Ш闁哄瞼鍠栭弻鍥晝閿熻棄顕ｉ悙顒傜闁割偅绮庨惌娆撴煛瀹�瀣М妤犵偛顑呴埞鎴﹀炊瑜滃Σ閬嶆⒑鐠囨彃顒㈡慨妯稿姂楠炲﹪骞樼拠鑼幋闂佺鎻梽鍕磹閻戣姤鐓犻柟闂寸劍濞懷勭箾閹冲嘲鎳愮壕钘壝归敐鍥ㄥ殌缂佽尙绮换娑氫焊閺嶅灚瀚归柟棰佺濞堛劎绱撻崒娆戝妽闁挎氨绱掗崜浣镐槐闁哄瞼鍠栭弻鍥晝閿熻姤鏅堕锟介弻娑氾拷锝庝簽鏁堝┑顔硷龚濞咃綁骞戦崟顖毼╅柕澶涘瑜版岸姊绘担鐑樺殌闁搞倖鐗犻獮蹇涙晸閿燂拷 by changhao
				{
					fire.pb.talk.MessageMgr.psendMsgNotify(oldLeaderRoleId, 160408, null);
				}
				else
				{
					BuffAgent buffagent = new BuffRoleImpl(newLeaderRoleId);
					if (!buffagent.canAddBuff(BuffConstant.StateType.STATE_TEAM_LEADER))
					{
						// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐ｇ珶閺嚶颁汗闁圭儤鎸鹃崢浠嬫⒑绾懏褰х紒鏌ョ畺钘熷璺虹灱濡垱銇勯幘鍗炲閻庢艾缍婂濠氬磼濞嗘埈妲梺纭咁嚋缁绘繂鐣峰┑瀣嵆闁绘垵妫楀▓銊ヮ渻閵堝棗绗掗悗姘煎弮瀵煡骞撻幒婵堝數闁荤姾妗ㄧ拃锕傚磿閹邦厾绠鹃柛娑卞幗閸犳ɑ鎱ㄦ繝鍛仩缂侇喗鐟╅獮鎰償閵忊�愁伆缂傚倸鍊风粈渚�顢栭崨瀛樺亱闁规崘宕靛畵渚�鐓崶銊ユ惛濞存粌缍婇弻鐔兼倻濡鐨戦梺褰掓敱濡炶棄顫忓ú顏勫窛濠电姴鍟壕鈺呮煟韫囨挾绠查柣鐔叉櫅閻ｇ兘濮�閻橆偅顫嶉梺闈涢獜缁辨洟宕㈤柆宥嗏拺闁圭娴风粻鎾澄旈悩铏�愮�殿喚顭堥埥澶愬閻樻鏀ㄩ梻鍌欑贰閸撴瑧绮旈悽鍛婂亗闁哄洨鍠嶇换鍡涙煏閸繃鍣归柡鍡樻礈缁辨帗娼忛妸銉㈡灆闂佸搫鐭夌紞渚�骞冮姀銈嗗亗閹煎瓨绻傞弸鍫ユ⒒娴ｈ櫣甯涢柟绋跨埣瀹曟洟鎮界粙鑳憰濠电偞鍨崹鍦不濞戙垺鐓曢煫鍥ㄦ尰閹叉悂鏌ｉ埡渚�鍙勬慨濠冩そ楠炴牠鎮欑拠褎瀚归柕鍫濐槸缁�鍫熺箾閹寸偟顣叉い顐ｆ礋閺岀喖骞嗚閹界姴鈹戦娑欏唉闁诡喖缍婂畷鍫曟晲閸涱厸鎷ら梻浣风串缂嶏拷婵炲鐩垾鏃堝礃椤斿槈褔鐓崶銊︽儎婵炲樊鍙冨鐑樻姜閹殿噮妲銈庡幘閸忔﹢骞冩导鎼晩闁伙絽鐬奸惁鍫ユ⒑缁嬫鍎撳┑顔哄�曡灋闁告劑鍔庨弳锕傛煏婵炵偓娅撻柡浣革躬閺屻倕霉鐎ｎ偅鐝曞銈呴缁夌數鎹㈠┑瀣仺闂傚牊鍒�閻愮儤鐓曢柕濞у啫浠橀梺宕囩帛閺屻劑鍩ユ径鎰潊闁炽儱鍟挎竟搴ㄦ⒒娴ｄ警鐒剧紒缁橆殜瀹曟垿骞囬弶璺啇閻熸粎澧楃敮妤呭煕閹烘鐓曢悘鐐村礃婢规﹢鏌ㄩ悢璇残撻柟顔煎�搁悾鐑藉箛閺夎法顔愭繛杈剧到閹芥粓鏁嶅▎鎾粹拺鐟滅増甯楅敍鐔虹磼閿熻姤绗熼敓浠嬪箖閸ф鏁婃繛鏉戦缂嶅﹤鐣峰Δ鍛闁兼祴鏅濋埢蹇曠磽閸屾瑧鍔嶉柛鏃�鐗犻妴鍐╃節閸パ嗘憰闂佺偨鍎查崜姘跺触鐎ｎ喖绠圭紒顔炬閹峰嘲鐣烽崶璺烘櫍婵犵數濮甸鏍窗濞戭澁缍栧鑸靛姈閸嬪倿鏌嶉妷锕�澧繛鍏肩墬缁绘稑顔忛缁樺枤闂佽桨绀佸Λ婵嬪蓟閵娾晜鍋勯柣鎴炆戦悵顏嗙磽娓氬洤鏋熸俊顐㈠暣楠炲啴鎮惧畝锟介惌娆撴偣娓氼垳鍘滅紒杈╂暬閺岋絾鎯旈敍鍕殯闂佺閰ｆ禍鎯版婵炲鍘ч悺銊╁磻閸岀偞鐓涢柛銉ｅ劚閻忣亪鏌ｉ幘瀵告创闁哄本鐩俊鐑芥晲閸涱厼顫撳┑鐘殿暯閿熻棄鍟块幃鎴炪亜閵婏絽鍔﹂柟顔界懅閿熺晫鏁搁…鍫ュ煕閸垻纾藉〒姘搐濞呮﹢鏌涘▎蹇撴殻闁绘侗鍠氶敓鏂ょ秵閸犳寮插鍫熷仭婵炲棙鐟х粙濠氭倵濮橆兙鍋㈡慨濠勭帛閹峰懘鎮剧仦鍓ф闂備礁鎲￠崝蹇涘疾濞戙垹姹查柛顐犲劜閻撶喖骞栧ǎ顒�鐏柛鐔哥叀閺岀喖宕欓妶鍡楊伓?
						TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐ｇ珶閺嚶颁汗闁圭儤鎸鹃崢浠嬫⒑绾懏褰х紒鏌ョ畺钘熷璺虹灱濡垱銇勯幘鍗炲閻庢艾缍婂濠氬磼濞嗘埈妲梺纭咁嚋缁绘繂鐣峰┑瀣嵆闁绘垵妫楀▓銊ヮ渻閵堝棗绗掗悗姘煎弮瀵煡骞撻幒婵堝數闁荤姾妗ㄧ拃锕傚磿閹邦厾绠鹃柛娑卞幗閸犳ɑ鎱ㄦ繝鍛仩缂侇喗鐟╅獮鎰償閵忊�愁伆缂傚倸鍊风粈渚�顢栭崨瀛樺亱闁规崘宕靛畵渚�鐓崶銊ユ惛濞存粌缍婇弻鐔兼倻濡鐨戦梺褰掓敱濡炶棄顫忓ú顏勫窛濠电姴鍟壕鈺呮煟韫囨挾绠查柣鐔叉櫅閻ｇ兘濮�閻橆偅顫嶉梺闈涢獜缁辨洟宕㈤柆宥嗏拺闁圭娴风粻鎾澄旈悩铏�愮�殿喚顭堥埥澶愬閻樻鏀ㄩ梻鍌欑贰閸撴瑧绮旈悽鍛婂亗闁哄洨鍠嶇换鍡涙煏閸繃鍣归柡鍡樻礈缁辨帗娼忛妸銉㈡灆闂佸搫鐭夌紞渚�骞冮姀銈嗗亗閹煎瓨绻傞弸鍫ユ⒒娴ｈ櫣甯涢柟绋跨埣瀹曟洟鎮界粙鑳憰濠电偞鍨崹鍦不濞戙垺鐓曢煫鍥ㄦ尰閹叉悂鏌ｉ埡渚�鍙勬慨濠冩そ楠炴牠鎮欑拠褎瀚归柕鍫濐槸缁�鍫熺箾閹寸偟顣叉い顐ｆ礋閺岀喖骞嗚閹界姴鈹戦娑欏唉闁诡喖缍婂畷鍫曟晲閸涱厸鎷ら梻浣风串缂嶏拷婵炲鐩垾鏃堝礃椤斿槈褔鐓崶銊︽儎婵炲樊鍙冨鐑樻姜閹殿噮妲銈庡幘閸忔﹢骞冩导鎼晩闁伙絽鐬奸惁鍫ユ⒑缁嬫鍎撳┑顔哄�曡灋闁告劑鍔庨弳锕傛煏婵炵偓娅撻柡浣革躬閺屻倕霉鐎ｎ偅鐝曞銈呴缁夌數鎹㈠┑瀣仺闂傚牊鍒�閻愮儤鐓曢柕濞у啫浠橀梺宕囩帛閺屻劑鍩ユ径鎰潊闁炽儱鍟挎竟搴ㄦ⒒娴ｄ警鐒剧紒缁橆殜瀹曟垿骞囬弶璺啇閻熸粎澧楃敮妤呭煕閹烘鐓曢悘鐐村礃婢规﹢鏌ㄩ悢璇残撻柟顔煎�搁悾鐑藉箛閺夎法顔愭繛杈剧到閹芥粓鏁嶅▎鎾粹拺鐟滅増甯楅敍鐔虹磼閿熻姤绗熼敓浠嬪箖閸ф鏁婃繛鏉戦缂嶅﹤鐣峰Δ鍛闁兼祴鏅濋埢蹇曠磽閸屾瑧鍔嶉柛鏃�鐗犻妴鍐╃節閸パ嗘憰闂佺偨鍎查崜姘跺触鐎ｎ喖绠圭紒顔炬閹峰嘲鐣烽崶璺烘櫍婵犵數濮甸鏍窗濞戭澁缍栧鑸靛姈閸嬪倿鏌嶉妷锕�澧繛鍏肩墬缁绘稑顔忛缁樺枤闂佽桨绀佸Λ婵嬪蓟閵娾晜鍋勯柣鎴炆戦悵顏嗙磽娓氬洤鏋熸俊顐㈠暣楠炲啴鎮惧畝锟介惌娆撴偣娓氼垳鍘滅紒杈╂暬閺岋絾鎯旈敍鍕殯闂佺閰ｆ禍鎯版婵炲鍘ч悺銊╁磻閸岀偞鐓涢柛銉ｅ劚閻忣亪鏌ｉ幘瀵告创闁哄本鐩俊鐑芥晲閸涱厼顫撳┑鐘殿暯閿熻棄鍟块幃鎴炪亜閵婏絽鍔﹂柟顔界懅閿熺晫鏁搁…鍫ュ煕閸垻纾藉〒姘搐濞呮﹢鏌涘▎蹇撴殻闁绘侗鍠氶敓鏂ょ秵閸犳寮插鍫熷仭婵炲棙鐟х粙濠氭倵濮橆兙鍋㈡慨濠勭帛閹峰懘鎮剧仦鍓ф闂備礁鎲￠崝蹇涘疾濞戙垹姹查柛顐犲劜閻撶喖骞栧ǎ顒�鐏柛鐔哥叀閺岀喖宕欓妶鍡楊伓?,newLeaderRoleId: " + newLeaderRoleId);
					} else
					{
						TeamManager.logger.debug("SUCC:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌涢幇顖氱处闁汇垻绮穱濠囨倷椤忓嫸鎷烽弽顓熷亱婵犲﹤鐗嗙壕缁樼箾閹存瑥鐏╅柛銊ュ�块弻娑氫沪閸撗�妫ㄦ繛瀛樼矋缁捇寮婚垾鎰佸悑闁告劑鍔岄‖瀣⒑闂堟稒顥為悽顖涱殜婵＄敻宕熼姘卞幐闂佺鏈划灞筋嚕閵娾晜鈷戦柛婵嗗閻忛亶鏌涢悩宕囧⒌妤犵偛鍟…銊╁礃閻愵剙缂撻梻浣虹《閸撴繈鈥﹂崶顒�姹查柕澶嗘櫆閳锋帒霉閿濆牜娼愰柕鍥╁枛閺屾稑螣閸︻厾鐓撻梺闈涙閸燁垳鎹㈠┑瀣倞鐟滄垿骞楅弴銏♀拺缂備焦蓱閳锋帡鎮樿箛瀣妤犵偛绻愰悾锟犲箥閾忣偒娼旀繝鐢靛仜濡瑩鈥﹂崶顒�绀夊瀣捣绾捐棄霉閿濆懏鎯堥弽锟犳⒑閸︻収鐒炬い顓犲厴閻涱噣宕奸妷銉庘晠鏌嶉崫鍕拷鐟扳枍濠婂牊鈷戦柛娑橈功閻棝鏌ｉ幒鐐电暤闁糕斂鍨藉畷濂稿Ψ閿旇瀚奸梻浣告啞缁诲倻锟芥凹鍣ｉ幃鐐垫崉閵娧咃紲缂傚倷鐒﹂…鍥╃不閹剧粯鐓熼柨婵嗘搐閸樺瓨顨ラ悙鍙夘棦闁哄苯娲弫鍌炲矗椤愵偄澧存慨濠勭帛閹峰懘宕ㄦ繝鍛攨闂備礁鎼幏瀣磻閸涙潙绠為柕濞炬櫆閸婂鏌ら幁鎺戝姕婵炲懌鍨藉铏圭矙閸栤�冲闂侀潻绲婚崕閬嶁�﹂崶顒�绠涙い鎾跺Х椤旀洟姊洪崨濠勬噧妞ぱ嶆嫹闂佸吋婢樺锟犲蓟閻旂⒈鏁嬮柛鈩冪懅閻﹀牓姊洪幖鐐插缂佺姵鐗犻悰顕�宕堕妸锕�顎撻梺闈╁瘜閸橀箖鍩㈡径瀣瘈闁汇垽娼ч埢鍫熺箾娴ｅ啿娲ょ壕褰掓煙闂傚顦︾紒鐘靛枛閺屻劑鎮㈤崫鍕戙垻鐥幆褜鐓奸柡灞剧洴瀵挳濡搁妷褌鐢婚梻浣虹帛閹歌煤閻斿吋鍋傛い鎰剁畱閻愬﹪鏌曟繝蹇曠暠缁炬澘绉瑰铏规嫚閳ヨ櫕鐏嶉梺鎼炲妼濞尖�愁嚕婵犳碍鏅插璺侯儐濞呭棝姊洪崗鑲┿偞闁哄懏绻嗛埅闈涒攽閻樻剚鍟忛柛鐘崇墵閺佸啴鏁傞幆褍鐏婂銈嗙墬缁海绮婚弮鍫熺厽闁哄倹瀵ч幉鍝ョ磼閳藉懏瀚归梻鍌欑閹诧繝宕濋敃鍌涘亗闁割偆鍠庨閬嶆煥閻曞倹瀚�?闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厱妞ゎ厽鍨垫禍婊堟煕閵婏附顥堥柡宀�鍠撶槐鎺楀閻樺磭浜紓鍌欒兌婵參宕归崼鏇炶摕闁靛ň鏅滈崑鍡涙煕鐏炲墽鈽夋い蹇ユ嫹?,teamId: " + teamId);
						team.getTeamInfo().setSwitchleaderid(newLeaderRoleId);
						team.getTeamInfo().setSwitchleadertime(now);
						SAskforSetLeader sAskforSetLeader = new SAskforSetLeader();
						sAskforSetLeader.leaderid = oldLeaderRoleId;
						
						TeamManager.getInstance().delTeamMatch(oldLeaderRoleId); //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁惧墽绮换娑㈠箣濞嗗繒浠鹃梺绋款儍閸婃繈寮婚弴鐔虹闁绘劦鍓氶悵鏃堟⒑閸涘﹨澹樼紓宥咃躬閻涱噣寮介‖銉ラ叄椤㈡鏁撻懞銉ょ箚闁兼祴鏅濆Λ顖炴煙椤栧棗鎳愭闂備礁鎼径鍥晸閽樺锛嶉柡鍡愬�栭妵鍕棘閸喗鍊梺闈╃悼閸庛倗鎹㈠☉銏犻唶闁靛／鍛瘒婵犳鍠栭敃銉ヮ渻閽樺鏆︽い鎰剁畱缁�瀣亜閺囩偞鍣洪柦鎴濐樀濮婄粯鎷呮笟顖滃姼闁诲孩绋堥弲鐘诲箖閿熺姵鏅搁柣妯哄级濡差剙鈹戦悙鏉戠仧闁搞劌婀辩划濠氭嚒閵堝洨锛濇繛杈剧秬椤曟牠鎮炴禒瀣厱婵☆垰婀遍惌娆愭叏婵犲啯銇濈�规洦鍋婂畷鐔碱敃椤掍礁顏堕梺褰掓？閻掞箓宕愰懜鐢电瘈闂傚牊渚楅崕蹇曠磼閻樺磭澧甸柡宀�鍠撻敓鐣屾暩椤牊绂掗敃鍌涚厱婵炲棗绻掔粻濠氭煛鐏炶濡奸柍瑙勫灴瀹曞崬顫滈崱姗嗘＇婵犵數濮甸鏍窗閺嶎厔鍥ㄦ綇閳哄偆娼熼梺鍦劋閹歌崵绱為崶顒佺厪濠电偛鐏濋崝婊堟偣閸モ晛浠遍柟顔筋殘閹叉挳宕熼鍌ゆО闂佹眹鍩勯崹杈╂暜閿熺姴鏄ラ柣鎰惈缁狅綁鏌ㄩ弴顏呭缂備胶濮电粙鎺楀Φ閸曨垰绠崇�广儱娲╃粣妤呮⒑閸濄儱浠╅悘蹇旂懅濡叉劙骞樼拠鑼紲濠殿喗锕╅崜銊╁箯瀹勬壆鏆嬮柟鍐诧工缂嶅﹤鐣烽崼鏇炍╅柨婵嗗閻帡姊绘担鍝ョШ婵☆偉娉曠划鍫熺瑹閿熻棄鐣疯ぐ鎺戠＜闁绘劕顕崢鍗烆渻閵堝骸骞楅柛銊ф暬瀵悂濡舵径瀣幐闂佺硶妲呴崢楣冩偩閻㈠憡鐓涚�癸拷鐎ｎ剙鍩岄柧浼欑秮閹鎷呴崫銉︾�梺绯曟櫅閹冲繒鎹㈠☉姘炬嫹濞戞瑯鐒介柣顓烇功缁辨挸顓奸崪鍐惈閻庢鍠栭…鐑藉箖閵忋倕绀傞柣鎾冲嚱閹烽绱掑Ο鍦畾濡炪倖鐗楃换鍐敂閻樿褰掓偐閾忣偄鍞夐梺鍝勭焿缂嶄線骞冮埡浣叉瀻闊洦娉ら敐澶嬪�垫慨妯煎亾鐎氾拷 by changhao
						
						psendWhileCommit(oldLeaderRoleId, new SRequestSetLeaderSucc(newLeaderRoleId));
						psendWhileCommit(newLeaderRoleId, sAskforSetLeader);
						fire.pb.talk.MessageMgr.psendMsgNotifyWhileCommit(oldLeaderRoleId, 141251, null);
					}
				}

				return true;
			}
		};
		setTeamLeaderP.submit();
		
	}

	// 婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋婵愭綗闁跨喕妫勯崐鍧楀箰婵犲啰鐝堕柍鍝勵儑缁夘喚锟借娲滈崰鏍�佸☉姗嗘僵濡插本鐗曢弫鎼佹⒒閸屾瑦绁版繛澶嬫礋瀹曟娊鏁冮崒姘鳖唵闂佽法鍣﹂幏锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊璁查弸娆撴⒑缂佹ê绗╁┑顔哄�楅幑銏犫槈閵忕姴鑰垮┑鈽嗗灥椤曆呭枈瀹ュ鈷戠紓浣股戠亸浼存煥閺囨ê鐏茬�殿喖顭烽幃銏ゆ倻濡櫣锛忔俊鐐�ら崢浠嬪垂閸洦鏁侀柨鐕傛嫹
	private static int checkPvP(long oldLeaderRoleId, long newLeaderRoleId) {
		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕婵犲倹鍋ラ柡灞诲姂瀵潙顫濋懜娈匡拷鏍ㄧ箾鐎涙鐭婄紓宥咃躬瀵鈽夐姀鐘电杸闂佺绻愰幗婊堝极閺嶎厽鈷戞繛鑼额嚙楠炴鏌熼悷鐗堝枠鐎殿喖顭烽弫鎰緞婵犲孩缍傞梻渚�娼х换鍡涘疾濠靛绀夐柟闂寸劍閳锋垿鏌﹀Ο渚Ц闁哄棛鍠栭弻娑㈡偐閺屻儱寮伴梺绯曟櫇閸嬨倝鐛�ｎ喗鏅滈柦妯侯槷濮规姊绘担鍛婅础缂侇噮鍨抽弫顕�鍩￠崒婊庢祫闂佺粯鍔﹂崜娑氬姬閿熻棄鈹戦悙鑼闁诲繑绻堥幃姗�鎮╃紒妯煎帾闂佸壊鍋嗛崰鎰板磹閹邦噯鎷峰▓鍨灕妞ゆ泦鍥х叀濠㈣埖鍔曢～鍛存煟濡椿鍟忛柛鐔奉儐缁绘繂顕ラ柨瀣凡闁跨喓鐛ら崶褏顔嗛梺缁樺灱婵倝鎮″▎鎾寸厱闁归偊鍨伴惃铏圭磼閻樺樊鐓奸柡宀�鍠栭、娆戠驳鐎ｎ偆鏉规俊鐐�戦崹娲晝閵忊剝鍙忛柨鐔剁矙閺屽秹骞橀崨顔碱伓闂備胶鎳撻崲鏌モ�﹀畡閭︽綎闁惧繐婀遍惌娆撴煙缁嬪灝顒㈤柟鐑戒憾濮婃椽鎮℃惔锝囆ㄧ紓浣哄У閻楁洟顢氶敐澶婄闁兼亽鍎辨禍婊堟⒑缁嬭法绠洪柛瀣姍瀹曘垽鏌嗗鍡忔嫼缂傚倷鐒﹂埣銈夘敂閸℃妫滃銈嗘尵閸犳劕鈻嶉悩缁樼厽闁靛繈鍩勯弳婊堟煙瀹勬澘妲婚柍缁樻崌瀹曞綊顢欓悾灞兼喚婵犵數濮烽弫鎼佸磻濞戙垺鏅濇い蹇撳閸ゆ洘銇勯幇鍓佺暠缂佺姾宕电槐鎾存媴閼测剝鍨甸埢宥夊閵堝棌鎷洪柣鐘充航閸斿苯鈻嶉幇鐗堢厵闁告垯鍊栫�氾拷
		return fire.pb.battle.pvp.PvPTeamHandle.onSetTeamLeader(oldLeaderRoleId, newLeaderRoleId);
	}

//	// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傤槰濠电姰鍨洪…鍫ユ倶閸愵喗鈷戦柛娑橈工婵箑霉濠婂嫮绠炵�规洘濞婇、娆戜焊閺嶃劍鏉搁梻浣虹帛閿氶柣蹇斿哺瀵娊鍩￠崨顔惧幈闁诲函缍嗛崜娆愮鏉堚晪鎷风憴鍕闁稿簺鍊楅幑銏犫攽鐎ｎ亞鍊為悷婊冪箻椤㈡瑩宕卞☉娆屾嫼闁荤姵浜介崝灞解枍閹扮増鐓欓柛鎴欏�栫�氾拷?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫孝缂傚秴锕璇差吋婢跺﹣绱堕梺鍛婃处閸嬫捇骞忛柨瀣瘈婵ǜ鍎婚幏鐑藉川閺夋垹鐓戞繝銏ｆ硾閻楀懐鑺辨繝姘棅妞ゆ劑鍨烘径鍕煙閸涘﹥鍊愰柟顔炬暩閿熸枻缍嗛崰妤呮偂閵夛妇绡�闂傚牊绋掗敍宥嗕繆閹绘帞绉洪柡宀嬬節瀹曘劑顢欓崜褏鍘滈梻浣告惈閻绮婚幋锝囦航濠电偞鎸婚崙褰掑垂闁秴鐓濋柟鍓х帛閳锋垿鏌熼懖鈺佷粶闁跨喕濮ら崹鍨暦閹邦兘鏀介悗锝庝簽閻ｅ搫鈹戞幊閸婃洟骞婇幇顒傛殼濞撴熬鎷烽柡灞剧洴閳ワ箓骞嬪┑鍥╀邯濠电姵顔栭崰鏍殽閹间礁鐓橀柟杈鹃檮閸婂嘲螞閻楀牏绠撴繛鍫熺箘缁辨挻鎷呴崫鍕戯綁鏌熼悷鐗堝枠闁绘侗鍣ｅ畷姗�鍩為崹顔荤凹闂備礁鎲￠崝蹇涘疾濠靛绀夐柛顐ｆ礃閸婂灚顨ラ悙鑼虎闁告梹纰嶆穱濠囶敃閵忋垻鍔Δ鐘靛仜缁绘垹鎹㈠┑鍡╂僵妞ゆ挻绋掔�氬ジ姊绘担鍛婂暈缂佸鍨块弫鍐Χ閸℃ê寮块梺鎸庢穿閹风兘妫佹径瀣瘈濠电姴鍊搁顐︽煟椤撶喎绗ч柨鐔诲Г椤旀牠宕板鍨涳拷锕傚醇閵夈儳鍙�婵犮垼鍩栭崝鏇綖閸涘瓨鐓ユ繛鎴灻鈺傤殽閻愭潙濮嶆慨濠勭帛閹峰懘鎼归獮鍖℃嫹婵犲洦鐓曢柟鎯ь嚟缁犳绱掗鐣屾噰妤犵偛娲鍓佹崉閵娧勭�繝寰锋澘锟窖呭緤娴犲鐤い鏍仦閸嬪倹绻涢幋鐐╂（鐟滅増甯楅弲鏌ユ煕濞戝崬鏋熼柛鐘冲姍閺屸剝鎷呴崫銉モ叺濠殿喖锕ㄥ▍锝夊箯閻樿鐏抽柧蹇ｅ亞娴滄牠姊绘担瑙勫仩闁告柨鐬肩槐鐐寸節閸パ呯暫婵°倧绲介崯顖炲疾閹间焦鐓熸俊顖氭惈閺嗗崬霉濠婂牅鎲炬慨濠冩そ瀹曟粓骞撻幒宥囨寜闂備胶顭堢�涒晠鎮￠垾鎰佸殨闁告劕妯婂銊╂煥閻旂粯顥夋い顐㈢箲缁绘繂顫濋鍌︾床婵犵數鍋涘Λ娆戞暜閹烘鍌ㄩ柨鐔哄У閳锋垿鏌涘☉姗嗙叕闁绘帒銈搁弻娑㈠Ψ閿濆懎顬堟繛瀵稿█缁犳牕顫忓ú顏勭闁绘劖褰冩慨鍫曟⒑鐠囪尙绠茬紒瀣灴閸┿儲寰勯幇顒夋綂闂佺粯蓱椤旀牕危鐟欏嫪绻嗛柣鎰典簻閿熻姤鐗犲畷婵嬫晝閸屾氨顦┑鐘绘涧椤戝棝寮查幖浣圭參婵☆垯璀﹀Σ褰掓煕鐎ｃ劌鍔﹂柡灞革拷宕囨殕閻庯綆鍓欓崺宀勬⒑鐎圭媭鍤欓梺甯秮閻涱喚锟斤綆鍠楅弲鏌ユ煕濞戝崬骞橀柣锝囨箰cedure濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫孝缂傚秴锕璇差吋婢跺﹣绱堕梺鍛婃处閸撴瑥鈻嶉敐澶嬧拺婵炶尪顕ч獮妤併亜閵娿儻韬�殿喖顭锋俊鎼佸煛閸屾矮绨婚梺鑽ゅТ濞诧箓鎮鹃锕�绠荤紓浣诡焽閸橆亪姊洪幖鐐插妧闁告劕褰炵槐鏃�淇婇悙顏勶拷鎴﹀垂閸濆娊娲偄缁楃尨鎷锋担鑲濇棃宕ㄩ鑺ヮ仧濠电偛顕慨鎾敄閸愵喗鏅搁柦妯侯槹閸ゅ洦銇勯姀鈽嗘疁鐎规洜鍠栭、妤呭磼濮橆剛顓煎┑鐘垫暩婵烇拷婵炰匠鍥х９闁归棿绲搁崶顒夋晬婵炴垶鍑瑰ú鎼佹⒑鐟欏嫷鍟忛柛锝庡灦楠炲繑顦版惔銏犳瀭闂佸憡娲﹂崜娑⑺囬妸鈺傗拺闁圭瀛╃壕鎼佹煕閵娿倗鐭欏┑鈥崇摠缁楃喖鏁撻挊澶樺殨妞ゆ洩鎷风�规洜鍘ч埞鎴﹀幢濞嗘垵鏄ユ繝纰夌磿閸嬫垿宕愰弽褜娼栧┑鐘崇閸嬨倝鏌￠崘銊у閻熸瑱绠撻弻銊╂偆閸屾稑顏�
//	private boolean checkOldLeaderInTeam(long leaderRoleId,Team team)
//	{
//		if(team.getTeamInfo().getTeamleaderid() == leaderRoleId)
//			return true;
//		else
//			return false;
//	}
	
	// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傦紭闂佹悶鍔忓▍锝囧垝鐎ｎ喖绠抽柡鍐╂尰鐎氬綊鏌ㄥ┑鍡涱�楀褜鍠氶幉鎼佸级閹稿寒妫炲銈庝簻閸熷瓨淇婇崼鏇炲耿婵°倕鍟伴幊鍡涙⒒娴ｄ警鐒鹃柨鏇樺妼閻ｇ兘宕归銈囧骄闂佸搫娲ㄩ崰鎾绘⒔閸曨垱鐓曟繛鎴烇公閸旂喖鏌涘▎蹇旑棦婵﹨娅ｇ槐鎺懳熼懡銈庢К闂備胶顭堥敃銈咃耿闁秵鏅搁柤鎭掑劤閸熸煡鏌熼崙銈嗗??闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌涢幇顖氱处闁汇垻绮穱濠囨倷椤忓嫸鎷烽弽顓熷亱婵°倕鍟伴惌娆撴煙閻愵剛婀介柨鐔绘閹虫ê顕ｆ繝姘ㄩ柨鏃�鍎冲铏節閻㈤潧鈻堟繛浣冲吘娑㈩敇閻愬稄缍佸畷顐﹀Ψ瑜忛敍婊堟⒑鐠恒劌鏋嶇紒顔界懃閻ｇ兘骞掗幋鏃�顫嶅┑鐐叉缁绘劖瀵兼惔銏㈢瘈鐎典即鏀卞姗�鏁撻懞銉︾妞ゃ垺鐗犲畷鍗炩枎濞嗘劕顏跺┑顔斤供閸撴稓绮斿ú顏呯厵妞ゆ梻鐡斿▓姗�鏌熼崣澶嬪唉鐎规洜鍠栭、妤呭磼閵堝柊銈夋⒒閸屾瑨鍏屾い顓炵墢閹广垽骞嬮敂鑺ユ珖闂侀潧绻掓慨鐑藉汲閿曞倹鐓熼柟瀵镐紳椤忓棙顐介柣鎰劋閻撴瑩姊洪銊х暠濠⒀呭閵囧嫰寮幐搴℃畻濠殿喖锕﹂崕銈囷拷鐢靛帶閳诲酣骞嬪┑鎰缂傚倸鍊烽悞锕�螞韫囨稑钃熼柛妤�鎵痳e濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫孝缂傚秴锕璇差吋婢跺﹣绱堕梺鍛婃处閸撴瑥鈻嶉敐澶嬧拺婵炶尪顕ч獮妤併亜閵娿儻韬�殿喖顭锋俊鎼佸煛閸屾矮绨婚梺鑽ゅТ濞诧箓鎮鹃锕�绠荤紓浣诡焽閸橆亪姊洪幖鐐插妧闁告劕褰炵槐鏃�淇婇悙顏勶拷鎴﹀垂閸濆娊娲偄缁楃尨鎷锋担鑲濇棃宕ㄩ鑺ヮ仧濠电偛顕慨鎾敄閸愵喗鏅搁柦妯侯槹閸ゅ洦銇勯姀鈽嗘疁鐎规洜鍠栭、妤呭磼濮橆剛顓煎┑鐘垫暩婵烇拷婵炰匠鍥х９闁归棿绲搁崶顒夋晬婵炴垶鍑瑰ú鎼佹⒑鐟欏嫷鍟忛柛锝庡灦楠炲繑顦版惔銏犳瀭闂佸憡娲﹂崜娑⑺囬妸鈺傗拺闁圭瀛╃壕鎼佹煕閵娿倗鐭欏┑鈥崇摠缁楃喖鏁撻挊澶樺殨妞ゆ洩鎷风�规洜鍘ч埞鎴﹀幢濞嗘垵鏄ユ繝纰夌磿閸嬫垿宕愰弽褜娼栧┑鐘崇閸嬨倝鏌￠崘銊у閻熸瑱绠撻弻銊╂偆閸屾稑顏�
	private boolean checkLeaderOnline(long leaderRoleId)
	{
		if(StateCommon.isOnline(leaderRoleId))
			return true;
		else
			return false;
	}
	
	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｈ鲸顨ラ悙鎼畼缂佽鲸鎸搁濂稿幢濡ゅ啩鎮ｇ紓鍌欐祰妞村摜鏁垾宕囨殾婵犲﹤瀚刊鎾⒒閿熶粙骞囬褎缍楅梻鍌氬�风粈渚�骞栭锕�瀚夋い鎺戝閸庡孩銇勯弽銊ュ毈闁搞倖娲熼弻鐔虹磼閵忕姵鐏堥柟顖滃枛濮婃椽妫冨☉姘暫濠电偠顕滅粻鎾愁嚕閸欏闄勯柛娑樑堥幏缁樼箾鏉堝墽鍒伴柟纰卞亞閺侇噣宕滄担铏癸紳閻庡箍鍎遍幏鎴﹀礉閻旇櫣纾兼い鏃傗拡閻撹偐锟芥鍠曠划娆撱�佸锟介幃娆撴嚋閸偄鏆繝鐢靛Х閺佹悂宕戦悙鍝勫瀭闁诡垱婢樼紞鏃堟⒒娴ｅ憡鎯堟い鎴濇噽閿熻姤绋堥弲婊呯矚鏉堛劎绡�闁搞儴鍩栭弲顒�鈹戦悩缁樻锭婵炴潙鍊圭粋鎺楀煛閸屾粎顔曢柣搴ｆ暩椤牓锝為幒妤佺厱闁哄洢鍔岄獮妯汇亜閺冿拷濞茬喖寮婚敐鍡樺劅闁靛繆鎳囧銊ヮ渻閵堝骸骞栨繛宸弮楠炲棗鐣濋敓浠嬫晸閺傘倗绉甸柛鐘愁殜瀹曟垿濡搁敂杞扮盎闂佸搫绉查崕閬嶆晸閼恒儺娈樼�殿啫鍥ㄦ櫢濞寸姴顑嗛埛鎴犵磽娴ｅ鑲╂闁秵鐓曢柨婵嗙箳缁夘噣鏌ｅ☉鍗炴灓闁跨喐鏋荤紞鍡涘窗濡ゅ懎鐤炬繝闈涱儐閻撱儵鏌ｉ弬鍨暢闁活厽鐟╅弻銊モ攽閸繀妲愰悗瑙勬磸閸斿酣鏁撻懞銉р檨妞ゎ厼娲畷銏ゎ敂閸啿鎷洪梺鍛婃尰瑜板啯绂嶅┑鍫㈢＜閻犲洦褰冮弳锝夋煙椤曞棛绡�闁轰焦鎸荤粋鎺旓拷锝庡亐閹锋椽姊洪崨濠勭畵閻庢凹鍙冨畷鎺楀Ω閳哄倻鍘遍梺闈涱煭闂勫嫰濡靛┑瀣厱闁冲搫鍊诲ú瀛橆殽閻愭潙绗掗摶鏍归敐鍛儓鐎殿喗濞婂缁樻媴閾忕懓绗″┑顔硷工椤嘲鐣烽弴銏犖ч柛娑变簼閻庢椽姊洪崫鍕偍闁搞劍妞介幃鈥斥枎閹惧鍘介梺缁樻煥閹诧紕娆㈤崣澶堜簻闊浄绲介獮鏍煃鐟欏嫬鐏撮柛鈺佸瀹曟﹢鍩℃笟濠冨闁规壆澧楅悡娑樏归敐鍥剁劸闁跨喕妫勫锟犵嵁閸愩劉鏋庨柟鍨暞閺呫垺绻涢幘纾嬪婵炲眰鍊濆鏌ユ偐缂佹ǚ鎷婚梺绋挎湰閼归箖鏁撻懞銉﹀�愮�规洘鍔欓幃婊堟嚍閵夈儲鐣遍梻浣告啞閹搁绮堟笟锟藉畷鐟扳攽閸ャ儰绨婚梺鍝勭▉閸嬪嫭绂嶈ぐ鎺撶叆闁绘柨鎲￠悘顔剧磼閻樿櫕灏柣锝夋敱缁虹晫绮欑拠淇卞姂閺屾洘寰勫☉銏☆�嶉悶姘剧秮濮婂宕掑▎鎰偘濠电偛顦板ú鐔风暦閹惰姤鏅濋柛灞炬皑椤斿棝姊虹捄銊ユ珢闁瑰嚖鎷�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柟闂寸绾惧鏌ｉ幇顒佹儓缂佺姵婢橀埞鎴︽偐瀹曞浂鏆￠梺鎼炲�曢懟顖濈亙闂佹寧绻傞幊搴ㄥ汲閻愮儤鐓涢柛娑卞枤缁犵偤鏌＄仦璇插鐎殿喗鎸抽幃娆戞嫚瑜庣�氬綊鏌涘┑鍕姕闁哥姴妫濋弻銊╁籍閸屾矮澹曢梺鍝ュУ閸旀瑩寮婚敐鍛傛棃鏁撴禒瀣亱闁糕剝鐟х粻鏃�鎱ㄥΟ鍨厫闁绘挾鍠栭弻鐔煎箚瑜嶉懜褰掓煕閺冿拷缁海妲愰幒鏃傜＜婵☆垰鍚嬮崚娑樜旈悩闈涗粶妞ゆ垵顦甸獮鍐煥閸繂鑰垮┑鐐叉缁绘劖顨欐繝鐢靛Х閺佸憡鎱ㄩ銏犵闁告劦鐓堥崥瀣熆鐠轰警鍎涢柨鐔绘缁夌懓顫忓ú顏咁棃婵炴垶鐟﹂幃娆撴煟鎼淬垺鐨戝褎顨嗙粚杈ㄧ節閸ャ劌锟借崵绱掑☉姗嗗剱闁哄拋鍓欓埞鎴︽偐鐠囇冧紣闁诲孩鍑归崜姘辩矉閹烘洏浜归柟鐑樻尨閹风粯绻涙潏鍓ф偧闁烩剝妫冨畷鐢稿礃椤旂晫鍘遍梺缁樕戦崜姘枔閺冿拷閵囧嫰顢橀悙鍏歌檸濡炪値鍋呯划鎾诲极閹惧顩烽悗锝庝簽閻ｆ椽姊虹拠鈥崇�婚柨鐔剁矙瀵劍绂掔�ｎ偆鍘卞銈嗗姦閸嬪嫭鏅堕鐐村�垫慨姗嗗墰缁夋椽鏌＄仦璇插闁宠鍨垮畷鍗炩槈閹插瀚规俊銈忔嫹妞ゎ叀鍎婚ˇ鏉戭熆瑜庨〃濠冧繆閻㈢绀嬫い鏍ㄧ♁濞呭棝鏌ｉ悩鍙夋悙鐎殿喖鐖奸幃闈涒攽閸″繑鏂�濡炪倖姊婚妴瀣绩缂佹ü绻嗛柣鎰閻瑦顨ラ悙鎻掓殻闁诡喗绮撻幐濠冨緞瀹�濠傛倯濠碉紕鍋戦崐鏍涙担瑙勫弿闁靛牆顦粣妤呮煛瀹ュ骸骞楅柍閿嬪灴閺岋箑螣娓氼垱笑闂佸搫妫寸徊浠嬫箒濠电姴锕ら崯浼村春閿濆浄鎷峰▓鍨灈妞ゎ厾鍏樺顐㈩吋婢跺﹦顦伴梺鍏兼倐濞佳囶敂閸洘鈷戦柟绋挎捣缁犳挸螖閻樺弶鍟為柡鍛埣椤㈡岸鏁撴禒瀣摕闁挎稑瀚搁幏鐑芥晲鎼粹�茬盎闂佽绻嗛弲婵堟閹烘挻缍囬柕濞垮劤椤戝倿姊虹捄銊ユ瀾闁哄宕电槐鐐哄幢濡⒈娲搁柣鐘烘〃缂嶅秹鎮㈤崗鍏兼闂佽姤锚椤﹁棄銆掓繝姘厪闁割偅绻傞弳娆撴煟韫囷絼閭柡灞诲妼椤繈鎳滈悽闈涘笚闂佽崵鍠愰悷銉э拷姘煎墴閹锟界敻娼婚幏椋庢喆閸曨剛顦ラ梺闈涚墕閹诧繝骞堥妸鈺傛櫢濞寸姴顑嗛悡鍐煏婢跺牆濡介柣婵愪邯閺岋綀绠涢妷锕�顏堕梻鍌氬�搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯顢曢敐鍡欘槬闂佺琚崝搴ㄥ箟閹间礁绫嶉柛顐ｇ箘閻ｆ椽姊虹粔鍡楀濞堟棃鏌ｉ幇顒婅含闁哄本娲樼换婵婄疀閺囩姵娈搁柣搴㈩問閸犳牕顭囬垾鎰佹綎婵炲樊浜濋ˉ鍫熺箾閹寸偠澹樻い锝嗘そ濮婅櫣娑甸崨顔惧涧闂佸憡姊归悷銉╊敋閿濆绠柤鎭掑劜濞呭洭姊虹粙鎸庢拱缂佸鎹囧畷銏ゅ箹娴ｅ湱鍘介棅顐㈡处濞叉牗绂掗埡鍌樹簻闁哄洤妫楀ú銈囩矆婢跺绡�濠电姴鍊绘晶娑㈡煟閹惧啿鏆ｆ慨濠冩そ瀹曞綊顢氶崨顓炲闁诲氦顫夊ú鏍儗閸岀偛钃熼柍銉ョ－閺嗗棝鎮楅敐搴″鐞氾箓鏌ｆ惔銏╁晱闁革綆鍣ｅ畷婊堟偄妞嬪孩娈鹃悷婊呭鐢晠寮繝鍥ㄧ參婵☆垯璀﹀褔鏌熸搴″幋妞ゃ垺绋戦～婵嬫晲閸℃ɑ婢戝┑锛勫亼閸婃牕煤閺嶎灛娑樷槈濮樿京鐓撴繝鐢靛У绾板秹鎮￠弴銏＄厸闁告劖瀵х�氬綊姊洪懡銈呮毐闁哄懏鐩、姘舵晲閸℃瑧鐦堝┑顔斤供閸庣敻鍩￠崨顔惧帾婵犮垼娉涢悧鍡涙倶椤忓懌浜滄い鎰╁灮瀛濋梺瀹狀潐閸ㄥ潡宕洪妷鈺佸耿婵°倕鍟╁ǎ顕�姊绘担渚劸妞ゆ垵妫濆畷婵嗏枎韫囨洘娈惧┑鐘绘涧椤戞劙寮繝鍥ㄧ厱闁圭偓顨呴幏鎴犳閸愭祴鏀介柣鎰煐瑜把呯磽瀹ュ繑瀚规繝鐢靛仜閹锋垹寰婇崸妤�鏋佹い鏂跨毞濡插牊绻涢崱妯虹仼妞ゆ梹娲熷娲嚃閳圭偓瀚涢梺鍛婃尰閻熲晛顕ｉ崨濠冨劅闁逞屽厸缁ㄥ姊洪崫鍕ォ濞存粎鍋熺划鏃堫敊閹惧懏瀚归悷娆忓缁�锟界紓鍌氱Т閿曨亪濡存笟锟藉鎾閻欙拷濞煎﹪姊洪棃娑氱疄闁搞劏顕ч悾鍨媴閸︻厾鐦堥梺姹囧灲濞佳冩毄闂備浇妗ㄧ粈渚�骞夐敓鐘茬疄闁靛ň鏅涚粻缁樸亜閺冨洤浜归柨娑欑懇濮婃椽宕ㄦ繝鍕窗闂佺瀛╅悡锟犮�侀弴銏″殟闁靛绲肩花濠氭⒑鐟欏嫬绀冩繛澶嬬洴瀵悂寮崒婊咃紲闂佺粯顭堝畷鐢告偩濞差亝鐓欐い鏃傜摂濞堟粓鏌熼鎸庮棄闁崇粯鎸鹃幑鍕Ω閵夈儛顏堟⒒娴ｅ憡鎯堢紒瀣閹广垹鈹戦崱鈺傜稁闂佹儳绻愬﹢杈╁閸忓吋鍙忔俊銈忔嫹婵☆偅鐟╅幃鐐槹鎼达絿锛濇繛鎾磋壘濞层倝寮稿☉姘辩＜濠㈣泛锕︾粔娲煟濞戝崬娅嶇�规洖銈告俊鐑藉Ψ鎼存ɑ娅婇柡灞界У濞碱亪骞忕仦钘夊腐婵＄偑鍊栧褰掑礉閺嶎偅宕叉繛鎴炵懄缂嶅洭鏌涢幘妤�鍟悡鍌炴⒒娴ｄ警鏀板┑顔哄�楅崚鎺楀箻鐠囪尙鐣洪梺缁樺姦閸撴氨绱為崶顒佺厪濠电倯鍐╁闁哥喎閰ｅ娲传閸曞灚笑闂佺粯顨呭Λ娆撳疾閼哥數顩烽悗锝庝簽椤︻偅绻涚�电甯堕柣掳鍔戦幃鈥斥枎閹炬潙浠梺鎼炲劚濞层倝骞婇幇鐗堝剨闁割偁鍎查崐鐢告偡濞嗗繐顏紒锟介崘顔界厱闁靛鍎崇粔娲煛娴ｈ宕岀�殿噮鍓熸俊鍫曞炊閳诡剨缍佸娲传閵夈儛锝嗐亜閵娿儻韬鐐插暣閺佹捇鎮╅崣鍌樺姂閺屻劑寮崹顔规寖濡炪倖姊瑰ú鐔奉潖濞差亝鍋￠梺顓ㄧ畱濞堝爼姊虹粙娆惧剳濠殿喚鏁哥划鈺呮偄閼茶櫣鍠栭幊锟犲Χ閸ヨ泛鏅梻鍌欑閹测剝绗熷Δ鍛獥闁哄秲鍔嶉崣蹇擃熆鐠鸿櫣鐏辩痪鎯с偢瀵爼宕煎☉妯侯瀳濠电偞鎯岄崰妤呫�冮妷鈺傚�风�瑰壊鍠楁闂備浇娉曢崰鎰板几閼姐倗绀婇柛鈩冪☉绾惧鏌涢弴銊ョ伇闁轰礁鍊块弻銊╂偆閸屾稑顏�
	private boolean checkTeamStatusValid(Team team)
	{
		BuffAgent buffagent = new BuffRoleImpl(team.getTeamLeaderId());
		int conflictId = buffagent.checkCanAddBuff(BuffConstant.StateType.STATE_TEAM_LEADER);
		return conflictId == 0;
	}
	
	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｅ崬顭胯椤兘寮诲☉銏犖ч柛銉戝嫮浜梻浣告惈閼活垳绮旈崜浣诡潟闁圭儤鍤﹂悢鍏煎�婚柍鍝勫�搁娲⒒閸屾瑦绁版繛澶嬫礋瀹曚即寮撮悙宥嗙洴瀹曠喖顢橀悩杈╃憹闁诲骸绠嶉崕閬嵥囬婊冾棜闁秆勵殕閳锋垶銇勯幒鐐村缂備礁顦顓犲垝婵犳凹鏁嶉柣鎰綑閿熺晫鏁婚弻銊モ攽閸℃姣愰梺褰掝棑閸忔﹢銆佸锟芥俊姝岊槾鐞氾箓鏌ｆ惔銈庢綈婵炴祴鏅濋幑銏犫攽鐎ｎ亞鐣哄┑顔筋殣閹风兘鏌熺粵鍦瘈濠碘�崇埣瀹曞崬螖娴ｇ儤娈繝纰夌磿閸嬫垿宕愰妶澶婂偍鐟滅増甯掔粈澶愭煙鐎涙绠橀柡鍡檮閹便劌螖鐎ｎ偄顏堕梻浣哄仺閸庤崵绮婚幘鑽ゅ祦閻庯綆浜栭弨浠嬫煕閻欙拷閸犳捇宕濆畝鍕厴闁硅揪闄勯崑鎰版煕椤垵浜濇慨锝呭濮婅櫣绮欏▎鎯у壋闂佺顑囨繛锟藉┑锛勬暬楠炲洭寮剁捄顭戞О婵＄偑鍊ら崢浠嬪垂瑜版帒绀夐柣鎴ｅГ閳锋垿鎮归幁鎺戝闁哄鏌ㄩ埞鎴︻敊閻撳孩些闂佷紮绲介悘姘辩箔閻斿吋鏅稿ù鐘差儏閽冪喖鏌ｉ弬鎸庡暈缂傚秴娲弻娑㈠箻濡わ拷閹冲繐鈻撻崨濠佺箚闁绘劦浜滈敓濮愬�濆畷鎴﹀礋椤栨氨鐤囧┑顔筋殣閹烽锟芥鍠栭…宄邦嚕閹绢喖顫呴柣妯款嚙閺佽绻濋悽闈涒枅婵炰匠鍏犳椽濡搁埡浣稿亶闂佽澹嗘晶妤呭煕閹达附鐓曟繝闈涙椤忣亪鏌涚仦璇插闁哄本鐩俊鎼佹晜婵劒铏庨梻浣虹《閺呮粓鎯勯鐐靛祦闁圭儤鍤﹂弮锟介幏鍛村传閸曨偅杈堥梻鍌氬�烽懗鍓佸垝椤栨凹娼栧┑鐘宠壘绾惧潡鏌曢崼婵囧櫝闁哄绉归弻锟犲炊閵夈儳浠鹃梺缁樻尰閻熲晠寮婚敐澶嬪亜闁告稑锕﹂崙鈥愁渻閵堝懏绂嬮柛妯恒偢閸╃偤骞嬮敃锟介悞娲煕閹般劍娅呴柨鐔诲Г閸旀瑩寮婚埄鍐╁缂佸灏呴幏鐑藉锤濡わ拷缁犵娀鏌ｉ幇顒佹儓閸烆垰顪冮妶鍡樼叆闁告艾顑呴埢宥夊即閵忊檧鎷婚梺绋挎湰閼归箖鏁撻挊澶婃Щ闂囧鏌涢妷鎴濇噺濞堥箖姊洪崜鑼帥闁稿鎳樺畷锝堢疀濞戞瑧鍘告繝銏ｆ硾椤戝懎鈻撻鐣岀鐎瑰壊鍠曢幉楣冩煛娴ｅ憡鍠橀柡灞界Ф閹瑰嫰鎮滃Ο璇插壍婵＄偑鍊ф俊鍥极婵犳碍鍋樻い鏂挎閻旂儤鍏滈梺鍨儏椤忚泛鈹戦悙鏉戠仸妞ゅ浚浜、鏃堝礋闂堟稒顓块梻浣侯潒閸曞灚鐣烽梺鎶芥敱閸ㄥ綊骞夐幖浣瑰亱闁割偅绻勯悷鏌ユ⒑閹稿海銆掗柛鐘虫尵濡叉劙骞掑Δ浣规闂佸吋浜介崕鍙夊垔閹绢喗鐓ｉ煫鍥ㄥ喕閹峰嘲鈽夊杈ㄥ枓闂傚倸鍊烽懗鍫曞箠閹剧粯鍋ら柕濞у懐澶勯梺绉嗗嫷娈曢柡鍛倐閺屻倝骞侀幒鎴濆缂備焦顨嗙敮妤呭Φ閸曨垼鏁冮柨婵嗘川閻ゅ嫬顪冮妶鍐ㄧ仾妞ゃ劌妫涢幑銏犫攽鐎ｎ亞锛滃┑顔矫崥瀣归崱娑欌拻闁稿本鑹鹃敓浠嬵棑缁牊绗熼敓浠嬬嵁婢舵劖鏅搁柣妯哄暱娴滄粌顪冮妶鍡楃瑨閻庢凹鍓涚划濠氼敍閻愬鍙嗛梺缁樻礀閸婂湱锟芥熬鎷�
	private boolean checkTeamNotInSwitchStatus(Team team)
	{
		if(team.getTeamInfo().getSwitchleaderid() == -1)
			return true;
		else if((now - team.getTeamInfo().getSwitchleadertime()) > TeamManager.MAX_INVITE_TIMEOUT )
		{
			team.getTeamInfo().setSwitchleaderid(-1);
			return true;
		}
		else
			return false;
	}
	
	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂侀潧顦弲婊堟偂閻斿吋鐓涢柛銉㈡櫅娴犳粓鏌ㄩ悢缁橆棄婵狅拷闁秵鏅搁柤鎭掑劤閸熸煡鏌熼崙銈嗗2闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎喘濮婄粯鎷呴崨濠呯闂佺绨洪崐婵嗙暦閻㈠憡鏅濋柨鐔剁矙閸┿儲寰勬繛銏㈠枛閺屻劎锟斤綆鍋呭鎴︽⒒娴ｇ瓔鍤欓柛鎴犳櫕缁辩偤宕卞Ο纰辨锤闂佺粯鍔掔拃锕傚极婵犲洦鐓曢柕澶樺枛婢ь垶鏌嶉柨瀣伌闁诡喖鍢查埢搴ょ疀閹垮啩鎮ｇ紓鍌欑筏閹风兘鏌涢幇銊︽澓濞存粍绮撻弻锟犲炊瑜庨ˉ婊堟煙閾忣偄濮嶉柟顖氱焸瀹曞崬鈽夊▎鎴濆箞闂備線锟芥稑宓嗘繛浣冲洤鍑犻柣鏂垮悑閻撶喖鏌熼幆褏鎽犵紒锟介崘顏嗙＜缂備焦顭囧ú瀛橆殽閻愬樊鍎忛柍瑙勫灴瀹曞崬顫濋鍌氬箣闂傚倸鍊风粈渚�骞栭锔绘晞闁搞儺鍓欑粣妤呮煙閸撗呭笡闁哄懏鎮傞弻銈夊箒閹烘垵濮堕梺鍝ュ枎缁绘﹢寮诲☉銏″亹闁归鐒﹂悿浣肝旈悩闈涗沪闁搞劌鐏濋悾鐑藉醇閺囥劍鏅㈤梺璺ㄥ枍缁瑩骞忛幋锔藉亜闁稿繗鍋愰崣鍡涙⒑缂佹ɑ鐓ラ柟纰卞亜閻☆參姊绘担铏瑰笡闁告梹娲熼弫鍐晝閸屾氨鐤呭┑顔界箓閻ジ鎮块敓钘夆攽閻愭潙鐏︽い顓炴喘椤㈡瑩骞嬮敂瑙ｆ嫼缂傚倷鐒﹂敃鈺呮倿閼恒儯浜滈柨婵嗛濞呭秵顨ラ悙鑼妞わ妇澧楅幆鏃堝閻樺磭锟筋參姊绘担鍛婂暈婵炶绠撳畷婊冣槈閳跺搫娲俊鐑藉煛閸屾熬鎷烽崹顐ょ闁割偅绻勬禒銏ゆ煛鐎ｅ爼妾紒缁樼♁瀵板嫮锟斤綆鍓氶崚娑㈡⒑閻愯棄鍔电紒鐘虫尭閻ｇ兘宕奸弴鐐嶁晝鎲歌箛娑欏剨闁割偅绺鹃弨鑺ャ亜閺冿拷閺嬬粯绗熷☉銏＄厱闁规儳顕ú瀵革拷瑙勬礃閸旀瑩骞冨▎蹇ｅ晠妞ゆ棁妫勯惁婊堟⒒娓氾拷濞佳囨偋閸℃あ娑樜旈崘顏嗙暥闂佺鏈划搴ｅ婵傚憡鐓欑紓浣姑粭姘舵煕鐎ｃ劌鍔ら柨鐔诲Г椤旀牠宕板Δ鍛闁惧浚鍋呴崣蹇涙煥閻斿墎鐭欓柡灞界Ч楠炴﹢宕ㄩ纰变紦闂傚倷鑳堕幊鎾诲床閺屻儮锟斤箑鐣￠柇锔界稁闂佹儳绻楅～澶婄暦婢舵劖鐓忓┑鐐茬仢閸旀粓鏌ｆ惔銈嗩仩缂佽鲸鎸荤粭鐔煎炊瑜庨悘宥夋⒑閼姐倕鏋傞柛搴ｆ暬楠炲啯銈ｉ崘鈺侊拷濠氭煠閹帒鍔氬ù婊冩贡缁辨捇宕掑▎鎴濆闁藉啳椴哥换娑㈠川椤旀儳鈷屽┑顔硷攻濡炶棄鐣烽妸锔剧瘈闁告劦鐓堝Σ閬嶆⒒娴ｄ警鐒炬い鎴濇嚇楠炲﹤螣閾忚娈鹃梺鍝勬储閸ㄦ椽寮查幖浣圭叆闁绘洖鍊圭�氾拷
	private boolean checkTeamNoSuccSwitchIn2min(Team team)
	{
		if((now - team.getTeamInfo().getSuccessswitchtime()) > TeamManager.MIN_SUCCESS_SWITCH_LEADER_PERIOD )
			return true;
		else
			return false;
	}
	
	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐ｇ珶閺嚶颁汗闁圭儤鎸鹃崢浠嬫⒑绾懏褰х紒鏌ョ畺钘熷璺虹灱濡垱銇勯幘鍗炲閻庢艾缍婂濠氬磼濞嗘埈妲梺纭咁嚋缁绘繂鐣峰┑瀣嵆闁绘垵妫楀▓銊ヮ渻閵堝棗绗掗悗姘煎弮瀵煡骞撻幒婵堝數闁荤姾妗ㄧ拃锕傚磿閹邦厾绠鹃柛娑卞幗閸犳ɑ鎱ㄦ繝鍛仩缂侇喗鐟╅獮鎰償閵忊�愁伆缂傚倸鍊风粈渚�顢栭崨瀛樺亱闁规崘宕靛畵渚�鐓崶銊ユ惛濞存粌缍婇弻鐔兼倻濡鐨戦梺褰掓敱濡炶棄顫忓ú顏勫窛濠电姴鍟壕鈺呮煟韫囨挾绠查柣鐔叉櫅閻ｇ兘濮�閻橆偅顫嶉梺闈涢獜缁辨洟宕㈤柆宥嗏拺闁圭娴风粻鎾澄旈悩铏�愮�殿喚顭堥埥澶愬閻樻鏀ㄩ梻鍌欑贰閸撴瑧绮旈悽鍛婂亗闁哄洨鍠嶇换鍡涙煏閸繃鍣归柡鍡樻礈缁辨帗娼忛妸銉㈡灆闂佸搫鐭夌紞渚�骞冮姀銈嗗亗閹煎瓨绻傞弸鍫ユ⒒娴ｈ櫣甯涢柟绋跨埣瀹曟洟鎮界粙鑳憰濠电偞鍨崹鍦不濞戙垺鐓熼柕蹇嬪�栧☉褔鎮介妯哄姦婵﹥妞藉畷銊︾節閸愵亜寮虫俊鐐�х�靛矂宕归崼鏇炵伋闁哄啫鐗嗙粈鍐┿亜閺傛寧顫嶇憸鏃堝蓟濞戙垹鐒洪柛鎰亾閻ｅジ姊洪懡銈呮灆閻忓繑鐟уΣ鎰板箻鐎靛摜鎳濋梺鎼炲劀閸曨厺閭梻鍌氬�风粈浣规償濠婂懎绶ゅù鐘差儛閺佸鏌ㄥ┑鍡╂▓闁轰礁鍟撮弻銊╁籍閸屾粌绗￠梺鍝勬媼娴滎亜顫忛搹瑙勫磯闁靛鍎查悘鍡椻攽閳藉棗浜滈悗姘嵆楠炲啯銈ｉ崘鈺侊拷鑽ょ磼濞戞﹩鍎愰柡鍛箞濮婃椽骞愭惔銏⑩敍闂佸綊顥撻崗妯虹暦椤掑嫷鏁嶉柣鎰ˉ閹锋椽姊婚崒姘卞濞撴碍顨呭嵄鐟滅増甯楅悡鏇㈡煛閸屾粌浠滈柟铏姈缁嬪顓兼径瀣幍闂佺顫夐崝锕傚吹濞嗘挻鐓㈤柛鎰典簻閺嬫盯鏌″畝瀣М鐎殿噮鍣ｅ畷鎺懳旀担鍝ュ降闂傚倷娴囧銊х矆娴ｇ尨鎷峰顐㈠祮妤犵偛鍟抽妵鎰板箳閹寸姷鏆㈤梻浣告贡閸庛倝宕归悽绯曪拷鏍拷锝庡枟閳锋垿鏌ｉ幋鏃�娅呭褍寮堕妵鍕敇閻愭潙绐涘┑鈥冲级閸旀瑩鐛Ο纭锋嫹濞戞顏堫敁閹剧粯鈷戦柣鐔稿閹界娀鎮介娑樻诞妤犵偛妫濆畷濂稿Ψ閿旇瀚奸梺鍝勵槺閸嬬喐鏅跺Δ鍐焾闁绘鐗勬禍婊堟煛閸パ勵棞婵炶绠撳畷鎴﹀煛閸涱喚鍘介梺纭呮彧缁插�燁暱闂備礁鎼幊蹇氥亹閸愵喒锟斤箓宕稿Δ浣告疂闂佹椿鍓︽禍婵嬪垂閸噮鍤曢柟缁樺俯閻撱儵鏌涢銈呮毐闁归攱妞藉铏规兜閸涱厺姹楅梺绋款儐閻╊垰鐣峰┑瀣櫢濞寸姴顑嗛埛鎴︽煕濞戞﹫宸ュ┑顔煎�块弻娑㈠棘閸ф寮板銈冨灪閿氶悡銈嗐亜韫囨挻鍣抽柟宄邦煼濮婅櫣绮欓幐搴㈡嫳闂佽崵鍟欓崨顖滃箵闂佸搫鍠涢幏椋庣磼缂佹娲撮柟顔瑰墲閹棃顢欓幆褎鍊梻鍌欒兌椤㈠﹤鈻嶉弴銏″仭鐟滄棃鐛径鎰妞ゆ棁鍋愰ˇ鏉款渻閵堝棗绗傞柤铏劶閵囨劙骞愭惔婵堢畾闂佺粯鍔︽禍娆戞濮楋拷閺屾稑鈽夐崡鐐典哗缂備緤鎷峰☉鏃戞汞dure濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫孝缂傚秴锕璇差吋婢跺﹣绱堕梺鍛婃处閸撴瑥鈻嶉敐澶嬧拺婵炶尪顕ч獮妤併亜閵娿儻韬�殿喖顭锋俊鎼佸煛閸屾矮绨婚梺鑽ゅТ濞诧箓鎮鹃锕�绠荤紓浣诡焽閸橆亪姊洪幖鐐插妧闁告劕褰炵槐鏃�淇婇悙顏勶拷鎴﹀垂閸濆娊娲偄缁楃尨鎷锋担鑲濇棃宕ㄩ鑺ヮ仧濠电偛顕慨鎾敄閸愵喗鏅搁柦妯侯槹閸ゅ洦銇勯姀鈽嗘疁鐎规洜鍠栭、妤呭磼濮橆剛顓煎┑鐘垫暩婵烇拷婵炰匠鍥х９闁归棿绲搁崶顒夋晬婵炴垶鍑瑰ú鎼佹⒑鐟欏嫷鍟忛柛锝庡灦楠炲繑顦版惔銏犳瀭闂佸憡娲﹂崜娑⑺囬妸鈺傗拺闁圭瀛╃壕鎼佹煕閵娿倗鐭欏┑鈥崇摠缁楃喖鏁撻挊澶樺殨妞ゆ洩鎷风�规洜鍘ч埞鎴﹀幢濞嗘垵鏄ユ繝纰夌磿閸嬫垿宕愰弽褜娼栧┑鐘崇閸嬨倝鏌￠崘銊у閻熸瑱绠撻弻銊╂偆閸屾稑顏�
	private boolean checkNewLeaderNormal(Team team, long memberRoleId)
	{
		for(xbean.TeamMember member: team.getTeamInfo().getMembers())
		{
			if(member.getRoleid() == memberRoleId)
			{
				if(member.getState() == TeamMemberState.eTeamAbsent)
					return false;
				else
					return true;
			}
		}
		return false;
	}
	
	
	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 794444;

	public int getType() {
		return 794444;
	}

	public long roleid;

	public CSetTeamLeader() {
	}

	public CSetTeamLeader(long _roleid_) {
		this.roleid = _roleid_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(roleid);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		roleid = _os_.unmarshal_long();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CSetTeamLeader) {
			CSetTeamLeader _o_ = (CSetTeamLeader)_o1_;
			if (roleid != _o_.roleid) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)roleid;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(roleid).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CSetTeamLeader _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(roleid - _o_.roleid);
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

