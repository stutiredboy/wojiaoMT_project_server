
package fire.pb.team;

import fire.pb.PropRole;
import fire.pb.battle.PlayPKManage;
import fire.pb.buff.BuffAgent;
import fire.pb.buff.BuffConstant;
import fire.pb.buff.BuffRoleImpl;
import fire.pb.clan.ClanUtils;
import fire.pb.talk.MessageMgr;






// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CRequestJoinTeam__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/***
 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厱妞ゎ厽鍨垫禍婵嬫煕濞嗗繒绠婚柡灞稿墲瀵板嫮锟斤綆浜濋鍛攽閻愬弶鈻曞ù婊冪埣瀵偊宕堕浣哄帾闂婎偄娲﹀ú鏍ф毄闂備礁鎲＄换鍐�冩繝鍌ゆ綎缂備焦顭囬悷褰掓煕閵夋垵鍠氬鑽ょ磽閸屾瑧顦︽い锕備憾瀵偆鎷犻懠顒佹闂佸搫娲㈤崹鍦不閿濆棛绡�闁靛骏绱曠粻鎾剁磽瀹ュ拑宸ラ柣锝呭槻铻栭柛娑卞幘椤ρ囨⒑閸忚偐銈撮柡鍛箞閸┿垼绠涢弴鐘碉紳闂佺鏈悷褏绮佃箛娑欑厵鐎瑰嫭婢樺Σ缁樸亜椤撶偞鍋ラ柟铏矒濡啫鈽夊鍡樼秾闂傚倷鑳剁划顖炲箰妤ｅ啫绐楅柟閭﹀幘閳瑰秴鈹戦悩鍙夌ォ闁轰礁绉电换婵嬪垂椤愩垹顫屽┑鐐茬墱閸樺墽妲愰幘瀛樺闁芥ê顦抽弫鍧楁倵鐟欏嫭绀堥柡浣割煼瀵偊骞樼紒妯烘疅闂侀潧顦介崰鏍疾闁秵鈷戦柛婵勫劚鏍″銈冨妼濡盯骞戦姀鐘婵炲棙鍨归惁鍫ユ⒑缁嬭儻顫﹂柛濠冪墱缁辩偞鎯旈姀銏㈢槇闂佹眹鍨藉褎鐗庨梻浣藉亹閹虫挻鏅堕悾灞藉灊闁割偁鍎辩粈鍐煃閻熻埇浠掔紒銊ヮ煼濡懘顢曢姀鈥愁槱闂佺懓鎲￠幃鍌炪�侀弮鍫晜闁割偆鍠撻崢浠嬫煙閸忚偐鏆橀柛濠冪墵椤㈡棃鎮╅悽鐢碉紲闁哄鐗勯崝宥囦焊娴煎瓨鐓欑�瑰嫮澧楅崵鍥煙椤旀儳鍘撮柟顔ㄥ洤閱囬柣鏂挎憸濡层儵姊婚崒姘拷鐑芥嚄閸洖绠犻柟鎹愵嚙閸氬綊鏌″搴″箹缂佺媭鍨堕弻銊╂偆閸屾稑顏�
 * @author changhao
 *
 */
public class CRequestJoinTeam extends __CRequestJoinTeam__ {
	private long now = 0L;//procedure闂傚倸鍊搁崐鎼佸磹瀹勬噴褰掑炊椤掑鏅悷婊冪Ч濠�渚�姊虹紒妯虹仴妞ゎ偅娲熼弫鎾绘寠婢跺鎷烽崸妞硷拷浣割潩閼稿灚娅㈡繛瀵稿Т椤戝洤鐣垫笟锟介悡顐﹀炊閵娧�妾ㄩ梺鍝勬噺閹倿寮婚妸鈺傚亞闁稿本绋戦锟�?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊閻樺樊妫岄梺杞扮閿曨亪寮婚垾鎰佸悑閹肩补锟藉磭顔愮紓鍌欑劍閸旀牠銆冩繝鍥ц摕闁炽儲鍓氶崥瀣箹缁櫢鎷烽崘宸妧闂傚倷娴囧銊х矆娴ｇ尨鎷峰顐㈠祮鐎殿喛顕ч埥澶愬閻橀潧濮堕梻浣告啞閸旀宕戦幘娲绘晣闁荤喐澹嬮弨浠嬫煟閹邦剛鎽犻悘蹇ｅ幗閵囧嫰顢橀悩鎻掑箣閻庢鍠涢褔鍩ユ径濠庢僵妞ゆ劧绲芥刊浼存⒒娴ｅ憡鍟為柟绋挎缁楃喐绻濋崘顭戜紦闂備礁婀遍崕銈夈�冮崱娑欏亗闁告劦鍠楅悡鐔兼煟閺冨偆鐒炬い銉ヮ儔瀵粙鏁嶉崟顓狅紳婵炶揪缍�濞咃絿鏁☉姘辩＜閻犲洩灏欐晶鏇㈡懚閻愮儤鐓曢柟鎵虫櫅婵￠攱淇婇幓鎺斿缂佺粯鐩畷鍗炍熼弴鐔风伌闁轰焦鎹囨俊鐑藉煛閸屾瀚藉┑鐐舵彧缁蹭粙骞夐敍鍕闁跨喓濮甸悡娑㈡煕濠婏拷缁�浣圭濠靛鐓欏〒姘仢婵倹顨ラ悙杈捐�挎い銏＄懇閹虫牠鍩℃担鍝ュ摋濠电姷鏁告慨浼村垂婵傜鏄ラ柡宥庡幖缁�澶愭煛瀹ュ骸骞栭柣銈夌畺閺岀喖姊荤�电濡介梺缁樻尪閸庣敻寮婚敐澶婂嵆闁绘劘顕滈幏鐑藉捶椤撱劍瀚规慨妯煎亾鐎氾拷?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫孝缂傚秴锕璇差吋婢跺﹣绱堕梺鍛婃处閸嬫捇骞忛柨瀣瘈婵ǜ鍎婚幏鐑藉川閺夋垹鐓戞繝銏ｆ硾閻ジ鎯侀崼鐔虹瘈闁汇垽娼у瓭闂佺锕ょ紞濠傜暦閹惰姤鍋╃�癸拷閿熺晫澹曟總鍛婄叆闁绘棁顕ц缂備胶绮换鍫濈暦閸洖惟闁靛鍨辩�氬綊鏌ｉ姀鐘冲暈闁绘挶鍎茬换婵嬫濞戞瑯妫﹀銈呭椤ㄥ﹪寮婚敍鍕舵嫹閿濆骸浜為柕鍡樺笧缁辨帗娼忛妸銉﹁癁闂佽桨鐒﹂幐鑽ょ矉閹烘棑鎷烽敐搴濋偗闁哥偠娉涢—鍐Χ鎼粹�茶埅闂佸摜濮甸〃鍫ユ晸閼恒儰浜㈡い顐㈩樀閵嗗啴濡烽埡鍌氾拷鐑芥煠绾板崬鍘搁柧蹇撻叄濮婃椽宕ㄦ繝鍐ｆ嫻缂佺偓婢樼粔鐢电矚鏉堛劎绡�闁搞儴鍩栭弲婵嬫⒑閹稿海绠撴繛璇х畵瀹曡櫕瀵肩�涙鍙冨┑鈽嗗灥瀹曠數绮诲锟介弻鐔煎矗婢跺锟芥劗锟芥鍣崜娆撳煝鎼淬劍鍊锋い鎺戝�婚埢澶嬬節閻㈤潧啸闁轰礁鎲￠幈銊╂偨閸涘﹤娈為梺鍛婃寙閸愮偓顥￠梻浣侯焾缁绘宕戦幇顔煎К闁跨喍绮欏濠氬磼濮樺崬顤�缂備礁顑嗙敮锟犵嵁閺嶎厼绠涙い鎾跺Х椤旀洟姊洪悷鏉挎毐闁搞垺鐓￠獮濠囧箛椤旂⒈妫滈梺鑺ッˉ銏ｃ亹閹烘挻娅滈梺鍛婃处閸橀箖鎮￠幘缁樷拺闁告稑锕︾粻姘箾閸滃啰鎮兼俊鍙夊姍楠炴帡寮敓鐣岋拷姘哺閺岀喓绱掑Ο铏圭懖濠电偛鐗嗘晶搴ｆ閹惧鐟归柛銉戝嫮浜堕柣搴ｆ閹烽绱掔�ｎ厽纭堕柡鍡畵閺屻劑鎮㈤崫鍕戯綁鏌涙繝鍕幋闁哄苯绉瑰畷顐﹀礋椤愵剚瀚圭憸鐗堝笒缁狙呯磼鐎ｎ亞姘ㄩ柡锟芥禒瀣厽婵☆垵娅ｆ禒娑㈡煛閸″繑娅呴柍瑙勫灴椤㈡瑧鍠婇崡鐐搭啀闂備浇娉曢崰鏇熸叏閵堝绀勭憸鐗堝笒閻鏌涢幇闈涙灍闁哄懏鐓￠弻锝夊箛椤掍讲鏋欓梺鍛婅壘椤戝寮诲☉妯锋闁告瑦顭囬崙褰掓⒑閸濆嫬浜伴柟宄板槻閳规垿鏁嶉崟顐℃澀闂佺锕ラ悧鏇綖韫囨梻绡�婵﹩鍓涢弻褍顪冮妶鍡楀闁稿﹥顨嗙粙澶婎吋婢跺鍘繝銏ｅ煐缁嬫挾妲愰幍顔剧＜閻犲洤寮堕ˉ銏ゆ煛鐏炲墽鈽夐柍璇叉唉缁犳盯鏁愰崱蹇旂亖闂傚倷绀侀幉鈥愁潖閻熸嫈鐔煎锤閸у獛ure濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫孝缂傚秴锕璇差吋婢跺﹣绱堕梺鍛婃处閸撴瑥鈻嶉敐澶嬧拺缂佸鍎婚～锕傛煕閺冿拷閸ㄥ灝顕ｆ繝姘櫇闁跨喎锟界喓浜藉┑鐐存尰閸戝綊宕归柆宥呯厺闁圭偓鏋奸弨浠嬫煟閹邦剛鎽犻悘蹇ｅ幗閵囧嫰顢橀悩鎻掑箣閻庢鍠涢褔鍩ユ径濞㈢喖宕楅崗鑲╂殾闂傚倷娴囧▔鏇㈠窗瀹ュ洤鍨濇繛鍡楃箳閺嗭箓鏌熸潏楣冩闁稿﹦鍏橀弻娑樷攽閸℃浼�闂佸憡锕㈡禍璺侯潖濞差亜鎹舵い鎾跺仜婵″搫顪冮妶鍐ㄥ婵☆偅绻傞悾鐑藉箛閻楀牆浠洪梺鍛婄☉鑹岄柟宄邦煼濮婃椽宕滈幓鎺嶇敖闂佸摜濮甸幑鍥春閿旂晫鐟归柨鐔剁矙瀵鈽夐姀鈥充簻闂佸憡绻傜�氼亜危閹扮増鈷戦柛婵嗗閻掕法绱撳鍕獢鐎殿噮鍋婇獮鍥级閸ф鏁规繝鐢靛Т閿曘倝宕鐐茬？闁规儳澧庣壕浠嬫煕鐏炲墽鎳勭紒浣规緲椤啰锟芥稒蓱閸婃劖顨ラ悙鏉戝缂佺粯绻傞～婵嬵敆閸屻倕鏁搁梻鍌欑閹诧紕绮欓幒鎴劷婵炲棙鍔曢閬嶆煟濡偐甯涢柣鎾存礋閺岋繝宕堕妷銉ヮ瀳婵犫拃鍌氬祮闁哄被鍔戦幃銏ゅ礄閵堝棗顏堕梺缁樻煥婢瑰﹥绂掗埡鍐＝濞达絼绮欓崫娲煙缁嬫鐓兼鐐茬箻瀹曘劑顢涘☉妯荤�梻浣告啞濞插繘宕濆鍥锋嫹濮橆剦鐓兼慨濠勭帛閹峰懘鎮滃Ο鐑樼暚闂備浇顫夌粊鎾礈濠靛牊宕叉繛鎴炵懅缁★拷闂佹悶鍎崝灞剧閹烘埈娓婚柕鍫濇缁屽潡鏌熸搴″幋闁哄备鍓濋幏鍛喆閸曨偆锛撻梻浣芥〃閻掞箓骞戦崶顒�鏋侀柟鍓х帛閺呮悂鏌ㄩ悤鍌涘?
	Team team;
	@Override
	protected void process() {
		// protocol handle
		final long applierRoleId = gnet.link.Onlines.getInstance().findRoleid(this);
		if (applierRoleId < 0)
			return;
		xbean.Properties prop = xtable.Properties.select(roleid);
		if (prop == null)
		{
			return;
		}
		
		Long appliedclanfightid = xtable.Roleid2clanfightid.select(roleid);//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崷顓犵焿闁圭儤妫戦幏鐑芥晲鎼粹�茬凹濠电偛鎳岄崹钘夘潖濞差亝鍤嶉柕澶婂枤娴滎亣妫熷銈嗙墱閸嬫稑效閺屻儲鈷戞い鎺炴嫹缂佸鏁婚幃锟犲Ψ閳哄倻鍘介梺鍝勫暙閸婅崵鏁☉娆嶄簻闁靛鍎哄Σ铏圭磼鏉堛劍灏い鎾炽偢瀹曨亪宕橀鐐村創濠德板�楁慨鐑藉磻濞戙垹鐤い鎰╁劤娴滀粙姊洪懡銈呅㈡繛娴嬫櫇娴滅鈻庨幋鐘靛箵闂佺粯鍔楅崕銈夊煕閹寸姵鍠愰柣妤�鐗嗙粭鎺懨瑰锟介崡鎶藉蓟濞戞鐔煎传閸曨剙锟筋垳绱撴担绋匡拷鍦暜閹烘柨寮叉俊鐐�曠换鎰板箠閹版澘鍌ㄥù鐘差儐閻撴瑩鏌ゅù瀣珗閽樼喖姊洪崨濠冨鞍缂佽瀚伴獮蹇氥亹閹烘垹浼嬮梺鍝勫�堕崕鏌ュ棘閿熻姤淇婇悙顏勶拷鏍偋椤撶姴绶ら柦妯侯樈閸ゆ洘銇勯弮锟介幏婵嬪箯妞嬪孩鍠嗛柛鏇ㄥ墰椤︻參姊烘潪鎵槮妞ゎ厾鍏橀悰顕�宕橀妸銏＄�婚梺鍦亾濞兼瑩鏁撻悾宀�甯涘ǎ鍥э躬椤㈡稑顭ㄩ崘銊ょ帛婵°倗濮烽崑鐐恒�冩繝鍌ゆ綎缂備焦顭囬悷褰掓煥閻旂粯顥夋い顓炴穿椤﹀綊鏌嶉妷顖滅暤鐎规洖銈告俊鐑藉Ψ瑜濈槐鐢告⒒閸屾瑧璐伴柛鎾寸懅缁瑦绗熼敓钘夘嚕椤愶箑纾兼繛鎴炵墧缁ㄥ姊虹憴鍕婵炲鐩绋款吋閸モ晝锛滈柣鐘叉搐瀵爼藟閵忋倖鐓欐い鏃囧亹缁夎櫣锟借娲栭悥鐓庣暦閹偊妲兼繝銏ｆ硾鐎氼參濡甸崟顒佸劅闁挎稑瀚呰閺屸�崇暆鐎ｎ剛蓱闂佽鍨卞Λ鍐极閹版澘骞㈡俊顖濆吹濡叉垿姊婚崒娆戭槮闁硅绻濋垾锕傚幢濞戞鍊為梺鑲╊焾閻忔艾鈻嶅鍛斀闁绘绮☉褔鏌涙繝鍌ょ吋闁炽儻绠撳畷鐓庘攽閹邦剚娅婃繝鐢靛█濞佳兠洪姀锛勵洸婵犲﹤鐗婇悡娑㈡煕鐏炲墽绠栫痪顓℃硾闇夐柣姗嗗枛閻忔煡鏌″畝锟介崰鏍�佸☉姗嗘僵闁告鍋愰崣鐑樼節濞堝灝鏋涢柨鏇閸掓帡顢涢悙鑼唵闂佸憡渚楅崰姘舵偡鐟欏嫨浜滈柡宥冨妿閻﹤鈹戦鐓庢倯缂佺粯绻堥幃浠嬫濞戞鎹曢梻浣割吔閺夊灝顬堥梺浼欑稻缁诲嫮鍒掑▎鎴炲磯闁靛闄勯鏇熺節瀵伴攱婢橀敓绐栧洤绠柣鎴ｅГ閻撳啴鏌﹀Ο渚▓婵℃彃鎲￠妵鍕敃閿濆洨鐤勫銈冨灪椤牓藝瀹曞洨纾界�广儱妫▓鏃堟煃鐟欏嫬鐏撮柟顔界懅閿熻姤绋掗…鍥╃矙閸ヮ剚鈷戦柛娑橈龚婢规ɑ銇勯幋婵囧殗闁炽儻绠撳畷鎯邦槷闁哄閰ｉ弻鐔猴拷鐢殿焾灏忕紓浣诡殔椤﹂潧顫忓ú顏勭閹艰揪绲块悾闈涒攽閳藉棗浜濇慨濠傤煼楠炴垿濮�閵堝懎鑰垮┑鈽嗗灦閺呰尙鑺辨繝姘拺闁告繂瀚ⅹ闂佸憡鏌ㄩ柊锝夊箚鐏炲墽绡�闁搞儯鍔庨崢閬嶆⒑閸濆嫬锟藉綊顢栧▎鎾崇？闁瑰濮风壕濂稿级閸稑濡兼繛鎼枛閳规垿鍩勯崘鈺侊拷鎰版煛娴ｇ鏆為柟宄版嚇瀹曟粓宕ｆ径妯伙紙闂傚倸鍊搁崐椋庣矆娓氾拷閹潡宕堕‖顒佺洴瀹曠喖顢涢敓浠嬪炊椤掍礁浠虹紓浣割儐鐎笛囨倵椤掑嫭鈷戦柣鐔告緲閳锋梻绱掗鍛仸鐎殿喗鐓￠獮鏍ㄦ媴閸︻厼寮抽梻浣虹帛濞叉牠宕愰崷顓ㄦ嫹濮樼偓瀚�? by changhao
		if (appliedclanfightid != null)
		{
			Long applierclanfightid = xtable.Roleid2clanfightid.select(applierRoleId);//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崷顓犵焿闁圭儤妫戦幏鐑芥晲鎼粹�茬凹濠电偛鎳岄崹钘夘潖濞差亝鍤嶉柕澶婂枤娴滎亣妫熷銈嗙墱閸嬫稑效閺屻儲鈷戞い鎺炴嫹缂佸鏁婚幃锟犲Ψ閳哄倻鍘介梺鍝勫暙閸婅崵鏁☉娆嶄簻闁靛鍎哄Σ铏圭磼鏉堛劍灏い鎾炽偢瀹曨亪宕橀鐐村創濠德板�楁慨鐑藉磻濞戙垹鐤い鎰╁劤娴滀粙姊洪懡銈呅㈡繛娴嬫櫇娴滅鈻庨幋鐘靛箵闂佺粯鍔楅崕銈夊煕閹寸姵鍠愰柣妤�鐗嗙粭鎺懨瑰锟介崡鎶藉蓟濞戞鐔煎传閸曨剙锟筋垳绱撴担绋匡拷鍦暜閹烘柨寮叉俊鐐�曠换鎰板箠閹版澘鍌ㄥù鐘差儐閻撴瑩鏌ゅù瀣珗閽樼喖姊洪崨濠冨鞍缂佽瀚伴獮蹇氥亹閹烘垹浼嬮梺鍝勫�堕崕鏌ュ棘閿熻姤淇婇悙顏勶拷鏍偋椤撶姴绶ら柦妯侯樈閸ゆ洘銇勯弮锟介幏婵嬪箯妞嬪孩鍠嗛柛鏇ㄥ墰椤︻參姊烘潪鎵槮妞ゎ厾鍏橀悰顕�宕橀妸銏＄�婚梺鍦亾濞兼瑩鏁撻悾宀�甯涘ǎ鍥э躬椤㈡稑顭ㄩ崘銊ょ帛婵°倗濮烽崑鐐烘晝閵忕媭娼栫紓浣股戞刊鎾煕濞戞﹫鏀婚柛搴㈡尭椤啴濡惰箛娑欘�嶆繝銏㈡嚀濡繈寮幘缁樺仼鐎癸拷閿熶粙骞婂Δ鍛厱闁靛鍨靛ú锕傛晬濡ゅ懏鈷戦柤濮愬�曢弸鎴︽煟閻旀潙鍔ら柨鐔诲Г閸戝綊宕板顒夊殨鐟滄棃寮幘瀵割浄閻庯綆鍋�閹锋椽鏌ｉ悩鍏呰埅闁告柨鐭傚绋款吋閸モ晝锛滃銈嗘⒒閺咁偊骞婇崶顒佺厪闁糕剝娲滅粣鏃傦拷娈垮櫘閸ｏ絽鐣烽悡搴樻斀閻庯綆浜濋弳顏勨攽閻樺灚鏆╁┑鐑囨嫹濠电偘鍖犻崶銊ヤ罕濠电姴锕ら崥姗�鏁愭径妯绘櫖濠电偞鍨堕〃鍫㈢不濮樿埖鈷戠紓浣姑慨锕�霉濠婂嫮鐭掗柡浣规崌閹崇偤濡疯閳峰矂鎮楃憴鍕缂傚秴锕獮鍐焺閸愨晛鍔呭┑鈽嗗灥瀹曞灚绂嶅▎鎾粹拻濞达絽鎲￠幆鍫熺箾鐏炲倸濡介柟渚垮姂閹粓鎳為妷銉よ檸缂傚倸鍊烽悞锔炬箒缂備浇顕уΛ婵嬪蓟閺囥垹閱囨繝闈涙搐濞呫倝姊洪棃鈺冪ɑ婵＄偘绮欏濠氭晲婢跺﹦顔掗柣搴ㄦ涧閹诧繝宕虫导瀛樷拺閻犲洠锟借櫕鐏嶅銈冨妼閹虫﹢宕洪妷锕�绶炲┑鐐靛亾閻庡鏌ｈ箛鏇炰沪闁归攱绻勫Σ鎰枎閹邦亞绠氶梺缁樺姦娴滄粓鏁撻懞銉︾闁瑰箍鍨介獮鍥敋閸℃ê顏跺┑顔斤公閹风兘鏌涢妷鎴濇噹閹藉姊绘担鐟邦嚋婵炲弶鐗犲畷鎰亹閹烘挸浜楅梺闈涱槴閺呮粓鎮￠悢鍏肩厸闁告劑鍔岄敓鍊熷吹閺侇喖鈽夊▎宥勭盎闂侀潧顦崕鍝勎熼敓浠嬫⒑閸濆嫯瀚扮紒澶婄秺楠炴劖绻濋崘銊х獮濠碘槅鍨抽崕鐢稿几閸涘瓨鈷掑ù锝堝Г閵嗗啴鏌ｉ幒鐐电暤妤犵偞鍨垮畷鍫曨敆閿熶粙寮告笟锟介弻鐔煎礈瑜忕敮娑㈡煛閸涱喗鍊愰柡灞诲姂閹倝宕掑☉姗嗕紦? by changhao
			if (!appliedclanfightid.equals(applierclanfightid))
			{
 			    MessageMgr.sendMsgNotify(applierRoleId, 410025,  null);
 			    return;
			}
			else
			{
				xbean.ClanInfo claninfo = ClanUtils.getClanInfoById(roleid, true);
				if (claninfo == null)
				{
					return;
				}
				
				xbean.ClanMemberInfo memberinfo = claninfo.getMembers().get(applierRoleId);
				if (memberinfo == null)
				{
	 			    MessageMgr.sendMsgNotify(applierRoleId, 410026,  null);
					return;
				}
			}
		}
		else
		{
			Long applierclanfightid = xtable.Roleid2clanfightid.select(applierRoleId);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傦紭闂佹悶鍔忓▍锝囧垝鐎ｎ喖绠抽柡鍐╂尰鐎氬綊鏌ㄥ┑鍡涱�楀褜鍠氶幉鎼佸级閹稿寒妫炲銈庝簻閸熷瓨淇婇崼鏇炲耿婵°倕鍟伴幊鍡涙⒑鐠囨彃顒㈤柛鎴濈秺瀹曪綁宕橀鑲╃暫闂佽法鍠撴慨鎾础閹惰姤鐓忛煫鍥ь儏閻忊晝鎲搁弶鍨伃婵﹥妞介獮鏍倷閹绘帒袝婵＄偑鍊戦崕鏌ュ箲閸パ呮殾婵﹩鍘奸閬嶆倵濞戞瑯鐒介柛妯哄船閳规垿鍩ラ崱妤冧化闂佺绨洪崐婵嬬嵁婢舵劕浼犻柕澹拑绱查梺鍝勵槸閻楀嫰宕濈仦鐭綊顢欓幘鍛閻熸瑥瀚粚璺ㄧ磼閹绘帪鎷烽悢杞拌埅闂傚倷绀侀幉锛勬崲閸屾粣鎷峰鐓庢珝濠碘�崇埣椤㈡瑩骞嬮幒鏃傜暰闂備線娼ч悧鍡椕洪妶鍛瘎闂傚倷鑳堕…鍫ヮ敄閸℃稒鍎庢い鏍亼閿熸垝绶氬浠嬵敇閻愯尙鐛╅梻浣筋潐椤旀牠宕伴弴銏″殝妞ゅ繐鐗婇埛鎺楁煕鐏炲墽鎳嗛柛蹇撶灱缁辨帡顢氶崨顓犱桓閻庤娲栫紞濠傜暦婵傜鍗虫俊銈咁儐鐎氬綊鏌ㄩ弴鐐诧拷鎼佹倷婵犲啨浜滈柟鍝勭Ф椤︼箓鏌涢幙鍐ㄥ箻缂佽鲸鎹囧畷鎺戔枎閹存繂顬夋俊鐐�ら崢鐓幟洪妸褍鍨濈紓浣骨滈崑鍛存煕閹般劍娅囬柛妯兼暬濮婃椽宕烽娑欏珱闂佸憡锚閵堟悂骞冨锟介弫鎾绘偐閸愯鎷烽崹顐ｅ弿婵☆垳鍘ф禍楣冩倵濮樼偓瀚�? by changhao
			if (applierclanfightid != null)
			{
				if (!applierclanfightid.equals(appliedclanfightid))
				{
	 			    MessageMgr.sendMsgNotify(applierclanfightid, 410027,  null);	
	 			    return;
				}				
			}
		}
		
		TeamManager.logger.debug("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸倿鎸婃径澶嬬潖闂傚倷绀侀幉锟犳偡閵夆敡鍥敍閻愬牆娲崺锟犲川椤旇瀚奸梻浣告啞缁诲倻锟芥凹鍘介崚濠冪附閸涘﹦鍘遍梺瑙勫礃濞夋盯寮稿☉姘炬嫹濞堝灝鏋︽い鏇嗗洤鐓″鑸靛姇椤懘鏌嶉埡浣告殲闁绘繃娲熷缁樻媴妞嬪簼瑕嗙紓浣藉紦缁瑩骞嗘径瀣檮缂佸鐏濋崑宥夋⒑鐠恒劌娅愰柟鍑ゆ嫹 = " +applierRoleId+"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮敓浠嬪箯濠靛绠瀣捣缁犳梹绻涢幋鐐嗘垿宕虫禒瀣厽妞ゆ挾鍠撻幊鍥煛瀹�锟介崰搴ㄥ煝鎼淬劍顎愬銈嗘肠閸忕姵妞介、姗�濮�閻樼儤鎲伴梻浣虹《閸撴繈銆冭箛娑樿Е閻庯綆鍠楅悡鏇熺箾閹存繂鑸归柡瀣ㄥ�濋弻銊╂偄閾忚鎲橀梺鍛婃尵閸犲酣锝炶箛娑樹紶闁告洘鍤崶褏鍊為悷婊冪箲缁傛帗绺介崨濞炬嫼闁荤姴娲╃亸娆戠不閸欏鍙忔俊顖滎焾婵倿鏌℃担瑙勫磳闁瑰磭鍋ゆ俊鐤槻闁哄棴绻濆娲偡閺夋寧顔�闂佺懓鍤栭幏锟�? 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯顢曢敐鍡欙紩闂佽法鍠愰弸鑽ょ不閹惧磭鏆﹀┑鍌滎焾椤懘鏌嶉妷銉ユ毐缂併劊鍎靛缁樻媴缁嬫妫岄梺绋款儎缁舵艾鐣烽弴鐔哥秶闁宠桨绶″Λ婊堟⒑缁夊棗瀚峰▓鏇㈡煃闁垮娴柡灞剧洴椤㈡洟濡堕崨顔撅拷濠氭⒑閸涘鐒介柛蹇旓耿瀵濡搁妷銏℃杸闂佺硶妾ч弲婊勬櫏闂傚倷绀侀幖顐﹀箠韫囨稑绠栭柛宀�鍋涢拑鐔兼煏婵炵偓娅嗛柛瀣閺屾稓浠﹂崜褉妲堝銈呴獜閹凤拷");
		//add by cn 濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崷顓犵焿闁圭儤妫戦幏鐑芥晲鎼粹�茬凹濠电偛鎳岄崹钘夘潖濞差亝鍤嶉柕澶婂枤娴滎亣妫熷銈嗙墱閸嬫稑效閺屻儲鈷戞い鎺炴嫹缂佸鏁婚幃锟犲Ψ閳哄倻鍘介梺鍝勫暙閸婅崵鏁☉娆嶄簻闁靛鍎哄Σ铏圭磼鏉堛劍灏い鎾炽偢瀹曨亪宕橀鐐村創濠德板�楁慨鐑藉磻濞戙垹鐤い鎰╁劤娴滀粙姊洪懡銈呅㈡繛娴嬫櫇娴滅鈻庨幋鐘靛箵闂佺粯鍔楅崕銈夊煕閹寸姵鍠愰柣妤�鐗嗙粭鎺懨瑰锟介崡鎶藉蓟濞戙垹绠荤痪鎯ь儏椤ユ繈姊烘导娆戠М婵炰匠鍥舵晣闁稿繒鍘х欢鐐烘倵閿涘崬瀚褰掓⒒閸屾艾锟芥悂宕愰幖浣瑰亱濠电姴鍟伴悷瑙勪繆閵堝懏鍣洪柛濠傜仢铻栭柨婵嗘噹閺嗙偤鏌ｉ幘瀛樼妤犵偞鐗曡彁妞ゆ帪鎷烽柨鐔诲Г閹瑰洤鐣烽妷鈺婃晝闁靛牆娲ㄩ敍婊冾渻閵堝棙顥嗛柛瀣姈閺呭爼濮�閵堝棛鍙嗛梺缁樻煥閹诧繝鎮橀鍓х＝鐎广儱鎳忛ˉ銏拷瑙勬礃濠㈡鐏冮梺鍛婁緱閸犳牗绂嶅Δ锟介埞鎴︽倷閸欏妫￠梺鍦焾椤兘骞冮敓鐘插嵆闁绘棁娅ｉ鏇㈡⒑閻熼偊鍤熼柛搴㈠灴瀹曟顢楅崒锔藉閻熸瑥瀚崑鐘绘煕鎼达絾鏆�殿喖顭烽弫鎰板醇閵忋垺婢戦梺璇插嚱缂嶅棙绂嶅鍕弿闁挎洖鍊归埛鎴︽煕濠靛棗顏繝锟芥导瀛樼厽闁冲搫锕ら悘锔筋殽閻愭彃鏆ｉ柛鈺嬬節瀹曘劑顢橀悩闈涘箑婵犵數濮伴崹鐓庘枖濞戙垺鏅濋柕澶嗘櫆閸嬧晛鈹戦悩宕囶暡闁绘挾鍠栭獮鏍庨锟介悞娲煕閻旈绠婚柡灞剧洴閺佹劖鎯旈埄鍐綆闁诲氦顫夊ú妯煎垝瀹�鍕厺閹兼番鍔岀粻鎶芥煛閸屾艾鈷旈柤铏そ濮婂宕掑顒婃嫹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閼碱剦妲烽梻浣侯攰閹活亞绮婚幋鐘电焼闁割偁鍎查埛鎴炪亜閹虹偞瀚圭紓浣割槺閺佽顕ｉ幓鎺嗘斀閻庯綆鍋嗛崢閬嶆煟韫囨洖浠滃褌绮欐俊鎾箳濡や胶鍘卞┑鈽嗗灠閸氬寮抽浣瑰弿濠电姴鎳忛鐘绘煙閻熸澘顏┑鈩冩倐婵＄兘鏁傞幆褏绋堥梻鍌氬�烽懗鍫曞箠閹捐鍚归柡宥庡幖缁狀垶鏌ㄩ悤鍌涘?,濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫小闁告濞婂璇测槈濡攱鏂�闂佸憡娲﹂崑鍕叏閵忋倖鈷戞繛鑼额嚙楠炴鏌熼悷鐗堝枠鐎殿喖顭烽幃銏ゆ惞閸︻叏绱查梻渚�娼х换鎺撴叏閻㈠憡鍊堕柛顐犲劜閳锋垹绱掔�ｎ厼鍔垫い顐畵閺屾盯寮敓浠嬪垂閸噮鍤曞┑鐘崇閸嬪嫰鏌ｅ顒傛憼閻庢艾缍婇弻锝夊閳藉棗鏅遍梺缁樺浮缁犳牕顕ｆ禒瀣労闁告劦浜為惁鍫濃攽閻愯尙澧曢柣蹇旂箞閹﹢濡烽埡鍌滃幈闁诲函缍嗛崑鍕叏婢跺绻嗛柛娆忣槸婵秵顨ラ悙鏉戞诞鐎殿噮鍣ｉ獮姗�寮堕幋顓濈处闂傚倷鐒︾�笛呮崲閸屾粏濮抽柤娴嬫櫈婵娊鏌﹀Ο渚＆鐟滅増甯楅崑鎰亜閺冨洤浜瑰ù鐘荤畺濮婃椽妫冨☉娆愭倷闁诲孩鐭崡鎶藉Υ娓氾拷瀵挳濮�閳哄倹娅岄梻浣侯焾閺堫剛鑺遍挊澶樼叆闁割偆鍟块幏娲⒑閸涘﹦绠撻悗姘煎幖閿曘垽骞嶉鍓э紲闁诲函缍嗛崑鍡樻櫠鏉堚晝纾兼い鏃�顑欓崵娆撴煃閽樺妲告い顐ｇ箞閹瑩顢楅敓浠嬵敂閸洘鈷戦柟绋挎捣缁犳挾绱掗妸銊ヤ汗闁奸缚浜幏鐘裁圭�ｎ偅鏉告俊鐐�栧Λ渚�宕戦幇顓熸珡濠电姵顔栭崰鏍晝閵夈儺娓诲ù鐘差儏缁犳牠鏌ｉ幋锝嗩棄缂佺姰鍎查妵鍕籍閸屾矮澹曞┑鐐茬墱閸ㄨ泛顫忕紒妯诲閻熸瑥瀚禒鈺呮⒑閸涘﹥鐓ョ紒澶嬫尦閳ユ棃宕橀埡鍐炬祫闁诲函缍嗛崜娆戠矈閿曞倹顥婃い鎰╁灪婢跺嫮绱掔�ｎ偄鐏ユい鏂跨箰閳规垹锟斤綆鍋嗛崢鍛婄節閵忥絾纭炬い鎴濇嚇閹﹢濡疯閹烽鎲撮崟顒�纰嶅┑鈽嗗亝缁诲倿锝炶箛鎾佹椽顢旈崪浣诡棃婵犵數鍋為崹璺侯潩閵娾晜鍋╁Δ锝呭暞閻撶喖骞栧ǎ顒�鐒洪柛鐔风箻閺屾盯骞樼捄鐑樼�诲銈嗘穿缂嶄線鐛锟介、娆撴寠婢舵稒瀚归柛顐ｆ礃閸嬶綁鏌涢妷顔荤盎闁汇劏娅ｇ槐鎺撳緞鐎ｎ偁浠㈤梺鍝勫閸撴繈骞忛崨顖涘枂闁告洦鍋嗛敍鎾绘⒒娴ｈ姤銆冮柣鎺炵畵楠炴垿宕堕锟介弸渚�鏌熼崜褏甯涢柡鍛倐閺屻劑鎮ら崒娑橆伓?
		BuffAgent agent = new BuffRoleImpl(applierRoleId, true);
		if (agent.existBuff(PlayPKManage.BuffDuelID)) {
			MessageMgr.sendMsgNotify(applierRoleId, 141133,  null);
			return;
		}

		PropRole applierprop = new PropRole(applierRoleId, true);
		if(applierprop.getProperties().getCruise() > 0) {
			TeamManager.logger.info("CRequestJoinTeam:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯￠幊鏍煛閸愵亷绱冲┑鐐存尰閼归箖鏁冮妷褝鎷峰顒傜Ш婵﹨娅ｇ划娆戞崉閵娧傜礃闂備胶顭堥鍥磻閵堝绠栭梽鍥╃不濞戙垹绠奸柛鎰典簻閺佹悂姊洪懡銈呅繛鍜冪秮瀹曟洟濡舵竟锕�顦甸幃娆戯拷闈涙憸椤旀洟姊洪崨濠佺繁闁告ü绮欒棢闁绘绮悡娆愩亜閺囩偞鍣归柡瀣洴閺屽秶鎲撮崟顐や患闂佽法鍠愰弸鑽ょ礊閸℃稑纾婚柨鐔剁矙閺岀喖鎮块娑变哗缂備浇椴哥敮鐐垫閹烘顫呴柣妯垮皺閻嫰姊绘担鍝勭殤闁归鍏樺鍫曞醇濮橆厽鐝ㄩ梺鐟板槻閸㈡煡锝炲┑瀣�锋い鎺炴嫹妞ゅ骏鎷�?" + applierRoleId + "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亜顒㈡い鎰Г閹便劌顫滈崱妤�鈷掗梺缁樺笂缁瑩寮婚妶鍡樺弿闁归偊鍓ㄩ幏鐑藉冀椤愵剚瀚规慨姗嗗墻閻撳ジ鏌″畝瀣М鐎殿噮鍣ｅ畷鎺戭潩椤戣法甯涚紓鍌氬�风欢銈夊箯瀹勯偊鐔嗛悹楦挎閻掑潡鏌熸搴″幋闁诡垰鍊垮畷銊︾節閸屻倓绱﹂梻鍌氬�峰ù鍥р枖閺囥垹绐楃�广儱娲ら崹婵囩箾閸℃ɑ灏电�规挷绶氶悡顐﹀炊閵娿儲鎯涙繛瀛樼矊缂嶅﹪寮婚悢鍏煎�绘俊顖濇娴犲吋淇婇妶鍥㈡繛宸弮瀵鏁愭径瀣簻闂佸壊鍋呭ú姗�顢撻弽顓熲拺缂佸顥氬☉銏犵倞鐟滃繘顢欓崱娑欌拺缂備焦锚閻忚鲸淇婇銏狀伀缂侇喖顭烽幖褰掝敃閿涘嫮鐣鹃梻渚�娼ч悧鍡欐崲閹寸媴鎷峰鎰佹綈缂佺粯绋撴竟鏇狅拷锝庝簷濮规绻濋悽闈涘壋闁归鍏樺娲传閸曨剚鎷卞┑鐐插级閿氭い鏇樺劦瀹曠喖顢涘璺烘暪婵犵數濞�濞佳兾涘Δ鍚藉鈹戠�ｎ偀鎷绘繛杈剧悼閹虫捇顢氬鍕闁告瑥顦辨晶鐢碉拷瑙勬礃閸旀﹢濡甸幇鏉跨闁规儳鍘栫花鍨節閻㈤潧浠滄俊顐ｇ懇楠炴劖绻濆顓炰簵闂侀潧顦弲婊堟偂閻斿吋鐓涢柛銉㈡櫅娴犳粓鏌ㄩ悢缁橆棄婵狅拷闁秵鏅搁柤鎭掑劤閸熸煡鏌熼崙銈嗗?,婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ姀鐘差棌闁轰礁锕弻鈥愁吋鎼粹�崇缂備焦鍔栭〃鍡樼┍婵犲洤围闁告侗鍘藉▓鍓佺磽娴ｇ懓鏁剧紒鐘虫崌瀵鈽夊搴⑿俊鐐�戦崝宀勫箠閹邦厾鐝堕柡鍤堕姹楅梺鍦劋閹搁箖宕㈤幖浣瑰�甸悷娆忓閹嫰鏌涢悩宕囧⒌鐎殿喚鏁婚、妤呭磼閿旇棄顏堕梻鍌氱墛缁嬫捇鎮為崨濠冨弿濠电姴鎳忛鐘电磼椤旂晫鎳囨鐐村姈閹棃濮�閳ユ剚浼嗙紓鍌氬�搁崐椋庣矆娓氾拷椤㈡牠宕卞☉妯碱唹闂佹悶鍎洪崜娆撳及閵夆晜鐓忛煫鍥ь儏閿熻姤娲滈悮鎯ь吋婢跺鍘遍悗鐧告嫹閻庯綆鍠楅宥夋煟鎼搭澀浜㈡い顐㈩樀閵嗗啴濡烽埡鍌氾拷鐑芥煠绾板崬鍘搁柧蹇撻叄濮婃椽宕ㄦ繝鍐ｆ嫻閻庣櫢鎷烽柟闂寸閽冪喖鏌ㄥ┑鍡樺晵闁哄啫鐗婇弲鎼佹煢濡尨绱氭繛鎴炃氶弨浠嬫煕閳╁啰鎳勬繛鍫ョ畺濮婃椽妫冨☉姘辩杽闂佺锕ュú婊呭垝閼姐倗纾兼俊顖炴櫜缁ㄥ姊洪崫鍕殭闁稿﹦鎳撻埢宥夊即閵忥紕鍘卞┑鈽嗗灠濠�閬嶆儗濞嗘劖鍙忓┑鐘插暞閵囨繃淇婇銏犳殭闁宠棄顦～婵囶潙閺嵮勬毌濠电姷鏁告慨鐢割敊閺嶎厼绐楁慨妯挎硾缁�鍌涗繆椤栨瑨顒熼柛銈嗘礋閺岀喖姊荤�靛壊妲紓渚婃嫹闁告劦鍠楅悡鍐煟閻旇鐒藉ù鐘冲笧缁辨帡濡搁妷顔惧悑濠殿喖锕ュ钘夌暦椤愶箑绀嬫い鎺炴嫹闁稿绉瑰娲川婵犲啰鍙嗛梺鍝勭墱閸撶喎顕ｉ弻銉ョ濞撴艾锕ョ�氬綊鏌ｉ姀鐘冲暈濞存嚎鍊濋弻鐔兼倻缁涘顥栭梺鐟板级閹稿啿鐣烽悢纰辨晢闁稿被鍊栬ⅷ婵犵绱曢崑鎴﹀磹閹达箑绀夌�癸拷閸曨剚娅囬梺闈涱檧婵″洭鍩炲鍛斀闁绘ê寮舵径鍕煕婵犲偆鐓奸柡宀嬬畱铻ｅ〒姘煎灡妤旈梻浣告啞钃遍柟顔煎�搁～蹇涙惞閸︻厾鐓撻梺鍏煎墯閸ㄤ即顢旈銏♀拺缂佸顑欓崕蹇涙煥閺囥劋閭柣娑卞枦缁犳稑鈽夊▎鎰仧闂備浇娉曢崳锕傚箯閿燂拷");
			fire.pb.talk.MessageMgr.sendMsgNotify(applierRoleId, 162027, null);
			return;
		}
		
		PropRole leaderprop = new PropRole(roleid, true);
		if(leaderprop.getProperties().getCruise() > 0) {
			TeamManager.logger.info("CRequestJoinTeam:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｉ亶鏌＄�ｎ偆娲撮柡灞剧洴瀵剙鈻庨幆褍澹庨梻浣告惈閼活垳绮旇ぐ鎺戣摕闁靛ě宥嗗闁挎繂楠告禍婊呯棯閻愵剙鈻曟慨濠冩そ瀹曨偊宕熼鐘插Ы缂傚倸鍊哥粔宕囩矆娓氾拷椤㈡岸鏁愭径妯绘櫌闂佸憡娲﹂崑鍕倵椤撶儐娓婚柕鍫濇椤ュ棙淇婇銏狀伃闁轰焦鎸剧划鐢碉拷锝庝簽娴犫晠姊虹�圭媭娼愰柛銊ユ健閵嗕礁顫濈捄鍝勮�垮┑鐐叉閸も晠濡舵径瀣ф嫼闂佽崵鍠愬妯衡枔閳哄懏鐓欓柛鎴欏�栫�氾拷" + roleid + "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄥ�垫鐐茬仢閸旀岸鏌ｅΔ锟藉Λ婵嗙暦閵忋倕鐏抽柟棰佺劍鐎靛矂姊洪棃娑氬闁稿﹦鎳撻埢宥夊籍閸喓鍘甸梺鍛婂灟閸婃牜锟芥熬鎷�?" + applierRoleId + "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｉ亶鏌＄�ｎ偆娲撮柡灞剧洴瀵剙鈻庨幆褍澹庨梻浣告惈閼活垳绮旇ぐ鎺戣摕闁靛ě宥嗗闁挎繂楠告禍婊呯棯閻愵剙鈻曟慨濠冩そ瀹曨偊宕熼鐘插Ы缂傚倸鍊哥粔宕囩矆娓氾拷椤㈡岸鏁愭径妯绘櫌闂佸憡娲﹂崑鍕倵椤撶儐娓婚柕鍫濇椤ュ棙淇婇銏狀伃闁轰焦鎸剧划鐢碉拷锝庝簽娴犫晠姊虹�圭媭娼愰柛銊ユ健閵嗕礁顫濈捄鍝勮�垮┑鐐叉閸ょ娀骞嬮敂瑙ｆ嫼闂佸憡绋戦敃銉╁煕閹扮増鐓熸俊銈呭暙閳诲牓鏌ｅ☉鍗炴珝鐎规洖銈告俊鐑藉Ψ鎼存ɑ娅婇柡灞炬礃瀵板嫰宕煎┑鍫滅棯闂備礁鎼崑濠囧箯閻戣姤鈷掗柛灞剧懄缁佺増銇勯銏╂Ц闁伙絽鍢茶灒閻炴稈鍓濋悘鍐ㄢ攽閻愭潙鐏熼柛銊ョ秺瀵即濡烽埡鍌氾拷鍫曟煟閹邦喚绀嬮柟鐑橆殔缂佲晛霉閻樺樊鍎愰柣鎾跺枑缁绘盯宕卞Δ鍐唹闂侀潻绲惧浠嬪箖濡わ拷椤繃娼忛妸銉︾暚婵＄偑鍊ゆ禍婊堝疮鐎涙ü绻嗛柛顐ｆ礀瀹告繃銇勯弽銊х煠闁哥偛鐖煎铏规嫚閹绘帩鍔夊┑顔角滈崝鎴濈暦濡わ拷铻ｉ柧蹇氼潐濞堟儳顪冮妶鍡欏⒈闁稿绋戦蹇撯攽鐎ｎ偄锟藉灚绻涢幋鐐垫噽闁绘帊绮欓弻娑樜熺紒妯虹３濠殿喖锕ㄥ▍锝夋晸閽樺璐″┑顔炬暬婵℃挳宕橀鍡欙紲闂佽法鍠曟慨銈囩箔閻斿吋鏅搁柦妯侯樈閸ゆ洟鏌熼幆鏉啃撻柛瀣閺屾稖绠涘顑挎睏闂佸憡锕㈡禍璺侯潖濞差亜绀冮柛娆忣槹閸庢捇姊虹粙娆惧剰婵☆偅顨婇崺銏ゅ箻閹颁胶鍙嗛梺鍓插亞閸犳捇宕㈤幖浣瑰�甸柣褍鎲＄�氬綊鏌ｆ惔顖滅У闁告挻鐟╁畷鍝勭暆閸曨剛鍙勬繛鏉戝悑閻熝呯矓椤曪拷閺岋紕浠﹂崜褎鍒涢梺鐐藉劵缁犳捇鐛�ｎ亖鏀介柛銉㈡櫃婢规洟姊婚崒娆戭槮闁硅绻濋弫鍐敃閿曪拷缁狀垶鏌ㄩ悤鍌涘??,濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫小闁告濞婂璇测槈濡攱鏂�闂佸憡娲﹂崑鍕叏閵忋倖鈷戞繛鑼额嚙楠炴鏌熼悷鐗堝枠鐎殿喖顭烽弫鎰緞婵犲嫷鍚呴梻浣瑰缁诲倸螞椤撶倣娑㈠礋椤撶姷锛濇繛鎾磋壘閿曘儳锟芥艾缍婂铏圭矙閹稿孩鎷辩紓浣割儐鐢�崇暦閿濆牏鐤�闁哄倸澧界粻姘舵⒑闂堟稓澧曢柟宄邦儔瀹曟洟骞囬悧鍫濓拷鍨叏濮楀棗澧扮紒澶屽劋閹便劍绻濋崨顕呬哗闂佸綊顥撴繛锟介柛銊╃畺閹煎綊顢曢妶鍕棜闂傚倸鍊风粈渚�骞栭锕�绠悗锝庡枛绾捐鈹戦悩鍙夋悙闁哄绶氶弻鐔煎礈瑜忕敮娑㈡倵閻㈤潧孝妞ゎ叀娉曢幑鍕瑹椤栨艾澹嶇紓浣鸿檸閸欏繘骞忛柨瀣瘈闁汇垽娼ф牎濡炪倖姊归悧鐘茬暦鐟欏嫮闄勭紒瀣硶閻撴垿姊洪崨濠傚闁告柨閰ｅ鎶芥晝閸屾稓鍘介梺闈涚箳婵敻宕悙鐑樼厱濠电姴瀚崢鎾煛瀹�瀣М妤犵偛顑夐幃婊堝幢濞嗗繐楔闂傚倷绀侀幉锟犳晝閵忥紕顩查悹杞扮秿濞戙垹宸濋柟纰卞幗閺呮繈姊洪棃娑氱畾闁告挻绻堥獮鍐ㄢ枎韫囷絾瀵岄梺闈涚墕濡鎮橀妷鈺傜厵闁惧浚鍊嬮鍫熷仼鐎瑰嫭澹嬮弨浠嬫倵閿濆骸浜濇繛鍛濮婃椽鎮烽幍顔芥喖闁汇埄鍨抽崑鐔哄垝鐠囧樊娼╅柤鍝ユ暩閸樹粙姊虹紒妯忣亜顕ｉ崼鏇炲偍闁稿瞼鍋為悡鏇㈡煛閸ャ儱濡煎ù婊嗘闇夌痪顓㈡敱鐎氾拷");
			fire.pb.talk.MessageMgr.sendMsgNotify(applierRoleId, 162026, null);
			return;
		}
		
		if (checkPvP(roleid, applierRoleId) != 0) {
			return;
		}

		BuffAgent leaderAgent = new BuffRoleImpl(roleid, true);
		if (leaderAgent.existBuff(PlayPKManage.BuffDuelID)) {
			MessageMgr.sendMsgNotify(applierRoleId, 141867,  null);
			return;
		}
		mkdb.Procedure requestJoinTeamP = new mkdb.Procedure()
		{
			@Override
			protected boolean process()
			{
				//lock start 
				Long teamId = xtable.Roleid2teamid.select(roleid);
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯顢曢敐鍡欙紩闂佽法鍠愰弸鑽ょ不閹惧磭鏆﹀┑鍌滎焾椤懘鏌嶉妷銉ユ毐缂併劊鍎靛缁樻媴缁涘缍堟繝銏㈡嚀濡瑩寮茬捄浣曟棃宕ㄩ鐙呯幢闂佽鍑界紞鍡涘窗濡ゅ懏鍋傛繛鍡樻尰閻撴洟鏌熼悙顒夋當闁瑰啿娴风划顓㈡晸閻樻枼鎷虹紓浣割儐椤戞瑩宕曢幇鐗堝珔閺夊牃鏅濈壕鑲╃磽娴ｈ鐒芥繛鎻掝嚟閿熷�燁潐濞叉牕鐣烽鍐航闂備焦鍎崇换姗�鏁撻懞銉р檨妞ゃ垺锕㈠缁樻媴缁涘娈柣搴㈢▓閺呮繈宕版繝鍌ゅ悑濠㈣泛顑呭▓鐐翠繆閵堝繒鍒伴柛鐕佸亯缁绘岸姊绘担鍛婅础闁稿簺鍊濆畷娲醇濠垫劗鍔烽梺鍐叉惈閹冲繘鎮￠悢鍏肩厵濞寸厧鐡ㄥ☉褍顭胯閸犳濡甸崟顔剧杸婵﹩鍓涢崢顐ょ磽娴ｈ櫣甯涚紒璇插�块、姘跺Ψ閳轰礁鍤戝銈嗗姦濠線骞忛悜钘壩у璺猴工閹偤鏌ｆ惔顖滅У闁哥姵顨婇崺娑㈠箳濡や胶鍘遍梺鍝勬储閸斿本绂嶅鍕╀簻闊浄绲芥禍浼存煛鐏炶濮傞柟顔哄灲閹粌螣閼姐倕娑ч梻鍌欐祰濡椼劑鎮為敃鍌氱畺闁稿本姘ㄩ弳锕傛煏韫囥儳绉垫俊顖氬椤啴濡堕崘銊т痪闁藉啳浜槐鎺楁惞鐟欏嫭鐝紓渚囧枟閻熲晛鐣疯ぐ鎺濇晩闁告牑鍓濈�氬綊鏌涢…鎴濇灀闁猴拷娴犲鐓冮柦妯侯槹椤ユ粓鏌ｈ箛銉хМ闁哄本绋掗幆鏃堝閻樺吀鎮ｇ紓鍌欑贰閸犳牠鈥﹂悜鐣屽祦婵☆垰鍚嬬�氭岸鏌ら懝鏉跨厫闁硅尙澧楃换婵嬫偨闂堟稐娌梺鎼炲妼閻栧ジ寮崘顔肩厸濞撴艾娲ㄩ崝鐑芥⒑閸愬弶鎯堥柟鍐茬箻閹繝寮撮姀锛勫幍闂佺粯鍔﹂崜锕�鈻撻弮鍫熺厵闁惧浚鍋勬慨宥夋煙椤旇宓嗗┑锛勫厴閸╋繝宕掑Δ浣割伖闂傚倷鑳堕崢褔锝為弴銏犵９闁哄洨鍠撴晶锟犳⒒閸屾瑧顦﹂柟娴嬶拷鎰佹綎鐟滅増甯囬敓钘夊暞缁绘繈宕掑鍕啎濠电偞娼欓崥瀣焽濞嗘垹涓嶅┑鐘崇閸嬶綁鏌涘┑鍡楊仾闁诡垰鐗撻弻锝堢疀閹垮嫯鍚┑顔硷龚濞咃綁骞戦崟顖毼╅柕澶涘瑜版岸姊绘担鐑樺殌闁搞倖鐗犻獮蹇涙晸閿燂拷?
				if(teamId != null)
					team = new Team(teamId,false);
				else
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啰绠婚柟宕囧仱閺屽棗顓奸崱妤佺暟闂備礁鐤囧銊╂嚄閸撲胶椹抽煫鍥ㄦ⒒缁★拷闂佹眹鍨藉褎鐗庨梻浣虹帛濡繘宕滃☉姘潟闁绘劕鎼崘锟介悷婊勭矒閹垽宕卞☉娆戝幘闂佸綊妫块悞锕�鈽夎閳规垿顢欓崗鐓庢灎闂佸搫鐭夌粻鎾崇暦濮楋拷椤㈡棃宕熼鍌欓偗闂傚倷绀侀幖顐︽儗婢跺瞼绀婂ù锝呭閸ゆ洘銇勯幒鎴濐仼缂佺姳鍗抽獮鏍庨锟介悘鈺呮煛鐎ｎ偄鐏存慨濠勭帛閹峰懘宕妷顖滅缂傚倷绶￠崳顕�宕规导杈剧稏闊洦姊荤弧锟藉┑顔斤供閸樿棄鈻嶉姀銈嗏拺闁兼亽鍎嶉鍩跺洭鏌嗗鍡椾患濡炪倖鎸堕崹娲偂閺囥垹绠规繛锝庡墮婵℃椽鏌熼懠顒�浜炬い銊ｅ劦閹瑧鎷犺缁跺绱撴担鍝勑ｇ紒瀣灴閸┿儲寰勬繝搴㈠兊濡炪倖甯幏椋庣磼閼碱剙浜惧ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍋呴弳婊堟煙閻戞ɑ顥栭柟宄板槻椤繈鎮℃惔锛勭潉闂備胶纭堕弲婊堟儎椤栫偟宓侀柟鐑樺殾閺冿拷閹峰懘宕崟顐ょ杽闂傚倸鍊峰ù鍥綖婢跺鐔嗘慨妤嬫嫹鐎规洏鍎甸弫鎾绘偩瀹�锟界壕濂告煏婵炲灝鍔撮柣鎾炽偢閺屸�崇暆鐎ｎ剛锛熼梺璺ㄥ枑閺嬭崵绱為崱妯碱洸闁绘劘娉涢敓钘夘嚟缁辨捇宕掑▎鎰偘婵＄偞娼欓幗婊堝极椤斿槈鏃堟晸娴犲锟斤箓宕堕鍡欐澑濠电偞鍨堕…鍥储閸涘﹦绠鹃弶鍫濆⒔缁夘噣鏌￠敓浠嬫焼瀹ュ懐顦伴梺鍛婂姦娴滅偟澹曟禒瀣厱閻忕偛澧介幊鍛亜閿斿ジ妾柕鍥у楠炲鎮欓懠顑跨礉婵°倗濮烽崑娑氭崲濮楋拷瀵偊骞樼紒妯绘闂佽法鍣﹂幏锟�?
					//psend(applierRoleId, new STeamError(TeamError.ObjectNotInTeam));
					//TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄥ�垫鐐茬仢閸旀碍绻涢弶鎴濓拷绋垮祫濡炪倖鏌ㄦ晶鐣屽閽樺褰掓晲閸ュ墎鍔稿銈忕稻婵炲﹪寮诲☉姘炬嫹閿濆啫濡奸柨鐔诲Г濞茬喖銆佸鑸垫櫜濠㈣泛锕崬鍫曟⒑閸濆嫭宸濋柛瀣ㄥ�濆畷顒傛崉娓氼垱瀵岄梺闈涚墕濡鎱ㄩ敂鐣岀瘈妞ゎ偒鍠楃�氬綊姊绘担鍛婂暈闁搞劌纾崚鎺戔枎閹惧磭鐣洪柣鐘烘〃鐠�锕�顭囬埡鍌樹簻闁规崘娉涘暩闂佹眹鍊曠�氼剟鍩為幋锔绘晩缁绢參鏀遍弫鎯р攽閿涘嫬浠掔紒顔界懇閹即顢氶敓浠嬬嵁閸ヮ剦鏁囬柣鏂垮槻婵℃娊姊绘担鐟邦嚋缂佽鍊垮畷鎰亹閹虹偟绋忛悗骞垮劚椤︿即鍩涢幒鎳ㄥ綊鏁愰崶鍓佸姼闂佽鍠楅崹鑸电┍婵犲洦鍊烽柛娆忣槸娴犳挳鎮楃憴鍕缂傚秴锕ら悾閿嬬附缁嬪灝宓嗗┑顔筋殔閻楀﹦锟芥氨鎳撻湁闁挎繂鎳庨ˉ蹇旂箾鐏忔牗娅呴摶鐐烘煟濡わ拷閻楀繒绮婚弽顓熺厸闁告粈妞掗柇顖涙叏婵犲懏顏犻柟鐟板婵℃悂濡烽敂鍙ョ敖濠电姷顣藉Σ鍛村磻閸曨叏鎷峰顐㈠祮闁靛棔绀侀～婵嬫嚋閸偅鐝冲┑鐘灱閸╂牞鎽梺鍝勬噷閸ㄨ棄顫忓ú顏勫窛濠电姴鍟ˇ鈺呮⒑閸涘﹥灏伴柣鈺婂灠閻ｅ嘲鈹戠�ｎ偒妫冨┑鐐村灦鐢寮敓浠嬫⒒娴ｈ櫣甯涢柛鏃�鐗曢…鍥р枎閹炬潙锟藉爼鏌ㄩ弮鍥撻柛娆忕箲娣囧﹪顢涘搴ｅ姼婵犳鍠栭崐褰掋�冮妷鈺傚�风�瑰壊鍠楁瓏闂備線娼уú锕傚礉濞嗘挾宓侀柟鐑橆殔缁犵粯銇勯弽銊р槈妞ゅ繐缍婂濠氬磼濮橆剨鎷烽幖浣哥９闁归棿鐒﹂崑瀣煕閹伴潧鏋涢柣銈夌畺閺岋綁骞囬鑺ユ瘎闂佹椿鍘煎Λ婵嬪箖濡ゅ懏鏅查幖绮瑰墲閻忓秹姊虹紒妯诲鞍婵炶尙鍠栧濠氭晸閻樿尙顦ㄩ梺鍦焾妤犳悂顢旈崼鏇熲拻濞达綀顫夐崑鐘绘煕閺冿拷閸ㄧ敻鈥﹂崶顏嶆Щ闂佷紮绲块弫璇茬暦閻旂⒈鏁嶆繛鎴炲笚鐎氬ジ姊绘担鍛婅础妞ゎ厼鐗忛敓鑺ョ▓閺呯姾妫㈤梺绯曞墲鐪夌紒璇叉閵囧嫰骞囬埡浣轰患濡炪倕娴氶崢浠嬪Φ閸曨垰顫呴柨娑樺閺嗏�斥攽閻愰潧甯剁紒缁橈耿瀹曟椽鏁嶉崟鑸靛闁挎繂楠告禍婊勩亜韫囨碍纭鹃摶鏍煟濮楋拷濞佳勭濠婂牊鐓熼煫鍥ㄦ⒒缁犵偟锟借娲樼换鍌烇綖濠靛鍤嬮梻鍫熷喕閹风兘宕归锝呭伎濠碘槅鍨抽崢褏鏁崼鏇熺厽闊洢鍎遍々顒勬煥閻斿嚖鎷烽悤浣圭秷濠电偞褰冪换妯虹暦鐟欏嫮顩烽悗锝庝簼閻庮剟姊洪悷鏉库挃缂侇噮鍨跺鏌ュ箹娴ｅ湱鍙嗛梺缁樻礀閸婂湱锟芥熬鎷�,roleid"+ roleid);
										
					fire.pb.talk.MessageMgr.psendMsgNotify(applierRoleId, 150035, null);					
					return true;
				}
				if(!team.isInTeam(roleid))
					return true;//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柟缁㈠枟閸庡顭块懜闈涘缂佺嫏鍥ㄧ厱闁哄秲鍊曟晶鏌ユ倵濮樻剚娼愬ǎ鍥э躬婵″爼宕熼鐐差瀴闂備礁鎲￠悷銉ф崲濮楋拷瀵鎮㈤搹鍦紲闂侀潧绻掓慨鐢告倶瀹ュ鈷戠紒瀣仢椤掋垺銇勯妸銉﹀殗濠碘剝鎸抽獮鎺楀箣椤撶喎鍏婇梻浣虹帛閸旓箓宕滃▎鎿冩晜闁割偅娲橀埛鎺懨归敐鍥╂憘闁搞倕鍟撮弻娑⑩�﹂幋婵堜桓闂佽鍠氶崑銈夊极閸愵喗鏅稿ù鐘差儛閺佸鏌曟径鍡樻珔缂侊拷鐎ｎ偁浜滈柟鎯ь嚟缁犳牠鏌涢弴鐐叉殻婵﹨娅ｉ幏鐘诲灳瀹曞浄鎷锋繝姘厱婵炴垵宕顕�鏌涘▎娆戠瘈婵﹤顭峰畷鎺戭潩椤掑﹥瀚瑰瀣椤愯姤鎱ㄥ鍡楀⒒闁绘帞鏅幉鎼佸籍閸ヮ煈妫ㄦ繝鐢靛仜椤曨厽鎱ㄩ幘顕呮晞闁糕剝绋戠壕濠氭煕瀹�锟介崑鐐烘偂閺囩喆浜滈柟鏉垮閹偐绱掗悩顔煎姦闁哄矉缍侀獮鎺戭吋閸モ晝鍘梻浣告惈鐞氼偊宕濋幋锕�绠栭柕蹇嬪�曟导鐘绘煕閺囩喎鐓�缂傚秳绶氬濠氭晲婢跺﹦顔掗柣鐘荤細閵嗭拷闁哄鎳樺娲传閸曨厾鍔圭紓鍌氱С缁舵岸鐛崘顔碱潊闁靛牆鎳庣粣娑欑節閻㈤潧孝閻庢凹鍓熷畷鐢稿箳閺冨倻锛濋梺绋挎湰閻熴劑宕楀畝鍕�垫慨姗嗗墰缁犺崵锟借娲滈崰鏍�侀弮鍫濆耿婵炲棙鍨跺В搴ㄦ⒒閸屾艾锟介绮堟笟锟介獮澶愭晸閻樺啿浠梺闈涱槴閺侊繝宕堕妸銉殼闂佸搫顦伴崹褰掓晬濞嗘挻鈷戠憸鐗堝笒娴滀即鏌涢敐搴＄仸妤犵偛绻戦ˇ鐗堟償閵忕姵鐎梻浣告啞濞诧箓宕滃☉銏℃櫖婵鎷锋慨濠呮缁瑩骞愭惔銏犻棷闂備浇妗ㄥù鍥敋瑜旈、姘舵晲婢舵ɑ鏅濋梺鎸庢穿閹烽绱掗敓浠嬪礃椤旂晫鍘撻梺鍛婄箓鐎氼剟鏁撻懞銉﹀�愭い銏℃崌楠炴绱掑Ο閿嬪闂備浇顕栭崹搴ㄥ川椤栵絽鏅ュ┑锛勫亼閸婃牕煤濮楋拷閹囨偐閼碱剚娈惧銈嗙墱閸嬫稓澹曟總鍛婄厽闁归偊鍠涜棢闂佸綊顥撶划顖滄崲濞戙垹绠婚悗鐢殿焾閺嗭繝姊洪崷顓炲幋闁猴拷鏉堚晜宕叉繛鎴欏灪閸ゅ矂鏌℃径濠勪虎闁诡垳鍋ゅ娲偡閺夋寧些缂傚倸绉撮敃顏堢嵁閸愵喖顫呴柕鍫濇娴滄鏌熼懝鐗堝涧缂傚秴妫楀嵄闁绘垼濮ら埛鎺懨归敐鍥у妺闁搞倧鎷烽梻浣割吔閺夊灝顫囧Δ鐘靛仜濡瑧鎹㈠┑瀣倞闁靛闄勯悵鍐测攽閻橆喖鐏辨繛澶嬬洴椤㈡牠宕卞缁樼�洪梺绯曞墲缁嬫帡鍩涢幋锔界厾闁诡厽甯掗崜顓熴亜韫囨挾鍚囬柛銉ｅ妿椤╃兘鎮楅敐搴濈盎闁诡垳鍋ゅ娲濞戞艾顣哄銈忕細閸楀啿鐣烽幇鏉垮瀭妞ゆ劦鍋呴鏃堟⒑缂佹ê濮岄悘蹇旂懄缁傛帡濮�閵堝棛鍘遍梺鍝勫枦閹烽锟界櫢鎷烽柟闂寸缁犳牗淇婇妶蹇斿濡炪値鍋呯换鍫ュ箖閳╁啯鍎熼柨婵嗗椤㈡﹢姊虹拠鍙夊攭妞ゎ偄顦叅闊洦绋戦崹鍌毭归悩宸剰闁哄绶氶弻鐔煎礈瑜忕敮娑㈡煛閸涱喗鍊愰柡灞诲姂閹倝宕掑☉姗嗕紦
				final long leaderRoleId = team.getTeamInfo().getTeamleaderid();
				Long[] roleids = new Long[2];
				if(leaderRoleId < applierRoleId)
				{
					roleids[0] = leaderRoleId;
					roleids[1] = applierRoleId;
				}
				else
				{
					roleids[0] = applierRoleId;
					roleids[1] = leaderRoleId;
				}
				this.lock(mkdb.Lockeys.get(xtable.Locks.ROLELOCK,(Object[])roleids));
				//lock end

				now = System.currentTimeMillis();
				
				if(!checkOnline(applierRoleId))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傤槰缂備緡鍠栭惌鍌炲春閵夛箑绶為柟閭﹀墻濞煎﹪姊洪悙钘夊姎闁告ɑ鐗犻幃鐣岀磼濡偐鐦堥梺姹囧灲濞佳囧煝閸喓绠惧ù锝呭暱濞村倿寮崟顖涚厱闁斥晛鍟伴埦渚�鏌涚�ｎ亜锟藉潡寮婚敓鐘茬倞闁靛鍎虫禒楣冩⒑缂佹ɑ灏柛搴ｆ暬瀵鏁撻悩鑼紲濠电偞鍨堕敃鈺呭吹鐎ｎ喗鈷戦悹鍥ｏ拷宕囦哗闂佺粯顨呭Λ婵嬪春閻愬搫绠ｉ柨鏇嫹闁诲繑濞婇弻褑绠涢敐鍛盎婵炲濮甸幐鍐差潖濞差亜浼犻柛鏇ㄥ墯閹烽亶姊洪悜鈺傛珦闁搞劏椴哥粚杈ㄧ節閸パ呯暰闂佽顔栭崰姘跺级閹间焦鈷戦柛婵嗗閿熻棄缍婇、鏍р枎閹邦剦鍤ら梺璺ㄥ櫐閹凤拷(illegal)
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傤槰缂備緡鍠栭惌鍌炲春閵夛箑绶為柟閭﹀墻濞煎﹪姊洪悙钘夊姎闁告ɑ鐗犻幃鐣岀磼濡偐鐦堥梺姹囧灲濞佳囧煝閸喓绠惧ù锝呭暱濞村倿寮崟顖涚厱闁斥晛鍟伴埦渚�鏌涚�ｎ亜锟藉潡寮婚敓鐘茬倞闁靛鍎虫禒楣冩⒑缂佹ɑ灏柛搴ｆ暬瀵鏁撻悩鑼紲濠电偞鍨堕敃鈺呭吹鐎ｎ喗鈷戦悹鍥ｏ拷宕囦哗闂佺粯顨呭Λ婵嬪春閻愬搫绠ｉ柨鏇嫹闁诲繑濞婇弻褑绠涢敐鍛盎婵炲濮甸幐鍐差潖濞差亜浼犻柛鏇ㄥ墯閹烽亶姊洪悜鈺傛珦闁搞劏椴哥粚杈ㄧ節閸パ呯暰闂佽顔栭崰姘跺级閹间焦鈷戦柛婵嗗閿熻棄缍婇、鏍р枎閹邦剦鍤ら梺璺ㄥ櫐閹凤拷,applierRoleId"+ applierRoleId);
				}
				else if(!checkApplierNotInTeam(applierRoleId))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傦紭闂佹悶鍔忓▍锝囧垝鐎ｎ喖绠抽柡鍐╂尰鐎氬綊鏌ㄥ┑鍡涱�楀褜鍠氶幉鎼佸级閹稿寒妫炲銈庝簻閸熷瓨淇婇崼鏇炲耿婵°倕鍟伴幊鍡涙⒑鐠囨彃顒㈤柛鎴濈秺瀹曪綁宕橀鍏兼К濠电偞鍨崹鍦不閾忣偂绻嗛柕鍫濆閸忓矂鏌涘锟芥禍璺侯潖閾忚鍠嗛柛鏇ㄥ墰閸戯繝姊洪崨濠勫暡闁圭兘顥撶槐鎾存媴闂堟稑顬堝銈庡幘閸忔ê顕ｆ繝姘櫖闁告洝鍩栫�氬綊鏌ㄥ┑鍡欏嚬缂併劋绮欓幊鏍冀椤愩倗锛濇繛杈剧导缁瑩宕ú顏呭仺妞ゆ牗渚楀▓鏃�銇勯鐐寸┛缂佺姵绋戦埥澶娢熼悡搴＄婵犵數鍋犻幓顏嗙礊娓氾拷瀵劑鏌嗗鍛槹闂佸憡鍔︽禍鐐靛娴犲鐓曢悘鐐插⒔閹冲懏銇勯敂濂告闁靛洤瀚伴獮瀣倷閼碱兛绱濇俊銈囧Х閸嬫稓鎹㈠锟藉顐﹀箻缂佹ɑ娅㈤梺璺ㄥ櫐閹凤拷?(illegal)
					fire.pb.talk.MessageMgr.sendMsgNotify(applierRoleId, 140855, null);
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傦紭闂佹悶鍔忓▍锝囧垝鐎ｎ喖绠抽柡鍐╂尰鐎氬綊鏌ㄥ┑鍡涱�楀褜鍠氶幉鎼佸级閹稿寒妫炲銈庝簻閸熷瓨淇婇崼鏇炲耿婵°倕鍟伴幊鍡涙⒑鐠囨彃顒㈤柛鎴濈秺瀹曪綁宕橀鍏兼К濠电偞鍨崹鍦不閾忣偂绻嗛柕鍫濆閸忓矂鏌涘锟芥禍璺侯潖閾忚鍠嗛柛鏇ㄥ墰閸戯繝姊洪崨濠勫暡闁圭兘顥撶槐鎾存媴闂堟稑顬堝銈庡幘閸忔ê顕ｆ繝姘櫖闁告洝鍩栫�氬綊鏌ㄥ┑鍡欏嚬缂併劋绮欓幊鏍冀椤愩倗锛濇繛杈剧导缁瑩宕ú顏呭仺妞ゆ牗渚楀▓鏃�銇勯鐐寸┛缂佺姵绋戦埥澶娢熼悡搴＄婵犵數鍋犻幓顏嗙礊娓氾拷瀵劑鏌嗗鍛槹闂佸憡鍔︽禍鐐靛娴犲鐓曢悘鐐插⒔閹冲懏銇勯敂濂告闁靛洤瀚伴獮瀣倷閼碱兛绱濇俊銈囧Х閸嬫稓鎹㈠锟藉顐﹀箻缂佹ɑ娅㈤梺璺ㄥ櫐閹凤拷?,applierRoleId"+ applierRoleId);
				}
				else if(!checkApplierStatusValid(applierRoleId))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傗敍缂備焦鐓＄粻鏍嵁閸℃稑绫嶉柛顐ｇ箘閸旀悂姊洪棃娑辨▓闁搞劌纾划鏃堫敊閹惧懏瀚归悷娆忓缁岃法绱掔紒妯肩疄妤犵偛鍟～婊堟晸娴犲绠犻柨鐔哄Т鍥撮梺绯曞墲椤ㄥ棝鎮鹃浣风箚闁绘劦浜滈敓濮愬�濆畷銏ｃ亹閹烘垹顦梺鐟扮摠缁诲嫰寮抽敂鑺ュ弿婵°倕顑嗙�氱懓顪冮妶鍐ㄧ仾婵☆偄鍟悾鐑芥偄绾拌鲸鏅濋梺鎸庣箓濞诧箓锝炲鍛＝闁稿本鑹鹃敓鑺ユ倐瀹曟劙骞栨担鍝ワ紮闂佺粯鍨兼慨銈夊磹閸ф鐓ラ柡鍥╁仜閿熻棄鐖奸弫鎾绘寠婢跺﹥娈婚悗瑙勬磸閸斿矂锝為姀銈呂ч柛娑卞枛閺嬬娀姊虹拠鈥虫灓闁哄拋鍋嗛崚鎺戔枎閹寸偛纾梺闈浤涢崟顓ㄦ嫹椤斿皷鏀介柣妯垮皺濡嫰鏌℃径濠傜殹闁归鍏樺鎾閻樼數鏋冮梻濠庡亜濞诧妇绮欓幋鐘差棜濠电姵纰嶉悡鍐煕濠靛棗顏柛锝嗘そ閺屾稒绻濋崒婊冪厽闂佸搫鐭夌紞渚�鐛崶顒佸亱闁割偆鍠栭弫顏勨攽閻愯尙鎽犵紒顔奸叄瀹曟垿骞橀懜闈涘簥濠电偞鍨崹褰掓煁閸ャ劎绡�闂傚牊绋戦鈺伱归悪锟介崳锝咁潖濞差亜浼犻柛鏇ㄥ幘閸斿湱绱撻崒姘毙＄紒鑸靛哺閻涱噣宕橀鑲╁幐闂佸憡渚楅崢楣冩偂閹寸偟绡�闁靛骏绲剧涵楣冩煥閺囨ê鍔﹂柟顔缴戦幆鏃堬綖椤撶姷鐣鹃梻浣虹帛閸旓附绂嶅鍫熸櫢闁兼亽鍎遍悘瀵革拷瑙勬礃濞茬喎顕ｆ繝姘ㄩ柕澹苯鏁规繝寰锋澘锟窖呭緤娴犲鐤い鎰╁�楅惌鍡涙煕閳╁啰鈾侀柣鎾寸懇閺岋綁骞嬮悘娲讳邯閹偞銈ｉ崘鈺冨幈濠殿喗锕╅崜锕傚磿韫囨柣浜滄い鎾墲绾爼鏌熼悷鏉款仾缂佹鍠栭、娑橆潩椤掞拷椤ュ牓姊婚崒娆戭槮缂傚秴锕ら…鍥ㄧ節濮橆剛顔嗛梺缁樺灱婵倝鍩涢幒妤佺厱閻忕偛澧介幊鍡涙煕韫囨挾鐏辩紒杈ㄥ浮椤㈡岸宕ㄩ鐘卞摋婵＄偑鍊ら崑鍕崲閹寸姵宕叉繝闈涙－濞尖晜銇勯幒鎴濅喊缂佽京鏁诲缁樼瑹閿熻棄顭囪閹囧幢濞存澘娲︾�靛ジ寮堕幋鐙呯幢闂備礁鍟块幖顐﹀箠韫囨稑鐓曢柟瀵稿亼娴滄粓鏌熼搹鐟颁沪閻庢艾婀辩槐鎾存媴閸撳弶楔闂佽桨绀侀…鐑界嵁閸愵喗鏅搁柣妯哄暱娴滄粓姊婚崒锔藉闂佸綊鍋婇崰姘舵偩閻愵兛绻嗛柣鎰典簻閿熻姤鐗犻幃褍螖閿熶粙锝炲┑瀣╅柨鏃傝檸濞村嫰姊洪棃娑氱疄闁稿﹥鐗犻幃锟犳偄閸忚偐鍘甸梺鍓茬厛閸犳牠顢旈鍫熷�垫慨妯煎亾鐎氾拷?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柟闂寸绾惧鏌ｉ幇顒佹儓缂佺姵婢橀埞鎴︽偐瀹曞浂鏆￠梺鎼炲�曢懟顖濈亙闂佹寧绻傞幊搴ㄥ汲閻愮儤鐓涢柛娑卞枤缁犵偤鏌＄仦璇插鐎殿喗鎸抽幃娆戞嫚瑜庣�氬綊鏌涘┑鍕姕闁哥姴妫濋弻銊╁籍閸屾矮澹曢梺鍝ュУ閸旀瑩寮婚敐鍛傛棃鏁撴禒瀣亱闁糕剝鐟х粻鏃�鎱ㄥΟ鍨厫闁绘挾鍠栭弻鐔煎箚瑜嶉懜褰掓煕閺冿拷缁海妲愰幒鏃傜＜婵☆垰鍚嬮崚娑樜旈悩闈涗粶妞ゆ垵顦甸獮鍐煥閸繂鑰垮┑鐐叉缁绘劖顨欐繝鐢靛Х閺佸憡鎱ㄩ銏犵闁告劦鐓堥崥瀣熆鐠轰警鍎涢柨鐔绘缁夌懓顫忓ú顏咁棃婵炴垶鐟﹂幃娆撴煟鎼淬垺鐨戝褎顨嗙粚杈ㄧ節閸ャ劌锟借崵绱掑☉姗嗗剱闁哄拋鍓欓埞鎴︽偐鐠囇冧紣闁诲孩鍑归崜姘辩矉閹烘洏浜归柟鐑樻尨閹风粯绻涙潏鍓ф偧闁烩剝妫冨畷鐢稿礃椤旂晫鍘遍梺缁樕戦崜姘枔閺冿拷閵囧嫰顢橀悙鍏歌檸濡炪値鍋呯划鎾诲极閹惧顩烽悗锝庝簽閻ｆ椽姊虹拠鈥崇�婚柨鐔剁矙瀵劍绂掔�ｎ偆鍘卞銈嗗姦閸嬪嫭鏅堕鐐村�垫慨姗嗗墰缁夋椽鏌＄仦璇插闁宠鍨垮畷鍗炩槈閹插瀚规俊銈忔嫹妞ゎ叀鍎婚ˇ鏉戭熆瑜庨〃濠冧繆閻㈢绀嬫い鏍ㄧ♁濞呭棝鏌ｉ悩鍙夋悙鐎殿喖鐖奸幃闈涒攽鐎ｎ偀鎷洪梺鍛婄箓鐎氼噣鎮炵捄銊х＝鐎广儱瀚粣鏃�顨ラ悙鎻掓殻闁糕晪绻濆畷銊╊敋閸涱噮妫冨┑鐘垫暩閸嬬偤宕归崼鏇熸櫔婵＄偑鍊ら崜娆徫涘┑鍡╂綎缂備焦蓱婵挳鎮峰▎蹇擃仼濞寸姭鏅犲娲川婵犲啰鍙嗛梻浣稿簻缁蹭粙顢氶敐澶樻晝闁靛牆妫楅悵浼存倵閻熸澘顥忛柛鐘崇墪閳绘捇濡搁埡鍌楁嫼闂佸憡绻傜�氼垶锝為敃鍌涚厱閹兼番鍔嬮幉楣冩煥濠靛牆浠辩�规洏鍔庨敓鑺ョ♁椤洭宕㈤鍫熲拺闁告挻褰冩禍婵堢磼鐠囨彃鏆ｉ挊鐔兼煟閹邦剦鍤熺紒鐘荤畺閺屾稑鈽夐崡鐐寸亾婵犫拃鍛毈闁哄备锟藉磭鏆嗛悗锝庡墰琚ｇ紓鍌欒兌婵敻鎯勯姘煎殨闁圭虎鍠楅崐鐑芥煟濡わ拷閻楀棝鎮￠弴銏♀拻闁稿本鐟ㄩ崗灞俱亜椤撶偟澧︽い銏＄墵瀹曞崬鈽夊Ο纰卞敼闂備焦鎮堕崕婊堝川椤旂瓔鍟庡┑锛勫亼閸婃牠鎮уΔ鍛闁荤喖鍋婇悞浠嬫煏婵炵偓娅嗛柣鎾卞劦閺岋綁寮崹顕呮殺闂佹椿鍘介悷褔鏁撻懞銉晱闁哥姵鐗犻垾锕傛倻閽樺鐣洪梺闈涚箞閸婃洜绮堥崒鐐寸厽闁规崘娅曢幑锝嗕繆缂併垹鏋涢柍瑙勫灴閹晠顢欓懖鈺�绱橀梻浣虹《閺呮粓鎮ч悩璇茬伋闁挎洖鍊搁悙濠冦亜閹虹偞瀚归梺娲诲幗椤ㄥ棝骞堥妸銉庣喐寰勭粙鎸庡創缂備胶鍋撳畷妯何涢崟顖涚畳闂備焦瀵х换鍌滐拷姘煎櫍閹苯鈻庨幘瀵稿幈濠电娀娼ч敃銉╊敂閻樼數纾奸弶鍫涘妼缁椦囨煙妞嬪骸鈻堥柟宕囧█椤㈡鏁撴禒瀣劵闁汇垹鎲￠埛鎴犵磽娴ｅ鑲╂闁秵鐓曢柣妯诲墯濞堟粍顨ラ悙鍙夘棦鐎殿噮鍣ｅ畷鐓庮熆椤忎焦娅婇柡灞炬礃瀵板嫭绻濋崘顏呭墤闂備焦鎮堕崕顖炲礉鎼淬劌鐭楅柛鈩冪♁閳锋垹绱撴担鑲℃垹绮堥敓浠嬫⒑缁嬪尅宸ユ繝锟介柆宥嗘櫢闁兼亽鍎抽崯鏌ユ煙閸戙倖瀚�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柟闂寸绾惧鏌ｅΟ娆惧殭缂佺姴鐏氶妵鍕疀閹炬惌妫ょ紓渚婃嫹濠电姴娲﹂悡銉╂煟閺冨浂鍤欑悮姘辩磽娴ｈ櫣甯涢柣鈺婂灠閻ｇ兘顢旈崼婵堫槰濡炪倕绻愰弻濠傤煥閸忕偓妫冮幃鈺呮濞戞鍕冮梻浣虹帛椤ㄥ棝銆冮崼銏㈢＝闁规儳顕々鐑芥倵閿濆簼绨荤紒鎰♁缁绘繈鎮介棃娴躲垽鎮楀鐓庡妞ゆ洩缍侀獮搴ㄦ嚍閵夈垺瀚藉┑鐐舵彧缂嶏拷濠殿喓鍊楀☉鐢稿醇閺囩喓鍘遍梺鎸庣箓缁绘帡鎮鹃崹顐闁绘劘灏欑粻濠氭煛娴ｈ宕岄柡浣规崌閺佹捇鏁撻敓锟�?
					psend(applierRoleId, new STeamError(TeamError.SelfInUnteamState));
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傗敍缂備焦鐓＄粻鏍嵁閸℃稑绫嶉柛顐ｇ箘閸旀悂姊洪棃娑辨▓闁搞劌纾划鏃堫敊閹惧懏瀚归悷娆忓缁岃法绱掔紒妯肩疄妤犵偛鍟～婊堟晸娴犲绠犻柨鐔哄Т鍥撮梺绯曞墲椤ㄥ棝鎮鹃浣风箚闁绘劦浜滈敓濮愬�濆畷銏ｃ亹閹烘垹顦梺鐟扮摠缁诲嫰寮抽敂鑺ュ弿婵°倕顑嗙�氱懓顪冮妶鍐ㄧ仾婵☆偄鍟悾鐑芥偄绾拌鲸鏅濋梺鎸庣箓濞诧箓锝炲鍛＝闁稿本鑹鹃敓鑺ユ倐瀹曟劙骞栨担鍝ワ紮闂佺粯鍨兼慨銈夊磹閸ф鐓ラ柡鍥╁仜閿熻棄鐖奸弫鎾绘寠婢跺﹥娈婚悗瑙勬磸閸斿矂锝為姀銈呂ч柛娑卞枛閺嬬娀姊虹拠鈥虫灓闁哄拋鍋嗛崚鎺戔枎閹寸偛纾梺闈浤涢崟顓ㄦ嫹椤斿皷鏀介柣妯垮皺濡嫰鏌℃径濠傜殹闁归鍏樺鎾閻樼數鏋冮梻濠庡亜濞诧妇绮欓幋鐘差棜濠电姵纰嶉悡鍐煕濠靛棗顏柛锝嗘そ閺屾稒绻濋崒婊冪厽闂佸搫鐭夌紞渚�鐛崶顒佸亱闁割偆鍠栭弫顏勨攽閻愯尙鎽犵紒顔奸叄瀹曟垿骞橀懜闈涘簥濠电偞鍨崹褰掓煁閸ャ劎绡�闂傚牊绋戦鈺伱归悪锟介崳锝咁潖濞差亜浼犻柛鏇ㄥ幘閸斿湱绱撻崒姘毙＄紒鑸靛哺閻涱噣宕橀鑲╁幐闂佸憡渚楅崢楣冩偂閹寸偟绡�闁靛骏绲剧涵楣冩煥閺囨ê鍔﹂柟顔缴戦幆鏃堬綖椤撶姷鐣鹃梻浣虹帛閸旓附绂嶅鍫熸櫢闁兼亽鍎遍悘瀵革拷瑙勬礃濞茬喎顕ｆ繝姘ㄩ柕澹苯鏁规繝寰锋澘锟窖呭緤娴犲鐤い鎰╁�楅惌鍡涙煕閳╁啰鈾侀柣鎾寸懇閺岋綁骞嬮悘娲讳邯閹偞銈ｉ崘鈺冨幈濠殿喗锕╅崜锕傚磿韫囨柣浜滄い鎾墲绾爼鏌熼悷鏉款仾缂佹鍠栭、娑橆潩椤掞拷椤ュ牓姊婚崒娆戭槮缂傚秴锕ら…鍥ㄧ節濮橆剛顔嗛梺缁樺灱婵倝鍩涢幒妤佺厱閻忕偛澧介幊鍡涙煕韫囨挾鐏辩紒杈ㄥ浮椤㈡岸宕ㄩ鐘卞摋婵＄偑鍊ら崑鍕崲閹寸姵宕叉繝闈涙－濞尖晜銇勯幒鎴濅喊缂佽京鏁诲缁樼瑹閿熻棄顭囪閹囧幢濞存澘娲︾�靛ジ寮堕幋鐙呯幢闂備礁鍟块幖顐﹀箠韫囨稑鐓曢柟瀵稿亼娴滄粓鏌熼搹鐟颁沪閻庢艾婀辩槐鎾存媴閸撳弶楔闂佽桨绀侀…鐑界嵁閸愵喗鏅搁柣妯哄暱娴滄粓姊婚崒锔藉闂佸綊鍋婇崰姘舵偩閻愵兛绻嗛柣鎰典簻閿熻姤鐗犻幃褍螖閿熶粙锝炲┑瀣╅柨鏃傝檸濞村嫰姊洪棃娑氱疄闁稿﹥鐗犻幃锟犳偄閸忚偐鍘甸梺鍓茬厛閸犳牠顢旈鍫熷�垫慨妯煎亾鐎氾拷?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柟闂寸绾惧鏌ｉ幇顒佹儓缂佺姵婢橀埞鎴︽偐瀹曞浂鏆￠梺鎼炲�曢懟顖濈亙闂佹寧绻傞幊搴ㄥ汲閻愮儤鐓涢柛娑卞枤缁犵偤鏌＄仦璇插鐎殿喗鎸抽幃娆戞嫚瑜庣�氬綊鏌涘┑鍕姕闁哥姴妫濋弻銊╁籍閸屾矮澹曢梺鍝ュУ閸旀瑩寮婚敐鍛傛棃鏁撴禒瀣亱闁糕剝鐟х粻鏃�鎱ㄥΟ鍨厫闁绘挾鍠栭弻鐔煎箚瑜嶉懜褰掓煕閺冿拷缁海妲愰幒鏃傜＜婵☆垰鍚嬮崚娑樜旈悩闈涗粶妞ゆ垵顦甸獮鍐煥閸繂鑰垮┑鐐叉缁绘劖顨欐繝鐢靛Х閺佸憡鎱ㄩ銏犵闁告劦鐓堥崥瀣熆鐠轰警鍎涢柨鐔绘缁夌懓顫忓ú顏咁棃婵炴垶鐟﹂幃娆撴煟鎼淬垺鐨戝褎顨嗙粚杈ㄧ節閸ャ劌锟借崵绱掑☉姗嗗剱闁哄拋鍓欓埞鎴︽偐鐠囇冧紣闁诲孩鍑归崜姘辩矉閹烘洏浜归柟鐑樻尨閹风粯绻涙潏鍓ф偧闁烩剝妫冨畷鐢稿礃椤旂晫鍘遍梺缁樕戦崜姘枔閺冿拷閵囧嫰顢橀悙鍏歌檸濡炪値鍋呯划鎾诲极閹惧顩烽悗锝庝簽閻ｆ椽姊虹拠鈥崇�婚柨鐔剁矙瀵劍绂掔�ｎ偆鍘卞銈嗗姦閸嬪嫭鏅堕鐐村�垫慨姗嗗墰缁夋椽鏌＄仦璇插闁宠鍨垮畷鍗炩槈閹插瀚规俊銈忔嫹妞ゎ叀鍎婚ˇ鏉戭熆瑜庨〃濠冧繆閻㈢绀嬫い鏍ㄧ♁濞呭棝鏌ｉ悩鍙夋悙鐎殿喖鐖奸幃闈涒攽鐎ｎ偀鎷洪梺鍛婄箓鐎氼噣鎮炵捄銊х＝鐎广儱瀚粣鏃�顨ラ悙鎻掓殻闁糕晪绻濆畷銊╊敋閸涱噮妫冨┑鐘垫暩閸嬬偤宕归崼鏇熸櫔婵＄偑鍊ら崜娆徫涘┑鍡╂綎缂備焦蓱婵挳鎮峰▎蹇擃仼濞寸姭鏅犲娲川婵犲啰鍙嗛梻浣稿簻缁蹭粙顢氶敐澶樻晝闁靛牆妫楅悵浼存倵閻熸澘顥忛柛鐘崇墪閳绘捇濡搁埡鍌楁嫼闂佸憡绻傜�氼垶锝為敃鍌涚厱閹兼番鍔嬮幉楣冩煥濠靛牆浠辩�规洏鍔庨敓鑺ョ♁椤洭宕㈤鍫熲拺闁告挻褰冩禍婵堢磼鐠囨彃鏆ｉ挊鐔兼煟閹邦剦鍤熺紒鐘荤畺閺屾稑鈽夐崡鐐寸亾婵犫拃鍛毈闁哄备锟藉磭鏆嗛悗锝庡墰琚ｇ紓鍌欒兌婵敻鎯勯姘煎殨闁圭虎鍠楅崐鐑芥煟濡わ拷閻楀棝鎮￠弴銏♀拻闁稿本鐟ㄩ崗灞俱亜椤撶偟澧︽い銏＄墵瀹曞崬鈽夊Ο纰卞敼闂備焦鎮堕崕婊堝川椤旂瓔鍟庡┑锛勫亼閸婃牠鎮уΔ鍛闁荤喖鍋婇悞浠嬫煏婵炵偓娅嗛柣鎾卞劦閺岋綁寮崹顕呮殺闂佹椿鍘介悷褔鏁撻懞銉晱闁哥姵鐗犻垾锕傛倻閽樺鐣洪梺闈涚箞閸婃洜绮堥崒鐐寸厽闁规崘娅曢幑锝嗕繆缂併垹鏋涢柍瑙勫灴閹晠顢欓懖鈺�绱橀梻浣虹《閺呮粓鎮ч悩璇茬伋闁挎洖鍊搁悙濠冦亜閹虹偞瀚归梺娲诲幗椤ㄥ棝骞堥妸銉庣喐寰勭粙鎸庡創缂備胶鍋撳畷妯何涢崟顖涚畳闂備焦瀵х换鍌滐拷姘煎櫍閹苯鈻庨幘瀵稿幈濠电娀娼ч敃銉╊敂閻樼數纾奸弶鍫涘妼缁椦囨煙妞嬪骸鈻堥柟宕囧█椤㈡鏁撴禒瀣劵闁汇垹鎲￠埛鎴犵磽娴ｅ鑲╂闁秵鐓曢柣妯诲墯濞堟粍顨ラ悙鍙夘棦鐎殿噮鍣ｅ畷鐓庮熆椤忎焦娅婇柡灞炬礃瀵板嫭绻濋崘顏呭墤闂備焦鎮堕崕顖炲礉鎼淬劌鐭楅柛鈩冪♁閳锋垹绱撴担鑲℃垹绮堥敓浠嬫⒑缁嬪尅宸ユ繝锟介柆宥嗘櫢闁兼亽鍎抽崯鏌ユ煙閸戙倖瀚�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柟闂寸绾惧鏌ｅΟ娆惧殭缂佺姴鐏氶妵鍕疀閹炬惌妫ょ紓渚婃嫹濠电姴娲﹂悡銉╂煟閺冨浂鍤欑悮姘辩磽娴ｈ櫣甯涢柣鈺婂灠閻ｇ兘顢旈崼婵堫槰濡炪倕绻愰弻濠傤煥閸忕偓妫冮幃鈺呮濞戞鍕冮梻浣虹帛椤ㄥ棝銆冮崼銏㈢＝闁规儳顕々鐑芥倵閿濆簼绨荤紒鎰♁缁绘繈鎮介棃娴躲垽鎮楀鐓庡妞ゆ洩缍侀獮搴ㄦ嚍閵夈垺瀚藉┑鐐舵彧缂嶏拷濠殿喓鍊楀☉鐢稿醇閺囩喓鍘遍梺鎸庣箓缁绘帡鎮鹃崹顐闁绘劘灏欑粻濠氭煛娴ｈ宕岄柡浣规崌閺佹捇鏁撻敓锟�?,applierRoleId"+ applierRoleId);
				}
				else if(!checkLeaderTeamFuncEnable(leaderRoleId))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫熺矒閺岋紕浠﹂棃鈺傚闁归绀侀幃鎴︽煙閼测晞藟闁跨喕妫勭壕顓㈩敊閹邦厾绡�婵炲牆鐏濋弸锔姐亜椤愩埄妯�闁诡噯绻濋崹楣冨箛娴ｅ憡顓块梻浣稿閸嬪懎煤閺嶎厽鐓侀柛銉ｅ妽閸欏繑鎱ㄥΔ锟藉Λ妤呯嵁濡ゅ懏鐓熸繝闈涙川婢ц京绱掓潏銊ユ诞闁诡喗鐟╅、妤呮晸娴犲绀夐柕鍫濐槹閻撳繘鏌涢銈呮瀾闁稿﹥鍔楅敓鑺ヮ問閸犳盯顢氳閸┿儲寰勯幇顒夋綂闂佺粯蓱瑜板啰绮婇锟藉缁樼瑹閿熻棄顭囪閳ワ箓宕奸妷銉э紵闂佹儳娴氶崑鍡涖�呴柨瀣ㄤ簻闁规儳宕悘顏堟煕鐎ｎ剙校闁逛究鍔岄～婊堝幢濡わ拷缁犺崵绱撴担鍝勑ラ柛瀣ㄥ�濆濠氭偄绾拌鲸鏅╃紓浣圭☉椤戝棝鎮炬總鍛娾拺闁告縿鍎卞瓭闂佹寧娲忛崕閬嶎敋閵夆晛绀嬫い鎾卞妽鐎氬綊鏌ㄥ┑鍡欏嚬闁瑰弶鍎抽湁缁绢參鏀辩�氾拷?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯顢曢敐鍡欙紩闂佽法鍠愰弸鑽ょ不閹惧磭鏆﹀┑鍌滎焾椤懘鏌嶉妷銉ユ毐缂併劊鍎茬换婵嗩嚗闁垮绶查柨鐔虹崵閸パ咁唵闂佺粯鍨兼慨銈夋偂閸愵喗鍋ｉ柛銉簻閻ㄦ椽寮崼銉﹀�垫繛鍫濈仢閺嬬喖鏌熼崨濠傗枙妤犵偛鍟…銊╁醇濠靛牆锟界偛顪冮妶鍛閻庢稈鏅濋敓鑺ヨ壘缂嶅﹪寮婚悢铏圭煓閻犳亽鍔嶅Σ锟藉┑鐐茬摠缁秶鍒掗幘璇茶摕闁绘梻鍘х粻姘辨喐瀹ュ鍤嬬憸鐗堝笚閻撶喖鐓崶褝鏀绘繛鍛川缁辨帗娼忛妸銉﹁癁闂佽鍠掗弲鐘汇�佸▎鎾村亗閹肩补瀵弴銏♀拻濞达絽鎲￠幆鍫ユ煟椤掞拷閵堢鐣锋导鏉戝唨妞ゆ挾濮寸粊锕傛⒑缁洖澧查柛鎴犳嚀鍗卞Δ锝呭暞閳锋垿鏌熺粙鎸庢崳闁宠棄顦辩槐鎺撳緞婵犲嫬鐓熼梺璇″灲閹峰嘲顪冮妶鍛闁绘妫涚划缁樼節濮橆厾鍘卞┑鐐村灥瀹曨剟寮稿☉娆嶄簻闊洢鍎茬�氾拷
					//psend(applierRoleId, new STeamError(TeamError.ObjectTeamFunctionClose));
					fire.pb.talk.MessageMgr.psendMsgNotify(applierRoleId, 141201, null);
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫熺矒閺岋紕浠﹂棃鈺傚闁归绀侀幃鎴︽煙閼测晞藟闁跨喕妫勭壕顓㈩敊閹邦厾绡�婵炲牆鐏濋弸锔姐亜椤愩埄妯�闁诡噯绻濋崹楣冨箛娴ｅ憡顓块梻浣稿閸嬪懎煤閺嶎厽鐓侀柛銉ｅ妽閸欏繑鎱ㄥΔ锟藉Λ妤呯嵁濡ゅ懏鐓熸繝闈涙川婢ц京绱掓潏銊ユ诞闁诡喗鐟╅、妤呮晸娴犲绀夐柕鍫濐槹閻撳繘鏌涢銈呮瀾闁稿﹥鍔楅敓鑺ヮ問閸犳盯顢氳閸┿儲寰勯幇顒夋綂闂佺粯蓱瑜板啰绮婇锟藉缁樼瑹閿熻棄顭囪閳ワ箓宕奸妷銉э紵闂佹儳娴氶崑鍡涖�呴柨瀣ㄤ簻闁规儳宕悘顏堟煕鐎ｎ剙校闁逛究鍔岄～婊堝幢濡わ拷缁犺崵绱撴担鍝勑ラ柛瀣ㄥ�濆濠氭偄绾拌鲸鏅╃紓浣圭☉椤戝棝鎮炬總鍛娾拺闁告縿鍎卞瓭闂佹寧娲忛崕閬嶎敋閵夆晛绀嬫い鎾卞妽鐎氬綊鏌ㄥ┑鍡欏嚬闁瑰弶鍎抽湁缁绢參鏀辩�氾拷?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯顢曢敐鍡欙紩闂佽法鍠愰弸鑽ょ不閹惧磭鏆﹀┑鍌滎焾椤懘鏌嶉妷銉ユ毐缂併劊鍎茬换婵嗩嚗闁垮绶查柨鐔虹崵閸パ咁唵闂佺粯鍨兼慨銈夋偂閸愵喗鍋ｉ柛銉簻閻ㄦ椽寮崼銉﹀�垫繛鍫濈仢閺嬬喖鏌熼崨濠傗枙妤犵偛鍟…銊╁醇濠靛牆锟界偛顪冮妶鍛閻庢稈鏅濋敓鑺ヨ壘缂嶅﹪寮婚悢铏圭煓閻犳亽鍔嶅Σ锟藉┑鐐茬摠缁秶鍒掗幘璇茶摕闁绘梻鍘х粻姘辨喐瀹ュ鍤嬬憸鐗堝笚閻撶喖鐓崶褝鏀绘繛鍛川缁辨帗娼忛妸銉﹁癁闂佽鍠掗弲鐘汇�佸▎鎾村亗閹肩补瀵弴銏♀拻濞达絽鎲￠幆鍫ユ煟椤掞拷閵堢鐣锋导鏉戝唨妞ゆ挾濮寸粊锕傛⒑缁洖澧查柛鎴犳嚀鍗卞Δ锝呭暞閳锋垿鏌熺粙鎸庢崳闁宠棄顦辩槐鎺撳緞婵犲嫬鐓熼梺璇″灲閹峰嘲顪冮妶鍛闁绘妫涚划缁樼節濮橆厾鍘卞┑鐐村灥瀹曨剟寮稿☉娆嶄簻闊洢鍎茬�氾拷,leaderRoleId"+ leaderRoleId);
				}
				else if(!checkTeamNotFull(team))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｅ崬顭胯椤兘寮诲☉銏犖ч柛銉戝嫮锟介箖姊洪棃娑欐悙閻庢矮鍗冲畷娲晸閻樿尙锛滃┑鐘诧工閸燁偆绱掗埡鍛拻濞达絽鎲￠幆鍫ユ煟椤撶儐妲虹紒杈╁仦缁楃喖鏁撴禒瀣仒妞ゆ梹鎷濋幏鐑芥晲鎼粹剝鐏嶉梺绋匡功閸忔﹢寮诲☉銏犵労闁稿繒濯禍顏堝箖濮楋拷婵＄兘鍩￠崒婊冨笚缂傚倸鍊烽悞锕佹懌閻庤娲栭惉濂告晸閸婄噥娼愭繛鍙夘焽閸掓帒顓奸崶鈺冪暥闂佺粯鏌ㄩ幗婊呭姬閿熶粙姊洪崨濠傚Е闁绘挸鐗婄�靛ジ骞樼紒妯锋嫽婵炴挻鐔幏閿嬬箾閼规澘鍚归柨鐔剁矙濞佳囨儗閸屾氨鏆﹂柨婵嗘閸庣喖鏌曟繝蹇曠暠闁跨喕妫勫锟犲蓟濞戙垹绠绘俊銈忔嫹缂佸鏁搁敓鑺ヤ亢椤鎹㈠☉銏犻唶婵犻潧鐗呴搹搴ㄦ⒑閸濆嫷鍎滈梻鍕閹广垹鈽夊▎蹇曠獮闁诲函缍嗛崜姘跺礆濞戞﹩娓婚柕鍫濆暙閻忣亞锟界櫢鎷烽柟闂寸閺嬩線鏌熼柇锕�骞栫紒鍓佸仱閹鏁愭惔鈥茬凹濡炪倕绻掗崰鏍ь潖缂佹ɑ濯撮柤鎭掑劤閵嗗﹪姊洪棃鈺冪Ф缂佺姵鎹囬悰顔跨疀濞戞瑦娅㈤梺璺ㄥ櫐閹凤拷
					fire.pb.talk.MessageMgr.sendMsgNotify(applierRoleId, 145045, 0, null);
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｅ崬顭胯椤兘寮诲☉銏犖ч柛銉戝嫮锟介箖姊洪棃娑欐悙閻庢矮鍗冲畷娲晸閻樿尙锛滃┑鐘诧工閸燁偆绱掗埡鍛拻濞达絽鎲￠幆鍫ユ煟椤撶儐妲虹紒杈╁仦缁楃喖鏁撴禒瀣仒妞ゆ梹鎷濋幏鐑芥晲鎼粹剝鐏嶉梺绋匡功閸忔﹢寮诲☉銏犵労闁稿繒濯禍顏堝箖濮楋拷婵＄兘鍩￠崒婊冨笚缂傚倸鍊烽悞锕佹懌閻庤娲栭惉濂告晸閸婄噥娼愭繛鍙夘焽閸掓帒顓奸崶鈺冪暥闂佺粯鏌ㄩ幗婊呭姬閿熶粙姊洪崨濠傚Е闁绘挸鐗婄�靛ジ骞樼紒妯锋嫽婵炴挻鐔幏閿嬬箾閼规澘鍚归柨鐔剁矙濞佳囨儗閸屾氨鏆﹂柨婵嗘閸庣喖鏌曟繝蹇曠暠闁跨喕妫勫锟犲蓟濞戙垹绠绘俊銈忔嫹缂佸鏁搁敓鑺ヤ亢椤鎹㈠☉銏犻唶婵犻潧鐗呴搹搴ㄦ⒑閸濆嫷鍎滈梻鍕閹广垹鈽夊▎蹇曠獮闁诲函缍嗛崜姘跺礆濞戞﹩娓婚柕鍫濆暙閻忣亞锟界櫢鎷烽柟闂寸閺嬩線鏌熼柇锕�骞栫紒鍓佸仱閹鏁愭惔鈥茬凹濡炪倕绻掗崰鏍ь潖缂佹ɑ濯撮柤鎭掑劤閵嗗﹪姊洪棃鈺冪Ф缂佺姵鎹囬悰顔跨疀濞戞瑦娅㈤梺璺ㄥ櫐閹凤拷,teamId"+ teamId);
				}
				else if(!checkTeamFilter(team,applierRoleId))
				{
					TeamManager.logger.debug("FAIL:TeamFilter闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌涢幇顖氱处缂併劎绮穱濠囨倷椤忓嫸鎷烽弽顐ｆ殰闁圭儤顨呯壕鍦磽娴ｈ鐒介柍缁樻⒒閿熻棄绠嶉崕閬嵥囨导瀛樺亗婵炲棙鎸哥痪褔鏌涢锝囩畵闁抽攱妫冮弻锝夋晲閸粌鎯堢紓浣介哺鐢繝鐛崶顒夋晣鐟滃酣鎮挎笟锟藉娲传閸曨噮娼堕梺鍛婃⒐閸ㄥ潡鐛崘顔嘉у璺猴功閿涙粌鈹戦悙鏉戠仸闁挎洍鏅滅�靛ジ鏁撻敓锟�,TeamId: "+teamId);
				}
				else if(team.isApplyListFull())
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｉ亶鏌＄�ｎ偆娲撮柡灞剧洴瀵剙鈻庨幆褍澹庨梻浣告惈閺堫剛绮欓幘缁樻櫢闁哄倶鍊楃粊鐑芥煕閺傛寧婀伴柟渚垮姂瀹曟帡鎮欑�电骞嶆俊鐐�栧濠氭偤閺傚簱鏋旀繝濠傛嫅閹烽鎲撮崟顒傤槶闂佺绻戦敃銏ゅΥ娴ｅ壊娼ㄩ柨鐔剁矙楠炲啫顭ㄩ崼婵嗚�垮銈嗘尵閸犲酣顢旈崼鏇熷�甸柣褍鎲＄�氬綊姊洪崨濠冨闁告挻鐩畷銏ゆ焼瀹ュ棌鎷洪梻鍌氱墛缁嬫挻鏅堕弴鐔虹閻忕偛鍊搁敓鑺ョ墱缁骞掑Δ浣哄姸閻庡箍鍎卞Λ娑㈠储閹间焦鐓熼煫鍥ㄦ礀娴犳粌顭胯濡嫮鍙呴柣搴㈢♁閿曗晛鈻撴禒瀣厽闁归偊鍘界紞鎴炵箾閹碱厼鏋熸い銊ｅ劦閹瑧锟介潧鎲￠崳浼存倵鐟欏嫭绀冮柨鏇樺灲瀹曟椽鏁撻悩鑼槰闂佸啿鎼崐璇参ｉ敐澶嬧拻闁稿本鑹鹃敓鑺ユ倐瀹曟劖顦版惔銏╁仺濠殿喗锕╅崜锕傛倿閻ｅ本鍠愮�广儱鐗忔禍杈ㄧ節瀵伴攱婢橀敓鑺ユ礋楠炲﹥鎯旈妸锕�浠惧銈嗘煥椤洘绂嶅鍫熺厵闁瑰嘲鏈涵楣冩煟閿旂晫鐭掗柡灞稿墲閹峰懘妫冮埡鍕儓闂備胶绮幖鈺呭磻婵犲倻鏆﹂柛顐ｆ礀鎯熼悷婊冾槸鍗遍柛顐犲劜閳锋垶绻涢懠棰濆殭妤犵偞顨嗛妵鍕Ω閵夛箑娈楅梺鐐藉劵婵″洭骞戦崟顖毼╅柨鏇嫹缁剧虎鍨跺铏圭磼濡⒈鏆″┑鐐插悑閻燂妇锟介潧銈搁獮鍥偋閸繀鍝楁繝娈垮枟閿氬褏鏅划鏃堫敊閼恒儱寮挎繝鐢靛Т鐎氼喚鏁☉銏＄厵鐎瑰嫮澧楅崳鐣岀磼椤旂晫鎳呴柟鐟板婵℃悂鏁傜拠鍙夋珝闂傚倸鍊搁崐鐑芥嚄閸洖绠犻柟鎹愵嚙閸氬綊鏌″搴″箹缂佺媭鍨堕弻銊╂偆閸屾稑顏�?15濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫孝缂傚秴锕璇差吋婢跺﹣绱堕梺鍛婃处閸嬫捇骞忛柨瀣瘈婵ǜ鍎婚幏鐑藉川閺夋垹顔岄梺鍦劋缁诲啰锟介潧鐭傞弻锝嗘償椤栨粎校婵炲瓨绮嶇划鎾汇�佸Δ鍛潊閹鸿櫕绂嶅鍕╀簻闁规澘澧庣粙鑽ょ磼閿熺晫锟斤綆鍠楅悡娑㈡倶閻愰鍤欏┑顔煎�块弻鐔碱敊閸濆嫸鎷峰┑鍡欐殾闁圭儤鍨熷Σ鍫熸叏濡わ拷濡梻妲愰敓锟�
					psend(applierRoleId, new STeamError(TeamError.ApplyListFull));
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｉ亶鏌＄�ｎ偆娲撮柡灞剧洴瀵剙鈻庨幆褍澹庨梻浣告惈閺堫剛绮欓幘缁樻櫢闁哄倶鍊楃粊鐑芥煕閺傛寧婀伴柟渚垮姂瀹曟帡鎮欑�电骞嶆俊鐐�栧濠氭偤閺傚簱鏋旀繝濠傛嫅閹烽鎲撮崟顒傤槶闂佺绻戦敃銏ゅΥ娴ｅ壊娼ㄩ柨鐔剁矙楠炲啫顭ㄩ崼婵嗚�垮銈嗘尵閸犲酣顢旈崼鏇熷�甸柣褍鎲＄�氬綊姊洪崨濠冨闁告挻鐩畷銏ゆ焼瀹ュ棌鎷洪梻鍌氱墛缁嬫挻鏅堕弴鐔虹閻忕偛鍊搁敓鑺ョ墱缁骞掑Δ浣哄姸閻庡箍鍎卞Λ娑㈠储閹间焦鐓熼煫鍥ㄦ礀娴犳粌顭胯濡嫮鍙呴柣搴㈢♁閿曗晛鈻撴禒瀣厽闁归偊鍘界紞鎴炵箾閹碱厼鏋熸い銊ｅ劦閹瑧锟介潧鎲￠崳浼存倵鐟欏嫭绀冮柨鏇樺灲瀹曟椽鏁撻悩鑼槰闂佸啿鎼崐璇参ｉ敐澶嬧拻闁稿本鑹鹃敓鑺ユ倐瀹曟劖顦版惔銏╁仺濠殿喗锕╅崜锕傛倿閻ｅ本鍠愮�广儱鐗忔禍杈ㄧ節瀵伴攱婢橀敓鑺ユ礋楠炲﹥鎯旈妸锕�浠惧銈嗘煥椤洘绂嶅鍫熺厵闁瑰嘲鏈涵楣冩煟閿旂晫鐭掗柡灞稿墲閹峰懘妫冮埡鍕儓闂備胶绮幖鈺呭磻婵犲倻鏆﹂柛顐ｆ礀鎯熼悷婊冾槸鍗遍柛顐犲劜閳锋垶绻涢懠棰濆殭妤犵偞顨嗛妵鍕Ω閵夛箑娈楅梺鐐藉劵婵″洭骞戦崟顖毼╅柨鏇嫹缁剧虎鍨跺铏圭磼濡⒈鏆″┑鐐插悑閻燂妇锟介潧銈搁獮鍥偋閸繀鍝楁繝娈垮枟閿氬褏鏅划鏃堫敊閼恒儱寮挎繝鐢靛Т鐎氼喚鏁☉銏＄厵鐎瑰嫮澧楅崳鐣岀磼椤旂晫鎳呴柟鐟板婵℃悂鏁傜拠鍙夋珝闂傚倸鍊搁崐鐑芥嚄閸洖绠犻柟鎹愵嚙閸氬綊鏌″搴″箹缂佺媭鍨堕弻銊╂偆閸屾稑顏�?15濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撻梺鎼炲妼閸婂潡寮诲☉銏╂晝闁挎繂妫涢ˇ銉х磽娴ｅ搫孝缂傚秴锕璇差吋婢跺﹣绱堕梺鍛婃处閸嬫捇骞忛柨瀣瘈婵ǜ鍎婚幏鐑藉川閺夋垹顔岄梺鍦劋缁诲啰锟介潧鐭傞弻锝嗘償椤栨粎校婵炲瓨绮嶇划鎾汇�佸Δ鍛潊閹鸿櫕绂嶅鍕╀簻闁规澘澧庣粙鑽ょ磼閿熺晫锟斤綆鍠楅悡娑㈡倶閻愰鍤欏┑顔煎�块弻鐔碱敊閸濆嫸鎷峰┑鍡欐殾闁圭儤鍨熷Σ鍫熸叏濡わ拷濡梻妲愰敓锟�,teamId"+ teamId);
				}
				else if(team.getTeamInfo().getApplierids().containsKey(applierRoleId))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傤槰婵犵數鍋涢敃顏堝Υ娴ｅ壊娼╅柤绋跨仛濞呫垽姊洪懞銉冾亪藝闁秴姹查柨鏃傛櫕缁★拷闂傚倸鐗婃笟妤呭磿閹扮増鐓涢柛娑卞灱閻掗箖妫佹径鎰厽婵☆垳鍎ら埢鏇㈡煕鎼淬垹濮嶉柡灞界Ч閺屻劎锟斤綆浜炴导灞解攽椤旂》宸ユい顓炲槻閻ｇ兘鎮℃惔顔藉兊濡炪倖鎸鹃崰鎾广亹閸垻纾介柛灞剧懅缁涘繘鏌熸搴″幋闁诡喗顨婇弫鎰償閳╁啰浜堕梻浣虹帛閹歌煤閻旂厧钃熼柨鐔哄Т绾惧吋绻濋棃娑欏窛闁靛棗锕︾槐鎾存媴閸濆嫅銉х磼椤曞懎鐏﹀┑锛勬暬瀹曠喖顢涘鍏肩秱闂傚倸瀚ú锔剧博閻旇偤鐔沸ч崶锔剧泿婵＄偑鍊栭崝褏寰婄捄銊т笉闁绘劗鍎ら悡娆撴煣韫囷絽浜為柣顓炵焸閺屾盯鎮╃拠褍浼愰柧浼欑秮閹綊宕堕鍕濠碘�虫▕閸ㄨ泛顫忔繝姘＜婵﹩鍓ㄩ幏鐑芥倻閼恒儱娈戦梺鍛婃尫缁�渚�宕瑰┑鍥ヤ簻闁哄稁鍋勬禒婊堟煢閸愵亜鏋涢柡灞炬礃缁绘繆绠涘☉娆橈拷宥呪攽閻愬弶鍣藉┑鐑囨嫹濡ょ姷鍋為悧妤�顭囪箛娑樼鐟滃酣宕戣濮婂搫煤鐠囨彃绠瑰┑鈽嗗亝椤ㄥ﹪宕洪悙鍝勭闁挎棁妫勬禍褰掓⒑閸涘﹦鎳冩い锔诲灦钘濋柍鍝勬噺閳锋垹绱撴担鑲℃垹浜搁悽鍛婄厱闁绘ê纾晶鐢碉拷娈垮枛椤嘲顕ｉ幘顔芥櫖闁告洦鍘藉鎴︽⒒娴ｅ憡鎯堟繛灞傚姂瀹曟劙顢曢敃锟藉敮闂佸啿鎼崐濠氬储閹间焦鐓熼幖鎼灣缁夐潧霉濠婂嫮鐭掔�殿喗濞婇幃娆撴倻濡厧甯鹃梻浣规偠閸庢粓宕橀崣銉х＞闂佽瀛╅鏍窗濡ゅ懎绠伴柧蹇ｅ亗缁诲棝鏌熼梻瀵割槮閸烆垶姊洪棃娑辨Ф闁搞劏娅ｉ敓鑺ュ嚬閸撶喎顫忛搹瑙勫珰闁告瑥顦弨顓烆渻閵堝骸浜滄い锔诲灣閸欏懎鈹戦绛嬫闁归鍏橀弻鐔兼惞椤愩倗鐤勫Δ鐘靛仦閸ㄥ潡鐛崶顒夋晩闁煎鍊涢崗鎺楁⒒閸屾艾锟芥悂宕愭搴ｇ焼濞撴熬鎷锋鐐差樀閸ㄥ墽鎼炬担鍛婃儓妞ゆ挸鍚嬪鍕節閸曨剛鍙勫┑锛勫亼閸婃洜鎹㈤幇鐗堝亱闁糕剝鐟ф稉宥嗐亜閺嶎偄浠﹂柣鎾跺枛閺岀喐娼忛崜褏蓱濡炪們鍎遍ˇ杈╂閹烘鏅稿ù鐘差儏缁�鍐┿亜閺冨倹娅曢柛妯绘崌濮婃椽宕ㄦ繝鍕暤闁诲孩鍑归崜鐔奉嚕閾忣偆绡�闁搞儯鍔庨崢鎼佹煟鎼搭垳绉柛鈺傜墱閿熻姤鐔幏锟�?
					psend(applierRoleId, new STeamError(TeamError.AlreadyApply));
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傤槰婵犵數鍋涢敃顏堝Υ娴ｅ壊娼╅柤绋跨仛濞呫垽姊洪懞銉冾亪藝闁秴姹查柨鏃傛櫕缁★拷闂傚倸鐗婃笟妤呭磿閹扮増鐓涢柛娑卞灱閻掗箖妫佹径鎰厽婵☆垳鍎ら埢鏇㈡煕鎼淬垹濮嶉柡灞界Ч閺屻劎锟斤綆浜炴导灞解攽椤旂》宸ユい顓炲槻閻ｇ兘鎮℃惔顔藉兊濡炪倖鎸鹃崰鎾广亹閸垻纾介柛灞剧懅缁涘繘鏌熸搴″幋闁诡喗顨婇弫鎰償閳╁啰浜堕梻浣虹帛閹歌煤閻旂厧钃熼柨鐔哄Т绾惧吋绻濋棃娑欏窛闁靛棗锕︾槐鎾存媴閸濆嫅銉х磼椤曞懎鐏﹀┑锛勬暬瀹曠喖顢涘鍏肩秱闂傚倸瀚ú锔剧博閻旇偤鐔沸ч崶锔剧泿婵＄偑鍊栭崝褏寰婄捄銊т笉闁绘劗鍎ら悡娆撴煣韫囷絽浜為柣顓炵焸閺屾盯鎮╃拠褍浼愰柧浼欑秮閹綊宕堕鍕濠碘�虫▕閸ㄨ泛顫忔繝姘＜婵﹩鍓ㄩ幏鐑芥倻閼恒儱娈戦梺鍛婃尫缁�渚�宕瑰┑鍥ヤ簻闁哄稁鍋勬禒婊堟煢閸愵亜鏋涢柡灞炬礃缁绘繆绠涘☉娆橈拷宥呪攽閻愬弶鍣藉┑鐑囨嫹濡ょ姷鍋為悧妤�顭囪箛娑樼鐟滃酣宕戣濮婂搫煤鐠囨彃绠瑰┑鈽嗗亝椤ㄥ﹪宕洪悙鍝勭闁挎棁妫勬禍褰掓⒑閸涘﹦鎳冩い锔诲灦钘濋柍鍝勬噺閳锋垹绱撴担鑲℃垹浜搁悽鍛婄厱闁绘ê纾晶鐢碉拷娈垮枛椤嘲顕ｉ幘顔芥櫖闁告洦鍘藉鎴︽⒒娴ｅ憡鎯堟繛灞傚姂瀹曟劙顢曢敃锟藉敮闂佸啿鎼崐濠氬储閹间焦鐓熼幖鎼灣缁夐潧霉濠婂嫮鐭掔�殿喗濞婇幃娆撴倻濡厧甯鹃梻浣规偠閸庢粓宕橀崣銉х＞闂佽瀛╅鏍窗濡ゅ懎绠伴柧蹇ｅ亗缁诲棝鏌熼梻瀵割槮閸烆垶姊洪棃娑辨Ф闁搞劏娅ｉ敓鑺ュ嚬閸撶喎顫忛搹瑙勫珰闁告瑥顦弨顓烆渻閵堝骸浜滄い锔诲灣閸欏懎鈹戦绛嬫闁归鍏橀弻鐔兼惞椤愩倗鐤勫Δ鐘靛仦閸ㄥ潡鐛崶顒夋晩闁煎鍊涢崗鎺楁⒒閸屾艾锟芥悂宕愭搴ｇ焼濞撴熬鎷锋鐐差樀閸ㄥ墽鎼炬担鍛婃儓妞ゆ挸鍚嬪鍕節閸曨剛鍙勫┑锛勫亼閸婃洜鎹㈤幇鐗堝亱闁糕剝鐟ф稉宥嗐亜閺嶎偄浠﹂柣鎾跺枛閺岀喐娼忛崜褏蓱濡炪們鍎遍ˇ杈╂閹烘鏅稿ù鐘差儏缁�鍐┿亜閺冨倹娅曢柛妯绘崌濮婃椽宕ㄦ繝鍕暤闁诲孩鍑归崜鐔奉嚕閾忣偆绡�闁搞儯鍔庨崢鎼佹煟鎼搭垳绉柛鈺傜墱閿熻姤鐔幏锟�?,teamId"+ teamId);
				}
				else if(!checkLevelRequirementValid(team, applierRoleId))
				{
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傤槰濠电姰鍨洪…鍫ユ倶閸愵喗鈷戦悹鎭掑妼閺嬪秶绱掗鐣屾噰闁靛棔绀侀～婵嬫嚋閸偅鐝冲┑鐘灱濞夋盯鏁冮敃鍌ゆ晩闁圭儤顨嗛悡鐔兼煟濡搫绾х紒灞芥健閹绠涢弮鍌涘櫗濡炪們鍔婇崕闈涚暦閸洦鏁嗗ù锝呭级鐎氬ジ姊绘担鍛婂暈闁瑰憡妲掗妵鎰板礃閳哄喚娲搁梺缁樺姉閸庛倝鎮￠弴銏＄厽婵☆垵宕甸崣锟介梺鍛婄懃鐎氼噣鏁撻崐鐕佹綈婵炲弶顭囬幑銏ゅ醇閻斿墎绠氶梺鍏兼倐濞佳呮閻愮儤鍊甸柨婵嗛婢ь喗顨ラ悙鑼ⅵ婵﹦绮幏鍛村传閵夛妇锟筋喖鈹戦埄鍐︿粻闁告梹鍨块獮濠偽旈崨顓㈠敹闂佸搫娲ㄩ崰搴ㄦ晸閽樺鍋ラ柡灞剧☉閳藉顫滈崼鐔告毎闂備礁鎲￠悷銉ф崲閹版澘鐓橀柟杈鹃檮閸嬫劙鏌熺紒妯洪嚋闁归鍏樺畷濂稿即閻愮绱遍梻渚�娼х换鍫ュ磹閺嶎厽鍋傛繛鍡樺姂娴滄粓鏌￠崒娑橆嚋闁诡垰鐗撻弻锝堢疀濮橆剛姣㈤梺璺ㄥ枎閿熺晫鍣ュ鎰箾閸欏鐒介柛鎺撳笒椤撳吋寰勬繝鍕靛數闂備礁鎲℃笟妤呭窗濮樿埖鍋￠悷娆忓娴滄粓鏌″鍐ㄥ闁搞劋绶氶弻銊╁棘閸喒鎸冪紒鎯у綖缁瑩寮诲☉姘勃闁硅鍔曢ˉ婵嬫⒑鐠恒劌鏋旈柡鍜佸亰瀹曟顫滈敓浠嬬嵁婵犲伣鏃堝川椤撶媭妲跺┑鐐存尰閼归箖鏁冮妷褝鎷峰鎰佹綈闁逛究鍔岄～婊堝幢濡わ拷椤偆绱撴担鍝勑�规洜鏁婚弫鎾诲磹閻曚焦缍堝┑鐐插级閿曘垽寮崘顔碱潊闁炽儴灏欑粻姘攽椤旂晫绠撻柣顓炵墕鍗辩紓浣诡焽缁★拷濠电偛鐗嗛悘婵嬪几閻斿吋鐓欐い鏃傚帶閿熻姤鎮傞敐鐐剁疀閹句焦妞介、鏃堝川椤撶噥鍚嬮梻鍌欑窔濞佳囨偋閸℃稑绠犻煫鍥ㄧ♁閸婄敻鏌熼鍡嫹闁猴拷娴犲鐓熼柟閭﹀幖缁茶崵绱掗悪娆忔处閻撴洟鏌曟繛鍨姕闁稿鍎查〃銉╂倷閹绘帗娈婚梺璇″枟閻熲晠骞冨鍏剧喓绱掑Ο鐓庣悼闂傚倸鍊烽懗鍫曗�﹂崼銉ュ珘妞ゆ帒鍊婚惌娆撴煙鏉堝墽鐣辩紒锟介崼銉︾厵闁诡垱婢樿闂佹娊鏀遍崹鍧楀箖瑜版帒绠掗柟鐑樺灥椤牆鈹戦悙鍙夊櫤闁告梹鐟╁濠氭偄閻撳海顦╅梺闈涚墕濡顢旈敓锟�
					//psend(applierRoleId, new STeamError(TeamError.ApplierLevelValid));
					fire.pb.talk.MessageMgr.psendMsgNotify(applierRoleId, 141207, null);
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傤槰濠电姰鍨洪…鍫ユ倶閸愵喗鈷戦悹鎭掑妼閺嬪秶绱掗鐣屾噰闁靛棔绀侀～婵嬫嚋閸偅鐝冲┑鐘灱濞夋盯鏁冮敃鍌ゆ晩闁圭儤顨嗛悡鐔兼煟濡搫绾х紒灞芥健閹绠涢弮鍌涘櫗濡炪們鍔婇崕闈涚暦閸洦鏁嗗ù锝呭级鐎氬ジ姊绘担鍛婂暈闁瑰憡妲掗妵鎰板礃閳哄喚娲搁梺缁樺姉閸庛倝鎮￠弴銏＄厽婵☆垵宕甸崣锟介梺鍛婄懃鐎氼噣鏁撻崐鐕佹綈婵炲弶顭囬幑銏ゅ醇閻斿墎绠氶梺鍏兼倐濞佳呮閻愮儤鍊甸柨婵嗛婢ь喗顨ラ悙鑼ⅵ婵﹦绮幏鍛村传閵夛妇锟筋喖鈹戦埄鍐︿粻闁告梹鍨块獮濠偽旈崨顓㈠敹闂佸搫娲ㄩ崰搴ㄦ晸閽樺鍋ラ柡灞剧☉閳藉顫滈崼鐔告毎闂備礁鎲￠悷銉ф崲閹版澘鐓橀柟杈鹃檮閸嬫劙鏌熺紒妯洪嚋闁归鍏樺畷濂稿即閻愮绱遍梻渚�娼х换鍫ュ磹閺嶎厽鍋傛繛鍡樺姂娴滄粓鏌￠崒娑橆嚋闁诡垰鐗撻弻锝堢疀濮橆剛姣㈤梺璺ㄥ枎閿熺晫鍣ュ鎰箾閸欏鐒介柛鎺撳笒椤撳吋寰勬繝鍕靛數闂備礁鎲℃笟妤呭窗濮樿埖鍋￠悷娆忓娴滄粓鏌″鍐ㄥ闁搞劋绶氶弻銊╁棘閸喒鎸冪紒鎯у綖缁瑩寮诲☉姘勃闁硅鍔曢ˉ婵嬫⒑鐠恒劌鏋旈柡鍜佸亰瀹曟顫滈敓浠嬬嵁婵犲伣鏃堝川椤撶媭妲跺┑鐐存尰閼归箖鏁冮妷褝鎷峰鎰佹綈闁逛究鍔岄～婊堝幢濡わ拷椤偆绱撴担鍝勑�规洜鏁婚弫鎾诲磹閻曚焦缍堝┑鐐插级閿曘垽寮崘顔碱潊闁炽儴灏欑粻姘攽椤旂晫绠撻柣顓炵墕鍗辩紓浣诡焽缁★拷濠电偛鐗嗛悘婵嬪几閻斿吋鐓欐い鏃傚帶閿熻姤鎮傞敐鐐剁疀閹句焦妞介、鏃堝川椤撶噥鍚嬮梻鍌欑窔濞佳囨偋閸℃稑绠犻煫鍥ㄧ♁閸婄敻鏌熼鍡嫹闁猴拷娴犲鐓熼柟閭﹀幖缁茶崵绱掗悪娆忔处閻撴洟鏌曟繛鍨姕闁稿鍎查〃銉╂倷閹绘帗娈婚梺璇″枟閻熲晠骞冨鍏剧喓绱掑Ο鐓庣悼闂傚倸鍊烽懗鍫曗�﹂崼銉ュ珘妞ゆ帒鍊婚惌娆撴煙鏉堝墽鐣辩紒锟介崼銉︾厵闁诡垱婢樿闂佹娊鏀遍崹鍧楀箖瑜版帒绠掗柟鐑樺灥椤牆鈹戦悙鍙夊櫤闁告梹鐟╁濠氭偄閻撳海顦╅梺闈涚墕濡顢旈敓锟�,applierRoleId"+ applierRoleId);
				}
				else{
					
					boolean inWaiting1 = false;
					boolean inWaiting = false;
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋侀柟鍓х帛閸嬫劙鏌涢幇顖氱处闁汇垹顭峰缁樻媴閻熼偊鍤嬪┑鐐插级閻楃姴鐣烽幇鏉跨濞达絿顭堥悗顓㈡⒑缁嬫寧婀伴柛鈺佸暣瀵劍绂掔�ｎ偆鍘遍柣蹇曞仜婢т粙鎯岄妶澶嬬厽闁圭儤鍨甸埛鏃傜磼鏉堛劌娴柟顔规櫅閻ｇ兘宕惰缂佲晠姊绘担鍛婃儓閻炴凹鍋婂畷婵嗙暆閸曨偆鍘撮梺纭呮彧缁犳垿鐛姀鈩冨弿婵°倧鎷锋俊顐ｇ懇閺佹捇濡烽敂璺ㄧ畾闂佺粯鍔︽禍婊堟晸閼恒儱濮嶇�殿喗鐓￠、鏃堝醇濠靛牜鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?
					final fire.pb.map.Role  invitMaprole = fire.pb.map.RoleManager.getInstance().getRoleByID(applierRoleId);
					final fire.pb.map.Role  desMaprole = fire.pb.map.RoleManager.getInstance().getRoleByID(leaderRoleId);
					if(invitMaprole == null || desMaprole == null){
						return true;
					}
//					int srcMapId = invitMaprole.getMapId();
//					int desMapId = desMaprole.getMapId();
					
//					if (srcMapId != desMapId) {
//						if (fire.pb.buff.Module.existState(leaderRoleId,
//								BuffConstant.StateType.STATE_INSTANCE_ZONE)) {
//							MessageMgr.sendMsgNotify(applierRoleId, 160201, null);
//							return false;
//						}
//					} else {
						if (inWaiting || inWaiting1) {
							fire.pb.talk.MessageMgr.psendMsgNotifyWhileRollback(
									applierRoleId, 145250, null);
							return false;
						}
//					}
						
					xbean.Properties applierProperty = xtable.Properties.get(applierRoleId);
						
					//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋婵愭綗闁跨喕妫勯崐鍧楀箰婵犲啰鐝堕柍鍝勵儑缁夘喚锟借娲滈崰鏍�佸☉姗嗘僵濡插本鐗曢弫鎼佹⒒閸屾瑦绁版繛澶嬫礋瀹曟娊鏁冮崒姘鳖唵闂佽法鍣﹂幏锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鐘栄囨煕閳╁啨浠︾紒顔瑰墲娣囧﹪鎮欓鍕舵嫹閺嶎厼绀夌憸蹇曞垝婵犳艾绠ｉ柣妯烘▕濡粓姊虹粔鍡楀濞堟洟鏌ｉ幘瀵告噰闁哄瞼鍠栭、娑橆煥閸愮偓姣夋俊鐐�戦崕閬嵥囬悽绋胯摕闁挎稑瀚搁幏鐑芥晲閸屾稒鐝栫紓浣瑰姈濡啴寮婚垾宕囨殕閻庯綆鍓涜ⅵ濠电姵顔栭崳顖炲箯閻戣姤鈷戠紓浣光棨椤忓牆瑙﹂柨鐔烘櫕缁辨帡顢欓悙顒佹瘓闂佸搫鐭夌徊楣冨箚閺冨牆顫呴柕蹇婃櫆濞堝綊鏌ｆ惔锝嗩仧闁归鍏橀弻鐔兼⒒鐎靛壊妲梺钘夊暟閸犳牠寮婚妸銉㈡斀闁糕檧鏅滅瑧闂佹悶鍎查幐鍐参涢崨鎼晝闁靛繆锟芥剚妲遍梻浣告惈鐞氼偊宕濋幋锔猴拷渚�寮崼鐔告闂佽法鍣﹂幏锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣捣閻棗銆掑鐐濡ょ姷鍋涢ˇ鐢稿春閸曨垰绀冩い蹇撴閸ゅ本绻濆閿嬫緲閿熻姤娲熼獮濠冩償閿濆洨骞撳┑掳鍊撳鎺旀崲閸℃稒鐓忛柛顐ｇ箖閸ｅ綊鏌￠崱娆忔灈闁哄瞼鍠栧畷姗�宕ｆ径濠冪暬婵犳鍠栭敃銈夆�﹀畡鎵殾闁圭儤鍨熼弸搴ㄦ煙閹碱厼骞楃悮锕傛⒒閸屾瑨鍏屾い銏狅躬椤㈡艾顭ㄩ崨顔煎簥濠电娀娼ч鍛不閺嶎厽鐓忛煫鍥ь儏閿熷鍊濆顐﹀幢濞戞瑧鍘遍梺鍝勬储閸斿矂宕㈤幘顔界厵缂佸鐏濋弳锝嗘叏婵犲啯銇濈�规洏鍔嶇换婵嬪礃椤垶袩闂傚倷鑳堕…鍫ヮ敄閸℃瑦鏆滈柍銉ョ－閺嗭箓鏌ｉ姀銏╃劸闁告濞婇弻锝呂熼崫鍕瘣闂佸搫顑嗛崹鍨涢崨鎼晝闁靛繆锟芥剚妲辩紓鍌欑椤戝棝宕归崷顓炲灊闁哄嫬绻堟禍褰掓煙閻戞ɑ灏甸柛姗�浜跺娲捶椤撶偘澹曞銈冨妼閹虫劗鍒掗弮鍫熷仺缁炬澘顦扮�氳鎱ㄥ鍡楀缂佸妞介弻锛勪沪閸撗勫垱闂佽桨绀侀崐濠氬箯閻樿绠甸柟鐑樻閸熷洭姊绘担鍛婃喐闁哥姴閰ｉ獮妤�顭ㄩ崨顕呮綗闂佽鍎抽悺銊﹀垔閹绢喗鐓曟繝闈涙閻濇棃鏌曟径鍡樻珕闁绘挻鐟╅弻褑绠涢敐鍛凹閻庤娲栭惌鍌炲蓟濞戙垹鐓橀柛顭戝枛婵洟鎮楅崹顐ｇ凡閻庢矮鍗抽悰顕�宕堕澶嬫櫌闂佺琚崐鏇㈠疾椤愶附鈷掗柛灞剧懅椤︼箓鏌熺拠褏绡�鐎规洘绮撻、妤呭礋椤愩倕锟界偤鎮峰鍐伇闁告帗甯￠弫鎰板川椤忓懏鏉搁梻浣虹帛椤牏浜稿▎寰盯宕熼娑氬帾闂佸壊鍋呯换鍫ヮ敁濡や胶绠鹃柛顐ゅ枔缁犵偞鎱ㄦ繝鍌ょ吋鐎规洘甯掗～婵嬵敆婢跺鍋呴梻浣筋嚙鐎涒晠宕欒ぐ鎺戦棷闁挎繂顦弸渚�鏌熼崜褏甯涢柛瀣ф櫊閹﹢鎮欓棃娑楀濠殿噯绲界�氭澘顫忓ú顏勫窛濠电姴娴烽崝鍫曟⒑閹肩偛鍔ラ柛鈺傜墵瀵煡鏁愰崱娆戠槇闂傚倸鐗婄粙鎴︽晸閽樺鐓奸柍銉畵瀹曞ジ濡烽敂鎯у笒闂備焦鎮堕崕顖炲礉鎼达絽濮柨鐔剁矙濮婂宕掑鍗烆杸缂備礁顑嗙敮鐐靛垝婵犲洤鐓涢柛娑卞枤閸橀亶姊虹紒妯哄閻忓繑鐟╁畷娲晲閸℃ê寮挎繝鐢靛Т鐎氼喚鏁☉銏＄厵鐎瑰嫮澧楅崵鍥╋拷瑙勬磸閸斿秶鎹㈠┑瀣＜婵炴垶鐟ч弳顓㈡⒒閸屾艾锟介绮堟笟锟介獮鏍敃閿旇棄鍓规繝銏ｆ硾閻偐绮堟繝鍋綊鏁愰崨顔藉枑闂佸搫妫撮梽鍕崲濠靛顥堟繛鎴炵懐濡倝姊洪崫鍕棞婵☆偅绻堝濠氬Ω閳哄倸浜滈柣鐘叉处閻ｎ偊骞橀崜浣猴紲闂佺鏈銊︽櫏婵°倗濮烽崑鐐烘偋濡ゅ啰绠旈柣鏃傚帶閻愬﹪鏌曟繝蹇涙闁绘縿鍔戝濠氬磼濞嗘劗銈板┑鐐差槹濞茬喎鐣烽弶娆惧悑闁搞儜鍐喊婵犵數鍋涘Λ妤�霉濮樿泛鍚归柡鍥╁Х绾捐棄霉閿濆牜鍤冮柣鎺旀櫕缁辨帡鍩ラ崨顔碱伓闂傚倸鍊烽懗鍫曗�﹂崼銏″仏妞ゆ劧绠戠壕褰掓煛閸ャ儱鐏╃紒鐘崇墵閺岀喐娼忔ィ鍐╊�嶉梺鎶芥敱閸ㄥ潡寮婚悢鍏煎殐闁宠桨妞掔划鍫曟⒑閸涘﹥鈷愰柨鏇樺灲瀵鈽夐姀鐘愁棟闂佺鍕垫當鐎殿喕鍗抽幃妤�鈻撻崹顔界亶婵犵數鍋涢敃顏堢嵁閸愵喖鐓涢柛鎰典簽閿涙粌鈹戦埥鍡楃仸闁猴拷鏉堚晪鎷峰顐ょ煓婵﹦绮幏鍛瑹椤栨粌濮奸梻浣规た閸樺ジ藝闂堟侗娼栧ù鐘差儏缁�瀣亜閹惧崬濡介悗姘愁潐閹便劌螣閻撳簼澹曢柣搴㈢啲閹凤拷?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ姀鐘差棌闁轰礁锕弻鈥愁吋鎼粹�崇闂傚倸鍋嗛崹閬嶅Φ閸曨垰鍐�妞ゆ劦婢�缁墎绱撴担鍝勵�岄柛銊ョ埣瀵濡搁埡鍌氫簽闂佺鏈粙鎴︻敂閿燂拷? by changhao
					xbean.TeamMatch teammatch = TeamManager.getInstance().getTeamMatchByTeamid(teamId);
					if (teammatch != null && applierProperty != null)
					{
						int applierlevel = applierProperty.getLevel();
						if (applierlevel >= teammatch.getLevelmin() && applierlevel <= teammatch.getLevelmax())
						{		
							mkdb.Procedure.pexecuteWhileCommit(new PAcceptToTeam(leaderRoleId, applierRoleId, 1, false));
							return true;
						}
					}
					
					team.getTeamInfo().getApplierids().put(applierRoleId, now);

					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹板墎鎮奸柨鐔诲Г婵炲﹪骞冨Δ鍛祦闁割煈鍠栨慨搴☆渻閵堝繐鐦滈柛銊ㄦ硾閻ｇ柉銇愰幒鎴狅紲闂佺粯鍔曢顓㈠储閸楃儐娓婚柕鍫濋楠炴鏌涢妸褎鏆�殿喛娅曢幆鏃堝Ω閿旀儳寮虫繝鐢靛█濞佳兾涢鐐嶏綀銇愰幒鎾跺幐闂佸憡渚楅崰姘辩不閻愮儤鐓涢悘鐐插⒔閵嗘帒霉閻欏懐鐣电�规洘绮忛ˇ顕�鏌＄�ｎ偅顥堟慨濠冩そ閹兘寮堕幐骞晝绱撻崒姘毙㈤柨鏇樺�濋敐鐐剁疀閹句焦妞介、鏃堝礋椤掞拷缁佽埖淇婇悙顏勶拷鏍箰閸℃稑宸濇い鎾跺�鍫熲拻濞达絿鐡旈崵娆撴倵濞戞帗娅囩紒顔界懇瀹曞ジ濡烽妷褎鐓ｆ繝鐢靛█濞佳囶敄閸℃稑纾垮璺侯儍娴滄粓鐓崶銊﹀暗濠⒀囦憾閺屸剝鎷呴崫銉愌囨煛瀹�瀣М妤犵偛娲、妤佸緞婵犲喚鍟�闂傚倷绀侀幉陇鎽梺璇″枛閸婃悂锝炶箛娑欐優闁革富鍘鹃悡鎾绘⒑閸︻収鐒鹃悗娑掓櫊楠炲繑娼忛埡鍐紳婵炶揪绲芥竟濠囧磿閹扮増鐓曢柕濞垮妼閸斿灚淇婇鐘茬伈闁哄矉绲鹃幆鏃堫敍濠婂憛锝夋⒑閸濄儱校妞ゃ劌锕獮鍐灳閺傘儲顫嶅┑鈽嗗灠缁绘劗绱炴繝鍥ф瀬闁圭増婢橀悙濠勬喐瀹ュ棔绻嗘繛宸簼閳锋垿鏌涘┑鍡楊仾妞ゃ儲鍨块弻锟犲川椤栨埃鏋呴悗娈垮枛椤兘骞冮姀銈呯闁告瑥锛嶈閺岀喖鎳栭埡鍕婂鎮楀▓鍨⒋濠殿噯鎷烽梺闈涚墕濡盯宕㈡禒瀣拺闁圭娴风粻鎾剁磼缂佹ê绗х�殿啫鍥ㄦ櫢濞寸姴顑嗛崐鍨箾閸繄浠㈤柡瀣☉椤儻顦查梺甯秮閻涱噣骞嬮敃锟界粈瀣亜閺嶎煈鍤ら柍鍝勬噺閻撳繘鏌涢锝囩畺濠㈣泛瀚惀顏堫敇閵娧呮殼濠殿喖锕ら…宄扮暦閹烘垟鏋庨柟閭﹀枔閸嬫﹢鏌ｆ惔銈庢綈婵炲弶绮撳顐ゆ嫚閼碱剚娈鹃梺鍝勬储閸ㄥ湱绮婚敐澶嬬叆闁哄浂浜濈�氬湱绱撴担鍝勵�岄柛銊ョ埣瀵濡搁埡鍌氫簽闂佺鏈粙鎴︻敂閿燂拷?
					SAddTeamApply sAddTeamApply = new SAddTeamApply();
					fire.pb.team.TeamApplyBasic  teamApplyBasic = new fire.pb.team.TeamApplyBasic();
					//teamApplyBasic.face = applierProperty.getFaction();
					teamApplyBasic.level = applierProperty.getLevel();
					teamApplyBasic.roleid = applierRoleId;
					teamApplyBasic.rolename = applierProperty.getRolename();
					teamApplyBasic.school = applierProperty.getSchool();
					//teamApplyBasic.title = applierProperty.getTitle();
					teamApplyBasic.shape = applierProperty.getShape();
					fire.pb.map.Role.getPlayerComponents(applierRoleId, teamApplyBasic.components);
					sAddTeamApply.applylist.add(teamApplyBasic);
					psendWhileCommit(leaderRoleId, sAddTeamApply);
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹板墎鎮奸柨鐔诲Г婵炲﹪骞冨Δ鍛祦闁割煈鍠栨慨搴☆渻閵堝繐鐦滈柛銊ㄦ硾閻ｇ柉銇愰幒鎴狅紲濠电姴锕ょ�氼剟寮搁幋锔解拺缂備焦锕╁▓鏃堟煟濡わ拷濡稓鍒掗銏犵婵°倓鑳堕崢鎼佹煟鎼搭垳宀涢柡鍛箘缁綁寮崼鐔哄幐閻庣櫢鎷烽悗锝庡墰琚﹀┑鐘愁問閸ｎ垶骞忛悜鑺モ拺缂備焦鈼ら鍫濊Е闁跨喓鏅槐鎺楊敊閻愵剚姣堥梺鍝勭焿缁查箖骞嗛弮鍫濐潊闁靛繆鏅滃▓褰掓煟鎼达絾顏熼柟椋庡厴閺岀喖姊荤�靛壊妲梺钘夊暟閸犳牠寮婚妸銉㈡斀闁糕檧鏅滅瑧闂佹悶鍎查幐鍐参涢崨鎼晝闁靛繆锟芥剚妲遍梻浣告惈鐞氼偊宕濋幋锔猴拷渚�寮崼鐔告闂佽法鍣﹂幏锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣捣閻棗銆掑鐐濡ょ姷鍋涢ˇ鐢稿极瀹ュ绀嬫い鎾跺Х閸橆垶姊绘担鍛婅础闁稿簺鍊濋獮鎰偅閸愨晛浠ч梺鍓插亝濞叉﹢鎮￠弴銏＄厓闁宠桨绀侀弳鐔兼煙閸愬弶鍣归柍钘夘樀楠炴ê鐣烽崶鍠插洦鐓涚�癸拷鐎ｎ剛锛熸繛瀵稿婵″洭骞忛悩璇茬闁圭儤鍩堝銉╂⒒閸屾瑨鍏岀紒顕呭灦楠炴劗鎷犵憗浣规そ閹垽鎮℃惔銈嗘啺闂備礁鎼ú銊╁窗閹剧粯鍋熼柤鍝ュ仯娴滄粓鏌″鍐ㄥ濠㈣锕㈤弻锟犲幢濡崵顦ㄧ紓浣虹帛缁嬫垿鎮惧┑鍥╃瘈濞撴熬鎷烽柛瀣殔閳规垿顢欑涵閿嬫暰濠碉紕鍋樼划娆撴偘椤曪拷瀵粙顢橀悢鍑ゆ嫹閻戣姤鐓欑紓浣姑穱顖炴煟鎼淬垺灏﹂柡宀嬬稻閹棃鏁愰崱鈺�鎴烽梻浣告贡閸忔﹢藟閹捐埖顫曢柟鐑樻閹风兘鏁愭惔鈥崇缂佺虎鍘奸悥濂稿蓟閿熺姴骞㈡い鎾卞灪椤庡秶绱撴担铏瑰笡缂佽鐗嗚灋闁告劑鍔夊Σ鍫ユ煕濡ゅ啫浠滃鐟邦樀濮婄粯鎷呮笟顖滃姼濡炪倖鍨甸幊鎰版晸閼恒儳鐓柛妤�鍟块锝嗙節濮橆厽娅㈤梺缁樕戦悡锟犲船閸洘鈷戦梻鍫熺〒缁犳岸鏌涢幘瀵哥畵鐞氭瑩鏌涢弴銊ュ箻缁炬崘妫勯湁闁挎繂鎳忛幆鍫ュ冀閿熺姵鍊甸柣褍鎲＄�氬湱绱撴担鍓插剱妞ゆ垶鐟ラ…鍥冀閵娧咁啎閻庣懓澹婇崰鏇犺姳婵傚憡鐓曢幖杈剧磿閻掓悂鏌＄仦鍓р槈闁宠棄顦～婊堝醇濠靛懐鐭楀┑锛勫亼閸婃洘顨ヨ箛娑樼闁跨噦鎷�?
					SRequestJoinSucc sRequestJoinSucc = new SRequestJoinSucc();
					xbean.Properties leaderProperty = xtable.Properties.get(leaderRoleId);
					sRequestJoinSucc.rolename = leaderProperty.getRolename();
					psendWhileCommit(applierRoleId, sRequestJoinSucc);

					java.util.ArrayList<String> param = new java.util.ArrayList<String>();
					param.add(sRequestJoinSucc.rolename);
					
					fire.pb.talk.MessageMgr.psendMsgNotify(applierRoleId, 150041, param);
					
					TeamManager.logger.debug("SUCC:婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚悢铏圭＜闁靛繒濮甸悘鍫ユ⒑缂佹ɑ灏甸柛鐘崇墵瀵寮撮悢椋庣獮闂佺硶鍓濊摫闁绘繃妫冮弻娑㈠Ψ閿旇棄鍞夊┑顔硷攻濡炶棄鐣烽妸锔剧瘈濞达綀娅ｇ粻鎺楁⒒娴ｅ憡鍟為惇澶岀磼椤旂晫鎳囨鐐插暙椤粓鏁撻挊澶屾殾闁告鍋愬Σ鍫熺箾閸℃婀伴悗姘虫閳规垿鎮欓懜闈涙锭缂備浇寮撶划娆撶嵁婢舵劖鏅搁柣妯垮皺閻ｉ箖姊洪崜鎻掍簽闁哥姴妫欑粋宥咁煥閸喓鍙嗛梺鍝勫暙濞村倿宕靛▎寰濈懓顭ㄩ敓浠嬪础閹惰棄钃熼柍鈺佸暞婵挳鎮峰▎蹇擃仼缁剧偓濞婂娲捶椤撗呭姼闂佹寧娲忛崕閬嶎敋閵夆晛绀嬫い鎺戝�婚惁鍫ユ⒑閸涘﹥澶勯柛銊ュ暱閻ｅ嘲顭ㄩ崘锝嗘杸闂佹寧绋戠�氼剚绂嶆總鍛婄厱濠电姴鍟版晶鐢碉拷瑙勬礃缁诲牓鐛幒妤�妫橀柛顭戝枤娴滅増绻濋悽闈涗粶婵☆偅鐟╅獮鎰板箹娴ｇ懓鐝旈梺缁樻煥閸氬鎮¤箛鎾斀闁绘劘灏欐禒銏ゆ煕閺冿拷椤ㄥ棙绌辨繝鍥х闁圭儤鏌ㄩ·锟藉┑鐑囩到濞层倝鏁冮鍫涳拷浣糕槈濡攱鏂�闂佺硶鍓濆ú姗�鎯堣箛娑欌拻濞达絽鎲￠崯鐐翠繆椤愩垻绠荤�规洝顫夌�靛ジ寮堕幋鐘插箣闂備胶顢婇幓顏堟⒔閸曨垼鏁侀柟閭﹀墻濞撳鏌曢崼婵囶棡缂侊拷閸愵亞纾兼い鏃囧Г鐏忣厽銇勯銏㈢缂佸倹甯為敓鏂ょ秵娴滅偤藝閺夋娓婚柕鍫濇鐏忣亪鏌涢弬璺ㄐら柨鐔诲Г閼瑰墽绱炴繝鍥ц摕闁挎繂顦～鍛存煏閸繃顥為梺娆惧弮閺岋綁濮�閳轰胶浠撮梺绯曟櫆閻楃姵淇婇悽绋跨妞ゆ牗姘ㄩ鎺楁⒑缂佹ê濮屾俊顐㈠缁傛帡顢氶敓浠嬪箖濡ゅ啯鍠嗛柛鏇ㄥ墰閿涙﹢姊洪崨濠冣拹闁搞劌娼℃俊瀛樻媴閸撳弶寤洪梺璺ㄥ枍缁瑥鐣峰ú顏勎ㄩ柍杞扮閼板灝鈹戞幊閸婃捇鎮為敃锟借濠㈣泛顑囩弧锟介梺姹囧灲濞佳冩毄闂備浇妗ㄩ悞锕傚箖閸屾氨鏆﹂柟瀛樼妇濡插牓鏌曡箛濠冩珕闁哄拋浜滈—鍐Χ閸℃ê鏆楅梺鍝ュУ閸旀瑥鐣烽敐鍫㈢杸闁瑰彞绀佺紞濠傜暦濡ゅ懎绀傞柤娴嬫櫇閳诲繒绱撴担鍝勪壕闁稿骸鍟块…鍥晸閻樿尪鎽曢梺闈涚墕濞层倝寮搁崼銉︾厱婵°倕鍟禒婊勩亜椤愵偂閭慨濠冩そ瀹曨偊宕熼澶嬶紒缂傚倷绶￠崰妤呭箲閸パ屽殨濠电姵纰嶉崑鍕煣韫囨挻璐￠柨娑欑矒濮婃椽妫冨☉姘鳖唺婵犳鍠氶弫濠氬箖濮楋拷瀹曞ジ濡烽敂瑙勫婵犵數鍋犵亸顏堫敋瑜旈悰顔嘉旀担鍏哥盎闂侀潧顭堥崕鏌ニ夐悙鐢电＜鐎癸拷閸愵喖鎽电紓浣虹帛缁诲牆鐣烽崼鏇楋拷鏍敄椤掞拷濞诧箓鎮￠弴鐔虹闁瑰瓨绻傞懜瑙勵殽閻愭惌娈曠紒缁樼洴瀹曞ジ鎮㈤崫鍕哗婵犳鍠栭敃銉ヮ渻閽樺鏆︽い鎰剁畱缁�瀣亜閹烘埈妲规い銉︾墵濮婄粯鎷呮笟顖滃姼闂佹寧娲忛崕鎶藉箲閵忋倕閱囬柕澹啰銈﹂梻浣告啞閸旓箓宕㈢憴鍕洸鐟滅増甯楅悡娆撴煟閹寸伝顏堟倶閳哄懏鐓曞┑鐘插娴犺鲸鎱ㄦ繝鍐┿仢鐎规洘锕㈠畷锝嗗緞鐎ｎ亜澹嶉梻鍌欒兌椤牓鏁冮妶澶嗭拷锕�鐣￠幍顔芥濠电娀娼ч鍡涘疾閹间焦鐓ラ柣鏇炲�圭�氾拷??,teamId"+ teamId);
				}
				return true;
			}
		};
		requestJoinTeamP.submit();
	}

	// 婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋婵愭綗闁跨喕妫勯崐鍧楀箰婵犲啰鐝堕柍鍝勵儑缁夘喚锟借娲滈崰鏍�佸☉姗嗘僵濡插本鐗曢弫鎼佹⒒閸屾瑦绁版繛澶嬫礋瀹曟娊鏁冮崒姘鳖唵闂佽法鍣﹂幏锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊璁查弸娆撴⒑缂佹ê绗╁┑顔哄�楅幑銏犫槈閵忕姴鑰垮┑鈽嗗灥椤曆呭枈瀹ュ鈷戠紓浣股戠亸浼存煥閺囨ê鐏茬�殿喖顭烽幃銏ゆ倻濡櫣锛忔俊鐐�ら崢浠嬪垂閸洦鏁侀柨鐕傛嫹
	private static int checkPvP(long targetRoleId, long selfRoleId) {
		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯￠幊鏍煛閸愵亷绱冲┑鐐存尰閼归箖鏁冮妷褝鎷峰鎰佹綈缂佺粯绻堟慨锟介柨婵嗘噽閸橆偊姊洪崨濠冣拹闁绘濞�楠炲啴鏁撻悩鍐蹭簻闂傚偊鎷烽柟閭﹀枤閻ｇ偓淇婇悙顏勶拷鏍偋濡ゅ啯宕茬�广儱顦崥瑙勭箾閸℃ê鐏╃痪鎯с偢閺屻倝鎳濋悧鍫€�愰梺鍛婅壘缂嶅﹪寮婚妸鈺傚亜閻犲洦鐣幘娣簻闁哄喛鎷烽柣妤冨Т閻ｇ兘寮剁拠鐐⒐閹峰懘鎼圭拠鈥虫櫗婵犵數濮烽弫鍛婃叏閺夋嚚娲Χ婢跺鐝旈梺缁樻煥閹芥粎绮绘ィ鍐╃厵閻庢稒顭囬幊鍐煟韫囧﹥娅囩紒杈ㄥ浮閹晠鎮滃Ο鐓庢锭缂傚倷鑳剁划顖滄崲閸惊娑㈠礃閵娿垺顫嶅┑鐐叉钃辨い銉уХ缁辨捇宕掑▎鎾搭�栭梺鍛婃⒐閸ㄧ敻鈥﹂崶顏嶆▌闂佺硶鏅濋崑銈夌嵁鐎ｎ喗鏅滅紓浣股戝▍鎾绘⒒娴ｈ櫣甯涢柛鏃撶畵瀹曟粌鈻庤箛濠冪亖闁诲繒鍋熼悺鏂裤�掓繝姘厪闁割偅绻勭粻鎶芥煟閿濆懐浠涚紒缁樼♁閹峰懘宕橀崣澶屻偒缂傚倸绉甸悧鐘绘偂椤愶箑鐐婇柕濠忚吂閹峰姊婚崒姘仼閻庢矮鍗冲璇测槈濡攱顫嶅┑顔筋殔閻楀棙瀵奸幇顓犵閻庢稒顭囬惌瀣磼椤旇姤灏い顐㈢箰鐓ゆい蹇撳缁愭稒绻濋悽闈浶㈤柛鐕佸亰閹矂顢氶敓钘夘潖濞差亝鍋傞幖绮瑰墲濮ｆ劙姊虹紒妯煎⒊濠㈢懓鐗嗚灋闁绘柨鍚嬮埛鎴︽偣閹帒濡兼繛鍛姍閺岀喖宕欓妶鍡楊伓
		return fire.pb.battle.pvp.PvPTeamHandle.onRequestJoinTeam(targetRoleId, selfRoleId);
	}

	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傦紭闂佹悶鍔忓▍锝囧垝鐎ｎ喖绠抽柡鍐╂尰鐎氬綊鏌ㄥ┑鍡涱�楀褜鍠氶幉鎼佸级閹稿寒妫炲銈庝簻閸熷瓨淇婇崼鏇炲耿婵°倕鍟伴幊鍡涙⒒娴ｄ警鐒鹃柨鏇樺妼閻ｇ兘宕归銈囧骄闂佸搫娲ㄩ崰鎾绘⒔閸曨垱鐓曟繛鎴烇公閸旂喖鏌涘锟藉褔鈥旈崘顔嘉ч柛鈩冪懃閳懓鈹戦埥鍡椾簼妞ゃ劌锕ら悾鐑筋敍閻愯尙楠囬柟鐓庣摠閹稿鎮樻笟锟藉娲閳轰胶妲ｉ梺鍛娒晶鑺ョ珶閺囥垺瀵犲瑙勭箓缂嶅﹪寮幇鏉跨倞闁靛鍎查悾顒勬⒒娴ｈ姤銆冪紒鑸垫皑缁寮介鐐舵憰闂佺粯姊婚崢褏绮堥崟顖涚厪闁割偅绻冮ˉ婊勩亜韫囥儲瀚�
	private boolean checkOnline(long roleId)
	{
		if(xtable.Roleonoffstate.get(roleId) == fire.pb.state.State.ENTRY_STATE)
			return true;
		else
			return false;
	}
	
	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傤槰缂備緡鍠栭惌鍌炲春閵夛箑绶為柟閭﹀墻濞煎﹪姊洪悙钘夊姎闁告ɑ鐗犻幃鐣岀磼濡偐鐦堥梺姹囧灲濞佳囧煝閸喓绠惧ù锝呭暱濞村倿寮崟顖涚厱闁斥晛鍟伴埦渚�鏌涚�ｎ亜锟藉潡寮婚敓鐘茬倞闁靛鍎虫禒楣冩⒑缂佹ɑ灏柛搴ｆ暬瀵鏁撻悩鑼紲濠电偞鍨堕敃鈺呭吹鐎ｎ喗鈷戦悹鍥ｏ拷宕囦哗闂佺粯顨呭Λ婵嬪春閻愬搫绠ｉ柨鏃傜帛閺呪晠姊虹紒妯诲碍闁告垳绮欓獮蹇旑槹鎼淬垹鏋傞梺鍛婃处閸樻悂寮ㄩ搹顐ょ瘈闁汇垽娼у瓭闁诲孩鍑归崢楣冩晸閼恒儳顣叉慨妯稿姂楠炲骞栨担鍛婎棟濠电偛妫楁晶浠嬫晸閸婄喎鐓愰柕鍥у瀵挳顢旈崨顓т紦闂傚倷娴囬鏍窗濡ゅ懌锟藉啯绻濋崶褏鐣烘繛瀵稿Т椤戝棝藟閸喓绠鹃柟瀵镐紳閼测晛鍨濇い鏍ㄧ◥缁诲棝鏌ｉ幇鍏哥盎闁跨喕濮ら悧鐘荤嵁閹版澘绠瑰ù锝堝�借缁辨帞锟斤綆鍘界涵鍫曟煛閸☆厾鐣甸柡宀嬬秮瀵噣宕掑Δ浣哥彵闂備浇妗ㄧ粈渚�鏁冮鍫濊摕闁挎繂顦粻濠氭煣韫囷絽浜濈�规洘濞婂鐑樺濞嗘垹袦婵炲瓨绮忓▔娑綖韫囨梻绡�婵﹩鍓涢敍婊冣攽閻愬弶顥為柛鈺佺墕鍗辨い鏇嫹闁哄矉缍�缁犳盯骞橀崜渚囧敹闂備胶顢婂▍鏇㈡晝閵忋倖鍋樻い鏃囨硶閻わ拷濠电偞鍨堕悷锕�鈻嶉姀銈嗏拺閻犳亽鍔屽▍鎰版煙閸戙倖瀚�?
	private boolean checkApplierNotInTeam(long applierRoleId)
	{
		if(xtable.Roleid2teamid.get(applierRoleId) == null)
			return true;
		else
			return false;
	}
	
	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒婊堟煏閸℃ê绗掓い顐ｇ箞椤㈡顦抽柣銈勭窔閹鎲撮崟顒傗敍缂備焦鐓＄粻鏍嵁閸℃稑绫嶉柛顐ｇ箘閸旀悂姊洪棃娑辨▓闁搞劌纾划鏃堫敊閹惧懏瀚归悷娆忓缁岃法绱掔紒妯肩疄妤犵偛鍟～婊堟晸娴犲绠犻柨鐔哄Т鍥撮梺绯曞墲椤ㄥ棝鎮鹃浣风箚闁绘劦浜滈敓濮愬�濆畷銏ｃ亹閹烘垹顦梺鐟扮摠缁诲嫰寮抽敂鑺ュ弿婵°倕顑嗙�氬綊姊虹化鏇熸澒闁告挻绻堥獮蹇涘川椤栨稑鏋傞梺鍛婃处閸撴岸顢欓崘顔解拻闁稿本鑹鹃敓鑺ユ倐瀹曟劙鎮滈懞銉ユ畱闂佸壊鍋呭ú宥夋晸閺傘倗鐣电�规洖銈告慨锟介柍銉ュ暱缁ㄣ儵姊绘担渚敯闁规椿浜浠嬪礋椤栨氨鏌у┑鐘绘涧椤戝棝鎮¤箛娑氬彄闁搞儜灞藉壈闂佽法鍠曟慨銈吤哄鍛灊濠电姵鑹鹃崘锟藉銈嗘尵閸犳捇宕㈡禒瀣拺闁圭娴风粻鎾绘煙閾忣偄濮嶉柟顔惧仱瀹曠螖娴ｅ搫骞嶅┑锛勫仜椤戝懏顨ラ幖浣稿偍閻庣敻娼婚幏椋庢喆閸曨剛顦梺绋跨箲閿曘垽濡存担鍓叉建闁跨喍绮欓獮鍐煥閸繂鑰垮銈嗘尵閸犲酣顢旈崼鏇熷�甸柣褍鎲＄�氬綊姊洪崨濠冨闁告挻鐩畷銏ゆ焼瀹ュ棌鎷洪梻鍌氱墛缁嬫挻鏅堕弴鐔虹閻忕偛鍊搁敓鑺ョ墱缁骞掗弴銊π紓鍌欐祰妞村摜鏁Δ锟介…鍥疀濞戞鈺呮煥閺囶亝瀚归梻鍌氼槸缁夌懓顫忓ú顏呭仭闁哄瀵т簺闂備胶顢婂▍鏇㈠礉濡ゅ懎绀嗛柟鐑樺灍閺嬪酣鐓崶褝鏀婚柣搴☆煼濮婃椽宕ㄦ繝鍕櫍闂佺楠哥壕顓熺珶閺囥垹绠氱憸澶愬绩娴犲鐓熸俊顖氱仢閻ㄧ儤淇婇銏狀伃闁哄本娲熷畷鐓庘攽鐎ｇ鎷峰Δ浣虹闁割偆鍠撶粻妯肩磼鏉堛劍灏伴柟宄版嚇瀹曨偊宕熼幋顖滅М闁哄瞼鍠栭幃鐑芥偋閸繃鐏庨梻浣虹帛娓氭宕抽敐鍛殾闁告鍋愬Σ鍫熶繆椤栨壕鎷℃俊鑼娣囧﹪鎮欓鍕舵嫹閺嶎灛娑欑瑹閿熻棄鐣烽幋锕�绠涢柛蹇ｅ亜濞差厼顕ｇ捄琛℃瀻闁绘劦鍓欓惁婊堟⒒娓氾拷濞佳囨偋閸℃あ娑樷枎閹存粎鍓ㄩ梺姹囧灩閹诧繝鎮￠弴鐐╂斀闁绘ɑ鐓￠妤�霉濠婏拷閸楁娊寮婚埄鍐╁缂佸瀵у▓濠氭倵鐟欏嫭绀冮悽顖涘浮閸┿儲寰勬繝搴㈠兊濡炪倖甯幏椋庣磼閻橆喖鍔氶柍瑙勫灴閺佸秹宕熼鈩冩線闂備胶顭堥敃銉╂偋閻樿尙鏆︾憸鐗堝笚閸嬪倿骞栫�涙〞鎴︽倶閸愵喗鈷戦柛婵嗗瀹告繂鈹戦锟介弨閬嶅Φ濞嗘挸绠柣锝呰嫰瑜板嫰姊洪幖鐐插姌闁告柨绉剁划鍫ュ醇閵忋垺锛忛梺璇″瀻娴ｉ晲鍒掗柣搴㈩問閸犳牠鎮ラ悡搴ｆ殾闁绘挸瀵掑鈺傘亜閹捐泛鏋旂憸鏉挎濮婄粯鎷呴崨濠冨創濠碘槅鍋掗崣鍐ㄧ暦濠婂牊鍋勯柣鎾虫唉閹芥洟姊洪弬銉︽珔闁哥噥鍨遍崚濠囧箻椤旂晫鍘卞┑鐘绘涧鐎氼剟宕滈崜褎鍠愰煫鍥ㄧ♁閺呮悂鏌涙繝鍕珡婵炲吋鍔栫换娑㈠矗婢跺苯鈷屾繝纰橈拷宕囧煟鐎规洏鍔嶇换婵囨媴閾忓湱鏆伴梻鍌欒兌缁垶宕硅ぐ鎺撳仱闁哄啫鐗嗛弸浣糕攽閻樺弶澶勯柣鎾寸洴閺屾稓浠︽稊鍜佷邯閺佹捇鎳為妷顔界暭缂備緡鍠栭悧鎾崇暦濮楋拷椤㈡瑧鎲撮敐鍡楊伜婵犵數鍋犻幓顏嗙礊閿熻姤淇婇銏狀伃鐎规洏鍎撮妵鎰板箳閹捐泛骞堥梺璇插嚱缂嶅棝宕滃▎鎰浄鐟滃繒妲愰幒妤婃晩闁伙絽鏈崳鏉课旈悩闈涗粶妞ゆ垵顦靛顐﹀磼閻愭潙鐧勬繝銏ｆ硾閿曘倝藟濡や胶绡�闁汇垽娼цⅷ闂佹悶鍔庨崢褔鍩㈤弬搴撴闁靛繒濮撮悵妯侯渻閵堝棗绗掗悗姘憸缁辩偤寮介鐔哄幐闂佹悶鍎弲娑㈠几閺冨倻纾奸柍钘夋噺鐎氬綊姊婚崒姘拷鎼佸磹閹间焦鍋嬪┑鐘插閻瑩鏌熼幆褏鎽犳繛鍛У缁绘盯骞嬮悙闈涙殹闂佸湱鍏橀ˉ鎾诲箟閹绢喖绀嬫い鎺戝亞濡差剚淇婇悙顏勶拷褎淇婇崶顒�鏋侀悹鍥ф▕閸ゆ洖鈹戦悩宕囶暡闁稿瀚伴弻锝咁潩椤掑倹鎲奸柣搴亢椤鎹㈠☉銏犵闁绘劕鐏氶崳浠嬫⒑缂佹ê绗ч柡鍜佸亞濡叉劙骞掑Δ浣镐汗閻庤娲栧ú銈夛綖瑜忕槐鎾存媴閾忕懓绗￠梺鐑╂櫓閸ㄤ即鎮鹃悜钘壩╅柍鍝勶攻閺咃綁姊虹紒姗堣�挎繛浣冲嫭鍙忛梺顒�绉甸埛鎺懨归敐鍛暈闁诡垰鐗撻幃璺侯潩閻撳簼鍠婇悗瑙勬礃缁诲倿鎮惧┑瀣妞ゆ劑鍊曞銊モ攽閻橆喖鐏辨繛澶嬬閻у矂姊虹紒妯活梿婵炲拑绲挎竟鏇㈠礂闂傚绠氬銈嗙墬缁诲秹宕靛▎鎰╀簻闊洤楠稿畵鍡樻叏婵犲偆鐓肩�规洘甯掗埢搴ㄥ箳閹存繂鑵愰梻鍌欒兌椤㈠﹤鈻嶉弴銏犵闁归棿绶￠弫瀣煥濠靛棭妲哥紒锟介崼婢濆綊鏁愰崶鍓佸姼闂佽绻愰敃顏勵潖閾忚鍠嗛柛鏇ㄥ亞椤︺劑鎮楃憴鍕婵炰匠鍥ㄥ仼闁割煈鍋呮刊鎾⒑椤愶絿銆掔紒鐘冲哺濮婃椽妫冨☉姘暫闁诲孩鍑归崹璺虹暦濡わ拷閻ｆ繈鏁撻悾灞绢潟闁圭儤顨呴悡锟犳煕濞戝崬鏋涙い蹇撶埣濮婂宕掑顒婃嫹閹间讲锟斤箓顢楅崟顐わ紱闂佸憡娲﹂崐瀣洪鍛珖闂佽法鍠撻弲顐﹀矗閸涱厸鏀介柣妯款嚋瀹搞儵鏌ｉ幘鎰佺吋鐎规洖鐖奸、妤佸緞鐎ｎ偅鐝ㄩ梻鍌欐祰濞夋洟宕伴弴鐐嶆盯宕熼銈囩◤闂婎偄娲︾粙鎺楀箚閻愮儤鍋℃繛鍡楃箰椤忊晠鏌涘Ο铏圭Ш婵﹥妞藉畷銊︾節娴ｈ櫣绠掗梻浣规偠閸斿宕￠幎钘夌畺鐟滃秹锝炲┑瀣殝缁剧増蓱鐎氳偐绱撻崒娆戭槮妞ゆ垵妫濋、鏍р枎閹炬潙浜楀銈嗘尪閸ㄦ椽鎮″▎鎾寸厱闁瑰瓨鐟ラ敓鑺ョ墱閿熻姤鐔幏锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柟闂寸绾惧鏌ｅΟ娆惧殭缂佺姴鐏氶妵鍕疀閹炬惌妫ょ紓渚婃嫹濠电姴娲﹂悡銉╂煟閺冨浂鍤欑悮姘辩磽娴ｈ櫣甯涢柣鈺婂灠閻ｇ兘顢旈崼婵堫槰濡炪倕绻愰弻濠傤煥閸忕偓妫冮幃鈺呮濞戞鍕冮梻浣虹帛椤ㄥ牊绻涢敓鑺ヮ殽閻愭彃鏆ｉ柛鈺佸瀹曟﹢鍩℃担绋课ゅ┑鐘殿暯濡插懘宕归崡鐑嗘富闁割煈鍣悞浠嬫煛閸愩劎澧涢柍閿嬪笒闇夐柨婵嗘川閹藉倹绻涢崗鐓庡闁哄本绋掗幆鏃堟晬閸曞墎绀婂┑鐘灱椤煤閻旂锟戒礁顫滈敓浠嬪箖濞嗘埊鎷峰☉娆樼劷婵″弶鍨垮濠氬磼濮橆剨鎷烽幖浣哥９闁绘垼濮ら崵鍕煕椤愶絾纾甸柨鐔告灮缁犳挸鐣锋總绋款潊闁炽儱鍟跨花銉╂⒒娴ｄ警鏀伴柟娲讳邯閹虫瑨銇愰幒鎾存闂佸搫鍊堕崐妤呮偩閻㈢鎷风憴鍕闁绘牕銈稿畷娲晸閻樿尙锛滈梺闈涚墕濡稓绮欓幇鐗堚拻闁稿本鐟чˇ锔界節閿熶粙鏌嗗鍛紵闂侀潧鐗嗛ˇ顓㈡晸閽樺鏆ｇ�规洏鍔戦、娑橆煥閸涱垰濮搁梻浣筋嚙閸戠晫绱為崱娑樼；濞达絽婀遍々鍙夌節婵犲倻澧涢柣鎾寸〒閿熻棄绠嶉崕閬嶅疮椤愶絼绻嗗┑鍌氭啞閻撴洟鏌曟繛鍨拷妤冪玻閺冨牊鐓涚�癸拷鐎ｎ剛鐦堥悗瑙勬礀閻栧吋淇婇悜钘壩ㄧ憸宀勬儉椤忓牊鈷掑ù锝堟鐢盯鏌熺粙璺ㄥ煟鐎规洘娲熼幃鐣岀矙閼愁垱鎲伴梻渚�娼ц墝闁哄懏绮撳畷鎴﹀幢濞戞瑧鍘遍柣蹇曞仜婢т粙鍩ユ径瀣ㄤ簻闊洢鍎茬�氾拷?
	private boolean checkApplierStatusValid(long applierRoleId)
	{
		BuffAgent buffagent = new BuffRoleImpl(applierRoleId,true);
		if(!buffagent.canAddBuff(BuffConstant.StateType.STATE_TEAM))
		{
			TeamManager.logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯骞橀懠顒夋М闂佹悶鍔嶇换鍐Φ閸曨垰鍐�闁靛ě渚婃嫹閹烘鐓熸繝闈涙閸╋綁鏌″畝瀣瘈鐎规洖鐖兼俊鐑藉Ψ瑜岄幃锝夋⒒娴ｅ湱婀介柛濠冾殜瀹曟垿骞橀懜闈涘簥濠电偞鍨崹鍦不閿濆棛绠鹃柛鈩冾殘缁犳娊鏌涢弮锟介幐鍐差潖閻戞ɑ濮滈柟娈垮櫘濡差噣姊洪幐搴㈠濞存粠浜滈锝嗙節濮橆儵鈺呮煃閸濆嫬锟藉憡绂嶉悙鐑樷拺缂佸瀵у﹢鎵磼鐎ｎ偄鐏存い銏℃閺佹捇鏁撻敓锟�(roleId=" + applierRoleId+")濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻愰湁闁稿繐鍚嬬紞鎴︽煕閵娿儱锟藉潡寮婚敐澶婄鐎规洖娲ら崫娲⒑閸濆嫷鍎愰柣妤侇殘閹广垹鈽夐姀鐘殿吅闂佺粯鍔欏褔寮抽敓鐘斥拺闁荤喐婢樺Σ濠氭煕閵忥紕鍙�闁挎繄鍋涢埞鎴狅拷锝庡亐閹峰鏌ｆ惔銊︽锭闁硅绻濆鍙夌附閸涘ň鎷绘繛杈剧悼椤牓骞冮幋鐐扮箚闁绘劘娉涜缂備礁鍊哥粔鐟扮暦婵傜鍗虫慨妤�鐗婄�氱懓霉閿濆牆锟戒粙寮敓浠嬪箯閸涘瓨鍋￠梺顓ㄨ閹风兘骞樼紒妯煎幗闂佺粯鍔曢顓㈠煝閹剧粯鐓曢柟鎯ь嚟缁犵偤鏌熼鏂よ�跨�规洘锕㈤、娆撴偩鐏炶棄绠洪梻浣侯攰婢瑰牓骞撻鍡橆潟闁哄洢鍨洪崑鈺傘亜閹惧崬鐏柣鎾存礋楠炴牕菐椤掞拷婵℃椽鏌熼弻銉х暫闁哄瞼鍠栭、娆撳Ω閵夛附鎮欏Δ鐘靛亼閸ㄨ櫣鎹㈠☉銏犵闁诲繑妞挎禍顏勭暦閹存繍鍚嬪璺侯儑閸樹粙鏌熼崗鑲╂殬闁告柨绉撮埥澶庮樄闁哄瞼鍠栭幊鐐哄Ψ瑜忛悡鍌涚節閵忥綆娼愭繛鑼枛楠炴劖绻濋崘顏嗗骄濠电娀娼уΛ娑氱矓濞差亝鐓涘ù锝囨嚀婵秶锟借娲栭悥鐓庣暦濠婂嫭濯寸紒瀣櫇椤忓嫧鏀介柨娑樺娴滃ジ鏌涙繝鍐╃闂囧鎱ㄥΟ鎸庣【闁稿被鍔戦弻銈夊箒閹烘垵濮㈤梺宕囨嚀缁夋挳鍩為幋锔藉亹闁圭粯甯╂禒楣冩煟鎼淬垻顣叉慨妯稿姂楠炲顫㈠畝锟介悿锟藉┑鐐村灦閻熴儲绂掓總鍛娾拺婵懓娲ら悘鈺呮煙鐠囇呯瘈闁诡喒锟芥枼鏋庨柟鎵虫櫃缁ㄥ姊洪崫鍕犻柛鏂跨箲缁旂喎顫滈敓浠嬪蓟閿熺姴骞㈡い鎾跺У閸嬔囨⒑鐠恒劌鏋庨柨鐔烘櫕閸ｃ儱顭囬幇顓犵闁告瑥顦遍惌鎺旓拷瑙勬磻閸楀啿顕ｆ禒瀣垫晣婵犲﹥鍔栫�氱懓霉閿濆懎顥忔繛绗哄姂閺屻劑鎮㈤崜浣虹厯濡ょ姷鍋涢崯顐﹀煝鎼淬劌绠荤�规洖娲ㄩ弶鎼佹⒒娴ｅ憡鍟為柟鍝ュ厴閹虫宕奸弴鐐磋緢闂侀潧鐗嗛ˇ浼村煕閹达附鐓曟繝闈涙椤忣偊鏌ｈ箛娑楁喚闁哄本鐩幃鈺佺暦閸パ�鎷伴柣搴㈩問閸ｎ噣宕戞繝鍥╁祦婵☆垵鍋愮壕鍏间繆椤栨粎甯涙い蹇曞枛濮婄粯鎷呴懞銉с�婇梺闈╃秶缁犳捇鐛箛娑欐櫢闁跨噦鎷�?");
			return true;
		}
		return true;
	}
	
	
	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫熺矒閺岋紕浠﹂棃鈺傚闁归绀侀幃鎴︽煙閼测晞藟闁跨喕妫勭壕顓㈩敊閹邦厾绡�婵炲牆鐏濋弸锔姐亜椤愩埄妯�闁诡噯绻濋崹楣冨箛娴ｅ憡顓块梻浣稿閸嬪懎煤閺嶎厽鐓侀柛銉ｅ妽閸欏繑鎱ㄥΔ锟藉Λ妤呯嵁濡ゅ懏鐓熸繝闈涙川婢ц京绱掓潏銊ユ诞闁诡喗鐟╅、妤呮晸娴犲绀夐柕鍫濐槹閻撳繘鏌涢銈呮瀾闁稿﹥鍔楅敓鑺ヮ問閸犳盯顢氳閸┿儲寰勯幇顒夋綂闂佺粯蓱瑜板啰绮婇锟藉缁樼瑹閿熻棄顭囪閳ワ箓宕奸妷銉э紵闂佹儳娴氶崑鍡涖�呴柨瀣ㄤ簻闁规儳宕悘顏堟煕鐎ｎ剙校闁逛究鍔岄～婊堝幢濡わ拷缁犺崵绱撴担鍝勑ラ柛瀣ㄥ�濆濠氭偄绾拌鲸鏅╃紓浣圭☉椤戝棝鎮炬總鍛娾拺闁告縿鍎卞瓭闂佹寧娲忛崕閬嶎敋閵夆晛绀嬫い鎾卞妽鐎氬綊鏌ㄥ┑鍡欏嚬闁瑰弶鍎抽湁缁绢參鏀辩�氾拷?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯顢曢敐鍡欙紩闂佽法鍠愰弸鑽ょ不閹惧磭鏆﹀┑鍌滎焾椤懘鏌嶉妷銉ユ毐缂併劊鍎茬换婵嗩嚗闁垮绶查柨鐔虹崵閸パ咁唵闂佺粯鍨兼慨銈夋偂閸愵喗鍋ｉ柛銉簻閻ㄦ椽寮崼銉﹀�垫繛鍫濈仢閺嬬喖鏌熼崨濠傗枙妤犵偛鍟存慨锟介柕鍫濇噹缁愭稒绻濋悽闈浶㈤悗姘煎墯缁绘盯宕堕浣叉嫽闂佺鏈悷褔宕濆澶嬪�电紒妤佺☉閸樻儳煤椤忓嫮鍘搁梺鍛婁緱閸橀箖顢欓崱娑欌拻濞达絽鎽滄禒銏°亜閹存繂鏆炵紒鍌氱Т椤劑宕奸悢鍝勫箰闂備焦鎮堕崕鎻掞耿閸︻叀濮冲┑鍌氭啞閸婂灚鎱ㄥΟ鐓庝壕閻庢熬鎷�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴闇夐柨婵嗙墛閵嗗啴鏌ｉ幒鎴含闁哄本绋戦埥澶娾枎閹邦喚鈻忕紓鍌欒兌婵參宕归崼鏇炶摕闁靛ň鏅滈崑鍡涙煕鐏炲墽鈽夋い蹇ユ嫹?
	private boolean checkLeaderTeamFuncEnable(long leaderRoleId)
	{
//		if(fire.pb.SystemSettingConfig.checkRoleSetting(leaderRoleId, fire.pb.SysSetType.AcceptTeam)<=0)
//			return false;
//		else
			return true;
	}
	
	private boolean checkTeamFilter(Team team, long roleId)
	{
		TeamFilter filter = team.getFilter();
		if(filter == null)
			return true;
		return filter.checkRequestJoin(team.getTeamLeaderId(), roleId);
	}
	
	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顕�姊哄Ч鍥э拷銈夊窗閺嶎厽绠掗梻浣侯焾缁绘劙宕ョ�ｎ剛绀婇柟瀵稿Х绾惧ジ鏌熼柇锕�寮炬繛鍫燂耿閺屻劑鎮㈢紒姗嗘缂備胶濮寸粔鐟扮暦閺囥垹纭�闁诲繒绮浠嬪极閸愵喖纾奸柨鏂垮⒔閳笺倝姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍛簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鈷戞い鎾卞妿閻ｅ崬顭胯椤兘寮诲☉銏犖ч柛銉戝嫮锟介箖姊洪棃娑欐悙閻庢矮鍗冲畷娲晸閻樿尙锛滃┑鐘诧工閸燁偆绱掗埡鍛拻濞达絽鎲￠幆鍫ユ煟椤撶儐妲虹紒杈╁仦缁楃喖鏁撴禒瀣仒妞ゆ梹鎷濋幏鐑芥晲鎼粹剝鐏嶉梺绋匡功閸忔﹢寮诲☉銏犵労闁稿繒濯禍顏堝箖濮楋拷婵＄兘鍩￠崒婊冨笚缂傚倸鍊烽悞锕佹懌閻庤娲栭惉濂告晸閸婄噥娼愭繛鍙夌墵婵″墎绮欏▎鎯ф闂佸湱铏庨崰妤呭磻閸曨垱鐓曟繝闈涙椤忊晝绱掗悩鍗炲祮婵﹤顭峰畷鎺戔枎閹搭厽袦濠电姰鍨婚幊鎾绘晝椤忓嫮鏆﹂柟杈剧畱缁犺櫕淇婇妶蹇斿缂佺偓鍎抽…鐑藉蓟濞戞矮娌柛鎾楀懐鍘斿┑鐘愁問閸犳绻涙繝鍥ц摕闁靛牆鎮块崷顓ㄦ嫹閿濆骸浜濋柣婵勫姂濮婃椽鎮烽弶鎸幮╅梺鎼炲灪閻擄繝宕洪姀銈呯閻犲洦褰冮悗顓烆渻閵堝棙顥嗗┑顔哄�濋、娆撳礋椤栨稈鎷绘繛杈剧秬椤宕戦悩缁樼厱閹兼惌鍠栭悘锔撅拷瑙勬礃缁诲倿顢樻總绋垮窛妞ゅ繐鎳愰敓鑺ユそ濮婅櫣鎹勯妸銉︾彚闂佺懓鍤栭幏锟�?
	private boolean checkTeamNotFull(Team team)
	{
		if(team.getTeamInfo().getMembers().size() < TeamManager.MAX_MEMBER_COUNT)
			return true;
		else
			return false;
	}
	
	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛濠傛健閺屻劑寮撮悙璇ф嫹瑜版帒纾块柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘鐓曢柕濞垮劚閿熻棄顭烽獮澶愬箹娴ｇ懓浜遍梺鍓插亝缁诲嫰鎮烽弻銉︹拺缂佸顑欓崕娑樏瑰搴濋偗鐎殿喛顕ч埥澶愬閻樻牓鍔嶉妵鍕籍閸屾艾浠橀梺鎶芥敱鐢�愁潖閻戞ɑ濮滈柟娈垮櫘濡差喖顪冮妶鍡楃仴婵☆偅绻冩穱濠囨偨缁嬭法顦板銈嗙墬濮樸劑顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘电磼鐠囪尙校缂佸倹甯楅妶锝夊礃閳圭偓瀚奸梻浣侯攰閸嬫劙宕戝☉銏℃櫢缂佹劖鐗曞ú銈囩不椤栫偞鐓熼柟杈剧到琚氶梺鎶芥敱鐢帡婀侀梺鎸庣箓閹冲繘宕悙鐑樼厱闁绘柨鎼禒褏绱掓潏銊ョ闁跨喐鏋荤紞鍡涘磻閸涱垯鐒婂ù鐓庣摠閻撴盯鏌涘☉姘暭缁绢參绠栭幗鍫曞冀椤撶喓鍘遍梺鍝勬处椤ㄥ棗鈻嶉崘鈺傚弿閻熸瑥瀚峰▓婊堟煙椤旂厧妲绘い顓滃姂瀹曠喖顢楁径瀣垫闂佽瀛╅鏍窗濞戙埄鏁嬬憸鏃堝春閵夛箑绶為柟閭﹀墻濞煎﹪姊虹紒妯曟垿顢欓弽顓炶埞婵炲樊浜濋悡鐔煎箹鏉堝墽纾块柣锝庡弮閺屾稒鎯旈妸銈嗗枤濡ょ姷鍋涢敃銉╁箚閺冨牊鏅查柛銉㈡櫇閸斿憡淇婇悙顏勶拷鏍蓟閵娾晜鍎嶉柣鎴ｆ缂佲晛霉閻樺樊鍎愰柍閿嬫閺屾盯濡烽鐓庘拻闂佽桨绀侀鍡欐崲濠靛洨绡�闁稿本绮岄·锟介梻浣瑰▕閺�鍗炍涢崘顔艰摕婵炴垯鍨归崡鎶芥煏婵炲灝鍔氬ù鐓庨叄濮婇缚銇愰幒婵囶棖闂佺绻戦敃銏ょ嵁閸愨晝顩烽悗锝庡亽濡啫鈹戦悙鏉戠仸閻绱掗鍛仭濞ｅ洤锕幃娆擃敂閸曡埖瀚归柡宥庡幖缁犱即鏌熼梻瀵割槮閸ュ绱撴担鍓插創婵炲娲熷鎶芥晝閸屾稓鍘卞銈嗗姧缁茬偓寰勯崟顖涚厸濞达絽鎲￠ˉ銏ゆ煛鐏炲墽銆掑ù鐙呯畵閹瑩顢楅崒娑卞悋濠碉紕鍋戦崐褏锟介潧鐭傚畷锝夊礃椤垶缍庢繝鐢靛У閼瑰墽澹曢崗鑲╃闁糕剝锚閻掔偓淇婂顔兼珝婵﹨娅ｅ☉鐢稿椽娴ｅ憡鐤傜紓鍌欐祰妞寸煤閻斿鍤曟い鎰跺瘜閺佸鏌ㄩ悢鍓佺煓鐎规洘妞介弫鎾绘偐閹绘帞鐛╂俊鐐�栭幐鐐垔鐎靛憡顫曢柛妤冨亹閺�浠嬫煟濮楀棗鏋涢柣蹇涗憾閺屾盯鍩￠崒婊冣拰閻庤娲樼换鍫ョ嵁鐎ｎ喗鏅滈柤鎭掑劜椤忕喖姊绘担钘壭撻柨姘亜閿斿灝宓嗙�规洜鏁诲畷鍫曨敆娴ｅ搫骞愬┑鐐舵彧缁插潡鈥﹂崼銉ユ辈闁挎繂顦伴悡娑樏归敐鍫綈鐎规洖鐭傞弻鐔风暦閸パ傛婵犵绱曢崗姗�寮崒鐐村仼閻忕偟鏅粙鍥⒒閸屾艾锟芥悂宕愰幖浣哥９闁绘垼濮ら崵鍕煕椤愶絾纾甸柨鐔告灮缁犳挸鐣锋總绋课ㄩ柨鏇嫹闁告捁顫夌换婵嬪閿濆棛銆愬銈嗗灥鐎氼噣骞戦姀銈呭耿婵炴垶鐟ч崢閬嶆⒑闂堟侗妯堥柛鐘崇墬閺呭爼顢氶敓浠嬪箖瀹勬壋鏋庢繛鍡樺灩閺嗐倝姊洪崫鍕潶闁告梹鍨块獮鍐Χ婢跺﹦锛滃┑鐐村灦閿曗晜瀵奸敓锟�
	private boolean checkLevelRequirementValid(Team team, long applierRoleId)
	{
		//xbean.TeamInfo team = xtable.Team.get(teamId);
		int applierLevel = xtable.Properties.get(applierRoleId).getLevel();
		if(applierLevel >= team.getTeamInfo().getMinlevel() && applierLevel <= team.getTeamInfo().getMaxlevel())
			return true;
		else
			return false;
	}
	
	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 794449;

	public int getType() {
		return 794449;
	}

	public long roleid; // 别人队伍的队长ID

	public CRequestJoinTeam() {
	}

	public CRequestJoinTeam(long _roleid_) {
		this.roleid = _roleid_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(roleid);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		roleid = _os_.unmarshal_long();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CRequestJoinTeam) {
			CRequestJoinTeam _o_ = (CRequestJoinTeam)_o1_;
			if (roleid != _o_.roleid) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)roleid;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(roleid).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CRequestJoinTeam _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(roleid - _o_.roleid);
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

