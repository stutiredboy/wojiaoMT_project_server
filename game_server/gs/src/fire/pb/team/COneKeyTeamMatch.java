
package fire.pb.team;
import java.util.Arrays;

import fire.pb.fushi.DayPayManager;
import fire.pb.main.ConfigManager;
import fire.pb.talk.ChatChannel;
import fire.pb.talk.ChatMsgId;
import fire.pb.talk.LastChatTime;
import fire.pb.talk.MessageMgr;
import fire.pb.util.FireProp;


// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __COneKeyTeamMatch__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/***
 * 濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柛婵嗗椤忋儵鏌涙惔銊ゆ喚闁糕晝鍋ら獮瀣晜閽樺姹楅梻浣告啞閻熴儵藝娴兼潙绠栨繛鍡樺灩绾捐棄霉閿濆懏鎯堟い搴＄焸閺屾盯濡搁妷褍鐓熼悗娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭花浠嬫⒒娴ｄ警鐒鹃柡鍫墰缁瑩骞嬮敂缁樻櫆闂佽法鍣﹂幏锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鏁愭径濠勵吅闂佹寧绻傞幉娑㈠箻缂佹鍘辨繝鐢靛Т閸婂綊宕戦妷鈺傜厸閻忕偠顕ф慨鍌滐拷娈垮枟閹告娊骞冨▎鎾跺彄妞ゆ挾濮甸弲濂告⒒閸屾瑦绁版俊妞煎妿缁牊鎷呴悮瀛樺婵鍘ч獮姗�鏌熼獮鍨仼闁宠棄顦垫慨锟介柣妯垮蔼閿熻棄鐏濋埞鎴﹀煡閸℃浠村銈嗘肠閸涱厽鐎抽悗骞垮劚濞层劎澹曢挊澹濆綊鏁愰崶銊ユ畬婵犳鍠栭悧濠囧Φ閸曨垰惟闁靛鍨甸崥顐︽倵濞堝灝鏋涙い顓犲厴瀹曡銈ｉ崘銊х杸婵炶揪绲介幉锟犲磹椤栫偞鈷戠痪顓炴噹娴滃綊鎮跺☉鏍у姦闁轰焦鎹囬幐濠冨緞瀹�瀣婵＄偑鍊栧褰掑礉濞嗗浚娼栫紓浣股戞刊鎾煕濞戞﹫宸ラ柡鍡楃墦濮婃椽骞栭悙鎻掝潊濡炪値鍋勯ˇ閬嶅箲閵忕姭妲堥柕蹇婂墲濞呫垺绻涚�电孝妞ゆ垵妫濋幃鈥斥槈閵忊�筹拷鍫曟煟閹邦厼绲婚柍閿嬫⒐缁绘盯骞撻幒鏃�鎲奸梺闈涙搐鐎氱増鎱ㄩ敓浠嬫煃閳轰礁鏆熸い锔垮嵆濮婅櫣鎷犻垾铏亐闂佸搫鎳愭繛锟芥鐐诧躬閹晛煤缂佹ɑ娅堥梺鑽ゅУ娴滀粙宕濆澶嬫櫖闊洦绋掗埛鎺楁煕鐏炲墽鎳勭紒浣哄閵囧嫰寮撮崱妤佸珔闁瑰嘲鍢查埥澶愬箳閹惧褰嬮梻浣筋嚃閸犳捇宕规禒瀣拷浣肝旈崨顓狀槹濡炪倖鍔戦崐銈夊船閻㈠憡鈷掑ù锝堝Г绾爼鏌涢敐蹇曠暤妤犵偛绻橀弫鎾绘晸閿燂拷?
 * @author by changhao
 *
 */
public class COneKeyTeamMatch extends __COneKeyTeamMatch__ {
	@Override
	protected void process() {
		
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		/*闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柛銊ュ�歌灃闁挎繂鎳庨弳娆戠磼閻樺磭鈽夐棁澶愭煥濠靛棙鍣洪悹鎰剁磿缁辨帞锟斤絺鏅為崗宀�绱掓潏銊﹀磳鐎规洘甯掗～婵嬵敆婵犲啫顏堕梺缁樺灱婵倝宕愰崸妤佺叆闁哄洨鍋涢敓鐣屾暬閺佹捇寮妶鍥╂殼閻庤娲栭悥濂稿春閿熺姴绀冪憸蹇涙偡濠靛棌鏀介幒鎶藉磹瑜忓濠冪鐎ｎ亞鏌堝銈嗙墱閸嬬偤宕戦崒鐐寸厪濠㈣泛妫欏▍鍡涙煟閹捐泛鏋涢柡宀嬬節瀹曟帒顫濋崣妯挎婵＄偑鍊х徊鐐箾婵犲洤钃熼柨婵嗩樈閺佸洭鏌ｉ弮鍌氬妺闁革絼鍗冲娲传閸曨偒妲甸梺璺ㄥ枙濡嫮澹曢銏犳辈闁糕剝绋掗崐鐢告煥濠靛棝顎楀褌鍗抽弻锝夋晝閿熶粙鎮ч幘鎰佹綎闁绘垶蓱婵粓鏌熷▓鍨灈濠碘�茬矙濮婅櫣鎲撮崟顓熸啓閻庤娲滈弫鎼佸礆閹烘棑鎷烽敐搴℃灈缂佺姵濞婇弻锟犲礃閳哄倸闉嶉柣搴㈣壘缂嶅﹪寮婚妸銉㈡斀闁糕剝渚楅敓鑺ヮ殔闇夋繝濠傚缁犳牜绱掔紒妯兼创鐎规洏鍔戦、娆撳礈瑜忛崢婊勭節濞堝灝鏋涢柨鏇樺妼閳诲秹鏁愭径濠勵槺闂佸搫绋侀崢濂稿础閹惰姤鐓熼柟閭﹀幘閵堟挳鏌熼弸顐拷婵嗩潖缂佹ɑ濯撮柛娑橈工閺嗗牆鈹戦纭峰伐婵狅拷闁秴鏋佹い鏇嫹闁诡喗鐟╅幃婊兾熼悜妯兼瀫闂備礁鎼ˇ顖炴偋閸曨垰绀夐幖杈剧到婵剟鏌ㄩ悢缁橆棄闁宠鍨块、娆撳棘閵堝嫮杩旈梻浣告啞钃遍柟顔煎�块悰顔跨疀閹句焦妞介、鏃堝川椤忓懎顏归梻鍌欑閹诧紕绮欓幋锔芥櫇闁挎洖鍊搁悡鈥愁熆閼搁潧濮堥柣鎾卞劦閺岋繝宕堕張鐢电泿濡炪倐鏅╅崜娑氭閹烘鏁婄痪鎷屼含閸氬螖閻橀潧浠︽い顓炴川濡叉劙骞掗幊宕囧枛閹喚锟芥稒锚椤忓爼姊洪崜鑼帥闁稿鎳樺畷锝堢疀閺傚墽绠氬銈嗙墬缁瞼鏁崼鏇熷仺妞ゆ牗姘ㄩ崺锝夋煛瀹�瀣？闁跨喐鏋荤徊濠氬礉瀹�鍕櫢闁兼亽鍎崇粻鐐碉拷娈垮枦椤曆囧煡婢舵劕顫呴柍銉ュ帠濮规姊洪懡銈呅㈡繛澹洤骞㈡俊銈勭閸撶敻姊婚崒姘拷宄懊归崶褜娴栭柕濞炬櫆閸婂潡鏌ㄩ弴鐐诧拷鍝ョ不閺屻儲鐓曢柕澶樺枛婢ь噣鏌＄�ｂ晝绐旈柡宀�鍠栧畷婊嗩槾閻㈩垱鐩弻锟犲川椤旇棄锟芥劙鏌＄仦璇插闁诡喓鍊濆畷鎺戔槈濮楀棔绱� team->roleid->match by changhao*/
		mkdb.Procedure onekeyteammatch = new mkdb.Procedure()
		{
			@Override
			protected boolean process()
			{
				
				fire.pb.team.SOneKeyTeamMatch msg = new fire.pb.team.SOneKeyTeamMatch();
				if (channeltype != fire.pb.talk.ChannelType.CHANNEL_TEAM_APPLY &&
					channeltype != fire.pb.talk.ChannelType.CHANNEL_WORLD &&
					channeltype != fire.pb.talk.ChannelType.CHANNEL_CURRENT &&
					channeltype != fire.pb.talk.ChannelType.CHANNEL_CLAN)
				{
					msg.ret = 1;
					mkdb.Procedure.psendWhileCommit(roleid, msg);
					return false;
				}
				
				//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁橈耿瀵鏁愭径濠勵吅濠电姴鐏氶崝鏍礊濡ゅ懏鈷戦悹鎭掑妼閺嬫瑦淇婇銏狀伃鐎规洘鍔欏畷鐑筋敇閻樼數鍔归梻浣告贡閸庛倕螞閹达箑绠柣鎴ｅГ閺呮煡骞栫划鐧告嫹閼碱剙鍤┑鐘垫暩閸嬫盯骞婂畝鍕瀭闁芥ê顦藉鏍ㄧ箾瀹割喕绨奸柛銈呯Ч閺屾洘寰勬繝鍌涚亾婵炲瓨绮犳禍锝呂涢悢濂夋富闁靛牆妫涙晶閬嶆煕鐎ｎ偆鈽夐弫鍫ユ煛鐏炶鍔滈柍閿嬪灦閵囧嫰骞掗悙鏉戭伓缂傚倷绀侀ˇ閬嶅极婵犳艾绠栭柨鐔哄Т鍞梺鍐叉惈閸婂宕㈡禒瀣拺闁告繂瀚弳娆撴煕婵犲懎鍚归柡渚囧枛閳藉鈻庡鍕泿闂備線娼чˇ顓㈠磿閸濆嫀锝夋惞閸︻厾锛滈柡澶婄墑閸斿秶浜搁鐔翠簻闁瑰墽鍋ㄩ崑銏拷瑙勬处娴滎亜鐣峰锟介、姗�鎮欓弶鎴濆濠电姴鐥夐弶鍖℃嫹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋娆忕仼闁汇値鍠楅妵鍕箛閳轰礁濮㈡繛瀛樼矆缁瑥顫忓ú顏呭殥闁靛牆鎲涢姀锛勭婵炴潙顑嗗▍鍥瑰鍜佺劸闁宠閰ｉ獮瀣偐闂堟稓顔岄梻鍌欒兌缁垶宕濆Δ鍛？闁靛牆顦悡鏇㈡煙鐎电校闁哥姵鍔欓弻锝呂旈敓浠嬫偋閸℃瑧绠旈柟鐑樺殮閻熼偊鐓ラ柨鐔剁矙瀹曪繝骞庨挊澶庢憰濠电偞鍨崹鍦不婵犳碍鍊甸梻鍫熺♁閸熺偤鏌涢敍鍗炲枤濞撳鏌曢崼婵囶棡缂佸矁娉曠槐鎺楃叓椤撶姷鐓撻梺璇″櫍缁犳牠寮幘缁樺亹鐎规洖娲ゆ慨娲⒒娴ｇ懓顕滄俊顐＄铻為柛鏇ㄥ灡閸庡﹥绻濇繝鍌滃闁抽攱甯掗妴鎺戭潩閻愵剙顏舵繝鐢靛仒閸栫娀宕堕妸銉ょ綍闂備胶纭堕崜婵嬪Φ閸屾埃妲堟俊顖炴敱椤秴鈹戦悙鍙夘棡闁告梹鐗犻幃闈涚暋闁附瀵岄梺闈涚墕濡绮幒妤佸�垫慨妯煎帶瀵噣鏌熼鍡欑瘈闁诡喒鏅濈槐鎺懳熸潪鎵暰濠电姷鏁搁崑娑樜涘Δ鍐╁床闁逛即鍋婇弫鍌炴煃閸濆嫬鏆熺痪鎯с偢閺屻劑鎮㈤崜浣虹厯閻庤娲橀敃銏ゃ�佸▎鎾村仼閻忕偠妫勬俊鍥⒒閸屾瑧鍔嶉柟顔肩埣瀹曟洟顢涢悙鑼槷闁诲繒鍋熼崑鎾诲矗韫囨洩鎷烽獮鍨姎婵炴潙瀚伴獮蹇旑槹鎼淬垹鏋傞梺鍛婃处閸撴盯藝閵夆晜鍊甸悷娆忓婢跺嫰鏌涢幘璺烘灈闁搞劑绠栧顕�宕煎┑鍫О婵＄偑鍊栧濠氬储瑜嶉悾鐢稿幢濞戞瑢鎷虹紓鍌欑劍閿氬┑顔碱樀閺屸剝鎷呴崨濠傛殘濡炪們鍔嶉悷鈺侇潖閾忚瀚氶柛娆忣槸閺�顓烆渻閵堝骸浜滄い锔诲灣閸欏懎鈹戦绛嬫闁归鍏橀弻鏇㈠幢濡わ拷閺嗙偟绱掔紒妯肩疄鐎规洘鍎奸ˇ鎾煟閵堝懏鎼愰柍瑙勫灴閹晝绱掑Ο濠氭暘婵＄偑鍊栭崹鐢稿箠閹扮増鍎夋い蹇撴祩濡茶偐绱撴担铏瑰笡闁烩晩鍨伴悾鐑藉础閻愨晜鐎婚棅顐㈡搐妤犳悂藟濮橆厺绻嗛柣鎰典簻閿熻姤鍨垮畷鏇㈩敍閻愯尙锛欏┑鐘绘涧濡厼顭囬弽銊х鐎瑰壊鍠曠花濂告煕閵堝棗娴柡灞炬礋瀹曠厧鈹戦崶褎顏￠梻浣筋嚙妤犲憡鏅堕悾灞绢潟闁规儳顕悷褰掓煕閵夋垵瀚禍顏嗙磽閸屾瑧顦︽い锔垮嵆楠炴劙骞庨挊澶屼紜闂佹寧娲栭崐鎼佸垂閸屾稏浜滈柡鍥╁仦閸ｈ櫣锟界偣鍊栧钘夘潖閾忚宕夐柕濞垮劜閻忓棗鈹戦埥鍡椾簻閻庢矮鍗抽獮鍐┿偅閸愨晛锟藉鏌﹀Ο渚Ш闁汇倧鎷烽梻鍌欑閹碱偊藝椤栨凹鐒介柨鐔哄Т閺嬩焦绻濇繝鍌氭殜闁猴拷娴犲绠抽柟鎯版绾惧湱鎲搁弮鍫㈠祦闊洦绋掗崐濠氭煠閹帒鍔ら柛娆忓暣濮婃椽宕ㄦ繝鍌毿曟繛瀛樼矋缁挸顕ｇ粙搴撴闁靛骏绱曢崢鎼佹煟韫囨洖浠滃褌绮欓崺銉﹀緞閹邦厾鍘撻梺鑺ッˇ钘壩熼敓浠嬫倵鐟欏嫭绌跨紒缁樼箞楠炲啫鈻庨幋顖涘闁汇垹鎲″▍婊冾熆鐟欏嫭绀嬫慨濠傤煼瀹曟帒鈻庨幇顔哄仒闁诲氦顫夊ú婊堝极鐠囪尙鏆﹀ù鍏兼綑缁犲鎮归崶顏勭毢闁汇倕娲铏规喆閸曨偆顦ㄥ銈嗘肠閸ャ劌浜楀┑顔筋殣閹风兘鏌″畝锟介崰鎰焽韫囨柣鍋呴柛鎰ㄦ櫓閿熻棄绉瑰铏圭矙濞嗘儳鍓遍梺鍛婃⒐閻熲晛顕ｆ繝姘亜闁惧繐婀遍敍婊冣攽閳藉棗鐏ユ俊妞煎姂瀹曟碍绻濋崘顏嗩啎闁诲骸鐏氶幃鍫曟晸閽樺鍎旀鐐茬箰閻ｏ繝骞嶉搹顐ｆ澑闂備焦瀵х粙鎴狅拷姘煎墯缁傚秵绺介崨濠勫幈婵犵數鍊崘鈺佺彅闂佸綊顥撻崗妯何涢崘銊㈡婵ê宕慨閬嶆煟鎼淬値娼愭繛鍙壣戠换娑欑節閸パ勭�梺鍦濠㈡ê顪冮挊澹濆綊鏁愰崨顔跨缂備礁顑勭欢姘潖缂佹ɑ濯撮柛娑橈工閺嗗牏绱撴担绛嬪殭闁稿﹤婀遍幑銏犫槈濞嗘垹鐦堥梺鎼炲劘閸斿秹宕曢鍫熺厽闁绘柨鎽滈幊鍐倵濮樼厧澧存い銏℃尭閳藉濮�閳ョ鎷烽悽鍛婂仭婵炲棗绻愰顏嗙磼閿熶粙鏁撻挊澶嗘斀闁绘劘灏欏﹢鎾煕閺傝法鐒搁柛鈹垮灲瀵噣宕煎┑鍫敹闂佸湱鍘ч悺銊ф崲閸曨厾涓嶆慨妯垮煐閳锋垹绱撴担濮戭亝鎱ㄩ敃锟介湁婵犲﹤瀚惌鎺楁煛娴ｈ宕岄柟宕囧仱婵＄柉顦查柍宄扮焸閹鎲撮崟顒傤槬缂傚倸绉撮敃銈堢亱闂佸憡鍔﹂悡浣姐亹閹烘埈娼婇梺鏂ユ櫅閸熴劍绂掗姀锛勭瘈鐎电増鐏氶崐鏇㈡偂閹邦噯鎷烽崹顐ｇ凡閻庢凹鍣ｉ弫鎾诲棘閵堝洨校闂佺顑呴幊姗�骞冮悽绋垮唨妞ゆ挾鍟块幏缁樼箾閹惧鍟查柟鐑芥敱缁绘稒鎷呴崘鍙夊櫤鐎规洘鐓￠弻娑㈩敃閻樻彃濮庣紒鐐劤缂嶅﹪寮婚敓鐘茬倞闁宠桨绀佹竟澶愭⒑閸濄儱鏋庨柟鍐茬箳閹广垹鈹戠�ｎ偒妫冨┑鐐村灥瀹曨剟宕滈柆宥嗏拺缂備焦蓱鐏忔壆绱掔�ｎ偄鐏撮柍銉閹瑰嫰濡搁敃锟界壕顖涚箾閹炬潙鍤柛銊ゅ嵆瀹曟粍瀵肩�涙ǚ鎷洪柣鐘叉穿鐏忔瑧绮婚悙鐑樼厱閹兼番鍨归埢鏇㈡煛娴ｈ宕岄柟宕囧仱婵＄兘顢欓崗鍏肩彵闂傚倷绀侀幗婊勬叏閻㈠憡鍋嬮柣妯垮皺閺嗭箓鏌＄仦璇插姎闁藉啰鍠栭弻鏇熷緞濡崵绐欓梺褰掝棑閸忔ê顕ｉ锟藉畷鐓庘攽閸偅袨濠碉紕鍋戦崐鏍蓟閵娿儙锝夊醇閿濆孩鈻岄梻浣告惈閺堫剟鎯勯鐐叉槬闁告洦鍨扮粈鍐┿亜韫囨挻鍣规繛鍛灦娣囧﹪鎮欓鍕舵嫹閵堝纾归柕鍫濐槸瀹告繃銇勯弽銊х幓缂佽鲸鐓″缁樻媴閾忕懓绗￠梺鍛婃缁犳挸鐣峰鍐炬僵閺夊牜鐓堥崑銊╂⒑閼测斁鎷￠柛鎾寸〒婢规洟鎮℃惔顔惧數闁荤姾娅ｉ崕銈咃耿娴煎瓨鐓曢柕鍫濈箲鐎氬綊姊婚崒娆愵樂缂侀硸鍠氬濠囧锤濡わ拷缁�鍌涗繆椤栨瑨顒熼柛銈嗘礋閺岀喓绱掗姀鐘崇亶闂佺顑呯�氫即寮昏缁犳盯骞樼壕瀣攨婵犵鍓濊ぐ鍐洪鐑嗘綎缂備焦蓱婵挳鎮峰▎蹇擃仼濞寸姭鏅犲铏圭矙閸喚妲伴梺鎼炲姀濞夋盯鎮惧畡鎵虫斀闁搞儯鍔岄崝鍛存⒑闂堟侗鐒鹃柛搴ㄤ憾瀹曟垵顓兼径瀣ф嫼閻熸粎澧楃敮妤呮晬閻斿吋鐓熼柟铏瑰仧閻ｇ敻鏌涢埡鍌滄创妤犵偛顑夐弫鍌炴偩鐏炶棄绠為梻鍌欑濠�閬嶅磻閹炬剚鐒芥繛鍡樺灥缁躲倝鎮归崶顏嶆⒖闁荤喖鍋婇悡銉╂煕閺囥劌骞橀柣锝堝亹缁辨挻鎷呮禒瀣懙闁汇埄鍨抽崑銈夌嵁韫囨稒鍋愮紓浣姑▓銈咁渻閵堝棗鐒鹃柛瀣╃窔瀹曞綊鎸婃径灞炬闂佽法鍠撴慨鐢告倿閼测晪鎷烽獮鍨姎婵☆偅鐩畷銏ゆ偨閸涘ň鎷婚梺绋挎湰閼归箖鏁撻懞銉﹀�愭い銏″哺椤㈡﹢濮�閻樻妲烽柣搴＄畭閸庨亶藝娴煎瓨鍋傞柣鏂垮悑閻撴瑩鏌熼鍡楁噺閹茶偐绱撴笟濠冨闂佸憡鍔︽禍鐐靛閼测晝纾藉ù锝堫嚃閻掕姤绻涢幓鎺濆殶闁跨喎锟界噥娼愭繛鍙夌墪閻ｇ兘顢楅崘顏冭埅闂傚倷绀侀幉锛勬崲閸屾粣鎷峰顒�妲绘い顓炴喘瀵噣宕掑鍜冪闯闂備胶顭堥張顒勬偡瑜忕划浣冪疀濞戞瑧鍘垫俊鐐差儏妤犳悂宕㈤幘顔界厸閻忕偛澧藉ú瀛橆殽閻愬弶鍠樻俊顐㈠暙閳藉鈻庨幋婊勫枤闂傚倸鍊烽懗鍫曗�﹂崼銉︽櫇闁挎洖鍊搁弸渚�鏌熼梻瀵稿妽闁稿骸顦伴妵鍕疀閹捐泛顣虹紓浣哄珡閸曨厾顔曢梺绯曞墲閻熴儲绂嶆ィ鍐ㄦ瀬闁割偁鍎查埛鎴︽偣閸ャ劌绲绘い鎺嬪灲閺岋綁寮幋婵嗏拫濡ょ姷鍋涚换姗�寮幘缁樻櫢闁跨噦鎷�? by changhao
				if (channeltype == fire.pb.talk.ChannelType.CHANNEL_CLAN)
				{
					xbean.Properties prop = xtable.Properties.select(roleid);
					if (prop != null)
					{
						if (prop.getClankey() <= 0)
						{
							MessageMgr.sendMsgNotify(roleid, 141053, null);	
							
							msg.ret = 1;
							mkdb.Procedure.psendWhileCommit(roleid, msg);
							return false;
						}
					}
				}
				
				Long teamid = xtable.Roleid2teamid.select(roleid);
				if (teamid == null)
				{
					psend(roleid, new STeamError(TeamError.SelfNOtLeader));
					TeamManager.logger.error("COneKeyTeamMatch:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎妯恍氶梻鍌欒兌椤牏鎮锕�绀夐幖娣妼缁犵喖鏌熼梻瀵割槮缂侇偄绉归弻娑㈩敃閿濆棗鍓烽梺闈涱槴閺呮粓鎮￠弴銏＄厵闁煎壊鍓欐俊鑺ョ箾閸涱厽顥㈤柡灞剧♁閹棃鏁愰崨顔句邯闂備礁鎼張顒�煤濠靛牏涓嶆繛鎴炵啲閹风兘鏁愭惔婵堟晼闂佸憡姊瑰娆撳煘閹达附鍊烽悹楦挎濮ｃ垹顪冮妶搴″箹闁绘鎹囧畷娲倷閸濆嫮顓洪梺鎸庢濡嫭绂嶈ぐ鎺撶厽闁绘ê寮堕崢鍌炴煕閹板苯鎳愰悡鎴︽⒒閸屾艾锟界兘鎳楅崼鏇炵疇闁规崘顕ч悿顕�鎮归幁鎺戝鐎规洘鐓￠弻鐔煎箥椤旂⒈鏆梺绋款儌閺呯娀寮婚敐澶婄闁挎繂妫Λ鍕磽娴ｅ搫啸闁轰礁顭峰濠氭偄閻戞ê鏋傞梺鍛婃礀閻忔岸鎮鹃崜浣虹＝闁稿本姘ㄥ瓭闂佹寧娲︽禍婊堫敋閿濆鏁冮柨鏇嫹缂佺姵鐩弻鈩冨緞婵犲嫪铏庣紓浣瑰姈缁嬫垿鈥旈崘顔嘉ч柛鈩冿供濮婂灝鈹戦悙宸Ч婵炶尙鍠栨俊瀛樼瑹閿熻棄鐣烽妸褝鎷峰☉娅辨岸骞忕紒妯肩閺夊牆澧介崚浼存煙閼恒儳鐭掗柡浣哥Т椤撳ジ宕堕埡鍐跨床婵＄偑鍊栧ú鏍箠鎼淬劍鍊堕柣妯煎仺娴滄粍銇勯幇鈺佺伄缂佺姾灏欑槐鎺旂磼濡偐鐣靛銈庡亝缁诲牓銆佸锟介幃銏ゅ礈闊厽鍩涢梻鍌氬�搁崐宄懊归崶銊﹀弿闁靛牆顦伴弲顏呬繆閻愵亜锟窖呯不閹惧顩查柛顐ｆ礀缁犳牕螖閿濆懎鏋ら柡浣告喘閺屾洝绠涢妷褏锛熼梺鍛婏耿娴滃爼寮婚悢鍏煎殐闁冲搫濯绘径鎰叆闁绘梻绮ˉ澶愭煟閵堝懏鍠樼�规洘妞介幃娆撴倻濡厧寮伴梻浣哄帶椤洟宕愰弴鐔侯浄闁挎柨澧界壕鑲╃磽娴ｈ鐒芥繛鎻掝嚟閿熷�燁潐濞叉牕鐣烽鍐航闂備焦鍎崇换姗�鏁撻懞銉р檨闁稿鎳樺濠氬磼濞嗘帒鍘￠梺纭呮珪閹瑰洤鐣烽鐐查敜婵°倧鎷风紒鐘靛У娣囧﹪顢涘▎鎺濆妳濠电偛鍚嬮悧鏇㈠煘閹达附鍋愰悗鍦Т椤ユ繄绱掗悙顒�鍔ら柛姘儔楠炲牓濡搁妷顔藉缓闂佺硶鍓濋〃鍛村煕閺囥垺鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柣娑卞櫍瀵粙濡搁敃锟介鎾绘⒑閸涘﹦缂氶柛搴ゅ吹濡叉劙顢氶敓钘夘潖缂佹ɑ濯撮柛婵勫劤妤旀繝纰樻閸嬪鈻旈弴鐘插灊闁割偆鍠撻悷褰掓煥閻斿墎鐭欐鐐插暣瀹曠螖婵犲啯娅撴繝鐢靛仦濞兼瑦顨ラ崫銉х濠电姴鍊婚弳锔戒繆閵堝懏鍣圭紒锟介崒鐐寸厾婵炴潙顑嗗▍鍥煃鐠囪尙绠崇紒杈ㄦ崌瀹曟帒鈻庨幋婵嗩瀴闂備礁鎲″褰掓偋閻樿违闁告劏鏅濈弧锟介梺鎼炲劀閸℃ɑ鍟洪梻鍌欒兌閸嬨劑宕曢弻銉ョ婵娉涚憴锕傛倵閿濆骸鏋涚紒鐘叉贡缁辨帡顢欓悙顒変户闂佺懓鍢查崲鏌ユ偩閻戣棄鐐婇悹铏瑰劋濞呭秴鈹戦悩鍨毄濠殿喚鏁婚、娆撳冀椤撶偟鐛ュ┑鐐村焾濠胶绱為弽褜鐔嗛柤鎼佹涧婵牓鏌涚�ｎ亜锟藉潡寮婚妸鈺傚亜闁告繂瀚呴姀銈嗙參闁告劦浜滈弸娑㈡煛鐏炵偓绀冪紒缁樼洴閹瑩顢楁担鍝勭稻闂傚倷鑳堕…鍫ヮ敄閸涱厙娑樷攽鐎ｎ亣鎽曞┑鐐村灦閻喖鈻介鍫熺厱闁圭偓顨愰幏閿嬩繆閹绘帞澧曟い顏勫暣婵″爼宕ㄧ�电妞介梻浣烘嚀閸ゆ牠骞忛敓锟� "+roleid);
					
					msg.ret = 1;
					mkdb.Procedure.psendWhileCommit(roleid, msg);
					return true;					
				}
				
				Team team = null;
				team = TeamManager.getTeamByTeamID(teamid);	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇洟姊绘担钘壭撻柨姘亜閿旇鏋ょ紒杈ㄦ瀵挳濮�閳撅拷閹风粯绻涙潏鍓хК婵炲拑缍佹俊瀛樼節閸ャ劎鍘遍梺瑙勫劤椤曨厾绮婚悙鐑樼厵闁芥ê顦敓钘夘煼閺佹捇寮妶鍥┬ｉ梺鍝ュУ閻楃娀骞冨▎鎰瘈闁告劧缂氱花濠氭⒑閻熺増鎯堢紒澶婂閹峰綊鎮ч崼婊呯畾濡炪倖鍔戦崹褰掑汲濞嗘挻鐓冮悷娆忓閻忔挳鏌熼鐣屾噧妞ゆ柨绻橀、娆撳礂绾板崬鏅欐繝纰夌磿閸嬫垿宕愰弽顐ｆ殰闁绘棁妗ㄩ悞濠冪箾閸℃ê鐏︽い顐ｆ礋閺岋綁骞囬澶婃闂佽崵鍠庣紞濠囧蓟閵娾晜鍋勭紓浣癸供濡嫬顪冮妶鍡樼┛缂傚秳绶氶妴渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐ゅ垝閸儱绀冮柍鐟般仒缁ㄥ姊洪崫鍕殭婵炲眰鍊栫粋宥堛亹閹烘挾鍙嗗┑鐐村灦閻熝囨儗婵犲洦鐓冮悷娆忓閻忓瓨銇勯姀锛勬噰鐎殿噮鍓熸俊鍫曞醇椤掍礁顏堕柣鐘充航閸斿骸螞椤栨稏浜滈柟鎹愭硾椤庡矂鏌ｉ幒妤冪暫鐎规洍鍓濆蹇涘Ω閿濆嫮鐩庨梻浣告惈缁嬩線宕戦崟顒傤浄闁挎洖鍊归悡鍐⒑閸噮鍎忕紒妤佸浮濡焦寰勯幇顓犲弳濠电娀娼уΛ娆戠矈閳哄懏鐓熼柟鐑樻煥娴滈箖鏌曢崶褍顏┑锛勫厴婵＄柉顦存い鏃�甯″娲传閸曨剚鎷辩紓浣割儐閹瑰洭寮幘璇叉闁靛牆娲ㄦ牎濠电偛鐡ㄧ划宥囨崲閸絾锛傞梻渚�娼уù姘熆娓氾拷楠炲繑顦版惔銏犳瀭闂佸憡娲﹂崜娑⑺囬鐔虹瘈闁冲嚖鎷烽柛鏇炵仛閻や礁螖閻橀潧浠滄俊顐ｇ箓椤曪綁顢氶敓钘夌暦閻撳簶鏀介柟閭﹀幘缁夐亶姊婚崒娆掑厡缂侇噮鍨甸幗顐︽偡濠婂嫭绶查柛鐔告尦閺佹劙鎮欑�靛摜鐦堥梺鎼炲劘閸斿骞忔繝姘拺缂佸瀵у﹢浼存煠瑜版帞鐣洪柡浣规崌閹崇偤濡烽敃锟介敓鑺ュ姉閿熷�燁潐濞叉﹢宕濆▎鎾跺祦闁哄秲鍔嶆刊鎾煕濠靛嫬鍔电紒槌栧櫍濮婄粯鎷呴崫銉ㄥ┑鈽嗗亯濞夋洜鍒掗崼鐔稿闁告繂瀚峰Λ婊堟偡濠婂懎顣奸悽顖涱殜閹�斥枎閹剧补鎷婚梺绋挎湰閸戝綊宕甸悢鎼炰簻闁挎棁鍋愰悾鐢告煛瀹�瀣М濠德ゅ煐閹棃鍩勯崘顏冮偗闂傚倸鍊稿ú銈壦囬悽绋胯摕婵炴垶绮庨悿锟介梺瑙勫礃濞呮洟宕愰婊呯＝闁稿本姘ㄦ牎闂佹悶鍔屽﹢鍗炍ｉ幇鏉跨婵°倧鎷风紒鐘崇♁閵囧嫰骞樺Δ锟界�氼噣寮抽銏♀拻濞达綀濮ょ涵鍫曟煕閻樿櫕绀�閾荤偤鏌涢弴銊ュ箻濞戞挸绉堕敓钘夌畭閸庨亶藝椤栨粌顥氶柛褎顨嗛悡鏇熶繆閵堝懎鏆曠紒杈珪缁绘稑顔忛鑽ゅ嚬闂佸搫鎳忕换鍫ュ蓟濞戞鏆嗛悗锝庝憾濞差厾绱撴担鍓插剰缂佺粯锚椤繐煤椤忓嫪绱堕梺鍛婃处閸撴瑩宕戝澶嬧拺闁硅偐鍋涙俊鑺ヤ繆閻愭壆鐭欐鐐插暣閺佹捇鎮╅崘韫盎闂備胶顭堢换妤呭磻閹版澘鍌ㄩ柣銏犳啞閳锋帒銆掑顒佹悙鐎殿喛娉曠槐鎺楁偐閸愯尙浼岄悗娈垮枤椤牓鍩ユ径鎰潊闁挎稑瀚獮鍫ユ⒒娴ｅ憡鎯堥柛濠傜秺椤㈡牕鈻庨幘宕囷紵闂佸搫鍟悧濠囨偂濞戞熬鎷烽惂鍛婂闁诲函缍嗛崜娑溾叺濠德板�楁慨鐑藉磻閻愮儤鏅濋柕蹇曞Х閺嗭箓鏌ㄩ悢鍝勑ｉ柛濠勫厴閺岀喓绱掑Ο杞板垔濠电偛鍚嬮惄顖氼潖婵犳艾纾兼慨姗嗗墾閹烽绮欏Λ鍨そ婵¤埖绔熼敃锟藉ú顓㈠箖閻ｅ瞼鐭欓柤鎰佸灡閹蹭即姊绘笟锟藉褔鈥﹂崼銉ョ？妞ゆ洩鎷风�殿喓鍔嶇粋鎺旓拷锝庡亞閸橀亶姊洪搹顐ｅ珪闁归鍏橀弻锟犲川椤斿墽鐓夐梺绯曟杺閸ㄤ粙鐛锟藉顒勫Ψ閿旇姤婢戦梻鍌欑閻ゅ洤螞閸曨倠娑樜旀担渚锤濠电娀娼ч鍡涙偂閺囥垺鐓忓┑鐐茬仢閸旀粓鎮归幇銊ュ⒉濞ｅ洤锕畷锝嗗緞婵犲偆娼氭俊銈囧Х閸嬬偟鏁敓鐘靛祦婵☆垵娅ｉ弳锕傛煕閵夈垺娅囩�规挷绀侀埞鎴︽偐閸偅姣勯梺绋款儑閸嬨倕鐣疯ぐ鎺戦唶闁哄洨鍠庢禒顓㈡⒑闂堟侗妲撮柡鍛櫊瀵偊宕掗悙瀵稿弳闂佺粯娲栭崐鍦拷姘炬嫹 by changhao	
				if (!team.isTeamLeader(roleid))
				{
					psend(roleid, new STeamError(TeamError.SelfNOtLeader));
					TeamManager.logger.error("COneKeyTeamMatch:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎妯恍氶梻鍌欒兌椤牏鎮锕�绀夐幖娣妼缁犵喖鏌熼梻瀵割槮缂侇偄绉归弻娑㈩敃閿濆棗鍓烽梺闈涱槴閺呮粓鎮￠弴銏＄厵闁煎壊鍓欐俊鑺ョ箾閸涱厽顥㈤柡灞剧♁閹棃鏁愰崨顔句邯闂備礁鎼張顒�煤濠靛牏涓嶆繛鎴炵啲閹风兘鏁愭惔婵堟晼闂佸憡姊瑰娆撳煘閹达附鍊烽悹楦挎濮ｃ垹顪冮妶搴″箹闁绘鎹囧畷娲倷閸濆嫮顓洪梺鎸庢濡嫭绂嶈ぐ鎺撶厽闁绘ê寮堕崢鍌炴煕閹板苯鎳愰悡鎴︽⒒閸屾艾锟界兘鎳楅崼鏇炵疇闁规崘顕ч悿顕�鎮归幁鎺戝鐎规洘鐓￠弻鐔煎箥椤旂⒈鏆梺绋款儌閺呯娀寮婚敐澶婄闁挎繂妫Λ鍕磽娴ｅ搫啸闁轰礁顭峰濠氭偄閻戞ê鏋傞梺鍛婃礀閻忔岸鎮鹃崜浣虹＝闁稿本姘ㄥ瓭闂佹寧娲︽禍婊堫敋閿濆鏁冮柨鏇嫹缂佺姵鐩弻鈩冨緞婵犲嫪铏庣紓浣瑰姈缁嬫垿鈥旈崘顔嘉ч柛鈩冿供濮婂灝鈹戦悙宸Ч婵炶尙鍠栨俊瀛樼瑹閿熻棄鐣烽妸褝鎷峰☉娅辨岸骞忕紒妯肩閺夊牆澧介崚浼存煙閼恒儳鐭掗柡浣哥Т椤撳ジ宕堕埡鍐跨床婵＄偑鍊栧ú鏍箠鎼淬劍鍊堕柣妯煎仺娴滄粍銇勯幇鈺佺伄缂佺姾灏欑槐鎺旂磼濡偐鐣靛銈庡亝缁诲牓銆佸锟介幃銏ゅ礈闊厽鍩涢梻鍌氬�搁崐宄懊归崶銊﹀弿闁靛牆顦伴弲顏呬繆閻愵亜锟窖呯不閹惧顩查柛顐ｆ礀缁犳牕螖閿濆懎鏋ら柡浣告喘閺屾洝绠涢妷褏锛熼梺鍛婏耿娴滃爼寮婚悢鍏煎殐闁冲搫濯绘径鎰叆闁绘梻绮ˉ澶愭煟閵堝懏鍠樼�规洘妞介幃娆撴倻濡厧寮伴梻浣哄帶椤洟宕愰弴鐔侯浄闁挎柨澧界壕鑲╃磽娴ｈ鐒芥繛鎻掝嚟閿熷�燁潐濞叉牕鐣烽鍐航闂備焦鍎崇换姗�鏁撻懞銉р檨闁稿鎳樺濠氬磼濞嗘帒鍘￠梺纭呮珪閹瑰洤鐣烽鐐查敜婵°倧鎷风紒鐘靛У娣囧﹪顢涘▎鎺濆妳濠电偛鍚嬮悧鏇㈠煘閹达附鍋愰悗鍦Т椤ユ繄绱掗悙顒�鍔ら柛姘儔楠炲牓濡搁妷顔藉缓闂佺硶鍓濋〃鍛村煕閺囥垺鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柣娑卞櫍瀵粙濡搁敃锟介鎾绘⒑閸涘﹦缂氶柛搴ゅ吹濡叉劙顢氶敓钘夘潖缂佹ɑ濯撮柛婵勫劤妤旀繝纰樻閸嬪鈻旈弴鐘插灊闁割偆鍠撻悷褰掓煥閻斿墎鐭欐鐐插暣瀹曠螖婵犲啯娅撴繝鐢靛仦濞兼瑦顨ラ崫銉х濠电姴鍊婚弳锔戒繆閵堝懏鍣圭紒锟介崒鐐寸厾婵炴潙顑嗗▍鍥煃鐠囪尙绠崇紒杈ㄦ崌瀹曟帒鈻庨幋婵嗩瀴闂備礁鎲″褰掓偋閻樿违闁告劏鏅濈弧锟介梺鎼炲劀閸℃ɑ鍟洪梻鍌欒兌閸嬨劑宕曢弻銉ョ婵娉涚憴锕傛倵閿濆骸鏋涚紒鐘叉贡缁辨帡顢欓悙顒変户闂佺懓鍢查崲鏌ユ偩閻戣棄鐐婇悹铏瑰劋濞呭秴鈹戦悩鍨毄濠殿喚鏁婚、娆撳冀椤撶偟鐛ュ┑鐐村焾濠胶绱為弽褜鐔嗛柤鎼佹涧婵牓鏌涚�ｎ亜锟藉潡寮婚妸鈺傚亜闁告繂瀚呴姀銈嗙參闁告劦浜滈弸娑㈡煛鐏炵偓绀冪紒缁樼洴閹瑩顢楁担鍝勭稻闂傚倷鑳堕…鍫ヮ敄閸涱厙娑樷攽鐎ｎ亣鎽曞┑鐐村灦閻喖鈻介鍫熺厱闁圭偓顨愰幏閿嬩繆閹绘帞澧曟い顏勫暣婵″爼宕ㄧ�电妞介梻浣烘嚀閸ゆ牠骞忛敓锟� "+roleid);
					
					msg.ret = 1;
					mkdb.Procedure.psendWhileCommit(roleid, msg);
					return true;						
				}
				
				teamid = xtable.Roleid2teamid.get(roleid);		
				if (fire.pb.fushi.Module.GetPayServiceType() == 1) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存鐐达耿閹崇娀顢楁径瀣撴粓姊绘担瑙勫仩闁告柨绉堕幑銏ゅ礃椤斿槈锕傛煕閺囥劌鐏犻柛鎰舵嫹婵＄偑鍊栭崝锕�顭块敓鐣岀磼椤旂厧顣崇紒杈ㄦ尰缁楃喐绻濋崘顭戜紦婵犵數濮伴崹鐓庘枖濞戙埄鏁勯柛鏇ㄥ幗瀹曟煡鏌涢埄鍐檨闁绘挸绻橀弻娑㈩敃閿濆洨鐣洪梺闈╃稻濡炰粙寮诲☉銏℃櫜闁告侗鍠涚涵锟界紓鍌欐祰妞村摜鏁敓鐘茬畺闁冲搫鎳忛ˉ鍫熺箾閹寸偛绗氶柣搴濆嵆濮婄粯鎷呴崨濠冨創闂佹椿鍓欓妶绋跨暦娴兼潙鍐�妞ゆ挾濮寸粊锕傛⒑缁洖澧查柛鎴犳嚀鍗卞Δ锝呭暞閳锋垿鏌熺粙鎸庢崳闁宠棄顦辩槐鎺撳緞婵犲嫮楔閻庢鍠栭…鐑藉极閹剧粯鍋愰柟缁樺笩閿熻棄鐏濋—鍐Χ閸℃ê鏆楁繝娈垮枤閸忔ê顕ｉ幎钘壩ч柛娑变簼閺傦拷婵＄偑鍊栧濠氬Υ鐎ｎ喖缁╃紓浣姑肩换鍡涙煟閹邦厼顥嬮柣顓熺懇閺屾洟宕遍弴鐙�妲柧缁樼墵閺屾稑鈽夐崡鐐寸亶濠电偛鎳岄崹钘夘潖閻戞ê顕辨繛鍡樺灥閸╁矂姊哄ú璇插闁靛牊鎮傞獮鍡楃暆閸曨偆顔掔紓鍌欑劍閿氶柨鐔烘櫕閺佸寮婚敐澶婎潊闁绘ê鍟块弳鍫熺箾鐎涙ê娈犻柛濠冪箞瀵鎮㈡搴㈡疂闂佸搫顦扮�笛傜昂濠碉紕鍋戦崐銈夊磻閸涱垱宕查柛顐犲劘閿熸垝绀佽灃濞达絽鎽滅粣鐐烘煟鎼搭垳绋婚柟绋跨埣瀹曟繈骞嬪┑鎰稁闂佹儳绻楅～澶婄暦婢舵劖鐓忓┑鐐茬仢閸旀粓鏌ｈ箛鎾搭棞闁宠鍨块崺銉╁幢濡炲墽鐩庨梺璇插閸戝綊宕板璺虹闁圭儤姊圭�氭氨锟界懓澹婇崰鏍箖閹寸偟绡�闁靛骏绲剧涵楣冩煥閺囶亞鐣甸柡浣哥Ч閹垽宕楃亸鏍ㄥ濠电偞鎸婚懝鎯洪妶鍡樻珷妞ゆ柨澧界壕鐓庮熆鐠轰警鐓柛銈囧枔缁辨帡顢欑喊杈╁悑闂佽鍠掗弲婵嬪箯閻樼粯鍤戞い鎺戭槸閺咃綁姊婚崒娆戭槮婵狅拷闁秴鐓曢柛顐犲劚閸屻劌螖閿濆懎鏆欓柛灞诲妽缁绘繃绻濋崒娑樻缂佹儳澧介弲顐︽晸閽樺鐣柛搴″船铻炴繛鎴炵懄濞呯娀鏌ｉ姀鐘冲暈闁绘挻鐩幃姗�鎮欓棃娑楀缂備緤鎷烽悗锝庡墾閹烽鎲撮崟顒傤槶闂佸憡顭嗛崶褏鍘撮梺纭呮彧缁犳垹绮诲☉娆嶄簻闁瑰墽顒茬槐锟犳煕閵夛絽濡烽柟鐤缁辨捇宕掑▎鎴濆闁藉啴浜堕幃妯跨疀閺囩儐鏆紓浣虹帛閻╊垶骞婇悩娲绘晢闁跨喍绮欏绋库槈濮樼偓瀚规繛鍫濈仢閺嬫稒銇勯銏℃暠濞ｅ洤锕獮鏍ㄦ媴閸濄儱骞愰梻浣侯焾閺堫剟鎯岄鎹愬С濞寸姴顑嗛埛鎺懨归敐鍕劅闁绘帡绠栭弻锟犲醇椤愩垹顫紓渚囧枟閻熲晠鐛�ｎ喗鏅滅紓浣股戝▍鍡涙⒒娴ｈ姤纭堕柛锝忕畵楠炲繘鏁撻敓锟�? by changhao
				{
					DSTeamMatchInfo config = ConfigManager.getInstance().getConf(DSTeamMatchInfo.class).get(team.getTeamInfo().getTargetid());
					if (config == null)
					{
						psend(roleid, new STeamError(TeamError.NoTarget));
						TeamManager.logger.error("COneKeyTeamMatch:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎妯恍氱紓鍌欒兌閸嬫捇宕曢崘宸劷闁跨喓濮撮拑鐔兼煥濠靛棭妲告い顐㈡嚇閺屾洝绠涙繝鍐╃彇闂佸憡姊归幃鍌氼潖閸濆嫅褔宕惰閹峰嘲鈹戦崼顫瑝闂佸搫绋侀崢濂告嫅閻旂尨鎷烽獮鍨姎妞わ富鍨辩�靛ジ鎮╃紒妯煎幈闂佸搫娲㈤崝灞炬櫠椤旂晫绠鹃柛婊冨暟閹偐绱掓潏銊﹀鞍闁瑰嘲鎳橀幃鐑藉级濞嗙偓缍屽┑锛勫亼閸婃垿宕濈仦杞挎稑鈻庨幋鐘电厰闁哄鐗勯崝搴ｅ姬閿熶粙姊洪幖鐐插姶闁诲繑绋栭ˇ褰掓煛鐏炲墽鈽夐柍钘夘樀瀹曪繝鎮欑�甸晲閭┑鐘垫暩閸嬫盯骞婂畝鍕９婵犻潧妫鏍煣韫囨挻璐￠柣顓熺懄缁绘盯宕卞Ο鍝勫Б闂佸憡鎸诲姗�鈥旈崘顔嘉ч煫鍥ㄦ礈缁愭姊洪崨濠庢畽婵炲懏娲樼粚杈ㄧ節閸ャ劌浠虹紓浣割儓濞夋洟藝閺夋娓婚柕鍫濇婢ь剚銇勯弴锛勭翱妞わ箑缍婇弻锛勪沪閸撗�妲堥梺瀹犳椤﹂潧鐣烽敓鐘冲�烽柛蹇曨焾鐎垫煡姊婚崒娆掑厡缂侇噮鍨堕獮鎰嫚閸欏倹鐩畷姗�鈥﹂幋鐐电▉濠电姷鏁告慨鐢告嚌閸撗冾棜闁稿繐鍚嬮崣蹇旀叏濡わ拷濡鏅舵ィ鍐╃厵濡炲楠搁崢瀛橆殽閻愬澧柟宄版嚇瀹曨偊濡烽婊�瑕嗛梻鍌氬�烽懗鍓佸垝椤栫偛鍨傞柛蹇撳悑閸欏繘鏌曢崼婵愭Ц缁炬儳缍婇弻娑滎槼妞ゃ劌妫濋幃锟犲Ψ閳哄倻鍘搁梺鍛婂姈鐎笛咃拷姘秺濮婇缚銇愰幒鎾存殸缂備浇顕ч悧鎾绘偘椤旇法鐤�闁哄啯鍨舵晥闂佺澹堥幓顏嗗緤閸ф鍋╅悹楦裤��閺�浠嬫煟閹邦厽缍戦柣蹇ョ畵閹锋垿宕￠悜鍡欏數闁荤姴鎼幖顐︻敂椤撱垺鐓涢悘鐐插⒔閵嗘帡鏌ㄩ悢鍛婄伄缂佽尪濮ら弲鑸垫償閿濆懎袣闂佽法鍠嶇划娆忣潖濞差亜浼犻柛鏇ㄥ墯閹峰崬鈹戦悙鎻掔骇妞ゎ厼娲獮鎴﹀閻橆偅顫嶉梺闈涚箚閿熺晫顒查幏鐑芥煥鐎ｃ劋绨婚梺鐟版惈缁夌兘宕楀畝锟介幉鎼佸箥椤斿吋鐏堝┑顔硷功缁垶骞忛崨瀛樺殟闁靛缍囬幏鐑藉礃椤忓棛锛滈梺璺ㄥ枙婵倗绮悢鍏兼櫢濞寸姴顑冮敓鎴掔窔瀵粙濡搁妷褏鐛梻浣哥秺閸嬪﹪宕滃┑瀣闁哄洢鍨洪埛鎴︽⒒閸喎宕熼柛顐犲劚閻ょ偓绻濇繝鍌滃缁炬儳顭烽弻娑㈠焺閸愵亖妾ㄩ梺缁樻尰濞茬喖骞冨锟介幃娆撳箵閹哄棙瀵栭梻浣哥枃濡嫰藝娴兼潙桅闁告洦鍠氶悿锟介梺闈涱檧缁犳垿顢旈敓锟� "+roleid);
						
						msg.ret = 1;
						mkdb.Procedure.psendWhileCommit(roleid, msg);
						return true;					
					}					
				}
				else
				{
					STeamMatchInfo config = ConfigManager.getInstance().getConf(STeamMatchInfo.class).get(team.getTeamInfo().getTargetid());
					if (config == null)
					{
						psend(roleid, new STeamError(TeamError.NoTarget));
						TeamManager.logger.error("COneKeyTeamMatch:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎妯恍氱紓鍌欒兌閸嬫捇宕曢崘宸劷闁跨喓濮撮拑鐔兼煥濠靛棭妲告い顐㈡嚇閺屾洝绠涙繝鍐╃彇闂佸憡姊归幃鍌氼潖閸濆嫅褔宕惰閹峰嘲鈹戦崼顫瑝闂佸搫绋侀崢濂告嫅閻旂尨鎷烽獮鍨姎妞わ富鍨辩�靛ジ鎮╃紒妯煎幈闂佸搫娲㈤崝灞炬櫠椤旂晫绠鹃柛婊冨暟閹偐绱掓潏銊﹀鞍闁瑰嘲鎳橀幃鐑藉级濞嗙偓缍屽┑锛勫亼閸婃垿宕濈仦杞挎稑鈻庨幋鐘电厰闁哄鐗勯崝搴ｅ姬閿熶粙姊洪幖鐐插姶闁诲繑绋栭ˇ褰掓煛鐏炲墽鈽夐柍钘夘樀瀹曪繝鎮欑�甸晲閭┑鐘垫暩閸嬫盯骞婂畝鍕９婵犻潧妫鏍煣韫囨挻璐￠柣顓熺懄缁绘盯宕卞Ο鍝勫Б闂佸憡鎸诲姗�鈥旈崘顔嘉ч煫鍥ㄦ礈缁愭姊洪崨濠庢畽婵炲懏娲樼粚杈ㄧ節閸ャ劌浠虹紓浣割儓濞夋洟藝閺夋娓婚柕鍫濇婢ь剚銇勯弴锛勭翱妞わ箑缍婇弻锛勪沪閸撗�妲堥梺瀹犳椤﹂潧鐣烽敓鐘冲�烽柛蹇曨焾鐎垫煡姊婚崒娆掑厡缂侇噮鍨堕獮鎰嫚閸欏倹鐩畷姗�鈥﹂幋鐐电▉濠电姷鏁告慨鐢告嚌閸撗冾棜闁稿繐鍚嬮崣蹇旀叏濡わ拷濡鏅舵ィ鍐╃厵濡炲楠搁崢瀛橆殽閻愬澧柟宄版嚇瀹曨偊濡烽婊�瑕嗛梻鍌氬�烽懗鍓佸垝椤栫偛鍨傞柛蹇撳悑閸欏繘鏌曢崼婵愭Ц缁炬儳缍婇弻娑滎槼妞ゃ劌妫濋幃锟犲Ψ閳哄倻鍘搁梺鍛婂姈鐎笛咃拷姘秺濮婇缚銇愰幒鎾存殸缂備浇顕ч悧鎾绘偘椤旇法鐤�闁哄啯鍨舵晥闂佺澹堥幓顏嗗緤閸ф鍋╅悹楦裤��閺�浠嬫煟閹邦厽缍戦柣蹇ョ畵閹锋垿宕￠悜鍡欏數闁荤姴鎼幖顐︻敂椤撱垺鐓涢悘鐐插⒔閵嗘帡鏌ㄩ悢鍛婄伄缂佽尪濮ら弲鑸垫償閿濆懎袣闂佽法鍠嶇划娆忣潖濞差亜浼犻柛鏇ㄥ墯閹峰崬鈹戦悙鎻掔骇妞ゎ厼娲獮鎴﹀閻橆偅顫嶉梺闈涚箚閿熺晫顒查幏鐑芥煥鐎ｃ劋绨婚梺鐟版惈缁夌兘宕楀畝锟介幉鎼佸箥椤斿吋鐏堝┑顔硷功缁垶骞忛崨瀛樺殟闁靛缍囬幏鐑藉礃椤忓棛锛滈梺璺ㄥ枙婵倗绮悢鍏兼櫢濞寸姴顑冮敓鎴掔窔瀵粙濡搁妷褏鐛梻浣哥秺閸嬪﹪宕滃┑瀣闁哄洢鍨洪埛鎴︽⒒閸喎宕熼柛顐犲劚閻ょ偓绻濇繝鍌滃缁炬儳顭烽弻娑㈠焺閸愵亖妾ㄩ梺缁樻尰濞茬喖骞冨锟介幃娆撳箵閹哄棙瀵栭梻浣哥枃濡嫰藝娴兼潙桅闁告洦鍠氶悿锟介梺闈涱檧缁犳垿顢旈敓锟� "+roleid);
						
						msg.ret = 1;
						mkdb.Procedure.psendWhileCommit(roleid, msg);
						return true;					
					}						
				}
				
				long systemTime = System.currentTimeMillis();
				
				final long now = System.currentTimeMillis();
				final long delaytime = ChatChannel.getInstance().getWorldChatDelayTime();
				final LastChatTime rctime = new LastChatTime(roleid, false);
				if (channeltype == fire.pb.talk.ChannelType.CHANNEL_WORLD && rctime.getLastWorldChatTime() + delaytime > now) {
					java.util.ArrayList<String> args = new java.util.ArrayList<String>();
					args.add("" + (rctime.getLastWorldChatTime() + delaytime - now) / 1000);
					MessageMgr.sendMsgNotify(roleid, ChatMsgId.CHAT_WORLD_CHANNEL_TIME_LIMIT, args);
					
					msg.ret = 1;
					mkdb.Procedure.psendWhileCommit(roleid, msg);
					return true;
				}
				
				long delta = systemTime - team.getTeamInfo().getOnekeytimestamp() - TeamManager.ONE_KEY_APPLY_TEAM;
				if (delta < 0)
				{
					String s = String.format("%d", (int)-delta / 1000);
					MessageMgr.sendMsgNotify(roleid, 150028, Arrays.asList(s));
					TeamManager.logger.info("COneKeyTeamMatch:濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柛婵嗗椤忋儵鏌涙惔銊ゆ喚闁糕晝鍋ら獮瀣晜閽樺姹楅梻浣告啞閻熴儵藝娴兼潙绠栨繛鍡樺灩绾捐棄霉閿濆懏鎯堟い搴＄焸閺屾盯濡搁妷褍鐓熼悗娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭花浠嬫⒒娴ｄ警鐒鹃柡鍫墰缁瑩骞嬮敂缁樻櫆闂佽法鍣﹂幏锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鏁愭径濠勵吅闂佹寧绻傞幉娑㈠箻缂佹鍘辨繝鐢靛Т閸婂綊宕戦妷鈺傜厸閻忕偠顕ф慨鍌滐拷娈垮枟閹告娊骞冨▎鎾跺彄妞ゆ挾濮甸弲濂告⒒閸屾瑦绁版俊妞煎妿缁牊鎷呴悮瀛樺婵鍘ч獮姗�鏌熼獮鍨仼闁宠棄顦垫慨锟介柣妯垮蔼閿熻棄鐏濋埞鎴﹀煡閸℃浠村銈嗘肠閸涱厽鐎抽悗骞垮劚濞层劎澹曢挊澹濆綊鏁愰崶銊ユ畬婵犳鍠栭悧濠囧Φ閸曨垰惟闁靛鍨甸崥顐︽倵濞堝灝鏋涙い顓犲厴瀹曡銈ｉ崘銊х杸婵炶揪绲介幉锟犲磹椤栫偞鈷戠痪顓炴噹娴滃綊鎮跺☉鏍у姦闁轰焦鎹囬幐濠冨緞瀹�瀣婵＄偑鍊栧褰掑礉濞嗗浚娼栫紓浣股戞刊鎾煕濞戞﹫宸ラ柡鍡楃墦濮婃椽骞栭悙鎻掝潊濡炪値鍋勯ˇ閬嶅箲閵忕姭妲堥柕蹇婂墲濞呫垺绻涚�电孝妞ゆ垵妫濋幃鈥斥槈閵忊�筹拷鍫曟煟閹邦厼绲婚柍閿嬫⒐缁绘盯骞撻幒鏃�鎲奸梺闈涙搐鐎氱増鎱ㄩ敓浠嬫煃閳轰礁鏆熸い锔垮嵆濮婅櫣鎷犻垾铏亐闂佸搫鎳愭繛锟芥鐐诧躬閹晛煤缂佹ɑ娅堥梺鑽ゅУ娴滀粙宕濆澶嬫櫖闊洦绋掗埛鎺楁煕鐏炲墽鎳勭紒浣哄閵囧嫰寮撮崱妤佸珔闁瑰嘲鍢查埥澶愬箳閹惧褰囬梻浣告憸婵挳鏁冮妶澶樻晣濠靛倻顭堥悙濠勬喐鎼淬劍鍊甸柟鎯板Г閸婂灚顨ラ悙鑼虎闁告梹纰嶇换娑氭嫚瑜忛悾閬嶆煟閿濆洤鍘寸�规洩绲惧鍕暆閿熶粙鎯侀崼銉︹拻闁稿本姘ㄦ晶娑樸�掑顓ф疁鐎规洘娲熼獮鍥敇濠婏拷缁ㄥ姊洪棃娑辨Ф闁稿氦娅曢弲璺衡槈濮樿京锛滅紓鍌欑劍椤洤煤鐎涙﹩娈介柣鎰▕閸庢棃鏌熼鐣屾噰鐎规洖缍婇、鏇㈠閿涘嫬缍撳┑鐘殿暜缁辨洟宕戦幋锕�纾圭憸鏃堝箠濞嗘帇浜归柟鐑樺灩閺屟冣攽閻愭潙鐏嶉柟鍐叉喘閺佹捇鎳為妷锔绘閻庤娲橀敃銏ゃ�佸▎鎾冲簥濠㈣埖鐩顕�鏌曢崶褍顏�殿喕绮欐俊姝岊槼闁革綆鍠栭—鍐Χ韫囨凹鍚呴梻鍌氬鐎氼噣骞戦姀鐘婵﹩鍘奸悵浼存偡濠婂啰绠婚柟顕�绠栭幃浠嬪川婵犲嫬骞堥梻浣稿暱閹碱偊宕愮拠瑁佽櫣锟芥稒锕╁▓浠嬫煟閹邦厽缍戠紒妤佸浮閹藉爼寮介‖鈥崇秺閺佹劙宕ㄩ钘夊壍婵°倗濮烽崑娑㈡偋閹炬剚娼栭柧蹇氼潐鐎氭岸鏌ょ喊鍗炲妞ゆ柨锕铏圭矙濞嗘儳鍓辩紓浣割儐鐢�愁嚕閺屻儲鍤嬮柣銏☆問濞村嫰鏌ｆ惔顖滅У濞存粎鍋ゅ畷锝夊礃閳哄啰顔曢梺瑙勫劤椤曨參宕弻銉︾厵濡炲楠搁崢鎾煛瀹�锟介崰鏍�佸▎鎴犻┏閻庯綆鍓欐慨鑲╃磽閸屾瑨鍏屽┑顔炬暬閹嫰顢涘☉妤冪畾闂佺粯鍨煎Λ鍕偂濞戙垺鐓曢悘鐐额嚙閿熺獤鍥х鐎瑰嫰鍋婇崥瀣煕閳╁啰鎳呮い鏃�娲熷娲箰鎼达絿鐣甸梺鐟板暱缁绘﹢鐛弽顓炵疀闁绘鐗忛崣鍡涙⒑閸濆嫭鍌ㄩ柛鏂款儔閺屽洭顢涢悙瀵稿帾闂佺硶鍓濆ú婊呯玻閺冨偊鎷峰▓鍨灍闁规瓕娅曢幈銊╂晸娴犲鐓熸繛鍡樼懄鐎氱懓鈹戦悙闈涘付闁挎洦浜滈～蹇撁洪鍛拷鐑芥煢濡警妲稿┑顔奸叄濮婃椽宕ㄦ繛姘灴閹囧即閳ュ磭鍊掑┑锛勫亼閸婃牕顫忔繝姘柧妞ゆ劑鍊曟慨顒勬煥閻旂粯顥夐柍瑙勫灴閹瑩鎳犻锟介。娲⒑鐠囪尙绠茬紒璇茬墕椤曪絿绮欐惔鎾搭潔濠电偛妫楃粔宕囪姳鐠囧樊娓婚柕鍫濇鐎垫瑩鏌涢幇鈺佸闁活偄瀚穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆銆掗柟骞垮灩椤粓鏁撻挊澶樺殨妞ゆ劧绠戠粻鑽ょ磽娴ｈ偂鎴濃枍閵忋倖鈷戦悹鎭掑妼濞呮劙鏌熼崙銈嗗?60缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃闁硅櫕鎹囬垾鏃堝礃椤忓孩瀚归柨婵嗙凹缁ㄥジ鏌熼惂鍝ョМ闁哄矉缍侀、姗�鎮欓幖顓燁棧闂備線娼уΛ娆戞暜閹烘缍栨繝闈涱儐閸婇攱銇勯幒鐐村濡炪倕绻愰悥鐓庮潖濞差亝鍤嶉柕澶婎槹閸ㄥ綊骞戦姀銈呴唶闁靛鍎撮幗鏇㈡⒑缂佹ɑ鐓ラ柣銊︾箞瀵悂寮崼鐔哄幈濡炪値鍘介崹鐢稿几閻斿吋鐓熼煫鍥ㄦ尵鏁堝┑顔硷攻濡炶棄鐣烽锕�绀嬫い鎺戭槹閿涗胶绱撻崒娆戣窗闁哥姵顨婇獮鎴﹀炊瑜滈崵鏇炩攽閻樺疇澹橀幆鐔兼⒑閸愬弶鎯堥柛濠傛啞缁傚秹鎮欓悜妯锋嫼缂備礁顑嗙�笛冿耿閹殿喚纾奸悗锝庡亜閻忓瓨銇勯姀鈩冾棃闁轰焦鎹囬弫鎾绘晸閿燂拷?? "+roleid);
					
					msg.ret = 1;
					mkdb.Procedure.psendWhileCommit(roleid, msg);
					return true;						
				}
				
				team.getTeamInfo().setOnekeytimestamp(systemTime);
				
				/*
				fire.pb.message.SStringRes msg1 = ConfigManager.getInstance().getConf(fire.pb.message.SStringRes.class).get(285);
				if (msg1 == null)
				{
					TeamManager.logger.error("COneKeyTeamMatch:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃瑥顤�濡炪倕绻掓慨椋庢閹烘鏅搁柤鎭掑劤缁★拷闂佺鏈〃鍡涘棘閿熶粙姊绘担铏瑰笡閽冭京鎲搁弶鍨殲缂佸倸绉归幃娆撴倻濡厧骞楅梻浣告贡閸庛倕顫忛悷鎵虫瀺闁哄洢鍨洪悡娆撴煕濞嗗浚妲归柛濠冨姈椤ㄣ儵鎮欏顔煎壎闂佽桨绀侀崯鎾极閹剧粯鍤嶉柕澶樺枟閺侇垶姊婚崒姘拷宄懊归崶顒婄稏濠㈣泛顑囬悵鍫曟煕閳╁叐鎴濃枍閻樺厖绻嗛柕鍫濇噺閸ｅ湱鐥幆褏绉洪柡宀嬬秮楠炲鏁愰崨鍛崌閺岋綁骞樼捄鐑樼亪闂佸搫鏈ú婵堢不濞戞熬鎷烽敐搴濈敖濞寸娀绠栧娲传閸曨剦妫忛梺鍝勬噽婵烇拷鐎殿喖顭烽弫鎰緞鐎ｎ偅鐝抽梻浣稿閸嬪懐鎹㈤崟顖氬偍妞ゆ劑鍊楃壕钘壝归敐鍫燁仩閻㈩垱绋撶槐鎺旀嫚閼碱剙顤�闂侀�涚┒閸旀垿寮幘瀵割浄閻庯綆鍋嗛崣鍡椻攽閻樼粯娑ф俊顐ｇ懇瀹曡櫕绂掔�ｎ偆鍘卞┑顔筋殔濡绂嶉悧鍫熷弿濠电姴鍟妵婵堬拷瑙勬磸閸斿秶鎹㈠┑瀣闁挎繂妫楅绋库攽閻樺灚鏆╅柛瀣☉椤曪綁宕滄担绋跨亰闁瑰吋鐣崝宀�绮堥崱娑欑厵闁绘垶锕╁▓鏃堟⒑閸楃偞鍠橀柡灞炬礃瀵板嫰宕煎┑鍡楊潛闂備礁鍚嬪姗�鎮樺┑瀣厴闁硅揪闄勯崐鐑芥煛婢跺鐏╁ù鐘虫倐濮婃椽鎳￠妶鍛畬闂佹悶鍎滈崘銊ゆ喚闂傚倷绀侀幉锛勭矙閹达附鏅濋柨鏃�鍎虫慨顒勬煥閻斿墎鐭欐慨濠冩そ濡啫鈽夐姀銏犳そ缂傚倷鐒﹁ぐ鍐╂櫠閽樺妲堥柛顭戝亖閸嬪懘鏌涢幇銊︽珔闁跨喕妫勯悘姘辨崲濞戙垹绠ｉ柣鎰皺閻熸彃鈹戦悙鍙夊櫣婵炶濡囬幑銏犫槈閵忕姷顓洪梺缁橆焾濞呮洖袙閸儲鍊甸悷娆忓缁�锟介梺闈涚墢椤牓顢氶敐澶婄妞ゆ棁妫勬禍婊堟⒑閸涘﹦绠撻悗姘煎墰缁濡烽埡鍌楁嫽闂佺鏈悷锕偹囨搴ｇ＜濡插本鐗曢弸銈囷拷鍨緲閿曘儳绮嬮幒鏃撴嫹閿濆骸浜滄繛鍫到椤啴濡堕崱娆忊拡闂佺顑嗛惄顖氱暦濞嗘挻鍋愮紓浣诡焽閸樻悂姊洪崨濠傚闁告柨鐭傞弫鎾诲磹閻斿嘲鎯炴繝銏ｎ潐濞叉缂撻悾宀�鐭欓悹鎭掑姂閻涙捇姊绘担绋款棌闁稿鎳愮划娆撳箣閻愭壆绠氶梺鍏肩ゴ閺呮繄澹曢崗闂寸箚闁靛牆瀚ˇ锔界箾閹碱厼娅嶉柡宀�鍠栭幐濠冨緞鐏炵晫鍘介柣搴㈩問閸犳洜鍒掑▎鎾憋拷浣割潨閿熶粙骞冮姀銈呯闁靛牆妫楅鍫曟⒑濮瑰洤鐏╅柟璇х節閹繝濡烽敂鍓х槇闂傚倸鐗婄粙鎺椝夐姀掳浜滈幖娣焺濞堟梹銇勯鈥冲姷妞わ箑鍟块…鍧楁偡閻楀牜妫ゅ┑鈥冲级閸旀瑩鐛幒鎳虫棃鏁撻悾宀�涓嶆繛鎴炵懀娴滄粓鏌熼悙顒夋當閻庢凹鍣ｅ鎯般亹閹烘挴鎷绘繛杈剧到閹诧繝骞嗛崼銉︾厽妞ゆ挾鍎愬Σ铏圭磼鏉堚晛浠︾紒妤冨枛閺佹挻绂掔�ｎ剙绁﹂梺鍛婂姦閸犳牠锝為崨瀛樼厪闁割偅绻冮崳鍦磼閹邦厾鈾佺紒缁樼箞閹粙妫冨ù韬插灲閹顫濋敓浠嬪炊瑜庨悗顒勬倵楠炲灝鍔氭い锔垮嵆閸╂盯骞掗幊銊ョ秺閺佹劙宕惰婵℃椽姊洪幖鐐诧拷褔骞忛悜鑺モ拻濞达綀顫夐崑鐘绘煕婵犲啰澧甸柟顔ㄥ洦鍋愰柤濮愬�曠粊锕傛椤愩垺澶勭紒瀣浮瀵煡骞栨担鍦弳闂佺粯娲栭崐鍦拷姘炬嫹 "+roleid);
					return false;						
				}
				*/
				
				fire.pb.message.SStringRes msg2 = ConfigManager.getInstance().getConf(fire.pb.message.SStringRes.class).get(286);
				if (msg2 == null)
				{
					TeamManager.logger.error("COneKeyTeamMatch:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃瑥顤�濡炪倕绻掓慨椋庢閹烘鏅搁柤鎭掑劤缁★拷闂佺鏈〃鍡涘棘閿熶粙姊绘担铏瑰笡閽冭京鎲搁弶鍨殲缂佸倸绉归幃娆撴倻濡厧骞楅梻浣告贡閸庛倕顫忛悷鎵虫瀺闁哄洢鍨洪悡娆撴煕濞嗗浚妲归柛濠冨姈椤ㄣ儵鎮欏顔煎壎闂佽桨绀侀崯鎾极閹剧粯鍤嶉柕澶樺枟閺侇垶姊婚崒姘拷宄懊归崶顒婄稏濠㈣泛顑囬悵鍫曟煕閳╁叐鎴濃枍閻樺厖绻嗛柕鍫濇噺閸ｅ湱鐥幆褏绉洪柡宀嬬秮楠炲鏁愰崨鍛崌閺岋綁骞樼捄鐑樼亪闂佸搫鏈ú婵堢不濞戞熬鎷烽敐搴濈敖濞寸娀绠栧娲传閸曨剦妫忛梺鍝勬噽婵烇拷鐎殿喖顭烽弫鎰緞鐎ｎ偅鐝抽梻浣稿閸嬪懐鎹㈤崟顖氬偍妞ゆ劑鍊楃壕钘壝归敐鍫燁仩閻㈩垱绋撶槐鎺旀嫚閼碱剙顤�闂侀�涚┒閸旀垿寮幘瀵割浄閻庯綆鍋嗛崣鍡椻攽閻樼粯娑ф俊顐ｇ懇瀹曡櫕绂掔�ｎ偆鍘卞┑顔筋殔濡绂嶉悧鍫熷弿濠电姴鍟妵婵堬拷瑙勬磸閸斿秶鎹㈠┑瀣闁挎繂妫楅绋库攽閻樺灚鏆╅柛瀣☉椤曪綁宕滄担绋跨亰闁瑰吋鐣崝宀�绮堥崱娑欑厵闁绘垶锕╁▓鏃堟⒑閸楃偞鍠橀柡灞炬礃瀵板嫰宕煎┑鍡楊潛闂備礁鍚嬪姗�鎮樺┑瀣厴闁硅揪闄勯崐鐑芥煛婢跺鐏╁ù鐘虫倐濮婃椽鎳￠妶鍛畬闂佹悶鍎滈崘銊ゆ喚闂傚倷绀侀幉锛勭矙閹达附鏅濋柨鏃�鍎虫慨顒勬煥閻斿墎鐭欐慨濠冩そ濡啫鈽夐姀銏犳そ缂傚倷鐒﹁ぐ鍐╂櫠閽樺妲堥柛顭戝亖閸嬪懘鏌涢幇銊︽珔闁跨喕妫勯悘姘辨崲濞戙垹绠ｉ柣鎰皺閻熸彃鈹戦悙鍙夊櫣婵炶濡囬幑銏犫槈閵忕姷顓洪梺缁橆焾濞呮洖袙閸儲鍊甸悷娆忓缁�锟介梺闈涚墢椤牓顢氶敐澶婄妞ゆ棁妫勬禍婊堟⒑閸涘﹦绠撻悗姘煎墰缁濡烽埡鍌楁嫽闂佺鏈悷锕偹囨搴ｇ＜濡插本鐗曢弸銈囷拷鍨緲閿曘儳绮嬮幒鏃撴嫹閿濆骸浜滄繛鍫到椤啴濡堕崱娆忊拡闂佺顑嗛惄顖氱暦濞嗘挻鍋愮紓浣诡焽閸樻悂姊洪崨濠傚闁告柨鐭傞弫鎾诲磹閻斿嘲鎯炴繝銏ｎ潐濞叉缂撻悾宀�鐭欓悹鎭掑姂閻涙捇姊绘担绋款棌闁稿鎳愮划娆撳箣閻愭壆绠氶梺鍏肩ゴ閺呮繄澹曢崗闂寸箚闁靛牆瀚ˇ锔界箾閹碱厼娅嶉柡宀�鍠栭幐濠冨緞鐏炵晫鍘介柣搴㈩問閸犳洜鍒掑▎鎾憋拷浣割潨閿熶粙骞冮姀銈呯闁靛牆妫楅鍫曟⒑濮瑰洤鐏╅柟璇х節閹繝濡烽敂鍓х槇闂傚倸鐗婄粙鎺椝夐姀掳浜滈幖娣焺濞堟梹銇勯鈥冲姷妞わ箑鍟块…鍧楁偡閻楀牜妫ゅ┑鈥冲级閸旀瑩鐛幒鎳虫棃鏁撻悾宀�涓嶆繛鎴炵懀娴滄粓鏌熼悙顒夋當閻庢凹鍣ｅ鎯般亹閹烘挴鎷绘繛杈剧到閹诧繝骞嗛崼銉︾厽妞ゆ挾鍎愬Σ铏圭磼鏉堚晛浠︾紒妤冨枛閺佹挻绂掔�ｎ剙绁﹂梺鍛婂姦閸犳牠锝為崨瀛樼厪闁割偅绻冮崳鍦磼閹邦厾鈾佺紒缁樼箞閹粙妫冨ù韬插灲閹顫濋敓浠嬪炊瑜庨悗顒勬倵楠炲灝鍔氭い锔垮嵆閸╂盯骞掗幊銊ョ秺閺佹劙宕惰婵℃椽姊洪幖鐐诧拷褔骞忛悜鑺モ拻濞达綀顫夐崑鐘绘煕婵犲啰澧甸柟顔ㄥ洦鍋愰柤濮愬�曠粊锕傛椤愩垺澶勭紒瀣浮瀵煡骞栨担鍦弳闂佺粯娲栭崐鍦拷姘炬嫹 "+roleid);
					
					msg.ret = 1;
					mkdb.Procedure.psendWhileCommit(roleid, msg);
					return false;						
				}				
				
				//String msgstring1 = msg1.msg;
				String msgstring2 = msg2.msg;

				/*
				msgstring1 = msgstring1.replaceAll("\\$parameter1\\$", config.Target);
				msgstring1 = msgstring1.replaceAll("\\$parameter2\\$", Integer.toString(team.getTeamInfo().getMinlevel()));
				msgstring1 = msgstring1.replaceAll("\\$parameter3\\$", Integer.toString(team.getTeamInfo().getMaxlevel()));
				msgstring1 = msgstring1.replaceAll("\\$parameter4\\$", Long.toString(roleid));
				*/
				
				final java.util.ArrayList<fire.pb.talk.DisplayInfo> showinfos  = new java.util.ArrayList<fire.pb.talk.DisplayInfo>();
				
				boolean ret = ChatChannel.getInstance().process(roleid, channeltype, text, msgstring2, showinfos, 1);
				
				if (ret == true)
				{					
					MessageMgr.sendMsgNotify(roleid, 162025, null);					
				}
				else
				{
					msg.ret = 1;
				}
				
				mkdb.Procedure.psendWhileCommit(roleid, msg);
								
				return ret;
			}
			
		};
		onekeyteammatch.submit();	
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 794498;

	public int getType() {
		return 794498;
	}

	public int channeltype; // 频道类型 14组队申请 1当前频道 4帮派 5世界频道 by changhao
	public java.lang.String text; // 发送的文本 by changhao

	public COneKeyTeamMatch() {
		text = "";
	}

	public COneKeyTeamMatch(int _channeltype_, java.lang.String _text_) {
		this.channeltype = _channeltype_;
		this.text = _text_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(channeltype);
		_os_.marshal(text, "UTF-16LE");
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		channeltype = _os_.unmarshal_int();
		text = _os_.unmarshal_String("UTF-16LE");
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof COneKeyTeamMatch) {
			COneKeyTeamMatch _o_ = (COneKeyTeamMatch)_o1_;
			if (channeltype != _o_.channeltype) return false;
			if (!text.equals(_o_.text)) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += channeltype;
		_h_ += text.hashCode();
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(channeltype).append(",");
		_sb_.append("T").append(text.length()).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

