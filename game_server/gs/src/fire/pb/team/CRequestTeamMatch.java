
package fire.pb.team;
import fire.pb.main.ConfigManager;
import fire.pb.talk.MessageMgr;



// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CRequestTeamMatch__ extends mkio.Protocol { }

/** 最新加入功能 by changhao
*/
// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/***
 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閸ㄥ倸螖閿濆懎鏆欑紒鐘崇☉闇夐柨婵嗘噺鐠愶紕绱掔�ｂ晞鍏岀紒杈ㄦ崌瀹曟帒顫濋濠冨闁绘垼濮ら崐鍧楁煥閺囨氨鍔嶉柟鍐茬焸濮婄粯鎷呴崨濠傛殘闂佽崵鍠嗛崕鎶藉箲閵忕媭娼ㄩ柨鐔绘椤曪絾绻濆顓炰簻闂佹儳绻愬﹢閬嶆晬濠婂牊鈷戦梻鍫熺〒缁犲啿鈹戦鐐毈闁诡喗锕㈠畷濂稿Ψ閿旇瀚兼繝鐢靛仩鐏忣亪顢氳閻涱喖螖娴ｅ吀绨婚梺闈涱焾閸庡鐓鍌︽嫹濞堝灝鏋︽い鏇嗗洤鐓″鑸靛姇椤懘鏌ｅ锟藉褎鎱ㄩ崼鏇熲拻濞达絽鎲￠崯鐐烘煕閺冩捇妾紒鍌氱Ч瀵粙鈥栭濠勭М鐎规洖銈告慨锟介柕蹇ｆ緛缁卞啿鈹戦悙瀛樺鞍闁煎綊绠栭弫鍐Ψ瑜濋幏宄邦潩椤掑倻楔闂佽鍠楅〃濠囧箚閸岀偛宸濆┑鐘插亞娴兼捇姊婚崒娆愮グ婵炲娲熷畷鏉款吋閸パ冪亰濠电偛妫欓幐鎯х暤娴ｅ壊鐔嗛柤鎼佹涧婵洨绱掗悩鍨殌闂囧鏌ㄥ┑鍡樺闁搞倧鎷峰┑鐐茬摠缁挻绂嶇捄渚綎婵炲樊浜滅粈鍫ユ煙缂佹ê绗傜紒銊ㄥ亹缁辨挻鎷呯粵瀣闁诲孩鐭崡鎶界嵁閸愵喗鍊婚柦妯猴級閳哄懏鐓冮柛婵嗗閿熻棄顭峰畷銏＄鐎ｎ偀鎷洪梻鍌氱墛缁嬫挾绮诲鑸电厸闁告侗鍠氬ú鎾煙椤旀枻鑰跨�殿喖顭锋俊鐑芥晜閹冪闂傚倷绀侀幉锟犲垂椤栫偛纾归柡宥庡亾閹峰嘲顫濋悙顒�顏�
 * @author changhao
 *
 */
public class CRequestTeamMatch extends __CRequestTeamMatch__ {
	@Override
	protected void process() {
		
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		mkdb.Procedure requestteammatch = new mkdb.Procedure()
		{
			@Override
			/*闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閸ㄥ倸螖閿濆懎鏆欑紒鐘崇☉闇夐柨婵嗘噺鐠愶紕绱掔�ｂ晞鍏岀紒杈ㄦ崌瀹曟帒顫濋濠冨闁绘垼濮ら崐鍧楁煥閺囩偛锟界敻鏁撻弬銈囩暤鐎规洖鐖奸崺锟犲礃瑜忛悷婵嗏攽鎺抽崐褏寰婃禒瀣柈妞ゆ牜鍋為崑鍌炴煏婢跺棙娅嗛柣鎾跺枛閺岋繝宕掑鍙樿檸濡炪倧绲炬繛濠囧蓟閿濆鏁囬柣鏃傚劋閸ｄ即姊洪崫鍕槵闁跨喕妫勭壕顓㈠汲閸℃稒鍊甸柨婵嗛婢т即鏌ｉ敃锟介悧鎾愁潖閻戞ɑ濮滈柟娈垮枛婵′粙姊虹憴鍕憙鐎规洜鏁搁崚鎺旓拷锝庡枛缁犳娊鏌￠崘鈺傚鞍閻庢艾缍婇弻銊モ攽閸℃侗锟芥霉濠婂嫮绠栫紒缁樼洴瀹曘劑顢欓崜褏鍘滄繝娈垮枛閿曘劌鈻嶉敐澶婄闁哄稁鍘奸崡鎶芥煟閹邦厾銈撮柟鏋�濆缁樻媴閸涘﹤鏆堝┑顔硷工濠�閬嶅极椤曪拷閹瑩鎮滃Ο鐑樼枀闂佸搫顦悧鍕礉鎼达絽濮柨鐔绘閳规垿顢欓弬銈勭返闂佸憡蓱閹倿鐛箛鎾佹椽顢旈崨顏呭闂備礁鎲＄粙鎴︽晝閿曞倸鐓″鑸靛姈閻撱儵鏌￠崶鏈电盎妞も晩鍓涚槐鎺楊敊绾拌京鍚嬪Δ鐘靛仦椤洨妲愰幒鎳崇喖鎮�涙ê顏堕梺鍓茬厛閸嬪懘宕ｈ箛鏂剧箚妞ゆ牗绮岀敮鍫曟偨椤栨氨鍩ｉ柡宀嬬磿閿熸枻绲婚崝宀勬晸閼恒儳绠炵�殿喛顕ч埥澶愬閳ュ厖姹楅梺鑽ゅТ濞壯囧幢濡や礁鍓甸梻鍌氬�峰ù鍥ь浖閵娾晜鍊块柨鏇炲�哥粻鏌ユ煕閵夘喖澧柡瀣╃窔閺岀喖宕滆鐢盯鏌￠崨顔藉�愰柡灞诲姂閹倝宕掑☉姗嗕紦 team->roleid->match by changhao*/
			protected boolean process()
			{	
				if (!checkLevel()) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺岋綁骞樼�靛憡鍣伴梺鍝勭灱閸犳牠銆佸☉妯锋婵炲棙鍨甸崵鎺楁煟閻愬顣茬�癸拷缁嬫娼栭柧蹇撴贡閻瑦绻涢崱妯哄姢闁告搩鍙冨铏圭矙閸栤剝鏁剧紓浣筋嚙閻楀棝顢氶敐鍡欑瘈婵﹩鍘兼禍婊堟⒑缂佹澹橀柣掳鍔庨敓鑺ヨ壘缂嶅﹪寮婚敐澶婎潊闁宠棄妫楅弲閬嶆⒑缂佹ê娴紒鐘崇墪閻ｇ兘顢涘鍛厯闁圭厧鐡ㄩ幐濠氬棘閿熶粙姊绘担鍝ユ瀮婵☆偄瀚灋婵°倓鑳堕々鎻捨旈敐鍛殲闁绘挻鐟╅弻娑㈠箣濞嗗骏鎷烽弽顐嫹濮樼偓瀚�? by changhao
				{
					psend(roleid, new STeamError(TeamError.LevelError));
					TeamManager.logger.debug("FAIL:CRequestTeamMatch闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屾盯骞囬姘卞缂傚倸鍟ú鐔奉潖缂佹ɑ濯撮柛娑橈攻閸庢挸鈹戦悙鑼勾闁告柨绉归獮鍫ュΩ閿旂粯效闁硅壈鎻徊鍧楁倿閸忚偐绡�闁汇垽娼у瓭闂佺锕﹂弫璇差嚕閵婏妇顩烽悗锝庡亞閸樿棄鈹戦埥鍡楃仩闁圭⒈鍋嗛惀顏囶樄闁哄瞼鍠栧畷妤呮偂鎼粹槅娼氶梻浣告惈閺堫剛绮欓幘瀵割浄闁挎梻鍋撶�氭岸鏌熺紒妯轰刊婵炵厧閰ｅ缁樻媴閸涘﹥鍎撻梺鍝勭墱閸撴瑧鍙呴梺缁樻椤ユ捇寮抽敃鍌涚厽闁规儳纾畝鎼佹煛閿熻姤绂掔�ｎ偆鍘遍梺闈涱槹閸ㄧ敻骞婇幇顒傛殾闁绘垶顭囩弧锟界紒鐐緲椤﹁京澹曢崸妤佺厱閻庯綆鍓欓弸娑欘殽閻愯韬鐐搭焽閹风娀鎳犻浣哄姼闂傚倷鑳堕～瀣礋閳猴拷缁爼姊虹捄銊ユ瀾闁哄绮穱濠囧炊椤掞拷缁犳煡鏌涢弴銊ョ仩閹喖姊洪幐搴㈢┛闁圭兘顥撻惀顏嗙磼閵忕姷浠稿┑顔硷攻濡炰粙鐛崱姘兼Ь缂備胶濮锋晶妤冩崲濠靛鏅稿ù鐘差儐閻掕偐锟藉箍鍎遍幊鎰八囬纰辨富闁靛牆妫涙晶閬嶆煕鐎ｎ剙浠遍柛鈺傜洴楠炲鎮╅悽纰夌闯濠电偠鎻紞锟芥い鏇熺墵閹偞绂掔�ｎ偆鍘撻梺鍛婄懀閸庡磭绮ｉ弮鍫熺厸鐎癸拷閿熶粙宕伴弽顓炵畺闁绘垼濮ら崑瀣煕椤愶絿绠栭柣蹇撳娣囧﹪濡堕崶顬儵鏌涚�ｎ偆娲寸�规洦鍨辩�靛ジ寮堕幋鐘垫瀫闂備礁婀遍搹搴ㄥ窗閺嶎偆鐭嗛悗锝庡亖娴滄粓鏌熼搹鐟颁沪閻庢氨鎳撻—鍐Χ閸涱収鍔夐梺鍦焾婢ц棄危閹版澘绠婚悗娑櫭鎾绘⒑閸涘﹥灏扮憸鏉垮暣瀹曟粓骞嶉鍓э紳婵炶揪缍佸褎鎱ㄩ崒姣懓顭ㄩ崘顏勭厽闂佺粯渚楅崳锝夌嵁閸ヮ剙绾ч悹渚厛濡茬増淇婇悙顏勶拷鏍涙担绛嬫毎闂備胶鎳撻崲鏌ュ箹椤愶箑鐓橀柟杈惧瘜閺佸﹪鏌ｉ幇闈涘婵炲牆鑻埞鎴︽倷閼碱剚鍕鹃梺绋匡攻缁诲牆顕ｉ锕�绠荤紓浣姑▓鐔兼⒑闂堟侗妾у┑鈥虫喘钘濋柕澶嗘櫆閻擄綁鏌ゆ慨鎰拷鏇熺閿斿墽纾肩紓浣诡焽缁犵偞淇婇銏犳殭闁宠棄顦靛畷锟犳倷閹绘帩妫堥梻鍌氬�峰ù鍥涢崟顖氱柈濞村吋娼欑粣妤呮煛瀹ュ骸骞栭柦鍐枛閺岋繝宕堕埡浣圭亖缂備胶濞�缁犳牠寮诲☉鈶╋拷锕傚箣濠靛洨浜┑鐘愁問閸犳牠藝闂堟侗娼栨繛宸簻娴肩娀鏌涢弴銏℃锭闁告挷鍗冲缁樻媴缁嬭法鐩庣紓鍌氱С缁�渚�顢氶敐鍡欑瘈婵﹩鍘兼禍婊堟⒑缁嬭法绠抽柛妯犲洦鏅搁柣锝呯灱鐢稑菐閸パ嶈含妞ゃ垺绋戦埞鎴﹀幢閺囩喓娼栭梻鍌欐缁鳖喚绱炴担鍓茬劷鐟滄棃宕洪悙鍝勭闁挎棁妫勯敓鐣屽厴閺屻倗鍠婇崡鐐差潻闂佸啿鍢查敃顏勵潖濞差亝鍋￠柡澶嬪椤旓拷闂備胶鎳撻崵鏍箯閿燂拷 "+roleid);
					return true;					
				}
				
				if (fire.pb.fushi.Module.GetPayServiceType() == 1) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴楠炴﹢鎳犻澶嬓滈梻浣规偠閸斿秶鎹㈤崘顔嘉﹂柛鏇ㄥ灠閸愶拷濡炪倖鍔﹀锟界紒顔煎缁辨挻绗熸繝鍐伓濠电姰鍨煎▔娑㈩敄閸曨厽宕查柛鈩冪♁閻撳繘鏌涢锝囩畺闁革絾妞介弻娑㈡晲閸涱喛纭�缂備浇椴哥敮锟犲箖閳哄懏顥堟繛鎴炲笚閻庝即姊绘担鍛婃儓闁活剙銈稿畷浼村冀椤撶姴绁﹂梺绯曞墲閸戠懓危妤ｅ啯鈷戦柟绋挎捣閳藉绱掓径濠勭Ш鐎殿喖顭烽弫鎾绘偐閹绘帟锟藉灝顪冮妶鍡樺暗濠殿喚鍏樺鎶藉Χ閸涱亝鏂�濡炪倖姊婚妴瀣绩缂佹ü绻嗛柣鎰閻瑩鏌曢崱鏇狀槮閾绘牠鏌涘☉鍗炴灍婵炲懌鍨藉鐑樺濞嗘垵鍩岄梺娲诲墮閵堟悂骞嗗畝鍕缂備焦锚閿熺晫鏁婚弻锝夊閻樺啿鏆堟繛瀛樺殠閸婃繈寮婚悢椋庢殝闁哄瀵т簺婵＄偑鍊ら崑鍛崲閸儯锟戒礁螖娴ｅ摜绐為柣搴稻閹稿爼宕濋幋婵愭綎闁惧繗顫夊畷澶愭煏婵炲灝鍔滈柣蹇撴閳规垿鍩ラ崱妞剧盎闁诲孩鍑归崰姘跺礆閹烘梹瀚氱�瑰壊鍠栭幃鎴炵節閵忥絾纭鹃柨鏇畵閺佸秹鎮㈤崗灏栨嫽婵炴挻鑹惧ú銈嗘櫠椤斿墽纾煎璺侯煬閸ょ喓绱掗纰辩吋闁诡喒鏅濋幏鐘绘嚑椤掑鏅ｉ梻鍌欑濠�閬嶅煕閸儱鍌ㄥΔ锝呭暙閸屻劍绻濇繝鍌涘櫧缁惧墽鏅敓钘夌畭閸庡崬螞濞戞瑦娅犻柣銏犳啞閻撴盯鎮橀悙闈涗壕缂侊拷鐎ｎ剨鎷风憴鍕闁告鍥х厴闁硅揪绠戠粻娑欍亜閹剧绱￠柛銉ｅ妷閹疯櫣绱撻崒娆戝妽閽冮亶鎮樿箛鏇烆暭缂佺粯鐩幊鐘活敆閿熶粙寮稿☉姘炬嫹濞堝灝鏋涙い顓㈡敱娣囧﹪骞栨担鍝ュ幐闂佺鏈惌顔捐姳娴犲鈷掑ù锝勮閻掗箖鏌￠崼顐㈠缂侇喗鐟╅獮瀣晜缂佹ɑ娅嗛梻浣芥硶閸ｏ箓骞忛敓锟�? by changhao
				{
					DSTeamMatchInfo config = ConfigManager.getInstance().getConf(DSTeamMatchInfo.class).get(targetid);
					if (config == null)
					{
						psend(roleid, new STeamError(TeamError.NoTarget));
						TeamManager.logger.debug("FAIL:CRequestTeamMatch:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К缂備胶鍋撻崕鍐差焽閿熺姴钃熼柨婵嗩槸椤懘鏌曡箛濠冩珖闁告梹鎮傚鍝勑ч崶褝鎷峰┑鍫笉闁哄稁鍘奸拑鐔猴拷骞垮劚椤︻垱瀵奸悩缁樼厱闁哄洢鍔屾晶顔界箾閸滃啰鎮肩紒杈ㄦ尰閹峰懘鎮烽弶娆炬綌婵＄偑鍊戦崝灞轿涘▎鎴犵煔閺夊牄鍔庣弧锟介梺鎼炲労閻忔稖顦归柡灞剧☉閳藉宕￠悙瀵镐邯婵犵數鍋涢幊宀勫磹濠靛棭娼栭柧蹇撴贡閻瑦绻涢崱妯哄姢闁告挻婢橀—鍐Χ韫囨洜绐楅梺鍛婎殙濞呮洘绌辨繝鍥ㄥ仺缂佸娉曢ˇ鏉款渻閵堝棛澧い鏇＄簿椤﹀綊鏌＄仦鍓р槈闁宠棄顦靛畷锟犳倷閸忕瀵查梻鍌欒兌缁垶骞愮拠鍙傛盯宕橀…鎴炵稁婵犵數濮甸懝鍓у閸忓吋鍙忔慨妤�妫楁晶楣冩煙妞嬪骸鍘存鐐寸墬閹峰懘宕妷顖滀覆闂傚倷鑳剁划顖炲垂閸忓吋鍙忛柕鍫濐槸绾惧綊鏌涜椤ㄥ棝鎮￠妷鈺傜厸闁告劖瀵х�氬綊姊鸿ぐ鎺撴暠缂佽鐗撻悰顔跨疀閺冩垶效闁硅壈鎻徊鍧楁偩鐠鸿　鏀介柣鎰綑閻忥箓鎷戦崡鐑嗙唵閻犲搫鎼顓㈡煛鐏炲墽銆掗柨鐔告灮缁茶姤鏅舵惔锝呭К闁跨喍绮欏娲传閸曨剚鎷卞┑鐐插级椤洭骞戦姀鐘闁靛繆锟界鎷烽柨瀣ㄤ簻闁瑰搫绉烽崗宀�鎲搁幍顔兼灈婵﹦绮幏鍛存嚍閵夛綇鎷烽崘顏嗙＜闁跨喕濮ょ粭鐔兼晸娴犲锟戒線寮介妸銉х獮闂佸綊鍋婇崜婵嬪箺閺囥垺鈷戦梻鍫熷崟閸儱鐤炬繝濠傜墕绾惧鏌涢埄鍐檨闁绘挻娲熼幃姗�鎮欓幓鎺嗘寖闂佸疇妫勯ˇ浼村Φ閸曨喚鐤�闁靛绠戦锟� "+roleid);
						return true;					
					}						
				}
				else
				{
					STeamMatchInfo config = ConfigManager.getInstance().getConf(STeamMatchInfo.class).get(targetid);
					if (config == null)
					{
						psend(roleid, new STeamError(TeamError.NoTarget));
						TeamManager.logger.debug("FAIL:CRequestTeamMatch:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К缂備胶鍋撻崕鍐差焽閿熺姴钃熼柨婵嗩槸椤懘鏌曡箛濠冩珖闁告梹鎮傚鍝勑ч崶褝鎷峰┑鍫笉闁哄稁鍘奸拑鐔猴拷骞垮劚椤︻垱瀵奸悩缁樼厱闁哄洢鍔屾晶顔界箾閸滃啰鎮肩紒杈ㄦ尰閹峰懘鎮烽弶娆炬綌婵＄偑鍊戦崝灞轿涘▎鎴犵煔閺夊牄鍔庣弧锟介梺鎼炲労閻忔稖顦归柡灞剧☉閳藉宕￠悙瀵镐邯婵犵數鍋涢幊宀勫磹濠靛棭娼栭柧蹇撴贡閻瑦绻涢崱妯哄姢闁告挻婢橀—鍐Χ韫囨洜绐楅梺鍛婎殙濞呮洘绌辨繝鍥ㄥ仺缂佸娉曢ˇ鏉款渻閵堝棛澧い鏇＄簿椤﹀綊鏌＄仦鍓р槈闁宠棄顦靛畷锟犳倷閸忕瀵查梻鍌欒兌缁垶骞愮拠鍙傛盯宕橀…鎴炵稁婵犵數濮甸懝鍓у閸忓吋鍙忔慨妤�妫楁晶楣冩煙妞嬪骸鍘存鐐寸墬閹峰懘宕妷顖滀覆闂傚倷鑳剁划顖炲垂閸忓吋鍙忛柕鍫濐槸绾惧綊鏌涜椤ㄥ棝鎮￠妷鈺傜厸闁告劖瀵х�氬綊姊鸿ぐ鎺撴暠缂佽鐗撻悰顔跨疀閺冩垶效闁硅壈鎻徊鍧楁偩鐠鸿　鏀介柣鎰綑閻忥箓鎷戦崡鐑嗙唵閻犲搫鎼顓㈡煛鐏炲墽銆掗柨鐔告灮缁茶姤鏅舵惔锝呭К闁跨喍绮欏娲传閸曨剚鎷卞┑鐐插级椤洭骞戦姀鐘闁靛繆锟界鎷烽柨瀣ㄤ簻闁瑰搫绉烽崗宀�鎲搁幍顔兼灈婵﹦绮幏鍛存嚍閵夛綇鎷烽崘顏嗙＜闁跨喕濮ょ粭鐔兼晸娴犲锟戒線寮介妸銉х獮闂佸綊鍋婇崜婵嬪箺閺囥垺鈷戦梻鍫熷崟閸儱鐤炬繝濠傜墕绾惧鏌涢埄鍐檨闁绘挻娲熼幃姗�鎮欓幓鎺嗘寖闂佸疇妫勯ˇ浼村Φ閸曨喚鐤�闁靛绠戦锟� "+roleid);
						return true;					
					}					
				}
				
				Long clanfightid = xtable.Roleid2clanfightid.select(roleid);
				if (clanfightid != null)//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆欑穿闂備浇娉曢崰鎰板几閼姐倗涓嶉柟鎯х－閺嗭箓鏌ｉ幘鍐茬槰闁绘柨妫欑换婵嬫濞戞艾顤�闂佹悶鍊ч幏閿嬩繆閻愵亜锟姐倝宕戦崨顖涘床闁告洦鍨扮粻鏌ユ煕閺囥劌鐏￠柟顖滃仱閹綊宕堕敐鍛拤閻炴皜鍕瘈闁汇垽娼у暩闂佽桨鐒﹂幃鍌氱暦閹达附鍊烽柛婵嗗閻庮參姊洪崨濠冨矮缂侊拷娓氾拷瀵悂宕奸～顔藉妤犵偛鐏濋崝姘亜瑜濋幏椋庣磽閸屾氨校闁绘濞�瀵鏁撻悩鑼�為梺宕囧皑閹烽绱掗崡鐐碉紞闁瑰弶鎮傞幃褔宕煎┑鍫㈡噯缂傚倷绶ら幏鐑芥煕瀹�锟介崑鐐烘偂閺囥垻鍙撻柛銉ｅ姀婢规ê霉濠婂啯璐＄紒杈ㄥ笧閿熸枻缍嗘禍婵嗩啅濠靛牏纾奸弶鍫涘妽鐏忎即鏌熷畡鐗堝殗鐎规洦鍋婂畷鐔哄枈婢跺顏堕梺瑙勫劤婢у海澹曟總鍛婄厾缁炬澘宕晶顔济瑰鍐ㄢ挃缂佽鲸甯掗悾婵嬪礃椤斿吋鎳欑紓鍌欒兌缁垳鎹㈤崼婵堟殾闁割偅娲橀崵瀣煕椤垵浜濋柣婵愬亜閳规垿鎮╅崹顐ｆ瘎婵犳鍠楅幐鎶藉极閸愵喖围濠㈣泛锕﹂弻鍫濐渻閵堝棗濮х紒鑼跺亹閹广垽宕卞☉娆戝弰闂婎偄娲﹂幐鑽ゆ嫻閿涘嫮妫柟瑙勫姈椤ュ妫佹径鎰叆婵犻潧妫Σ瑙勭箾閹冲嘲鍟犻弨浠嬫煃閵夈劌鐨洪柣顓熺懇閺岋紕浠︾拠璇ф嫹濞戙垹桅闁圭増婢樼粻鎶芥煛閸愩劌锟界懓袙閸ヮ剚鈷掑ù锝堟閵嗗﹪鏌￠崒姘拷鍨暦閺囥垹绠甸柟鐑樼箓濞堫偊姊洪崨濠冨闁搞劍澹嗙划璇测槈濞嗗秳绨婚梺鍦劋閸ㄥ灚绂嶉悙鐑樼厱闁绘棃顥撻悞鍛婃叏婵犲嫮甯涢柟宄版嚇瀹曘劍绻濋崒娑欑暭闂傚倷绀侀幉鈥愁潖瑜版帒鍨傞柛顭戝枤閺嗭附绻濋棃娑欘棤闁哄棗妫濋弻銊╂偄閻戞ɑ鐝梺鍛婂笚鐢偤骞忛悩缁樺殤妞ゆ帊鐒﹂鏇㈡⒒娴ｈ鍋犻柛搴櫍瀵彃鈹戠�ｎ偅娅栧┑鐘绘涧濞层劎绮绘ィ鍐ㄧ骇闁割偅绻傞埛鏃傜磼婢舵ê澧柕鍥у瀵挳鎮㈤崫鍕ㄥ悅闂備礁纾划顖炲箲閸パ屽殨妞ゆ洩鎷烽柡浣规尰缁傛帞锟斤綆锟筋叏绠撻弻娑㈠即閵娿儳浠梺鍝勬噺缁捇寮婚敐澶婄疀闂傚牊绋戦～顏勨攽椤曞棛鍒伴柣妤�妫滈悘鍐⒑缂佹﹫鑰挎繛浣冲嫮顩锋繝濠傜墛閻撱儵鏌￠崶顭嬵亪鏁撻懞銉ф创闁诡喗锕㈠畷姗�顢欑憴锝嗗闂備礁鎲＄粙鎴︽晝閿濆洦顐介梺顒�绉甸悡鏇熸叏濡ゅ瀚圭紓浣哄У閻楃姴顕ｉ銏╁悑闁告侗浜濋悗濠氭⒑閻熸澘鈷旈悶娑栧劦楠炲繘鎼归崷顓狅紳闂佺鏈悷褔宕濆澶嬪珔閺夊牄鍔婃禍婊堟煏婢跺牆鍔ゅ褝绠撻弻鈥崇暆鐎ｎ剛鐦堥梺杞扮劍閹歌崵绮嬮幒鏃撴嫹閿濆骸浜為柛鏂跨埣閹鐛崹顔煎闁诲孩绋堥弲鐘差嚕閺屻儱鐓涢柛娑卞枓閹锋椽姊虹涵鍛汗闁稿鐩畷婵嬪箻椤旂晫鍘遍梺鍦亾濞兼瑩宕ú顏呯厱闁冲搫鍊诲ú瀛橆殽閻愬樊鍎旈柡浣稿�块幃鍓т沪閽樺鐤勬繝鐢靛Х閺佹悂宕戦悙鍝勫瀭闁割偅娲橀弲婵囥亜閹板墎鐣辩紓浣叉櫅閳规垿鎮╁畷鍥舵殹闂佺粯鎸鹃崰鏍蓟閻旂厧绠查柟閭﹀幘閵嗘劙姊洪崫鍕靛剱闁烩晩鍨跺濠氭晬閸曨亝鍕冮梺鍛婃寙閸曨偄鐏￠梺璇插椤旀牠宕抽锟藉畷婊冣槈閵忕姷顔夐梺鍛婃处閸ㄧ増鍎柣鐔哥矊閻厧危閹邦儵鐔烘偘閳╁啯鏉搁梻浣虹帛閸旀浜稿▎鎾崇闁绘鏁哥壕鍏笺亜閺冨洤浜归弫鍫澪旈悩闈涗粶闁哥喐娼欓悾鐑藉箳濡や礁锟介攱銇勮箛鎾愁劉閻庢氨鎳撻湁闁挎繂鎳庨ˉ蹇旂箾鐏忔牗娅婇柡灞诲�楃划娆戞崉閵娿倗椹虫繝鐢靛仜閹冲矂宕归搹瑙勫床婵炴垶鐔幏鐑芥偨濞堣法鍔搁悗娑欑箓椤啴濡堕崱妤冧淮闂佺娅曢敃銏ょ嵁韫囨稑绠ｉ柨鏃囨娴滄粓姊虹粙璺ㄧ闁稿鍔欏畷锝夊幢濞戞瑢鎷虹紓鍌欑劍钃辩紒锟介敓浠嬫⒑缁嬪尅宸ユ繝锟介柆宥嗘櫢闁兼亽鍎抽崯鏌ユ煙閸戙倖瀚�? by changhao
				{ 
					fire.pb.talk.MessageMgr.sendMsgNotify(roleid, 410040, null);
					return true;
				}
								
				Long teamid = xtable.Roleid2teamid.select(roleid);
				
				Team team = null;
				
				final java.util.ArrayList<Long> roleids = new java.util.ArrayList<Long>();
				if(teamid != null)
				{
					team = TeamManager.getTeamByTeamID(teamid);	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閳╁啯鐝曢梻浣藉Г閿氭い锔诲枤缁辨棃寮撮姀鈾�鎷绘繛杈剧秬濞咃綁濡存繝鍥ㄧ厱闁规儳顕粻鐐烘煙閽樺锟藉鏁撻弬銈囩У闁哥姵鐗犻幃娆愮節閸愶缚绨婚梺鐟版惈缁夊墎鎷归悧鍫滅箚妞ゆ劑鍨归弳娆撴煃鐟欏嫬鐏撮柟顔界懃椤斿繘顢欓崗纰卞晙濠碉紕鍋戦崐鏍暜閻旇桨鐒婃繛鍡樺灦椤洟鏌ｉ幇顒夊殶闁荤喎缍婇弻銊╂偄缂佹﹩妫勫銈嗘穿缂嶄線銆侀弴銏℃櫇闁跨喓鏅划鍫ュ礃閳瑰じ绨婚梺鍝勫暙濞层倖绂嶈ぐ鎺撶叆婵炴垶鐟ч惌濠囨煃鐟欏嫬鐏存い銏＄懇瀵剟濡堕崼顒佸閻犳亽鍔庡Λ顖涖亜閹捐泛顎岄柣鎺楃畺瀹曗剝娼忛妸锝勭盎闂佸搫绋侀崑鍕閿曞倹鐓冮梺鍨儏缁楁帡妫佹径鎰叆婵犻潧妫欑粊鈺呮煟閹烘柨浜鹃柕鍥у婵＄兘濡疯椤旀帡姊洪崫鍕拱缂佸鎹囬弫鎾诲棘閵堝洨校婵炲瓨绮嶇换鍫ｆ＂闂侀潧娴氬渚�骞忔搴㈠枂闁告洦鍓涢ˇ顓熺節閳凤拷閸曞灚鐤佸Δ鐘靛仜濡繂顕ｉ锟藉畷鐓庘攽閹邦厾绉遍梻鍌欒兌缁垵鎽悷婊勬緲閸熸挳鏁愰悙瀵哥瘈闁搞儯鍔夐幏濠氭⒑缁嬫寧婀伴柤褰掔畺閺佹捇鎳為妷锕�锟芥劗锟借娲橀崝娆撶嵁閺嶃劍濯撮柛婵勫劵缁鳖噣姊绘担鍝ョШ婵☆偉娉曠划鍫熸媴閸濆嫷妫滈悷婊呭鐢鎮″▎鎾粹拻闁稿本鍑归崵鐔搞亜閿旇偐鐣甸柡宀嬬秮婵¤埖鎯旈埄鍐邯闂傚倸娲らˇ鐢稿蓟濞戞粎鐤�闁规崘娅曢崐顖滅磽閸屾氨校闁搞劌婀卞Σ鎰板箳濡わ拷缁犳稒銇勯幘妤�瀚弳顓㈡⒒娴ｈ姤纭堕柛鐘虫礀铻為柛鏇ㄥ幘娑撳秶锟藉箍鍎遍ˇ顖滃閸ф鐓曟俊銈呭暕缁辫櫕绻涘顔荤凹闁哄懏绻堥弻娑樼暆鐎ｎ亶娲紓浣割儏缁绘ê顫忓ú顏勪紶闁告洦鍓欓崑宥夋⒑閹肩偛濡芥俊鐐扮矙楠炲啴鏁撻悩鍐蹭簻闂佺绻楅崑鎰板储閻㈠憡鈷掑〒姘搐瀵法绱掗悩鍐茬伌鐎殿喚顭堥埥澶愬閿涘嫬骞堥梻浣告惈閸婂綊顢栧▎鎾崇？闁哄啫鐗婇悡娑氾拷鐧告嫹閻庯綆鍓涜ⅵ婵°倗濮烽崑鐐烘晝閵忕姷鏆﹂柨鐔哄У閸婄兘鏌熺紒妯轰刊婵炲吋鐩濠氬磼濮橆剨鎷风粙妫垫椽濡舵竟锕�娲幃鐣岀矙閼愁垱鎲伴梻渚�娼ч…鍫ュ磿椤曪拷瀵劍绂掔�ｎ偆鍘遍梺铏嫕閹风兘鏌￠崨顔剧煉闁糕斂鍨介獮姗�寮妷锔芥澑闂備礁鐤囧Λ鍕涘Δ浣侯洸婵犻潧顑嗛悡鏇㈡煏婵炲灝鍔滈悹鎰ㄥ墲娣囧﹪宕ｆ径濠傤潚濡ょ姷鍋炵敮锟犵嵁濡櫣鏆﹂柛銉㈡櫇瀹撲礁鈹戦悩鍨毄闁稿鍋ゅ畷褰掑醇閺囩喎浠梺闈涱槴閺呪晠寮崒鐐寸叆闁绘洖鍊圭�氾拷 by changhao
					
					if (!team.isTeamLeader(roleid))
					{
						psend(roleid, new STeamError(TeamError.SelfNOtLeader));
						TeamManager.logger.debug("FAIL:CRequestTeamMatch:婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊鐒﹂崕鎾绘⒑閹肩偛濡奸柛濠傛健瀵鈽夐姀鈺傛櫇闂佹寧绻傚Λ娑⑺囬妷褏纾藉ù锝呮惈灏忛梺鍛婎殕婵炲﹤顕ｇ拠娴嬫婵☆垶鏀遍弬锟介梻浣告啞濞诧箓宕戦崟顒佸弿闁靛繈鍊栭埛鎴炵箾閼奸鍤欐鐐搭殜閺岀喖鎮烽悧鍫熸倷濡炪値鍋勭换鎴犳崲濠靛棭娼╂い鎺戝閺佸綊姊绘担铏瑰笡闁哄被鍔戝畷鏌ュ蓟閵壯冪ウ闂婎偄娲︾粙鎺楀煕閹达附鐓欑紒瀣閹癸絿绱掗悩铏鞍闁靛洤瀚伴弫鍌滄嫚閼碱兛鍖栫紓鍌欑贰閸犳牠鈥﹂悜钘夌畺闁绘垼妫勭粻鐘测攽閻樻彃锟借崵绮斿ú顏呯厸濞达絿鎳撴慨宥囷拷瑙勬磸閸旀垿銆佸锟介幃娆撳礈娴ｄ警锟斤拷闂傚倸鍊搁崐椋庣矆娴ｈ櫣绀婂┑鐘插亞閻掕棄鈹戦悩瀹犲缂佺媭鍨堕弻锝夊箣閿濆憛鎾绘煃闁垮娴柡灞剧〒娴狅箓宕滆閸ｎ垶姊虹粙璺ㄧ闁活剝鍋愬Σ鎰板箳濡ゅ﹥鏅梺鍛婁緱閸樼偓绂掗幖浣瑰�垫繛鍫濈仢閺嬫稒銇勯銏℃暠濞ｅ洤锕獮鏍ㄦ媴閸濄儱骞愬┑鐐舵彧缁插�熴亹閵娾晛鍗抽柕蹇ョ磿閸樹粙鏌熼崗鍏煎剹闁搞劌纾划鏃堟偨閸涘﹦鍙嗛梺缁樻濞咃綁骞楅崒鐐寸厱闁靛鍔嬮崥顐︽煛娓氬洤娅嶉柡浣规崌閹晠妫冨☉姘ュ亰闂傚倷鐒﹂幃鍫曞磿濞差亜绀堥柨鏇炲�搁弸渚�鏌涢弴銊ョ仭闁绘挾濞�閺岀喖顢橀悢椋庣懆闂佸憡鏌ㄩ悺銊ф崲濞戙垹绀傞柛蹇曗拡濡啫鈹戦纭峰姛缂侇噮鍨堕獮蹇涘川椤栨粓鈹忛柣搴秵閸嬪棛绮旈悜鑺モ拻濞达絼璀﹂悞鎯旈悩鍙夋喐濠㈣娲熼、姗�鎮㈤搹鐟伴獎闂備礁鎼ú銏ゅ春閸曨垰鏋侀柛銉墯閻撶喖鏌熼柇锕�澧伴柟鐣屽█閺岋綁鏁冮敓浠嬫煀閿濆拋娼栧┑鐘宠壘绾惧吋鎱ㄥ鍡楀⒕闁归鍏橀幃婊堟嚍閵夈儲鐣遍梻浣稿閸嬪懎煤瀹ュ鏅搁柡鍌樺�楅悾鐢碉拷瑙勬礀閵堝憡鎱ㄩ敓浠嬫煃閵夈儱鏆辩紒銊ｅ劦濮婄粯鎷呮笟顖涙暞闂佽妞挎禍顏勵潖娴犲绀嬫い鏍ㄦ皑閺屟冣攽閻樼粯娑фい鎴濇閹ょ疀濞戞艾褰勯梺鎼炲劀鐏炶棄澹堥梻浣芥硶閸犳洘鎱ㄩ妶鍚ゅ搫顭ㄩ崨顓炵亰婵犵數濮电喊宥夊磻閹邦噯鎷风憴鍕婵炲眰鍔戦、娆撳即閵忊檧鎷洪梺鑽ゅ枑婢瑰棝骞楅悩缁樼厽闁绘梹娼欓崝锕傛煙椤旀儳浠滈悡銈嗐亜韫囨挻鍣介柛妯烘啞缁绘稒娼忛崜褎鍋у銈庡幖閻楁捇寮幘缁樺癄濠㈣泛顑呮禒鎾倵濞堝灝鏋︽い鏇嗗洤鐓″鑸靛姇椤懘鏌ｅΟ璇茬祷缂佷緡鍣ｅ缁樼瑹閿熻棄顭囪閳ワ箓宕奸妷銉э紵婵犵數濮甸懝鍓х不椤栫偞鐓熼柟杈剧到琚氶梺鍝勬噺閻擄繝寮诲☉妯锋婵☆垳灏ㄩ幏鐑芥偡閹锋梹鐩畷姗�濡歌濞堥箖姊洪棃娴ュ牓寮查埡鍛瀬濠电姴娲﹂悡娆愩亜閺嵮勵棞闁哥喍鍗抽幃鍧楀礋椤栨稈鎷婚梺绋挎湰閼归箖鏁撴禒瀣垫缂侇喖鐗婄粭鐔兼晸娴犲宓侀柡宥庡弾閺佸啴鏌曢崼婵囶棞闁绘繀鍗冲铏圭磼濡搫顫岄梺鍦拡閸嬪嫰顢欒箛鎾斀闁搞儯鍎扮花濠氭⒑閸濆嫯鐧侀柛鏇ㄥ亝椤忕偤姊绘担鍛婂暈婵﹤缍婂畷褰掓偨闂堚晝绋忛棅顐㈡处閹峰煤椤忓秵鏅滈梺鍛婃处閸嬪棝鎮伴埡浣叉斀闁绘ê鐏氶弳鈺佲攽椤旂⒈鍤熼柟骞垮灲楠炲洭寮剁捄銊у幀闂備礁鎼ú銏ゅ垂濞差亜鐓曢柟杈鹃檮閻撶喖鏌ｉ弬鎸庡暈缂佽泛寮剁换娑㈠醇濮橆厽鐝氶梺鍝勭灱閸犳牕鐣峰▎鎾澄ч柛鈩冾殢娴硷拷 "+roleid);
						return true;						
					}
					else if (team.getTeamInfo().getMembers().size() >= TeamManager.MAX_MEMBER_COUNT)
					{
						psend(roleid, new STeamError(TeamError.TeamFull));
						TeamManager.logger.debug("FAIL:CRequestTeamMatch:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ锟藉鍝勑ч崶褝鎷烽妶澶婄獥闁哄稁鍘界粻鎺楁⒒娴ｄ警鐒剧紒缁樺姍瀹曘儳锟斤綆鍓涚粈濠囨煙鐎电啸缁炬儳銈搁弻鐔兼焽閿曪拷瀵偓绻涢崼鐕傝�块柡灞诲姂閹垻绱掑鍡橆棄缂傚倷鑳舵慨瀵哥矓閻熸壆鏆﹂柡鍥ュ灩绾拷闂佽绻掔划顖氼渻娴犲鏋侀柛鎰靛枛绾惧ジ鏌ㄩ弬鍨挃闁崇鍊濆缁樻媴閸涘﹥鍎撳┑鐐茬湴閸ㄨ棄鐣烽悷鎳婃椽顢旈崨顓濈暗闂備胶绮弻銊╁触鐎ｎ喗鍋傛繛鍡樻尰閳锋垶銇勯幘鍗炲闁伙絽宕…鑳檨闁搞劌鐖煎璇差吋閸モ晝锛滃┑鈽嗗灥瀹曠敻藝娴煎瓨鈷戦柛婵嗗閻掕法绱撳鍕獢闁绘侗鍠栭～婊堟晸閽樺鏆﹂柨鐔哄У閸婄兘鏌熺紒妯洪唶闁哄洢鍨洪埛鎺懨归敐鍛暈闁诡垰鐗撻弻銈吤虹拠鑼化缂備緡鍠楀濠氬箟閹绢喖绀嬫い蹇撴閻ｉ箖姊绘担铏瑰笡闁搞劎鍘ц灋闁告洦鍓欓崝鏃堟⒒閸屾瑧绐旀繛浣冲洦鏅煫鍥ㄧ☉缁�瀣⒒閸喓鈾侀柣锝変憾濮婂宕掑顒婃嫹閹间礁纾瑰瀣捣閻棗銆掑鐐濡ょ姷鍋為〃鍛粹�﹂妸鈺侀唶婵犻潧顑嗛敍妤呮⒒娴ｇ懓顕滄繛鍙夌墵瀹曟劙宕妷褌绗夊銈嗙墱閸嬬偤鎮￠妷鈺傜厽闁哄洨鍋涢敓钘夋贡閿熻姤鐔幏锟� "+roleid);
						return true;						
					}
					
					team.getTeamInfo().setTargetid(targetid);
					team.getTeamInfo().setMinlevel(levelmin);
					team.getTeamInfo().setMaxlevel(levelmax);
					
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗娉涢埞鎴︽偐濞堟寧娈扮紓浣虹帛缁诲倿鈥﹂崶顏嶆▌闂佹寧绻勯崑娑⑩�﹂妸鈺侀唶闁绘柨鎲￠鐔封攽閻愬樊鍤熷┑顔芥尦椤㈡牠宕ㄩ婊�绗夐梺鍝勭▉閸樹粙鎮￠悢鍏肩厵闂侇叏绠戦弸娑㈡煕閺傛鍎旈柡宀嬬節瀹曘劑顢欓崜褏鍘滈梻浣告惈鐞氼偊宕愬┑瀣祦濞撴熬鎷锋鐐村浮楠炲鈹戦崱鈺傛笎闂傚倸鍊烽懗鍓佸垝椤栨粍宕查柛鏇ㄥ灠缁�鍌涙叏濡ゅ瀚瑰Δ鐘靛仜閸燁偉鐏冮梺鍛婁緱閸ㄦ壆绮婇敃鍌涒拺闁告捁灏欓崢娑㈡煕閻樺磭澧柟渚垮妽閹棃鍩ラ崱妯虹槣闂備線娼ч悧鍡欐崲閹扮増鍎婃繝濠傜墛閻撴洟鏌曟繝蹇曠暠闁崇粯娲熼弻鈩冩媴鐟欏嫬纾抽梺鐟扮－閸嬨倖淇婇悜钘壩╅柕澶樺枟椤ャ倕鈹戦敍鍕杭闁稿ě鍜冩嫹闂堟稓鐒哥�规洖缍婂畷濂稿即閻愬吀绱滈梻浣瑰濮婂宕戦幘宕囨殾濠㈣埖鍔栭悡蹇撯攽閻樿尙绠抽柣锝堜含閻ヮ亞绱掗姀鐘典画缂備胶绮惄顖炵嵁濮楋拷瀵爼骞嬪┑鍥╂闂傚倷鐒﹂幃鍫曞礉韫囨柣浠堥柟闂寸閻ら箖鏌曟径鍡樻珕闁抽攱甯￠弻娑氫沪閸撗勫櫘闂佸憡鏌ㄧ粔鍨┍婵犲洦鍊烽柡澶嬪焾閸ゅ绱撴担绋匡拷鍝ョ矓瑜版帒绠栨繝濠傜墛鐎电姴顭跨捄铏圭劸闁哥偟鏁诲缁樻媴閼恒儳銆婇梺闈╃秶缁犳捇鐛箛娑欐櫢闁跨噦鎷�  by changhao
					roleids.addAll(team.getAllMemberIds());
					this.lock(xtable.Locks.ROLELOCK, roleids);
				}
				else
				{
					roleids.add(roleid);
				}
				
				Long roleidteamId = xtable.Roleid2teamid.get(roleid);
				if (teamid != roleidteamId)
				{
					psend(roleid, new STeamError(TeamError.UnkownError));
					TeamManager.logger.debug("FAIL:CRequestTeamMatch:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ锟藉鍝勑ч崶褝鎷烽妶澶婄獥闁哄稁鍘界粻鎺楁⒒娴ｄ警鐒剧紒缁樺姍瀹曘儳锟斤綆鍓涚粈濠囨煙鐎电啸缁炬儳銈搁弻鐔兼焽閿曪拷瀵偓绻涢崼鐕傝�块柡灞诲姂閹垻绱掑鍡橆棄缂傚倷鑳舵慨瀵哥矓閻熸壆鏆﹂柡鍥ュ灩绾拷闂佽绻掔划顖氼渻娴犲鏋侀柛鎰靛枛绾惧ジ鏌ㄩ弬鍨挃闁崇鍊濆缁樻媴閸涘﹥鍎撳┑鐐茬湴閸旀垵鐣锋导鏉戠閻犲搫鎼ⅲ闂備浇娉曢崰宥囧垝濞嗗浚娼栭柛婵嗗珔瑜斿畷鎯邦槾濞寸姴銈稿铏规嫚閼碱剛顔夐悗鐧告嫹闁归棿绀佺粻鏍ㄧ箾閸℃ɑ灏紒鐘烘珪娣囧﹪濡堕崟顕呭敼闂佺懓鍢查…宄邦潖閾忓湱鐭欓柟绋垮閹烽亶姊洪懡銈呮殌闁搞儰绀佸ú顓㈠极閸愵喖纾兼繛鎴炶壘楠炲秶绱撴担鍝勪壕婵犮垺锚閻ｇ兘顢楁担渚锤婵炲鍘ч悺銊╂偂濞嗘劑浜滈柡鍌濐嚙婵″吋绻涚仦鍌氾拷婵嬫偘椤曪拷婵拷闁挎稑瀚鏇㈡煟鎼淬垻鈾侀拑杈╃磼鐠哄搫绾х紒缁樼☉椤斿繘顢欓悡搴ｇ潉闂備線娼уΛ鏃傜矆娓氾拷閸┿儲寰勬繛銏㈠枛閺屻劎锟斤綆鍋呭鎴︽⒒閸屾瑧顦﹂柟娴嬶拷瓒佹椽鏁傞悾宀婃锤濠电娀娼ч鍡涘磿閹捐崵鍙撻柛銉ｅ妽鐏忋劑鏌￠敓鑺ョ鐎ｎ偆鍘藉┑顔筋殔濡寮稿☉銏＄厽闊洦绋愰幉楣冩煛鐏炲墽娲撮柛鈺嬬節瀹曟帒顭ㄩ崘锝嗗闂佽姘﹂～澶娒哄Ο鍏煎床闁割偅绻嶉崵鏇㈡煙缂併垹鏋熼柛瀣姍閺岋綁濮�閵忊剝姣勯梺鍛婃煥閻栫厧顫忕紒妯诲闁兼亽鍎抽妴濠囨⒑闂堚晝绉剁紒鐘虫崌閻涱喛绠涘☉娆愭闂佽法鍣﹂幏锟�? "+roleid);
					return true;
				}
				
				if (!checkTeamState(team, roleid)) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺屽秹鏌ㄧ�ｎ亝璇為梺鍝勬湰閻╊垶銆侀弴銏犖ч柛娑卞枤閿熻棄顭峰娲川婵犲海鍔烽梺绋跨箲閿曘垹顕ｆ繝姘╅柕澶堝灪閺傦拷闂備胶纭跺褔寮插鍕珡闂傚倸鍊风粈渚�骞栭锕�绠犻煫鍥ㄦ礀閸ㄦ繈鏌熼幑鎰靛殭闁藉啰鍠栭弻銊╁即椤忓懎顏堕梺鍙ョ串缁蹭粙濡撮幒鎴僵闁绘挸娴锋禒顓㈡⒑瀹曞洨甯涢柟鐟版搐椤繐煤椤忓嫮顔愰梺缁樺姌椤曟粓骞忛悜钘夌闁挎洩鎷风痪鎹愵潐缁绘繈妫冨☉鍗炲壈缂備胶濮甸悧妤佺┍婵犲洤围闁告侗鍠栧▍褔鎮楃憴鍕矮缂佽埖宀稿璇测槈閳垛晪鎷烽敃鍌氱婵犻潧娲ㄦ禍顏勨攽閻樻剚鍟忛柛鐘崇墬椤ㄣ儵骞栨担鍝ュ幋闂佺鎻梽鍕磹閻戣姤鐓犵痪鏉垮船婢ь垶鏌涢弴銏㈢暫婵﹨娅ｇ划娆撳礌閳╁啯鏆版俊鐐�戦崝宀勬晝椤忓牏宓侀柛鎰靛枟閸嬵亝銇勯弽鐢电ɑ闁宠鏈换婵嗏枔閸喗鐏堥梺鎸庢穿婵″洭宕氶幒妤婃晬闁绘劘灏欓鍡涙⒑閸涘﹦鈽夐柣掳鍔戝畷鎰磼濡寮垮┑掳鍊ч幏閿嬩繆椤愶絾顥堟鐐差儔閹粓鎳為妷銏″濠电偠鎻徊鍧楀磿閵堝鍚归柨鐔剁矙濮婃椽骞栭悙璇ф嫹閺嶎厽鍋嬮柣妯垮吹瀹撲線鐓崶銊р檨闁哄懏鎮傞弻銊╂偆閸屾稑顏�? by changhao
				{
					psend(roleid, new STeamError(TeamError.TeamStateError));
					TeamManager.logger.debug("FAIL:CRequestTeamMatch缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃闁硅櫕鎹囬垾鏃堝礃椤忓孩瀚归柨婵嗙凹缁ㄥジ鏌熼惂鍝ョМ闁哄矉缍侀、姗�鎮欓幖顓燁棧闂傚倸娲らˇ鐢稿蓟閵娿儮鏀介柛鈩兩戦幃娆撴⒑濮瑰洤濡介柛銊ユ健瀵鎮㈡搴㈡疂闂佸搫顦扮�笛傜昂濠碉紕鍋戦崐銈夊磻閸涱垱宕查柛顐犲劘閿熸垝绀侀～婊堟晸娴犲绠栭柕蹇嬪�曟导鐘绘煕閺囥劌浜濇い鎾炽偢濮婂宕掑▎鎴М闂佺顕滅换婵嬪Υ閸愨晝绡�闁告劦浜跺ú鎼佹⒑閸撴彃浜濇繛鍙夌墵閹锋垿鎮㈤崗鑲╁帾婵犵數鍋熼崑鎾斥枍閸涘瓨鐓曟俊銈勭閳绘洟鏌″畝瀣М妤犵偛娲、娑㈡晲閸涱喚鏉洪梻鍌欑缂嶅﹪藟閹捐绀傛俊顖濇閺嗭附銇勯幇鍓佺暠閸烆垶鎮峰鍐闁诡喚鍋炵缓浠嬪川婵犲偊鎷烽悽鍛婄厽鐟滃秹骞夐敍鍕舵嫹濮橆剛绉烘慨濠呮閹瑰嫰濡搁妷锔撅拷铏圭磽娓氬洤鏋熼柣鐔叉櫊閹即顢欓挊澶岀獮闂佸綊鍋婇崜娑㈩敊閹邦厾绠鹃弶鍫濆⒔閹ジ鏌熼搹顐ｅ鞍缂佸倸绉归弻鍡楊吋閸″繑瀚奸梻浣告啞閹告槒銇愰崘鈺冾洸婵犻潧鐗忕壕濂告偣閸ャ劌绲绘い蹇ｅ弮閺岀喖顢欓幆褍骞嬫繝纰樺墲閹倿宕洪敓鐘茬＜婵犲﹤鍟粻娲⒒閸屾瑧绐旀繛浣冲懏宕查柛鈩冪☉閻ょ偓绻涢幋娆忕仾闁稿﹤鐖奸弻宥夊Ψ閿旂晫浼囬梺鐚存嫹濞寸姴顑嗛悡鐔兼煙闁箑鐏遍柛銈咁儔濡懘顢楁径濠傤潽濡炪們鍔婇崕鐢稿箖濞嗘挸绠甸柟鐑樻尰椤斿嫰姊洪崜褏甯涢柣妤冨█瀵鈽夊Ο閿嬵潔闂佸憡顨堥崑鐔哥閳哄啰纾藉ù锝夘棑缁涘繒绱掗悩铏碍妞ゎ偄绻愮叅妞ゅ繐瀚ˇ顓㈡⒑閼测斁鎷￠柛鎾寸懅閺侇噣濡烽埡鍌楁嫼闂佸憡绺块崕杈ㄧ墡缂備胶鍋撳妯肩矓閸撲礁鍨濋悗锝庡枛缁犳娊鏌熼幆褍鑸瑰ù婊勭箞濮婃椽宕ㄦ繝鍌氼潊闂佸搫鍊风欢姘剁嵁韫囨稒鎯為柛锔诲幘閿涙繃绻涢幘纾嬪婵炲眰鍊濋幃姗�鍩勯崘顏嗩啎闂佸憡鐟ラˉ銏ゎ敂閸繄鍘洪悗骞垮劚椤︻垶鐛姀锛勭闁糕剝锚閻忊晠鏌ㄥ☉娆戠煉闁哄矉绲鹃幆鏃堫敍濠婂憛锝夋⒑缁嬫鍎忛柟铏姈缁傚秹骞栨担鐟颁缓闂佸憡绋戦敃锕傚储闁秵鈷戦柛锔诲幖閸斿鏌熼崫銉劸闂囧銇勯弴顏呭闂佸搫鏈惄顖炲春閿涘嫸鎷烽敐搴″闁伙箑鐗撻幃妤冩喆閸曨剙顦╂繛瀛樼矋缁诲牓鐛箛娑樺窛妞ゆ牗绋戦弸鍌炴⒑閸涘﹥澶勯柛鎾寸閵囨劙濡搁敂鍓х槇闂佹眹鍨藉褍鏆╅梻浣芥〃閻掞箓骞冮崒姘辨殾闁硅揪闄勯崐鐑芥煕濠靛棗顏╅柣搴弮濮婃椽宕滈幓鎺嶇凹濠电偛寮堕敃銏犵暦閹达附鏅柛鏇ㄥ墮閺嬫垿姊洪崫鍕殭闁绘妫涚划濠氬冀椤撶喓鍘遍悷婊冮叄閵嗗啴宕卞☉妯兼煣缂備礁顑嗛敍鏇°亹閹烘挸浜归悗鐟板閸犳牠宕滈柆宥嗏拺闁规儼濮ら弫閬嶆偨椤栨稑娴繝锟芥笟锟藉娲箰鎼达絿鐣甸梺鐟板暱缁绘ê鐣烽鐐村�烽柣鎴烆焽閸橀亶姊虹紒妯荤叆闁圭⒈鍋呯粋鎺楁焼瀹ュ棛鍘搁柣蹇曞仱濞煎骞忓畡鎵殾闁搞儯鍔嶉悾鐑芥⒑鐠囨彃鍤辩紓宥呮瀹曟粌鈽夐姀鈥冲墾闂佸壊鍋侀崕鏌ュ煕閹达箑绾ч柣鎰綑椤ュ鏌涢弬璺ㄐч柡宀�鍠栭幃鐑芥偋閸喐鍊烽梻浣风串缁插潡宕楀锟介悰顕�宕堕浣镐罕闂佸壊鍋呯换锟界紒銊ヮ煼濮婄粯鎷呴崨濠傛殘缂備礁鎼鈥崇暦閺囥垹纭�闁绘劏鏅滈～宥夋偡濠婂嫭鐓ユい顐㈢箳缁辨帒螣鐠囧樊锟芥捇姊洪幆褏绠抽柟铏尵缁參鏁嶉崟顓狅紳婵炶揪绲介幉锟犲箚閸喓绠鹃悘蹇旂壄閹峰嘲鐣烽崶銊︻啎闂備礁婀辨晶妤�顭垮锟藉畷锟犲箮閼恒儳鍘棅顐㈡处濞叉牕鏆╅梻浣告啞閻熼亶骞忛柨瀣瘈闁汇垽娼цⅷ闂佹悶鍔岄妶绋跨暦濞差亜鍐�妞ゆ挾鍋熼ˇ顕�姊洪崫鍕窛濠殿噣鏀辩粙澶婎吋婢跺鍘炬繝娈垮枟閸旀洟鏁撶粣鏍ф搐缁狀垰顪冪�ｎ亜顒㈤柛鐘叉閺屾盯寮撮妸銉ヮ潾濡炪倧璐熼崕閬嶅煘閹达附鍊风�瑰壊鍠楅鍡欑磽娴ｅ搫校闁圭顭烽獮鍫ュΩ閳哄倹娅㈡繛瀵稿Т椤戝棝鎮¤箛娑欑厱妞ゆ劧绲跨粻鏍ㄣ亜閵壯冣枅闁哄本绋戦～婊堟晸閽樺鐒界憸鏃堝灳閺冨牆绀冩い鏂挎瑜旈弻娑㈠焺閸愬じ绶靛┑顔硷攻鐎笛呮崲濠靛棌鏋旈柛顭戝枟閻忎線姊虹粙鍖℃敾妞ゃ劌妫涚划瀣吋婢跺﹦顔愭繛鎾磋壘濞诧箓寮查敐澶嬧拺缂備焦蓱閳锋帞绱掔紒妯肩畼闁奸缚浜幏鐘差啅椤旇棄鐦滈梻渚�娼ч悧鍡椢涘Δ浣瑰弿闁挎洖鍊归悡鏇㈡煙閹呮憼闁汇劍鍨块弻銊╂偄鐠囨畫鎾绘煟閺冩垵澧存鐐茬箻閺佹捇鏁撻敓锟�? "+roleid);
					return true;
				}
				
				if (!checkTeamMemberNum(team)) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺屽秹鏌ㄧ�ｎ亝璇為梺鍝勬湰閻╊垶銆侀弴銏犖ч柛娑卞枤閿熻棄顭峰娲川婵犲海鍔烽梺绋跨箲閿曘垹顕ｆ繝姘╅柕澶堝灪閺傦拷闂備胶纭跺褔寮插鍕珡闂傚倸鍊风粈渚�骞栭锕�绠犻煫鍥ㄦ礀閸ㄦ繈鏌熼幑鎰靛殭闁藉啰鍠栭弻銊╁即椤忓懎顏堕梺鍙ョ串缁蹭粙濡撮幒鎴僵闁绘挸娴锋禒顓㈡⒑瀹曞洨甯涢柟鐟版搐椤繐煤椤忓嫮顔愰梺缁樺姌椤曟粓骞忛悜钘夌闁挎洩鎷风痪鎹愵潐缁绘繈妫冨☉鍗炲壈缂備胶濮甸悧妤佺┍婵犲洤围闁告侗鍠栧▍褔鎮楃憴鍕矮缂佽埖宀稿璇测槈閳垛晪鎷烽敃鍌氱婵犻潧娲ㄦ禍顏勨攽閻樻剚鍟忛柛鐘崇墵閺屽﹪鏁愭径濠呮憰闂佹寧绻傚Λ娆撳磿閻斿吋鐓忛煫鍥ㄦ礀瀛濆┑顕嗙到閻楁挸顫忓ú顏勫窛濠电姴瀚崳褔姊洪崫銉ユ瀾闁瑰憡濞婇幃浼搭敋閿熻棄鐣烽崡鐐╂婵☆垳鍘ч敓鐣屽仱濮婃椽妫冨ù銈嗙〒娴狅箓宕滆閸嬫帡姊婚崒娆愮グ妞ゆ泦鍥х闁伙絽鐬肩粈濠囨煕閳╁啰鈽夌痪鎯ь煼閺屾盯鍩勯崘顏佹闂佺琚崝鎴﹀蓟閻斿吋鈷掗悗鐢殿焾婵′粙姊洪幎鑺ユ暠闁搞劌娼￠獮鍐亹閹烘垹鐣抽梺鍦劋閸ㄧ敻鈥栭崼婵冩斀闁绘劕寮堕崳娲煕閺冿拷閻熲晛顕ｆ繝姘亜闁绘挸娴烽ˇ鈺呮⒑闂堟稓澧曟俊顐ｎ殜椤㈡棃鏁撻敓锟�? by changhao
				{
					psend(roleid, new STeamError(TeamError.TeamEnoughFull));
					TeamManager.logger.debug("FAIL:CRequestTeamMatch闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ锟藉鍝勑ч崶褝鎷烽妶澶婄獥闁哄稁鍘界粻鎺楁⒒娴ｄ警鐒剧紒缁樺姍瀹曘儳锟斤綆鍓涚粈濠囨煙鐎电啸缁炬儳銈搁弻鐔兼焽閿曪拷瀵偓绻涢崼鐕傝�块柡灞诲姂閹垻绱掑鍡橆棄缂傚倷鑳舵慨瀵哥矓閻熸壆鏆﹂柡鍥ュ灩绾拷闂佽绻掔划顖氼渻娴犲鏋侀柛鎰靛枛绾惧ジ鏌ㄩ弬鍨挃闁崇鍊濆缁樻媴閸涘﹥鍎撳┑鐐茬湴閸ㄨ棄鐣烽悷鎳婃椽顢旈崨顓濈暗闂備胶绮弻銊╁触鐎ｎ喗鍋傛繛鍡樻尰閳锋垶銇勯幘鍗炲闁伙絽宕…鑳檨闁搞劌鐖煎璇差吋閸モ晝锛滃┑鈽嗗灥瀹曠敻藝娴煎瓨鈷戦柛婵嗗濠�浼存煟閳哄﹤鐏︽鐐插暣婵拷闁靛牆妫涢崣鍡涙煟鎼搭垳绉靛ù婊勭箞閹偓绻濆顓涙嫽婵炶揪绲介幉锟犲箚閸儲鍋犳慨妯煎帶娴滄壆锟借娲橀崝鏇＄亙闂佸憡渚楅崢楣冩偘閵夛妇绡�闁汇垽娼у瓭濠电偛鐪伴崐妤�鈽夐悽鍛婃櫢濞寸姴顑嗛埛鎴犵磽娴ｅ顏呮叏閸ャ劋绻嗘い鏍ㄧ啲瀹搞儲銇勯鐐村闁靛牞缍佸畷姗�鍩為悙顒�顏烘繝鐢靛仩閹活亞寰婇挊澶涜�块柛妤冨剳閼板灝霉閻樺樊鍎愰柣鎾存礋楠炴牕菐椤掞拷婵℃椽鏌熼懠顒�浜炬い銊ｅ劦閹瑧鎷犺閸氼偄螖閻橀潧浠滄繛宸弮閵嗕礁鈻庨幋鐘烩攺闁诲函缍嗛崑鍡欑矙閹扮増鈷掗柛灞剧懄缁佺増銇勯銏╂█鐎规洘娲熼獮搴ㄦ嚍閵夈儰妲愰梻渚�娼ч…顓犵不閹达箑鍨傞柡鍐ㄧ墛閸婄敻姊婚崼鐔衡檨闁规彃鎽滈惀顏堝箚瑜嬮崑銏ゆ煙椤旂瓔娈滈柡浣瑰姈閹棃鍨鹃懠璺虹劵闂傚倷鑳堕…鍫㈣姳濞差亜纾块梺顒�绉电粻鎺楁⒒娴ｈ櫣甯涙い顓炵墕閻ｇ兘鎮介崨濠備患濠电偛妯婃禍婵嬫偂濞嗘劑浜滈柡鍐ㄥ�婚幗鍌涚箾閸喐顥堥柡灞界Ф缁辨帒螣鐠囪尙锛撻柣搴ゎ潐濞叉牜绱炴繝鍥ワ拷浣糕枎閹炬潙浠奸柣蹇曞仜閿熺晫鍣ラ崬褰掓⒒閸屾艾锟芥悂宕愰悜鑺ュ殑闁割偅娲栫粻鐘绘煙閹规劦鍤欓柛姘秺閺屸�愁吋鎼粹�崇缂備胶濯崹鍫曞蓟閵娾晜鍋嗛柛灞剧☉椤忥拷 "+roleid);
					return true;												
				}
				
				if (!checkFaction(roleid)) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺屽秹鏌ㄧ�ｎ亝璇為梺鍝勬湰閻╊垶銆侀弴銏犖ч柛娑卞枤閿熻棄顭峰娲川婵犲繗锟藉潡鏌￠敓鑺ユ綇閳哄倸搴婂┑鐐村灟閸ㄥ湱绮婚敐鍡欑闁糕剝顨堢粻鎶芥煕閺冿拷閹稿啿顫忛悜妯诲闁规鍣Σ顔尖攽閳藉棗浜濈紒璇茬墕椤曪絾绻濆顑┾晠鏌嶉崫鍕拷鍛婄濠婂牊鈷戠紓浣姑悘锕傛嫅闁秵鐓熸繝鍨姃闁垱鎱ㄦ繝鍐┿仢鐎规洏鍔嶇换婵嬪礋椤掞拷濞堝繘姊绘担鐑樺殌闁搞倖鐗犻獮蹇涙晸閿燂拷? by changhao
				{
					psend(roleid, new STeamError(TeamError.NoFaction));
					TeamManager.logger.debug("FAIL:CRequestTeamMatch濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓洪梺缁樺姇閻忔岸宕宠缁辨挻鎷呯粙娆炬殺闂佺顑冮崐婵嗩嚕鐠囨祴妲堥柕蹇曞閵婏负浜滈柡鍐ㄥ�哥敮鑸点亜椤愮喐娅囩紒杈ㄦ尰缁楃喐绻濋崘顭戜紦闂傚倷绀佹竟濠囧磻閸℃稑绐楅柟鎹愭硾婵剟鏌ㄩ悢鍓佺煓婵﹤顭峰畷鎺戭潩閸楃儐鏉哥紓鍌欑椤戝棛鏁敓鐘叉瀬鐎广儱顦猾宥夋煕椤愩倕鏋旈柛姗�绠栧娲传閸曞灚歇濠电偛顦板ú妯肩矉閹烘顫呴柕鍫濇－濮婃寧绻濋姀锝呯厫闁告梹鐗犻幃锟犲Ψ閿斿墽鐦堥梻鍌氱墛缁嬫帡藟閻愮儤鐓曢柨婵嗙墱濞兼劙鏌曢崶褍顏┑锛勫厴婵＄柉顦存い鏃�甯″娲传閸曨剚鎷遍梺鐑╂櫓閸ㄥ爼鐛崘顔碱潊闁靛牆妫涢崣鍡涙煟鎼搭垳绉靛ù婊勭箞閹偓绻濆顓涙嫽婵炶揪绲介幉锟犲箚閸儲鐓涢柛顐亜婢ь噣鎮￠妶鍡曠箚妞ゆ牗鐟ㄩ鐔兼煕閵堝棭娈滈柡灞剧洴瀵挳濡搁妷褌鍝楅梻鍌欑瀹曨剙煤閿旂偓宕叉繝闈涱儏閸ㄥ倹銇勯幇鍓佸埌闂傚绉归弻锝嗘償椤厺瀛╁銈庡亜椤︽壆绮氭潏銊х瘈闁搞儺鐏涜閺屾稑鈽夐崡鐐茬濠电偛鐗嗛悥鐓庮潖閾忓湱纾兼俊顖濆亹閻擄拷婵＄偑鍊ら崢楣冨礂濡警鍤曞┑鐘宠壘鎯熼梺鍐叉惈閸婂憡绂嶉悙鐑樷拺缂佸瀵у﹢鎵磼鐎ｎ偄鐏存い銏℃閺佹捇鏁撻敓锟� "+roleid);
					return true;					
				}
				
				if (!checkActiveTime()) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺岋綁骞樼�靛憡鍣紓浣介哺閹稿骞忛崨顔藉弿闁规惌鍘虹花鑲╃磼瀹�鍕喚妞ゃ垺绋戦埥澶婎潩妲屾牕鏅梻鍌欑濠�閬嶅磻閹捐绀堟慨妯垮煐閸嬪倸鈹戦崒姘暈闁绘挻鐩幃姗�鎮欓幓鎺嗘寖濡炪値鍓欓崥瀣Φ閸曨垱鏅濆ù锝呮贡瑜把囨⒑闂堟稒鎼愰悗姘卞娣囧﹪骞栨担鑲濄劑鏌ㄩ弴顏呭濠电偛鎲為崨顖滐紳婵炴挻鑹惧ú銈夊几濞戙垺鐓熸俊銈忔嫹闁挎洏鍊濋、姘跺Ψ閳轰胶顦板銈嗙墬濮樸劑鎮块敓鑺ヤ繆閻愵亜锟芥牠骞愰悙顒佸弿閻庨潧鎲￠弳婊堟煙椤栧棴鎷烽柡锟芥禒瀣厽婵☆垵娅ｆ禒娑㈡煛閸″繑娅婇柡灞剧〒閿熸枻缍嗛崑鍡椕洪幘顔界厵妞ゆ梻鐓鍫濈厴闁瑰濯撮幏鐑芥晲鎼存繄鏁栧銈忓瘜閸ｏ絽顫忓ú顏咁棃婵炴垶鑹鹃。鍝勨攽閻愯尙婀撮柛鏂跨焷閻忓顪冮妶鍡欏⒈闁稿鍋ら幃鈥斥枎閹扳晙绨婚梺鍝勮癁閸曞灚顥ｉ梻浣规た閸撴瑩濡剁粙璺ㄦ殾闁靛／宥嗗闁挎繂楠搁弸鐔兼煃闁垮鐏撮柡灞剧☉閳规垿宕卞Δ濠佺磻闂備胶绮敮鐔封枖閺囩姵顫曢柟鐑樻⒒绾惧吋淇婇婵嗕汗闁汇倕瀚伴幃妤�鈻撻崹顔界彯闂佺顑呴敃顏堟偘椤斿槈鐔烘兜闁垮顏堕梻鍌氱墛缁嬫垿藟韫囨梻绠鹃柡澶嬪灥椤忣參鏌″畝瀣ɑ闁诡垱妫冮、娑橆煥閸涘拑缍佸铏圭矙濞嗘儳鍓伴柣搴㈢煯閸楀啿顕ｉ锕�绠婚悗闈涘濞村嫰鏌ｆ惔顖滅У闁稿鎳樺鎶芥偐缂佹ǚ鎷洪梻鍌氱墛缁嬫帡骞栭幇鐗堝�垫慨姗嗗亜瀹撳棝鏌ｅ☉鍗炴珝妤犵偞甯￠獮瀣敇閻愭潙锟筋垶姊绘担瑙勫仩闁稿海鍎ょ粋宥夋倷閻戞ê浠掗梺闈涱檧婵″洨寮ч敓鐣岀磼閸撗冾暭闁挎洦鍋婇獮蹇涙倻閼恒儲鍎銈嗗姉閸犳劙鎮橀崱娑欌拻濞达綀顫夐崑鐘绘煕閺傝法绠伴柍缁樻煥閳藉锝為鍓р棨闂傚鍋勫ú锕�顫忛懡銈呭К闁跨喕妫勯埞鎴︻敊閺傘倓绶甸梺鍛婃尰閻╊垶寮鍜佺叆闁割偆鍟块幏娲⒑閸︻収鐒鹃悗娑掓櫊钘熼柛鈩兠肩换鍡樸亜閹扳晛鐏╂い蹇ｅ幗閵囧嫰濮�閳╁喚妫冮梺杞扮劍閹瑰洭寮幘缁樻櫢闁跨噦鎷�? by changhao
				{
					psend(roleid, new STeamError(TeamError.ActiveNotOpen));
					TeamManager.logger.debug("FAIL:CRequestTeamMatch濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愰崨鍌滃枛瀹曨偊宕熼锟介敓钘夐叄濮婅櫣绱掑Ο铏圭懆闂佹寧娲忛崕鍨繆閻㈢绀嬫い鏂垮⒔閺夋悂姊虹憴鍕婵炲鐩崺娑㈠醇閵夛腹鎷洪柡澶屽仦婢瑰棝藝閿斿浜滈柟瀛樼箖閸犳ɑ顨ラ悙宸█鐎规洏鍔嶇换婵嬪礃閵娿儱韦闂傚倷绶氬褔鈥﹂崼銉ョ？闁规儼濮ら崑顏堟煕閺囥劌鐏￠柍閿嬪灴濮婂宕奸悢宄扮闂佸壊鍋侀崕閬嶆偪閻愵剛绠鹃柟瀛樼懃閻忣亪鏌涚�ｎ亜锟藉湱鎹㈠☉銏犵婵炲棗绻掓禒楣冩⒑缂佹ɑ灏版繛鍙夘焽閹广垹鈽夐姀鐘殿吅濠电娀娼уΛ婊堝春閻愬弬鏃堟偐闂堟稐娌梺缁橆殘婵烇拷鐎殿喖顭烽弫鎰板川椤忓懏鏉搁梻浣规偠閸婃洘绔熸繝鍐洸妞ゅ繐鐗嗛悘鎶芥煛閸愩劎澧曠紒锟介崘鈹夸簻闁哄倹瀵ч～宥囨喐閺冨牆钃熸繛鎴炃氬Σ鍫ユ煕濡ゅ啫浠уù鐙�鍨伴—鍐Χ閸℃鍙嗗┑鐐叉▕閸欏啫顕ｆ繝姘櫜闁糕剝锚閸斿懘姊洪棃娑氱濠殿喗娼欒闁割偁鍎查埛鎴︽煕濠靛嫬鍔氶弽锛勭磼閻愵剚绶茬紒澶婂閸掓帡鍩￠崨顔间簻闂佺粯鎸告绋跨暤閸℃稒鈷戠紓浣股戦ˉ鍡樼箾閸滃啰绉柟顖欑窔瀹曠厧鈹戦崘鈺傛澑婵＄偑鍊栧褰掑几缂佹鐟规繛鎴欏灪閻撴洘鎱ㄥΔ瀣缂備胶濮甸悧鏇㈡偩閻戣棄顫呴柕鍫濇噽椤旀劖绻涙潏鍓у埌闁告ɑ绮撻獮蹇撁洪鍛幗闂佺粯锚閸樻牠鎳滈鍫熺厱闁哄倽鍎荤�氫即鏌嶇拠鑼ф鐐叉喘閹囧醇閵忕姴绠ラ梻鍌欑閹诧繝宕归鐐茬９闁哄稁鍋撻幏宄邦潩閻愵剙顏�? "+roleid);
					return true;						
				}
				
				/*if (fire.pb.buff.Module.existState(roleid,
						BuffConstant.StateType.STATE_INSTANCE_ZONE)) {
					psend(roleid, new STeamError(TeamError.SelfInUnteamState));
					TeamManager.logger.debug("FAIL:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簻椤掋垺銇勯幇顖毿撻柟渚垮妼椤粓宕卞Δ锟介埛鎺楁⒑缂佹ê绗傜紒顔界懇瀵濡堕崱妯哄伎闂佸綊鍋婇崜銊╁箯閻戣棄鍐�妞ゆ劦鍓氱�氳鎱ㄥ鍡楀⒒闁绘挸銈搁弻鈥崇暆鐎ｎ剛袦閻庢鍣崳锝呯暦閹烘埈娼╂い鎴ｆ硶鐢稓绱撻崒姘拷椋庢閵堝绠�瑰嫰鍋婇悢鍡涙煠閹间焦娑у┑顔肩墦閺屾稒绻濋崒婊冪厽闂佸搫鐭夌紞渚�鐛崶顒夋晣闁绘劗鏁搁妶鐑芥⒒娴ｇ懓鈻曢柡锟介崡鐐嶆盯宕橀鑹版憰闂佹寧绻傞幊澶愬绩娴犲鐓曢柍鈺佸暟閹冲啴鏌ｉ幘璺烘灈婵﹥妞藉畷顐﹀礋椤掍焦瀚抽梻浣哄劦閺呪晠宕规潏銊р攳濠电姴娲﹂崐鑽ょ磼濞戞﹩鍎愰柡鍛櫊濮婅櫣绱掑Ο璇茬闁诲骸鐏氱敮鎺椻�﹂崶銊х瘈婵﹩鍘搁幏娲煟閻樺弶澶勭憸鏉垮暣椤㈡濮�閵堝棛鍘鹃悷婊呭鐢偤鎮惧ú顏呭癄婵犻潧鏋硅ぐ鎺戠闁稿繗鍋愮粙鍥ㄤ繆濡わ拷閹虫ê顫忓ú顏勫窛濠电姴鍟ˇ鈺呮⒑閹肩偛濡藉鐟版閸掓帗绻濆顓熸珳婵犮垼娉涢鍥矗閸℃せ鏀介柣妯肩帛濞懷勪繆椤愶絿鎳囩�规洘濞婇幃鐑藉箥閾忣偅鏉告俊鐐�栧褰掑磿閹惰棄鍌ㄩ悗娑櫳戦崣蹇撯攽閻樻彃鏆為柕鍥ㄧ箘閿熷�燁潐濞插繘宕濆鍥ㄥ床婵犻潧锕﹂悿锟介柟鑹版彧缂嶏拷缂佺粯鍨垮濠氬磼濞嗘埈妲梺纭咁嚋缁绘繈鐛幇顓滃亝闁告劑鍔庨悰銉╂⒑閸濆嫯鐧侀悘鐐跺Г椤撳潡姊洪懡銈呅㈡繛璇у缁﹪寮堕幊绛圭秮瀹曞ジ濡烽敂鎯у妇闂傚鍋勫ú銈夋晝閵堝棙娅犻柛娆忣槺缁犻箖鏌涘☉鍗炰簻闁诲繐寮堕幈銊︾節閸涱噮浠╅梺鍦嚀鐎氱増淇婇幖浣肝ㄩ柨鏃�鍎崇紞鎺楁⒒閸屾瑨鍏岄柟铏崌瀹曠敻寮介鐐殿唵闂佽法鍣﹂幏锟�? "+roleid);
					return true;
				}*/

				if (checkPvP(roleid) != 0) {
					return true;
				}

				addTeamMatch(roleid, roleidteamId); //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閸ㄥ倸螖閿濆懎鏆欑紒鐘崇☉闇夐柨婵嗘噺鐠愶紕绱掔�ｂ晞鍏岀紒杈ㄦ崌瀹曟帒顫濋濠冨闁绘垼濮ら崐鍧楁煥閺囨氨鍔嶉柟鍐茬焸濮婄粯鎷呴崨濠傛殘闂佽崵鍠嗛崕鎶藉箲閵忋倕绠虫俊銈勭劍濞呫垽姊虹粙鍖″姛闁革絻鍎遍…鍥箛椤撶姷顔曢梺鍛婄懃椤﹁鲸鏅堕鍫熷亗闁靛牆顦伴悡蹇撯攽閻愰潧浜炬繛鍛噽閻ヮ亪顢橀妸锕�顏舵繝鐢靛У椤旀牠宕板Δ鍛拷锕傚醇閵夈儲妲梺鍝勭▉閸樿偐澹曡ぐ鎺撶厱妞ゎ厽鍨垫禍鐐电磼閻樿崵鐣洪柡宀�鍠撻敓鐣屾暩椤牊绂掕閺岀喖鎼归銏狀潚闂佸搫鐭夌紞渚�鐛幒鎴悑闁搞儮鏅濋崢顖炴⒒娴ｅ憡鎯堥柤娲诲灣缁棃宕滄担璇℃綗闂佸湱鍎ら崵锕傛偄閸忕厧锟藉鏌嶉崫鍕拷鎼侇敂閹间焦鈷掗柛灞剧懅缁愭梹绻涙担鍐插幘濞差亜围闁搞儵鏀辩�氳鎱ㄥΟ鐓庡付闁诲骏绲跨槐鎺楊敊濞嗘儳娈梺瀹犳椤﹀灚鎱ㄩ敓浠嬫煟濡椿鍟忛柛鐔奉儔濮婄粯鎷呴崫銉ㄥ銈忕秶缁犳垿鈥旈崘顔肩婵°倧鎷风紒鐘崇墵閺屻劌鈹戦崱鈺傂ч梺鎶芥敱鐢帡婀侀梺鎸庣箓閻楀﹪顢旈悩缁樺仺妞ゆ牗绋撳ú鎾煛瀹�瀣埌閾绘牠鏌涢幇鈺佸闁挎繂娲ㄧ壕濂告煕鐏炵偓鐨戦懖鏍⒑閸︻厽鍤�閻庢凹鍘剧划顓㈡偄绾拌鲸鏅┑鐐村灦濮樸劑鍩㈡径濞炬斀闁绘ê鐏氶弳鈺呮煕鐎ｎ偆鈽夐摶锝呪攽閻樻彃鏆熸い鈺佸级缁绘繃绻濋崒娑樻濠碘槅鍋掗崹鎶藉箟閹间礁绫嶉柛顐ｇ箘閻ｆ椽鎮峰鍛暭閻㈩垱甯炵划濠氬箳濡や胶鍘甸梺缁樺灦閿氶柣蹇嬪劜閵囧嫰濡烽妷鈺佸及濠殿喖锕ュ钘壩涢崘銊㈡婵浜弶浠嬫⒒娴ｄ警鐒鹃柨鏇樺劦閹囨偐鐠囪尙鐣洪梺璺ㄥ枔婵挳宕￠幎鑺ョ厪闊洢鍎崇壕鍧楁煕濡粯宕岄柡灞稿墲瀵板嫮浠﹂幋鎺撳媰濠电姵顔栭崹顖滃垝濞嗗繒鏆︽俊銈忔嫹闁伙絾绻堝畷鐔碱敆閸屾艾绠洪梻鍌氼煬閸嬪嫬煤閿斿墽鐭欓柟鐗堟緲缁犵喎螖閿濆懎鏆為柣鎾寸〒閿熺晫娅㈤幏鐑芥煥閻斿墎鐭欑�规洑鍗冲浠嬵敇濠婃劖瀚瑰ù锝呭濞尖晠鎮归崫鍕儓闁兼澘鐏濋埞鎴﹀煡閸℃浠ч柣鐙呮嫹闁挎棁妫勯閬嶆煥閻曞倹瀚�? by changhao
								
				SRequestTeamMatch msg = new SRequestTeamMatch();
				msg.levelmin = levelmin;
				msg.levelmax = levelmax;
				msg.targetid = targetid;
				msg.typematch = typematch;
				
				for (Long roleid : roleids)
				{
					mkdb.Procedure.psendWhileCommit(roleid, msg);					
				}
				
				return true;
			}
			
		};
		requestteammatch.submit();	
	}
	
	private void addTeamMatch(long roleid, Long teamid)
	{
		xbean.TeamMatch teammatch = xbean.Pod.newTeamMatch();
		
		teammatch.setRoleid(roleid);
		teammatch.setLevelmin(this.levelmin);
		teammatch.setLevelmax(this.levelmax);
		teammatch.setTargetid(this.targetid);
		teammatch.setMatchtype(typematch);
		teammatch.setOnekeytimestamp(0);
		teammatch.setTimestamp(0);
		
		TeamManager.getInstance().addTeamMatch(teammatch, teamid);			
	}
	
	private boolean checkTeamState(Team team, long roleid) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撻弻锝夋偐鏉堫偒鍔呴梺缁樻尭椤︾敻鐛箛鏃戞Ч閹兼番鍨归弸鍌炴⒑閸涘﹥澶勯柛鎾寸洴钘濋柕澶堝劗閺�浠嬫煟閹邦垰鐨烘繝锟介幘顔界厱濠电姴鍟扮粻鎾绘煟閿濆洤鍘撮柟顔惧厴楠炲秹鎼归锝嗘緫闂傚倷绀佹竟濠囧磻閹烘绀堟慨妯诲敾閹峰嘲顫濋幇浣圭秷濡炪們鍔婇崕鐢稿箖濞嗘挻鍤戞い鎴ｅ劵濡炬悂姊绘担鍛婂暈婵﹤婀遍崰濠傤吋婢跺á锕傛煕閺囥劌鐏￠柡鍛矒閺屾盯鈥﹂幋婵囩亪缂備椒绶￠崳锝咁潖閾忕懓瀵查柡鍥╁枑閻濇洟姊洪悜鈺傛珦闁搞劌鐖奸幃浼搭敊閸㈠鍠栭幊鏍煛閸愯法搴婂┑鐘殿暯濡插懘宕归幎钘夊偍鐟滄棃鎮伴鍢夋棃宕ㄩ瑙勫濠电偠鎻徊浠嬪箟閿熺姴绠氶柛顐犲劜閻撴洖鈹戦悩鎻掞拷鍦嫻閿熺姵鐓ラ柣鏃傚劋濞呮洟鏌ｉ悢绋库枙鐎规洘鍎奸ˇ鎾煟閿濆鐣烘慨濠冩そ瀹曟粓骞撻幒宥囨寜闂備焦鎮堕崝蹇撶暦閻㈤潧鍨濆┑鐘宠壘缁秹鏌涢銈呮灁闁告鏁婚弻鈩冨緞婵犲嫬鈪电紓浣哄У閻楁洟鈥栨繝鍥舵晪闁跨喍绮欏璇差吋婢跺鍙嗛柣搴秵娴滅偞瀵煎畝鍕拺閻犲洠锟借櫕鐏堢紓鍌氱Т閿曘倝鎮鹃悜钘夐唶闁哄洨鍠愬▍婊堟椤愩垺澶勯柡灞诲姂椤㈡棃宕奸弴鐔叉嫼闂佸憡绋戦敃銈嗘叏閸垺鍠愰柡澶婄仢閺嗙喓绱掗纰辩吋妤犵偛绉归、娆撳礈瑜濈槐鎶芥⒒娴ｄ警鐒鹃柡鍫墴閹柉顦寸紒顔荤祷缁犳稑鈽夊▎鎴濆箥闁诲海鎳撶�氼厼顭垮Ο浣曪絾绻濆顓犲帾闂佺硶鍓濋敋缂佹甯楅妵鍕敃閿濆洨鐤勯梺璇″枟閻熲晠銆佸Δ鍛櫢濞寸姴顑愰弫鍌炴煠缁嬪灝鎮佺紒璇叉閺屾洟宕煎┑鍥ㄦ倷闁哥喐鎮傚铏圭矙濞嗘儳鍓辩紓浣割儐閹瑰洭鐛幋锕�顫呴柣娆欐嫹婵炵鍔戦弻銊╂偄閸撲胶鐓撻梺璇″枙閸楁娊銆佸▎鎴濇瀳闁告鍋為崐顖氣攽閻橆喖鐏遍柛鈺傜墳閹筋偊姊洪崫鍕濞存粠浜滈～蹇涙惞閻熸澘顕ч梺鍝勬川閸嬫盯鍩涙径鎰拺闁圭娴烽。鏌ユ煏閸パ冾伂缂佺姵绋戦～婵嬵敇閻橆噯鎷烽幇鐗堢叄缂備焦顭囨晶鐢告煛瀹�瀣埌妞ゎ偅绮撻弫鎾绘寠婢舵鍔烽悷婊冩捣缁骞掗幋顓犲弳闂佸壊鍋嗛崰鎾诲储娴犲顥婃い鎰╁灪婢跺嫭鎱ㄦ繝鍛惞缂侇喖顭烽幃娆撴倻濡厧骞嶆俊鐐�栧褰掑几婵犳碍鍤�闁圭绨烘禍婊堟煏韫囧﹤澧叉い銉ョ墢閿熷�燁潐濞叉牠濡堕幖浣哥畺闁靛繈鍊曟导鐘绘煕閺囥劌浜為柣銈呭濮婂宕掑顒婃嫹妞嬪海鐭嗗〒姘炬嫹鐎规洦鍨跺畷绋课旈敓鐣岀不鐟欏嫨浜滈柟鏉垮閻ｈ京鐥崜褎鍤�闁宠鍨块幃鈺冿拷鍦Т椤ユ繈寮堕埡鍌滅疄婵﹥妞藉畷鐑筋敇閻愭彃顬嗘繝娈垮枛閿曘劌鐣烽崹顐ょ彾闁哄洢鍨圭粈鍌滅磼濡ゅ嫭銆冪紒銊ヮ煼濮婃椽宕崟顐ｆ濠电偞娼欓崐鎼佲�﹂崶顒�绠涙い鎾跺Х椤旀洟姊洪崨濠佺繁闁告瑥绻樺銊︾節濮橆厾鍘梺鎼炲劀閸愬彞绱斿┑鐘愁問閸ｎ垶骞忛悜鑺モ拺闁圭娴烽埥澶愭倵濮橈拷閸忔拝缍佸畷濂稿Ψ閿旇瀚奸梺璇查濠�杈ㄦ叏閻㈡潌澶嬪緞鐎ｃ劋绨婚梺鎸庢椤曆囨倶閿曞倹鐓曢柍鐟扮仢閻忊晜銇勯幘鍐叉倯鐎垫澘瀚敓鏂ょ秵娴滄瑧鍒掗敓鐘斥拺閻犲洦鐓￠崣鍕箾娴ｅ啿娲ょ粻鐑樼節婵犲倻澧曟慨瑙勭叀閺屾洟宕煎┑鎰ч梺鎶芥敱閸ㄥ潡寮诲☉妯锋斀闁糕剝顨忔禒鎯р攽閻欏懏瀚归梺瑙勵問閸犳氨澹曟總鍛婂�甸柨婵嗛娴滄粓鏌ｈ箛鏃�灏﹂柡灞诲妼閳规垿宕煎┑鍛崟闂備礁鐤囬～澶愬垂瑜版帗鏅搁柡鍌樺�楃粔闈浢瑰鍛槐閽樻繃銇勯幘鍗炵仾闁稿鍓濈换婵囩節閸屾碍娈剁紓浣哄Ь瀹曠敻鏁撻懞銉晱闁哥姵顨嗙换娑欑節閸パ呯暫闂佸啿鎼崯鎵閸忛棿绻嗘い鏍ㄧ矊鐢埖顨ラ悙鎼疁婵﹦绮换婵囨償閳ヨ尙鐩庢繝鐢靛仩椤曟粎绮婚幘鑽ゅ祦闁规壆澧楅崵鎺楁煏閸繃宸濋柣鎺戞健閺岋絾鎯旈婊呅ｉ梺鍝ュУ椤ㄥ﹪骞冮敓鐘插嵆闁靛骏绱曢崣鍡椻攽閻樼粯娑ф俊顐ｇ〒缁鐣烽崶鈺冿紲婵犮垼鍩栭敋闁哄鍊濋弻銊╂偄鐠囨畫鎾淬亜閺冿拷閻楃姴鐣锋导鏉戝唨妞ゆ挻鍐婚幏鐑芥晝閸屾稑锟藉鏌﹀Ο渚Ч闁诲寒鍓熷娲偡閺夊簱鎸冪紓渚囧櫘閸ㄨ泛顕ｉ弻銉ョ濞达絽婀遍崣鍡涙⒑缂佹ɑ绀�闁稿﹤婀遍敓鑺ョ啲閹凤拷? by changhao
	{
		if (this.typematch == 0 && team == null)
		{			
			return true;
		}
		
		if (this.typematch == 1 && team != null)
		{
			return team.isTeamLeader(roleid);
			
		}
		
		return false;
	}
	
	private boolean checkLevel() //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺岋綁骞樼�靛憡鍣伴梺鍝勭灱閸犳牠銆佸☉妯锋婵炲棙鍨甸崵鎺楁煟閻愬顣茬�癸拷缁嬫娼栭柧蹇撴贡閻瑦绻涢崱妯哄姢闁告搩鍙冨铏圭矙閸栤剝鏁剧紓浣筋嚙閻楀棝顢氶敐鍡欑瘈婵﹩鍘兼禍婊堟⒑缂佹澹橀柣掳鍔庨敓鑺ヨ壘缂嶅﹪寮婚敐澶婎潊闁宠棄妫楅弲閬嶆⒑缂佹ê娴紒鐘崇墪閻ｇ兘顢涘鍛厯闁圭厧鐡ㄩ幐濠氬棘閿熶粙姊绘担鍝ユ瀮婵☆偄瀚灋婵°倓鑳堕々鎻捗归悩宸剱闁绘挻娲熼弻鏇熺節韫囨洜鏆犻梺宕囩帛濞叉﹢銆冮妷鈺傚�风�瑰壊鍠楃瑧婵＄偑鍊ら崑渚�宕硅ぐ鎺撳仼婵犻潧顑嗛弲绋棵归悩宸剱闁稿浜弻銊╂偄閸撲胶鐓撳┑顔硷攻濡炰粙骞冮悜钘夌骇閻犳亽鍔庨埣銈嗙節閻㈤潧浠︽繛鍏肩懃鐓ゆい鎾卞灪閺呮煡鏌ｉ幇顓熺稇缂佸墎鍋涢埞鎴︽偐閺屻儺锟芥绻涢崼顐喊婵﹥妞藉畷銊︾節閸愵煈妲遍梻浣规偠閸斿秵绔熼崱娆忓灊閻犲洦绁村Σ鍫熺箾閸℃小缂併劌顭峰娲捶椤撶偛濡洪梺鎼炲妼閻忔氨绮嬪澶嬪�风紓鍫㈠Х缁犳岸鎮楅悷鏉款棌闁哥姵鐗犻幃姗�鏁傞懞銉ュ伎婵犵數濮寸�氼喚鏁☉銏＄厵鐎瑰嫮澧楅崳鐣岀磼椤旂偓鏆╅柨鐔告灮缂嶅棝宕戦崱娆戠煋闁绘垼濮ら埛鎺懨归敐鍕劅闁绘帗鍎宠灃闁绘娅曢崐鎰拷瑙勬磸閸庢娊鏁撻弬銈囩У闁哥姵鐗滅划濠氭倷閻戞鍘繝鐢靛仧閸嬫挸鈻嶉崨鏉戠倞閻庢稒顭囩弧锟介梺闈涢獜缁插墽娑垫ィ鍐╃叆闁哄浂浜為悾鐢碉拷娈垮枟濡叉帡藝鐟欏嫭鍙忓┑鐘插暞閵囨繄锟借娲橀敃銏犵暦閿濆棗绶為悗锝庝簻婢瑰秹姊婚崒娆掑厡闁硅櫕鎹囧畷顖滄崉閵婏箑搴婂┑鈽嗗灥濞咃綁寮抽敃鍌涚厵閺夊牓绠栧顕�鏌￠崨顔肩祷妞ゎ叀娉曢幑鍕瑹椤栨艾澹嬮梻浣告啞閻熴儱螞濠靛棭娼栭柧蹇撴贡绾惧吋淇婇婵嗗惞妞わ负鍎靛铏圭矙閸栤�充紣濠电媴鎷烽梺顒�绉甸弲鎼佹煠閹帒鍔ら柛鐔哥叀閺岀喖宕欓妶鍡楊伓? by changhao
	{
		if (this.levelmin > this.levelmax)
		{
			return false;
		}
		
		if (this.levelmin <= 0 || this.levelmax <= 0)
		{
			return false;
		}
		
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屾盯骞囬姘卞闂佹眹鍨归…宄邦潖缂佹ɑ濯撮柣鐔煎亰閸ゅ鈹戦悙鎻掔骇闁绘濮撮悾鐑藉箛椤栨ü姹楅梺鍦劋閸ㄥ綊鏁嶅☉銏＄厽閹兼惌鍨崇粔鐢告煕閻樻剚娈滈柟顕嗙節閹垽宕楅懖鈺佸箥闂傚倷绶￠崣蹇曠不閹寸偞娅犳い鏍仦閻撴瑦銇勯弽銊︾殤濠⒀勭♁缁绘盯鎳濋柇锕�娈梺瀹狀潐閸ㄥ綊鏁撻弬銈囩У闁稿鎷烽梺褰掓敱濡炶棄顫忓ú顏勫窛濠电姴瀚уΣ鍫ユ⒑閹稿孩纾搁柛濠冪墵楠炲牓濡搁埡鍌涙珖闂佺鏈粙鎾诲储闁秵鈷戠紓浣光棨椤忓棗顥氭い鎾跺枑濞呯娀鏌ｉ姀銏╂殰闁瑰嘲鍢查埢鎾诲垂椤旂晫浜梻浣侯攰椤曟粎妲愰弴鐘插灊妞ゆ挶鍨洪崑鍕煕韫囨挸鎮戞繛鍛灪缁绘稓锟界數顭堝瓭濡炪倖鍨甸幊姗�骞忛幋锔藉亜闁稿繗鍋愰崣鍡椻攽閻樼粯娑ф俊顐ｇ懇瀹曨垶骞掑Δ浣哄幐闂佸憡鍔戦崝搴㈡櫠濞戙垺鐓涢柛娑卞灱閻掗箖妫佹径鎰厽婵☆垳鍎ら埢鏇㈡煕鎼淬垹濮嶉柡灞剧〒閿熸枻缍嗘禍鍫曞磿閺冨牊鐓涢悘鐐插⒔濞叉挳鏌涢埡浣割伃鐎规洘锕㈤、鏃堝川椤撶喓褰梻鍌氬�烽悞锕�顪冮崸妤�鍌ㄥ┑鍌氭啞閸嬪鏌熼幑鎰靛殭闁藉啰鍠栭弻鏇熺箾閻愵剚鐝旂紓渚囧亜缁夊綊寮婚妸鈺傚亜闁告挷鑳堕悡鎾绘倵鐟欏嫭绀堥柟铏崌閸╃偤骞嬮敃锟介柋鍥煟閺傚灝妲荤紒銊ｅ劦濮婄粯鎷呴搹骞匡拷濠囨煕閹惧绠樼紒顔界懇楠炴帒螖娴ｉ晲绨甸梻渚�娼чˇ顐﹀疾濠婂牊鍋傞柣鏂垮悑閻撴盯鏌涢妷銏℃珔濞寸姵绮撻弻銊╂偄缂佹﹩妫勫┑鐙呮嫹闂侇剙绉甸弲鎼佹煠閹帒鍔ら柛鐔哥叀閺岀喖宕欓妶鍡楊伓?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺岋綁骞樼�靛憡鍣紓浣介哺閹稿骞忛崨顔藉弿闁规惌鍘洪柇顖滐拷瑙勬礀缂嶅﹤鐣烽幒妤佸�烽悗鐢殿焾瀵櫕绻濋悽闈涒枅婵炰匠鍏炬盯顢橀悙宥忕秮瀹曨偊濡疯閿涙粓姊虹紒妯忣亪鎮樺璺哄惞闁跨喍绮欏濠氬炊瑜滃Ο锟介梺鍝勮閸斿矂鍩為幋锕�骞㈡慨妤�妫欓敓銉╂⒒娴ｄ警鏀版俊顐㈠瀹曨垱瀵奸弶鎴犵暫濡炪倖鏌ㄩ惃鐑藉绩娴犲鍊甸柨婵嗛娴滄劙鏌熸搴ｅ笡缂佺粯绋掑蹇涘礈瑜庨崑褔姊虹涵鍛彧闁圭懓娲妴浣割潩椤掑鍙嗛梺鍛婃处閸橀箖顢欓弴銏♀拺闁告稑锕﹂幊鍐┿亜閿旇鐏﹂柟顔斤耿閸╋繝宕橀鍡床婵＄偑鍊栧Λ渚�宕戦幇顓熸珷婵炴垶姘ㄧ壕鍏间繆閵堝懎鏆欓柡瀣洴閺屸剝鎷呯憴鍕瀺缂備礁鍊圭敮鐐烘晸閺傘倗绉靛ù婊呭仱閹箖鎮欓鍌滎啎闂佽鍎抽顓㈠疮閺屻儲鐓欏瀣閸樻挳鏌″畝瀣？濞寸媴绠撻幊鐐哄Ψ椤旂瓔妫у┑锛勫亼閸婃牠骞愰幖浣肝х紒瀣硶閺嗭箓鏌涘Δ鍐ㄤ汗闁哄閰ｉ悡顐﹀炊閵婏箑鏆楅梺姹囧�曠�氭澘顫忔繝姘＜婵﹩鍓ㄩ幏閿嬵槹鎼淬埄鍋ㄥ┑顔斤供閸擄箓鎮為悾灞惧枑闁哄啫鍊诲Σ鐢告⒒娴ｈ姤纭堕柛鐘茬Ф閸掓帒鈻庤箛锝嗙稁婵犵數濮甸懝鍓х矆鐎ｎ偁浜滈柟鎵虫櫅閻掑搫霉绾攱瀚圭紓鍌氬�搁崐宄懊归崶銊ь洸妞ゆ帒瀚壕濠氭煏閸繍妲虹�规挷绶氶幃妤呮晲鎼粹剝鐏嶉梺鍝勬噺缁捇寮婚敐澶嬫櫜闁告稒婢橀顓炍旈悩闈涗粶闁绘鎸搁～蹇曠磼濡顎撻梺鎯х箳閹虫挾绮敓鐘斥拺闁硅偐鍋涙慨鍌涚箾娴ｅ啿鎳庡鏌ユ⒒娴ｇ懓顕滄慨濠傜秺楠炲繐鈹戠�ｎ亞顔嗛悗鐟板閸嬪﹤顭囬埡鍛厽闁逛即娼ф晶顔姐亜韫囥儲瀚� by changhao
		
		return true;
	}
	
	private boolean checkTeamMemberNum(Team team) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺岋綁骞樼�电硶妲堝銈庡弨濞夋洟骞戦崟顖涘仏閻庢稒蓱閺嗙増绻濋悽闈涗粶闁瑰啿楠哥叅闁靛ň鏅涚粻鐔兼煕濞戞﹫鏀婚柛搴ｅ枛閺屽秹鎸婃径瀣垫濠电偛鐗滈崑濠傤潖濞差亜宸濆┑鐘插暙椤︹晠姊洪幖鐐插濠㈢懓妫涢崚鎺旀嫚濞村顫嶅┑鐐叉缁夊磭鑺辨繝姘拺闁荤喓澧楅幆鍫㈢磼婢跺苯鍘寸�规洘顨呴悾婵嬪礋椤掑倸寮抽梻浣虹帛閺屻劑骞夐敓鐘冲�舵い鏇嫹闁哄瞼鍠栧畷娆撳Χ閸℃浼�? by changhao
	{
		return true;	
	}
	
	private boolean checkFaction(long roleid) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺屽秹鏌ㄧ�ｎ亞浠搁梺闈涙搐鐎氫即鐛幒妤佸�烽柡澶嬪焾娴兼挾绱撻崒姘拷椋庣矆娓氾拷钘濆ù鍏兼綑缁犱即鏌熼幆鐗堫棄缂佺姵宀搁幃姗�鎮欑捄琛℃瀼闂佸搫鍟悧鍡楊啅濠靛洢浜滈柡鍐挎嫹闁稿孩濞婇悰顕�骞囬悧鍫氭嫽婵炶揪缍�椤宕戦悩缁樼厱閹兼惌鍠栧▍宥囷拷娈垮枟瑜板啴鍩ユ径鎰潊闁绘ɑ褰冨▓銈夋⒑绾懎浜归悶娑栧劦瀹曟垿骞樼�靛壊娲稿┑鐘诧工閻楀﹪鎮″☉銏＄厱闁靛鏅╁Λ鎴犵磼閳藉懏瀚归梻鍌欑閹诧紕鎹㈤崘顭戞富濞寸姴顑呴拑鐔兼煟閺傛寧鎲搁柣鐔风秺閺屾盯鈥﹂幋婵囩亪濡炪値鍓欓悧鎾诲蓟瑜庣�电厧鈻庨幋鐘樻粓姊洪崫鍕拱缂佸鐗犺棟闁惧浚鍋佹禍婊堟煏婵炲灝鍔滈柛銈呮处椤ㄣ儵鎮欓幖顓熺杹闂佽鍠曠划娆撳箖娴犲鍋ㄧ痪鏉款槺闂傤垱绻濋悽闈涗哗闁规椿浜炵槐鐐寸瑹閿熷�熸＂闂佽宕橀褏绮堟径宀嬫嫹楠炲灝鍔氭い锔垮嵆閹繝鎮㈤崗鑲╁幍闂佸壊鐓堥崰鏍敂椤愩倗纾奸柍钘夋噺鐎氬綊姊虹拠鎻掝劉妞ゆ梹鐗犲畷鏉库槈閵忊晜鏅悷婊勬瀹曟椽濡烽敃锟界欢鐐烘煙闁箑澧绘繛鐓庯躬濮婃椽寮妷锔界彅闂佸摜鍣ラ崹鍫曘�侀弮鍫熷亜闁稿繐鐨烽幏缁樼箾鏉堝墽绉┑顔哄�楀☉鐢稿醇閺囩喓鍘遍梺鎸庣箓缁绘帡鎮鹃崹顐闁绘劘灏欑粻濠氭煛娴ｈ宕岄柡浣规崌閺佹捇鏁撻敓锟�? by changhao
	{
		return true;
	}
	
	private boolean checkActiveTime() //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺岋綁骞樼�靛憡鍣紓浣介哺閹稿骞忛崨顔藉弿闁规惌鍘虹花鑲╃磼瀹�鍕喚妞ゃ垺绋戦埥澶婎潩妲屾牕鏅梻鍌欑濠�閬嶅磻閹捐绀堟慨妯垮煐閸嬪倸鈹戦崒姘暈闁绘挻鐩幃姗�鎮欓幓鎺嗘寖濡炪値鍓欓崥瀣Φ閸曨垱鏅濆ù锝呮贡瑜把囨⒑闂堟稒鎼愰悗姘卞娣囧﹪骞栨担鑲濄劑鏌ㄩ弴顏呭濠电偛鎲為崨顖滐紳婵炴挻鑹惧ú銈夊几濞戙垺鐓熸俊銈忔嫹闁挎洏鍊濋、姘跺Ψ閳轰胶顦板銈嗙墬濮樸劑鎮块敓鑺ヤ繆閻愵亜锟芥牠骞愰悙顒佸弿閻庨潧鎲￠弳婊堟煙椤栧棴鎷烽柡锟芥禒瀣厽婵☆垵娅ｆ禒娑㈡煛閸″繑娅呴柍瑙勫灴椤㈡瑧鍠婇崡鐐搭啀闂備胶鎳撶粻宥夊垂绾懐浜藉┑鐐存尰閸戝綊宕归幎鑺ユ櫢闁稿﹦鍠庨悡鎰版煏閸パ冾伃鐎殿噮鍓欓埢搴ㄦ倷椤掑倻鈼ユ繝鐢靛仜閻°劎鍒掑鍥у灊闁规崘顕ч弸渚�骞栧ǎ顒�鐏紒鈽呮嫹婵犳鍠楅敃鈺呭礈濞戙垹纾归柣鎰劋閳锋垿姊婚崼鐔剁繁闁绘帡绠栭弻娑㈠Ω閵婏富浠╅梺璺ㄥ枙婵倝鎯岄鎯у灊婵炲棗娴氬鏍磽娴ｈ偂鎴炲垔閹绢喗鐓犻柟顓熷笒閸斻倝鏌曢崱妤嬭含婵﹥妞藉Λ鍐煛閸愵�倗绱撴担鍝勑ｉ柟鐟版喘閹即顢欑捄銊ф澑濠电偞鍨堕悷锕�鈻嶉姀銈嗏拺閻犳亽鍔屽▍鎰版煙閸戙倖瀚�? by changhao
	{
		
		return true;
	}

	// 濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婄拋鏌ュ几濞嗘挻鈷戠紓浣姑粭鈺佲攽椤斿搫锟芥骞戦姀鐘闁靛繒濮撮懓鍨攽閳藉棗鐏ユい鏇嗗懎鏋堢�广儱顦伴埛鎴犵磽娴ｈ偂鎴犱焊娴煎瓨鐓ラ柡鍥悘鑼拷娈垮枛椤兘骞冮姀銈嗗�绘俊顖濇閿涘繑淇婇悙顏勶拷銈夊储娴犲鍨傞柛顐ｆ处閺佷線鏌ㄩ悤鍌涘
	private static int checkPvP(long roleId) {
		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幈濡炪値鍘介崹鍨濠靛鐓曟繛鍡楃箳缁犲鏌＄仦绋垮⒉鐎垫澘瀚敓鏂ょ秵娴滄繈顢欓崨顓涙斀闁绘劕寮堕埢鏇灻瑰鍐煟鐎殿噮鍋婂畷鍫曨敆娴ｅ搫甯鹃梻濠庡亜濞诧箑煤閺嵮勬瘎闂傚倷绀侀幉锛勬崲閸愵喓锟藉啯绻濋崒銈嗙稁缂傚倷鐒﹂…鍥偡瑜版帗鐓曢柕澶嬪灥閸犳艾顭囬懡銈囩＝闁稿本鐟чˇ锔姐亜閿曞倷鎲剧�殿噮鍋嗛幏鐘绘嚑椤掍焦顔曢梻浣告惈濞层垽宕归崷顓犱笉闁挎繂妫涚弧锟介梺闈涢獜缁辨洜绮婚幘鍓佺＝鐎广儱鎷戦煬顒侇殽閻愭彃鏆ｉ柛鈺佸瀹曟﹢鍩℃担绋课ら梻鍌欑劍鐎笛呮崲閸屾娑樷枎閹惧磭鐛ラ梺鍝勭▉閸樹粙鍩涢幒鎳ㄥ綊鏁愰崼顐ｇ秷闂佺顑囨繛锟介柡灞剧♁缁绘繈宕橀埡鍐炬Ч闂備浇妗ㄧ粈渚�宕�涙ü绻嗛柣鎴ｆ閻撴稑霉閿濆懎顏电紒鐘虫崌瀵鈽夐姀鐘插祮闂侀潧顭堥崕鏌ユ倶閹剧粯鈷戞慨鐟版搐閿熺獤鍥х闁绘垼濮ら埛鎺懨归敐鍛暈閻犳劧绻濋弻娑氾拷锝庡亝瀹曞瞼锟借娲樼划宀勶綖濠靛鏁囬柣娆欐嫹婵炴潙瀚换婵嬫濞戞﹫鎷烽幖浣哥疅闁跨喓濮寸壕濠氭煟濡寧鐝柛娆忕箲娣囧﹪顢涘顓熷創闂佽偐顭堢紞濠囧蓟閿涘嫸鎷烽敐搴′簽闁冲彞绶氶弻鐔哥瑹閸喖顬夌紓浣虹帛缁诲牆鐣峰锟介崺鐐村緞濮濆本顎楅梻浣筋嚙濮橈箓锝炴径濞掗缚绠涘☉妯碱槷閻庡箍鍎卞ú锕�鐣烽崣澶岀瘈闂傚牊渚楅崕蹇曠磼閿熺晫锟斤綆鍋佹禍婊堟煙闁箑鏋涢柡瀣叄閺岀喖顢欓崗鐓庢缂備浇椴搁幑鍥х暦閹烘埈娼╂い鎺戯攻鐎氬綊鏌熼梻瀵割槮缁炬儳缍婇弻娑樷攽閸曨偄濮㈤梺娲诲幗閹瑰洭寮婚悢铏圭＜闁靛繒濮甸悘宥夋⒑閸濆嫭鍣虹紒璇插暣婵＄敻宕熼鍓ф澑闂佸湱鍋撻崜姘閿熶粙姊绘担鍛婃儓婵☆偄顕划濠氬箻鐠囪尪鎽曢梺鍝勬祫缁辨洟鎮块敓浠嬫煟鎼搭垳绉靛ù婊呭厴楠炲繘鎮滈挊澶婂敤濡炪倖鎸鹃崑鐔煎蓟瑜斿楦裤亹閹烘搫绱甸梺缁樺釜缁犳捇骞冮敓鐘参ㄩ柍鍝勫�婚崢浠嬫⒑閸濆嫭宸濋柛瀣洴閺佹捇鎸婃径瀣闂佽法鍠曟慨銈夋偄椤掑嫬绠柨鐕傛嫹
		return fire.pb.battle.pvp.PvPTeamHandle.onRequestTeamMatch(roleId);
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 794494;

	public int getType() {
		return 794494;
	}

	public int typematch; // 类型为0是个人组队匹配1是队伍匹配 by changhao
	public int targetid; // 目标id by changhao
	public int levelmin; // 等级下限 如果是个人匹配这个忽略 by changhao
	public int levelmax; // 等级上限 如果是个人匹配这个忽略 by changhao

	public CRequestTeamMatch() {
	}

	public CRequestTeamMatch(int _typematch_, int _targetid_, int _levelmin_, int _levelmax_) {
		this.typematch = _typematch_;
		this.targetid = _targetid_;
		this.levelmin = _levelmin_;
		this.levelmax = _levelmax_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(typematch);
		_os_.marshal(targetid);
		_os_.marshal(levelmin);
		_os_.marshal(levelmax);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		typematch = _os_.unmarshal_int();
		targetid = _os_.unmarshal_int();
		levelmin = _os_.unmarshal_int();
		levelmax = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CRequestTeamMatch) {
			CRequestTeamMatch _o_ = (CRequestTeamMatch)_o1_;
			if (typematch != _o_.typematch) return false;
			if (targetid != _o_.targetid) return false;
			if (levelmin != _o_.levelmin) return false;
			if (levelmax != _o_.levelmax) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += typematch;
		_h_ += targetid;
		_h_ += levelmin;
		_h_ += levelmax;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(typematch).append(",");
		_sb_.append(targetid).append(",");
		_sb_.append(levelmin).append(",");
		_sb_.append(levelmax).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CRequestTeamMatch _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = typematch - _o_.typematch;
		if (0 != _c_) return _c_;
		_c_ = targetid - _o_.targetid;
		if (0 != _c_) return _c_;
		_c_ = levelmin - _o_.levelmin;
		if (0 != _c_) return _c_;
		_c_ = levelmax - _o_.levelmax;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

