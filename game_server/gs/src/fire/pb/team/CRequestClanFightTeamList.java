
package fire.pb.team;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CRequestClanFightTeamList__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/***
 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姴顭烽弻锛勪沪缁嬪灝鈷夐悗鍨緲鐎氼噣鏁撻弬銈囩У濞存粍绻堥、娆撳川椤撴稒鏂�闂佺粯鍔曞鍫曞煝閺囩伝鐟邦煥閸愵亜鐓熼悗娈垮櫘閸嬪﹤鐣烽崼鏇ㄦ晢濞达絽鎼敮楣冩⒒婵犲骸浜滄繛璇х畱鐓ら柡宓嫭鐦庨梻鍌氬�风粈渚�骞夐敍鍕床闁告劦鍠撻敓钘夊暞缁绘繈宕掗妶鍡欑▉缂傚倸鍊烽悞锕傗�﹂崶顒佸仭鐟滅増甯楅悡鏇㈡煏婢跺鐏ラ柛鐘宠壘椤洭鎳￠妶鍥╋紳闂佺鏈悷褔藝閿斿浜滈柨鏇炲�烽幉鍓э拷娈垮櫘閸嬪棝骞忛悩缁樺殤妞ゆ帊鐒﹂鏇㈡⒒娴ｅ憡鎯堟繛灞傚灲瀹曞綊宕烽鐘辩瑝闂佹寧绻傚Λ娑氬姬閿熶粙姊洪棃娑㈢崪缂佽鲸娲滅划濠氬箻閸撲胶锛濋悗骞垮劚閹锋垵顔忛妷鈺傜厽闁挎繂鎳庡Σ濠氭懚閺嶎厽鐓曟繛鎴濆船楠炴ɑ銇勮熁閸ャ劉鎷洪梺绋跨箺閸嬫劙濡堕幘顔界厸闁告侗鍠氱粻鐐烘煕閳瑰灝鐏辩紒鐘崇洴瀵挳鎮╃喊澶岄棷闂傚倷鑳堕…鍫ュ嫉椤掑嫭鍋＄憸蹇曞垝娴ｅ啰鐤�婵炴垶鐟ч崢鍨繆閻愬樊鍎忓Δ鐘虫倐瀹曘垽骞橀鐣屽幐闁诲繒鍋涙晶浠嬪Υ閹烘嚚褰掓偑閸涱垳鏆ら悗瑙勬礃缁繘藝椤旀垝绻嗘い鎰Т婵＄晫绱掔紒妯笺�掗柨鐔诲Г缁嬫帡鈥﹂崶顒佸剹閻庯綆鍓涚壕鍏笺亜閺冨洤袚鐎规洖鐬奸敓鑺ヮ問閸犳牠鈥﹂悜钘夌畺闁靛繈鍊曞婵嗏攽閻樻彃顏懖鏍⒒閸屾瑧顦﹂柟璇х節楠炴劙宕卞☉妯啃曢梻浣哥仢椤戝懘鎮橀埡鍐＜閺夊牄鍔岀粭褏绱掓潏銊ユ诞濠殿噯鎷烽梺缁橆焾鐏忔瑩顢欓幇顑芥斀闁绘﹩鍋呮刊浼存煕閹般劍娅嗙�规洖鍟块埞鎴﹀灳閸愯尙楠囬梺鍛婃⒐閻熲晠鎮伴锟介獮鎺楀箠閾忣偅顥堥柡浣规崌閹儳鐣濋敓鑺ョ▔瀹ュ棛绠鹃柟瀵稿仧閹筹拷婵炲瓨绮嶇划鎾诲蓟閻斿吋鍊锋い鎺戭槹閻ｅ爼鏌ｆ惔銏犲毈闁革綇绲介锝夊箚閼割兛姹楅梺鍦劋閹告挳骞忕紒妯肩閺夊牆澧介崚浼存煙鐠囇呯瘈妤犵偛妫濆畷濂稿Ψ閿旀儳骞楁俊鐐�栫敮顏堝箯閻戣姤鐓忛柛顐犲焺閻掗箖鏌ｉ敐澶嬫暠閻庨潧銈稿鍫曞箣閻欙拷閸熷绱撻崒姘拷鐑芥倿閿曚焦鎳屾繝鐢靛仜閹冲矂宕归挊澶樻綎婵炲樊浜滅粈鍌炴⒒閸屾粠妫庨柛鈺佹嚇濮婅櫣绮欓崹顕呭妷婵犵數鍋涢敃顏勭暦濞差亝鏅滈柣锝呯灱閹虫繈姊虹捄銊ユ瀺缂侇喗鐟ラ锝囨嫚瀹割喖鎮戦梺鎼炲劗閺呮繈鎮鹃崼鏇熲拺闁告稑锕︾粻鎾绘倵濮橆厽鍊愭鐐茬箰閻ｏ繝骞嶉搹顐ｆ澑闂佽鍑界紞鍡涙偂婢舵劕绠梺鍨儑閻熷綊鏌ㄩ悢缁橆棄妞ゆ洩缍侀、姘舵晸閽樺鏆﹂柣鎾崇岸閺�浠嬫煕閳╁啰鎳呯�规洖鎼埞鎴︽晬閸曨偂鏉梺绋匡攻閻楁洟锝炶箛鏃傜瘈婵﹩鍓欓崑宥夋偡濠婂啯鎹ｉ柨鐔剁矙濞佳囧触鐎ｎ喖绠氶柡鍐ㄧ墕鎯熼梺鎸庢椤锟芥俺妫勯埞鎴︽偐閸偅姣勬繝娈垮枛閻°劑銆冮妷鈺佸窛濠电姴瀚峰ú绋库攽閻樿宸ラ悗姘煎枤缁粯銈ｉ崘鈺佷化闂佹悶鍎卞ú銈夊窗濮橆優娲敇閻樼數锛濇繛鎾磋壘濞层倝寮搁悢鍏肩厽闁绘柨寮跺▍濠囨煟濞戝崬娅嶆鐐村浮楠炲﹪鎼归锝庢闂佽桨鐒﹂幐鑽ょ矉閹烘棑鎷烽敐搴′簻濞存粍顨婂娲传閸曨剙鍋嶉梺鎼炲妽濡炰粙骞冮垾鏂ユ瀻闁规儳顕崢閬嶆⒑閸︻厼浜炬い銊ユ嚇楠炲﹥鎯旈敐鍥╃暥闂佽法鍠撴慨鐢稿煕閹寸姷纾藉ù锝堝亗閹寸姳鐒婇柣銏犳啞閻撴洟鏌ｅΟ铏癸紞濠⒀呮暩閿熻姤顔栭崰鏍�﹂悜钘夋瀬闁瑰墽绮崑鎰版煠绾板崬澧剧紒鍗炲级缁绘繂鈻撻崹顔界亶闂佹寧姘ㄩ幉鎼佸级濞嗙偓鈻堥梺纭呭椤骞嗛弮鍫濈叀闁糕剝锚閻︽粓姊绘笟锟藉褔鎮ч崱娆愬床闁圭儤顨呯粈鍡涙煙濞堝灝鏋ゆ俊顐灣缁辨挻鎷呴棃娑氫患濡ょ姷鍋炶摫濞ｅ洤锕畷锝嗗緞婵犲偆娼氭俊銈囧Х閸嬬偟鏁幒鏇犱簷濠电偠鎻紞锟芥い顐㈩樀椤㈡棃鎮㈤崗灏栨嫽婵炶揪绲块…鍫ュ箖閹存緷鐟邦煥閿熺晫鍒掑▎蹇曟殾闁哄洨鍋熼弳锕傛煕閵夋垵鍞鑸碘拺閻犳亽鍔岄弸宥囩磼椤旂晫鎳冩い顐㈢箻閹煎綊宕烽鐘靛幆婵犵數鍋涘Λ娆撳磿閹惰棄绀堝ù鐓庣摠閳锋垿鏌涘┑鍕姎闁哄瀛╃换娑氭兜妞嬪海鐦堥悗娈垮枤缁垳鎹㈠┑瀣倞闁靛闄勯悵鎶芥⒒娴ｅ憡鍟炲〒姘殜瀹曞綊宕￠悙鈺傜亖婵°倧绲介崯顖炲煕閹达附鐓曢柟鐐綑缁茶霉濠婂嫮绠栫紒缁樼洴瀹曪絾寰勫☉婊愭嫹鐠侯煉鎷峰▓鍨灍闁绘挴锟芥剚鍤曞┑鐘宠壘鍞梺鎸庢⒐閸庢娊鐛崼鐔虹瘈闁汇垽娼ф禒锕傛煕閵娾晜娑ч柣锝囧厴椤㈡宕熼鐐点偊闂備浇顫夋竟鍡樻櫠濡ゅ懏鍋傛繛鍡樻尰閻撴盯鎮楅敐澶嬫锭濞存粍绮撻弻銊╂偄鐠囨畫鎾寸箾閼碱剙鏋涚�规洘妞介幃娆撳传閸曨収鍚呴梻浣瑰濡礁螞閸曨垱鏅稿ù鐘差儛濡垿鏌ㄩ悢鐑樻珪闁硅櫕鎸荤粩鐔哥節閸パ呯崶闂佸搫璇為敓浠嬪几閺冨牊鐓曟い鎰剁稻缁�鍐煃闁垮鐏存慨濠傤煼瀹曞ジ鎮㈢悰鈩冾�囨俊鐐�戦崕鑼垝瀹ュ桅闁告洦鍨扮粻锝嗙節閸偄濮堥柍璇茬墦濮婅櫣绱掑Ο鍦箒闂佸摜濮电粙鎾跺垝鐠囨祴妲堟俊顖炴敱椤秴鈹戦悙鍙夘棡闁告梹鐗犻、鏃堟偄閸忓皷鎷绘繛杈剧秬婵倗娑甸崼鏇熺厱闁挎繂绻掗悾鍨殽閻愯尙绠婚柡浣规崌閺佹捇鏁撻敓锟� by changhao
 *
 */
public class CRequestClanFightTeamList extends __CRequestClanFightTeamList__ {
	@Override
	protected void process() {
		// protocol handle
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
		{
			return;
		}
		
		mkdb.Procedure r = new mkdb.Procedure()
		{
			@Override
			protected boolean process()
			{
				if (num > 20)
				{
					return false;
				}
				
				int side = 0;
				Long c1 = xtable.Roleid2clanfightid.select(roleid); //婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄婵犲灚鍔栫紞妤呮⒑鐠恒劌鏋欐俊顐㈠瀹曟劙宕稿Δ锟界粻鏉库攽閻樻彃鏆熼柣婵嗙埣閺屽秹宕崟闈涘壋缂備礁顦介崰姘舵晸閸婄噥娼愭繛鍙夌矒瀹曚即寮介婊愭嫹娴ｇ硶妲堟慨妤�妫欓崓鍨繆閹绘帗婀伴柣妤佹礋瀵偊骞栨担鍏夋嫽闂佺鏈悷锔剧矈閻楀牏绠惧璺侯儐缁�瀣拷瑙勬礃婵炲﹪寮崘顔肩＜婵﹢纭搁崬鐢告⒒娴ｈ姤纭堕柛锝忕畵楠炲繘鏁撻敓锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁绘劦鍓欓崝銈嗐亜椤撶姴鍘寸�殿喖顭烽弫鎰緞婵犲嫮鏉告俊鐐�栫敮濠勬媼閺屻儱鍑犳繛鍡樻尰閳锋垹绱撴担濮戭亞绮埡浣叉斀妞ゆ柨鎼敓鑺ヮ殜楠炴垿濮�閻橆偅顫嶉梺闈涚箳婵挳鎳撻崹顔规斀闁宠棄妫楅悘锝囩磼椤曞懎鐏︾�规洘娲橀幆鏃堝Ω閿旇瀚奸梺鍝勵槺閸嬬偞绔熼崱娴板洭鏁冮崒娑橈拷鍨叏濮楀棗浜滅�规挸妫涢敓鑺ヮ問閸犳盯顢氳閸┿儲寰勯幇顒夋綂闂佺粯锕㈠褎鎱ㄩ崼鏇熲拻濞达絽鎲￠崯鐐烘煕閺傜偛鎳愮壕鑺ユ叏濡法绨垮┑顔藉▕閺岋綁濮�閻樺啿鏆堥梺鎶芥敱閸ㄥ潡寮婚悢铏圭煓闁圭瀛╁畷宕囩磽娴ｅ搫校闁圭顭锋俊鐢稿礋椤栨稒娅嗛柣鐘叉穿鐏忔瑦绂掗婊呯＝濞撴艾娲ら弸娑欍亜椤撶姴鍘存鐐插暣閹粓鎸婃径宀�鏋冨┑鐘垫暩婵挳宕愰懡銈囩煋婵炲樊浜濋悡娑樏归敐鍥ㄥ殌濠殿喖绉堕敓鍊燁潐濞叉牕鐣烽鍕厺閹兼番鍔岀粻娑欍亜閹捐泛浠︽繛鍛灲濮婄粯鎷呴挊澶婃優闂佺顑囬崑鐔煎窗婵犲偆鍚嬮柛銉ｅ妼鎼村﹪姊洪崜鎻掍簼缂佽绉撮…鍥冀椤愩倗锛濇繛杈剧秬閸嬪倿骞嬮悙鎻掔亖闂佸湱铏庨崰妤呮偂閻斿吋鐓熼柡鍐ㄥ�哥敮璺好瑰锟介崡鎶藉蓟濞戙垹围闁告粈绀侀崜浼存⒑鐎圭媭娼愰柛銊ユ健楠炲啫鈻庨幋顖涘闁割煈鍋呴崑鐘绘煕鐎ｎ剙浠辨慨濠冩そ瀹曨偊宕熼锟藉▍褎绻濋悽闈涘壋闁归鍏樺铏圭磼濡湱绻侀梺鍝ュУ缁嬫挾鍒掔拠娴嬫婵☆垶鏀遍～宥呪攽閻愬弶顥為柛銊╂涧椤曪綁骞庨懞銉㈡嫼闁荤姴娲﹁ぐ鍐吹鏉堚晝纾界�广儱鎳忛ˉ銏拷瑙勬礃缁矂鍩ユ径鎰潊闁炽儱鍟挎晶楣冩⒒娴ｇ顥忛柛瀣╃窔瀹曟洟寮婚妷銉у幈闂佺鎻梽鍕磻閿濆鐓欐い鎾跺枎缁楁帒鈹戦垾鐐藉仮闁哄矉绱曢敓鏂ょ秵娴滅偠鍊寸紓鍌欐祰妞村摜鏁敓鐘拷浣糕枎閹炬潙浠奸柣蹇曞仦閸庡啿鈻嶅鑸碘拻濞撴熬鎷锋繛浣冲吘娑㈠籍閸屾侗鍋ㄥ┑顔斤供閸擄箓宕甸弴鐔翠簻闁哄浂浜濈�氬綊鎮楃憴鍕闁告鍥х厴闁瑰濯撮幏鐑芥晲鎼存繄鍑归梺鍝勬－娴滄粓鍩為幋锔藉亹闁割煈鍋呭В鍕節閻㈤潧鍓抽柟宄板槻閳规垿鎮欓弶鍨殶闂佹悶鍎崝灞剧閸楃偐鏀介柣妯款嚋瀹搞儵鏌ｅΔ锟藉Λ娑㈠箟閹绢喗鏅濋柛灞剧〒閸樺崬鈹戦悙鏉戠仴鐎规洦鍓熷鎼佸Χ閸モ晝锛滈梺瀹犳閹冲繒锟芥艾婀辩槐鎾诲磼濞嗘埈妲繝鈷�鍡椥撻柡鍛版硾铻栭柛鏇ㄥ墯閸ｅ嘲鈹戦敍鍕杭闁稿鍊濆畷鎴﹀礋椤栨稒娅囧銈呯箰閻楀棝鎷戦悢鍝ョ闁瑰瓨鐟ラ悘鈺呭箚閻斿吋鈷戦柟绋垮缁屽潡鏌熸搴″幋闁哄苯绉剁槐鎺懳熼懡銈庢Ф闂備浇娉曢崰搴ㄦ晸閻ｅ苯娅忔繛鍏煎姈缁绘盯宕ｆ竟婵愪簽閸欏懘姊虹紒妯活棃闁哄懓灏欓幑銏ゅ幢濞戞瑧鍘卞銈嗗姧缁插墽绮堥敓浠嬫⒑缂佹ê濮囬柨鏇樺劦婵＄敻宕熼鍓ф澑闂佽鍎崇壕顓°亹閸涘瓨鈷戦柣鎰閸旀粓鏌＄�ｎ亗鍋㈢�殿喓鍔戦幊鐐哄Ψ閿濆嫮鐩庨梻浣告惈閸犳盯骞忛悜鑺ョ厸閻庯綆鍓涚敮娑氱磼濡ゅ啫鏋庨柍钘夘樀婵拷闁挎稑瀚獮鍫ユ⒒婵犲骸浜滄繛璇х畵瀵悂宕掗悜鍡樻櫆闂佸憡娲﹂崑鍡涘Χ椤愶附鈷掗柛灞剧懅椤︼箑顭块悷甯含鐎规洘鍨剁粭鐔兼晸閽樺鏆﹂柡鍥ュ灩閽冪喖鏌曟径娑氱暠濞存粍顨婂娲濞戣鲸孝闂佸搫鎳忕划鎾诲箖閿熺姵鍋勯柛蹇氬亹閸樻悂姊洪幖鐐插姉闁哄懏绋掔粋鎺戭煥閸喓鍙嗛梺缁樻⒒缁垶藟婢跺绡�闁跨喍绮欓弻鍡楊吋閸℃ɑ顏熼梻浣稿悑娴滀粙宕曢幎钘夌柈闁哄被鍎查悡娆撴煕閹存瑥锟芥牜锟芥熬鎷�? by changhao
				if (c1 == null)
				{
					return false;
				}
			
				fire.pb.clan.fight.ClanFightBattleField bf = fire.pb.clan.fight.ClanFightFactory.getClanFightBattleField(c1, true);
				if (bf != null)
				{
					Long clanid = xtable.Roleidclan.select(roleid);
					if (clanid == null)
					{
						return false;
					}
					
					if (clanid == bf.getClanfightBean().getClanid1())
					{
						side = 0;
					}
					else if (clanid == bf.getClanfightBean().getClanid2())
					{
						side = 1;
					}
					else
					{
						return false;
					}
					
					SRequestClanFightTeamList msg = new SRequestClanFightTeamList();
					java.util.Map<Long, Integer> v = bf.getClanroleidsByWhich(side);
					java.util.List<Long> teamlist = new java.util.ArrayList<Long>();
					
					if (v != null)
					{
						for (Long e : v.keySet())
						{
							Long teamid = xtable.Roleid2teamid.select(e);
							if (teamid != null)
							{
								teamlist.add(teamid);
							}
						}
						
						teamlist.sort(new java.util.Comparator<Long>(){
							@Override
							public int compare(Long o1, Long o2)
							{
								if (o1 > o2)
								{
									return 1;
								}
								else
								{
									return -1;
								}
							}
						});						
						
						int curnum = 0;
						java.util.Set<Long> teamidset = new java.util.HashSet<Long>();
						for (Long teamid : teamlist)
						{	
							if (teamid != null)
							{
								if (start != 0 && teamid <= start)
								{
									continue;
								}
								
								xbean.TeamInfo teaminfo = xtable.Team.select(teamid);
								if (teaminfo != null && !teamidset.contains(teamid)) //婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁诡垎鍐ｆ寖缂備緡鍣崹鎶藉箲閵忕姭妲堥柕蹇曞Х椤撴椽姊虹紒妯哄闁诲繑宀稿畷瀹狀槾缂佽鲸鎸婚幏鍛矙濞嗙偓娈洪梻浣侯焾椤戝啴宕愬┑鍡╁殨閻犲洦绁村Σ鍫ユ煏韫囨洖顫嶉柕濠忚礋娴滄粓鏌￠崘銊ワ拷鍝ユ暜閼哥偣浜滄い鎰枑濞呭洨绱掓潏銊﹀鞍缂佹鍠愮换婵嬪礃椤垳绱﹂梻鍌氬�风粈浣圭珶婵犲洤纾婚柛鈩冪☉缁愭鏌熼幑鎰【濠殿噮鍓熼弻銊╂偄閸撲胶鐓撳┑顔硷工椤嘲鐣烽幒鎴僵闁告鍎愰弶鍝ョ磽閸屾瑧顦︽い鎴濇閺侇噣鏁撻悩鍙夌�悗骞垮劚閹峰宕ョ�ｎ亶鐔嗛悹杞拌閸庢垿鏌涘锟芥禍璺侯潖濞差亝顥堟繛鎴炶壘椤ｅ搫鈹戦埥鍡椾簼闁荤啙鍛灊闁割偁鍎遍柋鍥煏婢舵稑顩柛妯兼暬濮婃椽宕ㄦ繝鍕櫑濡炪倧缂氶崡鍐茬暦閹版澘绠涙い鏇炴鐎氳绻涢崼婵堜虎婵炲懏锕㈤弻娑㈡晲韫囨洖鍩岄梺浼欑悼閸忔﹢骞冮埄鍐╁劅婵☆垳绮弶鎼佹⒒娴ｇ顥忛柛瀣╃窔瀹曞綊宕崟鎴炲笚閹棃濡搁敂瑙勫闂備胶顭堥張顒勬偡瑜旇棟闁挎洖鍊归悡娆撴偣閸ュ洤鎳愰惁鍫ユ倵鐟欏嫭绀冪紒璇茬墦瀵偊宕橀鑲╋紲濠殿喗顭堟禍顒�鐣烽崼鏇熲拻濞达絽鎲￠幆鍫㈢磼鐎ｂ晝绐旂�规洘鍨垮畷鍗炩槈濞嗗繐澹掗梻浣虹《閸撴繄绮欓幒妤�纾归柣銏犳啞閻撱儲绻濋棃娑欘棦妞ゅ孩顨呴湁婵犲﹤瀚晶顏堟婢跺绡�濠电姴鍊搁顐︽煟椤撶喎娴柡灞革拷宕囨殕闁跨喍绮欏畷浼村冀椤撶偟顔愰悷婊呭鐢宕戦垾婢勬稒锛愭担鍝勫闂佸憡娲栭崯鏉戭潖閾忚瀚氶柟缁樺俯閸斿鈹戦瑙掓粓宕濋幋锔惧祦濠电姴娲ょ粻濠氭煟閹存梹娅旈柟椋庡厴瀵噣宕煎┑鍫О婵＄偑鍊栭弻銊ノｉ崼锝庢▌闂佸搫鏈惄顖炵嵁閸ヮ剚鍋ㄩ梻鍫熺☉鏉堝懘姊绘担鍝ョШ妞ゃ儲鎹囧畷妤�螣娓氼垰娈ㄩ梺鍦檸閸犳牠锝為崨瀛樼厽婵☆垰鍚嬮弳鈺呮煛鐎ｎ亜鏆炵紒缁樼箓閳绘捇宕归鐣屼憾婵＄偑鍊戦崝宥夊礉濞嗘挾宓侀煫鍥ㄦ濡插綊骞栭幖顓炵仭閻庢俺顫夌换娑㈠醇濠靛牅铏庨梺鍝勵儜闂勫嫰濡甸崟顖氬嵆闁糕剝顨嗛幖鎰版煟閹绢垽鎷烽幇浣哄數闁荤姴鎼妶浠嬫晸閻樺啿浜滈梺绋跨箺閸嬫劙宕ｉ崱娑欑厽閹兼惌鍨崇粔鐢告煕閹惧崬濮傛鐐茬箻閺屻劎锟斤綆鍓涢惁鍫濃攽椤旀枻渚涢柛妯绘倐楠炲繐煤椤忓懎浠┑鐘诧工閹冲酣銆傛總鍛婂仺妞ゆ牗绋戠粭姘辩磼閸屾氨校閻庝絻鍋愰敓鑺ョ♁椤洭宕㈤柆宥嗏拺閻熸瑥瀚崝銈嗐亜閺囥劌寮柛鈺嬮檮缁楃喖鏁撴禒瀣畺婵°倕鎳忛ˉ鍫熺箾閹寸偟澧ù鐙�鍣ｅ鐑樻姜閹殿喖濡介梺鍦嚀濞差厼顕ｉ锕�绠荤紓浣股戝▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐鍛傜喎鈻庨幆褎顔勭紓鍌欒兌婵挳鎮樺璺何﹂柛鏇ㄥ枤閻わ拷闂佸湱鍋撻幆灞轿涢悙鐢电＝濞达絿鏅崼顏堟煕婵犲啰绠炵�殿喛顕ч埥澶婎煥鎼粹懣顏呬繆閻愵亜锟芥垿宕濆畝鍕疇婵鎷锋鐐插暣瀹曠螖娴ｉ潻鎷烽柨瀣ㄤ簻闁瑰瓨绻傜紞鏍磼閵娿儺鐓兼慨濠呮閹叉挳宕熼顐ｎ棑闂備礁鎼幊蹇涙儎椤栫偛鏋侀柟鍓х帛閸ゅ秹鏌曟径妯烘灍闁伙綁顥撶槐鎾存媴閸撴彃鍓板銈忓瘜閸ㄥ爼銆佸锟藉畷妤呮偂鎼达絿鐛梺璇插嚱缂嶅棝宕滃▎鎾跺祦闁规壆澧楅悡鐔煎箹鏉堝墽纾块柣锝庡弮閺屾稒鎯旈妶澶婃懙濡炪們鍔婇崕鐢哥嵁閺嶃劍濯撮柛婵嗗閵堬附绻濆閿嬫緲閿熻姤娲熼獮濠呯疀濞戞瑥浜楅梺缁樻煥閸氬鎮″▎鎾寸厵妞ゆ牕妫楅幊蹇涘箟閼测晝纾藉〒姘攻鐎氬綊鏌ｆ惔顖滅У闁哥姵顨婇幃鈥斥槈閵忊�筹拷鍫曟煟閹伴偊鏉洪柛銈嗙懃閳规垿顢欓悡搴嫹閸ф钃熼柣鏃傗拡閺佸﹪鏌涘┑鍡楊伒闁瑰嘲鍢查埞鎴﹀幢濞嗘劖顔曢梻浣告贡閸庛倝宕归悢鑲猴綁宕奸悢绋垮伎濠德板�ч幏閿嬩繆椤愶絾鈷掓俊鍙夊姍閺佹捇鏁撻敓锟�? by changhao
								{
									fire.pb.team.TeamInfoBasicWithMembers t = new fire.pb.team.TeamInfoBasicWithMembers();
									t.teaminfobasic = newTeamInfoBasic(teamid, teaminfo);
									msg.teamlist.add(t);
									
									t.memberlist.add(getTeamMemeberSimple(teaminfo.getTeamleaderid()));
									
									for (xbean.TeamMember e1 : teaminfo.getMembers())
									{
										t.memberlist.add(getTeamMemeberSimple(e1.getRoleid()));								
									}
									
									curnum ++;
									
									teamidset.add(teamid);
									if (curnum >= num)
									{
										break;
									}	
								}								
							}
						}						
					}
					
					msg.isfresh = isfresh;
					if (msg.teamlist.size() == 0)
					{
						msg.ret = -1;
					}
					
					mkdb.Procedure.psendWhileCommit(roleid, msg);
				}
				
				return true;
			}
		};
		
		r.submit();	
	}
	
	public TeamMemberSimple getTeamMemeberSimple(long memberRoleId) {

		TeamMemberSimple member = new TeamMemberSimple();
		member.roleid = memberRoleId;
		xbean.Properties newProperty = xtable.Properties.select(memberRoleId);
		if (newProperty != null) {
			member.level = newProperty.getLevel();
			member.rolename = newProperty.getRolename();
			member.school = newProperty.getSchool();
			member.shape = newProperty.getShape();
		}
		
		return member;
	}
	
	public TeamInfoBasic newTeamInfoBasic(long teamid, xbean.TeamInfo teaminfo)
	{	
		xbean.Properties leaderprop = xtable.Properties.select(teaminfo.getTeamleaderid());
		TeamInfoBasic teamInfoBasic = new TeamInfoBasic();
		teamInfoBasic.leaderid = teaminfo.getTeamleaderid();
		teamInfoBasic.leaderlevel = leaderprop.getLevel();
		teamInfoBasic.leadername = leaderprop.getRolename();
		teamInfoBasic.leaderschool = leaderprop.getSchool();
		teamInfoBasic.minlevel = 0;
		teamInfoBasic.maxlevel = 0;
		teamInfoBasic.membernum = teaminfo.getMembers().size() + 1;
		teamInfoBasic.teamid = teamid;
		teamInfoBasic.membermaxnum = TeamManager.MAX_MEMBER_COUNT + 1; //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞楅梻渚�娼х换鍫ュ春閸曨垱鍊块柛鎾楀懏锛忛梺璇″瀻瀹�锟介崥瀣⒑閸濆嫮鐒跨紓宥勭窔閻涱噣宕堕澶嬫櫓闂佸吋浜介崕鏌ユ儊鎼淬劍鈷掑ù锝堫潐閵囩喖鏌涘Ο鍦煓闁诡喚鍏橀崺锟犲川椤旈棿绨垫俊鐐�栭崝褏绮婚幋锔藉�峰┑鐘叉处閻撳繐鈹戦悙鎴濈У鐎氱懓鈹戦埄鍐ㄧ祷闁绘绻掑Σ鎰板箻鐎靛摜鎳濇繝鐢靛Т閸燁偊顢旂捄琛℃斀闁绘﹩鍠栭悘閬嶆煕閳哄倻澧电�规洘绻傝灃闁告侗鍘鹃悡鎴︽⒑閻熸澘鈷旂紒顕呭灦閹繝寮撮姀锛勫帾婵犮垼鍩栫粙鎾诲礆閺夊簱鏀介柨娑樺濞呮洜绱掓潏銊ユ诞闁轰焦鎸荤粋鎺旓拷锝庝簽椤︺劌顪冮妶鍛閻庢稈鏅濋敓鑺ヨ壘缂嶅﹪骞冨畡鎵虫瀻闊洦鎼╂禒鍓х磽娓氬﹥瀚归梺鍛婂姦閸犳鎮￠悢鍏肩厵闁割煈鍠栭顐ょ磼閳藉懏瀚归梺璇插椤旀牠宕伴弽顓涳拷锕傛倻閽樺鐎梺鐟板⒔缁垶宕戦幇鐗堢厾缁炬澘宕晶顕�鏌ㄩ悢鐑樻珪闁稿鍊曢～蹇涙惞閻у憡瀚归柛锔诲幖鏍￠梺闈涙閸燁垱绌辨繝鍥ㄥ�烽柡澶嬪灩閻熴劑鏌℃担鍝ュ濞ｅ洤锕俊鍫曞川椤斿吋顏￠梻浣瑰▕閺�閬嶅垂閸ф钃熸繛鎴炃氶弨浠嬫煕閳╁喚娈㈠ù纭锋嫹闂傚倷鑳剁划顖滄暜閻斿皝鏋栭柡鍥╁У椤洟鏌熼悜姗嗘畷闁稿鍔欓弻褑绠涢敐鍛盎缂佸墽鍋撴繛濠囧箖濡わ拷閳绘捇宕归鐣屼粚婵＄偑鍊栧▔锕傚炊閼稿灚娅嶉梻浣侯焾缁绘帡宕㈣濞嗐垽鎮欏ù瀣杸闂佺粯蓱瑜板啴顢旈埡鍌ゆ闁绘劖娼欐慨鍥煃鐟欏嫬鐏撮柟顔界懇閹虫粓妫冨☉娆撴暘缂傚倸鍊峰ù鍥ь嚕閹捐泛鍨濇繛鍡樻尵瀹撲礁顭块懜闈涘闁诲繑濞婇弻锟犲磼濡搫濮曢梺璇茬箣缁舵艾顫忓ú顏呭殐闁冲湱鍋撶�氭盯姊洪崨濠冨鞍缂佸鎸荤粩鐔煎即閵忊�崇檮婵犮垼顫夌换鍌滅礊婵犲洤鏋侀柟鐗堟緲瀹告繃銇勯弮鍥棄闁告挾鏁诲娲传閸曨厸鏋岀紓浣虹帛缁诲牆顕ｆ繝姘櫜濠㈣泛顭濠囨⒑鐎圭姵銆冮柤瀹犲煐鐎靛ジ宕奸姀銏紳婵炶揪缍�濞咃絿鏁☉姘辩＜閻犲洩灏欐晶锕傛煙椤旇宓嗘い銏″哺閺佹捇鎸婃径灞炬濠殿喗顨愰幏閿嬨亜閵忥紕鎳囬柟绋匡攻瀵板嫬鈽夊▎蹇ｄ紦濠电姷鏁告慨鐢靛枈瀹ュ鍋傞柕蹇婏拷鑼畾濡炪倖鐗楅悷銊╊敆閻旈晲绻嗛柟缁樺笚閹叉悂鏌ㄩ悢鍑ゆ嫹閻曚焦缍堥梺鐟版憸椤牐鐏嬪┑掳鍊曢幊搴ㄦ偂濮楋拷閺岀喐娼忛幆褏妲ｉ梺杞扮閿曨亪寮婚敓鐘茬＜婵☆垳灏ㄩ幏宄扳槈閵忊剝娅㈤梺绋匡功閸犳劗娑甸崼鏇熺厽闁靛鍠曢柇顖涖亜閵忊槄鑰块柟顕呬邯閺佹挻绂掔�ｎ偄锟藉灝螖閿濆懎鏆欑痪顓ㄦ嫹闂佸搫顦悧鍕礉婵犲啰顩叉繝濠傜墛閻撴盯鏌涚仦鍓х畺缁绢叀鍩栭幈銊╂晲閸パ傛闂佸搫鐭夌换婵嬪极閹剧粯鍤嶉柕澹本绁梺璇插嚱缂嶅棝宕戦崱娑樺偍闁芥ê顦弨浠嬫煟閹邦剙绾фい銉︾矌缁辨帞绱掑Ο铏逛紝閻庤娲栭崯璺ㄥ弲濡炪倕绻愰幊搴ㄦ晸閽樺浠涢柟渚垮妼铻ｉ柛褎顨呴幗鐢告⒑閹肩偛锟窖囧箯闁垮绻嗛柣鎰典簻閿熷鍊栫粋宥咁煥閸繄鏌堥柣搴㈢♁鐪夌紒璇叉閺屾盯顢曢敐鍡欘槬閻庣懓鎲＄换鍐Φ閸曨垰鍐�闁靛ě鍛幘闂備礁鎽滈崑鐘诲春閺嶎偅宕叉繝闈涚墕閺嬪牊淇婇娑欍仧婵炲吋鍨垮铏圭矙濞嗘儳鍓伴梺纭呮珪閿曘垽鐛崘顔藉�婚柦妯侯槺閸樺憡绻涙潏鍓ф偧闁稿簺鍊曢埢鎾淬偅閸愨斁鎷洪梺鑽ゅ枑婢瑰棝骞楅悩鐢电＜閻犲洩灏欏瓭濡炪値鍘煎ú顓熶繆閹间礁鐓涢柛灞剧矊瀵娊姊绘担铏瑰笡闁哄被鍔嶉弲鑸垫償閵婏箑鍓瑰┑鐐叉閸╁﹪骞忓畡鎵虫灁闁割煈鍠楅悘鍫濐渻閵堝骸骞栭柛銏＄叀椤㈡岸鏁愭径濠勵啋濡炪倖妫佸Λ鍕濠婂牊鈷戦柟顖嗗懐顔戝銈嗘礃閻楃姴鐣烽娑欏劅闁靛鑵归幏缁樼箾鏉堝墽绉繛鍜冪悼閺侇喖鈽夐姀锛勫幈闂佸搫鍟幐楣冩偩閻㈢鎷风憴鍕缂侇喖鐭傞敐鐐测攽鐎ｎ偄娈濋梻鍌氱墛缁嬫劙骞嬮悜鑺モ拻濞达絽鎲￠幆鍫ユ煕婵犲倹鎲搁柤娲憾閺屽棗顓奸崨顖氭憢濠电偛顕慨鎾敄閸℃稒鍋傞柣鏂垮悑閻撴瑩姊洪銊х暠濠⒀屽枤缁辨帡鎮▎蹇斿闁稿﹤鐏氶幈銊ヮ潨閸℃顫梺闈╃悼閺咁偆妲愰幒鎾寸秶闁靛鍎抽鍌滅磽娴ｄ粙鍝洪悽顖涘笩閻忔帡姊洪崗鑲┿偞闁哄懏绻堝鑸电鐎ｎ偆鍘介柟鍏肩暘閸╁嫰宕箛娑欑厱闁绘ê纾ú瀛樸亜閵忊�蹭孩妞わ箑缍婇弻娑㈠煘閸喖濮曢悗鍨緲鐎氫即鐛崶顒夋晢濠㈣泛顑囩粔閬嶆⒒閸屾瑧鍔嶉柡瀣偢瀵彃鈽夐姀鐘垫焾濡炪倖鐗滈崕鎰板极閸岀偞鐓熼柡鍌氱仢閹垿鏌嶉柨瀣瑨闂囧鏌ㄥ┑鍡欏鐞氭氨绱掔紒銏犲箹闁绘牕銈稿璇测槈閵忊剝娅滈棅顐㈡处濞叉粓寮抽妶鍛傛棃鎮╅棃娑楃捕缂備胶绮敃銏狀嚕椤愶箑绠荤紓浣股戝▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹? by changhao 
		teamInfoBasic.targetid = 0;
		
		return teamInfoBasic;
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 794557;

	public int getType() {
		return 794557;
	}

	public int isfresh; // 客户端用 0刷新 1不刷新  by qyl
	public long start; // 起始teamid by changhao
	public int num; // 请求的数量 by changhao

	public CRequestClanFightTeamList() {
	}

	public CRequestClanFightTeamList(int _isfresh_, long _start_, int _num_) {
		this.isfresh = _isfresh_;
		this.start = _start_;
		this.num = _num_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(isfresh);
		_os_.marshal(start);
		_os_.marshal(num);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		isfresh = _os_.unmarshal_int();
		start = _os_.unmarshal_long();
		num = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CRequestClanFightTeamList) {
			CRequestClanFightTeamList _o_ = (CRequestClanFightTeamList)_o1_;
			if (isfresh != _o_.isfresh) return false;
			if (start != _o_.start) return false;
			if (num != _o_.num) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += isfresh;
		_h_ += (int)start;
		_h_ += num;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(isfresh).append(",");
		_sb_.append(start).append(",");
		_sb_.append(num).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CRequestClanFightTeamList _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = isfresh - _o_.isfresh;
		if (0 != _c_) return _c_;
		_c_ = Long.signum(start - _o_.start);
		if (0 != _c_) return _c_;
		_c_ = num - _o_.num;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

