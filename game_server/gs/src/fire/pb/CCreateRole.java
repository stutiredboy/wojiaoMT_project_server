
package fire.pb;

import java.io.UnsupportedEncodingException;

import fire.pb.cross.CrossManager;
import fire.pb.role.PCreateRole;
import fire.pb.util.CheckName;

import org.apache.log4j.Logger;




// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CCreateRole__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}


public class CCreateRole extends __CCreateRole__ {
	public static final Logger logger = Logger.getLogger("SYSTEM");
	
	private boolean  sendError(int err){
		final SCreateRoleError res=new SCreateRoleError();
		res.err=err;
		return gnet.link.Onlines.getInstance().sendResponse(this, res);
	}
	
	@Override
	protected void process() {
		if(CrossManager.getInstance().isInCrossServer()){
			logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幈濡炪値鍘介崹鍨濠靛鐓曟繛鍡楃箳缁犲鏌＄仦鍓ф创闁炽儻绠撻獮瀣攽閸涱垱鏅煎┑锛勫亼閸婃劙寮插鍡愪汗闁告劦鍠楃粻鎺楁⒒娴ｈ櫣甯涢柨姘繆椤栨熬韬�规洘娲濈粻娑㈠即閻樼绱查梻浣芥硶閸犳洘鎱ㄩ妶鍜佸殫闁告洦鍋嗛弳鍡涙倵閿濆骸浜滄い蹇氭硾铻栭柣姗�娼ф禒婊堟煟韫囨梻绠炵�规洘绻傞～婵嬫嚋閻㈤潧骞嶉梻鍌欑閻忔繈顢栭崨瀛樺�堕柟缁㈠枟閻撴瑩鏌ц箛锝呬簼鐎规洖鐬奸敓鍊燁潐濞叉粓鈥﹂崼锝囦簷濠电偠鎻徊浠嬪箹椤愶妇宓侀柛顐犲劜閳锋帒銆掑鐐濠电偘鍖犻崶浣告喘椤㈡﹢濮�閻樿尙锟筋參姊洪崨濠勭畵閻庢皜鍥у嚑鐎广儱顦伴悡鏇㈡煏婢舵ê鏋涘褜鍨堕弻锝夊箻鐠虹儤鐎鹃梺闈涙搐鐎氫即鐛Ο鍏煎磯闁告繂瀚ˉ搴㈢節绾版﹫鎷烽崘鑼獓闂佽鍠栭崐姝岀亱婵炶揪绲块幊鎾舵閻愮儤鐓欓梺顓ㄧ畱楠炴﹢鏌涘▎蹇旑棞闁宠鍨块幃鈺冪磼濡鏁繝纰樻閸嬪懐绮欓幒妤�鐤鹃柛顐ｆ礃閻掕偐锟藉箍鍎卞Λ娑㈠储闁秵鈷戦梻鍫熺〒婢ф洟鏌熼崘鏌ュ弰鐎殿喗濞婇弫鎰緞鐎ｎ剙骞愰梺璇茬箳閸嬫稒鏅堕挊澹濊櫣锟芥稒锕╁▓浠嬫煟閹邦垱褰ч柤鏉挎健閺岀喓绮甸崷顓犵槇婵犵锟藉磭鍩ｇ�规洖鐖兼俊鎼佹晜閻愵剦娼ч梻鍌氬�搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偞鐗犻、鏇㈡晝閿熺晫锟芥艾顦伴妵鍕箳閹存繍浠鹃梺绋块鐎涒晠濡甸崟顖氬唨妞ゆ劦婢�閹寸兘鎮楃憴鍕矮缂佽埖宀稿濠氭偄閸忕厧锟界粯鎱ㄥΔ锟藉Λ娆撴偩閸撲胶纾藉ù锝呮惈瀛濆銈庡幘閸忔ê顕ｇ拠娴嬫闁靛繒濮堥埡鍛叆闁哄啫鐗婇弳婊勪繆娣囧崬濡兼い顏勫暣婵¤埖鎯旈垾鑼泿缂傚倷绀侀ˇ顖涙櫠鎼粹垾锝夊箛閺夎法顔掗柣鐘叉穿鐏忔瑩鏁嶅鍐ｆ斀妞ゆ梹鏋绘笟娑㈡煕閹惧崬濮傛鐐茬箻閹粓鎸婃径宀婂晣濠电偠鎻徊浠嬪箺濠婂牊鏅繛鍡樻尰閸嬧剝绻濇繝鍌涘櫣妞わ絽銈搁幃浠嬵敍濞戞顑傜紓渚囧枛椤嘲顕ｉ崜浣瑰珰闁绘劦鍓氶ˉ鍫ユ煛娴ｇ懓濮嶇�规洏鍔戦、姗�鎮㈤崜鎻掓暢缂傚倸鍊搁崐鐑芥嚄閼稿灚鍙忛柣鎴ｆ缁愭鏌″搴″箹闁藉啰鍠栭弻锝夊籍閸ヮ煈浠╃紒鐐劤閵堟悂寮婚弴锛勭杸闁哄洨鍊敐澶嬬厽闊洦鎸炬晶銏㈢磼鏉堛劍灏伴柟宄版嚇瀹曨偊宕熼幋顖滃埌闁宠鍨块幃娆戞嫚瑜戦崥顐︽倵濞堝灝鏋涙い顓犲厴瀵偊骞樼紒妯轰汗闂佽偐鈷堥崜娆撴晸閻ｅ苯浠辨慨濠呮閿熻棄婀辨慨鐢稿Υ閸愵亞纾奸柨鐔诲Г閹峰懘宕烽鐘查獎濠电姰鍨煎▔娑滃闂佺尨鎷峰ù鐘差儐閻撳啴鏌﹀Ο渚Ч妞ゃ儲绮岄湁婵犲﹤鐗忛悾娲煛瀹�锟介崰鏍х暦濞嗘挸围闁糕剝顨忔导锟�!!!");
			return;
		}
		
		if(!fire.pb.main.ConfigManager.isCanCreateRole) {
			sendError(SCreateRoleError.CREATE_CREATE_GM_FORBID);
			logger.error("GM闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啰效闁挎繄鍋涢埞鎴狅拷锝庡亝濞呭洭姊虹粙璺ㄧ効濠碘�虫川缁瑨绠涢弮鍌滅槇闂侀潧楠忕徊浠嬫偂閹扮増鐓曢柡鍐挎嫹闁绘濮撮悾鐑藉箣閿曪拷鍥存繝銏ｆ硾椤戝洭宕㈤幖浣光拺闁硅偐鍋涢崝妤呮煛閸涱喚鈽夐柣顭戝墴濮婄粯鎷呴搹鐟扮闁汇埄鍨辩敮锟犲极閸愵喖唯鐟滃骸鐣烽崣澶岀闁瑰瓨鐟ラ悘鈺傤殽閻愵亜鐏ǎ鍥э躬椤㈡稑鈹戦崶鏈靛摋濠电偛顕慨鐢稿箰閸愬樊娼栨繛宸簻缁犲綊鏌ｉ幇顓炵祷妞ゎ剙顦辩槐鎾存媴缁涘娈梺缁橆殕閹告悂顢氶敐鍡欑瘈婵﹩鍎甸埡鍛厓闁告繂瀚敓钘夋啞缁傚秴顭ㄩ崼鐔叉嫼闂佸憡绋戦敃锔剧不閹剧粯鍊垫慨姗嗗墯閸ゅ洤鈹戦鍡樺闂備線娼х换鍫ュ垂婵犳碍鏅繝濠傜墛閳锋垿鎮归幁鎺戝闁哄绉剁槐鎺楊敊閻ｅ本鍣ч梺浼欑悼閸忔﹢鐛幒鎳虫梹鎷呴棃鈺傚闁绘垼濮ら崐鐢告煟閵忊槅鍟忛柣鎺斿亾椤ㄣ儵鎮欓懠顑勬叏婵犲嫮甯涢柟宄版噽缁數锟斤綆浜濋悾浼存⒒娴ｈ鍋犻柛鏂胯嫰閻ｇ兘顢楅崟顭掓嫹閿曞倸鍨傛い鏂诲劤閸犲酣鍩㈡惔銊﹀�锋い鎺嶈兌濡差亪姊婚崒姘拷鎼佸磹閹间礁纾归柣鎴ｅГ閸婂潡鏌ㄩ弮锟介幏婵嬪箯妞嬪海绠旀繛鎴炆戦崳浠嬫煟椤撶喓鎳囬柡宀�鍠栭幃婊兾熼悜姗嗗晭婵犵數鍋為崹顖炲垂閸︻厾鐭嗛柛鎰ㄦ杺娴滄粓鏌￠崘銊︽悙妞ゃ儱绉归弻鐔兼嚍閵夛妇顦ラ梺瀹狀潐閸ㄥ潡骞冨▎鎾崇骇闁瑰濮抽幋鐑芥⒒娴ｈ鍋犻柛鏂胯嫰閿曘垺娼忛埡浣哥亰婵犵數濮甸懝鍓х不椤曪拷閺屻倝骞侀幒鎴濆Б闂佸憡顭囬弫璇差潖閾忚瀚氶柍銉ョ－閿熻棄顭烽弻娑樷槈閸楃偛鈷嬮梺绋款儐椤ㄥ棛鎹㈠┑鍫濇瀳婵☆垰鎼埛澶愭偡濠婂嫭绶查柛鐔告尦楠炲啳顦剁紒鐘崇洴瀵挳鎮ゆ担鍦◥闂傚倷娴囬～澶婄暦濮楋拷椤㈡俺顦村瑙勬礋瀹曟宕楅悡搴′紟婵犳鍠楅〃鍛涘Δ浣规珷濡わ絽鍟悡娆忣渻鐎ｎ亜顒㈤柣鎺戞健閺屾洟宕堕妸銉ヮ潚濡ょ姷鍋炵敮锟犵嵁鐎ｎ喗鍋戦柨鐔剁矙瀹曨剛鎹勭悰鈩冩杸闁圭儤濞婂畷鎰槾鐎垫澘锕ョ粋鎺旓拷锝庝簽閺屽牆顪冮妶鍡楀闁稿﹥顨嗙粙澶婎吋婢跺鍘介梺鍝勫�搁悘婵嬪箖閹达附鐓熼柟鎯ь嚟閹冲懐绱掓潏銊﹀鞍闁瑰嘲鎳樺Λ鍐ㄢ槈濮橆偅鍋呴梻鍌欑閹碱偊顢栭崱娆戠煓闁规崘鍩栭～鏇㈡煙閻戞﹩娈曢柛瀣姍閺屾盯骞囬鐘仦闂佸搫顑嗛悷鈺侇潖濞差亜浼犻柛鏇ㄥ幘閸斿湱绱撴担铏瑰笡缂佽鍊块幃楣冩倻閽樺鍞堕梺鍝勬川閸嬬喖宕㈤崨濠勭閺夊牆澧介幃鍏笺亜椤撶偟澧﹂挊鐔煎箹濞ｎ剙鐏紒鈽呮嫹缂備礁澧芥晶妤勬懌濡炪値鍋勯敃顏堝蓟濞戞熬鎷烽敐搴′簼鐎规洖鏈〃銉╂倷閼碱剛顔掗梺杞扮劍閹瑰洭寮幘缁樻櫢闁跨噦鎷�!!!");
			return;
		}
		
		// protocol handle
		final int userID=((gnet.link.Dispatch)this.getContext()).userid;		
		final xbean.User u = xtable.User.select(userID);
		// 濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撻弻锝夋偐鏉堫偒鍔呴梺缁樻尭椤︾敻鐛箛鏃戞Ч閹兼番鍨归弸鍌炴⒑閸涘﹥澶勯柛鎾寸洴钘濋柕澶堝劗閺�浠嬫煟閹伴偊鏉洪柛銈咁儑缁辨帡鎮╅搹顐㈢濡炪倖娲╃紞浣哥暦濡警鍟呮い鏃�鍎冲鎶芥⒒娴ｇ顥忛柛瀣瀹曚即骞樼拠鑼厬闂佸憡娲﹂崹閬嵥夋繝鍐︿簻闁规壋鏅涢悘顏勵熆鐠哄搫顏紒缁樼洴瀹曪絾寰勫☉婊愭嫹閹稿簺浜滈柕蹇婂墲椤ュ牓鏌熼鍝勭伈鐎规洘顨婇幊鏍煛娴ｅ摜顓煎┑鐘殿暜缁辨洟宕戝☉銏╂晞闁告侗鍣▓浠嬫煙闂傚顦﹂柛灞诲姂閺岀喓绱掗姀鐘崇亶闂佺粯鎸婚悷锕傚Φ閸曨垰绫嶉柨鐔剁矙瀹曟洟骞庨挊澶婂亶闁诲孩绋掗敃鈺佲枔娴犲鐓熼柟閭﹀灠閻ㄦ椽寮崼婵愭富闁靛牆鍟悘顏堟煟閻斿弶娅婃鐐诧躬瀵粙顢橀悙闈涘箰濠电偠鎻徊浠嬪箺濠婂牜鏁婇柨鐕傛嫹?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻愰湁闁稿繐鍚嬬紞鎴︽煕閵娿儱锟藉潡寮婚敐澶婄鐎规洖娲ら崫娲⒑閸濆嫷鍎愰柣妤侇殘閹广垹鈽夐姀鐘殿吅濠电偛妫楃换鎺楀礉閹绢喗鈷戦弶鐐村椤︼箓鎮楀顐㈠祮鐎殿喛顕ч埥澶娢熼柨瀣垫綌婵犵數鍋涘Λ娆撳礉閺囥垹绀堢憸鐗堝笚閳锋垿寮堕悙鏉戭棆妞わ讣绠撻弻娑欑節閸屾稑浠撮悗娈垮枛椤嘲顕ｉ幘顔藉亜濡炲娴烽悰顕�姊绘担铏广�婇柛鎾寸箚閹筋偊姊虹紒妯肩畺婵炶尙鍠庨～蹇涙惞閸︻厾锛滃┑鈽嗗灥椤曆囧汲濡ゅ懏鈷戦柛婵勫劚鏍￠梺缁橆殘婵挳顢氶敐鍡欑瘈婵﹩鍓欏畵鍡涙⒑缂佹ɑ顥嗘繛鍜冪秮椤㈡瑩寮撮姀鈾�鎷洪梺鍛婃崄鐏忔瑩宕㈠☉銏＄厱闁绘ê纾晶顒勬煙娓氬灝濡介柟顖涙閸┿儵宕卞Ο铏规В闂傚倷绶氬褔鎮ч崱娑樼疇闊洦娲滈惌澶愭倵閿濆骸鏋熼柣鎾存礋閺岀喖鎮欓浣虹▏闂佸憡绻傞幖顐﹀煘閹达附鏅柛鏇ㄥ墯濮ｅ牓鎮楃憴鍕闁哥姵鐗犻妴浣糕槈閵忊剝娅滈梺绯曞墲钃遍柣婵囩墵濮婂宕掑▎鎴濆闁诲海鐟抽崨顔煎簥闂佺鏈划锝夊箯瀹勬壋妲堥柟鐑樻尰閻濇岸姊虹拠鈥虫灍閻庣瑳鍛當闁绘柨鍚嬮弲鎼佹煢濡警妯堟繛鍏肩墵閺屟嗙疀濮樺吋缍堥梺绋跨箲缁捇寮诲☉妯锋闁告鍋為悘鎾绘偡濠婂嫬惟闁告侗鍨抽敍婵囩箾鏉堝墽鎮奸柣鈩冩瀹曢潧鈻庨幘瀵稿幗濠德板�撻悞锕�鐣风仦缁㈡闁绘劖褰冮弳锝夋煛娴ｈ宕岄柟顕呬邯閺佹挻绂掔�ｎ亝鐎梺鍛婂姦閸犳鎮￠妷鈺傜厸闁告劑鍔岄敓鍊熷吹閺侇喖鈽夐姀锛勫幐闂佸憡绮岄崯鎵矓椤旇姤鍙忓┑鐘叉噺椤忕姷绱掓潏銊ョ瑨閾伙綁鐓崶椋庡闂侇収鍨堕弻鐔碱敊閻偒浜敐鐐测攽閸喎纾梺鎯х箰濠�鍗炵暦閼哥數绡�闁汇垽娼ф禒锕傛煕椤垵鐏︾�规洜鎳撶叅妞ゅ繐瀚崢閬嶆⒑閸︻厼鍔嬫い銊ユ閹繝寮撮姀鈥筹拷鍫曟煟閹邦厽缍戠紒锟介崘顭戠唵閻熸瑥瀚搁懓鍧楁煛鐏炶濮傞柟顔哄灮閹风姴鈻撶�ｎ偅宕岄柡宀�鍠栭、娆撴偂鎼搭垱瀚归柟闂寸劍閸嬧晠鏌ｉ幋锝嗩棄缂佺姵鐩弻鈩冨緞婵犲啫浠撮梺鍝ュ仜閻栫厧顫忓ú顏勪紶闁告洦鍓欑粣娑㈡⒑缁嬫鍎戦柛鐘崇墳濡喎顪冮妶鍡樼┛闁归鍏橀弻鐔碱敊缁涘鐤侀梺缁樹緱閸ｏ絽鐣疯ぐ鎺濇晩闁绘挸瀵掑娑㈡⒒閸屾瑦绁版い鏇熺墵瀹曞綊鏌嗗鍛唶婵犵數濮甸懝鍓х不濮樿埖鐓涢柛鎰╁妿婢ф洟骞嗛悢鍏尖拺闂傚牊鍐荤槐锟犳倶閻愯泛袚闁哄棎鍎靛濠氬磼濮橆剨鎷峰畡鎳婂綊宕堕妸锕�寮块梺闈涚墕椤︿即寮查鍛箚闁绘劦浜滈敓绐栧拑鎷烽棃娑氱劯鐎规洝顫夌�靛ジ骞栭鐔告珨闂備焦瀵х换鍌炲箠閹版澘姹查悗锝庡枟閳锋垶銇勯幘鍗炲婵＄虎鍣ｉ幃妤呮濞戞氨鍔┑顔硷攻濡炶棄螞閸愩劉妲堟慨姗嗗墻閺嗩偅绻濈喊妯活潑闁稿鎳愮划娆撳箳濡わ拷閻ら箖鏌涢锝嗗闁轰礁妫濋弻娑氫沪閸撗呯厑闂佹寧绋戠换妯侯潖濞差亜浼犻柛鏇炵仛姝囨繝鐢靛仜椤︽澘煤濮楋拷瀵煡濡烽埡鍌滃幗闁瑰吋鐣崐銈咁焽閹邦厾绠鹃柛娆忣棦椤忓棗寮叉繝纰樻閸ㄤ即宕ョ�ｎ亞鏆﹂柛娆忣槺缁★拷闂傚倸鐗婃笟妤呭磿韫囨稒鐓熼柟閭﹀墾闊剟鏌＄仦鐐缂佺粯鐩畷褰掝敊閻撳巩銉╂⒒娴ｅ摜绉烘い銉︽崌瀹曟顫滈敓浠嬬嵁閸愨晝顩烽悗锝庝簻缁愭稒绻濋悽闈浶㈤悗姘煎墴閻涱喖螖閸涱喒鎷绘繛鎾寸啲閹烽攱绻涙担鍐叉噺瀹曟煡鏌熼悜妯诲鞍闁告瑥绻樺娲垂椤曞懎鍓冲銈傛櫊閺�杈╂崲濞戙垹绠ｆ繛鍡楃箳娴犻箖姊虹紒妯诲鞍婵炶尙鍠栧濠氬即閵忕娀鍞跺┑鐘绘涧閻楀繘顢欐径鎰厽閹兼番鍨兼竟妯荤節閿熻姤娼忛埡鍌ゆ綗闂佽宕橀褏澹曢崗鍏煎弿婵妫楁晶楣冩煙閻戣姤鏁辨い锔惧閹棃濮�閳轰椒缂撻梻鍌欐祰濞夋洟宕伴幘瀛樺弿闁汇垻顭堢壕濠氭煕鐏炴儳鍤柣鏂挎閺屻倝骞栨担瑙勯敪婵犳鍠栧ú銊ф閹烘鍋戦柨鐔剁矙瀹曞綊宕奸弴鐐舵憰闂侀潧艌閺呮粓宕戦崱娑欑厱閻忕偛澧介埥澶嬨亜韫囥儲瀚�
		final fire.pb.role.SCreateRoleConfig config = RoleConfigManager.getCreateRoleConfig(shape);
		if (config == null)
		{
			logger.error("-------------------------濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓洪梺缁樺姇閻忔岸宕宠缁辨挻鎷呯粙娆炬殺闂佺顑冮崐婵嗩嚕鐠囨祴妲堥柕蹇曞閵婏负浜滈柡鍐ㄥ�哥敮鑸点亜椤愮喐娅囩紒杈ㄦ尰缁楃喐绻濋崘顭戜紦闂傚倷绀佹竟濠囧磻閸℃稑绐楅柟鎹愭硾婵剟鏌ㄩ悢鍓佺煓婵﹤顭峰畷鎺戭潩閸楃儐鏉哥紓鍌欑椤戝棛鏁敓鐘叉瀬鐎广儱顦猾宥夋煕椤愩倕鏋旈柛姗�绠栧娲传閸曞灚歇濠电偛顦板ú妯肩矉閹烘顫呴柕鍫濇閸橆亪姊虹化鏇炲⒉闁挎氨绱掑Δ浣哥瑲闁靛洤瀚伴、鏇㈡晲閸モ晝鏉介梻浣筋嚃閸犳鎮烽埡鍛拷浣肝旈崨顔芥婵炲濮撮鎰板极閸岀偞鐓犵紒瀣仢閹胶绱掔拠鍙夘棦闁哄本娲熷畷鐓庘攽閸ャ劍鍊烽梺鍝ュ枑閹倸顫忛搹鍦煓婵炲棙鍎抽崜杈╃磽娴ｅ壊鍎愰柟鎼佺畺瀹曟岸骞掑Δ锟界猾宥夋煕閵夛絽鍔欐慨瑙勵殜濮婃椽宕烽鐐插闂佸搫琚崝搴ｅ垝婵犲洦鏅濋柛灞剧▓閹疯櫣绱撴笟鍥х仭婵炲弶鐗楅弲鍫曞蓟閵夛妇鍘遍梺鐟邦嚟婵敻宕甸敓浠嬫煕濡わ拷瀹曨剟鍩為幋锔藉亹鐎规洖娴傞弳锟犳⒑閹惰姤鏁遍柛銊ユ贡濡叉劙骞樼�涙ê顎撻梺鍏肩ゴ閸撴繈宕圭憴鍕洸闁归棿绶￠弫鍥煏韫囥儳纾块柛妯块哺缁绘繈鎮介棃娴躲垽鏌涙繝鍌滅Ш鐎规洘鍨挎俊鐑芥晜缂佹﹩鍟嶉梻浣虹帛閸旀牞銇愰崘顔兼辈婵炲棙鎸婚幊姘舵煛瀹ュ骸骞楅柣鎾存礃缁绘盯骞嬪┑鍡氬煘闂佸搫顑嗙粙鎴︽箒闂佺粯顭堝▍鏇㈠Φ濠靛洦鍙忓┑鐘插暞閵囨繄锟借娲樼划鎾诲箠閻樻椿鏁嗛柨鐔烘櫕閺侇噣濡烽埡鍌楁嫼缂備礁顑嗛娆撳磿韫囨稒鍊垫慨妯煎帶婢ф挳鏌涢埞鍨伈妤犵偞锚閻ｇ兘宕堕妸锔炬殾闂傚倷娴囧▔鏇㈠窗閹捐鐤炬い鎰ㄦ嚒閿濆绠涢柡澶庢硶椤旀帡鏌ｆ惔銏⑩檨闁挎碍銇勬惔銏″磳婵﹤顭峰畷鎺戭潩閸楃儐鏉哥紓鍌欑椤戝棝宕归崸妤�鐏抽柡宥冨妼缁剁偤鏌熼柇锕�骞愰柟鐤缁辨捇宕掑▎鎴濆闁藉啴浜堕弻鐔碱敍濮樺崬鈪辩紓浣介哺鐢偟妲愰幒鎳崇喖鎳栭埡鍐╂緰闂傚倷鑳剁划顖涚瑹濡ゅ懎闂柨婵嗘噽閺嗭箓鏌涘Δ鍐ㄤ汗婵℃彃鐗婃穱濠囶敍濠х偓瀚涘┑陇灏欐晶妤佺┍婵犲洦鍊锋い蹇撳閹风兘寮介‖顒佺♁缁楃喖鏁撻挊澶屾殾闁硅揪绠戠粻娑㈡煕韫囷絽浜滄繛宸幖椤曪絿鎹勭悰鈩冪�婚梺缁樺姦閸撴瑩鎯佸鍫熲拻濞撴熬鎷锋繛浣冲洦鍋嬮柛鈩冦亗濞戞ǚ妲堟繛鍡樺姈閻濆嘲顪冮妶鍡楃瑨閻庢凹鍙冮幃锟犳偐缂佹鍘介梺缁樻煥閹诧紕娆㈤弻銉︾厓闂佸灝顑嗛ˉ鍫ユ煛瀹�锟介崰鎾跺垝閺冨牆骞㈡俊銈勭閻濇棃姊鸿ぐ鎺濇闁稿繑锕㈠顐﹀箛椤撶喎鍔呴梺鐐藉劜閸撴艾顭囬崜褏纾藉ù锝囨嚀閸斻倗鎲搁幍顔间户闁告帗甯掗埢搴ㄥ箻鐎圭姵鎲版繝鐢靛仦閸ㄥ爼鎯岄灏栨煢妞ゅ繐鐗婇悡娆撴偡濞嗗繐顏╁┑顔兼处閵囧嫰濡烽敂鍓х杽濠殿喖锕ュ钘夌暦椤愶箑绀嬮梻鍫熺☉婢瑰嫰姊绘担渚劸闁挎洏鍎抽幑銏ゅ醇濠垫劕娈ㄩ柣鐘叉处缁佹潙危閸儲鐓忛煫鍥ь煭閹风兘宕楅崨顔炬綎闂傚倸鍊风粈浣虹礊婵犲洢锟藉倿鏁冮崒娑橈拷鍧楁煥閺囩偛锟藉綊宕戦鍕╋拷鎺戭潩閻愵剙顏堕梻浣筋嚃閸犳銆冮崨鏉戠厺闁规崘顕ч崹鍌涖亜閺冨倹娅曞ù婊冪埣濮婄粯鎷呯粵瀣異闂佸摜濮甸悧鐘茬暦閹版澘绠瑰ù锝囨嚀娴犲ジ鎮楅悷鏉款伃闁稿锕ら…鍥Ω閳哄倻鍙嗛梺缁樻煥婢у酣鎯屽▎鎴嫹鐟欏嫭绀冩俊鐐扮矙瀵偊骞樼紒妯轰汗闂佽偐鈷堥崜锕�危娴煎瓨鈷掑ù锝堟鐢盯鏌涢弮鎾剁暤鐎规洘绮岄埥澶愬閻樻爠鍥ㄧ叆闁绘洖鍊圭�氾拷?!!!--------"+shape);
			return;
		}
			
		if (!config.schools.contains(school))
		{
			logger.error("------"+shape+"-------------------濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓洪梺缁樺姇閻忔岸宕宠缁辨挻鎷呯粙娆炬殺闂佺顑冮崐婵嗩嚕鐠囨祴妲堥柕蹇曞閵婏负浜滈柡鍐ㄥ�哥敮鑸点亜椤愮喐娅囩紒杈ㄦ尰缁楃喐绻濋崘顭戜紦闂傚倷绀佹竟濠囧磻閸℃稑绐楅柟鎹愭硾婵剟鏌ㄩ悢鍓佺煓婵﹤顭峰畷鎺戭潩閸楃儐鏉哥紓鍌欑椤戝棛鏁敓鐘叉瀬鐎广儱顦猾宥夋煕椤愩倕鏋旈柛姗�绠栧娲传閸曞灚歇濠电偛顦板ú妯肩矉閹烘顫呴柕鍫濇閸橆亪姊虹化鏇炲⒉闁挎氨绱掑Δ浣哥瑲闁靛洤瀚伴、鏇㈡晲閸モ晝鏉介梻浣筋嚃閸犳鎮烽埡鍛拷浣肝旈崨顔芥婵炲濮撮鎰板极閸岀偞鐓犵紒瀣仢閹胶绱掔拠鍙夘棦闁哄本娲熷畷鐓庘攽閸ャ劍鍊烽梺鍝ュ枑閹倸顫忛搹鍦煓婵炲棙鍎抽崜杈╃磽娴ｅ壊鍎愰柟鎼佺畺瀹曟岸骞掑Δ锟界猾宥夋煕閵夛絽鍔欐慨瑙勵殜濮婃椽宕烽鐐插闂佸搫琚崝搴ｅ垝婵犲洦鏅濋柛灞剧▓閹疯櫣绱撴笟鍥х仭婵炲弶鐗楅弲鍫曞蓟閵夛妇鍘遍梺鐟邦嚟婵敻宕甸敓浠嬫煕濡わ拷瀹曨剟鍩為幋锔藉亹鐎规洖娴傞弳锟犳⒑閹惰姤鏁遍柛銊ユ贡濡叉劙骞樼�涙ê顎撻梺鍏肩ゴ閸撴繈宕圭憴鍕洸闁归棿绶￠弫鍥煏韫囥儳纾块柛妯块哺缁绘繈鎮介棃娴躲垽鏌涙繝鍌滅Ш鐎规洘鍨挎俊鐑芥晜缂佹﹩鍟嶉梻浣虹帛閸旀牞銇愰崘顔兼辈婵炲棙鎸婚幊姘舵煛瀹ュ骸骞楅柣鎾存礃缁绘盯骞嬪┑鍡氬煘闂佸搫顑嗙粙鎴︽箒闂佺粯顭堝▍鏇㈠Φ濠靛洦鍙忓┑鐘插暞閵囨繄锟借娲樼划鎾诲箠閻樻椿鏁嗛柨鐔烘櫕閺侇噣濡烽埡鍌楁嫼缂備礁顑嗛娆撳磿韫囨稒鍊垫慨妯煎帶婢ф挳鏌涢埞鍨伈妤犵偞锚閻ｇ兘宕堕妸锔炬殾闂傚倷娴囧▔鏇㈠窗閹捐鐤炬い鎰ㄦ嚒閿濆绠涢柡澶庢硶椤旀帡鏌ｆ惔銏⑩檨闁挎碍銇勬惔銏″磳婵﹤顭峰畷鎺戭潩閸楃儐鏉哥紓鍌欑椤戝棝宕归崸妤�鐏抽柡宥冨妼缁剁偤鏌熼柇锕�骞愰柟鐤缁辨捇宕掑▎鎴濆闁藉啴浜堕弻鐔碱敍濮樺崬鈪辩紓浣介哺鐢偟妲愰幒鎳崇喖鎳栭埡鍐╂緰闂傚倷鑳剁划顖涚瑹濡ゅ懎闂柨婵嗘噽閺嗭箓鏌涘Δ鍐ㄤ汗婵℃彃鐗婃穱濠囶敍濠х偓瀚涘┑陇灏欐晶妤佺┍婵犲洦鍊锋い蹇撳閹风兘寮介‖顒佺♁缁楃喖鏁撻挊澶屾殾闁硅揪绠戠粻娑㈡煕韫囷絽浜滄繛宸幖椤曪絿鎹勭悰鈩冪�婚梺缁樺姦閸撴瑩鎯佸鍫熲拻濞撴熬鎷锋繛浣冲洦鍋嬮柛鈩冦亗濞戞ǚ鏋庨柟鎯х－閸橀亶姊洪崷顓炲妺婵﹨宕垫竟鏇㈠礂缁楄桨绨婚梺鍝勬川閸嬬偤宕宠ぐ鎺撶厽闊洦娲栭埢鍫ユ煛瀹�瀣М闁轰焦鍔欏畷鎯邦槻妤犵偛顑呰灃闁绘﹢娼ф禒锔姐亜椤撶偞鍠橀柡浣规尰缁傛帞锟斤綆鍋呴柨顓㈡⒑绾懎袚缂侇喗鎹囬妴浣糕枎閹惧啿宓嗛梺闈涚箚濡狙囧箯濞差亝鐓熼柣鏂挎憸閹冲啴鎮楀鐓庡籍鐎规洘娲栬灃闁告侗鍠氶崢閬嶆⒑闂堟侗鐒鹃柛鏂款儔瀹曘儵顢曢敂鐣屽弳闂佺粯妫侀褑顣块梻浣虹帛濡繘宕滈悢鑲╁祦闊洦绋掗弲鎼佹煥閻曞倹瀚�?!!!------"+school);
			return;
		}
		
		
		//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣濠垫劖缍楅梺璺ㄥ枙濡嫰宕愰崸妤�绠板┑鐘插暟閻濆爼鏌嶉崫鍕靛剳缂佸鍠氶敓鍊燁潐濞叉粓宕伴弽顓滐拷浣糕槈濮楀棙鍍垫俊鎻掓湰閻楁洟寮幖浣光拻闁稿本鐟︾粊鐗堢箾婢跺绀嬬�规洘濞婇弫鍐磼濮橀硸鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺岋綁骞樼�靛憡鍣伴梺鍝勭灱閸犳牠銆佸☉姗嗙叆闁告劗鍋撳В澶嬩繆閻愵亜锟芥垿宕曢柆宓ュ洭鎮界粙鑳憰闂佹寧绋戠�氭悂骞忛悜鑺ユ櫜闁稿本绋掗悵鏍磽娴ｇ懓濮堟俊顐㈠暣瀵鏁嶉崟顏呭媰闂佺粯鍔﹂崜娑⑺囨导瀛樺�甸悷娆忓缁�鍫ユ煕濡姴娲ら悡姗�鏌熸潏鍓х暠缂佺姵绋掗妵鍕箻缁涘湱纭�闂佹悶鍎崝澶愬箯閾忓湱纾藉ù锝呭閸庢劖銇勯幋鐐垫噰鐎规洘娲栭鍏煎緞鐎ｎ剙骞堥梻浣告惈閸犳盯骞忛悜鑺ョ厱闁靛鍎虫禒銏°亜閺囶亞绋荤紒缁樼箓椤繈顢楅敓钘夌暤閸℃稒鈷戠紓浣股戦ˉ鍡樼箾閸滃啰绉柟顖欑窔瀹曞ジ濡烽敂缁橆棅婵＄偑鍊栭崝鎴﹀垂閻戞ê绶為柛鏇ㄥ墰缁犻箖鏌涘▎蹇ｆШ闁活厽甯為敓鑺ヮ問閸犳绻涙繝鍥х畺闁冲搫鍟扮壕鍏间繆椤栫偞鏁遍悗姘冲亹缁辨捇宕掑顒婃嫹閻戣姤鍊块柨鏇氱劍閹冲矂姊虹拠鑼缂佺粯甯楅弲璺何旈崘鈺佸簥濠电偞鍨崹娲吹閹寸偑浜滈柟铏瑰仦鐎氬綊姊洪崫鍕靛剱缂佸鎹囬弫鎾绘嚍閵夘喖鏅遍梺鍝ュУ閻╊垶銆佸鎰佹▌闂佺硶鏂傞崕鎻掝嚗閸曨剛绡�閹兼番鍨圭紓鎾绘⒒娴ｈ櫣銆婇柛鎾寸箞閺佸姊虹粙璺ㄧ闁挎洏鍎茬粚杈ㄧ節閸ャ劌锟介攱銇勮箛鎾愁伒闁归鍏樺浠嬵敃閿濆棙顔囬梻浣告贡閸庛倝銆冮崨顖氼棜鐟滅増甯楅悡娆撴⒑椤撱劎鐣遍柣蹇氶哺娣囧﹪顢涘顒変純濠殿喖锕ュ钘夌暦椤愶箑绀嬫い鎾跺Т婵晫绱撻崒娆掑厡缂侇噮鍨抽幑銏ゅ磼閻愭潙浠奸梺缁樺灱濡嫮娑甸敓浠嬫⒑缂佹ê鐏ユ俊顐ｇ懇瀹曟捇鎮介崨濠勫幗闂佺粯顭囬崕銈夘敂閻樼粯鐓曢幖瀛樼☉閿熻姤绻堥悰顔界節閸屾鐎婚梺鐟板⒔鐞涖儵骞忕紒妯肩閺夊牆澧介幃濂告煟閳╁啯顥堢�规洜鏁诲畷姗�顢欓悾灞藉箞闂備線娼ч…鍫ュ磿闁秵鍤嬬憸鐗堝笚閹虫岸鏌ｉ幇顔煎妺闁绘挻娲熼弻鐔稿鐎涙ɑ閿梺鍝勵儐閻╊垶寮婚敍鍕舵嫹閿濆倹娅囩紒鎰閺岋紕浠﹂崜褉妲堥梺浼欑稻缁诲牓寮幘瀵割浄閻庯綆浜為敍娑㈡⒑缂佹ê濮囬柟纰卞亰瀹曘儵宕烽銊﹀妤犵偛鐏濋崝姘亜閿斿灝宓嗛柟顔欍倗鐤�闁瑰灝鍟伴崬鐢告煟閻樼儤銆冮悹锟介敃鍌氱？闊洦鎸撮弨鑺ャ亜閺傝濡奸柟铏姉婢规洘绺介崨濠勫幗濠碘槅鍨辩�笛囨偟椤忓棴鎷风憴鍕闁活剙銈搁弫鎾绘嚍閵夘喖鏅遍梺鍝ュУ閻╊垶銆佸鎰佹▌闂佺硶鏂傞崕鎻掝嚗閸曨剛绡�閹兼番鍨圭紓鎾绘⒒娴ｈ櫣銆婇柛鎾寸箞閺佸姊虹粙璺ㄧ闁挎洦浜滈～蹇曠磼濡顎撻梺鍛婄☉閿曘倝寮抽崼銉︹拺闁革富鍙庨悞鐐繆椤愶絿绠撻柣锝囧厴婵℃悂鍩℃繝鍐╂珦缂傚倷鐒︾粙鎴︻敄閸涙潙鐤鹃柣妯肩帛閳锋帡鏌涚仦鎹愬闁跨喕濮ら幃鍌氱暦閹邦剛鏆嬮柟鍐诧工缂嶅﹤鐣烽崼鏇ㄦ晢濠㈣泛顑嗗▍鏃堟⒒娴ｅ憡鎯堢紒瀣╃窔瀹曘垽鎳栭埡鍐箵濠德板�曢幊蹇涙偂濞戞熬鎷烽獮鍨姎濡ょ姵鎮傞悰顔嘉旈崨顔惧幗闂佺懓鐏濈�氼厾锟芥艾缍婂濠氬磼濞嗘垵濡介柣搴ｇ懗閸涱喖搴婇梺绋跨灱閸婃盯宕堕澶嬫櫖濠电姴锕ら幊宥囩箔婢舵劖鈷戦柛婵嗗閳诲鏌涘Ο鍦煓闁诡噯绻濇俊鐑藉煛閸屾粌骞楅梻浣告惈濞层劑宕戝☉銏℃櫢闁芥ê顦扮拹锟犳煥閻旇袚闁绘棏鍓熼獮蹇涙晸閿燂拷?
		int nameLen = CheckName.nameLen();
		int length=0;
		try {
			length=(new String(name.getBytes( "gb2312"), "ISO-8859-1")).length();
		} catch (UnsupportedEncodingException e) {
			// TODO Auto-generated catch block
			sendError(SCreateRoleError.CREATE_OVERLEN);
			logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屾盯骞囬锟界痪褔鏌ｉ妶鍛伃婵﹦绮幏鍛村川婵犲倹娈橀梻浣告贡椤牆螞濠靛棛鏆﹂柕濞炬櫓閺佸秵绻濇繝鍌氭殭闁兼惌鍨跺濠氬磼濮橆剨鎷锋搴ｇ焼濞达綁娼婚懓鍧楁⒑椤掞拷缁夌敻骞嗛悙鍝勭婵烇綆鍓欐俊鑲╃磼閹邦収娈曞ǎ鍥э躬婵″爼宕ㄩ鍏碱仩缂備胶鍋撻崕鎶解�﹂悜钘夎摕闁哄洢鍨归柋鍥ㄧ節闂堟稒鎼愭い锔规櫊濮婃椽宕妷銉愶綁鏌涢弮锟介悷鈺侇嚕婵犳碍鏅搁柣妯垮皺閿涙粌鈹戦悙鏉戠仴鐎规洦鍓熷畷婵堜沪鐟欙絾鏂�闂佺粯鍔栬ぐ鍐箖閹达附鐓熸俊銈勮兌閻帗顨ラ悙宸█妤犵偞鐗楅幏鍛存偡妫颁胶缍嶉梻鍌欑婢瑰﹪宕戦崨顖涘床闁告洦鍨遍崑锟犳煏婵炵偓娅嗛柍閿嬪灴閺岀喖鎳栭埡浣风捕婵犵锟界偨鍋㈤柡灞剧♁缁绘繈宕掑鍛呫劍绻濈喊澶岀？闁轰浇顕ч悾鐑芥偄绾拌鲸鏅┑顔筋焾娴滎剙顭囨径鎰拻濞达絼璀﹂悞楣冩煛閸偄澧撮柕鍡楀暣瀹曞崬鈻庡▎鎰伓濠殿喗锕╅崢鎯虹�涙ɑ鍙忓┑鐘插暞閵囨繄锟借娲﹂崑濠冧繆閻戣棄唯闁靛牆妫楅悡鏇㈡⒒閸屾瑨鍏屾い顓炵墢閼哄崬煤椤忓嫮锛欏┑掳鍊曢幊搴ｇ不閺屻儲鐓忛煫鍥ㄦ礀琚ュ┑鈩冨絻閻楁捇寮婚弴锛勭杸闁哄洨鍊妷锔轰簻闁规儳鐡ㄩ妵婵囨叏婵犲懏顏犵紒杈ㄥ笒铻ｉ柛婵嗗濞兼梹绻濋悽闈涗粶闁告艾顑夐幃鐤樄鐎规洜澧楃换婵嬪磼閵堝懏鍊梻浣规偠閸庮噣寮插┑瀣櫖婵犻潧娲ㄧ粻楣冨级閸繂鈷旈柛鎺撴緲椤潡鎮风敮顔间紣闁告浜幉鎼佹偋閸繄鐟查梺缁樻尰閻熲晠寮诲☉妯锋婵鐗嗘导鎰版⒑瀹曞洨甯涙繛鑼枛瀵寮撮姀鐘茶�块梺鍝勬川婵厼危椤旂⒈娓婚柕鍫濋娴滄繄绱掔拠鑼ⅵ妤犵偛锕ら…銊╁醇濠靛棛锟筋厼顪冮妶鍡楀Ё缂傚秴妫欑粋鎺曨樄婵﹤顭峰畷鎺戔枎閹邦喓鍋樻繝鐢靛仜椤︽澘煤閻旈鏆﹂柟鎯板Г閺呮繈鏌涚仦鐐殤妞ゆ柨妫濆铏规崉閵娿儲鐝㈤梺鐟板殩閹凤拷");
			return;
		} 
		
		
		if(length > nameLen){
			sendError(SCreateRoleError.CREATE_OVERLEN);
			logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屾盯骞囬锟界痪褔鏌ｉ妶鍛伃婵﹦绮幏鍛村川婵犲倹娈橀梻浣告贡椤牆螞濠靛棛鏆﹂柕濞炬櫓閺佸秵绻濇繝鍌氭殭闁兼惌鍨跺濠氬磼濮橆剨鎷锋搴ｇ焼濞达綁娼婚懓鍧楁⒑椤掞拷缁夌敻骞嗛悙鍝勭婵烇綆鍓欐俊鑲╃磼閹邦収娈曞ǎ鍥э躬婵″爼宕ㄩ鍏碱仩缂備胶鍋撻崕鎶解�﹂悜钘夎摕闁哄洢鍨归柋鍥ㄧ節闂堟稒鎼愭い锔规櫊濮婃椽宕妷銉愶綁鏌涢弮锟介悷鈺侇嚕婵犳碍鏅搁柣妯垮皺閿涙粌鈹戦悙鏉戠仴鐎规洦鍓熷畷婵堜沪鐟欙絾鏂�闂佺粯鍔栬ぐ鍐箖閹达附鐓熸俊銈勮兌閻帗顨ラ悙宸█妤犵偞鐗楅幏鍛存偡妫颁胶缍嶉梻鍌欑婢瑰﹪宕戦崨顖涘床闁告洦鍨遍崑锟犳煏婵炵偓娅嗛柍閿嬪灴閺岀喖鎳栭埡浣风捕婵犵锟界偨鍋㈤柡灞剧♁缁绘繈宕掑鍛呫劍绻濈喊澶岀？闁轰浇顕ч悾鐑芥偄绾拌鲸鏅┑顔筋焾娴滎剙顭囨径鎰拻濞达絼璀﹂悞楣冩煛閸偄澧撮柕鍡楀暣瀹曞崬鈻庡▎鎰伓濠殿喗锕╅崢鎯虹�涙ɑ鍙忓┑鐘插暞閵囨繄锟借娲﹂崑濠冧繆閻戣棄唯闁靛牆妫楅悡鏇㈡⒒閸屾瑨鍏屾い顓炵墢閼哄崬煤椤忓嫮锛欏┑掳鍊曢幊搴ｇ不閺屻儲鐓忛煫鍥ㄦ礀琚ュ┑鈩冨絻閻楁捇寮婚弴锛勭杸闁哄洨鍊妷锔轰簻闁规儳鐡ㄩ妵婵囨叏婵犲懏顏犵紒杈ㄥ笒铻ｉ柛婵嗗濞兼梹绻濋悽闈涗粶闁告艾顑夐幃鐤樄鐎规洜澧楃换婵嬪磼閵堝懏鍊梻浣规偠閸庮噣寮插┑瀣櫖婵犻潧娲ㄧ粻楣冨级閸繂鈷旈柛鎺撴緲椤潡鎮风敮顔间紣闁告浜幉鎼佹偋閸繄鐟查梺缁樻尰閻熲晠寮诲☉妯锋婵鐗嗘导鎰版⒑瀹曞洨甯涙繛鑼枛瀵寮撮姀鐘茶�块梺鍝勬川婵厼危椤旂⒈娓婚柕鍫濋娴滄繄绱掔拠鑼ⅵ妤犵偛锕ら…銊╁醇濠靛棛锟筋厼顪冮妶鍡楀Ё缂傚秴妫欑粋鎺曨樄婵﹤顭峰畷鎺戔枎閹邦喓鍋樻繝鐢靛仜椤︽澘煤閻旈鏆﹂柟鎯板Г閺呮繈鏌涚仦鐐殤妞ゆ柨妫濆铏规崉閵娿儲鐝㈤梺鐟板殩閹凤拷");
			return;
		}
		else if (length < CCreateRole.NAMELEN_MIN){
			sendError(SCreateRoleError.CREATE_SHORTLEN);
			logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屾盯骞囬锟界痪褔鏌ｉ妶鍛伃婵﹦绮幏鍛村川婵犲倹娈橀梻浣告贡椤牆螞濠靛棛鏆﹂柕濞炬櫓閺佸秵绻濇繝鍌氭殭闁兼惌鍨跺濠氬磼濮橆剨鎷锋搴ｇ焼濞达綁娼婚懓鍧楁⒑椤掞拷缁夌敻骞嗛悙鍝勭婵烇綆鍓欐俊鑲╃磼閹邦収娈曞ǎ鍥э躬婵″爼宕ㄩ鍏碱仩缂備胶鍋撻崕鎶解�﹂悜钘夎摕闁哄洢鍨归柋鍥ㄧ節闂堟稒鎼愭い锔规櫊濮婃椽宕妷銉愶綁鏌涢弮锟介悷鈺侇嚕婵犳碍鏅搁柣妯垮皺閿涙粌鈹戦悙鏉戠仴鐎规洦鍓熷畷婵堜沪鐟欙絾鏂�闂佺粯鍔栬ぐ鍐箖閹达附鐓熸俊銈勮兌閻帗顨ラ悙宸█妤犵偞鐗楅幏鍛存偡妫颁胶缍嶉梻鍌欑婢瑰﹪宕戦崨顖涘床闁告洦鍨遍崑锟犳煏婵炵偓娅嗛柍閿嬪灴閺岀喖鎳栭埡浣风捕婵犵锟界偨鍋㈤柡灞剧♁缁绘繈宕掑鍛呫劍绻濈喊澶岀？闁轰浇顕ч悾鐑芥偄绾拌鲸鏅┑顔筋焾娴滎剙顭囨径鎰拻濞达絼璀﹂悞楣冩煛閸偄澧撮柕鍡楀暣瀹曞崬鈻庡▎鎰伓濠殿喗锕╅崢鎯虹�涙ɑ鍙忓┑鐘插暞閵囨繄锟借娲﹂崑濠冧繆閻戣棄唯闁靛牆妫楅悡鏇㈡⒒閸屾瑨鍏屾い顓炵墢閼哄崬煤椤忓嫮锛欏┑掳鍊曢幊搴ｇ不閺屻儲鐓忛煫鍥ㄦ礀琚ュ┑鈩冨絻閻楁捇寮婚弴锛勭杸闁哄洨鍊妷锔轰簻闁规儳鐡ㄩ妵婵囨叏婵犲懏顏犵紒杈ㄥ笒铻ｉ柛婵嗗濞兼梹绻濋悽闈涗粶闁告艾顑夐幃鐤樄鐎规洜澧楃换婵嬪磼閵堝懏鍊梻浣规偠閸庮噣寮插┑瀣櫖婵犻潧娲ㄧ粻楣冨级閸繂鈷旈柛鎺撴緲椤潡鎮风敮顔间紣闁告浜幉鎼佹偋閸繄鐟查梺缁樻尰閻熲晠寮诲☉妯锋婵鐗嗘导鎰版⒑瀹曞洨甯涙繛鑼枛瀵寮撮姀鐘茶�块梺鍝勬川婵厼危椤旂⒈娓婚柕鍫濋娴滄繄绱掔拠鑼ⅵ妤犵偛锕ら…銊╁醇濠靛棛锟筋厼顪冮妶鍡楀Ё缂傚秴妫欑粋鎺曨樄婵﹤顭峰畷鎺戔枎閹邦喓鍋樻繝鐢靛仜椤︽澘煤閻旈鏆﹂柟鎯板Г閺呮繈鏌涚仦鐐殤妞ゆ柨妫濆铏规崉閵娿儲鐝㈤梺鐟板殩閹凤拷");
			return;
		}
		
		int resultCode = fire.pb.util.CheckName.checkValid(name);
		if(resultCode == CheckName.WORD_ILLEGALITY){
			sendError(SCreateRoleError.CREATE_INVALID);
			logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屾盯骞囬姘卞闂佹眹鍨荤划顖涚┍婵犲洦鍊锋い蹇撳閹风兘寮介鐔蜂罕濠德板�曢崯浼存儗濞嗘挻鐓欓柣鎰靛墰濠�浠嬫煥閻旂粯顥夐柟铏锝嗙節濮橆儵銊╂煥閺冿拷閸庡啿顕ｉ搹顐ょ瘈闁汇垽娼ч埢鍫熺箾娴ｅ啿鍚樺☉銏╂晣闁绘劕绋勭紞浣哥暦椤愶箑唯鐟滃繘鏁嶅鍫熲拺閻犳亽鍔岄弸宥囩磼椤旂晫鎳冮柣锝囧厴楠炴帡骞嬮弮锟介～宥呪攽鎺抽崐鏇㈠疮娴煎瓨鍋╅柣鎰靛厸缁诲棝鏌ｉ幇鍏哥盎闁跨喕濮ら悧鐘诲箖瑜嶈灃闁告劑鍔岄悘濠囨煙閼圭増褰х紒鏌ョ畺瀵啿顭ㄩ崟顓狀啎闂佺懓顕崑鐐烘儍閹寸姷妫柛鎾楀嫭鐝梺璺ㄥ枙濡嫮绮诲澶婄？闂侇剙绉寸粻鐘荤叓閸ャ劎鈽夌紒鎰殕閹便劌螖鐎ｎ偄顏堕梻浣告惈婢跺洭鏁撻挊澶岋紞闁哄棗妫濋弻銊╂偄閸撲胶鐓撻悗瑙勬磻閸楀啿顕ｆ禒瀣垫晣闁绘灏欓妶锕傛⒒娴ｈ櫣銆婇柛鎾寸箞瀹曟瑩鎮烽幏鏃撶稻缁绘繂顫濋娑欏闂備礁鎲＄换鍌滐拷姘煎弮钘熼柍銉ㄧМ閻熼偊鐓ラ幖绮癸拷鏂ユ嫬闂備浇妗ㄩ悞锕傚箲閸ヮ剙绠犻柣鎰惈鍞銈嗘煥閸氬鈻嶅☉銏♀拻濞撴熬鎷锋繛鑹板吹缁辩偤宕卞☉妯虹�梺鍓插亝濞叉粌鐣垫笟锟介悡顐﹀炊閵娧�妾ㄩ梺鍝勬噺閹倿寮婚妸鈺傚亞闁稿本绋戦锟�2-7婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊鐒﹂崕鎾绘⒑閹肩偛濡奸柛濠傛健瀵鈽夐姀鈺傛櫇闂佹寧绻傚Λ娑⑺囬妷褏纾藉ù锝呮惈瀛濈紓鍌氱Т閿曨亜顕ｇ拠宸悑濠㈣泛锕ｇ槐鍫曟⒑閸涘﹥澶勯柛瀣崌楠炲繘鏌ㄧ�ｎ剛鐦堝┑顔角滈崕濠氬箯閻戣棄宸濋柡澶嬪灩閻撴垶绻濋姀锝嗙【闁活剙銈搁、娆撳即閵忊檧鎷虹紓渚囧灡濞叉牗鏅堕弻銉﹀珔闂侇剙绉甸崐鍫曠叓閸パ囶�楃�规挸妫濋弻锛勪沪閸撗勫垱婵犵锟藉磭鍩ｇ�规洏鍔戦、娑橆潩閿濆懎绶ч梻鍌氬�风粈渚�骞栭锔藉剶濠靛倻顭堢粣妤呮煙闁箑澧婚柣鎺嶇矙閻擃偊宕堕妸褉妲堢紓渚婃嫹闁割偁鍨洪崰鎰扮叓閸ャ劎鈽夋慨瑙勭叀閺岋絽螣閼姐們鍋為梺鐚存嫹濞寸姴顑嗛悡鍐煢濡警妲规い銉︾矊闇夋繝濠傚缁犵偤鏌＄仦璇插鐎殿喗娼欒灒闁惧繘锟芥稓绀勯梺璇插椤旀牠宕板☉銏╂晪鐟滄棃宕洪妷锕�绶為柟閭﹀墻濞煎﹪姊虹紒妯曟垿鎮ч幘璇茬闁硅揪绠戦拑鐔猴拷骞垮劚椤︻垱瀵奸悩缁樼厱闁哄洠锟藉磭鍘梺杞扮劍閸庢娊鈥旈崘顔嘉ч柛鎰╁妼婵洟姊虹紒姗嗘畷缂侇喖楠稿嵄闁圭増婢樼粻濠氭倵闂堟稒鎲搁柟铏箖缁绘繈鎮介棃娴躲垽鏌涢悤浣镐喊妞ゃ垺妫冨畷濂稿即閻斿弶瀚藉┑鐐舵彧缂嶏拷濠殿喓鍊楀☉鐢稿醇閺囩喓鍘遍梺鎸庣箓缁绘帡鎮鹃崹顐闁绘劘灏欑粻濠氭煛娴ｈ宕岄柡浣规崌閺佹捇鏁撻敓锟�4-14婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊鐒﹂崕鎾绘⒑閹肩偛濡奸柛濠傛健瀵鈽夐姀鈺傛櫇闂佹寧绻傚Λ娑⑺囬妷褏纾藉ù锝呮惈瀛濈紓鍌氱Т閿曨亜顕ｇ拠宸悑濠㈣泛锕ｇ槐鍫曟⒑閸涘﹥澶勯柛瀣崌楠炲繘鏌ㄧ�ｎ剛鐦堝┑顔角滈崕濠氬箯閻戣棄宸濋柡澶嬪灱閹芥洟姊洪棃娑辨濠碘�虫喘瀹曪綁宕卞缁樻杸闂佺粯顭囩划顖氣槈瑜庢穱濠囶敃閿濆洦鍣紓渚囧枛閿曨亪銆侀弴銏℃櫆闁伙絽鑻獮宥夋煟鎼达絾鍤�閻庢凹鍘奸…鍨熸担鏇悼缁辨帒螣闂�鎰泿婵＄偑鍊栭崝褏寰婄捄銊т笉闁绘劖鐣禍婊堟煏韫囧﹥顫夐柤鏉挎健閺岀喖顢欓悾灞惧櫚闂佺硶鏅换婵嗙暦閹烘埈鐓ラ柨鐔烘櫕閼鸿鲸绂掔�ｎ偀鎷绘繛杈剧悼閻℃棃宕靛▎鎾村�垫繛鎴炲笚濞呭﹥銇勯姀锛勬噰鐎殿喕绮欓、姗�鎮欓悜姗堢船濠碉紕鍋戦崐鏍洪埡鍛濡炲鍑介幏椋庢喆閸曨剛顦ㄧ紓渚囧枟閹瑰洭鐛崘顔碱潊闁宠棄妫欐晥闂佺懓鍚嬮悾顏堝垂濞差亶鏁婇柡鍥ュ灪閳锋帒霉閿濆浂鐒炬い銉ョ箻閺屾稓锟斤綆浜濋崳褰掓偂閵堝鐓涚�广儱鍟俊濂告煕閺冿拷濡啫顫忔繝姘＜婵炲棙鍨归悰銏犫攽閻愭澘灏冮柛銉ｅ妽濞呮牠妫呴銏″缂佸鍨规竟鏇㈠礂閼测晝鐦堟繝鐢靛Т閸婂綊宕抽崷顓犵＜闁绘ê鐏氶弳顒佹叏婵犲偆鐓肩�规洘甯掗～婵嬵敆婵犲啫顏堕梺褰掓？缁�浣哄閻熼偊娓婚悗锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忓爼鏌ｆ惔銈庢綈婵炴彃绻樺畷鏇㈠箮閼恒儲娅㈤梺鍝勫�堕崐妤冪矓闂堟耽鐟邦煥閸愵亜鐓熼梺璇″枔閸ㄨ棄鐣烽崡鐐嶇喓鎷犻幓鎺嶇礋濠电姴鐥夐弶鍖℃嫹閺囥埄鏁勯柛鈩冪懕閹峰嘲顫濇潏銊ユ畬闁剧粯鐗犻弻锝咁潨閿熻棄顭囪缁傛帒顭ㄩ崼鐔哄弳闂佸搫娲㈤崝瀣焽椤栨粣鎷峰▓鍨珮闁稿锕悰顔嘉熼懖鈺冿紲濠碘槅鍨崇划顖烆敂閻斿吋鈷掑ù锝堝Г绾爼鏌涢敐蹇曠暤妤犵偛绻橀弫鎾绘晸閿燂拷?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝呂熷▎鎯ф缂備胶濮撮悘姘跺Φ閸曨喚鐤�闁圭偓鎯屽Λ銈囩磽娓氬﹥瀚规繝鐢靛Т濞诧箓鎮￠妷鈺傜厽闁哄啫娴傞崵娆戞偖濮樿埖鈷戦梻鍫熺♁閹兼劙鎮楀顐㈠祮闁靛棔绶氬鎾閻欙拷濞煎﹪姊洪崘鍙夋儓闁稿﹥鍔欓弫鍐磼濞戞帗瀚奸柣搴ゎ潐濞叉牕煤閵娧勬殰婵炴垯鍨洪悡娆撴煟閻斿搫顣奸柟鍏煎姍閺岋綁鏁愭径瀣殸缂備浇娅ｉ弲顐ゅ垝濞嗘挸鍨傛い鏃囧亹閵堫噣姊婚崒娆掑厡缂侇噮鍨跺濠氬Ω閳轰礁鎯為梺鍝勭▉閸樿偐绮婚鐐寸厽闁硅揪绲鹃ˉ澶愭煕閵娿儱锟藉綊濡甸崟顖氱疀闁宠桨绶ら幏宄拔旈崪浣规櫓闂佸搫娲㈤崹娲煕閹达附鐓熼柣鏃傚帶娴滀即鏌涢妶鍥ф灈闁哄本绋撻敓鏂ょ秵閸撴瑩寮稿☉娆樻闁绘劘顕滈煬顒侇殽閻愬弶鍠樻い銏★耿閹晛鈻撻崹顔芥珬闂傚倸鍊风粈浣圭珶婵犲洤纾婚柛鈩冪☉缁愭鏌熼弶鍨絼濠㈣埖鍔曢柋鍥煏婢舵稑顩柛妯绘倐閺岋綀绠涢弴鐐板摋濡炪倖娉﹂崶銊︽闂佸吋浜介崕宕囩不閻愭惌娈介柣鎰嚋闊剟鏌℃担瑙勫磳闁诡喒鏅犲畷锝夊磼閸愩劍澶勯柣鎾存礃缁绘盯骞嬪┑鍡氬煘闂佸搫顑冮崐婵嬪蓟閵娾晜鍋勭紓浣癸供濡嫭绻濋埛锟介崨顔界彧濠碘�冲级閸旀瑩鐛Ο纭锋嫹濞戞顏堫敁閹剧粯鈷戦柛娑橈攻鐏忔壆鎲搁弶鍨殻鐎规洘绮撳璺衡枎閻愵剙鐦滈梻渚�娼ч悧鍡欐崲閹烘鍋╅柛顭戝亞缁犳儳霉閿濆懎鏆辨繛鏉戝�垮顐わ拷锝庡枟閻撱儲绻濋棃娑欙紞婵☆垰鐗撻弻鈩冩媴閸涘妫﹂梺鍝勬湰閻╊垰顕ｉ幘顔嘉╅柕澶堝�楅弫鏍ㄤ繆閻愵亜锟窖咃拷闈涚焸瀹曪綁宕橀鑲╃暫閻庣懓瀚伴崑濠囨偂閵夆晜鐓曢柟鏉垮悁缁ㄨ姤銇勯弮锟界敮鎺曠亙闂佺粯锕㈠褎绂掑鍕╀簻闁挎棁妫勯埢鏇炩攽閿涘嫭鏆鐐叉喘瀵墎鎹勯…鎴濇暯闂傚倷绀佸﹢閬嶆惞鎼淬劌鍨傞弶鍫氭櫔閹峰嘲顫濋鎯т划濠殿喖锕︾划顖炲箯閸涘瓨鎯為柣鐔稿椤愬ジ姊绘担鐑樺殌闁硅姤绮撻垾锕傚醇閵夛妇鐣抽梻鍌欒兌缁垶宕归悡骞盯宕熼姘鳖槱闂佺粯顭囩划顖炴偂閺囥垺鐓欓柤鍓插墮婵¤姤绻涢崨顓炴殶缂佽鲸甯為幏鐘诲矗婢舵ɑ锛侀梻渚�娼уú銈囷拷姘嵆閻涱噣宕堕锟介悡娑樏归敐鍫熴�冮柟顕嗙稻娣囧﹪鎮欓鍕舵嫹閺囩伝鐟邦潩鐠哄搫鍋嶆繛瀵稿Т椤戝啴鏁撻挊澶婃殻濠碉紕鍏橀崺锟犲磼濮樼偓瀚归柣鎴ｅГ閻撴洘绻涢崱妤佺婵☆垰鐗婃穱濠囶敃椤掑倻鏆ら梺璇″枟椤ㄥ牓骞夐幘顔肩妞ゆ帒鍋嗗Σ顒勬⒒娓氾拷濞佳囨偋閸℃稑绠熼柍鈺佸暟閳瑰秴鈹戦悩鍙夊闁稿﹤顭烽弻锕�螣閻氬绀嗛梺闈浥堥弲婊堟偂韫囨搩鐔嗛悹鍥ｏ拷宕囦哗闂佸摜鍠愭竟鍡欏垝閺冨牜鏁婇悘蹇旂墬閺傦拷闂備胶绮敋闁诲繑宀稿鎶藉煛娴ｅ弶鏂�濡炪倖妫侀褍鐣甸崱娆欐嫹鐟欏嫭绀夋い顐㈩槺缂傛捇鎮惧畝锟介惌娆撴煙缁嬪灝顒㈢悮锝夋⒒閸屾瑧顦﹂柟纰卞亞缁瑦绗熼敓钘夌暦閵忋倖鍤冮柍鍝勫暟閻掑吋绻濋姀锝呯厫闁告梹鐗犻幃鈥斥槈濮樼偓瀚规鐐茬仢閸旀岸鏌涢悤浣镐簼濞ｅ洤锕ョ粋鎺旓拷锝庡亞閸樺崬鈹戦悙鍙夘棞缂佺粯甯炵划濠氭嚑椤掑倻锛滅紓鍌欑劍椤洨绮婚弽顐ょ＜缂備焦顭囩粻鐐碉拷瑙勬礃鐢帡锝炲┑瀣拻閻庨潧鎽滈敍娑氱磽閸屾艾锟芥悂宕愰悜鑺ュ殑闁肩鐏氶崣蹇涙煟閵忋埄鐒剧痪鎯ф健閺岀喖骞嗛棃鑸靛浮閺佹捇寮妶鍜佹喘闂佸湱鎳撶�氱増淇婇幖浣规櫇闁跨喓鏅竟鏇㈩敍濞戞氨顔曢梺鍦亾濞兼瑩宕甸鍕厱闁靛鍊曞畵鍡欙拷瑙勬礃缁秴顭囪箛娑樼厸闁告劦浜风槐鍐测攽閻愬瓨灏伴柤褰掔畺閺佸啴濡疯閹峰嘲顫濋鍌溞ㄥ┑顔硷龚濞咃綁骞戦崟顖毼╅柕澶涘閿熷�熸缁辨挻绗熼崶褎鐏嶉梺鑽ゅ枂閸庣敻鏁愰悙鍓佺杸闁瑰彞鐒﹀浠嬨�侀弮鍫濆窛妞ゆ挶鍔嶇�氱懓鈹戦悩宕囶暡闁绘挸鍟村鍫曟倷閺夋埈妫嗛柣鐘冲姉婢ф鎹㈠☉銏犵闁绘挸楠搁幗闈涒攽椤旂》鏀绘俊鐐舵閻ｇ兘濡搁敂鍓х槇婵炶揪缍�濞咃絿绮婚幒妤佲拻濞达綀顫夐崑鐘绘煕閺傝法校缂佺粯绋掔换婵嬪炊瑜忛悾鐑樹繆閵堝繒鍒伴柛鐕佸灦瀵煡骞栨担鍦弳闂佺粯娲栭崐鍦拷姘炬嫹?");
			return;	
		}else if(resultCode == CheckName.SPECIAL_WORD_TOO_MANY){
			sendError(SCreateRoleError.CREATE_INVALID);
			logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴楠炴﹢鎳犻澶嬓滈梻浣规偠閸斿秶鎹㈤崘顔嘉﹂柛鏇ㄥ灠閸愶拷濡炪倖鍔﹀锟介柡澶樺弮濮婅櫣鎹勯妸銉︾亞濠碘槅鍋勭�氭澘鐣烽鐑嗘晬婵鍘у▓顐︽⒑閸涘﹥澶勯柛銊﹀缁鈽夐姀锛勫幈闂佽宕樼亸顏堝礂瀹�鍕厓缂佹鎼敓鑺ユ礋閸╃偤骞嬮敂钘変汗濡炪倖妫侀崑鎰閸ヮ剚鈷戠紒顖涙礃濞呭棝鏌ｅΔ鍐ㄐ㈤柣锝呭槻閳规垹锟斤綆浜滈崬銊ヮ渻閵堝棙灏甸柛瀣枛閺佸秴鈽夐姀鈾�鎷洪梺鍛婂姇瀵爼骞嗛崼銉︾厵闁告劘灏欑粻濠氭煙椤曞棛绡�鐎规洘锕㈤、娆撴偩鐏炶棄绠炲┑鐘垫暩婵烇拷婵炰匠鍏炬稑螖閸滀焦鏅滈梺鍐叉惈閹冲繘鎮″☉銏″�甸柨婵嗘噹椤ｆ娊鏌ｉ敐鍥ㄦ毈闁哄备锟藉磭鏆嗛柨鐔剁矙瀹曠増鎯旈妸锕�浠奸梺璺ㄥ枔婵鐥閺岀喓绮欓崹顔惧絹闂佸啿鎼幊蹇涘煕閹达附鍊甸柛锔诲幖鏍″銈冨劚椤︿即濡甸崟顖涙櫆閻犲洩灏欐禒鎼佹⒑缁洘鏉洪柛銊︽そ楠炲棝寮崼婵堝姼闂侀潧锛忛崘鈺冧邯闂備礁婀遍鑼崲濠靛洣绻嗛柛顐ｆ礀楠炪垺淇婇姘倯妞ゎ偅绻冪换婵嬫偨闂堟刀銉︺亜閿濆骸鏋ゆ俊鍙夊姍瀵挳濮�閻樼绱遍梻浣侯攰閹活亞绮婚幋鐘差棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺厱闁靛鍎遍敓钘夋健瀵鎮㈤悡搴ｇ暰闂佸搫顦弲婵嬪箻缂佹鍘辨繝鐢靛Т閸婂綊宕戦妷鈺傜厸閻忕偠顕ф慨鍌滐拷娈垮枟閹告娊銆侀弮鍫濆窛妞ゆ挆鍌滃濠电姷顣槐鏇㈠磻閹达箑纾归柕鍫濐槸閸屻劑鏌ｉ幘宕囩槏婵炲樊浜濋弲婊堟煟閹伴潧澧幖鏉戯工閳规垿鎮╃紒妯婚敪濠碘槅鍋掗崢濂糕�﹂崶顒�鐓涢柛灞久肩花濠氭⒑閸︻厼鍔嬮柛銊ф暬閺佹捇鎳為妷锕�锟芥劙鏌℃担瑙勫磳闁诡喖澧芥禒锕傚箣閹烘搩娼熼梻鍌欐祰椤曟牠宕伴弽顓炲簥闁哄被鍎敓鏂ょ畵婵℃悂鍩℃担渚Ч婵＄偑鍊栭幐鐐叏閻戣棄鍌ㄩ柟鎵閳锋垿鏌涘▎宥呭姢濞戞捁灏欑槐鎾愁吋閸曨厾鐛㈤悗娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭花浠嬫⒒娴ｄ警鐒鹃柡鍫墰缁瑩骞嬮敂缁樻櫆闂佽法鍣﹂幏锟�");
			return;
		}else if(resultCode == CheckName.NONE_CHARACTER){
			sendError(SCreateRoleError.CREATE_INVALID);
			logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩胶锟藉箍鍎遍ˇ顖滅矆鐎ｎ偁浜滈柟鎹愭硾鍟搁梺鍛婏供閸ㄨ泛顫忕紒妯诲闁告稑锕ラ崕鎾剁磽娴ｅ壊鍎庣紒鑸靛哺楠炲啫螣鐞涒剝顫嶅┑鈽嗗灦閺�閬嶏綖瀹ュ鈷戦梻鍫熺〒缁犲啿鈹戦鎯у幋閽樻繈鏌℃径瀣靛劌婵炴挸顭烽弻鏇㈠醇濠靛浂妫ゆ繝鈷�灞藉闁逛究鍔岃灒缂佸鐏濋～鍥⒑鐠団�虫灍闁稿骸纾崣鍛渻閵堝懐绠伴柟鍐差樀楠炲繐煤椤忓應鎷洪梺鍛婄☉閿曪妇绮婚幘缁樺�垫慨妯煎帶楠炴绱掗纭疯含妞ゃ垺娲熸俊鍫曞炊閳哄搴婇梻浣告惈椤︻垶鎮ч崟顖氱鐎广儱娲ㄩ惌鍡涙倵閿濆骸鏋熼柣鎾寸懄閵囧嫰寮崹顔藉�梺绋款儍閸庣敻寮婚埄鍐╁閻熸瑥瀚棄宥囩磽娴ｇ锟藉湱鏁悙鐑樻櫢闁哄倶鍊楃粔鐢告煕鐎ｈ埖瀚归梻浣哥秺閺�鍗烆渻閽樺娼栨繛宸簻瀹告繂鈹戦悩鎻掝仱婵℃彃鐗撳娲箰鎼淬垻鈹涚紓浣哄У閹瑰洤鐣峰ú顏呮櫆闁伙絽鐬奸幊婵嬫⒑鐠恒劌鏋嶇紒顔界懃椤曪絾绻濆顓熸珳婵犮垼娉涢鍡椻枍濠婂牊鐓欓柣鎾虫捣閹界姷绱掔拠鑼ⅵ鐎规洘鍨佃灃闁告侗鍠掗幏娲煛婢跺苯浠﹀鐟版瀹曟繂顓兼径瀣幍闂佽崵鍠撴晶妤呭窗濡椿娈介柣鎰綑婵牏绱掔紒妯肩疄鐎规洘锕㈡俊姝岊槾闁绘侗鍣ｉ弻锝嗘償閿濆棭浠ч梺褰掝棑閸忔﹢寮婚妸鈺傚亜闁告挷鑳堕悡鎾愁渻閵堝啫鐏柣鐔叉櫊閻涱噣骞掗幊铏⒐閹峰懘妫冮埡鍌氼伓闂佹眹鍨归幉锟犲磻閳╁啰绠鹃柛鈩冾殘缁犵増銇勮箛锝勭敖缂佽鲸甯￠弫鎾寸鐎ｎ亪鍞跺┑鐘绘涧閸燁垶寮敓浠嬫⒒娴ｈ櫣甯涢柛銊╂涧鐓ら柨鏃�鎷濋幏宄邦潩椤掑倻楔闂佸搫鐭夌徊楣冨箚閺冨牆围閹兼番鍨荤粔閿嬬節閻㈤潧浠︾憸鏉垮暟閹广垹螣閾忚娈惧┑鐘绘涧椤戝懐绮婚敐澶嬬叆闁哄啫鍊搁惃鎴︽煙閻戣姤鏁遍柟宄版嚇瀹曟粓宕ｆ径濠勭处闂傚倷娴囧▔鏇㈠窗瀹ュ洤鍨濇繛鍡樻尵瀹撲線鏌涢幇闈涙灈妞ゎ偄鎳橀弻锝呂熼搹閫涚驳濠电偛鐗婄换鍫濐潖濞差亜浼犻柛鏇炵仛鏁堟俊鐐�栭崹鍫曟偡閵夈劎浜遍梻浣哥秺閸嬪﹪宕楀锟藉銊︾鐎ｎ偆鍘藉┑鈽嗗灥濞咃絾绂掑☉銏＄厸闁糕�崇箲濞呭﹪鏌＄仦鍓с�掗柨鐔告灮缂嶅棝宕滃▎鎰浄閺夊牃鏅幏椋庢喆閸曨剛顦梺绋跨昂閸婃骞戦姀鐘斀閻庯綆浜為崐鐐烘偡濠婂啰绠绘い銏＄懇瀹曞崬鈽夊▎灞惧闂佽崵濮垫禍浠嬪礉鐏炶В鏋嶉柟鎵閻撴瑩鏌涢幋娆忥拷鏍拷姘炬嫹?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊鐒﹂崕鎾绘⒑閹肩偛濡奸柛濠傛健瀵鈽夐姀鈺傛櫇闂佹寧绻傚Λ娑⑺囬妷褏纾藉ù锝呮惈瀛濈紓鍌氱Т閿曨亜顕ｇ拠宸悑濠㈣泛锕ｇ槐鍫曟⒑閸涘﹥澶勯柛瀣崌楠炲繘鏌ㄧ�ｎ剛鐦堝┑顔角滈崕濠氬箯閻戣棄宸濋柡澶嬪灩閻撴垶绻濋姀锝嗙【闁活剙銈搁幆渚�宕奸妷锔规嫽闂佺鏈銊︽櫠濞戞ǜ锟芥帒顫濋褎鐤侀悗瑙勬礃濞茬喖鐛崶顒佸亱闁割偁鍨归獮鍫ユ⒑閻熸澘鎮戦柣锝庝邯瀹曠銇愰幒鎾筹拷鍫曟煙缂併垹鏋熼柣鎾寸〒閿熺晫娅㈤幏鐑芥倵閿濆骸澧扮悮锕傛⒒娴ｈ姤銆冮柣鎺炵畵瀹曟繂鈻庤箛鏇熸闂侀潧艌閺呪晠寮鍡欑瘈濠电姴鍊搁弳娆撴憹鎼淬劍鈷掗柛灞捐壘閿熺晫鍏橀幊妤呭醇閺囩偟鐤囬梺瑙勫礃椤曆勬償婵犲洦鐓涢悘鐐额嚙閸旀岸骞栭弶鎴含闁哄矉绱曟禒锔炬嫚閹绘帒顫撻梻浣虹帛閹告挳鏁撻懞銉ュ闁绘柨妫濋幃褰掑传閸曨偄鈻忛梺鍓插亖閸庨亶宕欓悩璇茬闁圭⒈鍘界欢姘辩磼鐠囧弶顥為柕鍥у瀵粙濡歌閻ｇ敻姊洪崨濠呭缂傚秴锕濠氭晸閻樻彃鑰垮銈嗘尵婵兘寮抽妶鍛斀妞ゆ梻銆嬮崝鐔虹磼椤曞懎鐏︽鐐茬箻瀹曘劑顢涘☉妯荤�梻浣告啞濞诧箓宕戦崒鐐蹭紶婵°倕鎳忛埛鎺懨归敐鍛暈闁哥喓鍋ら弻锛勪沪鐠囨彃顫囬梺杞扮閸熸挳銆侀弮鍫濈妞ゆ挾鍠愰鏇熺節閻㈤潧鈻堟繛浣冲浂鏁勯柛娑卞灣娑撳秹鏌ㄥ┑鍡╂Ч闁绘挶鍎甸弻锟犲炊閺堢數鍑归柣搴㈣壘濠�杈╂閹惧瓨濯撮柛婵嗗珔閵夈儮鏀介柣鎴濇处鐎氬綊姊绘担鍛婃儓闁活剙銈稿畷浼村冀椤撶姴绁﹂梺纭呮彧缁犳垹绮诲☉銏♀拻闁割偆鍠撻埦浣广亜閺傚灝顏柡宀嬬稻閹棃鏁愰崱妤佺暚闂備胶顢婇婊呮閺囥垹绠查柕蹇嬪�曠粈鍐┿亜閺傛寧顫嶉柨鏇炲�归悡鏇㈡煛閸ャ儱濡奸柣蹇曞Х缁辨帡鎮╁顔惧悑闂佽鍠栫紞濠囧箹閸︻厽鍠嗛柛鏇ㄥ弿缁辨盯姊绘担鐟邦嚋缂佽鍊胯棟濞寸厧鐡ㄩ崑鍌涚箾閸℃ɑ灏伴柣鎾跺Т閳规垿宕掑顒夋闂佸搫顦板浠嬪蓟濞戙垹围闁糕剝鐟﹂崳浼存⒑閸濆嫯瀚扮紒澶婄埣楠炲骞橀鑲╊槹濡炪倖鍔戦崐鎾舵濠靛洣绻嗛柣鎰典簻閿熻姤鍨垮畷褰掑传閸曨厽娈曠紓浣割儓濞夋洟寮抽敃鍌涚厱婵°倕鍟敓鏂ょ秮閹垽宕妷褎鍤屾俊鐐�栭悧妤呮偡瑜庡鍕晸閿燂拷?");
			return;
		}
		

		if(null != u){
			int roleNum = 0;
			for (Long rid : u.getIdlist()) {
				xbean.Properties prop = xtable.Properties.select(rid);
				if (prop.getDeletetime()==0)
					roleNum++;
			}
			if(roleNum >= PCreateRole.maxCreateRoleNum){
				logger.error("-----------------------闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幗闂侀潧绻堥崺鍕倿閸撗呯＜闁归偊鍙庡▓婊堟煛瀹�锟介崰鏍嵁瀹ュ鏁婄痪鎷岄哺濮ｅ姊绘担渚劸妞ゆ垶鍨归幑銏犫攽鐎ｎ亣鎽曢梺闈浥堥弲娑氱尵瀹ュ鐓曢悘鐐插⒔閻擃垰顭跨憴鍕婵﹥妞藉畷顐﹀礋椤掑锛佺紓鍌欑贰閸犳骞戦崶褜鍤曞┑鐘崇閺呮彃顭跨捄鐚存敾妞ゃ儲绻堝娲捶椤撗呭姼闁诲孩绋堥弲鐘茬暦娴兼潙绠涢柣妤�鐗冮幏铏圭磽閸屾瑧鍔嶆い顓炴川缁顫濋鐘殿啎婵犮垼娉涢鍥洪幘顔界厱闁冲搫鍟禒杈殽閻愬樊鍎旈柡浣稿�块幐濠冨緞婢跺娼栭梻鍌氬�风粈渚�骞夐敓鐘冲仭闁靛鏁￠崶銊ヮ嚤闁哄鍨归悾鍝勨攽閻愬弶顥為柛銊ユ贡婢规洟鎸婃径鍫嫹閹烘埈娼╂い鎺戯攻閺侀箖鏌ｆ惔銏ｅ缂傚秴锕ら～蹇涙惞閻熸澘顕ч梺鍝勬川閸嬫盯鍩涙径濠庢富闁靛牆楠搁獮鏍ㄧ箾鐏炲倸濡块柛鎺撳笧缁辨帒螣缁嬪じ绨奸梻浣告啞閸斿繘寮插┑瀣偍闁汇垹鎲￠悡鐔煎箹鏉堝墽绋婚柡鍡忔櫆閵囧嫰顢橀悙闈涒叺閻庤娲樼划鎾诲蓟閸℃鍚嬮柛鈩冪懃楠炴姊绘担鍛婅础闁稿簺鍊曢～蹇涙偡閹佃櫕鐎洪梺鍝勬川婵澹曟總绋跨骇闁割偅绋戞俊鍏肩箾閹碱厼鏋熸い銊ｅ劦閹瑥顔忛鍙劑姊虹捄銊ユ瀾闁哄宕电槐鐐哄幢濡⒈娲搁柣鐘叉惈閵堣棄煤椤忓秵鏅ｉ梺闈涚箚濡狙囧箯濞差亝鐓熼柣妯哄帠閼割亪鏌涢弬璺ㄧ劯鐎殿喖鎲￠幆鏃堝Ω閿旀儳寮抽梻浣虹帛濮婂宕曢妶鍛瀺闁哄洢鍨洪悡鏇㈡煥濠靛棗鏆欓柛鏃�纰嶉妵鍕敇閻愭潙鏋犲Δ鐘靛仜濞差參骞冭瀹曞ジ濮�閻樿尙顔戦梻鍌氬�烽悞锕傚几婵傜鐤炬繛鎴欏灩閻ゎ喗銇勯弽銊х煂闁活厼妫濋弻娑㈩敃閿濆洩绌块梺鑽ゅ枛閸嬪﹪鎮￠妷鈺傜厱婵犲鎷烽柤鍐茬埣瀹曟繈骞栨担鍏夋嫼闁诲骸婀辨刊顓㈠吹濞嗘挻鈷戦悽顖ｅ枤缁夘噣鏌ｅ☉鍗炴灓闁跨喐鏋荤紞鍡樼閺嶎厼缁╁ù鐘差儐閻撴洟鏌嶉埡浣告殶闁瑰厖绶氶弻娑㈡偐鐠囇嗗惈濠殿喖锕ら…宄扮暦閹烘垟鏋庨柟瀛樼箓椤姊绘担鍛婃儓妞ゆ垵鎳樻俊鍓佺矙濞嗘儳娈ㄩ梺鍦帛瀹歌危閸儲鐓忛煫鍥ㄦ礀鍟搁梺鍝勮嫰閻楀棝鈥旈崘顔嘉ч柛鈩冪懃椤呯磽娓氬洤鏋涙繛鎾棑閸掓帡宕奸悢铏圭槇闂佹悶鍎崝搴ㄥ储闁秵鈷戦梻鍫熶緱濡牓鏌涢悩宕囧闁哄懎鐖奸、娑㈡倷鐎电骞楅梻浣筋潐閸庢娊顢氶銏犵疇闁告洦鍨遍悡蹇涙煕閵夋垵鍠氭导鍐倵濞堝灝鏋涢柨鐔烘櫕閸ｃ儱危閻撳寒娓婚柕鍫濆暙閸旀粎绱掗鑺ュ磳鐎殿喛顕ч埥澶愬閳ュ厖绨婚梺鑽ゅТ閹碱偊骞栭銈囩焾妞ゆ洩鎷烽柟顔筋殘閹叉挳宕熼鍌︾喘闂備焦鎮堕崝瀣垝濞嗘挻鍋樻い鏇嫹妤犵偞甯￠獮濠囨惞椤愶絺鎷归梺鐟板槻閹虫ê鐣烽敐鍡楃窞濠电姴绨肩槐顏堟⒒閸屾艾锟芥悂宕愰悜鑺ュ殑闁告挷绀侀崹婵囥亜閺嶎偄浠﹂柛銈呰嫰铻栭柨婵嗘噹閺嗙偤鏌涚�ｃ劌锟芥繈寮婚弴鐔虹鐟滃秶绮旈悽纰夋嫹濮樻剚娼愰柟渚垮妼铻ｉ柣鎾崇凹婢规洟鏌ｆ惔銏㈠暡闁瑰嚖鎷�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘劙婀侀梺绋跨箰閸氬绱為幋锔界厱闁靛鍎遍敓钘夘煼楠炲骞栨担鐟颁罕闂佸壊鍋呯换鍕偡閺屻儲鈷戠紒瀣儥閸庡繑銇勯敂鐐毈鐎殿喖顭峰鎾晬閸曨厽婢戦梺璇插嚱缂嶅棙绂嶉悜钘夌闁绘垼妫勯崡鎶芥煟濡吋鏆╅柣鎺戙偢閺岋絾鎯旈婊呅ｉ梺绋款儎閻掞妇绮嬪鍜佺叆闁割偆鍠撻崢鐢告⒑閸涘﹦绠撻悗姘煎枦閸婃挳姊洪懡銈呅ｉ柛鏃�甯″畷锟犲箮閽樺鎽曞┑鐐村灟閸ㄦ椽宕戦崱娑欑厱閻忕偛澧介埥澶嬨亜韫囥儲瀚�");
				sendError(SCreateRoleError.CREATE_OVERCOUNT);
				return;
			}
		}
		
		
		
		final PCreateRole proc = new PCreateRole(this, userID, config.initequip);
		proc.submit();	
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 786435;

	public int getType() {
		return 786435;
	}

	public final static int NAMELEN_MAX = 14; // 名字的最大长度
	public final static int NAMELEN_MIN = 4; // 名字的最短长度

	public java.lang.String name; // 名称
	public int school; // 职业
	public int shape; // 角色id
	public java.lang.String code; // 招募码

	public CCreateRole() {
		name = "";
		code = "";
	}

	public CCreateRole(java.lang.String _name_, int _school_, int _shape_, java.lang.String _code_) {
		this.name = _name_;
		this.school = _school_;
		this.shape = _shape_;
		this.code = _code_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(name, "UTF-16LE");
		_os_.marshal(school);
		_os_.marshal(shape);
		_os_.marshal(code, "UTF-16LE");
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		name = _os_.unmarshal_String("UTF-16LE");
		school = _os_.unmarshal_int();
		shape = _os_.unmarshal_int();
		code = _os_.unmarshal_String("UTF-16LE");
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CCreateRole) {
			CCreateRole _o_ = (CCreateRole)_o1_;
			if (!name.equals(_o_.name)) return false;
			if (school != _o_.school) return false;
			if (shape != _o_.shape) return false;
			if (!code.equals(_o_.code)) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += name.hashCode();
		_h_ += school;
		_h_ += shape;
		_h_ += code.hashCode();
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append("T").append(name.length()).append(",");
		_sb_.append(school).append(",");
		_sb_.append(shape).append(",");
		_sb_.append("T").append(code.length()).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

