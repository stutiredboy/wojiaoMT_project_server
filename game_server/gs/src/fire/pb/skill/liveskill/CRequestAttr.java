
package fire.pb.skill.liveskill;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CRequestAttr__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/***
 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姴顭烽弻锛勪沪缁嬪灝鈷夐悗鍨緲鐎氼噣鏁撻弬銈囩У濞存粍绻堥、娆撳川椤撴稒鏂�闂佺粯鍔曞鍫曞煝閺囩伝鐟邦煥閸愵亜鐓熼悗娈垮櫘閸嬪﹤鐣烽崼鏇ㄦ晢濞达絽鎼敮楣冩⒒婵犲骸浜滄繛璇х畱鐓ら柡宓嫭鐦庨梻鍌氬�风粈渚�骞夐敍鍕床闁告劦鍠撻敓钘夊暞缁绘繈宕掗妶鍡欑▉缂傚倸鍊烽悞锕傗�﹂崶顒佸仭鐟滅増甯楅悡鏇㈡煏婢跺鐏ラ柛鐘宠壘椤洭鎳￠妶鍥╋紳闂佺鏈悷褔藝閿斿浜滈柨鏇炲�烽幉鍓э拷娈垮櫘閸嬪棝骞忛悩缁樺殤妞ゆ帊鐒﹂鏇㈡⒒娴ｅ憡鎯堟繛灞傚灲瀹曞綊宕烽鐘辩瑝闂佹寧绻傚Λ娑氬姬閿熶粙姊洪棃娑㈢崪缂佽鲸娲滅划濠氬箻閸撲胶锛濋悗骞垮劚閹锋垵顔忛妷鈺傜厽闁挎繂鎳庡Σ濠氭懚閺嶎厽鐓曟繛鎴濆船楠炴ɑ銇勮熁閸ャ劉鎷洪梺绋跨箺閸嬫劙濡堕幘顔界厸闁告侗鍠氱粻鐐烘煕閳瑰灝鐏辩紒鐘崇☉閳藉鈻庣仦鎯ь伜婵犵數鍋犻幓顏嗙礊閿熻棄鈹戦鍝勶拷婵婃＂婵犮垼鍩栭崝鏍偂閺囥垺鐓熼柡鍐ㄦ处绾墽锟借鎸稿Λ娑㈡晸閸婄噥娼愭繛鍙夊灴瀹曪繝宕樺顔兼婵炲濮撮鎰板极閸ヮ剚鐓熼柟閭﹀灠閻撴劙鏌熼煫顓炲祮婵﹦绮幏鍛存惞閻熸壆顐奸梻浣告惈鐞氼偊宕濋幋婵堟殾闁靛／宥嗗闁挎繂楠搁弸鐔兼煕婵犲倻浠㈤棁澶愭煟濡儤鈻曢柛搴㈠姍閺岋綁骞橀崡鐐插Е闂佸搫鐭夌换婵嗙暦濮楋拷婵℃悂鏁冮敓浠嬎囬埡鍐＜缂備降鍨归獮鏍煟閺嵮佸仮鐎殿喖顭烽崺鍕礃閳轰緡锟芥捇姊洪棃鈺佺槣闁告ê銈搁崺娑氫沪鐟欙絾鏂�濡炪倖姊婚妴瀣绩缂佹ü绻嗛柣鎰煐椤ュ鏌ｉ敐鍥у幋妞ゃ垺娲熼弫鍐晸閻ｅ瞼鐭嗛悗锝庡亖娴滄粓鏌熸导瀛樻锭濞存粍顨婇弻鐔碱敋閸℃瑧袦濠殿喖锕︾划顖炲箯閸涱喚鐟规い鏍ㄧ矊婵ジ姊绘担鐟邦嚋婵炴彃绻樺畷鎰板即閳垛晪鎷烽敃鍌氱倞妞ゆ帊鐒﹀▍銏ゆ⒑缂佹﹫鑰挎繛浣冲懐鐭堥柨鏇炲�归埛鎴︽煕濞戞﹫宸ュ┑顕嗙畵閺岋綁骞樺畷鍥ь暫濡炪値鍘煎ú顓熶繆閹间礁鐓涢柛灞剧矊瀵娊姊绘担铏瑰笡闁哄被鍔嶉弲鑸垫償閵婏箑鍓瑰┑鐐叉閸旓箑鈻撴禒瀣厽闁归偊鍘肩徊濠氭煛閸℃鎳囬柡灞界Ф閹风娀寮婚妷銉ュ強婵°倗濮烽崑鐐烘晝閵忋倗宓侀柡宥庡弾閺佸洭鏌ｉ弴姘卞妽妞ゃ儱鐗婄换婵嬫偨闂堟刀銉╂煛娴ｈ鍊愮�规洘鍨块幃娆撳传閸曨偆锟筋參姊洪崜鎻掍簼婵炴彃绻橀弫鎾绘寠婢跺﹥娈婚悗瑙勬礀瀹曨剟鍩ユ径濞㈢喓鍠婃潏銊愌囨⒒閸屾瑦绁版繛澶嬫礋瀹曟娊鏁冮崒姘鳖唵闂佽法鍣﹂幏锟�?? by changhao
 */
public class CRequestAttr extends __CRequestAttr__ {
	private static Logger logger = Logger.getLogger("ITEM");
	@Override
	protected void process() {
		// protocol handle
		
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		mkdb.Procedure requestattr = new mkdb.Procedure()
		{
			@Override
			protected boolean process()
			{
				xbean.Properties prop = xtable.Properties.select(roleid);
				if (prop == null)
				{
					return false;
				}
				
				fire.pb.attr.SRefreshRoleData refreshdata = new fire.pb.attr.SRefreshRoleData();
				if (attrid.contains(fire.pb.attr.AttrType.ENERGY))
				{
					int energy = prop.getEnergy();
					refreshdata.datas.put( fire.pb.attr.AttrType.ENERGY, (float)energy);					
				}
				logger.error("------------濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓哄┑鐐叉缁绘帗绂掓ィ鍐┾拺缂佸顑欓崕宥夋煕婵犲啰绠炵�殿喖顭峰鎾偄閾忚鍟庨柣鐔哥矊缁夌懓鐣烽鐑嗘晝闁挎棁妫勯敓鍊熸硾閳规垿鎮╅崣澶婎槱濡炪們鍎遍敃銉╁Φ閸曨垰绠涢柍杞拌兌娴犵偓绻濋姀锝嗙【閻庢矮鍗冲濠氭偄閻撳骸绐涙繝鐢靛Т閸燁偊宕径鎰�垫繛鍫濈仢閺嬨倖銇勯鐐靛ⅵ妞ゃ垺锕㈠畷妤呮偂鎼达絿鐛梺璇插嚱缂嶅棝宕滃▎蹇ｅ殨闁惧浚鍋嗙弧锟介梺姹囧灲濞佳囧煝閸喓绠惧ù锝呭暱閸氭ê鈽夊Ο閿嬬�婚梺瑙勫劤缁夋挳藝閻㈢绠栨繛鍡樺煀閹风兘妫冨☉娆愬枑濡炪倖姊瑰ú鐔奉潖濞差亜宸濆┑鐘辫兌缁讳線姊洪幖鐐插闁告濞婂畷娲閵堝懘鍞堕梺闈涱檧婵″洭宕㈤棃娑辨富闁靛牆妫欓ˉ鍡涙煕鐎ｎ偄濮夌紒顔芥閹粌顫滈崱姗嗗晬闂備胶绮崝鏍ㄧ珶閸℃瑧鐜婚柡鍐挎嫹妞ゃ劊鍎甸幃娆撳级閹寸偠鐧佹俊銈囧Х閸嬫盯顢栭崨鏉戠厴闁硅揪绠戠粻娑欍亜閺囩偞顥為悗姘秺瀵爼宕煎☉妯侯瀷缂備讲妲勯幏鐑芥⒒娴ｅ湱婀介柛銊ㄦ椤洩顦崇紒鍌涘笒椤劑宕奸悢鍝勫箺婵＄偑鍊栭幐楣冨磻閻斿憡娅犳繛鎴炴皑绾惧ジ鏌涚仦鐐殤閺佸牆顪冮妶鍐ㄧ仾婵☆偄鍟悾鐑芥偂鎼存ɑ鏂�婵犵數濮撮崯顖炲疮濞差亝鈷掗柛灞剧懅閸斿秹鎮楃粭娑樻噺瀹曟煡鏌涘畝锟介崐娑㈠炊椤掑鏅┑鐘诧工閹冲秶绮径濞炬斀闁绘劖娼欓悘鐔兼煕閵婏附銇濋柟顕嗙節閹晝绱掑Ο鐓庡箥闂傚倸鍊搁崐鎼侇敋椤撱垹绀夌�广儱妫涚粻楣冩煙閸愭彃妲婚悗姘ュ妽缁傚秴顭ㄩ崼銏犲絼闂佹悶鍎崕閬嶅礉濠婂牊鍊垫慨妯煎亾鐎氾拷??-闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃瑥顤�闂侀潧妫楅崯鎾蓟閿濆绠抽柟鎼灥閸氼偊姊洪崫鍕拱缂佸鍨块崺銉﹀緞婵炵偓鐎婚梺褰掑亰閸犳岸鍩㈣箛鏇犵＝闁稿本鐟ㄩ崗灞解攽椤栵絽寮�规洖缍婂畷濂稿即閻愯埖鎲伴梻渚�娼ц墝闁哄懏绮撳畷鎴﹀幢濞戞瑧鍘遍柣蹇曞仜婢т粙鍩ユ径瀣ㄤ簻闊洢鍎茬�氾拷?------------------"+refreshdata.datas);
				mkdb.Procedure.psendWhileCommit(roleid, refreshdata);					
				
				return true;
			}
		};
		
		requestattr.submit();
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 800530;

	public int getType() {
		return 800530;
	}

	public java.util.LinkedList<Integer> attrid;

	public CRequestAttr() {
		attrid = new java.util.LinkedList<Integer>();
	}

	public CRequestAttr(java.util.LinkedList<Integer> _attrid_) {
		this.attrid = _attrid_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.compact_uint32(attrid.size());
		for (Integer _v_ : attrid) {
			_os_.marshal(_v_);
		}
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		for (int _size_ = _os_.uncompact_uint32(); _size_ > 0; --_size_) {
			int _v_;
			_v_ = _os_.unmarshal_int();
			attrid.add(_v_);
		}
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CRequestAttr) {
			CRequestAttr _o_ = (CRequestAttr)_o1_;
			if (!attrid.equals(_o_.attrid)) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += attrid.hashCode();
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(attrid).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

