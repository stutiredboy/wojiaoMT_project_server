
package fire.pb.skill.liveskill;





import fire.log.enums.YYLoggerTuJingEnum;
import fire.pb.item.AddItemResult;
import fire.pb.item.BagTypes;
import fire.pb.item.Pack;
import fire.pb.item.SFoodAndDrugEffect;
import fire.pb.main.ConfigManager;
import fire.pb.skill.SSkillError;
import fire.pb.skill.SkillConstant;
import fire.pb.skill.SkillRole;
import fire.pb.util.Misc;



// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CLiveSkillMakeDrug__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/***
 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎娆戠┛闂傚倷娴囧▔鏇㈠窗閹版澘鍑犻柤濮愬�楁稉宥夋煙閹咃紞闁哄棴绠戦埞鎴﹀磼濠婂海鍔搁柛鐑嗗灠椤啴濡堕崱姗嗘⒖婵犳鍠撻崐鏇㈠煝瀹ュ閱囬柕澶涜吂閹风粯绻涙潏鍓хК婵炲拑缍佹俊瀛樼節閸ャ劎鍘遍梺瑙勫劤椤曨厾绮婚悙鐑樼厓闁靛鍨抽悾鐢碉拷瑙勬礀閻栧ジ銆佸Δ鍛櫢濞寸姴顑嗛崑鍌涗繆椤栨嚎锟藉骞忛悜鐣屽祦闁割煈鍠栨慨搴☆渻閵堝繒绱伴柛妤佸▕楠炲啴鏁撻悩鎻掑祮闂佺粯妫佸▍锝夋儊閸儲鈷掗柛灞炬皑婢ф稓绱掔�ｎ偄娴挊鐔哥節婵犲倸顏ュù婊勭矒閻擃偊宕舵搴″煂婵炲瓨绮堥崡鎶藉蓟閳ュ磭鏆嗛悗锝庡墰閻﹀牓鎮楃憴鍕濞存粌鐖奸悰顕�宕堕澶嬫櫌婵犵數濮撮崯顐︻敂鐠鸿　鏀介柣妯肩帛濞懷勩亜閹存繃鍤囬柟閿嬪灴閹垽宕楅懖鈺佸妇濠电姷鏁搁崑鐔煎磻閹炬枼鏋嶉柛鈩冪♁閻撴洟鎮楅敐搴濈凹妞ゃ儯鍨介弻锛勪沪閸撗侊拷鎺懨归悪鍛暤鐎规洘绮忛ˇ顔戒繆閹绘帞澧曟い顏勫暣婵″爼宕ㄧ�电妞介梻浣烘嚀閸ゆ牠骞忛敓锟�
 * @author changhao
 *
 */
public class CLiveSkillMakeDrug extends __CLiveSkillMakeDrug__ {
	@Override
	protected void process() {
		// protocol handle

		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		mkdb.Procedure liveskillmakedrug = new mkdb.Procedure()
		{
			@Override
			protected boolean process()
			{
				SkillRole skillrole = new SkillRole(roleid);
				
				xbean.LiveSkill liveskill = skillrole.getLiveSkills().get(LiveSkillManager.LIVE_SKILL_TYPE_MAKE_DRUG);	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊炲銈嗗笒椤︿即寮查鍫熷仭婵犲﹤鍟版晥濠电媴鎷峰〒姘炬嫹婵﹨娅ｇ槐鎺懳熼搹閫涚礃婵犵妲呴崑鍕拷姘緲椤曪綁宕ㄦ繝鍕嚌闂佽法鍠嶇划娆忣嚕鐠囨祴妲堟俊顖炴敱椤秴鈹戦绛嬫當闁绘锕顐﹀箚瑜夐弨浠嬫煟閹邦剙绾ч柛锝堟閳规垿顢欓懖鈺�绮电紓浣哥焷妞村摜鎹㈠┑瀣倞妞ゎ剦鍎搁崶銊у幈濠电偞鍨靛畷顒勫几濞戞瑧绠鹃柛婊冨暟缁★拷濠殿喖锕ㄥ▍锝夊箲閸曨垰惟闁靛濡囨禍鐐寸節绾版ɑ顫婇柛瀣閿熻姤纰嶅姗�鎮鹃悜绛嬫晬闁绘劘灏欐鍥⒑閻熼偊鍤熷┑顕�娼ч埢鎾淬偅閸愨斁鎷洪梻鍌氱墛閸楁洟宕奸妷銉ф煣濠电偞鍨跺銊ノ涢婊勫枑闁哄啫鐗嗛拑鐔兼煟閺冨倸鐨戦柟椋庡厴閹棄鈻撶捄銊ュЪ濠电偛顕刊瀛樹繆閸ヮ剙绠栨い鏇嫹闁轰焦鍔栧鍕拷锛卞嫬顏归梻浣藉吹婵潙煤閵堝拋鍤曢柛顐ｆ礀缁犳煡鏌ㄥ┑鍡橆棤缂佺娀绠栭弻娑樷槈閸楃偘绨婚梺璇茬箰瀵爼銆冮妷鈺傚�烽柤纰卞墰椤旀帡姊虹拠鈥虫灍缂侇喗鎹囬獮濠囨倷閸濆嫀銊ф喐瀹ュ宓侀柛顐犲劜閳锋帒霉閿濆懏鍟為柟顖氱墛缁绘稓浠﹂崒姘变紙閻庤娲樼换鍕閿曞倹鍊锋い鎺嶈兌瑜版寧淇婇悙顏勶拷鏍ь潖閸︻厾鐭堢痪顓炴噷娴滃綊鏌熼悜妯诲碍濞存粌缍婂娲箚瑜庣粋瀣煕鐎ｂ晝鍔嶇紒鍌涘浮婵拷闁绘﹩鍋呴弬锟芥俊鐐�栧濠氬Υ鐎ｎ倠娑橆潩椤撶姷顔曢梺鍛婄矊閸熶即骞冮崗闂寸箚闁告瑥顦慨宥嗩殽閻愭潙娴鐐诧工閻ｇ兘宕惰閻忓牓姊洪崷顓у姕缂佺粯绻冩穱濠囧醇閺囩偛绐涘銈嗘尵閸犳洜娆㈤姀銈嗏拻闁稿本鑹鹃敓鑺ユ倐瀹曟劙鎮滈懞銉ユ畱闂佸壊鍋呭ú蹇涙晸閹存帞鍔嶇紒缁樼箞瀹曞爼鎳滈崹顐ｇ彣濠电姷鏁告慨鎾晝閵堝绠犻煫鍥ㄦ尵閺嗭箓鏌涘▎蹇ｆШ缂佲槄鎷烽梻鍌氬�搁悧濠勭矙閹烘鍎楁俊銈呭暟绾惧ジ鎮归崶褍绾фい銉ｅ灲閺屸�崇暆鐎ｎ剛袦婵犳鍣幏鐑芥⒑缂佹◤顏堝疮閸ф姹查柛顐犲劜閳锋垹绱掔�ｎ偒鍎ラ柛搴＄箻閹顫濋銏犵ギ閻庢鍠涢褔鍩ユ径濠庣叆闁告侗鍨卞鎴炵節濞堝灝鏋熼柨鏇楁櫊瀹曟鈽夊Ο鐐戝吘鏃堝川椤旇瀚奸梻浣告啞缁嬫垿鈥﹂鍕�垮ù鐘差儐閻撴稑霉閿濆洨鎽傞柛銈嗙懄閵囧嫰顢曢姀銏㈩啋闂佸湱鍘у﹢閬嶅箟閹绢喖绀嬫い鎰╁�х槐锟犳⒒閸屾瑧绐旀繛浣冲洠锟斤箓宕奸妷銉э紵闂佸搫琚崕鏌ュ磻閻斿吋鐓忛煫鍥ь儏閿熻姤鐗犻崺娑㈠箣閿旂晫鍘介梺缁樻煥閹诧紕娆㈤崣澶岀闁割偅纰嶅▍濠囨煛瀹�锟介崰鏍х暦濞嗘挸围闁糕剝顨忔导锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎妯恍氶梻鍌欒兌椤牏鎮锕�绀夐幖娣妼缁犵喐鎱ㄥ┑鍡欑伇闁汇倧鎷烽梻浣告惈閸燁偊宕愰弰蹇嬩汗濡わ絽鍟埛鎴︽煕濠靛棗顏柛灞诲姂閺屾盯鍩℃担鍓蹭純閻庢鍣崑濠傜暦閸洦鏁嗗ù锝呮惈鐢箖姊绘繝搴′簻婵炶绠戠叅闁哄诞鍕槑闂傚倸鍊风粈渚�骞栭锔藉創婵炲棙鎸哥粈鍐煟閹伴潧澧柣锔界矒濮婄粯绗熼敓钘夘焽瑜旈幃褔宕卞銏＄☉铻栧ù锝囨嚀瀵潡鎮峰鍕叆妞ゎ偄绻戠换婵嗩潩椤掑偆妲规俊鐐�栭崝鎴﹀春閸曨剙顕遍柛鎰靛枟閸婄敻鎮峰▎蹇擃仾缂侊拷閸愵喗鐓曢柕濠忕畱椤曟粌菐閸パ嶈含闁硅櫕绮撳Λ鍐ㄢ槈濮樿京宓侀梻浣筋嚙閸戠晫绱為崱娑樼婵炲棙鎸惧畵浣猴拷骞垮劚椤︿即鍩涢幋锔藉仯闁搞儜鍐獓闂佸湱娅㈢紞渚�寮婚埄鍐╁閻熸瑥瀚敓鑺ュ姍閺屽秹濡烽婊呮殼閻庤娲滈崢褔鍩為幋锕�鐐婇柕濞у嫷娼犲┑鐘垫暩婵兘寮崨濠冨弿闁绘垵顫曢敓钘夊�块幐濠冪珶閳哄绉�规洏鍔戝鍫曞箣閻欏懐骞㈤梻鍌欐祰椤鐣峰锟介、姘愁槾缂侇喖顭烽、娑㈡倷鐎电寮抽梻浣虹帛濞叉牠宕愰崷顓ㄦ嫹濮樼偓瀚�? by changhao			
				if (liveskill == null)
				{
					LiveSkillManager.logger.debug("CLiveSkillMakeDrug skilllevel error:" + roleid);
					psend(roleid, new SSkillError(SkillConstant.SkillError.SkillLevelNotEnough));
					return true;					
				}
				
				int skilllevel = liveskill.getLevel();
				
				boolean energyenough = LiveSkillManager.getInstance().ConsumeMakeEnergy(
						roleid, LiveSkillManager.LIVE_SKILL_TYPE_COOKING, skilllevel,"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存鐐达耿閹崇娀顢楁径瀣撴粓姊绘担瑙勫仩闁告柨绉堕幑銏ゅ礃椤斿槈锕傛煕閺囥劌鐏犻柛鎰舵嫹婵＄偑鍊栭崝锕�顭块敓鐣岀磼椤旂厧顣崇紒杈ㄦ尰缁楃喐绻濋崘顭戜紦婵犵數濮伴崹鐓庘枖濞戙埄鏁勯柛鏇ㄥ幗瀹曟煡鏌涢埄鍏︽粍绂嶅鍫熺厸鐎广儱鍟俊璺ㄧ磼閻樿櫕宕岄柡灞剧☉椤繈顢楅崒婧炪劑姊洪崫鍕効缂佽弓绮欓崺鐐哄箣閿曪拷楠炪垺绻涢崱妤冪闁告ü绮欏缁樻媴閸涘﹥鍎撻梺鍝勭墱閸撶喖骞嗛崟顖ｆ晬闁绘劦浜烽幏閿嬬瑹閿熻棄顕ｉ幘顔碱潊闁斥晛鍟悵鎶芥⒒娴ｈ鍋犻柛搴櫍瀵彃鈹戠�ｎ亝杈堝銈嗘尪閸ㄦ椽鍩涢幒鎳ㄥ綊鏁愰崨顔兼殘闂佽鍨伴悧濠冪┍婵犲浂鏁冮柕蹇嬪�曞浼存倵鐟欏嫭绀冮柛鏃�娲熼崺鐐哄箣閻欏懏瀚归柨婵嗙凹濞寸兘鏌熼懞銉︾婵﹥妞藉Λ鍐归妷銉уⅵ鐎殿喗褰冮…銊╁醇濠靛牞绱遍梻浣虹《閸撴繄绮欓幒妤佸亗闁哄洢鍨洪崐鍫曟煟閹邦厼绲婚柍閿嬫閺屽秹鎸婃径妯恍ч梺闈涙搐鐎氼垳绮诲☉銏犖ㄩ柨鏇嫹妞ゅ骏鎷� ", 
						YYLoggerTuJingEnum.tujing_Value_liveskillcost, false);
				
				if (energyenough == false) //婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁绘劦鍓欓崝銈嗐亜椤撶姴鍘寸�殿喖顭烽弫鎰緞婵犲嫮鏉告俊鐐�栫敮濠囨倿閿曞倸纾块柟鍓х帛閳锋垿鏌熼懖鈺佷粶濠碘�炽偢閺屾稒绻濋崒娑樹淮閻庢鍠栭…鐑藉极閹邦厼绶炲┑鐘插缂嶅倿姊绘担铏瑰笡闁挎岸鏌涢悢閿嬪仴鐎殿喗濞婂畷濂稿Ψ閿旇瀚肩紓鍌欑椤戝棝顢栧▎鎾崇？闊洦鏌ｆ禍婊堟煙鐎涙绠ユ俊顖ゆ嫹闁诲孩顔栭崰鏍�﹂柨瀣╃箚闁归棿绀侀悡娑㈡煕鐏炲墽鐓紒銊ょ矙濮婄粯鎷呮笟顖滃姼闂佸搫鐗滈崜娑氬垝濞嗘挸绠ｉ柨鏃傜帛閺呮粓姊虹捄銊ユ珢闁瑰嚖鎷�?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻鐔虹磼閵忕姵鐏嶉梺绋块椤︻垶鈥﹂崸妤佸殝闂傚牊绋戦～宀�绱撴担鍝勭彙闁搞儯鍔庨崢閬嶆⒑閸濆嫮袪闁稿﹥娲橀弲鍫曞蓟閵夛箑锟藉灚鎱ㄥ鍡楀缂佸妞介弻鈥崇暆閿熶粙宕伴弽褏鏆︽繝濠傛－濡查箖鏌ｉ姀鈺佺仭闁烩晩鍨跺璇测槈濞嗘垹鐦堥梺绋挎湰缁嬫垶绂掗幘顔解拺闁告繂瀚～锕傛煕閺冿拷閸ㄧ敻顢氶敐澶婄妞ゆ棁妫勯敓鐣屽厴閹綊宕堕崶褍顏╂い蹇撶埣濮婃椽宕ㄦ繝鍕ㄦ濡炪値鍙庨崜鐔奉嚕閵婏箑顕遍悗娑櫱氶幏濠氭⒑缁嬫寧婀伴柣鐔村姂瀹曟鐣濋敓鐣屾閹烘鏁嬮柛娑卞幘娴犳悂鎮楀▓鍨灈妞ゎ參鏀辨穱濠囧箹娴ｅ摜鍘告繛杈剧到瑜般劑寮撮姀锛勫幗闁瑰吋鎯岄崹宕囩矓閻㈠憡鐓曢柣妯诲墯濞堟粎锟借娲橀崹鍨暦閹烘鍊烽悗鐢殿焾楠炴劙姊绘担瑙勫仩闁稿寒鍨跺畷鏇㈡焼瀹ュ棗锟借埖銇勮箛鎾跺闁绘挾鍠栭弻鐔煎箚瑜嶉懜褰掓煕閺冩挾鐣甸柡灞革拷宕囨殕閻庯綆鍓涜ⅵ闁诲孩顔栭崰妤呭箰閹惰棄绠栨繛鍡樺灦鐎氭氨鎲告惔锝忔嫹濮橆剛绉洪柡灞剧洴閺佸倻鎷犻幓鎺嶇礋闂備胶鎳撻崲鏌ュ床閺屻儻缍栨繝闈涱儐閸婇攱銇勯幒鐐村濡炪倕楠忛幏锟�? by changhao
				{
					psend(roleid, new SSkillError(SkillConstant.SkillError.EnergyNotEnough));
					return true;						
				}							
				
				Pack bag = (Pack)fire.pb.item.Module.getInstance().getItemMaps(roleid, fire.pb.item.BagTypes.BAG, false);
				
				int count = 0;
				
				int makingsweight = 0;
				
				if (makingslist.size() == 0) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愰崨鍌滃枎閳诲酣骞嗚椤斿嫮绱撻崒娆掑厡濠殿喗鎸抽幃妯侯潩鐠轰綍锕傛煕閺囥劌鏋ら柣銈忔嫹闂備礁婀遍崑鎾诲箚鐏炶娇娑㈠Χ閸モ晝锛濇繛鎾磋壘閿曘儳锟芥俺顫夌换婵嬫偨闂堟刀銏＄箾鐠囇呯暤闁诡噯绻濇俊鐑藉煛閸屾粌骞楅梻浣告惈閸燁偄霉閸岀偛鍚规繛鍡樺灦閸嬫牗鎱ㄥΟ澶稿惈缁炬崘妫勯湁闁挎繂鐗婇鐘绘偨椤栨稓銆掔紒杈ㄥ笧閿熸枻缍嗛崑鍕箔閹烘挶浜滈柡鍥崝锔撅拷瑙勬礈閸犳牠銆佸锟芥俊鎼佹晝閿熶粙顢旈崼鏇熲拺闁圭娴风粻鎾澄旈悩鍙夊暈缂佸倸绉归幃娆徢庨璺ㄧ泿闂備焦瀵ч弻銊╂倶濠靛棛鏆ら柛鈩冪♁閻撴瑦銇勯弮鍌滄憘婵炲牊妫冮弻宥囩磼濡纾抽悗瑙勬礀缂嶅﹪銆佸▎鎾村仼閻忕偛锟界喐瀚梻鍌氬�搁崐鐑芥嚄閸洍锟斤箓宕奸妷顔芥櫈闂佸憡绋戦悺銊╁疾濠靛鐓忓鑸电☉椤╊剟鏌嶉悷鎵㈤柍瑙勫灴閹晠宕ｆ径濠庢П闂備焦鎮堕崐鏇㈩敄婢跺娼栧┑鐘宠壘闁卞洭鏌ｉ弮锟芥禍浠嬫晸閼恒儱绗х紒杈ㄥ浮楠炲洭顢欓梻瀛橆潟闂備礁鎼惌澶屽緤妤ｅ啫绠氶柡鍐ㄧ墱閺佸秵绻濇繝鍌涘晽闁挎繂顦伴埛鎴︽煕濞戞﹫鏀婚悘蹇庡嵆閺岋綁鎮㈤弶鎴濆Е濡炪們鍨哄畝鎼佸极閹版澘骞㈡俊銈咃工濞堝ジ姊虹拠鎻掝劉缂佸甯熻ぐ婊堟⒑瑜版帗鏁辨俊鐐舵椤繐煤椤忓懎浜楅柟鍏兼儗閸犳绱炲Δ鍛拺缂佸灏呴弨缁樼箾閼碱剙鏋涚�规洘妞芥慨锟介柕鍫濇嚇閸炲爼姊洪棃娑氱疄闁搞劌顭烽弫宥呪攽鐎ｎ偀鎷虹紓浣割儐鐎笛冿耿閹殿喚纾奸悗锝庡亞婢ь剛绱掗弮鍌氭瀻妞ゎ偅绮撻弫鎾寸鐎ｎ亣鎽曢悗骞垮劚濞诧妇锟芥碍宀搁弻銈囧枈閸楃偛濮伴悷婊勬瀵鍩勯崘鈺侇�撻梺鑽ゅ枑濠㈡﹢锝炲澶嬪�甸柛顭戝亝缁舵煡鎮楀鐓庡⒉闁诲繑甯炵槐鎾诲磼濞嗘垵濡介柦鍐憾閺岋絽鈹戦崶銊ь槹濠殿喖锕ら…宄扮暦閹烘垟鏋庨柟鎼幗琚﹂梻鍌欑濠�閬嶅煕閸儱纾婚柛鈩冪☉缁犳牗銇勯弴顏呭濡炪們鍨哄ú鐔煎极閸愵喗鏅搁柣锝呰嫰椤ユ岸鏌涜椤ㄥ棝鎮″☉銏″�堕柣鎰邦杺閸ゆ瑩鏌涢弮锟界划鎾诲蓟濞戞熬鎷烽敐搴濈盎闁跨喕妫勫鈥愁嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崜鑼帥闁哥姵顨婂畷鎰邦敍閻愮补鎷虹紓鍌欑劍钃遍悘蹇庡嵆閺岋綁鎮㈤崣澶嬬彅濡炪値鍋勭换鎰弲濡炪倕绻愮粔鐢稿疾閿濆鈷戦梻鍫熶腹濞戙垹宸濇い鏃傜摂閸熷懘姊婚崒姘拷宄懊归崶顒夋晪鐟滃繘骞戦姀銈呯闁圭偓娼欏鍧楁⒑濮瑰洤鐏い顓炵墛椤㈠﹪姊绘担鍛婂暈婵炶绠撳畷褰掑级閹稿孩娈伴梻鍌氬�风欢姘焽瑜旇棟濞寸姴顑嗛崐鑸电節闂堟侗鍎忛崶瀛樼節閵忥絾纭炬い鎴濇喘瀹曪綁宕卞☉娆屾嫼缂傚倷鐒﹁摫闁绘挶鍎甸弻娑㈠Χ閸℃瑥鈷屽Δ鐘靛仜缁绘﹢骞冨鍫熷殟闁靛鍎扮花钘夆攽閻愯埖褰х紒鑼舵閿曘垺娼忛埡鍐厠闂佺粯鍨兼慨銈夊煕閹烘嚚褰掓晲閸涱喖鏆堥柣鐘冲姧缁绘繈寮诲鍛殝闁规鍠栭埅鐢告倵鐟欏嫭绀冮柛銊ュ閹广垹鈹戠�ｎ亞鍊為梺瀹犳〃閼冲爼濡堕敃鍌涒拻濠电姴楠告禍婊勭箾鐠囇冾洭缂侇喗鐟╅獮鎺懳旈敓浠嬫偪妤ｅ啯鐓欓梻鍌氼嚟閸斿秹鏌ｉ幘鍗炲姦闁哄矉缍佸鎾倷鐠囇勫闁革富鍙忛幏宄邦潩閻愵剙顏� by changhao
				{
					fire.pb.item.SFoodAndDrugEffect stuff = (SFoodAndDrugEffect) fire.pb.item.Module.getInstance().getItemManager().getAttr(LiveSkillManager.ITEM_TYPE_DRUG_MAKINGS_LOW);
					if (stuff == null)
					{
						psend(roleid, new SSkillError(SkillConstant.SkillError.ItemNotExist));
						return true;						
					}
					
					makingsweight = stuff.lianyaoMaterialWeight * 4;
					count = 4;
					
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸♀晜效婵炲瓨鍤庨崐婵嬪蓟閵堝绾ч柟绋块娴犳潙鈹戦纭锋敾婵＄偘绮欓妴浣肝旈崨顔芥闂佷紮绲介惉濂告儗閹剧粯鐓涢悘鐐额嚙閸旀粓鏌￠崨顔藉�愰柡宀嬬畱铻ｅ〒姘煎灡绗戦梻浣芥硶閸犳洖螞閸曨偒鐒介柨鐔哄Т杩濇繛杈剧悼绾爼寮告惔銊︾厵闁诡垎鍜冪礊濡炪倧瀵岄崣鍐箖瀹勯偊鐓ラ柛鎰典簽椤旀帡鏌﹀Ο鑽ょ畺闁靛洤瀚板浠嬪Ω瑜嬮敓鑺ュ笧缁辨帡鎮╅懡銈囨毇闂佸搫鐬奸崰鏍嵁閸℃凹妾ㄩ梺鎼炲�楅崰鏍蓟濞戙垺鍋勯柛婵勫劚瀵劑姊洪崫鍕伇闁哥姵鐗犻獮鍐煥閸喎娈熼梺闈涱檧闂勫嫬鈻撻崨濠佺箚闁绘劦浜滈敓鑺ュ灴瀹曟繃绻濋崶褏锛熼梺姹囧灮椤牏绮婚弽銊х闁糕剝蓱鐏忣厾绱掗悪娆忔处閻撴瑩鎮楀☉娆樼劷缂佺姰鍎茬换娑㈠礂閻撳骸鎽靛┑顔硷功缁垶骞忛崨瀛樺殟闁靛缍囬幏鐑藉礃椤旂晫鍘介梺纭呮閸嬬喖鎮鹃崹顐闁绘劖娼欓悘瀵革拷瑙勬礀閻栧ジ銆佸Δ鍛櫢濞寸姴顑呴崙鐘层�掑鐐闂佸搫鐬奸崰鏍х暦濠婂棭妲鹃柣銏╁灡閻╊垶寮婚敓鐘插窛妞ゆ棁妫勯敓鑺ュ姍閺岋紕浠︾拠鎻掝潎闂佽鍠撻崐婵嗙暦閹烘垟妲堟慨妤�妫旂槐锟� by changhao
					if(bag.subMoney(-6000, LiveSkillManager.MakeDrug, fire.log.enums.YYLoggerTuJingEnum.tujing_Value_gonghuilianjin, 0) != -6000)
					{
						psend(roleid, new SSkillError(SkillConstant.SkillError.MoneyNotEnough));
						return false;	
					}
				}
				else if (makingslist.size() < 2) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柛婵嗗椤忋儵鏌涙惔銊ゆ喚闁糕晝鍋ら獮瀣晜閽樺姹楅梻浣告啞閻熴儵藝娴兼潙绠栨繛鍡樺灩绾捐棄霉閿濆懏鎯堟い搴＄焸閺屾盯濡搁妷褍鐓熼悗娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭花浠嬫⒒娴ｄ警鐒鹃柡鍫墰缁瑩骞嬮敂缁樻櫆闂佽法鍣﹂幏锟�?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柟鑲╁仜婵″ジ鏌涙繝鍌涘仴鐎殿喛顕ч埥澶愬閳哄倹娅囬梻浣瑰缁诲倸螞濞戔懞鍥Ψ瑜忕壕钘壝归敐鍛儓鐎涙繄绱撻崒姘毙㈤柨鏇ㄤ簻椤曪絿鎷犲顔兼倯婵犮垼娉涢敃锝囨閸洘鈷戦柛娑橈攻婢跺嫰鏌涚�ｎ偅宕屾鐐茬箻閺屻劎锟斤綆鍓涢惁鍫濃攽椤旇婊堝磿婵犳艾绠柣鎴ｆ瀹告繈鏌℃径瀣仼闁绘挻鍨剁换婵嬪閿濆棛銆愰梺娲诲墮閵堟悂骞嗘笟锟藉畷濂稿Ψ閿旇瀚介梻浣侯焾閺堫剙顫濋妸锔芥珷婵炴垶姘ㄧ壕濂告倵閿濆骸浜滄繛鎼櫍閺屸剝鎷呴崫銉愩垺銇勯幘鍐叉倯鐎垫澘瀚敓鏂ょ秵閸撴瑩鐛Δ鍛拻濞达絽鎲＄拹锟犳煕鎼存稑锟芥洜鍙呴梺鍝勭▉閸擄箓寮虫潏銊х瘈闁汇垽娼ч崜宕囩磼閼艰埖顥夐悡銈夋煏閸繍妲归柡鍛箖閵囧嫯绠涢幘鏉戞缂備浇顕уΛ婵嬪蓟濞戙埄鏁冮柨婵嗘椤︺儵鎮楅悷鐗堝暈缂佽鍟存俊鐢稿礋椤栨碍顥濋梺鍓茬厛閸犳宕愰姘兼富闁靛牆鎳愮粻鍐测攽椤旂偓鏆╅柟骞垮灩閳规垿宕煎┑鍥╋拷鍐测攽閳藉棗鐏℃俊鐐茬仢椤洭骞嬮敂瑙ｆ嫼缂備礁顑嗛娆撳磿韫囨稒鐓欓柧蹇ｅ亝瀹曞本顨ラ悙鎼疁妞ゃ垺娲熸俊鍫曞炊閳哄闂繝鐢靛仩閹活亞绱為敓鑺ョ箾閸滃啰鎮奸柡渚囧枛閳藉濮�閿涘嫬骞楅梻浣稿暱閹碱偊鏁冮妶澶嬪�堕柣妯肩帛閻撶喖鏌ㄥ┑鍡樻悙闁告ê顕敓鍊燁潐濞测晝鎹㈠┑瀣畺婵炲棗娴氶崥瀣煕閳╁叇姘跺箯瑜版帗鈷戦柣鐔告緲濡插鏌熼搹顐�挎鐐插暣閺屻劎锟斤綆浜堕崵銈夋煟鎼淬垻鈾侀柨鏇ㄥ亞濡叉劙顢楅崟顑芥嫽闂佺鏈懝楣冩晸閼恒儲鍊愮�规洘鍔曢悾锟犲箠婵犲倻绉虹�规洘鍎奸ˇ鎾煛閸☆厾鐣甸柡宀嬬秮婵拷闁靛繆鏅濋崝鍝ョ磽娴ｇ懓濮堟い銊ワ躬瀵鎮㈤崗鑲╁姺闂佹寧娲╅幏鐑芥煛鐎ｎ剙鏋旈柨鐔凤拷鐕佹綈婵炲弶锕㈤幃锟犳晸閻樿尪鎽曞┑鐐村灟閸╁嫰寮崘顔界厽婵☆垵顕х徊璇测攽椤斿ジ鍙勬慨濠冩そ閹稿﹥寰勬繝鍐╊啀闂備礁鎽滄慨鐢告偋閻樺樊鍤曞┑鐘宠壘閸楁娊鏌曡箛鏇炩枅闁哥偠娉涢埞鎴︽偐缂佹ɑ閿┑鐐茬湴閸婃洟鍩㈠鍫▌濠殿喖锕ュ钘夌暦椤愶箑绀嬫い鎺戯功瀹告繄绱撻崒娆掑厡濠殿喚鏁婚獮鎴﹀炊瑜滈崵鏇㈡偣閸ャ劎銈存俊鎻掔墦閺屾洝绠涢弴鐑嗘綌闂侀潧艌閺呮粓鎮￠妷锔剧瘈闂傚牊绋掗ˉ鐐烘煕閿濆牜娼愰柕鍥у椤㈡鏁撴禒瀣庡洭妫冨☉杈ㄧ稁闂佹儳绻愬﹢杈╁閸忛棿绻嗘い鏍ㄧ箓娴滆銇勯幘鍐叉倯缂佺粯绋撻敓鑺ョ♁椤洭鎯岄妶鍚ょ懓顭ㄩ崟顓犵厜闂佹寧绻勯崑鐘电不濞戞ǚ妲堟繛鍡樺姇閸旀帡姊绘笟锟藉鑽わ拷闈涚焸瀹曘垺銈ｉ崘鈺佷簵闂佺懓澧界划顖炴偂閻斿吋鐓熸俊顖氭惈鐢娀鏌ら崜韫偗闁哄本鐩顒傛崉閵婃剬鍜冩嫹鐟欏嫭绀冨┑鐐诧躬閻涱喗鎯旈妸锕�娈熼梺闈涱槶閸ㄨ櫣锟芥艾銈稿缁樻媴娓氼垱鏁梺绋款儐閸旀瑥鐣烽幋婵冩闁靛繒濮烽ˇ顔尖攽椤旂瓔娈ｉ柟椋庡厴閺岋紕浠﹂崜褎鍒涢悗娈垮櫘閸撶喖骞婂Δ鍜佹晬婵﹢妫跨槐鏃堟⒒閸屾瑧顦︾痪缁㈠幘閸掓帡顢涢悙鑼唹闂佹悶鍎洪崜娆撳几娓氾拷閺岀喖宕滆鐢盯鏌￠崨顔藉�愰柡灞诲姂閹倝宕掑☉姗嗕紦? by changhao
				{
					psend(roleid, new SSkillError(SkillConstant.SkillError.OneStuffCannot));
					return true;
				}
				else
				{
					for (Integer makings : makingslist)
					{
						fire.pb.item.SFoodAndDrugEffect stuff = (SFoodAndDrugEffect) fire.pb.item.Module.getInstance().getItemManager().getAttr(makings);
						if (stuff != null)
						{
							fire.pb.item.ItemNameClassConfig classid = ConfigManager.getInstance().getConf(fire.pb.item.ItemNameClassConfig.class).get(stuff.getTypeid());
							if (classid != null)
							{
								boolean drugstufftype = classid.classname.equals(LiveSkillManager.DrugStuff);
								if (drugstufftype == true) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁橈耿瀵鏁愭径濠勵吅濠电姴鐏氶崝鏍礊濡ゅ懏鈷戦悹鎭掑妼閺嬫瑦淇婇銏狀伃鐎规洘鍔欏畷鐑筋敇閻樼數鍔归梻浣告贡閸庛倕螞閹达箑绠柣鎴ｅГ閺呮煡骞栫划鐧告嫹閼碱剙鍤┑鐘垫暩閸嬫盯骞婂畝鍕瀭闁芥ê顦藉鏍ㄧ箾瀹割喕绨奸柛銈呯Ч閺屾洘寰勬繝鍌涚亾婵炲瓨绮犳禍锝呂涢悢濂夋富闁靛牆妫涙晶閬嶆煕鐎ｎ偆鈽夐弫鍫ユ煛鐏炶鍔滈柍閿嬪灦閵囧嫰骞掗悙鏉戭伓缂傚倷绀侀ˇ閬嶅极婵犳艾绠栭柨鐔哄Т鍞梺鍐叉惈閸婂宕㈡禒瀣拺闁告繂瀚弳娆撴煕婵犲懎鍚归柡渚囧枛閳藉鈻庡鍕泿闂備線娼чˇ顓㈠磿閸濆嫀锝夋惞閸︻厾锛滈柡澶婄墑閸斿秶浜搁鐔翠簻闁瑰墽鍋ㄩ崑銏拷瑙勬处娴滎亜鐣峰锟介、姗�鎮欓弶鎴濆濠电姴鐥夐弶鍖℃嫹濡や焦鍙忛柣鎴ｆ绾剧粯绻涢幋娆忕仼闁汇値鍠楅妵鍕箛閳轰礁濮㈡繛瀛樼矆缁瑥顫忓ú顏呭殥闁靛牆鎲涢姀锛勭婵炴潙顑嗗▍鍥瑰鍜佺劸闁宠閰ｉ獮瀣偐闂堟稓顔岄梻鍌欒兌缁垶宕濆Δ鍛？闁靛牆顦悡鏇㈡煙鐎电校闁哥姵鍔欓弻锝呂旈敓浠嬫偋閸℃瑧绠旈柟鐑樺殮閻熼偊鐓ラ柨鐔剁矙瀹曪繝骞庨挊澶庢憰濠电偞鍨崹鍦不婵犳碍鍊甸梻鍫熺♁閸熺偤鏌涢敍鍗炲枤濞撳鏌曢崼婵囶棡缂佸矁娉曠槐鎺楃叓椤撶姷鐓撻梺璇″櫍缁犳牠寮幘缁樺亹鐎规洖娲ゆ慨娲⒒娴ｇ懓顕滄俊顐＄铻為柛鏇ㄥ灡閸庡﹥绻濇繝鍌滃闁抽攱甯掗妴鎺戭潩閻愵剙顏舵繝鐢靛仒閸栫娀宕堕妸銉ょ綍闂備胶纭堕崜婵嬪Φ閸屾埃妲堟俊顖炴敱椤秴鈹戦悙鍙夘棡闁告梹鐗犻幃闈涚暋闁附瀵岄梺闈涚墕濡绮幒妤佺厱濠电姴鎳庨崥鐟邦熆鐟欏嫭绀嬬�规洘顨堢划顓熸姜閹殿喚娉块梻鍌欑閹碱偊宕愰幖浣瑰�舵繝闈涱儏缁犳牠鏌熺�电浠х紒鈽呮嫹闂備浇娉曢崰宥囧垝濞嗘挾宓佺�广儱顦介弫濠囨煕閹炬绉舵惔濠囨⒒閸屾瑨鍏屾い顓炵墦瀵敻顢楅崒婊呯厯闂佺懓顕慨椋庣不閺冨牊鐓冮柛婵嗗閸ｆ椽鏌ｉ幘宕囩闁哄本鐩俊鐑芥晲閸涱収鐎冲┑鐘愁問閸犳牜绮旈悽鎼烇拷鍐Ψ閳哄倸锟界兘鏌℃径瀣仸閻犲洨鍋涜灃闁绘﹢娼ф禒锔姐亜椤撶偞鍠樻鐐村灴瀹曠喖顢涘顐ょ倞闂備礁鎲″ú锕傚矗鎼淬劌鐤悗锝庡墰绾句粙鏌涚仦鎹愬闁跨喕濮ら幃鍌氱暦閹版澘绠瑰ù锝呮憸閿涙瑩姊虹紒妯虹伇濠殿喓鍊濆畷鎰板锤濡や胶鍙嗛梺鍝勫�搁悘婵嬪煕閺冨牊鐓熸い鎾跺枔閹冲洭鏌″畝锟介崰鎰焽韫囨稑绠氱憸蹇撐ｉ敐澶嬧拺閺夌偞澹嗛ˇ锕傛倵濮橆偄宓嗙�殿喛顕ч埥澶娢熼柨瀣垫綌婵犵妲呴崹浼村触鐎ｎ喖绠熷┑鍌氭啞閳锋垹绱掔�ｎ亜鐨＄�规悶鍎甸弻锝夊冀瑜嬮崑銏拷娈垮枦椤曆囶敇閸忕厧绶炲┑鐘插楠炴劕鈹戦悙鑸靛涧缂佽弓绮欓獮澶愬灳閺傘儲鐏侀梺鍛婃尫閼冲墎澹曢挊澹濆綊鏁愰崨顔藉創闂佸疇顕ч悧蹇曟閹烘鍋愮�规洖娲ら埛宀勬倵濞堝灝鏋︽い鏇嗗洤鐓″璺侯煬閻撱儵鏌涘☉鍗炵仭婵犮垺鍨垮缁樻媴閸涘﹥鍎撳┑鐐额嚋缁犳捇濡撮崘顔煎耿婵炲棙鐟︾�氳鎱ㄥ鍡楀箻闁宠棄顦甸弻宥囨喆閸曨偆浼岄梺璇″枟閻熲晠骞婇悩娲绘晢闁跨喍绮欒矾闁跨喓鏅槐鎾诲磼濞嗘垼绐楅梺鍝ュУ閻楃娀寮绘繝鍥ㄦ櫜濠㈣泛锕ラ悗顒勬⒑閻熸澘鈷旂紒顕呭灦瀹曢潧顓兼径瀣帾婵犮垼鍩栭敋闁哄鐩弻锟犲川缂堢姵鍠氬┑顔硷攻濡炶棄螞閸愵喖鐓涢柛鎰碉拷顖ょ秮濮婃椽骞栭悙鎻掝瀳闂佺粯鐗曢妶鎼佸箖娴兼惌鏁婇悹鎭掑妿閺夌鈹戦悙鏉戠仸闁荤噦绠戦埢宥夊閵堝棌鎷洪柣鐘充航閸斿苯鈻嶉幇鐗堢厵闁告垯鍊栫�氾拷?  by changhao
								{
									makingsweight += stuff.lianyaoMaterialWeight;
									
									//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎妯恍氱紓鍌氬�烽懗鑸垫叏闁垮绠鹃柨鐔剁矙閺屸�崇暆閿熶粙宕伴弽褏鏆︽繝濠傛－濡查箖鏌ｉ姀鈺佺仭闁烩晩鍨跺璇测槈濮樼偓瀚归柨婵嗗暙婵″ジ鏌ㄩ悢璇残撶紒璇茬墕椤曪絾绻濆顒�宓嗛梺缁樻濞咃綁顢欓弴銏♀拺缂備焦锚婵箓鏌涢幘鏉戝摵闁诡喚鏁诲顕�宕掑鍜冪闯濠电偞鎸婚懝楣冩晝閵壯嶆嫹濮樻剚娼愮紒缁樼箞婵拷闁挎繂鎳愰崢顐︽⒑閸涘﹥鈷愰柣妤冨█楠炲啴鍨鹃弬銉︻潔闂侀潧楠忕槐鏇㈠储闁秵鈷戦梻鍫熶緱濡插爼鏌涢妸銉︽儓闁宠绉瑰畷銊э拷娑欘焽閸樻悂鏌ｆ惔顖滅У闁稿瀚伴幃姗�骞橀鐣屽幐闁诲繒鍋涙晶浠嬪煡婢舵劖鐓冮悹鍥у级閸炲绱掗悩宕囨创鐎殿喗鎸抽幃顏堟晸娴犲鑸归柛锔诲幘绾句粙鏌涚仦鍓ф噯闁稿繐鐬肩槐鎺楊敋閸涱厾浠搁梺璇″灠鐎氫即銆佸☉銏″�烽梻鍫熺〒閵堬箓姊虹拠鎻掑毐缂傚秴妫濆畷鏉课旈崨顓狅紮闂佺粯鍨兼慨銈夋偂閺囥垺鐓欓柤鍓插墮婵¤姤绻涢崨顓犲妞ゎ叀娉曢幉鎾礋閹府鎷风捄顭掓嫹鐟欏嫭绌跨紒缁樼箞瀵宕卞Δ濠傛倯闂佺硶鍓濋悷銉╃嵁閸喍绻嗛柣鎰典簻閿熻姤鐗犲畷婵單旀担鐟板伎闂佸湱铏庨崰鏍矆婢跺绡�濠电姴鍊绘晶娑㈡煟閹捐泛鏋涢柡宀�鍠栭獮鍡氼槾闁圭晫濮风槐鎺楁晸娴犲绀冩い鏃傛櫕閸橆亪姊洪幖鐐插妧闁告劕褰炵槐鏃�淇婇妶鍥ラ柛瀣☉鐓ゆい鎾跺�ｅ☉銏犵闁靛鍨洪～宥呪攽椤旂瓔娈旀俊顐ｇ懃闇夐柛銉墯閳锋帒霉閿濆洨鎽傞柛銈嗙懇閹鈽夐幒鎾寸彋闂佽鍠撻崹浠嬨�佸Δ鍛妞ゆ劑鍊ら崬鐢告⒒娴ｈ姤纭堕柛锝忕畵楠炲繘鏁撻敓锟�?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻鐔虹磼閵忕姵鐏嶉梺绋块椤︻垶鈥﹂崸妤佸殝闂傚牊绋戦～宀�绱撴担鍝勭彙闁搞儯鍔庨崢閬嶆⒑閸濆嫮袪闁稿﹥娲橀弲鍫曞蓟閵夛箑锟藉灚鎱ㄥ鍡楀缂佸妞介弻鈥崇暆鐎ｎ剛鐦堥悗瑙勬礀閻栧吋淇婇悜钘壩ㄧ憸宀勫箖閿濆洨纾介柛灞剧懆閸忓苯鈹戦锟介弨閬嶅箞閵娾晜鍊婚柤鎭掑劜濞呫垽姊洪懞銉冾亪藝闁秵鍋╂い鎾卞灪閻撴洟骞栫划鐧告嫹鐎圭姴鐓橀梺鎹愬吹閸嬬偟鎹㈠☉銏犵婵炲棗绻掓禒楣冩⒑缁嬫鍎戦柛鐘崇墵瀵鈽夐姀鈺傛櫇闂佹寧绻傚Λ娑⑺囬妸鈺傗拺缂備焦蓱鐏忎即鏌ｉ埡濠傜仸鐎殿喛顕ч埥澶愬閻樻牓鍔戦弻銊モ攽閸℃ê娅ｆ繝娈垮枛闁帮絽顫忛搹瑙勫珰闁告瑥顦遍々鐗堢箾鐎涙鐭ゅù婊庝簻椤曪絾绻濆顓熸珳婵犮垼娉涢敃锕傤敊閹烘鐓熼幖娣灮閳句焦銇勯鐐村枠閽樻繂霉閻撳海鎽犻柍閿嬪灴閺屾稑鈹戦崱妤婁紓濡炪値鍋撶粻鎾诲蓟濞戙垹绫嶉柨鐔剁矙瀹曞綊宕稿Δ鍐ㄧウ闂佸憡鍔﹂崰鏍ф纯濠电姰鍨煎▔娑㈡晝閿曞倹鏅繝濠傚暊閺�浠嬫煟閹邦厽缍戦柣蹇ョ畵閺屻劑寮村Δ浣圭彆闁诲酣娼ч妶鎼佸极閹剧粯鏅搁柨鐕傛嫹? by changhao
									if(bag.removeItemById(makings, 1, fire.log.enums.YYLoggerTuJingEnum.tujing_Value_gonghuiyaofanguse, 0, LiveSkillManager.MakeDrug) == 1)
									{
										count ++;
									}						
								}								
							}
						}
					}		
				}
								
				if (count < 2) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柛婵嗗椤忋儵鏌涙惔銊ゆ喚闁糕晝鍋ら獮瀣晜閽樺姹楅梻浣告啞閻熴儵藝娴兼潙绠栨繛鍡樺灩绾捐棄霉閿濆懏鎯堟い搴＄焸閺屾盯濡搁妷褍鐓熼悗娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭花浠嬫⒒娴ｄ警鐒鹃柡鍫墰缁瑩骞嬮敂缁樻櫆闂佽法鍣﹂幏锟�?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柟鑲╁仜婵″ジ鏌涙繝鍌涘仴鐎殿喛顕ч埥澶愬閳哄倹娅囬梻浣瑰缁诲倸螞濞戔懞鍥Ψ瑜忕壕钘壝归敐鍛儓鐎涙繄绱撻崒姘毙㈤柨鏇ㄤ簻椤曪絿鎷犲顔兼倯婵犮垼娉涢敃锝囨閸洘鈷戦柛娑橈攻婢跺嫰鏌涚�ｎ偅宕屾鐐茬箻閺屻劎锟斤綆鍓涢惁鍫濃攽椤旇婊堝磿婵犳艾绠柣鎴ｆ瀹告繈鏌℃径瀣仼闁绘挻鍨剁换婵嬪閿濆棛銆愰梺娲诲墮閵堟悂骞嗘笟锟藉畷濂稿Ψ閿旇瀚介梻浣侯焾閺堫剙顫濋妸锔芥珷婵炴垶姘ㄧ壕濂告倵閿濆骸浜滄繛鎼櫍閺屸剝鎷呴崫銉愩垺銇勯幘鍐叉倯鐎垫澘瀚敓鏂ょ秵閸撴瑩鐛Δ鍛拻濞达絽鎲＄拹锟犳煕鎼存稑锟芥洜鍙呴梺鍝勭▉閸擄箓寮虫潏銊х瘈闁汇垽娼ч崜宕囩磼閼艰埖顥夐悡銈夋煏閸繍妲归柡鍛箖閵囧嫯绠涢幘鏉戞缂備浇顕уΛ婵嬪蓟濞戙埄鏁冮柨婵嗘椤︺儵鎮楅悷鐗堝暈缂佽鍟存俊鐢稿礋椤栨碍顥濋梺鍓茬厛閸犳宕愰姘兼富闁靛牆鎳愮粻鍐测攽椤旂偓鏆╅柟骞垮灩閳规垿宕煎┑鍥╋拷鍐测攽閳藉棗鐏℃俊鐐茬仢椤洭骞嬮敂瑙ｆ嫼缂備礁顑嗛娆撳磿韫囨稒鐓欓柧蹇ｅ亝瀹曞本顨ラ悙鎼疁妞ゃ垺娲熸俊鍫曞炊閳哄闂繝鐢靛仩閹活亞绱為敓鑺ョ箾閸滃啰鎮奸柡渚囧枛閳藉濮�閿涘嫬骞楅梻浣稿暱閹碱偊鏁冮妶澶嬪�堕柣妯肩帛閻撶喖鏌ㄥ┑鍡樻悙闁告ê顕敓鍊燁潐濞测晝鎹㈠┑瀣畺婵炲棗娴氶崥瀣煕閳╁叇姘跺箯瑜版帗鈷戦柣鐔告緲濡插鏌熼搹顐�挎鐐插暣閺屻劎锟斤綆浜堕崵銈夋煟鎼淬垻鈾侀柨鏇ㄥ亞濡叉劙顢楅崟顑芥嫽闂佺鏈懝楣冩晸閼恒儲鍊愮�规洘鍔曢悾锟犲箠婵犲倻绉虹�规洘鍎奸ˇ鎾煛閸☆厾鐣甸柡宀嬬秮婵拷闁靛繆鏅濋崝鍝ョ磽娴ｇ懓濮堟い銊ワ躬瀵鎮㈤崗鑲╁姺闂佹寧娲╅幏鐑芥煛鐎ｎ剙鏋旈柨鐔凤拷鐕佹綈婵炲弶锕㈤幃锟犳晸閻樿尪鎽曞┑鐐村灟閸╁嫰寮崘顔界厽婵☆垵顕х徊璇测攽椤斿ジ鍙勬慨濠冩そ閹稿﹥寰勬繝鍐╊啀闂備礁鎽滄慨鐢告偋閻樺樊鍤曞┑鐘宠壘閸楁娊鏌曡箛鏇炩枅闁哥偠娉涢埞鎴︽偐缂佹ɑ閿┑鐐茬湴閸婃洟鍩㈠鍫▌濠殿喖锕ュ钘夌暦椤愶箑绀嬫い鎺戯功瀹告繄绱撻崒娆掑厡濠殿喚鏁婚獮鎴﹀炊瑜滈崵鏇㈡偣閸ャ劎銈存俊鎻掔墦閺屾洝绠涢弴鐑嗘綌闂侀潧艌閺呮粓鎮￠妷锔剧瘈闂傚牊绋掗ˉ鐐烘煕閿濆牜娼愰柕鍥у椤㈡鏁撴禒瀣庡洭妫冨☉杈ㄧ稁闂佹儳绻愬﹢杈╁閸忛棿绻嗘い鏍ㄧ箓娴滆銇勯幘鍐叉倯缂佺粯绋撻敓鑺ョ♁椤洭鎯岄妶鍚ょ懓顭ㄩ崟顓犵厜闂佹寧绻勯崑鐘电不濞戞ǚ妲堟繛鍡樺姇閸旀帡姊绘笟锟藉鑽わ拷闈涚焸瀹曘垺銈ｉ崘鈺佷簵闂佺懓澧界划顖炴偂閻斿吋鐓熸俊顖氭惈鐢娀鏌ら崜韫偗闁哄本鐩顒傛崉閵婃剬鍜冩嫹鐟欏嫭绀冨┑鐐诧躬閻涱喗鎯旈妸锕�娈熼梺闈涱槶閸ㄨ櫣锟芥艾銈稿缁樻媴娓氼垱鏁梺绋款儐閸旀瑥鐣烽幋婵冩闁靛繒濮烽ˇ顔尖攽椤旂瓔娈ｉ柟椋庡厴閺岋紕浠﹂崜褎鍒涢悗娈垮櫘閸撶喖骞婂Δ鍜佹晬婵﹢妫跨槐鏃堟⒒閸屾瑧顦︾痪缁㈠幘閸掓帡顢涢悙鑼唹闂佹悶鍎洪崜娆撳几娓氾拷閺岀喖宕滆鐢盯鏌￠崨顔藉�愰柡灞诲姂閹倝宕掑☉姗嗕紦? by changhao
				{
					psend(roleid, new SSkillError(SkillConstant.SkillError.OneStuffCannot));
					return true;					
				}
				
				int prob = GetProbByNum(count);
				
				int index = Misc.getRandomBetween(1, 1000);
				
				SLiveSkillMakeDrug msg = new SLiveSkillMakeDrug();
				
				if (index <= prob) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╄兌閿熻棄绠嶉崕閬嵥囬婊呯焼閻庯綆鍋佹禍婊堟煙閸濆嫮肖闁告柨绉甸妵鍕棘閹稿骸顦╃紓浣虹帛缁诲倿顢氶妷鈺傜叆閻庯綆鍋嗛崙锟犳⒑鐠恒劌鏋旈柣娑栧�濆畷鎯邦槾妞ゆ柨妫濆铏圭磼濡櫣浼囨繝娈垮枔閸婃繈骞冮敓鐘参ㄩ柍鍝勫�婚崢鎼佹⒑閹肩偛鍔撮柣鎾茬窔椤㈡棃宕奸悢鍑ゆ嫹閸洘鐓犵痪鏉垮船婢ч箖鏌熼悜绛嬫闁瑰弶鎸冲畷鐔碱敆閸屻倖肖闂傚倷鑳堕…鍫㈡崲閹达附鏅濋柕蹇嬪�曡繚婵炶揪绲芥竟濠傤焽閵娾晜鐓ラ柣鏂垮閻瑦顨ラ悙鎻掓殻闁糕斁鍓濋幏鍛村矗婢跺奔绨撮梻鍌欑濠�閬嶁�﹂崼婵愬晠闁冲搫鎳忛弲婵嬫煕鐏炲墽鈻撻柟宄邦煼濮婅櫣绮欓幐搴㈡嫳闂佽崵鍟欓崶浣告喘閺佸啴宕掑☉姘箥缂備胶鍋撳妯虹暦椤掍胶顩查柟娈垮櫙閹烽鎲撮崟顒傤槰闂佸憡姊归敃銏′繆閻㈢绠涢柡澶庢硶椤斿﹤鈹戦悩缁樻锭婵炶绠戦埢宥夊醇閻旇櫣鐦堥梺姹囧灲濞佳勭濠婂嫪绻嗘い鎰剁悼閹冲洦顨ラ悙鏉戝妤犵偞鐗楅幏鍛潰鐏炴繃娲熼幃宄邦煥閸涱収鏆柣銏╁灡椤ㄥ﹪骞冮敓鐘参ㄩ柍鍝勫�婚崢浠嬫⒑閸濆嫭宸濋柛瀣洴閺佹捇鎸婃径瀣闂佽法鍠曟慨銈夋偄椤掑嫬绠柨鐕傛嫹?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁橈耿瀵鏁愭径濠勵吅濠电姴鐏氶崝鏍礊濡ゅ懏鈷戦悹鎭掑妼閺嬫瑦淇婇銏狀伃鐎规洘鍔欏畷绋款渻绾攱瀚瑰ù锝呭濞尖晠鏌ょ粙璺ㄤ粵婵炲懌鍨虹换娑氾拷鐢殿焾瀛濆銈嗗灥濞层倝鎮鹃崹顐ょ懝闁跨喍绮欓幃锟狀敃閿曪拷閻愬﹪鏌曟繛褝鎷锋俊淇卞姂濮婃椽宕崟顒�娅ら梺璇″枛閸婂灝顕ｆ繝姘╅柍鍝勫�告禍鐐烘⒑缁嬫寧婀扮紒瀣灴椤㈡棃鏁撻敓锟�? by changhao
				{
					fire.pb.item.SFoodAndDrugEffect jinchuang = (SFoodAndDrugEffect) fire.pb.item.Module.getInstance().getItemManager().getAttr(LiveSkillManager.ITEM_TYPE_DRUG_JIN_CHUANG);
					int jinchuangweight = jinchuang.getLianyaoWeight() - skilllevel * 2 - makingsweight;
					int drugtotalweight = LiveSkillManager.getInstance().drugtotalweight;
					
					int randomValue = Misc.getRandomBetween(0, jinchuangweight + drugtotalweight - 1);
					
					int curWeight = 0;
					
					int drug = LiveSkillManager.ITEM_TYPE_DRUG_JIN_CHUANG; //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存鐐达耿瀹曪絾寰勫Ο鐑╂瀳闂傚倷鑳剁划顖滄暜閹烘鏅濇い蹇撶墕閽冪喖鏌￠崶鈺佹灁缂佺娀绠栭弻锝夊箛闂堟稑顫梺缁樼箖濮婅崵妲愰幘瀛樺闁告繂瀚烽敓钘夌焸閺屾盯濡搁妷褍鐓熼悗娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭花浠嬫⒒娴ｄ警鐒鹃柡鍫墰缁瑩骞嬮敂缁樻櫆闂佽法鍣﹂幏锟�?缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁诡垎鍐ｆ寖闂佺娅曢幑鍥灳閺冨牆绀冩い蹇撳鐎氬綊鏌ㄥ┑鍡欏嚬缂併劌銈搁弻鐔兼儌閸濄儳袦闂佸搫鐭夌紞渚�銆佸锟介幃娆撳箹椤撶噥妫ч梻鍌欑窔濞佳兾涘▎鎴炴殰闁圭儤顨愮紞鏍ㄧ節闂堟侗鍎愰柛濠囨敱閵囧嫰骞掗悙鏉戭伓婵＄偑鍊曠换鎰版偉閻撳寒娼栫紓浣股戞刊瀵哥磼濞戞﹩鍎忔繛鍫熷姍濮婃椽宕妷銉︾彙闂佺顑呴敃銈夋偩閻戣棄绠氶梺顓ㄩ檮浜涚紓鍌氬�烽悞锕傚礉閺嶎偆鐭欓柟杈捐吂閿熻姤妫冨畷姗�顢欓崲澹洦鐓曢柍鈺佸枤閻掕姤銇勯敂鍝勫姦婵﹥妞介幃鐑藉级閹稿孩鐦ｇ紓鍌欒兌缁垶鏁冮姀銈呂ュù锝囩《閺嬪酣鏌熼幆褏锛嶉柣顐㈠濮婃椽宕滈幓鎺嶇敖闂佸摜鍠庡锟犵嵁韫囨拋娲敂閸涱亝瀚肩紓浣鸿檸閸樺ジ骞婃惔銏㈩洸鐟滅増甯楅悡鏇㈡倵閿濆骸浜炴繛鎻掝嚟閿熷�燁潐濞叉鎹㈤崼銉у祦婵鎷锋い銏＄懇閹墽浠﹂挊澶岀杽闂傚倸鍊峰ù鍥綖婢舵劕纾块柟鍓佺摂閺佸銇勯幘鍗炵仼缂佺姷濞�閺屾稑鈽夐崡鐐典化缂佺偓鍎抽崥瀣Φ閸曨垰绫嶉柛銉戝倹鐫忓┑鐘媰瀹ュ拋娲梺璺ㄥ枎閿熺晫鍣ュ鎰箾閸欏鐭掔�规洑鍗冲浠嬵敇濠婃劖瀚瑰ù锝囩《濡插牊淇婇鐐存暠妞ゎ偄绉撮埞鎴︻敊閺傘倓绶甸梺鍛婃尰閻熝呭垝婵犳碍鍊锋繛鏉戭儐閺傦拷闂備胶绮敋闁诲繑宀稿鎶藉煛娴ｅ弶鏂�闂佺粯鍨靛ú锔撅拷姘愁潐缁绘繈鎮介棃娑楃钵闂佸憡鐗滄繛锟界�规洘顨婇幃娆擃敆閸屾顫嶉梺鍓х帛閻楃娀寮诲☉姗嗙叆闁跨喍绮欓幃鐐烘晝閸屾氨鏌у┑鐘诧工閸犳艾銆掓繝姘厪闁割偅绻冮崳鐣岀磼閻樺崬宓嗛柡宀�鍠栭幖褰掝敃閵忕媭娼曠紓鍌欑贰閸犳氨鍒掗鐐参ч柨婵嗩槸缁�鍐煃閸濆嫬鏆欐鐐茬墛娣囧﹪鎮欓鍕舵嫹閺嶎厼绀夐柨鏇炲�哥壕濠氭煕閺囥劌澧繛鍛█閺岀喎鈻撻崹顔界亾缂佹儳澧介崢褔鈥﹂崸妤佸殝鐎电増顨忔禍婊堝煝瀹ュ拋鍚嬪璺侯儑閸樻悂鎮楅惂鍛婂闁诲函缍嗛崜娑㈡晬閻斿摜绠鹃悗鐢殿焾椤庢挸鈹戦垾铏枠妤犵偛绻橀幃鈺呭垂椤愩垻褰撮柣鐔哥矊濞寸兘鏁撻懞銉や孩妞ゎ偄顦遍幑銏犫攽鐎ｎ偒妫冨┑鐐村灥瀹曨剟宕滄导瀛樷拺闁告繂瀚烽崕搴ｇ磼閼搁潧鍝虹�殿喖顭烽幃銏ゆ偂鎼达綆妲堕柣鐔哥矊缁绘帡寮灏栨闁靛骏绱曢崢鎼佹⒑閸涘﹣绶遍柛鐘愁殜瀹曟劙骞囬悧鍫㈠幐闁诲繒鍋犻褎鎱ㄩ崒鐐寸厵妞ゆ柨鎼敓鑺ョ箓閻ｇ兘骞掗幋鏃�顫嶅┑顔筋殔濡梻妲愰敓锟�? by changhao
					if (randomValue < jinchuangweight) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柣妯荤垹閸モ晛褰勯梺鎼炲劘閸斿秹鎮￠妷锔轰簻闊洦纰嶇涵楣冩煃鐟欏嫬鐏存い銏＄懇閹矂顢曢锛勭泿闂佷紮绲块崗姗�銆佸Δ鍛妞ゆ劑鍨规禍鍫曟⒑鐠囧弶鎹ｉ柡浣筋嚙椤洦绻濆顒傤唵婵＄偛顑呯�涒晠宕伴崱娑欑厱闁哄洢鍔屾晶鐗堛亜閿旇鏋涙い顏勫暣婵¤埖鎯旈垾鑼泿婵＄偑鍊х粻鎾寸閸洖鏋侀柟鎯ь嚟椤╃兘鎮楅敐搴′簼闂佹鍙冨娲濞戞艾鈪卞銈庡幖閻楁捇銆佸鑸垫櫜濠㈣泛锕崬鍫曟⒑閸濆嫭宸濋柛瀣枛椤㈡ê煤椤忓應鎷虹紓鍌欑劍閳笺倝顢旈崼鐔凤拷鑸垫叏濮楀棗鍔柟鐑樻尰閸庣喖鏌曡箛瀣伄闁伙箑鐗撳鍝勑ч崶褏浼堝┑鐐板尃閸曨収娴勯梺鍐叉惈閹冲繘鎮″▎鎰闁煎ジ顤傞崬铏圭磼閵娧勬珪闁跨喕妫勯悘姘熆濮楋拷閺佸啴顢旈崼婵堫唶婵犵數濮撮崯顐ゆ閻愬绠鹃柟瀵稿仧閻滃鏌熸搴″幋鐎规洜顭堣灃濞达絽寮剁�氬吋淇婇悙顏勶拷鏍暜椤忓牆绠瀣捣绾剧厧顭跨捄渚剳闁告瑱鎷烽梻浣芥〃閻掞箓骞戦崶顒�绠板┑鐘插暙缁剁偤鎮楅敐搴濈凹闁伙絽顭峰缁樻媴閻戞ê娈岀紒鍓ц檸閸樼晫鎹㈠☉銏℃櫢闁兼亽鍎禍婊堟煏韫囧﹥顫婃繛鍫熸礋閺岀喎鐣￠悧鍫濇畻閻庤娲忛崝宥囨崲濠靛绀嬮柤鎼佹涧椤忚埖淇婇妶蹇曞埌闁哥噥鍨堕崺娑㈠箳閹存梹鏂�闂佺粯蓱閻擄繝顢撳Δ锟介湁婵犲﹤瀚惌瀣磼缂佹銆掗柟椋庡Ь椤﹀弶銇勯埡濠傚缂佽鲸甯￠、娆撴偩鐏炴儳娅氭俊銈囧Х閸嬫盯顢栨径鎰瀬闁告劦鍠楅弲绋棵归悩宸剰缂侊拷閸曨垱鐓熸俊顖濇濠�鎾煥閻旇袚閻㈩垱甯￠敐鐐测攽鐎ｎ偄锟介攱銇勯幒鐐村濡炪倕绻愰悥鐓庮潖缂佹ɑ濯撮柛娑橈攻閸庢捇姊哄ú璇插闁靛牏顭堥悾閿嬪閺夋垵鍞ㄩ悷婊冪箻瀵娊鏁傞悾宀�鐦堟繝鐢靛Т閸婂綊鏁嶅鍡曠箚闁哄被鍎抽悾娲煛瀹�瀣М濠殿噯鎷烽梺瀹犳〃閼宠埖绂掗銏♀拺闁绘垟鏅滃▍鎾绘煕閵娿劍纭炬い鏇稻缁绘繂顫濋鐔哥彸濠电姰鍨煎▔娑㈡晝閿曞偆鏁婇柟鐑橆殕閳锋垿鏌涘☉姗堝伐濠殿喖鏈妵鍕即閻旇櫣鐓夊Δ鐘靛仜缁绘﹢骞冨鍫熷癄濠㈣埖鍔栭弳鍛節瀵伴攱婢橀敓绐栧洤绠柣鎴ｅГ閻撱垽鏌涢幇鍏哥盎闁哄鐩弻鈥崇暆鐎ｎ剛袦閻庢鍣崳锝呯暦閹烘埈娼╅弶鍫厛閸氬洭姊婚崒娆戭槮缂傚秴锕棢闁规崘顕х粈鍌涙叏濡ゅ瀚瑰Δ鐘靛仜閸熸挳骞愭繝鍐ㄧ窞闁糕剝顭囨禍鏍⒑閼姐倕校濞存粈绮欏畷婵堜沪閻愵剙寮挎繝闈涘�搁幉锟犲煕閹达附鐓曟繝闈涙椤忣偊鏌嶇拠鑼伇缂佽鲸甯炵槐鎺懳熼懖鈺冩殼婵＄偑鍊ら崑鍕崲濮楋拷楠炴牞銇愰幒鎴炲祶濡炪倖鎸炬刊瀵告閸欏绡�缁剧増蓱椤﹪鏌涢妸锕�鈻曠�规洘娲熸俊鍫曞炊閵娿儳褰撮梻浣虹帛閸旀寮崫銉ヮ棜闁芥ê顥㈣ぐ鎺撴櫜闁告侗鍠楅崕鎾绘煛瀹ュ繒绡�婵﹨娅ｇ槐鎺戭潨閸℃鏆┑鐘愁問閸犳骞愰幎濮愶拷浣割潩閼稿灚娅滈梺绯曞墲閻熝囨儊閸績鏀芥い鏃�鏋绘笟娑㈡煕鎼存繄绁锋い锕�寮堕妵鍕敇閳╁啰銆婇梺鍦嚀鐎氼厾绮悢纰辨晬婵﹩鍓欓ˉ搴♀攽閻樺灚鏆╅柛瀣洴楠炲﹤鐣濋崟顐㈢�梺鑺ッˇ钘夘焽閺嶎厽鐓ｉ煫鍥ㄥ嚬濞兼劗锟借娲栭ˇ鐢稿蓟閺囩喓绠鹃柛顭戝枛婵洟姊虹紒妯肩細闁搞劏妫勯～蹇撁洪鍛画闂佸搫顦扮�笛囶敊閿熶粙姊绘担鐑樺殌闁搞倖鐗犻獮蹇涙晸閿燂拷? by changhao
					{

					}
					else
					{
						//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓哄┑鐐叉缁绘帗绂掓ィ鍐┾拺缂佸顑欓崕宥夋煕婵犲啰绠炵�殿喖顭峰鎾偄閾忚鍟庨柣鐔哥矊缁夊綊鐛繝鍐╁劅闁靛鍎叉潏鍫濃攽鎺抽崐鏇㈠箠韫囨稑鐓曢柟瀵稿Х绾惧ジ鎮楅敐搴″箺缁绢厼鐖奸弻锝堢疀濞戞鍠氶梺鍝勬湰缁嬫捇鏁撻弬銈囩У闁稿妫濋崺銉﹀緞鐎ｃ劋绨婚梺鍝勫�藉▔鏇犵不娴煎瓨鐓冮悷娆忓閻忓锟借娲栭悥鍏间繆閻戣棄围闁搞儮鏅滈弲銊╂⒒閸屾艾锟介绮堟笟锟介獮鏍敃閿曪拷閻ゎ喗銇勯幇銊﹀婵炲樊浜滃洿闂佸壊鍋掗崑鍛掗幇顓犵瘈缁炬澘顦辩壕鍧楁煕鐎ｎ偄鐏寸�规洘鍔欏鎾偐閸愭彃绨ラ梻浣告贡閸庛倝銆冮崨顖滅幓婵°倕鎳忛悡娑氾拷瑙勬惄閸犳牠寮甸鍌滅閹兼番鍨荤弧锟介梺姹囧灲濞佳勭墡闂備浇鍋愰幊鎾存櫠閼恒儳鐝堕柡鍥ュ灩缁�鍌炴煠濞村娅囨い鏃�娲熷铏瑰寲閺囩偛鈷夐梺鎸庡哺閺岋綀绠涘顐㈡儓缂備浇椴哥敮锟犵嵁閸ヮ剦鏁囩憸搴ㄦ偪娴ｇ硶鏀芥い鏃傘�嬮弨缁樹繆閻愯埖顥夐柣锝囧厴婵℃悂鏁傞崜褏妲囬梻浣告啞濞诧箓宕滃▎蹇婃瀺闁瑰濮风壕浠嬫煕鐏炲墽鎳嗛柛蹇撶灱缁辨帡顢氶崨顓犱化闂佽桨绶￠崳锝夌嵁閹烘嚦鏃�绻濋崘鈺傜彣闂傚倷绶氬褔篓閿熻棄鈹戦垾铏窛鐎殿啫鍥ㄦ櫢濞寸姴顑嗛埛鎴︽煕濞戞﹫宸ュ┑顕嗙畱闇夋繝濠傜凹缁ㄧ粯銇勯锟介敃顏堛�佸鑸垫櫢闁芥ê顦藉鏍ㄧ箾瀹割喕绨荤�瑰憡绻傞埞鎴︽偐閹绘帩浠卞┑鈩冨絻閻楁挸顫忓ú顏勭閹兼番鍨婚埞娑氱磽娴ｅ搫校闁瑰憡鎮傞幃楣冩倻閽樺娼婇梺闈涚墕閹虫劙顢欐繝鍥ㄢ拺闁荤喐澹嗛幗鐘虫叏婵犲倻绉虹�殿噮鍓熼弫鎾寸鐎ｎ偀鎷绘繛杈剧秬濞咃絿鏁☉娆嶄簻妞ゆ挾鍋熸晶锔姐亜閵徛ゅ妞ゎ厹鍔戝畷姗�骞嗚濞呭﹪姊绘笟锟藉褔藝椤愶箑鐤炬繝濠傜墛閸嬪倿鏌ｉ弮鍫熸珳缂佽妫濋弻鏇㈠醇濠靛牏顔夐柣搴㈣壘缂嶅﹤顫忓ú顏勭閹兼番鍨归ˇ鈺傜箾鐎涙鐭嬬紒顔芥崌楠炲啯銈ｉ崘鈺侊拷濠氭煠閹帒鍔氬ù鐘虫そ濮婃椽宕ㄦ繝鍕ㄦ闂佹寧娲忛崕閬嶅煝瀹ュ顫呴柕鍫濇閹锋椽鏌ｉ悩鍏呰埅闁告柨鑻埢宥夊箛閻楀牏鍘甸梺鍛婂灟閸婃牜锟芥熬鎷�? by changhao
						curWeight = jinchuangweight;
						for (fire.pb.item.SFoodAndDrugEffect e : LiveSkillManager.getInstance().druglist)
						{
							curWeight += e.getLianyaoWeight();
							
							if (randomValue < curWeight)
							{
								drug = e.getId();
								break;
							}
						}						
					}
					
					fire.pb.item.drug.GeneralDrug drugitem = (fire.pb.item.drug.GeneralDrug)fire.pb.item.Module.getInstance().getItemManager().genItemBase(drug, 1);
					//drugitem.setFlag( fire.pb.Item.BIND);
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柣妯荤垹閸ャ劎鍘遍梺闈涱槶閸ㄥ搫鈻嶉崶顒佺厱婵☆垳鍘ч埢鍫熸叏婵犲嫮甯涢柟宄版嚇閹煎綊鎮烽幍顕呭仹闂傚倷鐒﹂幃鍫曞礉瀹�鍕亯闁绘挸瀵掗崵鏇㈡煙闂傚鍔嶉柛銈嗗浮閺屾洟宕煎┑鍥х獩濡炪倧瀵岄崹璺侯潖濞差亜浼犻柛鏇ㄥ枤濡俱劑鎮楅惂鍛婂闂佽法鍠嶇划娆忕暦椤掑嫭鍋ㄩ柛娑橈功閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹ê锟藉爼鐓崶褜鍎忓┑顔煎�婚敓鍊燁潐濞叉鎹㈤崼銉ョ畺闁靛繈鍊曠粈鍌炴煠濞村娅呮鐐村姍濮婄粯鎷呴搹骞匡拷濠囨煕閹惧绠炵�规洘绻堝鎾閳╁啯顏熼梻浣稿悑娴滀粙宕曢懠顒傜焼閻庯綆浜栭弨浠嬫煃閳轰礁鏆為悘蹇ラ檮椤ㄣ儵鎮欓弶鎴炶癁濡ょ姷鍋涢澶愩�佸锟介幃銏犵暋閺夊灝閲滈梻鍌氬�搁崐鐑芥嚄閸撲礁鍨濇い鏍仜缁�澶愭煥閺囩偛锟藉摜绮堥崼鐔虹闁糕剝蓱閹嫰鏌℃担绋匡拷鍧楀蓟閵堝洨鐭欓柛顭戝枟閸婂海绱撴担绛嬪殭婵☆偅绻堝濠氬即閵忕娀鍞跺┑鐘绘涧濞诧箓骞冨▎鎾寸厱闁绘柨鎲￠崐鎰叏婵犲懏顏犵紒顔界懇瀹曞綊顢氶崨顓炍ㄩ梻鍌欑劍閹爼宕濈仦绛嬬劷闁跨喓濮甸崑妯汇亜閺冨洦纭堕柣銈忔嫹婵犵數鍋為崹鍫曟偡閿曪拷閳诲秹濮�閵堝棌鎷洪柣鐘充航閸斿苯鈻嶉幇鐗堢厵闁告垯鍊栫�氾拷?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎妯恍氶梻鍌欒兌椤牏鎮锕�绀夐幖娣妼缁犵喐鎱ㄥ┑鍡欑伇闁汇倧鎷烽梻浣告惈閸燁偊宕愰弰蹇嬩汗濡わ絽鍟埛鎴︽煕濠靛棗顏柛灞诲姂閺屾盯鍩℃担鍓蹭純閻庢鍣崑濠傜暦閸洦鏁嗗ù锝呮惈鐢箖姊绘繝搴′簻婵炶绠戠叅闁哄诞鍕槑闂傚倸鍊风粈渚�骞栭锔藉創婵炲棙鎸哥粈鍐煟閹伴潧澧柣锔界矒濮婄粯绗熼敓钘夘焽瑜旈幃褔宕卞銏＄☉铻栧ù锝囨嚀瀵潡鎮峰鍕叆妞ゎ偄绻戠换婵嗩潩椤掑偆妲规俊鐐�栭崝鎴﹀春閸曨剙顕遍柛鎰靛枟閸婄敻鎮峰▎蹇擃仾缂侊拷閸愵喗鐓曢柕濠忕畱椤曟粌菐閸パ嶈含闁硅櫕绮撳Λ鍐ㄢ槈濮樿京宓侀梻浣筋嚙閸戠晫绱為崱娑樼婵炲棙鎸惧畵浣猴拷骞垮劚椤︿即鍩涢幋锔藉仯闁搞儜鍐獓闂佸湱娅㈢紞渚�寮婚埄鍐╁閻熸瑥瀚敓鑺ュ姍閺屽秹濡烽婊呮殼閻庤娲滈崢褔鍩為幋锕�鐐婇柕濞у嫷娼犲┑鐘垫暩婵兘寮崨濠冨弿闁绘垵顫曢敓钘夊�块幐濠冪珶閳哄绉�规洏鍔戝鍫曞箣閻欏懐骞㈤梻鍌欑濠�閬嶅磿閵堝锟藉啴宕ㄩ弶鎴濈�梺绋跨灱閸嬬偤鎮″▎鎾寸厵妞ゆ牗绮岄。鍏笺亜閵夈儺妲虹紒杈ㄥ浮閹晠妫冨☉娆戜邯闂備礁鎼惉濂稿窗閺嵮屾綎闁煎鍊ч幏鐑芥濞戞﹩妫屽┑鈥虫▕閸犳牠鍩為幋锕�鐓￠柛鈩冦仦缁ㄥジ姊洪幐搴㈢８闁搞劋绮欓幃浼搭敋閿熻棄顕ｆ禒瀣垫晝妞ゆ帊绀侀璺衡攽閻愭潙鐏︽い蹇庡嵆楠炲鎮╂潏鈺佸⒕濠电偛顕崢褔鎮洪妸鈺傚亗闁绘棁鍋愰崣鎾绘煕閵夋垵瀚畷宕囩磽娴ｇ懓濮堟慨濠傜秺楠炲牓濡搁敂鍓х槇闂佸憡鍔忛弬鍌涚閵忕姭鏀介柍钘夋娴滄粓鏌涢悤浣镐喊闁糕斂鍎插鍕節鎼淬垹鍏婇梺鍝勵槸閻楀啴寮插鍐剧唵闁哄稁鍘介埛鎺楁煕鐏炲墽鎳嗛柛蹇撴湰閵囧嫰顢橀悙闈涒叺闂佽桨绀侀崯瀛樹繆閻戣棄唯闁告劑鍔嶉幆鍫熴亜椤撴粌濮傜�规洖銈搁幃銏ゅ川婵犲簼鎴烽梻鍌氬�风粈渚�宕ョ�ｎ偆顩插ù鐘差儏绾惧潡鎮楀☉娆樼劷闁绘繆鍩栨穱濠囶敍濞戞碍鑿囨繛瀛樼矋缁捇寮婚妸鈺佺睄闁稿本鐭竟鏇㈡⒑閸濆嫭锛嶉柛鎾寸洴閺佹捇鎳為妷顔兼櫛闂佸摜濮甸〃鍛祫闂佸湱鍎ら¨鍌炲炊椤掞拷缁�鍫澝归敐鍫燁仩闁挎稒绮撳铏圭磼濡浚浜炴竟鏇㈩敇閵忕姷鍙�婵犮垼娉涢鍐╃濠婂嫨浜滈柟鏉垮閹偐绱掗悩闈涗户闁跨喎锟界噥娼愭繛鍙夛耿閵嗗啯绻濋崶褏鐤囬梺鍝勭▉閸樺ジ鎮″☉銏＄厱闁归偊鍓欓弳鏃堟煕鎼淬劍娑фい顐㈢箲缁绘繂顫濋鍌︾床婵犵數鍋涘Λ娆撳春閸惊锝夘敋閿熻棄顫忓ú顏勬嵍妞ゆ挻绋掔�氭盯姊虹粙娆惧剰闁挎洦浜幃浼搭敊閻ｅ瞼鐦堥梺鍛婁緱閸ㄦ娊寮剁粙搴撴斀闁绘劖娼欓悘锔姐亜椤撶偞鍠橀柟顔藉劤鐓ゆい蹇撴噳閹疯櫣绱撴担鍓插創婵炲娲熼幃姗�鏌嗗鍡欏幈闁诲函缍嗛崑鍡椕洪幘顔界厵闂佸灝顑呴悘鎾煙椤斿搫鐏茬�规洘顨婇幊鏍煛娴ｅ摜顔戦梻鍌氬�风粈渚�骞栭锕�鐤い鎰剁畱绾惧綊鏌熼梻瀵稿妽闁稿骸绉归弻鐔告綇妤ｅ啯顎嶉梺缁樻尰閻熝囨晸閻ｅ本鍤�閻庢凹鍘奸…鍨熸担鏇稻缁绘繂顫濋鐘插笚闂備浇濮ら敋妞わ箒妫勫嵄闁归棿鐒﹂悡鍐偣閸ヮ亜鐨洪弫鍫濐渻閵堝啫鐏い顓炵墦钘濋弶鍫氭櫇绾惧ジ鏌曟繛鍨姌闁稿鍨介弻鈥崇暆閿熶粙宕伴幇顔剧當闁绘梻鍘ч崹鍌涖亜閺冨倵鎷℃繛鐓庨叄閺岋絾鎯旈妶搴㈢秷濠电偛寮堕悧鐘诲箖閵夛妇闄勯柟鑲╁剳閹烽攱鎷呴懖婵囨⒐閹峰懘鎮烽柇锔兼嫹閹剧粯鈷戦柛娑橈功缁犳捇鎮楀鐓庡缂侇喖顭锋俊鐑芥晜閸撗呮闂備焦鐪归崹钘夘焽瑜庣粋鎺楀煛閸涱喚鍘靛┑鐐跺蔼椤斿﹦鑺遍悾宀嬫嫹閸偅绶查柨鏇樺劤缁骞掗弮鎾村闁挎繂绨肩花浠嬫煛鐏炵晫澧︽慨濠呮缁棃宕卞Δ锟介瀛樼箾閸喐鈷掔紒杈ㄥ浮閹晠妫冨☉鎺撶�伴梻浣虹帛閹尖晠宕戞繝鍌滄殾闁割偅娲栨儫闂佹寧妫冮弫顕�寮澶嬧拻濞达絿鍎ら崵锟介梺鎼炲灪閻撯�崇暦閺屻儱钃熼柕澶樺灣缁嬪繐鈹戦悩缁樻锭妞ゆ垵妫濆畷鎰版煥鐎ｃ劋绨婚梺纭呮閸嬬偟锟芥氨鎳撻—鍐Χ閸涘宕梺鐟板殩閹凤拷? by changhao
					
					fire.pb.common.SCommon common = ConfigManager.getInstance().getConf(fire.pb.common.SCommon.class).get(159);
					int delta = Integer.parseInt(common.value);					
					
					int quality = Misc.getRandomBetween(Math.max(skilllevel - delta, 1), skilllevel);
					drugitem.setQuality(quality);
					
					if (bag.isFull())
					{
						fire.pb.item.ItemMaps tempBag = fire.pb.item.Module.getInstance().getItemMaps(roleid, BagTypes.TEMP, false);
						if (tempBag.doAddItem(drugitem, -1, LiveSkillManager.MakeDrug, fire.log.enums.YYLoggerTuJingEnum.tujing_Value_gonghuiyaofang, 2) != AddItemResult.SUCC)
						{
							return false;
						}
					}
					else
					{
						if(bag.doAddItem(drugitem, -1, LiveSkillManager.MakeDrug, fire.log.enums.YYLoggerTuJingEnum.tujing_Value_gonghuiyaofang, 2) != AddItemResult.SUCC)
						{
							return false;
						}						
					}
									
					msg.itemid = drug;
					msg.ret = 0;
					
					mkdb.Procedure.psendWhileCommit(roleid, msg);
				}
				else //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╄兌閿熻棄绠嶉崕閬嵥囬婊呯焼閻庯綆鍋佹禍婊堟煙閸濆嫮肖闁告柨绉甸妵鍕棘閹稿骸顦╃紓浣虹帛缁诲倿顢氶妷鈺傜叆閻庯綆鍋嗛崙锟犳⒑鐠恒劌鏋旈柣娑栧�濆畷鎯邦槾妞ゆ柨妫濆铏圭磼濡櫣浼囨繝娈垮枔閸婃繈骞冮敓鐘参ㄩ柍鍝勫�婚崢鎼佹⒑閹肩偛鍔撮柣鎾茬窔椤㈡棃宕奸悢鍑ゆ嫹閸洘鐓犵痪鏉垮船婢ч箖鏌熼悜绛嬫闁瑰弶鎸冲畷鐔碱敆閸屻倖肖闂傚倷鑳堕…鍫㈡崲閹达附鏅濋柕蹇嬪�曡繚婵炶揪绲芥竟濠傤焽閵娾晜鐓ラ柣鏂垮閻瑦顨ラ悙鎻掓殻闁糕斁鍓濋幏鍛村矗婢跺奔绨撮梻鍌欑濠�閬嶁�﹂崼婵愬晠闁冲搫鎳忛弲婵嬫煕鐏炲墽鈻撻柟宄邦煼濮婅櫣绮欓幐搴㈡嫳闂佽崵鍟欓崶浣告喘閺佸啴宕掑☉姘箥缂備胶鍋撳妯虹暦椤掍胶顩查柟娈垮櫙閹烽鎲撮崟顒傤槰濠电姰鍨洪敃銏ゅ春閵夛箑绶為柟閭﹀墻濞煎﹪姊虹紒妯曟垿顢欓弽顓炶埞闂傚牊绋堥弨浠嬫煥濞戞ê顏╁ù鐘崇矋閵囧嫰骞嬪┑鍥ф畻閻庤娲橀悷锔剧矉閹烘棑鎷烽敐搴濈敖妞ゆ柨妫濆铏圭磼濡櫣浼囧┑鈽嗗亜鐎氭澘鐣疯ぐ鎺戠＜婵炴垶鐗旂花濠氭⒑鐟欏嫭绶插褍閰ｉ獮鍐╃附閸涘﹦鍘遍梺瑙勬儗閸ㄥ磭寮ч敓浠嬫⒑閸濆嫮鐒跨紒鏌ョ畺楠炲棝寮崼婵愭綂闂佺粯锚瀵爼鎯侀幘缁樷拻濞达絽鎲￠崯鐐烘煥濮樿埖鐓忛柛顐ゅ枑閸婃劙鏌涢妸鈺冪暫闁轰礁鍟村畷鎺戭潩閸楃儑鎷烽悙宸富闁靛牆鎳愮粻鐗堜繆椤愶絿娲寸�殿喖澧庣划娆愭償閹惧瓨鏉搁梻浣虹帛閸旀牕顭囧▎鎾村�堕柛妤冨剱濞撳鎮楀☉娅虫垿宕愰幇顕嗘嫹濞堝灝鏋熺憸鏉垮暣閸╃偤骞嬮悪鍛闁挎繂楠告禍鎰版煙闁垮銇濇慨濠傤煼瀹曟帒顫濋崡鐑嗘澑濠电偞鎸荤喊宥夈�冮崨顓炵カ闁荤喐绮庢晶妤冩暜濡ゅ懏鍋傞柡鍥ュ灪閻撴盯鏌涚仦鍓х煀濞寸姵绮嶇换娑氫沪閸屾熬鎷峰Δ鍐ㄥ灊濠电姵鍑归弫宥夋煟閹邦剦鍤熼柛娆忔濮婅櫣绱掑Ο鑽ゎ槬闂佺锕ゅ﹢閬嶆晸閼恒儳鍟查柟鍑ゆ嫹 by changhao
				{
					msg.itemid = 0;
					msg.ret = 1;
					
					mkdb.Procedure.psendWhileCommit(roleid, msg);				
				}
				
				return true;
			}
		};
		
		liveskillmakedrug.submit();	
		
	}
	
	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柣妯荤垹閸ャ劎鍘遍梺闈涱槶閸ㄥ搫鈻嶉崶顒佺厱婵☆垳鍘ч埢鍫熸叏婵犲嫮甯涢柟宄版嚇閹煎綊鎮烽幍顕呭仹闂傚倷鐒﹂幃鍫曞礉瀹�鍕亯闁绘挸瀵掗崵鏇㈡煙闂傚鍔嶉柛銈嗗浮閺屾洟宕煎┑鍥х獩濡炪倧瀵岄崹璺侯潖濞差亜浼犻柛鏇ㄥ枤濡俱劑鎮楅惂鍛婂闂佽法鍠嶇划娆忕暦椤掑嫭鍋ㄩ柛娑橈功閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹ê锟藉爼鐓崶褜鍎忓┑顔煎�婚敓鍊燁潐濞叉鎹㈤崼銉ョ畺闁靛繈鍊曠粈鍌炴煠濞村娅呮鐐村姍濮婄粯鎷呴搹骞匡拷濠囨煕閹惧绠炵�规洘绻堝鎾閳╁啯顏熼梻浣稿悑娴滀粙宕曢懠顒傜焼閻庯綆浜栭弨浠嬫煃閳轰礁鏆為悘蹇ラ檮椤ㄣ儵鎮欓弶鎴炶癁濡ょ姷鍋涢澶愩�佸锟介幃銏犵暋閺夊灝閲滈梻鍌氬�搁崐鐑芥嚄閸撲礁鍨濇い鏍仜缁�澶愭煥閺囩偛锟藉摜绮堥崼鐔虹闁糕剝蓱閹嫰鏌℃担绋匡拷鍧楀蓟濞戙埄鏁冮柨婵嗘椤︺劑姊洪幎鑺ユ暠閻㈩垱甯″﹢渚�姊洪幐搴ｇ畵闁瑰啿绻樺畷顖炴倷閻戞鍘靛銈嗙墬濮樸劍鏅堕敃鍌涚厸閻忕偠顕ч敓鑺ユ礈閸欏懘鏌ｉ悩鍙夌┛閻忓繑鐟︾粋鎺楀煛閸涱喚鍙勯梺鐓庮潟閸婃洘绂掗敂鍓х＜缂備焦顭囩粻鐐翠繆椤愩垹鏆欓柍钘夘樀瀹曪繝鎮欓幓鎺濇闂備浇顕у锕傦綖婢舵劕绠伴柣鎴ｅГ閸婂潡鏌ㄩ弴鐐诧拷鍝ョ不閻愮儤鐓忓┑鐐茬仢閸撳鏌￠崘銊ヤ喊闁归鍏橀弫鎰償閳ヨ尙鐩庢俊鐐�曠换鎰版偉婵傜钃熼柨婵嗘閸庣喖鏌曢崼婵嗩劉缂傚秴鐗嗛埞鎴︽倷閹绘帞楠囬梺鎸庢磸閸ㄨ棄顕ｉ锕�绀冩い鏃傗拡濞煎﹪姊洪棃娑氬婵炲眰鍊楃划濠囨晝閸屾稈鎷洪柣鐔哥懃鐎氼剛绮堥崘鈹夸簻闁哄洤妫楅幊鎰▔瀹ュ鐓欓柟顖涙緲琚氶梺缁樻尰閻╊垶寮诲☉銏犵疀妞ゆ挾鍎愰崵瀣煟鎼淬垼澹樼紓宥咃工椤繘宕崟顓熸闂佹悶鍎弲娑氱箔閳ユ枼鏀介柣鎰硾閻ㄦ椽鏌涢悩鏌ュ弰闁挎繄鍋犵粻娑㈠籍閸屾粎妲囨繝娈垮枟閿曗晠宕滃☉銏℃櫖婵犲﹤鍟犻弨浠嬫煟閹邦剙绾фい銉у仱閺屾盯寮敓浠嬨�冩繝鍐х箚闁割偅娲栫痪褔骞栫�涙ɑ灏伴柡鍌︽嫹闂傚倷鐒﹂弸濂稿疾濞戙垹鐤柕濠忓椤╃兘鏌ｅΟ鑲╁笡闁绘挻娲熼弻锟犲磼濠靛洨銆婇梺缁樺笚閹倿寮诲澶娢ㄩ柨鏃傜摂濡啴鎮楃憴鍕闁挎洏鍨介妴浣糕枎閹炬潙娈愰梺鍐叉惈閿曘倝寮挊澶嗘斀闁绘灏欏Λ鍕煛婢跺﹤鐨￠柟椋庢焿椤﹁顨ラ悙鑼妞わ妇澧楅幆鏃堟晲閸☆厾纭�濠碉紕鍋戦崐鏍箰閸洖绀夌�广儱娴勯幏宄邦潩椤掑倻楔濠殿喖锕ら…宄扮暦閹烘垟鏋庨柟閭﹀枔閸嬫ɑ淇婇悙顏勶拷銈夊磻閸曨垁鍥濞戞碍娈鹃梺鍝勬储閸ㄦ椽宕戦崒娑辨闁绘垵妫楁晶顖炴煟閳哄﹤鐏犻柣锝囧厴閹垻鍠婃潏銊︽珫婵犵數鍋為崹鍓佹暜濡ゅ喛鎷峰鍐残撳ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘介崑瀣節婵犲倻澧曠痪鎯ь煼閺岋綁骞囬鐓庡闂佺顑呴崐鍧楀蓟閿熺姴鐐婇柍杞扮劍閻忎胶绱撴担鍙夘潐闁归鍏樺濠氬磼濮橆剨鎷烽幖浣瑰亱濠电姴瀚惌娆撴煙閻戞﹩妾璺侯煬閻撱儵鏌涢弴妤佹珒缂併劌顭峰Λ鍛搭敃閵忊�愁槱濠殿喖锕ゅ﹢杈ㄧ閹间焦鏅濋柛灞剧〒閸樻悂鏌ｈ箛鏇炰粶濠⒀嗘鐓ら柡澶嬪灍閺�浠嬫煃閵夈儳锛嶉柛鈺嬬悼閿熷�燁潐濞茬喐绂嶉崼鏇炴槬闁跨喓濮寸壕鍏肩節婵犲倸顏い鏃�娲栭埞鎴︽偐閸偅姣勯梺绋垮閸ㄧ懓顕ユ繝鍥ㄥ癄濠㈣绻冨鑺ヤ繆閼搁潧绶為悗锝庡亝閻濇牗淇婇悙顏勶拷鏇犳崲閹版澘绠犵�广儱娲﹀畷鏌ユ煕閳╁啰鈾侀柣鎾寸懄閵囧嫰寮介妸褉妲堝銈冨劚椤戝寮婚敐澶娢ч煫鍥ㄦ煥椤忓爼姊婚崒姘拷椋庣矆娓氾拷楠炴牠顢曢敃锟界壕鍦喐閻楀牆淇柡浣稿缁绘盯宕卞Ο鍝勵潓濡炪倖娲熸禍鍫曞蓟閻旂厧绀堢憸蹇曟暜濞戙垺鐓冮梺鍨儏濞搭噣鏌＄仦鍓с�掑ù鐙呯畵瀹曟粏顦抽柛锝庡灦濮婅櫣绮欑捄銊ь唶闂佹椿鍓欓妶鎼佸箚閿熻姤銇勮箛鎾跺⒈闁轰礁娲弻锝夊箛閻楀牊閿梺缁樻尵閸犳牠骞冨Δ锟介埢鎾诲垂椤旂晫浜堕柣鐔哥矋濠㈡﹢宕幘顔兼槬闁靛绠戠欢鐐烘煙闁箑澧绘繛鐓庯躬濮婃椽鎮欓挊澶婂闂佸摜鍠愮�笛呯博閻旂厧绠虫俊銈勮閹风粯绻涙潏鍓у閻狅拷閿曞倹鍊垮Δ锝呭暞閻撶喐銇勯幒鐐村闂侀潧鐗忛…鍫ユ偩閻戣棄绠ｆ繝闈涘暞椤秴鈹戦鐭亣銇愭径宀�绠斿鑸靛姈閳锋垿鏌涘┑鍡楊伀闁宠顦甸弻锝堢疀閺傚灝顫戦梺闈涙处閸旀瑩鐛幒妤�绠婚柛蹇撴噺閻繘姊虹拠鍙夋崳闁硅櫕鎸荤粩鐔哥節閸パ呯崶闂佸搫绋侀崢鑲╃矆閸儲鈷戞い鎺炴嫹缂佸鏁婚崺娑㈠箣閻樼數锛滈柣搴秵閸嬫帡宕曢妷鈺傜厱閹艰揪绱曠粻濠氭煙椤旂瓔娈旀い顐ｇ箞閹剝鎯旈姀顫濠电姷顣介敓钘夊暱缁狙囨煕閺冿拷閻熲晠鎮伴锟介獮鎺懳旈敓鐣岀尵瀹ュ鐓欓柣鎰靛墯缂嶆垶銇勮箛鎾跺煟婵﹥妞介獮鎰償閿濆洨鏆ゅ┑掳鍊楁慨鐢稿箖閸岀偞鍋樻い鏂挎閺冨牆绀冩い蹇撴嫅缁扁剝淇婇悙顏勶拷鏍箰閹绢喖绀堟繝闈涚墛閸忔粌螖閿濆懎鏆炴い銉ユ椤法鎹勬笟顖氬壋缂備讲妲勯幏宄扳攽閻樺灚鏆╁┑顔芥尦瀹曨垶顢曢敐鍡楀伎婵犮垼娉涢惉鑲╁閻撳寒鐔嗛柤绋跨繁椤忓牆鍑犻柣鏂垮悑閻撴瑥銆掑顒備虎濠碉紕鏅槐鎺旂磼濡偐鐤勯悗瑙勬礃鐢帡鍩ユ径濞炬瀻闊洦鎸搁ˉ鎺楁⒒閸屾瑦绁版俊妞煎妿缁牊绗熼敓浠嬪箖瑜旈獮妯兼嫚閼艰埖鎲版繝鐢靛仦閸垶宕归悷鐗堟殰闂傚倷鑳堕幊鎾绘偤閵娧勫床闁稿瞼鍋涢崙鐘绘煏閸繍妲归柣鎾跺枛楠炴牕菐椤掞拷閻忊晠鏌嶇紒妯荤闁逛究鍔嶇换婵嬪川椤曞懍鍝楅梻浣哥秺椤ユ挻绻涢敓鑺ヮ殽閻愬瓨宕屾鐐村笒閳规垿宕卞鈧姂濮婂宕掑▎鎴М闂佺顕滅换婵嗙暦瑜版帗鍋ㄩ柣銏㈡暩椤︻垱绻濋悽闈浶㈤柛濠傤煼瀵娊鏁冮崒娑氬弳濠电娀娼уΛ顓炍ｉ崫銉х＜闁跨喍绮欏畷姗�鍩炴径鍝ョ泿闂備礁鎼崐鍦拷绗涘浄缍栫�广儱顦伴悡蹇擃熆鐠虹儤顥炴繛鍛閺岋綁骞樼�涙顦ㄧ紓浣虹帛閻╊垶鐛�ｎ亖鏋庨煫鍥ㄦ磻閹絽鈹戦悙鑼憼缂侇喖瀛╅弲璺何旀担琛℃敵婵犵數濮村ù鍌炲极瀹ュ棙鍙忔慨妤�妫楁晶璇裁归悡搴℃殭闁宠鍨块、娆戞兜閻戠晫鍙嶆繝鐢靛仜閹锋垹绱炴笟锟介悰顔跨疀濞戞瑥浜归柣鐘叉穿鐏忔瑦瀵肩�ｎ喗鈷戦柟顖嗗嫮顩伴梺绋款儏濡粓濡甸幇鏉胯摕闁靛鑵归幏缁樼箾鏉堝墽鎮奸柛搴涘�濆畷鐢告晸娴犲鈷戦柟鑲╁仜閿熻姤鐗犻幃褔鎮╅懡銈呯ウ闂婎偄娲︾粙鎺楀疾閹间焦鐓ラ柣鏇炲�圭�氾拷? by changhao
	public int GetProbByNum(int num)
	{
		if (num == 2)
		{
			return (int)(1000F * (2F / 3F));
		}
		else if (num == 3)
		{
			return (int)(1000F * (7F / 8F));
		}
		else if (num == 4)
		{
			return 1000;
		}
		
		return 0;
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 800519;

	public int getType() {
		return 800519;
	}

	public java.util.LinkedList<Integer> makingslist; // 材料链 by changhao

	public CLiveSkillMakeDrug() {
		makingslist = new java.util.LinkedList<Integer>();
	}

	public CLiveSkillMakeDrug(java.util.LinkedList<Integer> _makingslist_) {
		this.makingslist = _makingslist_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.compact_uint32(makingslist.size());
		for (Integer _v_ : makingslist) {
			_os_.marshal(_v_);
		}
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		for (int _size_ = _os_.uncompact_uint32(); _size_ > 0; --_size_) {
			int _v_;
			_v_ = _os_.unmarshal_int();
			makingslist.add(_v_);
		}
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CLiveSkillMakeDrug) {
			CLiveSkillMakeDrug _o_ = (CLiveSkillMakeDrug)_o1_;
			if (!makingslist.equals(_o_.makingslist)) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += makingslist.hashCode();
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(makingslist).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

