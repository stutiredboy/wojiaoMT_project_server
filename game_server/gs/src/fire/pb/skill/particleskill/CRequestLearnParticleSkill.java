
package fire.pb.skill.particleskill;

import java.util.HashMap;
import java.util.Map;

import fire.log.beans.RoleSkillUpBean;
import fire.pb.attr.SRefreshRoleData;
import fire.pb.buff.BuffPetImpl;
import fire.pb.course.CourseType;
import fire.pb.item.GroceryItemShuXing;
import fire.pb.item.Pack;
import fire.pb.main.ConfigManager;
import fire.pb.pet.Pet;
import fire.pb.pet.PetColumn;
import fire.pb.pet.PetColumnTypes;
import fire.pb.skill.BuffUnit;
import fire.pb.skill.Module;
import fire.pb.skill.Result;
import fire.pb.skill.SkillPet;
import fire.pb.skill.SkillRole;
import fire.pb.skill.SubSkillConfig;
import fire.pb.skill.fight.FightSkillConfig;
import fire.pb.skill.liveskill.LiveSkillManager;
import fire.pb.talk.MessageMgr;
import fire.script.FightJSEngine;
import fire.script.JavaScript;









// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CRequestLearnParticleSkill__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/***
 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊炲銈嗗笒椤︿即寮查鍫熷仭婵犲﹤鍟扮粻濠氭煛娴ｈ宕岄柟宕囧仱婵＄柉顦柡瀣濮婃椽宕崟顒�娅ф繝娈垮枟閹告娊骞冮幆褏鏆嬮梺顓ㄩ檮瀵ゆ椽姊虹捄銊ユ瀺缂侇喗鐟╅悰顔界節閸ャ劍娅㈤梺缁樏顒冾樄闁哄本鐩俊鐑藉閳╁啰褰ｇ紓鍌欐祰缁儳鈻嶉弴鐘冲床婵犻潧妫岄弸鏃堟煕椤垵鏋熼柣蹇撶Ч濮婃椽骞愭惔銏㈡闂佽法鍠庨敓鐣屽櫏濞兼劖绻涚拠褏鐣电�规洘绮岄～婵堟崉閾忓湱鏉介梻渚�娼ц墝闁哄應鏅犲顐﹀幢濞戞瑧鍘遍梺鍝勬储閸斿本鏅舵导瀛樼厱婵鎷峰ù婊嗘硾椤繐煤椤忓嫪绱堕梺鍛婃处閸撴瑩宕戝澶嬧拺闁告稑锕ラ悡銉╂煛閸偄澧寸�殿喗鐓￠幊婊堟濞戝崬娈奸梺璇插缁嬫帡鈥﹂崶顒�鍌ㄩ柟鍓х帛閳锋垿鏌ゆ慨鎰拷鏇㈠几閹存繍鐔嗛柣鐔哄椤ョ偤鏌ｅΔ锟介柊锝咁潖缂佹鐟归柨鐔绘椤洩顦查悡銈夋煏閸繃绁柟宄板槻椤繈顢橀悢鍝勫殥婵＄偑鍊栧ú鈺冪礊娓氾拷閵嗕礁顫濋懜鍨婵炲濮撮鍛村几娓氾拷閺岀喖骞嗚閸ょ喐銇勯埡鍐ㄥ幋闁诡喗顨婇弫鎰償濠靛牊鏅奸梻浣瑰缁嬫捇宕伴弽褜娼栨繛宸簻缁犳氨鎲告惔锝囩焿閻庯綆鍠楅悡鏇㈡倵閿濆簼绨兼い銉ｅ灲閺屾洟宕卞Δ浣告濡炪倧濡囨晶妤呭箚閺冨牆顫呴柣妯虹－閿熶粙绠栧缁樻媴閾忕懓绗″銈冨妼閹虫﹢骞冭瀹曞崬鈻庨幋鐘垫殽婵犳鍠楅…鍫ュ春閺嶎厽鍋傞柣鏂垮悑閻撴瑩鏌熼鍡楄嫰濞堝爼姊洪悷鏉挎毐婵炲樊鍙冨濠氭晬閸曨亝鍕冮柣鐘叉处瑜板啴锝為崶顒佲拺閻犲洠锟借櫕鐏侀梺绋匡攻缁诲倿鎮鹃悜钘夌闁瑰瓨姊归～宥呪攽椤旂瓔娈旀俊顐ｆ⒒濡叉劙鏁撻敓锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К闁哄鏅滅换鍫ュ蓟閿濆棙鍎熸い鏍ㄧ矌鏍￠梻浣告憸婵敻鎮у鍛灊濠电姵鍑归弫宥夋煟閹邦剦鍤熼柛娆忔濮婅櫣绱掑Ο鑽ゎ槬闂佺锕ゅ﹢閬嶆晸閼恒儳鍟查柟鍑ゆ嫹?
 * @author changhao
 *
 */
public class CRequestLearnParticleSkill extends __CRequestLearnParticleSkill__ {
	@Override
	protected void process() {
		// protocol handle
		
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		mkdb.Procedure requestlearnparticleskill = new mkdb.Procedure()
		{
			@Override
			protected boolean process()
			{
				Long battleid = xtable.Roleid2battleid.select(roleid);
				if (battleid != null)
				{
					MessageMgr.psendMsgNotify(roleid, 131451, null);	
					return true;						
				}
				int factionlevel = 0;
				
				Long factionid = xtable.Roleidclan.select(roleid);
				if (factionid != null)
				{
					xbean.ClanInfo clanInfo = xtable.Clans.select(factionid);
					if (clanInfo != null)
					{
						factionlevel = clanInfo.getClanlevel();						
					}
				}
				
				fire.pb.skill.SLifeSkill config = ConfigManager.getInstance().getConf(fire.pb.skill.SLifeSkill.class).get(id);
				
				if (config == null)
				{
					return true;						
				}
												
				SkillRole skillrole = new SkillRole(roleid);
				xbean.PracticeSkill practiceskill = skillrole.getPracticeSkill(id);
				if (practiceskill == null)
				{
					return true;
				}
				
				int curskilllevel = practiceskill.getLevel(); //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙绀冩い鏇嗗洤鐓橀柟杈鹃檮閸嬫劙鏌涘▎蹇ｆЧ闁诡喗鐟х槐鎾存媴閸濆嫷锟藉矂鏌涢妸銉у煟鐎殿喖顭锋俊鎼佸煛閸屾矮绨介梻浣侯焾閺堫剛绮欓幋锔绘晜闁跨噦鎷�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幗闂侀潧绻堥崺鍕倿閸撗呯＜闁归偊鍙庡▓婊堟煛瀹�锟介崰鏍蓟閸ヮ剚鏅濋柨鐔剁矙瀹曟繈骞掗幘鍓侇啎閻庣懓澹婇崰鏇犺姳閼姐倗纾奸柣娆忔噽缁夘噣鏌″畝瀣埌閾伙綁鏌涜箛鎾虫倯婵絽瀚板铏圭磼濡櫣鐟ㄩ梺鍛婅壘椤戝洭骞戦姀鐘闁靛繒濮烽鎺楁煟鎼达絾鏆╂い顓炵墦瀵娊鏁撻悩鏂ユ嫼闂侀潻瀵岄崢濂稿储閹绢喗鐓涢柨鐔剁矙閺屽棗顓奸崨鍌︾畵閺屾盯寮撮妸銉т哗濡炪値鍋勯幊姗�寮诲澶嬪癄濠㈣泛顑愬Λ锟犳⒑濮瑰洤锟芥挾娆㈠顒夋綎闁惧繗顫夌�氭岸鏌嶉妷銊︾彧闁诲繋绶氬娲箹閻愭彃顫呭┑鈽嗗亜鐎氫即骞冩ィ鍐╁�荤紒娑橆儐閺呮繈姊洪幐搴㈢┛闁归鍏樺畷顒勵敍閻愮补鎷洪梻鍌氱墛閻╊垶鎮板鍛＜閺夊牄鍔嶇粈鍐磼閸屾氨效闁诡喗鐟╅幃婊兾熼柨瀣伜闂傚倷鑳堕…鍫ュ嫉椤掑嫭鍋￠柕濞炬櫅缁�鍌滐拷鐧告嫹闁跨喓鏅Σ鎰板箳濡ゅ﹥鏅梺鍛婁緱閸樼偓绂掗幘顔解拺闁革富鍘鹃幗鍌炴煕鐎ｎ亷韬鐐插暙閻ｏ繝鏌囬敂鎯у汲闂備礁鎲″ú锕傚礈濞戙垹绀勯柨鐔哄У閳锋垿鏌涘┑鍕姎闁哄鍨块弻鐔煎川婵犲倵鏋欓梺缁樹緱閸ｏ絽鐣峰锟介、娆撴嚍閵夛富浠ч梻鍌欒兌缁垶鈥﹂崼顫剨婵炲棙鎸婚弲顒佺節婵犲倻澧涢柍閿嬪灩缁辨挻鎷呮慨鎴簼閹便劑宕堕妸锝勭盎闂佸搫娲㈤崝灞筋嚕椤旀拝鎷风憴鍕８闁搞劏娅ｇ划瀣箳閺冩挻瀚归柨婵嗛娴滄劙鏌熼柨瀣仢婵﹤顭峰畷鎺戭潩閸楃儐鏉稿┑鐐存尰绾板秹銆冩繝鍥х畺闁绘劖鐣崑鍛存煕閹般劍娅囬柛姗�浜堕弻鐔煎礂閼测晜娈梺鍛婃煥椤戝鐛径鎰�锋い鎴濆綖缁ㄥ姊洪棃娑氱畾闁告挻绻堣棢闁割偆鍠嗘禍婊堟煏韫囧﹤澧茬紒锟界�ｎ喗鐓涘ù锝囶焾閿熻棄娼￠獮鍐礈瑜屽▽顏堟煢濡警妲烘い鏃�鍨垮濠氬磼濮橆剨鎷烽悜鑺ュ�块柨鏇炲�搁崙鐘测攽閸屾粠鐒鹃柣銈囧亾缁绘盯骞嬪▎蹇曚患闂佹眹鍊ら崰妤呭Φ閸曨垰绠涢柛顐ｆ礃椤庡秹姊虹粙鍖″伐闁绘牕銈稿璇差吋婢跺﹣绱堕梺鍛婃处閸撴瑥鈻嶉妶澶嬧拺缂備焦蓱鐏忕敻鏌涢悩宕囧⒌鐎殿喖顭峰鎾偄妞嬪海鐛繝纰樻閸ㄩ潧鈻嶉敐鍡欘浄妞ゆ挶鍨洪悡鐔煎箹濞ｎ剙鐏柛鐔哥叀閺岀喖宕欓妶鍡楊伓? by changhao
				
				if (curskilllevel >= config.skillLevelMax) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥╁彄闁搞儯鍔嶉悡銉︺亜韫囨碍纭鹃柍瑙勫灴椤㈡瑩鎯岄顐＄盎闁伙絿鍏橀、妤呭礋椤愩垹浜堕梺璇叉捣閺佽顭囨繝姘濡炲瀛╅崰鍡涙煕閺囥劌澧版い锔诲枛椤啴濡舵惔鈥茬盎濡炪倧绠撴禍鍫曞极閹惧顩烽悗锝庡亝闁款參姊洪棃娑氬ⅱ妞ゎ厼鐗撻、姘舵晲婢跺﹪鍞堕梺鍝勬川閸嬬喖顢樺ú顏呪拺缂備焦鈼ら鍫熷�舵慨姗嗗劮閹烘挻鍎熼柕蹇嬪灮閻﹀牓姊哄Ч鍥х伈婵炰匠鍕浄闁冲搫鎳忛悡娆愮箾閼奸鍞虹紒銊ф櫕閿熻棄鐏氬姗�鏁冮鍫濈疇闁绘劕鎼敮閻熸粌绻楅妵鎰版倷椤掑倻鐦堥梺姹囧灲濞佳冪摥婵犵數鍋涢惇浼村磹濠靛绠栭柛褎顨忛弫瀣煥閻斿墎鐭欑�殿喛顕ч埥澶娢熼柨瀣垫綌婵犵妲呴崹浼村触鐎ｎ喖绠熷┑鍌氭啞閳锋垹绱撴担鑲℃垹浜搁棃娑掓斀妞ゆ梹鍎抽崢鎾煙椤栥倖瀚规俊鐐�曠换鎰版偋閸℃瑧妫憸鏃堝蓟濞戔懇锟斤箓骞嬪┑鍥╀粚闂備胶纭堕弲婵嬪磻閻愬灚宕叉繝闈涱儏閻撴洟鏌ㄩ悢鍓佺煓鐎规洘甯掗～婵嬵敆閸屾ê浠忛梻鍌氬�风粈渚�骞栭锔藉剹濠㈣泛鐬肩粈濠偯归敐澶涙嫹濞戞氨鐣鹃梻浣虹帛閸ㄧ厧螞閸曨偅鏆滈梻鍌欑劍鐎笛兠洪埡鍛闂佸灝顑囩粻楣冩煕椤愩倕娅忔繛鍫熺矒閺岀喖顢欑粵瀣暥闂佸磭绮幑鍥х暦瑜版帩鏁婇柣锝呭闁垶姊婚崒娆掑厡缂侇噮鍨堕幃褍顭ㄩ崼婵嗗亶閻熸粍妫冮獮鍐┿偅閸愨晝鍙嗛柣搴秵閸撶喎顬婇锟藉娲川婵犲嫧妲堥梺鎸庢磸閸婃牜绮嬪鍜佺叆闁割偆鍠庨敓鐣屾暬閺岋綁鎮㈤崨濠勫嚒濡炪倕娴氭禍婵堟崲濠靛顫呴柍钘夋閸旂顪冮妶蹇曞缂侇喗鐟ラ～蹇旂節濮橆剛锛滃┑顔斤供閸撱劑骞忛悜鑺ュ�婚柤鎭掑劚濞堟垿姊洪崨濠冨矮闁绘帪绠撳畷妤�顭ㄩ崼鐔哄幈濡炪倖鍔х徊鍓х矆閿熶粙姊哄Ч鍥э拷妤呭磻閹捐埖宕叉繛鎴欏灩缁狅絾绻涢崱妤冪濞寸娀绠栧铏圭矙閸噮鍔夊銈冨妼閿曨亜顕ｇ拠娴嬫婵﹩鍋呴崟鍐⒑鐠団�崇�婚柛鎰ㄦ櫇濡叉姊婚崒娆戝妽闁诡喖鐖煎畷鎰板冀椤剝妞介幃銏ゆ偂鎼淬倖鎲伴梻渚�娼ц墝闁哄懏绮撳畷鎴﹀幢濞戞瑧鍘遍柣蹇曞仜婢т粙鍩ユ径瀣ㄤ簻闊洢鍎茬�氾拷?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘劙婀侀梺绋跨箰閸氬绱為幋锔界厱闁靛鍎遍敓钘夘煼楠炲骞栨担鐟颁罕闂佸壊鍋呯换鍕偡閺屻儲鈷戠紒瀣儥閸庡繑銇勯敂鐐毈鐎殿喖顭峰鎾晬閸曨厽婢戦梺璇插嚱缂嶅棙绂嶉悜钘夌闁绘垼妫勯崡鎶芥煟閹存繃顥滈柡鍛Т閳规垿鎮╃紒妯婚敪濠电偛鐪伴崹铏圭矉瀹ュ拋鐓ラ柛顐ゅ枔閸樻悂鎮楅獮鍨姎闁哥噥鍋呮穱濠囧锤濡や胶鍘撻梺鍛婄懀閸庡磭绮ｉ弮鍫熺厸閻忕偛澧介埦渚�鏌熼娑欘棃妞ゃ垺鐟╅幊鏍煛閿熶粙宕犻弽顐ょ＝闁稿本鐟︾粊鏉款渻鐎涙ɑ鍊愭鐐村灴瀹曟儼顦撮柡鍡畵閺岀喖鎮滃Ο铏逛憾闂佸搫顑呴柊锝夊蓟閻旂尨鎷烽悽娈跨劸閸熸悂姊虹涵鍛棄闁活厼鍊搁～蹇曠磼濡顎撻梺缁樺灦閿氭繛鍫濈焸濮婃椽骞栭悙璇ф嫹閺嶎厽鍋嬮柣妯垮吹瀹撲線鐓崶銊р檨闁哄懏鎮傞弻銊╂偆閸屾稑顏�? by changhao
				{
					MessageMgr.psendMsgNotify(roleid, 160107, null);	
					return true;						
				}
				
				xbean.Properties roleproperty = xtable.Properties.select(roleid);
				
				xbean.Properties prop = xtable.Properties.select(roleid);
				xbean.RoleClanPoint contribution = xtable.Roleclanpoint.select(roleid);
				
				
			
				int rolelevel = prop.getLevel();
				int contri = 0;
				if (contribution != null)
				{
					contri = contribution.getHistoryclanpoint();
				}

				//闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啰效婵狅拷娓氾拷濮婅櫣绱掑Ο铏逛紘濠碘槅鍋勭�氭澘顕ｉ崨濠勭懝闁跨喍绮欏璇测槈濡攱顫嶅┑顔筋殔閻楀﹪寮幆褉鏀介柣鎰级閸ｈ棄鈹戦鑲╀粵缂佸矁椴哥换婵嬪炊椤儸鍥ㄧ厱婵炴垵宕弸娑欑箾閸滃啰绡�婵﹨娅ｉ幑鍕Ω閵夛妇浜炴繝纰樻閸嬪嫮锟芥碍婢橀悾鐑筋敍閻愯尙楠囬梺鐟邦嚟婵潧鈻撴ィ鍐┾拺闂傚牊鍗曢崼銉ョ柧婵炴垶姘ㄥΛ顖滄喐閺冨牆钃熼柣鏃傚皑閹风兘鎮藉▓璺ㄥ姼婵炲濯存俊鍥箖椤曪拷閺佹劖寰勭�Ｑ勫闂佽崵濮村ú銈咁嚕閸洖绠查柨婵嗘缁犻箖鏌涘☉鍗炰簻闁诲繐寮堕〃銉╂倷閼碱剛顔掗梺璇″枟缁捇骞婇悙鍝勎ㄧ憸宥夌嵁閸儲鈷掑ù锝呮啞閹牊绻涚仦鍌氱伈鐎规洘绻勬禒锕傛倷椤掍胶褰挎俊鐐�栧濠氬疾椤愩倗涓嶅Δ锝呭暞閻撴洘銇勯幇鈺侊拷鏇㈠几鎼淬劍鐓熼煫鍥ㄦ尵閹界娀鏌熸笟鍨缂佺粯绻堝畷姗�鍩炴径姝屾闂傚倷鑳堕幊鎾跺椤撱垹纾婚柕鍫濇缁诲棝鏌ｉ幋锝嗩棄缂侊拷閸愵喗鐓曟繛鍡楃Т閸旓箓鏌涚�ｎ偒娈滈柡宀嬬畱铻ｉ柤濮愬�楅悾鐢告⒒閸パ屾█闁哄矉绲借灒闁绘垶菤閺嬫瑩姊虹粙鍧楊�楃紒缁樺笧濡叉劙骞掑Δ浣规闂佸吋浜介崕杈╂閻愮儤鐓欓梺顓ㄧ畱楠炴﹢鏌涘Ο鍝勮埞闁宠鍨块幃娆撳级閹寸姳妗撴俊鐐�ら崢鐓幟洪銏㈠祦婵°倕鎳忛崑鎰磽娴ｈ鐒介柛妯圭矙濮婅櫣鎲撮崟顐ゎ槰濠电偛顦伴惄顖氼嚕缁嬪簱妲堥柕蹇ョ磿閸樻悂鏌ｈ箛鏇炰户闁稿鎸剧划鍫ュ礃椤忓棛锛滅紓鍌欑劍椤洤煤鐎甸潻鎷风憴鍕缂傚秴锕妴浣糕枎閹炬潙浜楅柟鍏兼儗閸犳绱為幘瀵哥瘈缁炬澘顦辩壕鍧楁煕鐎ｎ偄鐏寸�规洘鍔欏鎾倶閼姐倖鍤�妞ゎ偅绻堥、姗�鎮敓钘壝虹粙搴撴斀闁绘绮☉褔鏌ｅΔ锟介敃銈夋偩閻戣棄鐭楀璺虹灱椤旀洟姊洪悷鎵憼闁荤喆鍎甸幃姗�鍩￠崘顏嗭紲闂佺粯锚濡﹪鎮℃總鍛婄厸鐎癸拷鐎ｎ剛袦闂佽鍠撻崹鑽ゅ垝濞嗗繆鏋庨柣鎰靛墻濡棝姊婚崒娆戭槮闁硅绻濋弫鍐煛閸涱厾锛涙繝鐢靛Т濞层倗绮婚弽銊ょ箚闁靛牆鎳忛崳褰掓煕閵娿儱锟藉綊濡甸崟顖氱疀闁告挷鐒﹂崑褔姊洪崨濠傜厐缂佺粯绻堝濠氭晲閸℃ê鍔呴梺闈涚箳婵潙袙閸儲鈷戦柟鑲╁仜婵′粙鏌涙惔锝呭付閾荤偤鏌ｉ弬鍨倯闁抽攱鍨块弻娑㈡晜鐠囨彃缁╁┑锛勫亾閹倿寮诲☉銏″亹闁归鐒﹂悿渚�姊虹拠鈥虫珯缂佺粯绻堥獮鍐閵堝懐顦ч梺鍏肩ゴ閺呮稓鏁Δ鍛拻濞达絽鎽滈弸鍐╀繆濡炵厧濡跨紒顔肩墛缁楃喖鏁撻挊澶樺殨闁告劖绁撮弸搴ㄦ煙閹屽殶闁告ü绮欏Λ鍛搭敃閵忊剝鎮欓梺鎸庢磸閸庨亶鍩㈠鍡欑瘈闁搞儯鍔庨崢鎼佹倵閻у憡瀚归柣搴秵閸撴稖鈪垫繝鐢靛Х椤ｎ喚妲愰弴銏犵婵鎷烽柕鍡曠閳藉螣闁垮娼旀繝娈垮枟椤ㄥ懎螞閺冨倹顫曢柨鐕傛嫹? by changhao
				int maxlevel = 0;
						
				java.util.Map<Integer, Integer> ret = LiveSkillManager.getInstance().GetPracticeSkillMaxLevel(rolelevel, factionlevel, contri, config.skillLevelMax);
				if (ret.size() == 0)
				{
					return false;
				}
				
				java.util.Iterator<java.util.Map.Entry<Integer, Integer>> it = ret.entrySet().iterator();
				java.util.Map.Entry<Integer, Integer> entry = it.next();
				maxlevel = entry.getValue();
								
				if (curskilllevel >= maxlevel)
				{
					int msgid = 160106;
					if (entry.getKey() == 1)
					{
						msgid = 160487;
					}
					else if (entry.getKey() == 2)
					{
						msgid = 160488;
					}
					else if (entry.getKey() == 3)
					{
						msgid = 160489;
					}
					
					MessageMgr.psendMsgNotify(roleid, msgid, null);	
					return true;
				}
				
				if (config.needGuild == 1 && roleproperty.getClankey() <= 0) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥╁彄闁搞儯鍔嶉悡銉︺亜韫囨碍纭鹃柍瑙勫灴椤㈡瑩鎯岄顐＄盎闁伙絿鍏橀、妤呭礋椤愩垹浜堕梺璇叉捣閺佽顭囨繝姘濡炲瀛╅崰鍡涙煕閺囥劌澧版い锔诲枛椤啴濡舵惔鈥茬盎濡炪倧绠撴禍鍫曞极閹惧顩烽悗锝庡亝闁款參姊洪棃娑氬ⅱ妞ゎ厼鐗撻、姘舵晲婢跺﹪鍞堕梺鍝勬川閸嬬喖顢樺ú顏呪拺缂備焦鈼ら鍫熷�舵慨姗嗗劮閹烘挻鍎熼柕蹇嬪灮閻﹀牓姊哄Ч鍥х伈婵炰匠鍕浄闁挎洖鍊归悡娆戠磼鐎ｎ偒鍎ラ柣鎾炽偢閺岀喖顢欓崫鍕紙濡炪們鍨洪〃濠傜暦閻旂⒈鏁冮柕鍫濋閺佹悂姊婚崒姘拷椋庣矆娓氾拷閹ê鈹戠�ｅ灚鏅為梺鍛婃处閸樿棄鐣烽弻銉︾厱闁斥晛鍙囧鍕洸婵犲﹤鐗婇悡娆徝归悡搴ｆ憼婵炴嚪鍐剧唵鐟滄粓宕归崼鏇炵畺婵°倧鎷锋い顐ｇ箞閹瑩顢楅敓浠嬵敂閿燂拷?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幗闂侀潧绻堥崺鍕倿閸撗呯＜闁归偊鍙庡▓婊堟煛瀹�锟介崰鏍蓟閸ヮ剚鏅濋柨鐔剁矙瀹曟繈骞掗幘鍓侇啎閻庣懓澹婇崰鏇犺姳閼姐倗纾奸柣娆忔噽缁夘噣鏌″畝瀣埌閾伙綁鏌涜箛鎾虫倯婵絽瀚板铏圭磼濡櫣鐟ㄩ梺鍛婅壘椤戝洭骞戦姀鐘闁靛繒濮烽鎺楁煟鎼达絾鏆╂い顓炵墦瀵娊鏁撻悩鏂ユ嫼闂侀潻瀵岄崢濂稿储鐎涙ǜ浜滈柕澶涢檮瀹曞矂鏌℃担瑙勫磳鐎规洘鍔欓幃銈嗘媴閸︻厾啸濠电姷鏁搁崑鐐电矈閹绢喖鐤炬繝闈涚墛椤洟鏌ｉ幇顒傛憼濠殿垱鎸抽弻娑㈠箻閺夋垹绁峰┑鐐茬墑閸旀垵顫忓ú顏勬嵍妞ゆ挴鍓濋妤呮⒑閸濄儱校妞ゃ劌锕ら悾鐑藉箣閿曪拷缁�瀣亜閹邦喖鏋戦柡鍌︽嫹闂傚倷鑳堕…鍫ュ嫉椤掑嫬绀勯柣鐔稿珗閿濆宸濆┑鐘插椤旀洟姊洪崜鎻掍航闁告挻姘ㄩ敓鑺ョ啲閹凤拷? by changhao
				{
					return true;	
				}
				
				int addexp = 0;
				
				Pack bag = (Pack)fire.pb.item.Module.getInstance().getItemMaps(
						roleid, fire.pb.item.BagTypes.BAG, false);
											
				int which = LiveSkillManager.getInstance().GetPracticleSkillPlayerOrPet(id); //闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啰效婵狅拷娓氾拷濮婅櫣绱掑Ο铏逛紘濠碘槅鍋勭�氭澘顕ｉ崨濠勭懝闁跨喍绮欏璇测槈濡攱顫嶅┑顔筋殔閻楀﹪寮幆褉鏀介柣鎰级閸ｈ棄鈹戦鑲╀粵缂佸矁椴哥换婵嬪炊椤儸鍥ㄧ厱婵炴垵宕弸娑欑箾閸滃啰绡�婵﹨娅ｉ幑鍕Ω閵夛妇浜炴繝纰樻閸嬪嫮锟芥碍婢橀悾鐑筋敍閻愯尙楠囬梺鐟邦嚟婵潧鈻撴ィ鍐┾拺闂傚牊鍗曢崼銉ョ柧婵炴垶姘ㄥΛ顖滄喐閺冨牆钃熼柣鏃傚皑閹风兘鎮藉▓璺ㄥ姼婵炲濯存俊鍥箖椤曪拷閺佹劖寰勭�Ｑ勫濠电偠鎻徊鍧楁偤閺冨牆鍚规繛鍡樺灩绾捐偐绱撴担濮戭亜霉椤旀拝鎷风憴鍕闁搞劌娼￠獮鍐閵堝棗浜楅柟鑹版彧缂嶅洨妲愰柆宥嗏拻濞达絿鐡斿鎰版煕鎼淬垹鈻曟い銏″哺椤㈡﹢鍩�椤掑﹥瀚归柛娑欐綑閽冪喖鏌曟径娑橆洭闁告﹩浜娲礈閹绘帊绨肩紓浣筋嚙閸熺妫㈤梺缁橆焽閺佸摜澹曟總鍛婄厽婵☆垰鐏濋崥褰掓煟閿濆棙銇濋柡宀嬬磿娴狅箓宕滆閸掓盯姊虹化鏇熸珔閻庢碍婢橀悾宄邦潨閿熶粙骞冨▎鎿冩晢闁稿本绋掔欢顒勬⒒閸屾艾锟介绮堟笟锟介獮澶愭晸閻樺啿浠梺闈涳紡瀹ュ棗顏跺┑顔斤供閸嬪嫬鐣甸崱娆欐嫹濞堝灝鏋︽い鏇嗗洤鐓″鑸靛姇椤懘鏌ｅΟ鑽ゅ灩闁搞儯鍔庨崢鍗炩攽閻樺樊鐓柟鐑筋棑缁辨帡鏁撻懞銉х懝闁跨喕妫勯悾宄邦煥閸曨偒鍤ら柣搴㈢♁椤洭宕㈡ィ鍐┾拺闁革富鍙庨悞鎯旈悩鍙夊暈闁逛究鍔岄鍏煎緞鐎ｎ剙骞愰梺璇茬箳閸嬫稒鏅堕挊澹濇椽寮堕幋鏃�鏂�闂佹寧绋戠�氼剟宕㈤弶鎴旀斀闁斥晛鍟崐鎰版煛娴ｇ锟藉湱绮氶柆宥呯疅閻庯綆鍋勯鍫曟⒑鐟欏嫬顥嬪褎顨婇崺娑㈠箣閿旂晫鍘卞┑鐘绘涧濡顢旈幘顔界厱閹艰揪绱曟晥闂佸搫鏈粙鎺旀崲濠靛绀冩い蹇撴閺変粙鏌ｆ惔銏╁晱闁哥姵鐩、姘愁樄闁糕斂鍎插鍕節鎼淬垹鍏婇梻浣虹帛閸旓箓宕滃▎鎿冩晜闁割偅娲橀埛鎴︽煙缁嬫寧鎹ｇ紒鐘虫尰娣囧﹪顢曢敐鍥ㄥ櫚闂佽鍣换婵囦繆閻戣姤鏅滈柛鎾楀苯鏅梻浣筋嚙缁绘帡宕戝☉銏犵９闁归棿鐒﹂弲鎼佹煠閹帒鍔存繛鍫燂耿閺屾盯骞掗幘宕囩懖缂備胶绮换鍌烇綖濠靛鏁囬柣鏂垮娴犙囨⒒閸屾瑦绁版繛澶嬫礋瀹曟娊鏁冮崒姘鳖唵闂佽法鍣﹂幏锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К闂備胶顭堢悮顐﹀礉鎼淬劌绠熼柟闂寸缁秹鏌涢锝囩畼闁伙絾妞藉铏圭矓閸℃顏存繛鍫熸閺岋綁骞囬濠冩暰闂侀潧娲ょ�氫即銆佸Δ浣哥窞濠电姴鍋嗗浠嬫⒒娴ｅ搫鍔﹂柡鍛櫊瀹曡瀵肩�涙ê浠奸梺缁樺灱婵倝宕戦崟顓犳／闁瑰嘲鐭傞崫娲煛閸滀礁澧存慨濠冩そ楠炴劖鎯旈敐鍥╂殼婵犵妲呴崑鍛存偡閵夆晛鐓濈�广儱顦猾宥夋煥閻旇袚缂佸矁椴哥换婵嬪炊閵娿儻鎷烽柨瀣ㄤ簻闊洦鎸搁鐢告煙妞嬪骸鍘寸�殿喕绮欓垾鏍敆娴ｈ　妾ㄩ梺鐟板槻閹虫劙骞夐幘顔肩妞ゆ劦婢�缁辩喖姊婚崒娆戠獢婵炰匠鍥ㄥ亱闁糕剝铔嬮崶顒夋晬婵犲﹤鍠氬Λ婊堟⒑缁夊棗瀚峰▓鏇㈡煟閹捐泛鏋涢柡宀嬬節瀹曟帒顫濋崣妯挎闂備浇顕栭崰妤呭垂閸ф钃熼柨婵嗩槸缁犲鎮楅棃娑欏暈闁告帗鐩娲传閸曨剚鎷遍梺鐑╂櫓閸ㄥ爼鎮伴锟藉畷鍫曨敆閿熶粙鎮″☉妯忓綊鏁愰崨顓ф闂佽瀛╂繛濠傤潖缂佹ɑ濯撮柤鎭掑劤閵嗗﹪姊洪崫銉バｆ繛鍙夌墳閻忓姊洪崨濠冨闁告ê澧界划鍫熺節閸屾鏂�闂佺粯锚瀵爼骞栭幇顔剧＜闁绘ê纾晶顏堟懚閺嶎厽鐓ユ繝闈涙閸ｅ綊鏌￠崱娆忎槐闁哄矉缍侀獮鎺楀即閻愮増鐫忛梻浣芥硶閸犳洖螞閸曨厾涓嶇�广儱顦壕鍧楁煕濡ゅ啫锟斤絽鈽夊Ο婊勬瀹曘劑顢欓懞銉户闂傚倷妞掔槐顔惧緤娴犲瀚夋い鎺戝濮瑰弶銇勯幒鎴濐仾闁绘挻绋撻敓鐣屾閹风兘鎮楅敐搴″鐞氾箑鈹戦悩鎰佸晱闁革綆鍨堕獮蹇涙倻閼恒儮鎷洪柣搴℃贡婵敻藟婢跺绻嗘い鎰剁秵濞堟粎锟芥鍠楅悡锟犲蓟閸℃鍚嬮柛鈥崇箲鐎氬ジ姊绘担铏瑰笡闁煎綊绠栭幃娲Ω瑜濋幏宄邦潩閹颁焦缍堢紓浣虹帛缁嬫捇鏁撻悾灞炬毄妞ゎ厼鐗忛弫顕�宕奸弴鐔哄幗闁圭儤濞婂畷婵嬪箣閿曪拷缁犳牠鏌ㄩ悢鍝勑㈡い顐㈡嚇閺屾洟宕煎┑鍥舵￥闂佸憡蓱閹倿骞冨Δ鍛祦闁割煈鍠栨慨搴ㄦ⒑绾懏鐝柛鏃�鐗滅划瀣箳閹存梹顫嶉梺闈涚箚閿熺晫顒查幏鐑藉垂椤愶絽寮垮┑鈽嗗灣閸樠勭妤ｅ啯鍊垫慨妯煎亾鐎氾拷 by changhao
			
				if (itemid != 0) //濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柟鑲╁仜婵″ジ鏌涙繝鍌涘仴鐎殿喖顭烽弫鎰緞婵犲孩缍傞梻浣虹帛閿氶柛鐔锋健瀵娊宕奸妷锔规嫼缂備礁顑嗛娆撳磿韫囨柣浜滈柟瀛樼箥濡拷閻庢鍠栭…閿嬩繆閹间礁鐓涢柛灞剧煯缁ㄤ粙姊绘担渚劸闁哄牜鍓涚划娆撳箣閿旂粯鏅滈梺璺ㄥ櫐閹凤拷?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌熺紒銏犳灍闁稿骸顦…鍧楁嚋闂堟稑顫岀紓浣哄珡閸ャ劎鍘遍梺鍝勭Р閸婃洘鏅堕弻銉﹀�垫慨姗嗗墰缁夋椽鏌″畝瀣瘈鐎规洖鐖兼俊鐑藉Ψ瑜岄幃锝囩磽閸屾瑨鍏屽┑顕�鏀遍幈銊╂倻閼恒儲娅㈤梺鑺ッˇ閬嶆偩椤撱垺鐓曢幖绮癸拷瀹犲煘闁捐崵鍋炵换娑㈠箣濞嗗繒浠鹃梺绋款儑閸犳牠寮诲☉銏╂晝闁挎繂妫涢ˇ銊╂⒑缂佹ɑ灏伴柣鈺婂灦瀵鈽夐姀鐘栥劑鏌ㄥ┑鍡樺櫣濠殿喖閰ｅ铏规嫚閸欏顩版繛瀛樼矤娴滎亜顕ｆ繝姘櫜濠㈣泛锕﹂鎺楁煟鎼淬垻鈾佹い顓炴喘钘濆ù鐓庣摠閳锋垹绱撴担鑲℃垿骞嗛崟顖涚厱閻庯綆浜峰銉╂煟閿濆洤鍘寸�规洖銈稿鎾倷瀹ヤ焦娅婇柡灞诲姂瀵挳顢旈崨顓т紦缂傚倷鑳堕崑鎾愁熆濡偐鐭撻柟缁㈠枛閻撴﹢鏌熸潏楣冩妞ゅ孩鍔欓弻锝堢疀閹惧顩版繛瀛樼矋缁捇骞冩ィ鍐╁�婚柤鎭掑劚娴犳椽姊洪崨濠勨槈闁挎洏鍎遍埢宥夊閵堝棌鎷虹紓浣割儏鐏忓懘宕濋悢鍏肩厱闁挎繂鍟崝姘亜椤撶偞鍠樻鐐叉喘椤㈡﹢鎮╁▓鍨櫗闂傚倷绀侀幉锟犳偡閵夆敡鍥ㄦ綇閵婏附鐝烽梺姹囧灩閹诧繝鎮″▎鎰╀簻闁哄秲鍔岄崵顒佷繆閹绘帗璐＄紒杈ㄥ笚濞碱亪骞嶉鍓у幆闁诲氦顫夊ú蹇涘礉瀹ュ洦宕叉繝闈涱儏绾惧吋鎱ㄥ鍡楀幋闁瑰嘲顭峰濠氬磼濮橆剨鎷峰畡鎳婂綊宕惰閺嬫牠鏌￠崶銉ョ仼闂傚偆鍨堕弻銊╁即閻愯鎷烽崫銉т笉妞ゆ牜鍋為悡銉╂煟閺囩偛锟藉湱锟芥熬鎷�? by changhao
				{
					GroceryItemShuXing grocery = (GroceryItemShuXing) fire.pb.item.Module.getInstance().getItemManager().getAttr(itemid);
					if (grocery == null)
					{
						return true;
					}
										
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幗闂侀潧绻堥崺鍕倿閸撗呯＜闁归偊鍙庡▓婊堟煛瀹�锟介崰鏍嵁瀹ュ鏁婄痪鎷岄哺濮ｅ姊绘担渚劸妞ゆ垶鍨归幑銏犫攽鐎ｎ亣鎽曢梺闈浥堥弲娑氱尵瀹ュ鐓曢悘鐐插⒔閻擃垰顭跨憴鍕婵﹥妞藉畷顐﹀礋椤掑锛佺紓鍌欑贰閸犳骞戦崶褜鍤曞┑鐘崇閺呮彃顭跨捄鐚存敾妞ゃ儲绻堝娲捶椤撗呭姼闁诲孩绋堥弲鐘茬暦娴兼潙绠涢柣妤�鐗冮幏铏圭磽閸屾瑧鍔嶆い顓炴川缁骞樼紒妯煎幗闂佸搫璇炴担闀愬垝闁诲孩顔栭崰鏍�﹂柨瀣╃箚闁归棿绀侀悡娑㈡煕鐏炲墽鐓紒銊ょ矙濮婄粯鎷呮笟顖滃姼闂佸搫鐗滈崜娑氬垝濞嗘挸绠ｉ柨鏃傜帛閺呮粓姊虹捄銊ユ珢闁瑰嚖鎷� by changhao
					if (grocery.typeid == LiveSkillManager.ITEM_TYPE_PRACTICE_ROLE_ITEM && which == 2)
					{
						//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К缂傚倷鑳舵慨閿嬬箾閿熶粙鏌″畝锟介崰鏍х暦濠婂棭妲鹃柣銏╁灡閻╊垶寮诲☉姘炬嫹閿濆啫濡奸柨鐔诲Г缁诲牆顕ｆ繝姘嵆闁绘棁娅ｉ鏇㈡⒑缂佹ê濮﹂柛鎾村哺閹敻寮崒婊咃紳婵炴挻鑹鹃敃銉э拷姘愁潐缁绘繈濮�閿濆懐鍘梺鍛婃⒐閻楃娀骞冮垾鏂ユ闁靛骏绱曢崢閬嶆⒑闂堟侗妲堕柛銊ユ惈閳诲秹宕ㄧ�涙鍘搁柣搴秵閸嬪嫰鎮橀幘顔界厸閻忕偛澧介埥澶愭煃鐠囧弶鍞夌紒鐘崇洴瀵挳鎮敓浠嬪船閸︻厾纾介柛灞剧懆閸忓瞼绱掗鍛仸闁诡垰瀚伴、娑㈡倷闂堟稓銈﹂梺璇插嚱缂嶅棝宕板Δ鍛９闁绘垼濮ら悡鏇㈡煙閼割剙濡芥繛鍛墕椤法鎲撮崟鎯帮拷璺拷瑙勬穿缁绘繈寮婚崱妤婂悑闁糕剝鐟ラ獮鍫熶繆閻愵亜锟芥牠宕濆Δ浣瑰弿闁圭虎鍠栫粈澶嬬節婵犲倻澧涢柣鎾跺枛閺岀喖骞嗚閹界姷绱掗敓浠嬪礃椤旂晫鍘梺鎼炲劀閸愬彞绱旀俊銈囧Х閸嬫稑煤椤撶倣娑㈠礃閵娿垺顫嶅┑顔筋殔濡瑥霉閸ヮ剚鈷掑ù锝囩摂閸ゆ瑩鎮楀☉鎺撴珚闁诡喓鍨介、妤呭礋椤愩値鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌熺紒銏犳灍闁稿骸顦…鍧楁嚋闂堟稑顫岀紓浣哄珡閸ャ劎鍘遍梺鍝勭Р閸婃洘鏅堕弻銉﹀�垫慨姗嗗墰缁夋椽鏌″畝瀣瘈鐎规洖鐖兼俊鐑藉Ψ瑜岄幃锝囩磽閸屾瑨鍏屽┑顕�鏀遍幈銊╂倻閼恒儲娅㈤梺鑺ッˇ閬嶆偩椤撱垺鐓曢幖绮癸拷瀹犲煘闁捐崵鍋炵换娑㈠箣濞嗗繒浠鹃梺绋款儑閸犳牠寮诲☉銏╂晝闁挎繂妫涢ˇ銊╂⒑缂佹ɑ灏伴柣鈺婂灦瀵鈽夐姀鐘栥劑鏌ㄥ┑鍡樺櫣濠殿喖閰ｅ铏规嫚閸欏顩版繛瀛樼矤娴滎亜顕ｆ繝姘櫜濠㈣泛锕﹂鎺楁煟鎼淬垻鈾佹い顓炴喘钘濆ù鐓庣摠閳锋垿鏌涘┑鍡楊伂妞ゎ偓绠撻弻娑㈠籍閿熶粙宕归崸妤冨祦闁告劦鍠栧洿婵犮垼娉涢敃锕傛晬濠婂啠鏀介柣鎰綑閻忥箓鏌ㄩ弴妤佹珕閻庨潧銈搁弫鎾绘晸閿燂拷? by changhao
						if(bag.removeItemById(itemid, times, fire.log.enums.YYLoggerTuJingEnum.tujing_Value_gonghuixiulian, 0, LiveSkillManager.Practice) != times)
						{
							MessageMgr.psendMsgNotify(roleid, 160105, null);
							return false;
						}
						
						fire.pb.skill.SPracticeItemExp itemexp = ConfigManager.getInstance().getConf(fire.pb.skill.SPracticeItemExp.class).get(itemid);
						addexp = itemexp.exp * times;
						
					}//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊炲銈嗗笒椤︿即寮查鍫熷仭婵犲﹤鍟撮崣鍕煏閸℃鏆ｅ┑锛勬焿椤︽挳鏌ｉ鐔烘噰闁哄本鐩濠氼敇濠婂喛鎷疯楠炲繘鎮滈挊澶愭暅濠德板�ч幏椋庣磼閻欐瑥娲﹂悡鏇熴亜閹板墎鎮奸柍钘夘槸閳规垿鍨鹃懠顒傜厯闂佸搫鏈粙鎴﹀煝鎼淬倗鐤�闁哄洨濯崯瀣節濞堝灝鏋涢柨鏇樺劚椤啴鎸婃径灞炬閻熸粎澧楃敮鈺呭极鐎ｎ喗鐓曟繛鎴濆船楠炴牕顭块悷閭︽Ч缂佺粯绻堥幃浠嬫濞戞鎹曢梻浣侯攰濞呮洟宕濋弽顐ｅ床婵炴垯鍨洪弲绋棵归悩宸剱闁绘挻鐩幃姗�鎮欐０婵嗘婵犳鍠栭崐鍧楀蓟閻旂⒈鏁婇柛婵嗗閹峰嘲鈹戦崱娆愭闂佸湱鍎ら崹鐔肺ｉ崼鐔稿弿婵°倧鎷锋俊顐ｆ⒒濡叉劙鏁撻敓锟� by changhao
					else if (grocery.typeid == LiveSkillManager.ITEM_TYPE_PRACTICE_PET_ITEM && which == 1)
					{
						//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К缂傚倷鑳舵慨閿嬬箾閿熶粙鏌″畝锟介崰鏍х暦濠婂棭妲鹃柣銏╁灡閻╊垶寮诲☉姘炬嫹閿濆啫濡奸柨鐔诲Г缁诲牆顕ｆ繝姘嵆闁绘棁娅ｉ鏇㈡⒑缂佹ê濮﹂柛鎾村哺閹敻寮崒婊咃紳婵炴挻鑹鹃敃銉э拷姘愁潐缁绘繈濮�閿濆懐鍘梺鍛婃⒐閻楃娀骞冮垾鏂ユ闁靛骏绱曢崢閬嶆⒑闂堟侗妲堕柛銊ユ惈閳诲秹宕ㄧ�涙鍘搁柣搴秵閸嬪嫰鎮橀幘顔界厸閻忕偛澧介埥澶愭煃鐠囧弶鍞夌紒鐘崇洴瀵挳鎮敓浠嬪船閸︻厾纾介柛灞剧懆閸忓瞼绱掗鍛仸闁诡垰瀚伴、娑㈡倷闂堟稓銈﹂梺璇插嚱缂嶅棝宕板Δ鍛９闁绘垼濮ら悡鏇㈡煙閼割剙濡芥繛鍛墕椤法鎲撮崟鎯帮拷璺拷瑙勬穿缁绘繈寮婚崱妤婂悑闁糕剝鐟ラ獮鍫熶繆閻愵亜锟芥牠宕濆Δ浣瑰弿闁圭虎鍠栫粈澶嬬節婵犲倻澧涢柣鎾跺枛閺岀喖骞嗚閹界姷绱掗敓浠嬪礃椤旂晫鍘梺鎼炲劀閸愬彞绱旀俊銈囧Х閸嬫稑煤椤撶倣娑㈠礃閵娿垺顫嶅┑顔筋殔濡瑥霉閸ヮ剚鈷掑ù锝囩摂閸ゆ瑩鎮楀☉鎺撴珚闁诡喓鍨介、妤呭礋椤愩値鍞甸梻浣芥硶閸ｏ箓骞忛敓锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌熺紒銏犳灍闁稿骸顦…鍧楁嚋闂堟稑顫岀紓浣哄珡閸ャ劎鍘遍梺鍝勭Р閸婃洘鏅堕弻銉﹀�垫慨姗嗗墰缁夋椽鏌″畝瀣瘈鐎规洖鐖兼俊鐑藉Ψ瑜岄幃锝囩磽閸屾瑨鍏屽┑顕�鏀遍幈銊╂倻閼恒儲娅㈤梺鑺ッˇ閬嶆偩椤撱垺鐓曢幖绮癸拷瀹犲煘闁捐崵鍋炵换娑㈠箣濞嗗繒浠鹃梺绋款儑閸犳牠寮诲☉銏╂晝闁挎繂妫涢ˇ銊╂⒑缂佹ɑ灏伴柣鈺婂灦瀵鈽夐姀鐘栥劑鏌ㄥ┑鍡樺櫣濠殿喖閰ｅ铏规嫚閸欏顩版繛瀛樼矤娴滎亜顕ｆ繝姘櫜濠㈣泛锕﹂鎺楁煟鎼淬垻鈾佹い顓炴喘钘濆ù鐓庣摠閳锋垿鏌涘┑鍡楊伂妞ゎ偓绠撻弻娑㈠籍閿熶粙宕归崸妤冨祦闁告劦鍠栧洿婵犮垼娉涢敃锕傛晬濠婂啠鏀介柣鎰綑閻忥箓鏌ㄩ弴妤佹珕閻庨潧銈搁弫鎾绘晸閿燂拷? by changhao
						if(bag.removeItemById(itemid, times, fire.log.enums.YYLoggerTuJingEnum.tujing_Value_gonghuixiulian, 0, LiveSkillManager.Practice) != times)
						{
							MessageMgr.psendMsgNotify(roleid, 160104, null);
							return false;
						}
						
						fire.pb.skill.SPracticeItemExp itemexp = ConfigManager.getInstance().getConf(fire.pb.skill.SPracticeItemExp.class).get(itemid);
						addexp = itemexp.exp * times;
					}
					else
					{
						return true;
					}
				}
				else //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忓爼鏌ｆ惔銈庢綈婵炴彃绻樺畷鏇㈠箮閼恒儲娅㈤梺鍝勫�堕崐妤冪矓闂堟耽鐟邦煥閸℃銆愰梺闈涙鐢鎹㈠┑鍡╂僵妞ゆ挾濮撮獮姗�姊绘担绛嬪殐闁告鏅弫顕�骞掑Δ锟界粈澶愭煏閸繃顥撳ù婊勭矒閺屽秹宕崟顐嫹婵犳艾鐭楅柨鐔剁矙濮婃椽宕崟顒佹嫳闂佺儵鏅╅崹鍫曞Υ娓氾拷瀵挳濮�閳╁啯鐝抽梻浣虹《閸撴繈鎮烽姣硷綁顢楅崒婊咃紳闂佺鏈悷銊╁礂鐏炶В鏀芥い鏃囨閳绘洜锟借娲╃换婵嬬嵁鎼淬劍瀵犲璺哄閹茬増绻濋悽闈涗沪闁割煈鍨跺畷娲礋椤栨碍鐎梺鍛婂姦閸犳鎮￠妷锔剧瘈闂傚牊绋掗ˉ鐐淬亜閵壯冃ｉ柕鍥у閺佸倿宕崟顐⑿戠紓鍌欐祰妞村摜鏁悙鍨潟闁圭儤顨呴～鍛存煟濡灝绱︾紒杈╁枛濮婄粯鎷呴崫銉ㄥ銈冨劜閹瑰洤鐣峰Δ锟借灒濞撴凹鍨辩紞搴ｇ磽閸屾瑧鍔嶉拑鍗炩攽椤栨稒灏﹂柟顔煎槻閳诲氦绠涢幙鍐ф偅濠电偛顕慨顓㈠疾閻樺樊娼栭柧蹇撴贡閻瑩鏌涢…鎴濇灓婵¤弓鍗冲娲閳哄啰肖缂備浇寮撶划娆撱�佸鑸垫櫜濠㈣泛锕ㄩ幗鏇㈡⒑闂堟侗妾х紒鐘冲灦缁傚秹宕烽鐘碉紳闂佺鏈悷褔宕濆澶嬬叆婵﹩鍎ぐ鎺撳亹闁告劕寮剁拠鐐测攽椤旂》榫氭繛鍜冪秮楠炴垿宕熼姣尖晠鏌曟径娑橆洭鐟滅増宀稿缁樻媴閻戞ê娈岄梺鎼炲�栭悧鐘荤嵁韫囨稒鏅搁柨鐕傛嫹 by changhao
				{
					fire.pb.common.SCommon costconfig = ConfigManager.getInstance().getConf(fire.pb.common.SCommon.class).get(165);
					
					int costmoney = Integer.parseInt(costconfig.value) * times;
									
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闂囧鏌ㄥ┑鍡╂Ч濞存嚎鍊濋弻銈夊级閹稿骸浠村┑顔硷攻濡炰粙銆佸Δ鍛櫢闁伙絽鐬奸惌鎾绘煛鐏炶鍔滈柡鍛倐閺岋箑螣娓氼垱笑闂佽法鍠曞Λ鍕焽閿熺姴违濞达絿纭堕弸搴ㄦ煙閹咃紞妞わ富鍙冮幃宄邦煥閸愵亞顔掗柦妯荤箖閵囧嫰寮介妸褋锟芥帞绱掗悩鑽ょ暫闁哄瞼鍠栭獮鍡氼檨闁搞倗鍠栭弻娑㈡偄閸濄儱寮ㄩ梺鍝勭灱閸犳牠骞冨鍫熷殟闁靛闄勫▓鍛婁繆閻愵亜锟芥垿宕濇繝鍥х？闁汇垻顭堢粻鏍ㄧ箾閸℃ɑ灏紒鐙欏洦鐓欓悗娑欘焽缁犮儲绻涢崗鐓庡摵婵﹦绮幏鍛存嚍閵夛綇鎷烽崘顔界厽闁硅櫣鍋熼悾鍨殽閻愭潙鐏寸�规洖鐖奸、妤呮晸娴犲鍑犲〒姘炬嫹闁哄瞼鍠栧畷婊嗩槾閻㈩垱鐩弻锟犲川椤旇棄锟芥劙鏌＄仦璇插闁诡喓鍊濆畷鎺戔槈濮楀棔绱� by changhao
					if(bag.subMoney(-costmoney, LiveSkillManager.Practice, fire.log.enums.YYLoggerTuJingEnum.tujing_Value_gonghuixiulian, 0) != -costmoney)
					{
						return false;	
					}					
					
					addexp = 10 * times;
				}
				
				AddExp(curskilllevel, practiceskill.getExp() + addexp, practiceskill, maxlevel); //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姈閵囧嫰寮撮悙鎼！闁诲孩鑹剧紞濠囧蓟濞戙垹绠涢梻鍫熺♁閻忓牓鎮楅悷鐗堝暈缂佽鍟存俊鐢稿礋椤栨氨顔婇梺鐟扮摠缁诲啴宕愰姘ｆ斀闁挎稑瀚禒鈺佲攽椤斿搫锟芥牜绮氭潏銊х瘈闁搞儜鍜佸晣濠电偠鎻紞锟芥い顐㈩槸閳诲秹宕卞▎鎴狅紳闂佺鏈悷褔宕濆澶嬬叆闁哄洦顨嗗▍濠勶拷瑙勬处閸ㄤ即顢橀崗鐓庣窞閻庯急鍕伜婵犵數鍋犻幓顏嗙礊閿熻棄鈹戦鍝勶拷妤�鈽夐悽绋块唶闁哄洨鍠撻崢閬嶆⒑閹稿海绠撶紒缁樺浮閹箖宕归顐ｎ啍闂佺粯鍔樼亸娆戠不婵犳碍鐓涘ù锝堫潐瀹曞矂鏌℃担瑙勫磳闁轰焦鎹囬弫鎾绘晸閿燂拷 by changhao
				
				SUpdateLearnParticleSkill msg = new SUpdateLearnParticleSkill();
				msg.skill.level = practiceskill.getLevel();
				msg.skill.id = id;
				msg.skill.exp = practiceskill.getExp();
				msg.skill.maxlevel = maxlevel;
				
				if (msg.skill.level > 0)
				{
					msg.skill.effects.putAll(CalcSkillEffect(config.skillId, msg.skill.level));
					msg.skill.nexteffect.putAll(CalcSkillEffect(config.skillId, msg.skill.level + 1));
					if (practiceskill.getLevel() > curskilllevel) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姈閵囧嫰寮撮悙鎼！闁诲孩鑹剧紞濠囧蓟濞戙垹绠涢梻鍫熺♁閻忓牓鎮楅悷鐗堝暈缂佽鍟存俊鐢稿礋椤栨氨顔婇梺鐟扮摠缁诲啴宕愰姘ｆ斀闁挎稑瀚禒鈺佲攽椤斿搫锟芥牜绮氭潏銊х瘈闁搞儜鍜佸晣濠电偠鎻紞锟芥い顐㈩槸閳诲秹宕卞▎鎴狅紳闂佺鏈悷褔宕濆澶嬬叆闁哄洦顨嗗▍濠勶拷瑙勬处閸ㄤ即顢橀崗鐓庣窞閻庯急鍕伜婵犵數鍋犻幓顏嗙礊閿熻姤銇勯銏╂█鐎规洘鍨块幃鈺冪磼濡厧骞堥梺鐟板悑閻ｎ亪宕瑰ú顏勎︽繝闈涚墳閹烽鎲撮崟顒傤槰缂備緡鍠栭惌鍌炲春閵忊剝鍎熼柕濞垮劤椤撴椽姊虹紒姗嗙劷闁轰焦鎮傚畷婵嬪醇閺囩啿鎷绘繛杈剧秬濞咃綁濡存繝鍥ㄧ厱闁规儳顕粻妯肩磼椤旂晫鎳囨鐐村笒铻栭柨鐔剁矙閹繝寮撮姀锛勫幍闁哄鐗撶粻鏍ь瀶椤曪拷閺岋綁骞樼�涙顦ㄩ梺闈涙搐鐎氫即銆佸锟介幃銏☆槹鎼存繃妯婂┑鐘垫暩閸嬫盯骞婅箛娑欐櫇闁靛繈鍊曢拑鐔哥箾閹寸偟鎳勯柛搴ｅ枛閺屾洝绠涢弴鐐愩垺銇勯锝呮诞婵﹥妞藉畷顐﹀礋椤撶姴濮界紓鍌氬�哥粔宕囨濮樿埖鍋樻い鏂跨毞閺嬪酣鏌熼幆褏锛嶆い锔芥緲椤啴濡堕崱妤呭殝闂佸湱鍏橀弨閬嶅Φ閸曨喚鐤�闁规崘娉涢悡鐔封攽椤旂》宸ユい顓炲槻閻ｇ兘骞掗幋鏃�鐎婚梺褰掑亰閸犳捇宕戝Ο璁崇箚闁绘劦浜滈敓鑺ョ墪閳绘棃鏁冮崒姘獩濡炪倖姊婚崢褏鑺遍妷鈺傗拻濞达絽鎲＄拹锟犳煕鎼存稑锟芥繈濡撮崘顔煎窛妞ゆ牗鍑瑰Λ婊勭節閻㈤潧校缁炬澘绉归幃锟犳偄閸忚偐鍘搁梺鍛婂姂閸斿矂鏁撻挊澶嬫喐闁轰緡鍣ｅ畷婊勬媴閻戞﹫绱￠梻浣筋嚃閸ㄥ骸鐣濋敓浠嬪触鐎ｎ喗鈷戦柛婵嗗椤箓鏌涢弮锟介崹鍧楃嵁閸愵喖围濠㈣泛锕﹂敍婊冣攽閻愭潙鐏﹂柨鏇楁櫆鐎靛ジ鏁撻敓锟�?? by changhao
					{
						Result result = new Result(true);
						
						//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩胶锟藉箍鍎遍ˇ顖滅矆鐎ｎ偁浜滈柟鍝勭Ф閸斿秵銇勯弬鎸庡枠婵﹦绮幏鍛存嚍閵壯侊拷濠囨⒑閸濄儱校闁圭顭烽獮鍫ュΩ瑜濋幏鐑芥濞戞瑦鍠愮紒鐐劤閵堟悂寮诲澶婁紶闁告洦鍓欏▍銈夋⒑閹惰姤鏁遍柛銊ョ埣婵＄敻宕熼姘鳖唺闂佺粯鍔栧娆擃敂閸撲胶纾介柛灞剧懅椤︼附銇勯敂鍨祮妤犵偞鍔欓獮搴ㄦ寠婢跺矈鍞甸梻浣侯攰閹活亪姊介崟顖氱；闁告洦鍋�閺�浠嬫煕鐏炴儳鍤俊鍙夋そ閺屾盯鎮欓崹顐ｆ瘓濠殿喖锕ュ钘夌暦閵婏妇绡�闁告劑鍔庨悡顖炴⒒娴ｅ搫甯堕柛鐔锋健閹儲绺界粙璺ㄧ暫闂佺粯鍨垫竟娆愬緞閹邦厼浠ч梺璺ㄥ櫐閹凤拷 by changhao
						Module.logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴楠炴﹢鎳犻澶嬓滈梻浣规偠閸斿秶鎹㈤崘顔嘉﹂柛鏇ㄥ灠閸愶拷闂侀潧臎娓氬﹥瀚归柟鐑橆殕閻撶喐绻濋棃娑欘棤闁糕晪缍侀弻鈥崇暆鐎ｎ剛鐦堥悗瑙勬礀閻栧吋淇婇悜钘壩ㄧ憸宀勫箖閿濆鈷掑ù锝呮贡濠�浠嬫煕婵犲喚娈滅�规洘鍨块獮姗�鎳滈棃娑樼哎婵犵數鍋為崹顖炲垂閸︻厾涓嶉柨婵嗘缁犻箖鏌涢埄鍐炬畼缂佺姵濞婇弻娑㈠籍閿熶粙骞愰崘宸綎闁绘垶蓱婵粓鏌熷▓鍨珮婵″樊鍣ｅ娲箰鎼淬垹顦╂繛瀛樼矤娴滄粓顢氶敐鍡欑瘈婵﹩鍎甸埡鍛厓闁告繂瀚敓钘夋啞缁傚秹鎮欓悜妯锋嫼缂備礁顑嗙�笛冿耿閹殿喚纾奸悗锝庡亜閻忓瓨銇勯姀鈩冾棃闁轰焦鎹囬弫鎾绘晸閿燂拷:" + roleid + "婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤濞硷繝寮婚悢鐚存嫹閻㈡鐒剧�涙繄绱撴担鐣屽牚闁稿﹥绻堝濠氭晝閿熷�熺亽婵炴挻鍑归崹閬嶆晬閸℃稒鍋℃繝濠傛噹椤ｅジ鎮介娑樼濠㈣娲樼缓浠嬪川婵犲嫬骞楅梻浣哥秺閸嬪﹪宕规导瀛樺剭婵炲樊浜濋悡鐔哥箾閹寸偟澧柛鏃�宀搁弻宥囨喆閸曨偆浼屽銈冨灪閻熝呭垝閻㈢鎷烽敐搴″濠殿喖鍚嬬换婵嬫偨闂堟稐绮跺銈忛檮婢瑰棛鍒掑▎鎾崇閻庨潧鎽滆ぐ楣冩⒑閸濆嫭鍌ㄩ柛銊︽そ瀹曠敻骞掑Δ浣哄帾闂佸壊鍋呯换鍐夊鍫熺厸閻庯綆鍋勯悘鎾煛瀹�锟介崰鏍箠濠靛鍋嬮柛顐ｇ箖闁款厾绱撻崒娆戝妽鐟滄澘鍟…鍥晸閻樿尙鐣鹃柣蹇曞仩琚欓柡瀣叄閻擃偊宕舵搴㈠仹闂佸摜鍋熼弫璇差潖濞差亜绀傞柛蹇曞帶閿熻姤鍔栫换娑欐媴閸愭彃顏柛娆忕箻閺屾盯濡烽姀鈩冪彇缂佺偓鍎抽妶鎼佸蓟閿濆憘鐔兼倻濡攱鐏嗛梻浣虹帛閹告悂濡堕幖浣歌摕闁挎稑瀚▽顏堟煕閹炬瀚崹杈ㄤ繆閵堝洤啸闁稿鍋ら弫鍐閵堝懐鐤囬梺缁樏悘姘暦婢舵劖鐓曟繝闈涙椤忊晠鏌ら崹顐㈠婵﹤顭峰畷鎺戔枎閹搭厽袦闂備浇顫夌粊鎾晸閸婄喓袦闁告繂瀚峰銊╂煥閻斿墎鐭欑�殿噮鍋婂畷姗�顢欑喊杈ㄧ秱闂備胶绮悷閬嶅箯闁垮绠鹃柛蹇氬亹婢ь剛绱掔紒妯尖槈妞ゆ柨绻橀、娆撴嚒閵堝懎姣堥梻鍌欒兌椤牊顨ラ幖浣瑰剹闁稿瞼鍋涢拑鐔哥箾閹寸們姘ｉ崼鐔稿弿婵°倧鎷烽柣妤�妫欑�靛ジ骞囬澶嬪瘜闂侀潧鐗嗛幊姗�鎮板鍫熺厵闁告垯鍊栫�氾拷?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К闂備胶顭堢悮顐﹀礉鎼淬劌绠熼柟闂寸缁秹鏌涢锝囩畼闁伙絾妞藉铏圭矓閸℃顏存繛鍫熸閺岋綁骞囬濠冩暰闂侀潧娲ょ�氫即銆佸Δ浣哥窞濠电姴鍋嗗浠嬫⒒娴ｅ搫鍔﹂柡鍛櫊瀹曡瀵肩�涙ê浠奸梺缁樺灱婵倝宕戦崟顓犳／闁瑰嘲鐭傞崫娲煛閸滀礁澧柍瑙勫灴椤㈡瑧绮电�ｎ剙濮煎┑鐐茬摠缁娀宕滈悢濂夊殨闁瑰墎鐡旈弫鍐煥濠靛棙宸濋柣锕�鐗撻幃妤呭礂缁嬪灝绁梺鐚存嫹闁告鍎愰悢鍡樻叏濡ゅ瀚归梺杞扮劍閹瑰洭骞婇悙鍝勎ㄩ柨鏃傝檸濡茶淇婇妶鍥ラ柛瀣洴閺佸啴濡烽埡浣虹暰闂佸搫鍟悧濠囧疾閺屻儲鐓曢柕澶堝灪濞呭洭鏌涢弮鍥ㄧ【闁宠鍨块幃鈺咁敊閼测晙绱橀梻浣虹《閺呮粓鎮ч悩鑼殾婵犻潧顑呴崘锟藉銈嗘尵閸犲孩绂嶅Δ鍛拺缂備焦蓱椤ュ牓鏌￠崨鏉跨毢闁瑰箍鍨藉畷鍗炍熼梹鎰泿闂備礁鎼粔鏌ュ礉鎼淬劍鍎楀┑鐘叉处閸嬨劍銇勯弽銊︾殤闁糕晪缍侀弻锛勪沪閸撗勫垱閻庢鍣崜娆撳煝鎼淬劌绠氱憸宥嗙珶鐎ｎ剛纾介柛灞剧懄缁佹澘顪冮弶鎴炴喐闁轰緡鍠栬灃闁告侗鍘鹃鍡涙⒑閸涘﹦鈽夐柣掳鍔戝畷鎰磼濡湱绠氬銈嗙墬缁瞼鏁崜浣虹＜闁肩⒈鍓欓ˇ鐞ticleSkill闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柟顔款潐閵堬妇鎲楅妶蹇斿闁跨喍绮欓弻锛勶拷锝庝簽鏁堥梺鍝勬湰濞叉繄绮诲☉姘炬嫹閿濆簼鎮嶉柟椋庡厴瀵挳鎮╅崗鍝ョ憹婵＄偑鍊栭悧婊堝磻閻愮儤鍋傞柕澶嗘櫆閻撶喖鏌￠崶鈺佷粶闁跨喕妫勫﹢閬嶆晸閼恒儳鍟查柟鍑ゆ嫹?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К闁哄鏅滅换鍫ュ蓟閿濆棙鍎熸い鏍ㄧ矌鏍￠梻浣告憸婵敻鎮у鍛灊濠电姵鍑归弫宥夋煟閹邦剦鍤熼柛娆忔濮婅櫣绱掑Ο鑽ゎ槬闂佺锕ゅ﹢閬嶆晸閼恒儳鍟查柟鍑ゆ嫹?");
						if(which == 2)
							result.updateResult(skillrole.addPracticleSkillBuff());
						else if(which == 1)
						{
							PetColumn petColumn = new PetColumn(roleid, PetColumnTypes.PET, false);
							for(Pet pet : petColumn.getPets())
							{
								SkillPet spet = new SkillPet(pet.getPetInfo(), roleid);
								Result resultpet = spet.addSkillBuffWhileOnline(null);
								BuffPetImpl buffpet = new BuffPetImpl(roleid, pet.getPetInfo().getKey());
								buffpet.psendSBuffChangeResult(resultpet);
								spet.updateSkillBuffWhileOut(null);
							}							
						}
					
						if(!result.getChangedAttrs().isEmpty())//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨绘い鎺嬪灪閵囧嫰骞囬鍡欑厯闂佸搫琚崝鎴﹀箖閵忋倕浼犻柛鏇熷灟閸ㄥ鎯�椤忓牆绠氱憸婊堟偂婵傚憡鐓涢悘鐐插⒔閳藉鏌嶉挊澶樻█鐎规洩绻濋幃娆撳箵閹烘繂濡ф繝鐢靛Х閺佹悂宕戝☉銏″剭闁绘垼妫勯悿楣冩煟濡鍤欓柦鍐枛閺岋繝宕堕埡浣圭亖缂備胶濞�缁犳牠寮婚敐澶婄疀闂傚牊绋戦～顏堟⒑缂佹绠栨繛鑼枎椤繘鎼归崷顓犵厯濠电偛妫欓崕鎶藉礈娴煎瓨鈷戠紒瀣皡瀹搞儲绻涚亸鏍垫嫹閹颁礁娈ㄦ繝鐢靛У閼圭偓鍎梻渚�娼чˇ顓㈠垂濞差亷缍栫�广儱鎳夐弨浠嬫煃閽樺顥滈柣蹇曞枛閹綊鏁撴禒瀣櫆闁伙絽鐭堝ù鍕⒑閼姐倕鏋戝鐟邦儔瀵劍绂掔�ｎ偆鍘介梺褰掑亰閸ㄤ即鎯冨ú顏呯厽闁圭儤鎸搁崝銈夋婢跺绡�濠电姴鍊婚崙褰掓⒑椤撗冪仯闁跨喕濮ら鏍窗閺嶎厸锟斤箓鎮滈挊澶嬬�梺褰掑亰閸樿偐娆㈤悙娴嬫斀闁绘ɑ褰冮顐︽煛婢跺鍊愭慨濠勭帛閹峰懐绮欓幐搴★拷顖炴⒑鐠団�虫灈闁稿﹥鎮傞垾锕傚炊椤忓秵鈻屾俊鐐�戦崹鍝勎涢崘顔兼瀬闁瑰墽绮弲鎼佹煥閻曞倹瀚�?闂傚倸鍊搁崐鎼佸磹瀹勬噴褰掑炊瑜忛弳锕傛煟閵忋埄鐒剧紒鎰殜閺岀喖鏌囬敃锟介弸娑㈡煕閵婏妇绠橀柨鐔烘櫕濞呫垽骞忛悜鑺ョ厱闁哄洢鍔屾晶浼存煕濡濮嶆慨濠冩そ楠炴劖鎯旈敐鍥╂殼闂備胶鎳撻崲鏌ヮ敄婢跺﹦鏆﹂柣銏㈩焾閸楁娊鏌ｉ弮鍌滅瘈缂併劌顭峰铏规喆閸曨剛鍑℃繝鈷�鍐弰妤犵偛鍟缓浠嬪川婵炵偓瀚介梻浣告啞濞诧箓宕戦崟顖ｆ晜妞ゆ劑鍊楃壕濂稿级閸稑濡肩紒妞﹀洦鐓ラ柣鏂挎啞閻忣喚绱撳鍛棦鐎规洏鍨介幃鍓т沪閹冨箲闂備胶鍘ч幗婊堝磻閿濆棛顩叉繝濠傜墛閻撱儵鏌￠崒姘变虎闁诡喗鍨块幃妤�顫濋悙顒�顏�? by changhao
						{
							mkdb.Procedure.psendWhileCommit(roleid,new SRefreshRoleData((HashMap<Integer, Float>)result.getChangedAttrs()));
						}		
						fire.log.YYLogger.roleSkillUPLog(roleid, new RoleSkillUpBean(id, practiceskill.getLevel()));
					}					
				}
				else if (msg.skill.level == 0)
				{
					msg.skill.nexteffect.putAll(CalcSkillEffect(config.skillId, 1));
				}
				
				mkdb.Procedure.psendWhileCommit(roleid, msg);				
				mkdb.Procedure.pexecuteWhileCommit(new fire.pb.ranklist.proc.PRoleZongheRankProc(roleid));
				
				if (practiceskill.getLevel() > curskilllevel) {
					fire.pb.course.CourseManager.checkAchieveCourse(roleid, CourseType.XIULIAN_COURSE, practiceskill.getLevel());
				}
				
				return true;
			}
		};
		
		requestlearnparticleskill.submit();	
	}
	
	/***
	 * 婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤濞硷繝寮婚悢鐚存嫹閻㈡鐒剧�涙繄绱撴担鐣屽牚闁稿﹥绻堝濠氭晝閿熷�熺亽婵炴挻鍑归崹閬嶆晬閸℃稒鍋℃繝濠傛噹椤ｅジ鎮介娑樼濠㈣娲樼缓浠嬪川婵犲嫬骞楅梻浣哥秺閸嬪﹪宕规导瀛樺剭婵炲樊浜濋悡鐔哥箾閹寸偟澧柛鏃�宀搁弻宥囨喆閸曨偆浼屽銈冨灪閻熝呭垝閻㈢鎷烽敐搴″濠殿喖鍚嬬换婵嬫偨闂堟稐绮跺銈忛檮婢瑰棛鍒掑▎鎾崇閻庨潧鎽滆ぐ楣冩⒑閸濆嫭鍌ㄩ柛銊︽そ瀹曠敻骞掑Δ浣哄帾闂佸壊鍋呯换鍐夊鍫熺厸閻庯綆鍋勯悘瀛樹繆椤愩垺鍤囨い銏℃礋婵拷闁炽儲鍓氬Σ杈ㄧ節閻㈤潧浠滅�殿喖鐖奸幃褔鎮╅懠顒佹闂佽崵鍠愭竟瀣绩娴犲鍊甸柨婵嗛娴滅偤鏌涘Ο鍝勮埞妞ゎ亜鍟存俊鑸垫償閳ュ磭顔戦梻浣规偠閸斿矂鎮樺杈╃焿鐎广儱鎷嬮悡銉╂煕濞戝崬鐏ｉ柨娑欑矒濮婃椽宕ㄦ繝鍐ㄧ煯缂備緤鎷峰ù锝呮贡椤╅鎲搁弮鍫濊摕闁靛ň鏅滈崑鍕煟閹寸倖鎴︽偟椤忓嫧鏀介柣鎰级閸ｇ兘鏌涢妸銈囩煓闁绘侗鍠涚粻娑樷槈濞嗗骏鎷锋繝姘厾闁诡厽甯掗崝銈夋煕濮楋拷娴滆泛顫忓ú顏勪紶闁告洦鍓欓崑宥夋⒑閸涘﹥鐓ラ柣顓炲�块幃浼搭敋閿熻棄顕ｆ禒瀣垫晝闁靛牆娴勭槐鏌ユ⒒娴ｈ姤纭堕柛鐘茬Ф閸掓帒鈻庤箛鏇熸婵犻潧鍊婚…鍫濇暜闂備焦瀵уΛ渚�锝炴径宀嬫嫹濮樿櫕顥夐柍瑙勫灴閹瑩鎳滈棃娑欓敪缂傚倷娴囧鎾跺垝濞嗘挾宓佸鑸靛姈閺呮悂鏌ｅΟ鍨毢闁哄苯鐗撳铏圭磼濡搫顫岄梺瀹︽澘濮傜�规洩缍�缁犳盯骞橀娑欐澑闂備胶绮摫鐟滄澘鍟撮、鏃堫敃閿旇棄浠哄銈嗙墬缁嬫挸煤閹绢喗鐓涚�癸拷閿熶粙宕伴幇顔剧當闁绘梻鍘ч崹鍌涖亜閺冨倵鎷￠柣搴＄摠娣囧﹪鎮欓鍕舵嫹瑜庢穱濠囧炊閵婏附鐝峰┑掳鍊曢幊搴ｇ不濮樿埖鐓涢柛鎰╁妿婢ф洟鏌ｈ箛鎾讹紞闁跨喎锟界噥娼愭繛鍙夌墪鐓ら柨婵嗩槸缁愭鈹戦悩鍙夊闁抽攱甯￠弻娑氫沪閸撗勫櫘闂佸憡鏌ㄧ粔褰掑蓟閿涘嫸鎷烽敐搴濈暗闁稿鍨婚敓鑺ヮ問閸犳銇愰崘顔肩叀濠㈣埖鍔曢～鍛存煟濡吋鏆╃�规洝鍩栫换婵嗏枔閸喗鐏嶉梺鎸庢磵閺呯姴鐣峰Δ锟介～婊堟晸閽樺鍤曢柟闂寸缁秹鏌涢銈呮灁闁告瑥妫濆铏圭磼濡崵顦ラ梺绋匡工濠�閬嶆晸閼恒儳鍟查柟鍑ゆ嫹? by changhao
	 * @param requirelevel
	 * @param curexp
	 * @param skill
	 */
	public void AddExp(int curskilllevel, int curexp, xbean.PracticeSkill skill, int curmaxlevel)
	{
		int maxexp = LiveSkillManager.getInstance().GetPracticleSkillNeedExp(id, curskilllevel); //闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啰效婵狅拷娓氾拷濮婅櫣绱掑Ο铏逛紘濠碘槅鍋勭�氭澘顕ｉ崨濠勭懝闁跨喍绮欏璇测槈濡攱顫嶅┑顔筋殔閻楀﹪寮幆褉鏀介柣鎰级閸ｈ棄鈹戦鑲╀粵缂佸矁椴哥换婵嬪炊椤儸鍥ㄧ厱婵炴垵宕弸娑欑箾閸滃啰绡�婵﹨娅ｉ幑鍕Ω閵夛妇浜炴繝纰樻閸嬪嫮锟芥碍婢橀悾鐑筋敍閻愯尙楠囬梺鐟邦嚟婵潧鈻撴ィ鍐┾拺闂傚牊鍗曢崼銉ョ柧婵炴垶姘ㄥΛ顖滄喐閺冨牆钃熼柣鏃傚皑閹风兘鎮藉▓璺ㄥ姼婵炲濯存俊鍥箖椤曪拷閺佹劖寰勭�Ｑ勫闂佽崵濮村ú銈咁嚕閸洖绠查柨婵嗘缁犻箖鏌涘☉鍗炰簻闁诲繐寮堕〃銉╂倷閼碱剛顔掗梺璇″枟缁捇骞婇悙鍝勎ㄧ憸宥夌嵁閸儲鈷掑ù锝呮啞閹牊绻涚仦鍌氱伈鐎规洘绻勬禒锕傚礈瑜滃ú鎼佹⒑缂佹ê濮堥柣锝庝簼缁傚秴顭ㄩ崼鐔哄帾闂婎偄娲﹀ú鏍ㄧ墡闂備焦鎮堕崐鏇灻洪敃鍌氱疄闁靛濡囩弧锟介梺鍛婂姀閺傚倹绂掗姀鐘栨棃鎮╅棃娑楁勃闂佺粯顨堟繛锟芥鐐插暙閳诲酣骞樺畷鍥跺斀闂備礁婀遍崕銈夊吹閳哄懎围闁告侗浜濋弬锟介梻浣虹帛閸旀浜稿▎鎾崇闁绘鏁哥壕鍏笺亜閺傝￥鍋㈤柛娆忓閿熷�燁潐濞叉﹢宕归崸妤�绠栭柕蹇嬪�曟导鐘绘煕閺囥劌浜炲ù婊勬緲閳规垿鎮╅崹顐ｆ瘎婵犳鍠氶弫濠氬箠濠靛洢鍋呴柛鎰╁妿椤斿姊洪悡搴㈡喐闁稿绲剧粋宥咁煥閸喓鍘甸梺纭咁潐閸旀牜娑垫ィ鍐ㄧ柈闁归棿鐒﹂埛鎴︽煙缁嬫寧鎹ｉ柍鍙ヨ兌缁辨帡顢欓懞銉ョ濡炪値鍋勭换姗�骞栬ぐ鎺戞嵍妞ゆ挾濯寸槐鍙夌節绾版ɑ顫婇柛銊ゅ嵆瀹曘儳锟斤綆鍠栭梻顖涖亜閹惧崬鐏柍閿嬪灴閺屻倖鎱ㄩ幇顒婃嫹閺囥垹鍑犻柛宀�鍋為悡鏇㈠箹濞ｎ剙锟芥捇宕ラ锔界厱婵炲棗绻戦崵鍥ㄦ叏婵犲啯銇濇鐐村姈閹棃鍩楅埡鍌氼伜闂傚倷绀侀幖顐﹀箯鐎ｎ喖纾诲┑鐘叉搐杩濋梺鍛婄☉閻°劑鎮￠妷鈺傚�甸柨婵嗛娴滄粎锟芥鍠栭悘婵嬪煘閹寸偛绠犻梺绋匡攻濞茬喖銆侀弽顓炲耿婵炲棙鐟︾�氳鎱ㄥ鍡楀缂佸鍎ら幈銊︾節閸涱噮浠╅梺褰掝棑婵烇拷闁搞劑绠栭幖褰掝敃閵堝嫬顥氶梻鍌氬�烽懗鍫曗�﹂崼銏″床闁硅揪闄勯弲顏呬繆閻愵亜锟芥牕煤閳哄啰绀婂ù锝呭閸ゆ洟鏌涢锝嗙缂佺媴绲鹃妵鍕箻鐠虹儤鐎婚梺绋跨箰閿曨亜顫忕紒妯诲闁告稑锕ら弳鍫ユ⒑閸涘﹥鈷愰柣妤冨仱婵＄敻骞囬弶璺槰濡炪倕绻愰幊蹇撯枔閺夋娓婚柕鍫濇婢ь剛绱掔�ｎ偅灏电�殿啫鍥ㄦ櫢濞寸姴顑嗛埛鎴炴叏閻熺増鎼愰柣蹇撳级缁绘稒鎷呴崘鎻掝伀妞も晠鏀辩换婵囩節閸屾粌顤�闂佺粯鎸鹃崰鎰┍婵犲洤围闊洦鏌ㄩ鍫曟⒒娴ｇ懓顕滄繛璇ч檮缁傚秴顭ㄩ崼鐔蜂患闂佹眹鍊ら崹顒佺瑜版帗鐓欓柣鎴灻悘锔撅拷瑙勬尭缁夋挳鈥旈崘顔嘉ч柛鈩兠弳妤呮⒑闂堚晝绁烽柛搴ㄤ憾閳ワ箓宕堕浣镐簻闂佺绻愰惃鐑藉箯濞差亝鈷戦梻鍫氭櫅閻︽粓鏌涘Ο鎭掑仮鐎规洘绻勯敓鏂ょ秵閸嬪棛绮绘ィ鍐╃厱婵炲棗娴氬Σ娲煟椤撶喎娴柡宀�鍠栭、娆撳礂閻撳簼娣梻浣芥〃閻掞箓骞戦崶顒�绠板┑鐘插暙缁剁偤鏌涢埄鍏╂垿寮堕幖浣光拻濞达綀娅ｇ敮娑㈡煕閺冿拷閻楁洟鈥﹂崶褉鏋庨柟鐐綑閿熻棄鐖奸弻銊╁即閻愯鎷疯ぐ鎺撳亗闁绘ê鐏氶崰鎰版煟濡わ拷閻楀棛绮閺岋綁鏁愰崱妯镐虎闂佸搫鐬奸崰鏍�佸☉姗嗘僵閺夊牃鏅涙慨閬嶆⒒娴ｈ姤銆冮柣鎺炵畵楠炴垿宕堕锟介弸渚�鏌熼崜褏甯涢柡鍛倐閺屻劑鎮ら崒娑橆伓 by changhao
		int exp = curexp;
		while (exp >= maxexp)
		{
			exp -= maxexp;
			
			curskilllevel ++;
			maxexp = LiveSkillManager.getInstance().GetPracticleSkillNeedExp(id, curskilllevel);
			if (maxexp == -1) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姈閵囧嫰寮撮悙鎼！闁诲孩鑹剧紞濠囧蓟濞戙垹绠涢梻鍫熺♁閻忓牓鎮楅悷鐗堝暈缂佽鍟存俊鐢稿礋椤栨氨顔婇梺鐟扮摠缁诲啴宕愰姘ｆ斀闁挎稑瀚禒鈺佲攽椤斿搫锟芥牜绮氭潏銊х瘈闁搞儜鍜佸晣濠电偠鎻紞锟芥い顐㈩槸閳诲秹宕卞▎鎴狅紳闂佺鏈悷褔宕濆澶嬬叆闁哄洦顨嗗▍濠勶拷瑙勬处閸ㄤ即顢橀崗鐓庣窞閻庯急鍕伜婵犵數鍋犻幓顏嗙礊閿熻姤銇勯銏╂█鐎规洘鍨块幃鈺冪磼濡厧骞堥梺鐟板悑閻ｎ亪宕瑰ú顏勎︽繝闈涚墳閹烽鎲撮崟顒傤槰缂備緡鍠栭惌鍌炲春閵忊剝鍎熼柕濞垮劤椤撴椽姊虹紒姗嗙劷闁轰焦鎮傚畷婵嬪醇閺囩啿鎷绘繛杈剧秬濞咃綁濡存繝鍥ㄧ厱闁规儳顕粻妯肩磼椤旂晫鎳囨鐐村笒铻栧ù锝夋櫜缁ㄧ敻姊绘担铏瑰笡婵☆偄鍟村鏌ユ嚑椤掍礁搴婇梺绯曞墲缁嬫帡鎮¤箛娑欑厱妞ゆ劧绲跨粻妯肩磼閻樺磭鍙�闁诡喗顨呴～婵嬵敆閸屾簽銊モ攽椤旂》榫氭繛鍜冪悼濡叉劙骞掗幋顓熷缓闂佺硶鍓濋…鍥汲閵夆晜鈷掑ù锝囨嚀椤曟粍绻涢幓鎺旂鐎规洘娲栭悾鐑藉炊瑜嶉悘濠囨煟鎼搭垳绉甸柛鐘崇墱缁骞庨懞銉у幍闂佸憡鍔樼亸娆撴晬瀹ュ鐓曢柣妯哄暱婵绱掗鍛籍闁诡喓鍨婚崰濠冩綇閵婏附鐝┑鐘垫暩婵挳鏁冮妶澶婄柈妞ゆ牜鍋涘Ч鏌ユ煃閸濆嫭鍣洪柍閿嬪浮閺屾稓浠﹂崜褎鍣銈忚缁犳垿鈥﹂崸妤佸仭閻㈩垼鍠涢崥顐︽倵鐟欏嫭绀冮柛銊ョ仢閻ｇ兘鎮㈢喊杈ㄦ櫇闁诲函缍嗛崑鍡涘煡婢舵劖鎳氶柡宥庡幗閻撴洘绻涢幋婵嗚埞妤犵偞锕㈤弻銊モ槈濞嗘垶鍣紓浣虹帛缁诲牓骞冩禒瀣棃婵炵顔愮紞渚�寮婚妶鍫涗汗闁圭儤姊婚弳顐︽⒑鐠団�虫灈婵炵》绻濋妴浣割潩閼稿灚娅㈡繛瀵稿Т椤戝懘鎷戦悢鍏肩厪濠电偟鍋撳▍鍡涙煕鐎ｎ亝顥㈤柡灞剧〒娴狅箓宕滆濡插牆顪冮妶鍛寸崪闁瑰嚖鎷� by changhao
			{
				skill.setLevel(curskilllevel);
				skill.setExp(0);
				return;
			}
		}
		
		if (curskilllevel > curmaxlevel)
		{
			curskilllevel = curmaxlevel;
		}
		
		skill.setLevel(curskilllevel);
		skill.setExp(exp);
	}
	
	public java.util.HashMap<Integer,Float> CalcSkillEffect(int skillid, int level)
	{
		java.util.HashMap<Integer,Float> effect = new java.util.HashMap<Integer,Float>();
		
		FightSkillConfig sconf = fire.pb.skill.Module.getInstance().getFightSkillConfig(skillid);
		if (sconf != null)
		{
			FightJSEngine engine = new FightJSEngine();
			engine.setSkillLevel(level);
			
			for (SubSkillConfig subskill : sconf.getSubSkills())
			{
				for (BuffUnit buffarg : subskill.getBuffUnits())
				{
						if(buffarg==null)
						continue;
					for(Map.Entry<Integer, JavaScript> entry : buffarg.effectJavascriptMap.entrySet())
					{
						effect.put(entry.getKey(), entry.getValue().eval(engine,null,null).floatValue());
					}
				}
			}				
		}					
		
		return effect;
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 800505;

	public int getType() {
		return 800505;
	}

	public int id; // 技能ID by changhao
	public int times; // 学习次数 by changhao
	public int itemid; // 使用的道具 by changhao

	public CRequestLearnParticleSkill() {
	}

	public CRequestLearnParticleSkill(int _id_, int _times_, int _itemid_) {
		this.id = _id_;
		this.times = _times_;
		this.itemid = _itemid_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(id);
		_os_.marshal(times);
		_os_.marshal(itemid);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		id = _os_.unmarshal_int();
		times = _os_.unmarshal_int();
		itemid = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CRequestLearnParticleSkill) {
			CRequestLearnParticleSkill _o_ = (CRequestLearnParticleSkill)_o1_;
			if (id != _o_.id) return false;
			if (times != _o_.times) return false;
			if (itemid != _o_.itemid) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += id;
		_h_ += times;
		_h_ += itemid;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(id).append(",");
		_sb_.append(times).append(",");
		_sb_.append(itemid).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CRequestLearnParticleSkill _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = id - _o_.id;
		if (0 != _c_) return _c_;
		_c_ = times - _o_.times;
		if (0 != _c_) return _c_;
		_c_ = itemid - _o_.itemid;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

