
package fire.pb.fushi.monthcard;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CGrabMonthCardReward__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/**
 * 婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐鍛傜喎鈻庨幆褎顔勭紓鍌欒兌婵挳鎮樺璺何﹂柛鏇ㄥ枤閻わ拷闂佸湱鍋撻幆灞轿涢妶鍥╃＝濞撴艾锕ョ�氳绻濋悽闈浶㈡繛璇х畵閹繝濡烽埡鍌滃幗闂佸搫鍟ù鍌炲吹濞嗘垶鍋栨慨妯夸含绾捐棄霉閿濆牊顏犻悽顖涚〒缁辨帞锟斤綆鍋勭粭鎺撱亜閺囨ê鍔︾�规洜鍠栭、姗�濡搁敃锟介鍫曟⒑閹稿海绠撳Δ鐘叉啞缁傚秹鎮欏ǎ顑跨盎闂佹寧鏌ㄩ悘婵嗙暤閸℃稒鐓欐い鏃傜摂濞堟棃鏌嶇紒妯诲磳鐎规洖缍婇、娆撴偩鐏炲�熸嫬闂傚倸鍊烽懗鍫曗�﹂崼銉晞闁告稑鐡ㄩ弲婵嬫煏婢舵稑顩柍鐟扮Т閳规垿鎮╅崣澶婎槱闂佹悶鍊曢澶婎潖婵犳艾閱囬柣鏃�浜介敓鑺ュ笧缁辨帡骞囬闂存闂佸搫鐭夌徊楣冨箚閺冨牜鏁嶆繝濠傛啗閿濆棛绠鹃悗娑欘焽閻绱掔拠鑼ⅵ妤犵偛鍟撮獮鎰償閵忕媭锟芥捇姊绘笟鍥т簼缂佸鎸剧划璇差潩閼哥鎷虹紓鍌欑劍閿氬┑顕嗙畱闇夋繝濠傚閻帡鏌℃担瑙勫磳闁瑰磭鍋ゆ俊鐑芥晜缂併垺肖闂傚倷鑳堕幊鎾剁不瀹ュ鍨傚ù鐘差儑瀹撲線鏌涢妷顔煎⒒闁轰礁瀚伴弻宥夊传閸曨偓鎷锋繝姘叀濠㈣埖鍔栭悡鍐偣閸ャ劎鍙�闁告瑥瀚〃銉╂倷鏉堟崘锟藉潡鏌熼悡搴ｇШ妞ゃ垺娲熸俊鐤槻鐟滄澘鍊垮濠氬磼濮橆剨鎷烽悜鑺ュ殑闁告挷绀侀崹婵囥亜閺嶎偄浜归柨鐔告灮缁犳挸鐣烽崼鏇炵厸濞达絽鎽滄禍鐗堜繆閻愵亜锟芥牠鎮у鍫濈；闁绘劕鎼壕濠氭煕瀹�锟介崑鐐烘偂濞戙垺鐓曢柕澶涚到閸旀岸鏌ｈ箛锝勯偗闁哄矉缍侀獮妯硷拷闈涙啞閸ｄ即姊洪崫鍕効缂傚秳绶氶悰顔撅拷锝庡枟閸婅埖绻涢懠棰濆敽闂侇収鍨堕弻鐔碱敊閺傘倛锟藉潡鏌℃担绋匡拷褰掑箞閵娾晛绠涙い蹇撴濞夊潡姊婚崒娆戠獢婵炰匠鍤躲劑鏁撻悾宀�纾奸棅顐幘閻瑩鏌熼鏂よ�跨�殿喖顭锋俊鐑芥晜閹冪闂備浇顕х换鎺楀磻濞戞瑦娅犲ù鐘差儏閻撯�愁熆閼搁潧濮堥柟铏哺閺屻劌鈹戦崱妯虹獩缂佺偓鍎抽妶鎼佸箖濡ゅ懏鏅查幖瀛樼箘閻╁酣姊哄ú鑽ゅ帨缂佺粯绻堝濠氭偄妞嬪孩娈濋梺鍝勵槹鐎笛傜昂闂傚倷绀侀悿鍥綖婢舵劕鍨傜憸鐗堝笚閺呮悂鏌￠崒妯猴拷妤冪矓闂堟耽鐟邦煥閹邦喚袦濡ょ姷鍋為〃濠傤嚕閹绢喖顫呴柍鎾呮嫹闁圭柉娅ｇ槐鎾寸瑹閸パ呬画濠电偛寮堕悧妤呭疾閸洘鍤戞い鎺戝�婚敍婊堟煟鎼搭垳绉甸柛瀣閹﹢鍩￠崘顏嗭紲濡炪倖鏌ㄦ晶鐣屾暜濞戞氨纾肩紓浣诡焽缁犳挻銇勯锝囩疄妞ゃ垺锕㈤幃鈺呭箵閹烘梻鏉介梻鍌氬�搁崐椋庣矆娴ｈ櫣绀婂┑鐘叉搐绾捐鈹戦悩鍙夋悙闁稿被鍔戦弻銈吤圭�ｎ偅鐝旂紓浣界堪閸婃繈寮婚妶鍡樺弿闁归偊鍓ㄩ幏宄拔旈崘顭戞婵犻潧鍊搁幉锟犲磻閿濆悿褰掓晲閸モ晜鎲樺┑鐐插悑閸旀瑩骞冨Δ锟介～婵嬫倷椤掞拷椤忥拷 by changhao
 * @author Administrator
 *
 */
public class CGrabMonthCardReward extends __CGrabMonthCardReward__ {
	@Override
	protected void process() {
		// protocol handle
		
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
		{
			return;
		}
		
		mkdb.Procedure grabmonthcardreward = new mkdb.Procedure()
		{
			@Override
			protected boolean process()
			{
				//xbean.EMonthCard monthcard = xtable.Roleid2monthcard.get(roleid);
				if (true)
				{
					xbean.Properties prop = xtable.Properties.select(roleid);
					if (prop == null)
					{
						return false;
					}
					
					fire.pb.item.Pack bag = (fire.pb.item.Pack)fire.pb.item.Module.getInstance().getItemMaps(roleid, fire.pb.item.BagTypes.BAG, false);
					int num = bag.removeItemById(itemid, 1, fire.log.enums.YYLoggerTuJingEnum.tujing_Value_monthcard, 0, "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К闂備胶顭堢悮顐﹀礉鎼淬劌绠熼柟闂寸缁秹鏌涢锝嗗剷闁靛鏅滈悡鏇㈡煙閼割剙濡芥繛鍛閺屾稒鎯旈敐鍛亪闂佸搫鏈ú婵堢不濞戞熬鎷烽敐搴濈敖闁告梹娼欓埞鎴︽倷閹绘帞楠囬梺璇″枛閸婃悂锝炶箛娑欐優闁革富鍘鹃敍婊冣攽閳藉棗鐏犻柟纰卞亰閿濈偛鐣濋崟顑芥嫼闂侀潻瀵岄崢鎼佸箯閿熺姵鐓曢悗锝庝悍瀹搞儲銇勯弴顏嗙М鐎规洏鍔嶇换婵嬪礋椤撶喎娈為梻鍌欐祰濞夋洟宕伴弴鐐嶆盯宕熼銈囩◤闂婎偄娲﹂幏瀣洪宥嗘櫆閻庡箍鍎卞Λ娆忊枍瀹�鍕拻濞达綀濮ょ涵鍫曟煕閻樿櫕宕岀�殿喗鐓￠、鏇㈠Χ閸涱厾浜伴梻浣告惈閸燁偊宕戞繝鍥х闁绘垼濮らˉ鍫熺箾閹寸偟鎳勯柛鐘冲姍濮婂搫煤鐠囨彃绠瑰┑鈽嗗亝缁诲牆顕ｇ拠娴嬫闁靛繒濮烽崝鎾⒑閸涘﹤濮﹀ù婊勭墪椤﹪濡搁埡鍌楁嫼缂傚倷鐒﹁摫閻忓繒澧楃换娑㈡嚑椤掞拷閺嬫稓锟芥鍠涢褔顢橀崗鐓庣窞濠电姴瀚獮鎰攽閻愯埖褰х紒韫矙楠炲鍨鹃弬銉︾亖闂佸壊鍋呭ú姗�鍩涢幋锔藉�甸柛锔诲幖鏍″銈冨劚椤︿即濡甸崟顖涙櫆闁绘劦鍓氬В鍫澪旈悩闈涗粶闁哥噥鍨崇划瀣箳閺冩挻瀚归柨婵嗘噽娴犳盯鏌￠崪浣稿闁宠鍨块幃娆撳级閹寸姳妗撻梺鑹帮骏閸婃繈寮婚敍鍕舵嫹閿濆骸浜為柟鍐插暣閺屽秶鎲撮崟顐や紝濡炪們鍨洪悷褍鈽夐悽鍛婄叆閻庯綆鍋呭В搴♀攽閻樻鏆滅紒杈ㄦ礋瀹曟垵螣閻撳骸鐏婂┑鐐叉閹告瓕绻氬┑鐐舵彧缂嶏拷闁稿﹣绮欏顕�鏁撴禒瀣闁告稑鐡ㄩ崑锟犳⒑椤撱劏顓洪柟椋庡厴楠炴绱掑Ο閿嬪闂備胶鍘ч～鏇㈠磹閺囥垹鍑犻柟瀛樼箥閻斿棝鏌ｉ悢鍝勵暭妞ゃ儯鍨介弻鏇㈠幢濡わ拷閿熻棄鐏濋锝嗙節濮橆儵銊╂煥閺冨浂娼愰悗姘虫閳规垿鎮欓懜闈涙锭缂備浇寮撶划娆撶嵁婢舵劖鏅搁柣妯垮皺閺屽牓姊虹紒妯哄闁稿簺鍊濋幃锟犳偄閸忚偐鍘介梺鍝勫暙閻楀﹪鏁嶉悢鍏肩厵闁肩⒈鍓欐禍鐐亜閵婏絽鍔﹂柟顔界懇閹崇娀顢楅崒銈呮櫔闂傚倷娴囧銊╂倿閿曞倸绠查柛銉墮閺嬩線鏌熼崜褏甯涢柡鍛倐閺屻劑鎮ら崒娑橆伓");
					if (num != 1)
					{
						return false;
					}

					if (fire.pb.fushi.Module.GetPayServiceType() == 1) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴楠炴﹢鎳犻澶嬓滈梻浣规偠閸斿秶鎹㈤崘顔嘉﹂柛鏇ㄥ灠閸愶拷濡炪倖鍔﹀锟界紒顔煎缁辨挻绗熸繝鍐伓濠电姰鍨煎▔娑㈩敄閸曨厽宕查柛鈩冪♁閻撳繘鏌涢锝囩畺闁革絾妞介弻娑㈡晲閸涱喛纭�缂備浇椴哥敮锟犲箖閳哄懏顥堟繛鎴炲笚閻庝即姊绘担鍛婃儓闁活剙銈稿畷浼村冀椤撶姴绁﹂梺绯曞墲閸戠懓危妤ｅ啯鈷戦柟绋挎捣閳藉绱掓径濠勭Ш鐎殿喖顭烽弫鎾绘偐閹绘帟锟藉灝顪冮妶鍡樺暗濠殿喚鍏樺鎶藉Χ閸涱亝鏂�濡炪倖姊婚妴瀣绩缂佹ü绻嗛柣鎰閻瑩鏌曢崱鏇狀槮閾绘牠鏌涘☉鍗炴灍婵炲懌鍨藉鐑樺濞嗘垵鍩岄梺娲诲墮閵堟悂骞嗗畝鍕缂備焦锚閿熺晫鏁婚弻锝夊閻樺啿鏆堟繛瀛樺殠閸婃繈寮婚悢椋庢殝闁哄瀵т簺婵＄偑鍊ら崑鍛崲閸儯锟戒礁螖娴ｅ摜绐為柣搴稻閹稿爼宕濋幋婵愭綎闁惧繗顫夊畷澶愭煏婵炲灝鍔滈柣蹇撴閳规垿鍩ラ崱妞剧盎闁诲孩鍑归崰姘跺礆閹烘梹瀚氱�瑰壊鍠栭幃鎴炵節閵忥絾纭鹃柨鏇畵閺佸秹鎮㈤崗灏栨嫽婵炴挻鑹惧ú銈嗘櫠椤斿墽纾煎璺侯煬閸ょ喓绱掗纰辩吋闁诡喒鏅濋幏鐘绘嚑椤掑鏅ｉ梻鍌欑濠�閬嶅煕閸儱鍌ㄥΔ锝呭暙閸屻劍绻濇繝鍌涘櫧缁惧墽鏅敓钘夌畭閸庡崬螞濞戞瑦娅犻柣銏犳啞閻撴盯鎮橀悙闈涗壕缂侊拷鐎ｎ剨鎷风憴鍕闁告鍥х厴闁硅揪绠戠粻娑欍亜閹剧绱￠柛銉ｅ妷閹疯櫣绱撻崒娆戝妽閽冮亶鎮樿箛鏇烆暭缂佺粯鐩幊鐘活敆閿熶粙寮稿☉姘炬嫹濞堝灝鏋涙い顓㈡敱娣囧﹪骞栨担鍝ュ幐闂佺鏈惌顔捐姳娴犲鈷掑ù锝勮閻掗箖鏌￠崼顐㈠缂侇喗鐟╅獮瀣晜缂佹ɑ娅嗛梻浣芥硶閸ｏ箓骞忛敓锟�? by changhao
					{
						fire.pb.fushi.SFreeDisRewardConfigDayPay e = fire.pb.main.ConfigManager.getInstance().getConf(fire.pb.fushi.SFreeDisRewardConfigDayPay.class).get(itemid);
						if (e == null)
						{
							return false;
						}
						
						int count = 0;
						for (Integer id : e.itemids)
						{
							Integer itemnum = rewarddistribution.get(id);
							if (itemnum != null)
							{
								if (bag.isFull())
								{
									fire.pb.item.ItemMaps tempBag = fire.pb.item.Module.getInstance().getItemMaps(roleid, fire.pb.item.BagTypes.TEMP, false);
									
									if (tempBag.doAddItem(id, itemnum, "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К闂備胶顭堢悮顐﹀礉鎼淬劌绠熼柟闂寸缁秹鏌涢锝嗗剷闁靛鏅滈悡鏇㈡煙閼割剙濡芥繛鍛閺屾稒鎯旈敐鍛亪闂佸搫鏈ú婵堢不濞戞熬鎷烽敐搴濈敖闁告梹娼欓埞鎴︽倷閹绘帞楠囬梺璇″枛閸婃悂锝炶箛娑欐優闁革富鍘鹃敍婊冣攽閳藉棗鐏犻柟纰卞亰閿濈偛鐣濋崟顑芥嫼闂侀潻瀵岄崢鎼佸箯閿熺姵鐓曢悗锝庝悍瀹搞儲銇勯弴顏嗙М鐎规洏鍔嶇换婵嬪礋椤撶喎娈為梻鍌欐祰濞夋洟宕伴弴鐐嶆盯宕熼銈囩◤闂婎偄娲﹂幏瀣洪宥嗘櫆閻庡箍鍎卞Λ娆忊枍瀹�鍕拻濞达綀濮ょ涵鍫曟煕閻樿櫕宕岀�殿喗鐓￠、鏇㈠Χ閸涱厾浜伴梻浣告惈閸燁偊宕戞繝鍥х闁绘垼濮らˉ鍫熺箾閹寸偟鎳勯柛鐘冲姍濮婂搫煤鐠囨彃绠瑰┑鈽嗗亝缁诲牆顕ｇ拠娴嬫闁靛繒濮烽崝鎾⒑閸涘﹤濮﹀ù婊勭墪椤﹪濡搁埡鍌楁嫼缂傚倷鐒﹁摫閻忓繒澧楃换娑㈡嚑椤掞拷閺嬫稓锟芥鍠涢褔顢橀崗鐓庣窞濠电姴瀚獮鎰攽閻愯埖褰х紒韫矙楠炲鍨鹃弬銉︾亖闂佸壊鍋呭ú姗�鍩涢幋锔藉�甸柛锔诲幖鏍″銈冨劚椤︿即濡甸崟顖涙櫆闁绘劦鍓氬В鍫澪旈悩闈涗粶闁哥噥鍨崇划瀣箳閺冩挻瀚归柨婵嗘噽娴犳盯鏌￠崪浣稿闁宠鍨块幃娆撳级閹寸姳妗撻梺鑹帮骏閸婃繈寮婚敍鍕舵嫹閿濆骸浜為柟鍐插暣閺屽秶鎲撮崟顐や紝濡炪們鍨洪悷褍鈽夐悽鍛婄叆閻庯綆鍋呭В搴♀攽閻樻鏆滅紒杈ㄦ礋瀹曟垵螣閻撳骸鐏婂┑鐐叉閹告瓕绻氬┑鐐舵彧缂嶏拷闁稿﹣绮欏顕�鏁撴禒瀣闁告稑鐡ㄩ崑锟犳⒑椤撱劏顓洪柟椋庡厴楠炴绱掑Ο閿嬪闂備胶鍘ч～鏇㈠磹閺囥垹鍑犻柟瀛樼箥閻斿棝鏌ｉ悢鍝勵暭妞ゃ儯鍨介弻鏇㈠幢濡わ拷閿熻棄鐏濋锝嗙節濮橆儵銊╂煥閺冨浂娼愰悗姘虫閳规垿鎮欓懜闈涙锭缂備浇寮撶划娆撶嵁婢舵劖鏅搁柣妯垮皺閺屽牓姊虹紒妯哄闁稿簺鍊濋幃锟犳偄閸忚偐鍘介梺鍝勫暙閻楀﹪鏁嶉悢鍏肩厵闁肩⒈鍓欐禍鐐亜閵婏絽鍔﹂柟顔界懇閹崇娀顢楅崒銈呮櫔闂傚倷娴囧銊╂倿閿曞倸绠查柛銉墮閺嬩線鏌熼崜褏甯涢柡鍛倐閺屻劑鎮ら崒娑橆伓", fire.log.enums.YYLoggerTuJingEnum.tujing_Value_monthcard_reward, 2) != itemnum)
									{
										return false;
									}
								}
								else
								{
									if (bag.doAddItem(id, itemnum, "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К闂備胶顭堢悮顐﹀礉鎼淬劌绠熼柟闂寸缁秹鏌涢锝嗗剷闁靛鏅滈悡鏇㈡煙閼割剙濡芥繛鍛閺屾稒鎯旈敐鍛亪闂佸搫鏈ú婵堢不濞戞熬鎷烽敐搴濈敖闁告梹娼欓埞鎴︽倷閹绘帞楠囬梺璇″枛閸婃悂锝炶箛娑欐優闁革富鍘鹃敍婊冣攽閳藉棗鐏犻柟纰卞亰閿濈偛鐣濋崟顑芥嫼闂侀潻瀵岄崢鎼佸箯閿熺姵鐓曢悗锝庝悍瀹搞儲銇勯弴顏嗙М鐎规洏鍔嶇换婵嬪礋椤撶喎娈為梻鍌欐祰濞夋洟宕伴弴鐐嶆盯宕熼銈囩◤闂婎偄娲﹂幏瀣洪宥嗘櫆閻庡箍鍎卞Λ娆忊枍瀹�鍕拻濞达綀濮ょ涵鍫曟煕閻樿櫕宕岀�殿喗鐓￠、鏇㈠Χ閸涱厾浜伴梻浣告惈閸燁偊宕戞繝鍥х闁绘垼濮らˉ鍫熺箾閹寸偟鎳勯柛鐘冲姍濮婂搫煤鐠囨彃绠瑰┑鈽嗗亝缁诲牆顕ｇ拠娴嬫闁靛繒濮烽崝鎾⒑閸涘﹤濮﹀ù婊勭墪椤﹪濡搁埡鍌楁嫼缂傚倷鐒﹁摫閻忓繒澧楃换娑㈡嚑椤掞拷閺嬫稓锟芥鍠涢褔顢橀崗鐓庣窞濠电姴瀚獮鎰攽閻愯埖褰х紒韫矙楠炲鍨鹃弬銉︾亖闂佸壊鍋呭ú姗�鍩涢幋锔藉�甸柛锔诲幖鏍″銈冨劚椤︿即濡甸崟顖涙櫆闁绘劦鍓氬В鍫澪旈悩闈涗粶闁哥噥鍨崇划瀣箳閺冩挻瀚归柨婵嗘噽娴犳盯鏌￠崪浣稿闁宠鍨块幃娆撳级閹寸姳妗撻梺鑹帮骏閸婃繈寮婚敍鍕舵嫹閿濆骸浜為柟鍐插暣閺屽秶鎲撮崟顐や紝濡炪們鍨洪悷褍鈽夐悽鍛婄叆閻庯綆鍋呭В搴♀攽閻樻鏆滅紒杈ㄦ礋瀹曟垵螣閻撳骸鐏婂┑鐐叉閹告瓕绻氬┑鐐舵彧缂嶏拷闁稿﹣绮欏顕�鏁撴禒瀣闁告稑鐡ㄩ崑锟犳⒑椤撱劏顓洪柟椋庡厴楠炴绱掑Ο閿嬪闂備胶鍘ч～鏇㈠磹閺囥垹鍑犻柟瀛樼箥閻斿棝鏌ｉ悢鍝勵暭妞ゃ儯鍨介弻鏇㈠幢濡わ拷閿熻棄鐏濋锝嗙節濮橆儵銊╂煥閺冨浂娼愰悗姘虫閳规垿鎮欓懜闈涙锭缂備浇寮撶划娆撶嵁婢舵劖鏅搁柣妯垮皺閺屽牓姊虹紒妯哄闁稿簺鍊濋幃锟犳偄閸忚偐鍘介梺鍝勫暙閻楀﹪鏁嶉悢鍏肩厵闁肩⒈鍓欐禍鐐亜閵婏絽鍔﹂柟顔界懇閹崇娀顢楅崒銈呮櫔闂傚倷娴囧銊╂倿閿曞倸绠查柛銉墮閺嬩線鏌熼崜褏甯涢柡鍛倐閺屻劑鎮ら崒娑橆伓", fire.log.enums.YYLoggerTuJingEnum.tujing_Value_monthcard_reward, 2) != itemnum)
									{
										return false;
									}
								}												
							}
						}
						
						if (count > e.getNum()) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂嫮鐭婇棁澶愭煛瀹ュ骸骞楅柣鎾崇箰閳规垿鎮欓懠顑胯檸闂佸憡鏌ㄩ悺銊ф崲濞戙垹绠婚柟棰佽兌閸氬姊洪崫鍕伇闁哥姵鐗犻獮鍐煥閸愮偓寤洪梺绯曞墲椤洭寮抽妷褏纾藉ù锝夌細濡炬悂鏌涘▎蹇曠妤犵偛绻橀幃婊堟嚍閵夈垺瀚藉┑鐐舵彧缁插潡鎮洪弬娆剧劷闁规壆澧楅悡鏇㈠箹鏉堝墽鍒伴悽顖氱埣閹藉爼鎮欓悜妯煎幈闂佸搫娲㈤崝宀勬倶閿熺姵鐓冮梺鍨儏缁楁岸鏌曢崶褍顏�殿喕绮欓、鏇綖椤撶喎濯伴梻鍌欒兌缁垶骞栭銈囩濞撴熬鎷烽柟顕嗙節椤㈡洟鏁冮敓浠嬫倷婵犲洦鐓忓┑鐐茬仢閸旀碍鎱ㄩ敐鍛闁宠鍨块幃娆撳箵閹烘挸锟筋垶姊洪崨濠冣拹闁荤啿鏅涢锝嗙節濮橆厼浜滅紒鐐妞存悂寮查锟介埞鎴﹀煡閸℃浠╅梺鍦拡閸嬪懘骞堥妸鈺傛櫇闁稿本绋堥幏娲⒑閸涘﹦绠撻悗姘煎幖閿曘垽骞嶉鍓э紲闁诲函缍嗛崑鍕倶閹绢喗鐓曢柍鐟扮仢閸旀粎锟藉灚婢樼�氼厾鎹㈠☉銏狀潊闁靛繒濮甸悘鍫ユ倵鐟欏嫭绀冩い銊ワ工閻ｅ嘲螖閸涱喖浜楅柟鍏肩暘閸ㄧ粯绂嶉鍕ㄦ斀闁绘ɑ顔栭弳婊呯磼鏉堛劍绀嬬�规洘鍨块獮瀣晝閿熺晫澹曡ぐ鎺撶厸闁搞儮鏅涢鎾绘煙瀹勬澘妲婚柍钘夘樀楠炴帡骞樼�电缍冮梻鍌欐祰椤曟牠宕板璺虹婵鎷风�规洘妞介弫鎾绘偐閹绘帞鐛╂俊鐐�栭幐鎾礈濠靛绠熼柣妤�鐗忕弧锟介梺姹囧灲濞佳勭閿曞倹鐓曟い顓熷灥閻忥妇锟借娲滈幊鎾跺弲濡炪倕绻愮�氼噣寮昏濮婇缚銇愰幒鎿勭吹闂佺粯甯粻鎾诲箖閿熺姴唯闁冲搫鍊婚崢浠嬫⒑閸濆嫭宸濋柛瀣洴閺佹捇鎸婃径瀣闂佽法鍠曟慨銈夋偄椤掑嫬绠柨鐕傛嫹? 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕婵犲倹鍋ラ柡灞诲姂瀵挳鎮欑拠褎瀚归柛婵勫劤娑撳秹鏌″搴″箺闁绘挻娲橀妵鍕箛閸撲胶蓱缂備緤鎷烽柨鐔烘櫕缁辨帡鎮欓锟介崝銈嗙箾绾绡�鐎殿喖顭烽幃銏ゆ偂鎼达絿鏆伴梻浣虹帛椤ㄥ懘鎮у鍏炬盯宕熼鐘碉紲闂佺粯鍔﹂崜娆撳礉閵堝棎浜滄い鎾跺Т閸樺锟芥鍠栭…鐑藉极閹邦厼绶炲┑鐘插閺夋悂姊绘担铏瑰笡妞ゃ劌鎳橀幃褎绻濋崶銊у弳濡炪倖鎸堕崹娲煕閹达附鐓欓柤娴嬫櫅娴犳粌鈹戦敍鍕珪缂佽鲸甯為幏鐘绘嚑椤掞拷閳敻鎮楀▓鍨灈妞ゎ參鏀辨穱濠囧箹娴ｅ摜鍘搁梺绋挎湰閻喚鑺辨禒瀣拻濞达絼璀﹂悞楣冩煛閸偄澧扮紒顔界懇楠炲鏁傜紒妯绘珕闂備浇娉曢崳锕傚箯閿燂拷 by changhao
						{
							return false;
						}
					}
					else
					{
						fire.pb.fushi.SFreeDisRewardConfig e = fire.pb.main.ConfigManager.getInstance().getConf(fire.pb.fushi.SFreeDisRewardConfig.class).get(itemid);
						if (e == null)
						{
							return false;
						}
						
						int count = 0;
						for (Integer id : e.itemids)
						{
							Integer itemnum = rewarddistribution.get(id);
							if (itemnum != null && itemnum > 0)
							{	
								count += itemnum;
								
								if (bag.isFull())
								{
									fire.pb.item.ItemMaps tempBag = fire.pb.item.Module.getInstance().getItemMaps(roleid, fire.pb.item.BagTypes.TEMP, false);
									
									if (tempBag.doAddItem(id, itemnum, "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К闂備胶顭堢悮顐﹀礉鎼淬劌绠熼柟闂寸缁秹鏌涢锝嗗剷闁靛鏅滈悡鏇㈡煙閼割剙濡芥繛鍛閺屾稒鎯旈敐鍛亪闂佸搫鏈ú婵堢不濞戞熬鎷烽敐搴濈敖闁告梹娼欓埞鎴︽倷閹绘帞楠囬梺璇″枛閸婃悂锝炶箛娑欐優闁革富鍘鹃敍婊冣攽閳藉棗鐏犻柟纰卞亰閿濈偛鐣濋崟顑芥嫼闂侀潻瀵岄崢鎼佸箯閿熺姵鐓曢悗锝庝悍瀹搞儲銇勯弴顏嗙М鐎规洏鍔嶇换婵嬪礋椤撶喎娈為梻鍌欐祰濞夋洟宕伴弴鐐嶆盯宕熼銈囩◤闂婎偄娲﹂幏瀣洪宥嗘櫆閻庡箍鍎卞Λ娆忊枍瀹�鍕拻濞达綀濮ょ涵鍫曟煕閻樿櫕宕岀�殿喗鐓￠、鏇㈠Χ閸涱厾浜伴梻浣告惈閸燁偊宕戞繝鍥х闁绘垼濮らˉ鍫熺箾閹寸偟鎳勯柛鐘冲姍濮婂搫煤鐠囨彃绠瑰┑鈽嗗亝缁诲牆顕ｇ拠娴嬫闁靛繒濮烽崝鎾⒑閸涘﹤濮﹀ù婊勭墪椤﹪濡搁埡鍌楁嫼缂傚倷鐒﹁摫閻忓繒澧楃换娑㈡嚑椤掞拷閺嬫稓锟芥鍠涢褔顢橀崗鐓庣窞濠电姴瀚獮鎰攽閻愯埖褰х紒韫矙楠炲鍨鹃弬銉︾亖闂佸壊鍋呭ú姗�鍩涢幋锔藉�甸柛锔诲幖鏍″銈冨劚椤︿即濡甸崟顖涙櫆闁绘劦鍓氬В鍫澪旈悩闈涗粶闁哥噥鍨崇划瀣箳閺冩挻瀚归柨婵嗘噽娴犳盯鏌￠崪浣稿闁宠鍨块幃娆撳级閹寸姳妗撻梺鑹帮骏閸婃繈寮婚敍鍕舵嫹閿濆骸浜為柟鍐插暣閺屽秶鎲撮崟顐や紝濡炪們鍨洪悷褍鈽夐悽鍛婄叆閻庯綆鍋呭В搴♀攽閻樻鏆滅紒杈ㄦ礋瀹曟垵螣閻撳骸鐏婂┑鐐叉閹告瓕绻氬┑鐐舵彧缂嶏拷闁稿﹣绮欏顕�鏁撴禒瀣闁告稑鐡ㄩ崑锟犳⒑椤撱劏顓洪柟椋庡厴楠炴绱掑Ο閿嬪闂備胶鍘ч～鏇㈠磹閺囥垹鍑犻柟瀛樼箥閻斿棝鏌ｉ悢鍝勵暭妞ゃ儯鍨介弻鏇㈠幢濡わ拷閿熻棄鐏濋锝嗙節濮橆儵銊╂煥閺冨浂娼愰悗姘虫閳规垿鎮欓懜闈涙锭缂備浇寮撶划娆撶嵁婢舵劖鏅搁柣妯垮皺閺屽牓姊虹紒妯哄闁稿簺鍊濋幃锟犳偄閸忚偐鍘介梺鍝勫暙閻楀﹪鏁嶉悢鍏肩厵闁肩⒈鍓欐禍鐐亜閵婏絽鍔﹂柟顔界懇閹崇娀顢楅崒銈呮櫔闂傚倷娴囧銊╂倿閿曞倸绠查柛銉墮閺嬩線鏌熼崜褏甯涢柡鍛倐閺屻劑鎮ら崒娑橆伓", fire.log.enums.YYLoggerTuJingEnum.tujing_Value_monthcard_reward, 2) != itemnum)
									{
										return false;
									}
								}
								else
								{
									if (bag.doAddItem(id, itemnum, "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆樻К闂備胶顭堢悮顐﹀礉鎼淬劌绠熼柟闂寸缁秹鏌涢锝嗗剷闁靛鏅滈悡鏇㈡煙閼割剙濡芥繛鍛閺屾稒鎯旈敐鍛亪闂佸搫鏈ú婵堢不濞戞熬鎷烽敐搴濈敖闁告梹娼欓埞鎴︽倷閹绘帞楠囬梺璇″枛閸婃悂锝炶箛娑欐優闁革富鍘鹃敍婊冣攽閳藉棗鐏犻柟纰卞亰閿濈偛鐣濋崟顑芥嫼闂侀潻瀵岄崢鎼佸箯閿熺姵鐓曢悗锝庝悍瀹搞儲銇勯弴顏嗙М鐎规洏鍔嶇换婵嬪礋椤撶喎娈為梻鍌欐祰濞夋洟宕伴弴鐐嶆盯宕熼銈囩◤闂婎偄娲﹂幏瀣洪宥嗘櫆閻庡箍鍎卞Λ娆忊枍瀹�鍕拻濞达綀濮ょ涵鍫曟煕閻樿櫕宕岀�殿喗鐓￠、鏇㈠Χ閸涱厾浜伴梻浣告惈閸燁偊宕戞繝鍥х闁绘垼濮らˉ鍫熺箾閹寸偟鎳勯柛鐘冲姍濮婂搫煤鐠囨彃绠瑰┑鈽嗗亝缁诲牆顕ｇ拠娴嬫闁靛繒濮烽崝鎾⒑閸涘﹤濮﹀ù婊勭墪椤﹪濡搁埡鍌楁嫼缂傚倷鐒﹁摫閻忓繒澧楃换娑㈡嚑椤掞拷閺嬫稓锟芥鍠涢褔顢橀崗鐓庣窞濠电姴瀚獮鎰攽閻愯埖褰х紒韫矙楠炲鍨鹃弬銉︾亖闂佸壊鍋呭ú姗�鍩涢幋锔藉�甸柛锔诲幖鏍″銈冨劚椤︿即濡甸崟顖涙櫆闁绘劦鍓氬В鍫澪旈悩闈涗粶闁哥噥鍨崇划瀣箳閺冩挻瀚归柨婵嗘噽娴犳盯鏌￠崪浣稿闁宠鍨块幃娆撳级閹寸姳妗撻梺鑹帮骏閸婃繈寮婚敍鍕舵嫹閿濆骸浜為柟鍐插暣閺屽秶鎲撮崟顐や紝濡炪們鍨洪悷褍鈽夐悽鍛婄叆閻庯綆鍋呭В搴♀攽閻樻鏆滅紒杈ㄦ礋瀹曟垵螣閻撳骸鐏婂┑鐐叉閹告瓕绻氬┑鐐舵彧缂嶏拷闁稿﹣绮欏顕�鏁撴禒瀣闁告稑鐡ㄩ崑锟犳⒑椤撱劏顓洪柟椋庡厴楠炴绱掑Ο閿嬪闂備胶鍘ч～鏇㈠磹閺囥垹鍑犻柟瀛樼箥閻斿棝鏌ｉ悢鍝勵暭妞ゃ儯鍨介弻鏇㈠幢濡わ拷閿熻棄鐏濋锝嗙節濮橆儵銊╂煥閺冨浂娼愰悗姘虫閳规垿鎮欓懜闈涙锭缂備浇寮撶划娆撶嵁婢舵劖鏅搁柣妯垮皺閺屽牓姊虹紒妯哄闁稿簺鍊濋幃锟犳偄閸忚偐鍘介梺鍝勫暙閻楀﹪鏁嶉悢鍏肩厵闁肩⒈鍓欐禍鐐亜閵婏絽鍔﹂柟顔界懇閹崇娀顢楅崒銈呮櫔闂傚倷娴囧銊╂倿閿曞倸绠查柛銉墮閺嬩線鏌熼崜褏甯涢柡鍛倐閺屻劑鎮ら崒娑橆伓", fire.log.enums.YYLoggerTuJingEnum.tujing_Value_monthcard_reward, 2) != itemnum)
									{
										return false;
									}
								}												
							}
						}	
						
						if (count > e.getNum()) //闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂嫮鐭婇棁澶愭煛瀹ュ骸骞楅柣鎾崇箰閳规垿鎮欓懠顑胯檸闂佸憡鏌ㄩ悺銊ф崲濞戙垹绠婚柟棰佽兌閸氬姊洪崫鍕伇闁哥姵鐗犻獮鍐煥閸愮偓寤洪梺绯曞墲椤洭寮抽妷褏纾藉ù锝夌細濡炬悂鏌涘▎蹇曠妤犵偛绻橀幃婊堟嚍閵夈垺瀚藉┑鐐舵彧缁插潡鎮洪弬娆剧劷闁规壆澧楅悡鏇㈠箹鏉堝墽鍒伴悽顖氱埣閹藉爼鎮欓悜妯煎幈闂佸搫娲㈤崝宀勬倶閿熺姵鐓冮梺鍨儏缁楁岸鏌曢崶褍顏�殿喕绮欓、鏇綖椤撶喎濯伴梻鍌欒兌缁垶骞栭銈囩濞撴熬鎷烽柟顕嗙節椤㈡洟鏁冮敓浠嬫倷婵犲洦鐓忓┑鐐茬仢閸旀碍鎱ㄩ敐鍛闁宠鍨块幃娆撳箵閹烘挸锟筋垶姊洪崨濠冣拹闁荤啿鏅涢锝嗙節濮橆厼浜滅紒鐐妞存悂寮查锟介埞鎴﹀煡閸℃浠╅梺鍦拡閸嬪懘骞堥妸鈺傛櫇闁稿本绋堥幏娲⒑閸涘﹦绠撻悗姘煎幖閿曘垽骞嶉鍓э紲闁诲函缍嗛崑鍕倶閹绢喗鐓曢柍鐟扮仢閸旀粎锟藉灚婢樼�氼厾鎹㈠☉銏狀潊闁靛繒濮甸悘鍫ユ倵鐟欏嫭绀冩い銊ワ工閻ｅ嘲螖閸涱喖浜楅柟鍏肩暘閸ㄧ粯绂嶉鍕ㄦ斀闁绘ɑ顔栭弳婊呯磼鏉堛劍绀嬬�规洘鍨块獮瀣晝閿熺晫澹曡ぐ鎺撶厸闁搞儮鏅涢鎾绘煙瀹勬澘妲婚柍钘夘樀楠炴帡骞樼�电缍冮梻鍌欐祰椤曟牠宕板璺虹婵鎷风�规洘妞介弫鎾绘偐閹绘帞鐛╂俊鐐�栭幐鎾礈濠靛绠熼柣妤�鐗忕弧锟介梺姹囧灲濞佳勭閿曞倹鐓曟い顓熷灥閻忥妇锟借娲滈幊鎾跺弲濡炪倕绻愮�氼噣寮昏濮婇缚銇愰幒鎿勭吹闂佺粯甯粻鎾诲箖閿熺姴唯闁冲搫鍊婚崢浠嬫⒑閸濆嫭宸濋柛瀣洴閺佹捇鎸婃径瀣闂佽法鍠曟慨銈夋偄椤掑嫬绠柨鐕傛嫹? 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕婵犲倹鍋ラ柡灞诲姂瀵挳鎮欑拠褎瀚归柛婵勫劤娑撳秹鏌″搴″箺闁绘挻娲橀妵鍕箛閸撲胶蓱缂備緤鎷烽柨鐔烘櫕缁辨帡鎮欓锟介崝銈嗙箾绾绡�鐎殿喖顭烽幃銏ゆ偂鎼达絿鏆伴梻浣虹帛椤ㄥ懘鎮у鍏炬盯宕熼鐘碉紲闂佺粯鍔﹂崜娆撳礉閵堝棎浜滄い鎾跺Т閸樺锟芥鍠栭…鐑藉极閹邦厼绶炲┑鐘插閺夋悂姊绘担铏瑰笡妞ゃ劌鎳橀幃褎绻濋崶銊у弳濡炪倖鎸堕崹娲煕閹达附鐓欓柤娴嬫櫅娴犳粌鈹戦敍鍕珪缂佽鲸甯為幏鐘绘嚑椤掞拷閳敻鎮楀▓鍨灈妞ゎ參鏀辨穱濠囧箹娴ｅ摜鍘搁梺绋挎湰閻喚鑺辨禒瀣拻濞达絼璀﹂悞楣冩煛閸偄澧扮紒顔界懇楠炲鏁傜紒妯绘珕闂備浇娉曢崳锕傚箯閿燂拷 by changhao
						{
							return false;
						}
					}
				}
				
				return true;
			}
		};
		grabmonthcardreward.submit();
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 812689;

	public int getType() {
		return 812689;
	}

	public int itemid; // 自由分配道具id by changhao
	public java.util.HashMap<Integer,Integer> rewarddistribution; // 道具分配 道具id value数量 by changhao

	public CGrabMonthCardReward() {
		rewarddistribution = new java.util.HashMap<Integer,Integer>();
	}

	public CGrabMonthCardReward(int _itemid_, java.util.HashMap<Integer,Integer> _rewarddistribution_) {
		this.itemid = _itemid_;
		this.rewarddistribution = _rewarddistribution_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(itemid);
		_os_.compact_uint32(rewarddistribution.size());
		for (java.util.Map.Entry<Integer, Integer> _e_ : rewarddistribution.entrySet()) {
			_os_.marshal(_e_.getKey());
			_os_.marshal(_e_.getValue());
		}
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		itemid = _os_.unmarshal_int();
		for (int size = _os_.uncompact_uint32(); size > 0; --size) {
			int _k_;
			_k_ = _os_.unmarshal_int();
			int _v_;
			_v_ = _os_.unmarshal_int();
			rewarddistribution.put(_k_, _v_);
		}
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CGrabMonthCardReward) {
			CGrabMonthCardReward _o_ = (CGrabMonthCardReward)_o1_;
			if (itemid != _o_.itemid) return false;
			if (!rewarddistribution.equals(_o_.rewarddistribution)) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += itemid;
		_h_ += rewarddistribution.hashCode();
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(itemid).append(",");
		_sb_.append(rewarddistribution).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

