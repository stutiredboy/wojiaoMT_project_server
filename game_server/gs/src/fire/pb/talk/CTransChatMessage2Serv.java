
package fire.pb.talk;

import fire.pb.HelpCountManage;



// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CTransChatMessage2Serv__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CTransChatMessage2Serv extends __CTransChatMessage2Serv__ {
	@Override
	protected void process() {
		// protocol handle
		final long roleId = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleId < 0)
			return;
		if(fire.pb.talk.ChatChannel.isShutUp(roleId))
			return;
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╄兌閿熻棄绠嶉崕閬嵥囬婊呯焼閻庯綆鍋佹禍婊堟煙閸濆嫮肖闁告柨绉甸妵鍕棘閹稿骸鏋犲┑顔硷功缁垶骞忛崨顖涘枂闁告洦鍋傞崫妤呮⒒娴ｄ警鐒鹃悗娑掓櫅椤啴鎸婃径灞炬濠电姴锕ら崯鐘诲几鎼淬劍鐓欓悗娑欘焽缁犮儲淇婇锝囩煉闁诡喖鍢查…銊╁川椤撗勬瘔闂佹眹鍩勯崹閬嶃�冩繝鍥х畺闁炽儲鏋煎Σ鍫熸叏濡厧浜鹃悗姘愁潐椤ㄣ儵鎮欓懠顑胯檸闂佸憡姊归懝鎹愮亙闂佺粯顭堝▍鏇㈠磹閹扮増鐓熸繛鎴濆船濞呭秶锟芥鍠曠划娆撱�佸锟介幃銏ゅ传閸曨偆鐫勯梻鍌氬�风粈渚�骞夐敓鐘茬闁挎梻鏅々鍙夌節婵犲倻澧曢柛鎴犲У缁绘盯骞嬪▎蹇曚痪闂佺粯鎸婚惄顖炲箖濮楋拷閹瑩骞撻幒鍡樺瘱婵犵數鍋涘璺侯焽濞嗘挸鐓橀柟杈鹃檮閺咁剟鏌涢弴銊ヤ簻妤犵偛顑呴—鍐Χ閸愩劎浠鹃梺鑽ゅ暱閺呯娀鐛崘顔肩労闁告劏鏅涢崝鍛渻閵堝棙鈷愰柛銊︾箓椤繈鏁冮崒娑掓嫽闂佺鏈懝楣冩晸娴犲妫戠紒顔肩墛缁楃喖鏁撴禒瀣祦濠㈣埖鍔栭弲鎼佹煟濡搫鏆卞ù鐙�鍙冨娲濞戣鲸孝闂佸搫鎳忕划鎾愁嚕閹绘巻鏀介悗锝庡亞閸橆亝绻濋姀锝嗙【婵☆偅鐟ラ埢宥夊川椤撗勭闂佸憡绋戦悺銊╁煕閹达附鐓曟繛鎴烇公閺�璇差熆鐠哄搫顏柡灞剧洴婵℃悂濡堕崨顓犮偖闁诲氦顫夊ú姗�鏁冮姀銈呮瀬闁规儳顕々鐑芥倵閿濆骸浜愰柟閿嬫そ濮婂宕掑鍗烆杸婵炴垶鎸鹃幊鎾诲煡婢跺娼╂い鎰剁到婵即姊绘担铏瑰笡闁告棑绠撳畷婊堟晝閸屾氨鏌堥梺鎼炲労閸撴岸鍩涢幒妤佺厱閻忕偞宕樻竟姗�鏌ㄩ悢鐑樻珪闁稿繑锕㈤獮濠偽旈崨顓㈠敹闂佸搫娲﹂〃鎰板箯閻戣姤鏅濋柛灞惧哺閸炲爼姊虹紒妯荤；闁绘帪绠撻、娆撳籍閸啿鎷洪悷婊呭鐢鏁嶉悢鍏肩厽闁硅櫣鍋熼悾鐢碉拷娈垮枟瑜板啴鍩為幋锕�鐐婇柕澶堝�楅惄搴ㄦ⒒婵犲骸浜滄繛璇х畵楠炴劙鎮欓浣圭彿闂佸搫娲㈤崹娲偂閵忋倖鐓曢柟鏉垮悁缁ㄥ鏌＄�ｎ偆娲撮柡宀嬬磿娴狅妇鎷犻幓鎺濇綆闂備浇顕栭崰鎾诲垂閽樺鏆︽い鎰剁畱缁�瀣煙鐎涙鎳冮柣蹇ｅ枤缁辨帗娼忛妸銉﹁癁闂佽桨鐒﹂幑鍥箖閹呮殕閻庯綆鍋勯鍫曟⒑閹稿海绠撳Δ鐘虫倐瀵悂鎮㈤崗鑲╁帗闂備礁鐏濋鍛归锟介弻锛勪沪閸撗勫垱濡炪們鍨哄ú鐔镐繆閸洖宸濇い鏂垮綖缁ㄦ挳姊婚崒娆戠獢婵炰匠鍏炬稑鈻庨幋鐐存闂佸湱鍎ら〃鍡欑不閹烘鈷掑ù锝堟鐢盯鏌ｉ悢闂存喚妤犵偛绻橀幃婊堟嚍閵壯冨箞婵犵數鍋涘Λ妤冩崲閹版澘姹叉繛鍡樺姂娴滄粍銇勯幇鈺佺伄缂佺姾宕甸敓鍊燁潐濞诧箓宕戞繝鍌滄殾婵犻潧顑呯壕褰掓煟閺傚灝顥忓ù鐘櫊濮婃椽鎮烽弶鎸幮╁銈嗗灥閹虫﹢骞冩ィ鍐╁�婚柦妯侯槺閸婄偛顪冮妶鍛閻庢凹鍓熼悰顔界瑹閿熻棄顫忔繝姘＜婵﹩鍓ㄩ幏閿嬵槹鎼达絿鐒兼繛鎾寸啲閹烽攱顨ラ悙宸█闁轰焦鎹囬幃鈺咁敋閸℃ê顏堕梺鍛婂姦閸犳牕顔忓┑瀣厸濠㈣泛顑呴悘鈺呮煛鐏炵晫澧︽慨濠呮缁棃宕卞Δ锟介瀛樼箾閸喐绀嬮柡灞剧〒閿熸枻鎬ラ崟顒傚絿闂備浇娉曢崰鎾诲疾椤愶箑绠犻柟鎹愵啇閹峰嘲顫濋悡搴＄缂備焦姊婚崰鎾绘晸閺傘倗绉甸柛鐘崇墱缁辨帡鍩℃导鍗炵秺閹晛顔忛鐓庡闂備胶顭堥敃锕傚极婵犳艾钃熼柕濞垮劗閺�浠嬫煕閳╁啰鎳冮柛銈庡墰缁辨挻鎷呴棃娑橆瀱缂備緡鍠楅悷鈺侇嚕鐠囨祴妲堟俊顖涚矌閸犳挾妲愰幒鎳崇喖鎮�涙ê顏堕梺褰掑亰閸樹粙宕ｈ箛鎾斀闁绘ɑ褰冮弳鐐烘煏閸ャ劎绠橀柨鐔凤拷鐕佹綈婵炴彃绻樺畷婵嗩吋閸ャ劌搴婂┑鐘绘涧椤戝懐澹曢崗鍏煎弿闁挎繂妫楅婊勭箾閼碱剙鏋庢い顐㈢箰鐓ゆい蹇撳缁愭稒绻濋悽闈浶㈤悗姘煎弮瀹曞疇顦冲ǎ鍥э躬婵″爼宕堕‖顕嗙秮閺岀喖顢欓悡搴嫹閸ф鍨傚Δ锝呭暞閺呮繈鏌涚仦鐐殤闁稿﹦鍋涢—鍐Χ閸℃鍤嬮梺褰掝棑閸忔ê顫忓ú顏勭闁绘劖娼欓弸鐘绘⒑閸濆嫮鐒跨紒缁樼箓閻ｇ兘宕奸弴鐐靛幐婵炶揪缍�椤鎯侀敐澶嬧拻濞达絽鎽滅粔娲煛閿熶粙宕￠悜鍡樺瘜闂佽姤锚椤﹁棄顭囬弽顓熺叄闊洦鍑瑰鎰版煕韫囨梻鐭掗柡灞剧☉閳藉宕￠悙鑼唺婵犳鍠涢～澶愩�冩繝鍌ゆ綎闁惧繐婀遍惌娆愮箾閸℃ê鍔ら柛鎾逛含缁辨挻鎷呴崜鎻掑壉闁汇埄鍨遍〃鍫㈠垝濮橆厽缍囬柕濞у懐妲囬梻浣规偠閸庢粓宕担鍓愭繄绱撻崒姘拷鐑芥倿閿曞倶锟藉啯寰勬繝搴㈢闂侀潧臎閸℃ぅ鈩冪節閻㈤潧校缁炬澘绉归崺娑㈠箣閿旂晫鍘介梺缁樻⒒閸樠勭娴煎瓨鐓曢柕鍫濇搐閺嬫盯鏌＄仦鍓с�掗柨鐔告灮缂嶅棝宕戦崱妞曟椽骞橀鐣屽幍濡炪倖姊归弸濠氭嚀閸ф鐓曢柍鍝勵儑缁★拷閻庤娲樼敮鎺楀煝鎼淬劌绠ｉ柣妯虹仛濮ｅ酣姊婚崒姘拷椋庣矆娓氾拷楠炲鏁撻悩鍐蹭画闂侀潧顦弫锟犲炊椤掑鏅┑鐐村灦閻熴儱顕ｉ崸妤佲拺闁硅偐鍋涢崝鎾煕閹炬潙鍝洪柟顕嗙節瀹曟﹢顢欓挊澶夌敾婵犵數鍋涘Λ妤冩崲閹伴偊鏁傞柍鍝勬噺閻撶喖鐓崶銊︽儎闁搞倗鍠栭弻銊╂偄閸戙倖瀚归柣鏇氱劍缂嶅牆鈹戦悙鎻掔骇闁绘濞�楠炲啴濡烽敂楣冩缂備礁顑嗙�笛囨倵椤掑嫭鈷戠紒瀣硶閻忛亶鏌涚�ｎ偆銆掔紒顔肩墦瀹曞ジ濮�閳ヨ櫕鐎鹃梻濠庡亜濞诧妇绮欓幋婢囧箵閹规缍婇幃鈩冩償閿濆棙鍠栭梻浣瑰▕閺�杈╂暜閿熺姴钃熸繛鎴炵煯濞岊亪鏌涢幘妤�瀚▍娆撴⒒娴ｄ警鐒剧紒缁樺姍瀵敻顢楅崟顐嬶箓鏌涢弴銊ョ伇闁轰礁娲弻锝夊箛閻楀牊閿梺鎰佷簽閺佸骞冨Δ锟介埢鎾诲垂椤旂晫浜鹃梻浣芥〃缁�渚�鈥﹂悜钘壩ュù锝堝�介弮鍫濆窛妞ゆ挾濯寸槐鍙夌節閻㈤潧孝闁挎洏鍊濋獮濠囧箛閺夊灝鍋嶅銈嗙墱閸嬬偤鍩涢幒鎳ㄥ綊鏁愰崶鈺傛啒濠电偛鍚嬮崝娆撳蓟濞戞瑦鍎熼柕蹇曞Л閺嬫瑥顪冮妶鍐ㄧ仾鐎癸拷閹间降锟戒礁顫滈敓浠嬪春閿熻姤銇勯幒鎴敾閻庢艾缍婇弻娑樷槈濞嗘劗绋囬梺娲诲幗椤ㄥ懘鈥︾捄銊﹀磯闁惧繒鎳撻。鍦磽娴ｉ潧濡兼い顓炲槻椤繐煤椤忓嫪绱堕梺鍛婃处閸樻悂寮搁崱娑欌拺缂佸顑欓崕蹇涙倵濮樼厧骞樼紒顔碱儔楠炴帒螖娴ｈ鐝栭梻浣侯焾閺堫剛绮欓幘璇插偍濞寸姴顑嗛埛鎴︽偡濞嗗繐顏╅柛鏂诲�栭妵鍕即閵娿儱绠归柣鎾卞�濋弻鐔虹磼閵忕姵鐏嶉梺缁樻尰閻╊垶骞冨锟介幃娆愶紣濠靛棙顔勫┑鐘愁問閸犳牠宕愰崸妤�钃熼柣鏃傗拡閺佸﹪鏌涘┑鍡楊伒闁瑰嘲鍢查埞鎴﹀幢濞嗘劖顔曢梻浣告贡閸庛倝宕归悢鑲猴綁宕奸悢绋垮伎濠德板�ч幏閿嬩繆椤愶絾鈷掓俊鍙夊姍閺佹捇鏁撻敓锟�?1闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞楅梻渚�娼х换鍫ュ春閸曨垱鍊块柛鎾楀懏锛忛梺璇″瀻瀹�锟介崥瀣⒑閸濆嫮鐒跨紓宥勭窔閻涱噣宕堕澶嬫櫓闂佸吋浜介崕鏌ユ儊鎼淬劍鈷掑ù锝堫潐閵囩喖鏌涘Ο鍦煓闁诡喚鍏橀崺锟犲川椤旈棿绨垫俊鐐�栭崝褏绮婚幋锔藉�峰┑鐘叉处閻撳繐鈹戦悙鎴濈У鐎氱懓鈹戦埄鍐ㄧ祷闁绘绻掑Σ鎰板箻鐎靛摜鎳濇繝鐢靛Т閸燁偊顢旂捄琛℃斀闁绘﹩鍠栭悘閬嶆煕閳哄倻澧电�规洘绻堝鎾偐閸忓摜鐟濋梺鑽ゅ枑閻熴儳锟芥凹鍠氱划缁樸偅閸愨晝鍙嗗┑鐘绘涧濡繈顢撳Δ锟介…鑳檨闁哥姵鐗犻崺鐐哄箣閿旇姤娅栭梺鍛婃处閸嬪嫭绂掑Ο渚富闁靛牆鍊瑰▍鍛存煏閸埄鐒鹃柣锝囧厴婵℃悂鍩℃繝鍐╂珝婵犵數鍋為崹鍫曟偡閿曞倸绾ч柛娑橈梗缁诲棝鏌ｉ幇鍏哥盎闁跨喕濮ら悧鏇綖韫囨哎浜归柟鐑樺灥閸ゆ垹绱撻崒娆戝妽妞ゎ厼娲幃椋庢喆閸曨厾顔曢梺鐟扮摠閻熴儵鎮橀鍫熺厽闁规儳鐡ㄧ粈瀣殽閻愬澧繛鐓庣箻瀹曟粏顦撮拑閬嶆⒒娴ｈ櫣甯涢悽顖涱殘閿熺晫鐟抽崶顬箓鏌涢弴銊ョ仭闁哄懏绻堥弻銊╂偄缂佹﹩妫勯梺鎸庢磸閸ㄤ粙寮婚崱妤婂悑闁糕剝蓱椤忕喖姊绘担渚劸闁挎洩绠撳畷鎶藉Ψ閵夘喚鍔烽梺褰掑亰閸樺墽绮绘ィ鍐╃厱婵炲棗娴氬Ο鍫ユ煟閹哄秶鐭欓柡灞稿墲缁楃喖宕惰閻濇繂螖閻橀潧浠﹂悽顖涘笩閻忓啴鏌ｆ惔顖滅У闁告挻鐩崺锝夊Χ閸℃瑧鐦堥梺姹囧灲濞佳囧煝閸喓绠惧ù锝呭暱濞村倿寮崟顖涚厵闁绘鐗婄欢鏌ユ煛鐎ｂ晝绐旈柡灞剧洴瀵挳濡搁妷銉ョ濠电偛鐡ㄧ划宥囧垝閹捐钃熼柣鏃傚帶缁狙囨煕椤垵娅橀柡鍡愬灮缁辨挻鎷呴崜鍙壭﹂梺缁樼墪閵堢顕ｆ繝姘у璺猴功妤犲洭姊洪崷顓х劸濡ょ姴鎲＄粋鎺楀箻椤旇В鎷洪梺鍛婄箓鐎氼噣鎮炵捄銊х＜閺夊牄鍔嶇粈鍐磼閸屾稑娴柡浣稿�块幃娆擃敆閿熶粙鎮垫导瀛樷拺闁革富鍘剧敮娑㈡偨椤栨娅婇柟顔筋殜楠炲酣鎳為妷銏″濠电偠鎻徊浠嬪箺濠婂牆鍑犻柛鎰ㄦ櫃缁诲棙銇勯幇鈺佺仼妞ゅ浚鍙冮幐濠傗攽閸ャ儰绨婚梺鍝勭Р閸斿海绮诲Ο濂界懓顭ㄩ敓鐣屽垝濞嗗浚娼栫紓浣股戞刊瀵哥磼鐎ｎ偄顕滈柛濠庡灣缁辨挻鎷呮搴″闂佸湱顭堥崯鍧楊敋閿濆绠甸柟鍝勬椤秴鈹戦悙鍙夘棡闁告梹娲栭锝夊锤濡や胶鍘告繝銏ｆ硾閿曪附鏅堕幋锔界厱闁哄倹瀵ч幑锝囷拷娈垮暙閸ャ劍娅㈡繛瀵稿Т椤戝棝鍩涢幋鐐村弿闁荤喓澧楅幖鎰版煟韫囨挸绾х紒缁樼♁閹峰懘宕橀幓鎺濅紑濡炪倐鏅濋崗姗�寮婚妸鈺佸嵆闁绘劘顕滈幏鐤亹閹烘挸浜楀┑鐐叉閸ㄥ湱澹曟總鍛婂�甸柨婵嗛娴滄粍銇勯弴鐔虹煉闁哄本鐩幃銏ゅ传閸曨亝顫曢梻浣告惈閻鎹㈠┑鍡欐殾闁靛ň鏅涚痪褔鎮归幁鎺戝閻㈩垰娼″缁樻媴缁涘娈愰梺鎼炲妼瀹曨剝鐏嬮梺鍛婂姀閺呮瑧鎹㈤崱娑欑厵闂傚倸顕ˇ锕傚船椤栫偞鍋℃繝濠傚暟缁犺崵锟芥鍠楅幃鍌炲极閹惧顩烽悗锝庡亐閹峰姊虹粙鎸庢拱闁荤喆鍔戝畷妤�鐣濋敓鐣屾閹烘鏁嬮柛娑卞幘娴犳悂姊洪棃娑欘棞闁哥喐娼欓悾鐑藉Ω瑜濋幏宄扳槈濞咁収浜濈粋宥嗘綇閵娧呯槇闂佹眹鍨藉褍鐡梻浣告憸閸ｃ儵宕戞繝鍌滄殾鐟滅増甯掔猾宥夋煕椤愩倕鏋庨柨鐔烘櫕閺佽顫忔繝姘唶闁绘棁銆�濡俱劑姊虹憴鍕祷闁硅姤绮撻幆锟芥い蹇撶墕缁犳氨鎲哥�ｎ喖纾婚柕蹇嬪�栭悡娆愩亜閺冨倻鎽傛繛鍫熺矒閺屸剝鎷呴悷鏉款潔闂佽鍨卞Λ鍐垂閹呮殾闁搞儴娉涢弲銉х磽閸屾艾锟界兘鎳楅崼鏇熸優閹兼番鍔岄惌妤呮煥閻旇袚缂佺粯绋掑鍕拷锝庡墯閸掓稑鈹戦悪鍛婵炴挻鐔幏閿嬫叏婵犲懏顏犵紒杈ㄥ笒铻ｉ悹鍥皺椤ｅ弶绻濋悽闈涗沪闁瑰憡濞婂銊╂焼瀹ュ懐鏌ч梺鍓插亝濞叉﹢寮插鍫熺厾闁诡厽甯掗崝姘憋拷娈垮枟鐎笛呮崲濠靛鍋ㄩ梻鍫熷垁閵忋倖鐓曢柣鏇氱閻忥箑鈹戦敓鐘虫锭闁宠鍨垮畷濂割敆娴ｅ壊浼撻梺鑽ゅ枑閻熴儳锟芥凹鍘藉鍕礋椤栨稓鍘遍柣搴秵娴滃嘲顔忛妷鈺傜厽闁挎繂娲ら崢鎾煙椤斿搫鐏柛鐘诧攻濞煎繘濡搁敂鐣屽絿闂傚倸鍊烽悞锔撅拷绗涘懐鐭欓柟瀵稿閹峰嘲顫濋悡搴＄睄閻庢鍠栧鍓佺紦娴犲宸濆┑鐐靛亾鐎氫粙姊绘担渚劸闁哄牜鍓熼幃鐤樄閽樻繈鏌ㄩ弴鐐诧拷褰掓偂濞嗘挻鍋ｉ柛銉ユ搐閹虫劙鏁嶉悢灏佹斀闁绘瑥鎳忕�氳绻涙潏鍓хК婵炲拑绲挎竟鏇㈡寠婢跺牞鎷烽幒鎴僵妞ゆ帊鐒﹂幃娆撴⒑閸濆嫷鍎戦柛鐘崇墵瀵鏁愭径瀣簻闂佸憡鐟ラˇ浼存偟濮樿埖鈷戠紓浣姑肩欢閬嶆煕閿濆繒鍒伴柣锝囧厴瀹曪繝鎮欓埡鍌ゆ綌婵犵妲呴崹鎶藉储瑜旈弫鎾绘偩鐏炴垝妲愬┑顔硷攻濡炶棄螞閸愩劉妲堥弶鍫氭櫅婵ジ姊绘担渚劸閻庢稈鏅涢—鍐寠婢跺本娈鹃梺姹囧灮椤牆娲垮┑鐘灱濞夋盯顢栭崒鐐茬婵炲樊浜濋埛鎴︽煕濞戞﹫鍔熺紒鐘虫崌閹顫濋锟藉Σ濠氬础鏉堚晜鍠愰柣妤�鐗嗙粭姘舵煟閹惧瓨绀嬮柡灞炬礃缁绘盯宕归鐓幮戠紓鍌欑椤︽澘顪冩禒瀣濠电姴鍊甸弨浠嬫煕閵夛絽鍔欑紒銊ヮ煼濮婃椽宕崟顒傘偐婵炲瓨绮嶇换鍕晸閼恒儲鐨戦柟铏崌閸╃偤骞嬮敂缁樻櫓缂佺虎鍙冮弨閬嶅极閹�鏀介柨娑樺娴犫晜淇婇銏狀伃闁诡喗鍎抽悾锟犳焽閿旇棄缂撻梻浣芥硶閸犳洖螞閸曨垱鍋╅柣鎴ｅГ閺呮煡鏌涢埄鍐炬畼缂佹劗鍋ら弻锝嗘償椤栨粎校婵炲瓨绮嶇划宥囩博閻斿鍚嬪璺侯儌閹峰姊虹粙鎸庢拱闁荤啙鍥佸洭鏁冮崒娑氬幍闂佸吋浜介崕鎶芥儗閹烘棑鎷风憴鍕濠电偛锕ユ穱濠囨倻閽樺鍘告繛杈剧到閹芥粓鏁撶粵瀣籍婵﹥妞藉畷婊堝箵閹哄秶鍑规繝鐢靛仜瀵爼鎮у鍛灊濠电姵鑹鹃崘锟藉銈庡墻閸撴艾螞閸愵喖鏋侀柟鐗堟緲瀹告繃銇勯幘璺烘瀾妞ゆ柨顦靛缁樻媴閾忕懓绗￠柣銏╁灣閸犳牕鐣烽幋锕�绠涢柣妤�鐗婂▍銏ゆ⒑閼恒儍顏埶囬柆宥嗗仼妞ゆ挶鍨洪悡鏇㈠箹缁櫢鎷风�圭姴鐓橀梺鎹愬吹閸嬬偟鎹㈠☉銏犵婵炲棗绻掓禒濂告⒑缁嬭儻顫﹂柛鏃�鍨垮濠氭偄閸忓皷鎷婚柣搴ｆ暩椤牊淇婃禒瀣拺闁规儼濮ら弫閬嶆煕閵娿儲鍋ユ鐐插暢閵囨劙骞掗幋鐘垫殺闂備礁婀遍崕銈夊垂閻㈢硶锟芥牠宕煎┑鍐╂杸闂佺粯鍔曞鍫曞闯濞差亝鐓曢柡鍐挎嫹闁荤啿鏅涢锝嗙節濮橆厼浜滈梺缁樻尭濞寸兘藝閳哄懏鈷戦梻鍫熺〒婢ф洘淇婇锝庢疁妞ゃ垺妫冮弫鎾绘晸閿燂拷?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁樺姍濠�渚�姊虹粙璺ㄧ闁告艾顑囩槐鐐哄箣閿旂晫鍘遍梺闈涱焾閸庨亶鏁撻挊澶樼吋妤犵偛顦甸獮鏍ㄦ媴閻熼缃曢梻浣稿閸嬪懐鎹㈤崟顖涘仭闁哄被鍎查埛鎴犵磼鐎ｎ偒鍎ラ柛搴＄箲閵囧嫰鏁傞悙顒佹瘓閻庢鍠栭…宄邦嚕閹绢喗鏅柛鏇ㄥ幗濠㈡垿姊虹拠鎻掑毐缂傚秴妫欑粋宥夋倻閽樺顔嗛梺缁樺灱濡嫰宕￠幎鑺ョ厽婵☆垰鍚嬮弳鈺呮煟閹烘垯鍋㈤柡宀嬬稻閹棃顢涘鍛咃綁姊洪崫銉バｆい銊ワ躬瀹曞搫鈽夐姀鐘殿唺濠德板�撻懗鍫曞储閸楃儐娓婚柕鍫濇婵倿鏌涙繝鍐╃鐎殿喗鎮傚顕�宕奸悢鍝勫笚缂傚倷鐒﹂〃鍛村箹椤愶箑绀夐柨鏃�鎷濋幏宄扳枔閸喗鐏堥梺缁樼墪閵堢鐣峰ú顏呮櫢闁绘灏欓敍婊堟⒑閹稿孩纾荤紒韬插�濋獮蹇涙倻閽樺顔囬柟鍏肩暘閸ㄧ懓顕ｉ幐搴ｇ瘈闁汇垽娼у瓭闁诲孩鍑归崰姘跺极椤斿皷妲堥柕蹇ョ磿閸樼敻鎮楅悷鏉款伀濠⒀勵殜瀹曠敻宕堕埡瀣閻熸瑥瀚径鍕煕鐎ｎ亷宸ラ柣锝囧厴閹垻鍠婃潏銊︽珝闂備胶绮ú鎴犵矆娓氾拷楠炲啰锟斤綆鍠楅埛鎺楁煕鐏炴崘澹橀柨鐔烘櫕閸忔﹢骞婂Δ鍛唶闁哄洨鍋熼悿鍥⒑鐟欏嫬绀冩い鏇嗗洤瑙︾憸鐗堝笚閻撴稓锟藉箍鍎辨鎼佺嵁閺嶎偆纾奸柣娆欐嫹闁搞劌鐖煎濠氬Ω閳哄倸浜為梺绋挎湰缁嬫垿顢旈敓锟�?
		if(funtype==FunModelType.FUN_TASKITEM){
			xbean.helpcount helpcount = xtable.Helpcount.select(roleId);
	    	int max=HelpCountManage.getInstance().getHelpItemNumMax(roleId);
	    	if(helpcount!=null&&helpcount.getHelpitemnum()>=max){
	    		MessageMgr.sendMsgNotify(roleId, 166087, null);
	    		return;
	    	}
		}
		if (funtype == FunModelType.QIU_ZHU) {
			xbean.helpcount helpcount = xtable.Helpcount.select(roleId);
	    	int max=HelpCountManage.getInstance().getHelpItemNumMax(roleId);
	    	if(helpcount!=null&&helpcount.getHelpitemnum()>=max){
	    		MessageMgr.sendMsgNotify(roleId, 166087, null);
	    		return;
	    	}
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姴顭烽弻鈥崇暆閿熶粙宕伴弽顓犲祦闁糕剝绋戠痪褔鏌涢悢宄版殲闁圭懓娲璇测槈濞嗘垹鐦堥梺绋挎湰缁嬫垶绂掗幘顔解拺闁告繂瀚～锕傛煕閺冿拷閸ㄧ敻顢氶敐澶婄妞ゆ洖鎳忛弲婊堟⒑閸涘﹣绶遍柛娆忓鐎靛ジ骞橀弬銉︽杸闂佹寧绋戠�氼剚绂嶆總鍛婄厱濠电偛鐏濋敓鑺ョ箓閻ｇ兘濮�閿涘嫰妾梺鍛婄☉閿曘倝鏁撻崐鐔风厫缂佺粯绻堝Λ鍐ㄢ槈閸愭彃顫犲┑鐐茬摠缁牏鍒掑▎蹇ｆ綎缂備焦蓱婵绱掔�ｎ偄顕滈柛濠庡灣缁辨挻鎷呮搴″闂佸湱顭堥崯鍧楊敋閿濆绠甸柟鍝勬閺傦拷闂佽鍑界徊鑺ヮ殽缁嬫５娲敇閳ь剨鎷锋担绯曟闁靛繆锟界鎷烽悜鑺ョ厸濠㈣泛顑呴悡锟介梺褰掝棑閸忔ê鐣疯ぐ鎺濇晝妞ゆ劧缍嗛崯宥夋⒒娴ｈ櫣甯涢柛鏃�顭囨禍绋库枎閹邦噮娴勯梺闈涚箞閸婃牠鎮￠弴銏＄厸闁告劖瀵х�氬湱绱掗悙顒佺凡缂佸顫夋穱濠囨偨缁嬭法顦板銈嗙墬缁嬫帒鈻嶉崱娑欌拺闁告捁灏欓崢娑㈡煕閻樺磭澧辩紒顔硷躬椤㈡岸鏁撴禒瀣畺婵°倕鍟崰鍡涙煕閺囥劌澧版い锔哄姂濮婃椽骞栭悙鎻掝瀷闂佽桨绀侀…宄扮暦濞差亝鍊烽柛婵嗗椤撴椽姊虹紒妯兼噧闁瑰啿绻掗敓鑺ヨ壘缂嶅﹪寮婚妸銉㈡斀闁糕剝渚楅敓鑺ヮ殔闇夋繝濠傛噹娴犻亶鏌＄仦鍓р槈閾伙絿绱撴担濮戭亞澹曢幎鑺モ拺闁告繂瀚ˇ顒勬煕閹惧绠撴い鏇樺劦瀹曠喖顢樺┑鍥у闂備胶鎳撻悺銊ф暜濡ゅ懎绀嬮柛鎰╁妷閺�浠嬫煟濮楀棗鏋涢柣蹇ｅ櫍閺岀喖鎼归锝呯闁捐崵鍋炵换娑㈠箣濞嗗繒浠肩紓浣哄閸ㄥ爼骞冨畡鎵虫瀻闊洦鎼╂禒鐓庮渻閵堝棙绀嬪ù婊冪埣楠炲啫螖閿熶粙鍩ユ径濞炬瀻婵☆垳鍘ф慨娲⒒娴ｅ憡鍟為柨鏇樺灪缁傚秶鎹勬笟顖涚稁闂佹儳绻愬﹢杈╁閸忛棿绻嗘い鏍ㄧ箓閸氳銇勯敂鍝勫姦婵﹨娅ｇ划娆撳礌閳ュ厖绱ｆ繝鐢靛閹风兘姊洪锟界粔鐢稿疾閹间焦鐓犻柟顓熷笒閸斻儱顭跨憴鍕电劷缂佽鲸鎸搁濂稿椽閸愩劋绱ｆ俊鐐�ら崑鍕崲閹寸姵宕叉繝闈涙－濞尖晜銇勯幒鎴濅喊缂佸崬寮剁换婵嬫偨闂堟稐绮跺┑鈽嗗亝閻熲晛鐣风涵鍛汗闁圭儤鎸告禒鎺楁⒑闂堟稓绠冲┑顕呭弮瀵劍绂掔�ｎ偆鍘介梺褰掑亰閸ㄨ京娑甸悙顑句簻闁靛鍎宠倴闂佽法鍠庨敓鐣屽櫏濞兼劖绻涢崣澶岀煉鐎殿噮鍋呯换婵嗩潩閸楃偟銈﹂梻濠庡亜濞诧箓宕惔銏㈩洸鐟滅増甯楅悡娆撴煟閹寸倖鎴犱焊椤撶伝鐟邦煥閸曨厾鐓夊┑顔硷龚濞咃絿妲愰幒鎳崇喓鎷犻懠顒夋殹濠电姷鏁搁崑娑㈩敋椤撱垹绀傛俊顖涘椤ャ倖淇婇悙顏勶拷鏍洪埡鍛闂佸灝顑嗛崣蹇撯攽閻樺弶鍣烘い蹇曞У缁绘盯骞嬮悩铏瘓閻庤娲忛崝鎴︺�佸▎鎾崇濠靛倸鎲￠弳姗�姊婚崒娆愮グ鐎规洖鐏氶幈銊╂偨缁嬭法顦┑掳鍊曢幊搴ｇ玻濡ゅ懏鐓涚�广儱楠搁獮鏍煛鐎ｂ晝绐旈柡宀�鍠栧畷婊嗩槾閻㈩垱鐩幃妤呮偨闂堟刀銏°亜椤撯剝纭堕柟鐟板缁楃喖顢涘鍐ㄧ秲闂傚倷绀佺紞濠囁夐幘璇茬婵☆垵娅ｉ弳锔炬喐閻楀牆淇柡浣革躬閺岋綁骞囬棃娑橆潽濡炪倖姊瑰ú鏍煘閹达附鍋愮紓浣股戦柨顓㈡⒑缁嬪尅宸ユい顓犲厴閸ㄩ箖鏁冮崒姘跺敹闂侀潧顦崕鎶姐�侀崨瀛樷拺閻熸瑥瀚崝璺衡攽椤斿搫锟芥繈骞冮敓鐘冲亜闁稿繗鍋愰崢鎼佹⒑缁嬫寧婀扮紒瀣灴椤㈡艾顭ㄩ崼鐔哄幍濡炪倖鐗楀銊︽櫠閺囥垺鐓冮悷娆忓閻忓瓨銇勯姀锛勬噰闁瑰磭鍋ゆ俊鐑藉Ψ椤栨稑顏堕梺褰掑亰閸樹粙宕ｈ箛鎾斀闁绘ɑ褰冮顐︽偨椤栨稓娲撮柡宀�鍠庨悾锟犳偋閸繃顏ょ紓鍌欑贰閸犳岸寮幖浣规櫢闁哄倶鍊楃粔鐢告煕鐎ｎ亝顥犵紒顔芥閹粓鎳為妷褍骞楅梺鐟板悑閻ｎ亪宕愰妶鍜佺劷闁归偊鍘剧粻楣冩煕濞嗗浚妾ч柤鏉挎健閺屽秹濡烽婊呮殼閻庤娲栭悥鍏间繆濮濆矈妾ㄥ┑鐐插级閹倸顫忔ウ瑁や汗闁圭儤鎼槐鐢电磽娴ｇ瓔鍟囩紒缁樼箓椤曪綁顢曢敃锟界壕濂告煟閹邦剦鍤熼柛妯哄船椤啴濡堕崱妤�衼缂備浇灏▔鏇犲垝婵犳艾绠荤紓浣诡焽閸橀亶鏌ｆ惔顖滅У濞存粎鍋涢悺顓熶繆閻愵亜锟姐倖绂嶅鍫濈柈閻庢稒眉缁诲棝鏌涢锝嗙妤犵偑鍨烘穱濠囧Χ閸涱厽娈堕梺鐟板暱濡繂顫忛搹瑙勫珰闁圭粯甯╅崝澶愭⒑閸涘﹤鐏ョ紓宥咃工閻ｇ兘鏁愭径濠勵槰濡炪倖妫侀崑鎰版偩濞差亝鈷戦悹鎭掑妼閺嬫柨鈹戦鑺ュ唉鐎规洩绻濋獮搴ㄦ嚍閵壯冨箺闂備礁鎼崯顐⒚洪敃鍌ゆ晜闁绘鍋ㄦ禍婊堟煛閸愭寧瀚瑰┑鐐跺皺閸犲酣锝炶箛娑欐優闁荤喐婢橀褔姊洪崫鍕窛闁稿鐩崺娑欏緞閹邦厸鎷洪梺鍦焾濮橈附绔熷锟介弻宥囨喆閸曨偆浼屽銈冨灪閻熲晛鐣峰Δ鍛亗閹兼番鍨绘禍鐑芥⒒閸屾瑧顦﹂柟纰卞亰閹本寰勫畝锟界粈濠囨煥閻旂儤娅曠紒杈ㄥ浮閹晛鐣烽崶銉嫹閹烘鐓ラ柣鏂挎啞閻忣喚绱撳鍛棡缂佸倸绉撮…銊╁礋椤掞拷瀵潡姊洪棃娑氱疄闁搞劏宕垫竟鏇㈡寠婢规繂缍婇弫鎰板礋椤撶姷鍘梻浣告啞缁诲啫顪冩禒瀣畺濞寸姴顑愰弫宥嗕繆閵堝拋鍎愰悗姘秺閺岀喐锛愭担渚М濠电偛鐗勯崝宀勨�旈崘顔嘉ч柛鈩冾焽閳规盯姊洪崷顓炲幋妞ゃ儲鎹囬弫鎾诲磹閻曚焦缍堝┑鐐插级椤洭寮锟介獮鎺懳旂�ｎ剛鈼ゆ繝鐢靛█濞佳囶敄閹版澘鏋侀柛鈩冪♁閻撱儵鏌ｉ弮鍌氬妺婵炲懏娲滅槐鎺楊敊绾拌京鍚嬮梺杞扮劍閸旀牕顕ラ崟顓ㄦ嫹閿涘崬瀚鐑樼節閻㈤潧浠╅柟娲讳簽瀵板﹪宕稿Δ浣镐槐闂佸搫鍟悧鍡涘触瑜版帗鐓曢柟浼存涧閺嬬喖鏌ｉ幘瀛樼闁哄本娲樼换娑㈠垂椤曞棙瀚归柡鍥╁仧閺嗐倝鏌涢埄鍐嚂闁圭兘顥撻幉鎾礋椤掞拷椤︹晠姊洪幖鐐插婵炲鐩、姘舵晲婢跺﹪鍞堕梺鍝勬川閸嬬喖顢樺ú顏呪拺缂備焦锕╅悞鐐箾閸涱喗绀嬫い銏＄懇瀵挳濮�閳撅拷閹风粯绻涙潏鍓хК婵炲拑绲块弫顔尖槈濞嗘劕寮挎繝鐢靛Т閸嬪棝鎮℃總鍛婄厱闁冲搫鍊诲ú瀵革拷瑙勬礀閵堝憡淇婇悜钘壩ㄩ柨鏃�鎷濋幏鐑筋敆閸曨兘鎷虹紓浣割儓濞夋洟鎮橀柆宥嗙厱閻庯綆鍓欐禒閬嶆煙椤曞棛绡�鐎殿喗鎸抽幃銏ゆ惞鐠団�虫櫗闂傚倷鑳堕幊鎾绘偤閵娧勫床闁稿瞼鍋為崵瀣偡濞嗗繐顏存繛鍫滅矙閺岋綁骞囬澶婃婵犫拃鍡曞惈缂佽鲸甯楀蹇涘Ω閵夛箒鐧佸┑鐘殿暯閸撴繈骞冮崒鐐叉瀬闁圭増婢樺婵囥亜閹捐泛锟筋偊寮撮悢铏圭槇濠电偛鐗嗛悘婵嬪几濞戙垺鐓ラ柡鍥朵簻椤╊剟鏌涢幒鎾虫诞妞ゃ垺鐩幃娆撴嚑椤掑鏁搁梻鍌欑閹诧紕绮欓幒鎴劷婵炲棗娴氶崯鍛節闂堟稒顥戦柡锟芥禒瀣厽婵☆垵顕х徊濠氭煥閻旂儤娅曢柟铏崌閸┿垽骞橀幇浣瑰缓闂佽法鍠曞Λ鍕綖韫囨洜纾兼俊顖濐嚙椤庢捇姊洪崨濠勨槈闁挎洏鍎靛畷鏇㈠箻缂佹ǚ鎷哄┑鐐跺蔼椤曆囩嵁閺嶃劊浜滈柨鏇炲�烽幉鐐殽閻愭潙鐏村┑顕嗘嫹闂佺粯锕╅崑鍛村棘閿熶粙姊绘担铏广�婇柛鎾寸箞閹兘鏁冮敓浠嬪煝閹捐绠氱憸澶愬绩娴犲鐓熸俊顖涱儥閸ゅ锟借鎮堕崕鐢稿蓟濞戙垺鍋勯柛婵嗗閺嬪懘鎮楀▓鍨灁闁告柨绉剁划瀣箳閺冩挻瀚归柨婵嗛娴滄粓鏌ㄩ悢鐑樻珪闁轰礁顭峰濠氬Ω閵夈垺鏂�闂佺硶鍓濇笟妤呮晸閼恒儺娈旈棁澶嬬節婵犲倸顏柣顓熷浮閺岋紕浠﹂崜褎鍒涘Δ鐘靛仦椤洭骞夐幘顔肩妞ゆ挾鍋為柨顓犵磽閸屾艾锟界兘鎳楅崜浣稿灊妞ゆ牜鍋為崕搴€亜閺嶃劌鍤柛銈嗘礋閺屾盯顢曢敐鍡欘槬缂備胶濯寸徊鍓ф崲濠靛顥堟繛鎴炵懄閹瑩姊虹捄銊ユ灁闁烩剝妫冨畷瑙勫閺夋垹鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厵缂備焦锚缁楁岸鏌涙繝搴＄仸婵﹥妞介幊锟犲Χ閸涱喗鐣梻浣告啞娓氭宕㈡總鍛婂�跺┑鐘叉处閳锋垿鏌涢幘鏉戠祷濞存粎鍋ら弻娑㈡偐閸欏宕冲┑鐐叉閸ㄤ粙骞冨▎鎾村�绘俊顖滃帶楠炲秹姊婚崒娆戣窗闁告瑥绻掔划濠氬箣閿旀儳绁﹀┑顔筋殣閹风兘鏌＄仦鍓р槈閾伙絿绱撴担濮戭亞澹曢崘娴嬫斀妞ゆ梻銆嬫Λ姘箾閸滃啰鎮兼俊鍙夊姍楠炴帡骞婂畷鍥ф灈鐎规洖缍婇、姘跺川椤曞懏锛堥梻鍌氬�搁崐椋庣矆娓氾拷椤㈡ɑ绂掔�ｎ亞楠囬梺鍓茬厛閸ｎ噣鎮楅悜鑺モ拻濞达綀濮ょ涵鍫曟煕閻樿櫕绀冮柟渚垮姂婵″爼宕卞▎灞炬暤婵犵數鍋涘Ο濠冪妞嬪海绀婇柡宓瞼鍞甸柣鐘烘閸庛倕锕㈤幍顕嗘嫹鐟欏嫭绀�鐎殿喖澧庨幑銏犫槈閵忕姷顓哄┑鐐叉缁绘帗绂掓ィ鍐┾拺闁告繂瀚崳娲煟閹垮嫮绡�鐎殿喛顕ч埥澶娢熼柨瀣垫綌闂備礁鎲￠〃鍫ュ磻閻愮儤鍊剁�广儱顦伴埛鎴︽偣閸ワ綇鎷烽搹顐や憾闂備浇宕甸崯鍧楀疾濞戭澁缍栭煫鍥ㄦ媼濞差亶鏁傞柛鏇ㄥ弾閸炲爼姊洪悷鏉挎倯闁伙綆浜畷纭呫亹閹广倕娲崺锟犲磼濠婂拋鍟庨梺璇插缁嬫帡鈥﹂崶顒佸剹闁靛牆鎮块悷閭︾叆閹煎瓨绻堥崑妤�螖閻橀潧浠滈柛鐕佸灣閿熶粙娼ч妶鎼佺嵁閺嶎収鏁囬柣鏂挎啞閻濄劑姊婚崒娆愮グ婵炲娲熷畷鏉款吋閸パ冪亰濠电偛妫楀ù姘跺吹閺囩喆浜滈柟鏉垮閻ｈ京绱掗悩鍝勫惞缂佽鲸鎸婚幏鍛存嚃閳╁啫鐏ラ柍璇茬Ч婵拷闁靛牆妫岄幏娲煟閻樺厖鑸柛鏂胯嫰閳诲秹骞囬悧鍫㈠幍闂佸憡鍨崐鏍拷姘炬嫹?
			new mkdb.Procedure() {
				@Override
				protected boolean process() throws Exception {
					xbean.RoleRecourse roleRec = xtable.Rolerecourse.get(roleId);
					if (roleRec == null) {
						roleRec = xbean.Pod.newRoleRecourse();
						xtable.Rolerecourse.insert(roleId, roleRec);
					}
					
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞楅梻渚�娼х换鍫ュ春閸曨垱鍊块柛鎾楀懐锛滈梺褰掑亰閸欏骸鈻撳鍫熺厸鐎癸拷閿熶粙宕伴弽顓犲祦鐎广儱顦介弫濠勭棯閹峰矂鍝烘慨锝咁樀濮婄粯鎷呮笟顖滃姼濡炪倖鍨堕崹褰掑箲閵忕姭鏀介柛鈾�鏅涘▓銊╂⒑閸撴彃浜濇繛鍙夌墵閺屽宕堕妸锕�寮垮┑顔筋殔濡鐛Δ鍛厽婵犻潧娲﹂埛鎺旂磼鏉堛劍灏伴柟宄版嚇閹墽浠﹂悾灞筋潽闂傚倷鑳堕…鍫ユ晝閵夈儍鍝勨攽鐎ｎ偄锟藉爼鏌涢幇闈涙灍闁抽攱鍨块弻鐔虹矙閹稿孩宕崇紓浣哄У閹瑰洭寮婚悢鐓庣闁哄被鍎卞浼存倵濞堝灝鏋熷┑鐐诧躬楠炲啫鈻庨幘鏉戯拷缁樹繆椤栨粌甯舵鐐茬墕閳规垿鎮╅崹顐ｆ瘎婵犳鍠楀娆戝弲闂佹寧娲╅幏鐑芥煃閽樺妲兼い锕侇潐娣囧﹪顢曢敍鍕閻庡灚婢樼�氫即鐛崶顒夋晣闁绘ɑ褰冪粻鍝勨攽閻樻鏆俊鎻掓嚇瀹曞綊骞庨挊澶岋紵闂侀潧鐗嗛ˇ顖炴偂濠靛鐓涢柛銉ｅ劚閻忣亪鏌ｉ幘瀛樼妤犵偞鐗楀蹇涘礈瑜忛敍鐔虹磽娴ｅ搫孝缁剧虎鍘惧Σ鎰板箳閹惧绉堕梺闈涱焾閸庤尙鎷犻悙鐑樷拺閺夌偞澹嗛崝宥夋煙濮濆苯鍚圭紒顔碱儔楠炴帡寮幘鏉戭伓闂佹寧绻傜花鑲╄姳閼恒儯浜滈柨鏃囧Г缁跺弶銇勯鍕殻濠碘�崇埣瀹曞崬螣閻戞ɑ顔傛繝鐢靛У椤旀牠宕板璺虹婵鎷风�殿噮鍋勯濂稿椽娴ｅ搫寮抽梻浣稿閸嬪棝宕崸妤�绠繛宸簼閳锋帡鏌涚仦鐐殤濠⒀勭☉閵嗘帒顫濋褎鐤侀梺璇″枤閸嬬偤濡堕敐澶婄闁冲搫鍟獮鍫ユ⒑閻熸澘鎮戦柣锝庝邯瀹曠銇愰幒鎴犲幒闂佸搫娲ㄩ崑鎰板绩娴犲鐓冮柍杞扮閺嗙偟绱撳鍡楃仸闁靛洤瀚伴、鏇㈠閵忋埄鍟嬬紓浣插墲閹瑰洭寮婚敐澶樻晜闁告洦鍘搁弨锟�
					xbean.TaskRecourse taskRec = roleRec.getRecoursetask().get(taskid);
					if (taskRec == null) {
						taskRec = xbean.Pod.newTaskRecourse();
						roleRec.getRecoursetask().put(taskid, taskRec);
					}
					
					//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐差渻閵堝棗绗掓い锔垮嵆瀵煡顢旈崼鐔蜂画濠电姴锕ら崯鎵不婵犳碍鐓涘ù锝堫潐瀹曞矂鏌熷畷鍥т槐濠碉紕鏌夐ˇ顕�鏌＄�ｎ偅顥堟慨濠冩そ瀹曨偊宕熼锟藉▍銈囩磽娴ｇ瓔鍤欓悗姘緲閻ｅ嘲顫濈捄铏诡唺闂佺懓鐡ㄥ褰掓倵婵犳碍鈷戦悷娆忓閸斻倗鐥紒銏犲籍妞ゃ垺鐟︾换婵嬪磼濡や焦鏉搁梺鍦劋婵炲﹤鐣烽幇鏉跨缂備焦锚閿熻棄娼￠弻銊╁即椤忓懎顏堕梻浣哥枃椤曆呯矓閻熼偊鍤曟い鏇嫹鐎规洖銈搁幃銏ゅ矗婢跺浼滈梻鍌氬�烽懗鍫曗�﹂崼銉ュ珘妞ゆ帒瀚崑锟犳煏婵炵偓娅呯紒锟介崒鐐村�堕柣鎰緲鐎氬骸霉濠婂嫮鐭嬮柕鍥у楠炴鎹勬潪鐗堝煕濠电姭鎷冨澶嬵�嶉梺闈涙搐鐎氱増鎱ㄩ敓浠嬫煥濞戞ê顏╅柍宄扮焸閹鎲撮崟顒傦紭闂佸憡姊归崹鍧楀Υ娴ｇ硶妲堟慨妤�妫涢崣鍡涙⒑閸涘﹣绶遍柛銊﹀閺侇噣顢楅崟顑芥嫽闂佺鏈悷褔宕濆澶嬬厽妞ゅ繐瀚粔铏癸拷瑙勬礉椤鎹㈠┑鍡╂僵妞ゆ帊鑳堕敓绛嬪墴濮婇缚銇愰幒鎿勭吹闂佺粯甯粻鎾崇暦閺囩倣鏃�鎷呴悷鏉夸紟婵犵妲呴崹浼存倶濠靛鍋傞柟鎵閻撳啴姊洪崹顕呭剰闁诲骏绠撻弻鏇㈠炊瑜嶉顓燁殽閻愭潙娴柟顔界懇瀵爼骞嬮婵堝缂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹閽樻繂霉閸忓吋缍戠紒鐘卞嵆閺岀喖骞嗛悧鍫缂備胶濮甸悧鐘诲蓟閿濆绠涙い鏍电稻閳锋牕鈹戦悙鍙夆枙濞存粌鐖煎顐﹀磼閻愬鍘卞┑鐐村灥瀹曨剟鎮橀悩鎰佹闁绘劘灏欐晶锔芥叏婵犲嫮甯涢柟宄版噽缁數锟斤綆鍋嗙粔閿嬬節閻㈤潧袨闁搞劍妞介弫鍐閵堝懐鐤囬梺缁樻⒒閳峰牓寮澶嬬厽闁归偊鍨伴惃娲煟閵堝懏鍠樻慨濠呮閹叉挳宕熼鍌氬殥闂備礁鎲￠悷锕傚箲閸パ呮殾闁割偅娲﹂弫鍡椕归敐鍫綈妞ゅ繒鍠栧缁樻媴閼恒儳銆婇梺闈╃秶缁犳捇鐛箛娑欐櫢闁跨噦鎷�
					if (!taskRec.getChannellist().contains(Integer.valueOf(messagetype))) {
						taskRec.getChannellist().add(messagetype);
					}
					
					return true;
				}
			}.submit();
		}
		
		boolean flag=ChatChannel.getInstance().process(roleId, messagetype, message, checkshiedmessage, displayinfos, 0);
		if(flag==true&&(funtype==FunModelType.FUN_DIELIVE_CLAN||funtype==FunModelType.FUN_DIELIVE_WORLD)){
			MessageMgr.sendMsgNotify(roleId, 162127, null);
		}
		if(flag == true && funtype == FunModelType.QIU_ZHU) {
			SChatHelpResult snd = new SChatHelpResult();
			snd.result = 0;
			gnet.link.Onlines.getInstance().send(roleId, snd);
		}
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 792433;

	public int getType() {
		return 792433;
	}

	public int messagetype; // 消息频道 MsgTye中所定义的部分
	public java.lang.String message; // 内容
	public java.lang.String checkshiedmessage; // 检测屏蔽字的纯文本
	public java.util.ArrayList<fire.pb.talk.DisplayInfo> displayinfos; // 显示道具、宠物、技能
	public int funtype; // 功能类型  类型编号对应FunModelType
	public int taskid; // 任务id

	public CTransChatMessage2Serv() {
		message = "";
		checkshiedmessage = "";
		displayinfos = new java.util.ArrayList<fire.pb.talk.DisplayInfo>();
	}

	public CTransChatMessage2Serv(int _messagetype_, java.lang.String _message_, java.lang.String _checkshiedmessage_, java.util.ArrayList<fire.pb.talk.DisplayInfo> _displayinfos_, int _funtype_, int _taskid_) {
		this.messagetype = _messagetype_;
		this.message = _message_;
		this.checkshiedmessage = _checkshiedmessage_;
		this.displayinfos = _displayinfos_;
		this.funtype = _funtype_;
		this.taskid = _taskid_;
	}

	public final boolean _validator_() {
		for (fire.pb.talk.DisplayInfo _v_ : displayinfos)
			if (!_v_._validator_()) return false;
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(messagetype);
		_os_.marshal(message, "UTF-16LE");
		_os_.marshal(checkshiedmessage, "UTF-16LE");
		_os_.compact_uint32(displayinfos.size());
		for (fire.pb.talk.DisplayInfo _v_ : displayinfos) {
			_os_.marshal(_v_);
		}
		_os_.marshal(funtype);
		_os_.marshal(taskid);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		messagetype = _os_.unmarshal_int();
		message = _os_.unmarshal_String("UTF-16LE");
		checkshiedmessage = _os_.unmarshal_String("UTF-16LE");
		for (int _size_ = _os_.uncompact_uint32(); _size_ > 0; --_size_) {
			fire.pb.talk.DisplayInfo _v_ = new fire.pb.talk.DisplayInfo();
			_v_.unmarshal(_os_);
			displayinfos.add(_v_);
		}
		funtype = _os_.unmarshal_int();
		taskid = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CTransChatMessage2Serv) {
			CTransChatMessage2Serv _o_ = (CTransChatMessage2Serv)_o1_;
			if (messagetype != _o_.messagetype) return false;
			if (!message.equals(_o_.message)) return false;
			if (!checkshiedmessage.equals(_o_.checkshiedmessage)) return false;
			if (!displayinfos.equals(_o_.displayinfos)) return false;
			if (funtype != _o_.funtype) return false;
			if (taskid != _o_.taskid) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += messagetype;
		_h_ += message.hashCode();
		_h_ += checkshiedmessage.hashCode();
		_h_ += displayinfos.hashCode();
		_h_ += funtype;
		_h_ += taskid;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(messagetype).append(",");
		_sb_.append("T").append(message.length()).append(",");
		_sb_.append("T").append(checkshiedmessage.length()).append(",");
		_sb_.append(displayinfos).append(",");
		_sb_.append(funtype).append(",");
		_sb_.append(taskid).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

