
package fire.pb.shop;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CMarketContainerBrowse__ extends mkio.Protocol { }

/** 摆摊容器浏览
*/
// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CMarketContainerBrowse extends __CMarketContainerBrowse__ {
	@Override
	protected void process() {
		// protocol handle
		long roleId = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleId < 0)
			return;
		if (!fire.pb.shop.srv.market.Market.useMarketCheck(roleId))
			return;
		
/*		
		fire.pb.item.ItemColumn itemcol = fire.pb.item.Module.getInstance().getItemColumn(roleId, fire.pb.item.BagTypes.MARKET, true);
		fire.pb.pet.PetColumn petcol = new fire.pb.pet.PetColumn(roleId, fire.pb.pet.PetColumnTypes.MARKETPET,true);
		SMarketContainerBrowse browse = new SMarketContainerBrowse();
		browse.items = itemcol.getBagInfo().items;
		browse.pets = petcol.getAllProtocolPets();
		gnet.link.Onlines.getInstance().send(roleId, browse);
		*/
		new mkdb.Procedure() {
			protected boolean process() {
				if (fire.pb.main.Gs.isMergeServer()) {
					// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺岋綁骞樼�靛憡鍣紓浣介哺閹稿骞忛崨瀛橆棃婵炴垶鐭幃锝嗙節閻㈤潧浠滈柟鍐茬箻閺佸啴濮�閵堝懓鎽曢梺鏂ユ櫅閸燁垱鍒婇幘顔界厱闁圭偓娼欑徊濠氭煕閹惧綊鍝虹紒缁樼洴閺佹劙宕ㄩ鑺ュ�烽梻浣瑰濞诧附绂嶅┑鍥┾攳濠电姴娲ら柋鍥煛閸モ晛浠滅紒鎰☉椤啴濡堕崱妯烘殫闂佸摜濮甸崝娆撱�佸▎鎰窞闁归偊鍘搁幏缁樼箾鏉堝墽瀵奸悹锟介敃鍌涘�块柣鎰靛厵娴滄粓鏌熺�涙绠栨い銉ｅ灲閺屸剝鎷呯粙鎸庢婵犳鍣幏鐑芥⒑闂堟稓澧曢柟铏崌楠炴寮撮姀鈾�鎷洪梺鍛婄箓鐎氼厼顔忓┑瀣厱闁绘娅曠亸鐢电磼椤斿墽甯涢柕鍫秮瀹曟﹢鍩￠崘銊ョ疄濠碉紕鍋戦崐銈夊储娴犲鍨傞梻鍫熺▓閺嬪秵绻涢崱妯诲鞍闁绘挻鐟ч敓鐣屾嚀鐎氼厼顭垮Ο浣曪絾绻濆顓犲帗闂佽姤锚椤﹁棄螣閿熻姤绻濆▓鍨珯闁归鍏樺铏圭磼濡洘鍨奸妵鎰板礃閳哄喚娲搁梺鑲╊焾閸氾拷缂佽妫濋弻锝夊箛閸忓摜鐩庨梺璺ㄥ枙婵倝鎮у鍫濇瀬妞ゆ梻鏅弧锟介梺鎼炲劘閸斿矂鏁撻挊澶嬪仴闁哄被鍔戝鎾倷鐠囇勫闁归棿鐒﹂崕妤佷繆閵堝懏鍣介柛娆愭崌閺屾盯濡烽敐鍛瀴闂佹娊鏀辩敮鐐垫閹烘鐓￠柛娑卞枛椤忓爼姊婚崒姘拷鎼佸磹閹间礁纾归柟闂寸劍閸嬪鈹戦悩鎻掝伀闁活厽鐟╅弻鐔告綇閹呮В闂佽桨绀侀崐鍧楀蓟瀹ュ浼犻柛鏇ㄥ墮濞呫倝姊虹紒妯诲蔼闁稿海鏁诲濠氭晲婢跺﹦鐫勯梺鎼炲劥濞夋稑鈻撻銏″仩婵﹩鍘奸崫鐑樻叏婵犲啯銇濋柟顔界矒閸╋繝宕掑☉姘稐闂傚倷鐒﹂幃鍫曞礉瀹�鍕亯闁绘挸瀵掗崵鏇熴亜閹板墎鐣辩紒鐘崇洴閺岋絽螖閿熶粙鎮ч崱娑欐櫢闁伙絽鑻崢鎾煛鐏炲墽鈽夐柍璇叉唉缁犳盯骞欓崟顒�顏堕梺鑽ゅ枑鐎氬牆鈽夐姀鐘殿槰闂侀潧臎閸曨剦鍟庨梻鍌欑窔濞佳嗗闂佸搫鎳夐弲鐘差嚕椤愶絿绡�闁搞儯鍔庨崢閬嶆椤愩垺澶勯柤鍦亾缁傚秷銇愰幒鎾跺幐婵犮垼娉涢ˇ閬嶆儗濞嗘劖鍙忓┑鐘插亞閻撹偐锟借娲樼敮鎺楀煝鎼淬劌绠ｆい鎾跺晿濠婂牊鈷掑ù锝勮閺�鐗堛亜閺囩喓鐭岄柟骞垮灩閳规垹锟斤綆浜為悾娲⒑缂佹ê鐏辨俊顐㈠閺侇噣姊绘担绋挎毐妞ゆ洘鐗犲畷姗�鍩℃担鍦悍濠德板�楁慨鐑藉磻濞戞氨鐭撶憸鐗堝竾閿熸垝绀侀埢搴ㄥ箻閺夋埊鎷烽柨瀣ㄤ簻闁硅櫣鍋炵�氱懓鈹戦悙鍙夊櫤闁挎洏鍨归～蹇旂節濮橆剛锛滃┑顔斤供閸撱劑骞忛悜钘夌濞达絽鎽滈敍娆愪繆閻愬樊鍎忔繛瀵稿厴閹矂宕卞纭锋嫹閹烘埈娼╅柣鎰靛墮椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屾盯骞囬姘卞缂備降鍔庣划顖涚┍婵犲洦鍊锋い蹇撳閹风兘寮介锝嗘闂佸湱鍎ゅΛ鎴﹀箯瀹勯偊娼╅柣鎾抽缁秹姊虹化鏇熸珕闁烩晩鍨伴锝夘敋閿熻棄鐣锋總鍛婂亜闁告繂瀚粻鐐烘⒒閸屾瑧顦﹂柟纰卞亜鐓ら柕蹇嬪�曠粈澶愭倶閻愭彃鈷旀い鈺傚絻铻栭柨婵嗘噹閺嗙偤鏌ｉ幘璺衡枅闁哄备鍓濆鍕償閵忊偓锟藉﹥绻涚�电袨闁搞劋绮欏濠氬即閵忕姴鑰垮┑鈽嗗灥濞咃綁鎮烽妸銉富闁靛牆楠告禍婵堢磼鐠囪尙澧︽鐐插暙閳诲酣骞欓崘鈺傛珜闂備浇娉曢崰宥囧垝濞嗘挶锟戒線寮崼婵嬪敹闂佸搫娲ㄩ崰鎾诲储娴犲鐓欓柛蹇氬亹閺嗘﹢鏌涙繛鍨拷鏇⑩�﹂崶顒�绠涙い鎾跺Х椤旀洖鈹戦悙瀛樼稇妞ゆ垵妫楅埢宥夊炊閳哄啰锛滈柡澶婄墐閺呮稒绂掗敃鍌涚厵鐎瑰嫮澧楅崵鍥╋拷瑙勬礃缁捇鐛幘璇茬闁瑰灝鍟幃顏堟⒒閸屾艾锟界兘鎳楅崼鏇楋拷锕傚醇閵夛附娅囬梺鎸庢礀閸婃悂姊婚鐐寸厪濠㈣泛鐗嗛崜濠氭煥濠靛棭妲归柛銈呭暣閺屽秹宕崟顐ｆ闂佹寧绋掔换鍐崲濞戙垹绠荤痪鎯ь儏椤ユ繈姊洪幐搴㈢８闁稿孩濞婇弫鎾绘嚍閵夈劌顥濈紓鍌氱Т閿曘倝锝炶箛娑欐優閻熸瑥瀚壕顖炴⒑闂堟侗鐒鹃柛搴㈢叀閹﹢宕卞Ο鑲╃槇濠电偛鐗嗛悘婵嬪几閺冨牊鐓曞┑鐘插枤濞堟粍顨ラ悙鏉戠伌濠殿噯鎷烽梺缁橈供閸嬪懘锝炲澶嬧拺闂傚牊绋撶粻鍐测攽椤旀儳鍘存い銏∶叅妞ゅ繐鎳夐幏铏圭磽閸屾瑧鍔嶉柨姘攽椤旇偐澧涚紒缁樼洴瀹曟鎳栭埡鍌氭珮闂備礁鎽滄慨鎾晝閵堝鏁囬柛蹇曞帶缁剁偤鎮楅敍鍗炲椤忓綊姊绘担绛嬪殭婵炴潙鍢查埢宥夊閵堝棌鎸冮梺鍛婃处閸嬫帡鎮㈤崱妯圭箚妞ゆ牗绻嶉崬铏圭磼鐠囧弶顥㈤柡灞剧缁犳盯寮撮妸銉ュΥ濠电偛鐡ㄧ划宥囧垝瀹ュ桅闁告洦鍠氶悿锟介梺鍦亾閸撴碍绂掓總鍛娾拺闁告繂瀚敍鏃傜磼閹绘帗鍋ラ柡浣规崌瀹曟劙鎮ゆ担鍦Х婵犵數鍋涘鍫曗�﹂崶顒�鏋佹い鏇嫹闁轰焦鎹囬幃鈺呮嚑椤掑倹姣囧┑鐘垫暩閸嬫稑螞濞嗘挸绠板┑鐘宠壘閸氬綊鏌熺�电浜煎ù婊勭矒閺岀喖鎮滃Ο铏瑰姼濠碘�冲级閹倿寮婚埄鍐╁閻熸瑥瀚敓鑺ュ姈閹便劍绻濋崨顕呬哗闂佸綊顥撴繛锟界�殿喖顭锋俊鐑筋敋閸℃ê顏跺┑掳鍊曢崯鎵婵傚憡鐓熸俊顖氱仢閻ㄦ椽寮崼銉﹀�甸悷娆忓缁�鍐╃箾閼碱剙鏋涚�殿喖顭峰畷鍗炍旀繝鍌涘�梻浣告啞娓氭宕归幎钘夊嚑闁告劦鍠楅埛鎴犵棯椤撶偞鍣规い銉ョЧ閺岀喎煤鐠佸磭鏁栭悗鍨緲閿曨亜鐣风粙璇炬梹鎷呯粙鍨棗闂傚倷鑳剁涵鍫曞礈濠靛鍋￠梺顒�绉寸粻顖炴煟閹达絽袚闁稿骸鐭傞弻娑樷槈濮楀牆浼愬銈呯箰閻栫厧顫忕紒妯诲闁告稑锕ら弳鍫濃攽閻愰鍤嬬紒鐘虫尭閻ｅ嘲螖閿熶粙锝炲鍫熸櫢濞寸姴顑囧畵渚�鐓崶銊р槈濞磋偐濞�閺屾盯寮撮悙鍏哥驳闁诲酣娼ч惌鍌氼潖濞差亝顥堟繛鎴炶壘椤ｅ搫鈹戦埥鍡椾簼妞ゃ劌鐗忛崚鎺楊敇閵忕姷锛滈梺缁樺姇椤曨參宕㈡禒瀣拺缁绢厼鎳忛鐘绘煕鐎ｎ偆娲撮柕鍡楁嚇椤㈡鏁撴禒瀣畳婵犵數濮撮敃銈囷拷姘煎弮瀹曟劙骞囬婊�绨婚梺闈涚箚濡插嫰鎳撻崹顔规斀妞ゆ洖妫欑�氬綊姊绘担鐟邦嚋缂佸鍨归敓鑺ュ嚬閸撶喖鎮伴锟藉畷濂告偄閾忓湱妲囬梻浣圭湽閸ㄨ棄顭囪缁傛帒顭ㄩ崟顏嗙畾濡炪倖鍔х紞鍡椻枔濮楋拷閺岀喖鐛崹顔句紙濡ょ姷鍋涢澶愬极閸愵喗鏅搁柣锝呰嫰椤ユ艾鈹戦悩宕囶暡闁绘挸绻愰…璺ㄦ崉閻戞﹩妫″┑鐐叉噹濡繈寮婚敐澶婄閻庨潧鎲￠崳顓㈡⒑闂堟稒鎼愰悗姘緲椤曪絾绂掔�ｎ�晠鏌曟繛鍨姶婵☆偆鍠栧缁樻媴閸涘﹥鍎撳┑鈽嗗亜椤曨厼顕ユ繝鍥ч敜婵°倓鐒﹀▍銏ゆ⒑缁嬪尅鍔熼柛锝冨劚椤洭骞囬鐘殿啎闂佸憡鐟ラˇ閬嶆儗閹烘棑鎷风憴鍕；闁告鍟块锝嗙鐎ｅ灚鏅ｅ┑鐘诧攻閸旀牜锟芥氨鎳撻妴鎺戭潩閻愵剙顏堕柣搴㈩問閸犳骞愰搹顐ｅ弿闁跨喍绮欓弻锝呪枎濞嗘劕顏舵繝鐢靛仧閸樠囨晝椤忓嫷娼栭柧蹇撴贡绾惧吋淇婇姘濞存粎鍋炵粩鐔煎即閵忊晜鏅ｉ梺缁橆焽閺佹悂鎮＄�ｎ喗鍋℃繝濠傛噹椤ｅジ鎮介娑辨疁闁糕晜鐩獮鎺懳旀担鍝勫箞闂佽绻掗崑娑欐櫠娴犲绠犻柛娑卞灣绾惧ジ鏌熼柇锕�骞楅柍閿嬪姉缁辨帞绱掑Ο鍏煎垱闂佽鍠掗崜婵嬪箚閺冨牜鏁婇柟顖嗗嫬锟筋垰鈹戞幊閸婃鎱ㄩ悜钘夌；婵炴垶纰嶅畷鍙夋叏濡ゅ瀚归悗娈垮櫘閸嬪﹪鐛Ο鑲╃＜婵☆垳绮鐔兼⒒娴ｈ姤纭堕柛锝忕畵楠炲繘鏁撻敓锟�?
					Integer val = xtable.Takebackmarketcontainertab.select(roleId);
					if (val == null) {
						fire.pb.shop.srv.market.MarketManager.getInstance().sendTempMarketContainer(roleId);
						if (fire.pb.shop.srv.market.MarketManager.LOG.isInfoEnabled()) {
							StringBuilder sbd = new StringBuilder();
							sbd.append("role=").append(roleId).append(", 濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婄拋鏌ュ几濞嗘挻鈷戠紓浣姑粭鈺佲攽椤斿搫锟芥骞戦姀鐘闁靛繒濮撮懓鍨攽閳藉棗鐏ユ繛鍜冪稻缁傛帡骞栨担鐟帮拷鐢告偡濞嗗繐顏紒锟介敓浠嬫倵濞堝灝鏋﹂柛鈺傜墱缁碍娼忛妸褏鐦堥梺鎼炲労閻忔稖顦归柡灞剧☉閳藉宕￠悙瀵镐邯闂備胶绮换鍐潖閼姐倖顫曢柟鎹愵嚙绾惧吋鎱ㄥΟ鑽ゆ▊闁挎繂顦伴悡鐔镐繆閵堝嫯鍏岄柣顓熷浮閺屸剝鎷呯憴鍕３闂佸湱顭堥敃銉ヮ嚗閸曨偆鏆嗛柨鐔剁矙瀵啿鈽夐姀鈾�鎷虹紓浣割儏濞硷繝宕ｉ崟顐�鐟邦煥閸曨偄濮稿┑鈽嗗亞閸犳劗鎹㈠☉姘炬嫹閻㈡鐒鹃悽顖氱埣閺岋絾骞婇柛鏃�鍨甸悾鐑藉箛閺夊灝鐎銈嗘椤寮敓浠嬫⒒娴ｄ警鐒鹃柡鍫墰閸犲﹤顓兼径濠勬焾闂佺粯鍔楅崕銈夋偂閻斿吋鐓欓柟顖嗗苯娈堕梺鐟板暱濞差參寮婚垾宕囨殕闁跨喍绮欏畷浼村冀椤撴粣鎷锋担绯曟闁靛繒濮撮懓鍨攽鎺抽崐褔骞忛悜鑺ョ厸闁糕剝鐟ユ禒锕傛煙娓氬灝濮傞柡浣瑰姍瀹曞崬螖閿熶粙锝為幒妤佲拺閻犲洠锟借櫕鐏嶅銈冨妼閿曨亪鐛崘鈺冾浄閻庯綆鍋掑Λ鍐ㄢ攽閻愭潙鐏卞瀵割焾琚欏璺侯儑缁★拷缂佸墽澧楄摫妞ゎ偄锕弻娑氾拷锝庝簻椤忣厾锟借娲﹂崹鍫曘�侀弴銏℃櫆缂備焦蓱濞呮棃姊绘担鐟邦嚋缂佽鍊胯棟妞ゆ牜鍋為悡渚�鏌涢妷顔煎闁绘挻鐩弻娑㈠Ψ閵忊剝鐝旀繛瀵稿閸ャ劎鍘卞┑鈽嗗灣缁垶宕愰幇顓熷弿濠电姴鎳忛鐘电磼椤旂晫鎳囨鐐村姈閹棃濮�閳ユ剚浼嗙紓鍌氬�搁崐椋庣矆娓氾拷椤㈡牠宕卞☉妯碱唹闂佹悶鍎滈崨顔筋啎闂備焦瀵х换鍌炈囬鐐靛祦闁靛繆锟借尙绠氶梺缁樺姉閺佸摜鏁☉銏＄厸闁稿矉闄勭�氬綊姊婚崒姘拷鐑芥嚄閸撲礁鍨濇い鏍仜缁�澶愭煛瀹ュ骸鍘靛ù婊冪秺閺屾盯骞囬崗鍝ユ晼濠碘槅鍋掗崹鎶藉箟閹间礁绫嶉柛顐ｇ箚閹芥洟姊洪幐搴ｇ畵闁瑰弶锕㈠顕�鏁撻悾宀�绠旈柣鏃傚帶閻愬﹪鏌曟繛褍瀚惁鏃傜磽閸屾艾锟芥悂宕愭搴㈩偨闁跨喓濮寸粣妤佷繆閵堝懏鍣洪柛瀣剁節閺屻劑寮撮鍛伓婵＄偑鍊栧ú蹇涘磿闂堟稓鏆﹂柣鏃傗拡閺佸啴鏌曢崼婵囶棡闁伙絿鍏樺铏规嫚閹绘帒姣愮紓鍌氱Т濡繂鐣烽幋锕�绀嬫い鏍电稻閺呮粓鏌ｉ悩鑽ょ窗闁靛棴鎷烽梺鐚存嫹濞寸姴顑嗛悡鐔兼煙闁箑骞楃紓宥嗗灴閺岋綀绠涢妷鈺傤�嶉梺闈涙搐鐎氼垳绮诲☉娆愬劅闁炽儱纾妶顔戒繆閵堝洤啸闁稿鐩、鏍礋椤撶姷顦梺鍛婄☉閻°劑鎮￠弴銏＄厪濠㈣埖锚閺嬫瑩鏌熼懠顒�浜惧ǎ鍥э躬椤㈡稑顫濋澶夌磾婵犳鍠栭敃銉ヮ渻閽樺鏆︽い鎰剁畱缁�瀣亜閺囩偞鍣洪柦鎴濐樀濮婄粯鎷呮笟顖滃姼闂佹寧娲忛崕鎶藉箲閵忋倕纾奸柣鎰綑娴犲ジ鎮楅悷鏉款伃闁稿锕ら…鍥Ω閳哄倻鍙嗛梺缁樻煥婢у酣鎯屽▎鎰垫闁绘劘顕滈煬顒勬煙椤旇娅婄�规洖缍婇、鏇㈠椤喚纭�濠电姷鏁搁崑鐐哄箰婵犳艾绀勭憸鐗堝笒閸ㄥ倹銇勯弽銊х煁妞ゎ偅娲熼弻锟犲礃閵娧冾杸闂佹娊鏀辩敮鎺楁箒闂佹寧绻傚ú銊╁箺閸岀偞鐓曢柕鍫濇閹冲啴鎽堕弽顓熺厽婵☆垱瀵ч悵顏堟煕婵犲啫濮嶉柡宀�鍠栭、娆撴儗椤愵偂閭柨婵堝仜閳规垹锟斤綆鍋勫▓婵嬫⒑閸撹尙鍘涢柛瀣嚇閹敻寮介鐔叉嫽婵炴挻鐔幏閿嬬箾娴ｅ啿鎳忓畷鏌ユ煕椤愮姴鍔氱痪鎯х秺閺岋繝宕堕妷銉т患闂佸憡鍨规慨鎾Υ閹烘埈娼╅柣鎰靛墮椤忓爼姊绘担鍛婃儓閻炴凹鍋婂畷婵嬪箣閿曪拷缁犳牠鏌曢崼婵愭Ц缁炬儳鍚嬬换娑㈠箣閻戝洣绶垫繛瀵搞�嬮幏锟�?");
							fire.pb.shop.srv.market.MarketManager.LOG.info(sbd.toString());
						}
						return true;
					}
				}
				fire.pb.shop.srv.market.MarketManager.getInstance().sendMarketContainerByRoleId(roleId);
				return true;
			}
		}.submit();
		
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 810647;

	public int getType() {
		return 810647;
	}


	public CMarketContainerBrowse() {
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CMarketContainerBrowse) {
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CMarketContainerBrowse _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

