
package fire.pb.shop;

import fire.log.enums.YYLoggerTuJingEnum;
import fire.pb.game.MoneyType;

import fire.pb.main.Gs;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CExchangeCurrency__ extends mkio.Protocol { }

/** 货币兑换
*/
// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CExchangeCurrency extends __CExchangeCurrency__ {
	@Override
	protected void process() {
		// protocol handle
		
		long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		final int userid = ((gnet.link.Dispatch) this.getContext()).userid;
		
		new mkdb.Procedure() {
			
			@Override
			protected boolean process() throws Exception {
				fire.pb.item.Pack bag = new fire.pb.item.Pack(roleid, false);
				
				long ret = 0;
				int newMoney = 0;
				// 缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽幃娆戞嫚瑜庣�氬綊鏌涢锝嗙闁哄懏鎮傞弻锕�螣娓氼垱笑闂佸搫妫寸徊楣冦�冮妷鈺傚�烽柛娆忣槸閺嬬姴顪冮妶鍐ㄧ仾闁挎岸鏌嶇憴鍕伌鐎规洖銈告慨锟介柕蹇婂墲閻︾偤姊婚崒姘拷鎼佸磹閻戣姤鍊块柨鏇炲�哥粻鏍煕椤愶絾绀�缁剧偓瀵х换娑橆啅椤旇崵鐩庣紓渚婃嫹闁割偆鍠愰崣蹇斾繆椤栨稑顕滅痪顓炲⒔閻ヮ亪骞嗚閻撳ジ鏌＄仦鍓р槈闁伙絾绻堥弫鎾寸鐎ｎ亞锛涢梺缁樺姉閸庛倝宕戦崒鐐寸厸闁搞儮鏅涢弸鍌毭瑰鍕煉闁哄瞼鍠栧鍫曞垂椤曞懏娈虹紓鍌欑椤戝牆鐣烽悽鍨潟闁圭儤顨嗛弲绋棵归悩宸剱闁哄懏鎮傞弻锝夋晲閸涱垳浼囩紒鐐礃濡嫰濡撮幒鎴僵妞ゆ帒锕ラ弫楣冩煟鎼淬垼澹樼紓宥咃工椤繘鎼归崷顓犵厯闁荤姵浜介崝搴㈠閸ヮ剚鈷戠紒瀣儥閸庢垿鏌涚�ｃ劌锟芥繈鐛崘顔肩伋闁哄倶鍎查悗濠氭⒑閸︻厼浜炬繛鍏肩懇閺佹捇鎮剧仦鐐瘓闂佸搫鐭夌紞浣规叏閿熶粙鏌嶉挊澶嬵棞闁哄懘浜跺铏圭磼濡櫣鐟查梺绋垮婵炲﹤锕㈡笟锟藉铏圭磼濡浚浜炴竟鏇㈩敇閵忊�冲壒闂佸湱鍎ら幖鈺佲枔娴犲鐓熼柟閭﹀墻閸ょ喎顭胯閸撴氨鎹㈠☉銏″亗閹艰揪绲块鎺楁⒑鐠団�虫灍闁荤啿鏅犻妴浣肝旈崨顔芥婵炲濮撮鎰板极閸岀偞鐓ラ柣鏇炲�圭�氾拷
				if (srcmoneytype == fire.pb.game.MoneyType.MoneyType_HearthStone) {
					// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆欑穿闂備浇娉曢崰鎰板几閼姐倗涓嶉柟鎯х－閺嗭箑鈹戦崒婊庣劸妞ゎ偄鎳橀弻宥夊Ψ閵夈儲姣愮紓浣靛妸閸庨潧顫忕紒妯诲濞撴凹鍨遍弫顖炴⒑鐟欏嫭銇熷ù婊呭仧閸掓帗绻濆顒傤吅闂佹寧娲╅幏鐑芥煕閵娿儱锟藉潡寮诲☉妯兼殕闁跨喍绮欏畷鎴︽倷閸濆嫮锛涢梺鎸庣箓閹叉﹢寮崼鐔告珕闂佽姤锚椤︿粙宕电�ｎ亶娓婚柕鍫濇噽缁犲啿鈹戦悜鍥ㄥ闂備礁鎼惌澶屾崲濠靛棛鏆﹂梺顒�绋侀弫鍥煟濡櫣浠涙繛鍫濄偢濮婄粯鎷呴崨濠冨創闂佹椿鍘奸ˇ鍗炍ｉ幇鏉垮嵆闁绘柧璀﹀ù鍕⒑閹稿孩鈷掗柛瀣尵閿熻姤纰嶅畝鎼佸蓟閻旇櫣纾兼俊顖濇閻熴劌顪冮妶搴′簼鐎癸拷缁嬫娼栫紓浣股戞刊鎾煣韫囨洘鍤�缂佹绻濆娲捶椤撴稒瀚涢梺绋款儏濡稑危閹扮増鍊烽悗闈涙憸閹虫繈姊虹捄銊ユ瀺缂侇喗鐟╅幃浼搭敋閿熻棄鐣峰锟介、鏃堝川椤撶喓锟筋參姊绘担鍛婂暈婵炴彃绉瑰鎻掆槈濞嗘埈娲告繛瀵稿帶閻°劑鍩涢幋锔界厱闁挎棁顕у楣冩煟閹烘鐣洪柟顔筋殜瀹曞綊顢曢姀銏㈡嚃缂傚倷绀侀崐鍦暜閿熺姴鏄ラ柍鈺佸暟閻熷綊鏌涢妷锝呭闁伙附绮撳缁樼瑹閿熻棄顭囪閹囧幢濞戞鐤囧┑顔筋殣閹风兘鏌熼鑺ョ凡妞ゎ厹鍔戝畷濂告偄閸濆嫬绠ラ梻鍌欑閹诧繝宕归鐐茬９闁哄稁鍋撻幏宄邦潩閻愵剙顏�.
					if (fire.pb.fushi.Module.GetPayServiceType() == 1)
						return false;
					
					if (dstmoneytype == fire.pb.game.MoneyType.MoneyType_SilverCoin && this.dealHearthStone()) {
						newMoney = money * 10000;
						ret = bag.addSysMoney(newMoney, "1缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽幃娆戞嫚瑜庣�氬綊鏌涢锝嗙闁哄懏鎮傞弻锕�螣娓氼垱笑闂佸搫妫寸徊楣冦�冮妷鈺傚�烽柛娆忣槸閺嬬姴顪冮妶鍐ㄧ仾闁挎岸鏌嶇憴鍕伌鐎规洖銈告慨锟介柕蹇婂墲閻︾偤姊婚崒姘拷鎼佸磹閻戣姤鍊块柨鏇炲�哥粻鏍煕椤愶絾绀�缁剧偓瀵х换娑橆啅椤旇崵鐩庣紓渚婃嫹闁割偆鍠愰崣蹇斾繆椤栨稑顕滅痪顓炲⒔閻ヮ亪骞嗚閻撳ジ鏌＄仦鍓р槈闁伙絾绻堥弫鎾寸鐎ｎ亞锛涢梺缁樺姉閸庛倝宕戦崒鐐寸厸闁搞儮鏅涢弸鍌毭瑰鍕煉闁哄瞼鍠栧鍫曞垂椤曞懏娈虹紓鍌欑椤戝牆鐣烽悽鍨潟闁圭儤顨嗛弲绋棵归悩宸剱闁哄懏鎮傞弻锝夋晲閸涱垳浼囩紒鐐礃濡嫰濡撮幒鎴僵妞ゆ帒锕ラ弫楣冩煟鎼淬垼澹樼紓宥咃工椤繘鎼归崷顓犵厯闁荤姵浜介崝搴㈠閸ヮ剚鈷戠紒瀣儥閸庢垿鏌涚�ｃ劌锟芥繈鐛崘顔肩伋闁哄倶鍎查悗濠氭⒑閸︻厼浜炬繛鍏肩懇閺佹捇鎮剧仦鐐瘓闂佸搫鐭夌紞浣规叏閿熶粙鏌嶉挊澶嬵棞闁哄懘浜跺铏圭磼濡櫣鐟查梺绋垮婵炲﹤锕㈡笟锟藉铏圭磼濡浚浜炴竟鏇㈩敇閵忊�冲壒闂佸湱鍎ら幖鈺佲枔娴犲鐓熼柟閭﹀墻閸ょ喎顭胯閸撴氨鎹㈠☉銏″亗閹艰揪绲块鎺楁⒑鐠団�虫灍闁荤啿鏅犻妴浣肝旈崨顔芥婵炲濮撮鎰板极閸岀偞鐓ラ柣鏇炲�圭�氾拷10000闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽、鏃堝川椤撗傜处闂傚倸鍊峰鎺旀椤旀儳绶ゅù鐘差儏鎼村﹪鏌ら悡搴☆暢濞存粈绮欏娲嚒閵堝懍娌紓浣割儏閻楁挸鐣峰鍐ｆ斀閻庯綆鍋勯敓钘夌埣閺屾盯骞囬埡浣肝ㄩ梺鐚存嫹濞寸姴顑嗛悡鐔兼煙闁箑骞楃紓宥嗗灴閺岋綀绠涢妷鈺傤�嶉梺閫涚┒閸斿矁鐏掔紓浣割儏閻忔繈锝為崶顒佸�甸悷娆忓绾剧敻鏌ㄩ悢璇残撻柛鎾磋壘椤洭鍩￠崨顔惧幘闂佸憡绺块崕鏌ュ汲閳哄懏鐓曟繛鍡楃箲椤ャ垺鎱ㄦ繝鍛仩缂佽鲸甯掕灒闁煎鍊ゅΣ顒勬⒒娴ｄ警鐒鹃柨鏇樺�曢敃銏ゆ焼瀹ュ棙娅㈤梺鍏间航閸庢娊宕弻銉︾厵闁告垯鍊栫�氾拷", fire.log.enums.YYLoggerTuJingEnum.tujing_Value_huobiduihuan, 0);
						if (ret != 0) {
							fire.pb.talk.MessageMgr.psendMsgNotify(roleid, 160402, java.util.Arrays.asList(Integer.toString(money), Integer.toString(newMoney)));
						}
					} 
					// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆欑穿闂備浇娉曢崰鎰板几閼姐倗涓嶉柟鎯х－閺嗭箑鈹戦崒婊庣劸妞ゎ偄鎳橀弻宥夊Ψ閵夈儲姣愮紓浣靛妸閸庨潧顫忕紒妯诲濞撴凹鍨遍弫顖炴⒑鐟欏嫭銇熷ù婊呭仧閸掓帗绻濆顒傤吅闂佹寧娲╅幏鐑芥煕閵娿儱锟藉潡寮诲☉妯兼殕闁跨喍绮欏畷鎴︽倷閸濆嫮锛涢梺鎸庣箓閹叉﹢寮崼鐔告珕闂佽姤锚椤︿粙宕电�ｎ亶娓婚柕鍫濇噽缁犲啿鈹戦悜鍥ㄥ闂備礁鎼惌澶屾崲濠靛棛鏆﹂梺顒�绋侀弫鍥煟濡櫣浠涙繛鍫濄偢濮婄粯鎷呴崨濠冨創闂佹椿鍘奸ˇ鍗炍ｉ幇鏉垮嵆闁绘柧璀﹀ù鍕⒑閹稿孩鈷掗柛瀣尵閿熻姤纰嶅畝鎼佸蓟閻旇櫣纾兼俊顖濇閻熴劌顪冮妶搴′簼鐎癸拷缁嬫娼栫紓浣股戞刊鎾煣韫囨洘鍤�缂佹绻濆娲偡閻楀牆鏆堥梺璇″枛閸婃悂鎮鹃悜钘夌疀闁哄娼￠弫婊冣攽鎺抽崐褔骞忛悜鑺ョ參闁告劦浜滈弸娑㈡煛瀹�瀣М鐎殿噮鍣ｅ畷鎺戭潩鏉堫煈鍚囬梻鍌欒兌閹虫捇宕查弻銉ュ簥闁哄被鍎遍悡鈥愁熆鐠哄彿鍫ュ几鎼搭澀绻嗘い鏍ㄧ矊鐢泛鈹戦鎸庮仩缂佽鲸鎹囧畷鎺戔枎閹烘垵甯┑鐘愁問閸犳洜寰婃繝姘妞ゆ劧闄勯埛鎴︽⒒閸喓鈾侀柟鍏煎姍閹顫濋悡搴ｄ化缂備緡鍠涢褔鍩ユ径鎰潊闁绘ɑ鐗撻崝鎴﹀蓟閵娾晛鍗虫い蹇撴噹椤忚埖淇婇悙顏勶拷鏇燁殽韫囨稑绠柨鐕傛嫹
					else if (dstmoneytype == fire.pb.game.MoneyType.MoneyType_GoldCoin && this.dealHearthStone()) {
						newMoney = money * 100;
						ret = bag.addSysGold(newMoney, "1缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽幃娆戞嫚瑜庣�氬綊鏌涢锝嗙闁哄懏鎮傞弻锕�螣娓氼垱笑闂佸搫妫寸徊楣冦�冮妷鈺傚�烽柛娆忣槸閺嬬姴顪冮妶鍐ㄧ仾闁挎岸鏌嶇憴鍕伌鐎规洖銈告慨锟介柕蹇婂墲閻︾偤姊婚崒姘拷鎼佸磹閻戣姤鍊块柨鏇炲�哥粻鏍煕椤愶絾绀�缁剧偓瀵х换娑橆啅椤旇崵鐩庣紓渚婃嫹闁割偆鍠愰崣蹇斾繆椤栨稑顕滅痪顓炲⒔閻ヮ亪骞嗚閻撳ジ鏌＄仦鍓р槈闁伙絾绻堥弫鎾寸鐎ｎ亞锛涢梺缁樺姉閸庛倝宕戦崒鐐寸厸闁搞儮鏅涢弸鍌毭瑰鍕煉闁哄瞼鍠栧鍫曞垂椤曞懏娈虹紓鍌欑椤戝牆鐣烽悽鍨潟闁圭儤顨嗛弲绋棵归悩宸剱闁哄懏鎮傞弻锝夋晲閸涱垳浼囩紒鐐礃濡嫰濡撮幒鎴僵妞ゆ帒锕ラ弫楣冩煟鎼淬垼澹樼紓宥咃工椤繘鎼归崷顓犵厯闁荤姵浜介崝搴㈠閸ヮ剚鈷戠紒瀣儥閸庢垿鏌涚�ｃ劌锟芥繈鐛崘顔肩伋闁哄倶鍎查悗濠氭⒑閸︻厼浜炬繛鍏肩懇閺佹捇鎮剧仦鐐瘓闂佸搫鐭夌紞浣规叏閿熶粙鏌嶉挊澶嬵棞闁哄懘浜跺铏圭磼濡櫣鐟查梺绋垮婵炲﹤锕㈡笟锟藉铏圭磼濡浚浜炴竟鏇㈩敇閵忊�冲壒闂佸湱鍎ら幖鈺佲枔娴犲鐓熼柟閭﹀墻閸ょ喎顭胯閸撴氨鎹㈠☉銏″亗閹艰揪绲块鎺楁⒑鐠団�虫灍闁荤啿鏅犻妴浣肝旈崨顔芥婵炲濮撮鎰板极閸岀偞鐓ラ柣鏇炲�圭�氾拷100闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃ê娅ｅ銈冨劚缁绘﹢寮诲☉銏犖ч柛鈩冾焽椤︿即姊洪崫鍕拱闁烩晩鍨堕妴渚�寮撮姀鈩冩珳闂佺硶鍓濋悷顖毼ｉ鍕拻濞达綀顫夐崑鐘绘煕閺傝法鐒哥�规洘鍔欏畷绋课旈敓浠嬫嫅閻斿吋鐓ユ繝闈涙－濡插憡銇勯銏″殗闁哄本娲濈粻娑欑節閸屾埃鎷ゆ繝娈垮櫙缁茬晫锟芥碍婢橀～蹇撁洪鍕獩婵犵數濮寸�涒晠鎮鹃悜鑺ュ�甸柣褍鎲＄�氬綊姊鸿ぐ鎺擄紵缂侊拷娓氾拷閹锋垿鎮㈤崗鑲╁帾婵犵數鍋熼崑鎾斥枍閸℃稒鐓曢悗锝庝簼椤ャ垽鏌＄仦鍓с�掑ù鐙呯畵瀹曟粏顦俊鎻掔墕椤啴濡堕崨瀵稿椽闂佺懓鍤栭幏锟�", fire.log.enums.YYLoggerTuJingEnum.tujing_Value_huobiduihuan, 0);						
						if (ret != 0) {
							ret = bag.addSysCurrency((long)(newMoney*fire.pb.fushi.Module.getCreditPointValue(fire.pb.fushi.Module.CREDITPOINT_IN_FS2GOLD))
									, MoneyType.MoneyType_EreditPoint, "1缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽幃娆戞嫚瑜庣�氬綊鏌涢锝嗙闁哄懏鎮傞弻锕�螣娓氼垱笑闂佸搫妫寸徊楣冦�冮妷鈺傚�烽柛娆忣槸閺嬬姴顪冮妶鍐ㄧ仾闁挎岸鏌嶇憴鍕伌鐎规洖銈告慨锟介柕蹇婂墲閻︾偤姊婚崒姘拷鎼佸磹閻戣姤鍊块柨鏇炲�哥粻鏍煕椤愶絾绀�缁剧偓瀵х换娑橆啅椤旇崵鐩庣紓渚婃嫹闁割偆鍠愰崣蹇斾繆椤栨稑顕滅痪顓炲⒔閻ヮ亪骞嗚閻撳ジ鏌＄仦鍓р槈闁伙絾绻堥弫鎾寸鐎ｎ亞锛涢梺缁樺姉閸庛倝宕戦崒鐐寸厸闁搞儮鏅涢弸鍌毭瑰鍕煉闁哄瞼鍠栧鍫曞垂椤曞懏娈虹紓鍌欑椤戝牆鐣烽悽鍨潟闁圭儤顨嗛弲绋棵归悩宸剱闁哄懏鎮傞弻锝夋晲閸涱垳浼囩紒鐐礃濡嫰濡撮幒鎴僵妞ゆ帒锕ラ弫楣冩煟鎼淬垼澹樼紓宥咃工椤繘鎼归崷顓犵厯闁荤姵浜介崝搴㈠閸ヮ剚鈷戠紒瀣儥閸庢垿鏌涚�ｃ劌锟芥繈鐛崘顔肩伋闁哄倶鍎查悗濠氭⒑閸︻厼浜炬繛鍏肩懇閺佹捇鎮剧仦鐐瘓闂佸搫鐭夌紞浣规叏閿熶粙鏌嶉挊澶嬵棞闁哄懘浜跺铏圭磼濡櫣鐟查梺绋垮婵炲﹤锕㈡笟锟藉铏圭磼濡浚浜炴竟鏇㈩敇閵忊�冲壒闂佸湱鍎ら幖鈺佲枔娴犲鐓熼柟閭﹀墻閸ょ喎顭胯閸撴氨鎹㈠☉銏″亗閹艰揪绲块鎺楁⒑鐠団�虫灍闁荤啿鏅犻妴浣肝旈崨顔芥婵炲濮撮鎰板极閸岀偞鐓ラ柣鏇炲�圭�氾拷100闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃ê娅ｅ銈冨劚缁绘﹢寮诲☉銏犖ч柛鈩冾焽椤︿即姊洪崫鍕拱闁烩晩鍨堕妴渚�寮撮姀鈩冩珳闂佺硶鍓濋悷顖毼ｉ鍕拻濞达綀顫夐崑鐘绘煕閺傝法鐒哥�规洘鍔欏畷绋课旈敓浠嬫嫅閻斿吋鐓ユ繝闈涙－濡插憡銇勯銏″殗闁哄本娲濈粻娑欑節閸屾埃鎷ゆ繝娈垮櫙缁茬晫锟芥碍婢橀～蹇撁洪鍕獩婵犵數濮寸�涒晠鎮鹃悜鑺ュ�甸柣褍鎲＄�氬綊姊鸿ぐ鎺擄紵缂侊拷娓氾拷閹锋垿鎮㈤崗鑲╁帾婵犵數鍋熼崑鎾斥枍閸℃稒鐓曢悗锝庝簼椤ャ垽鏌＄仦鍓с�掑ù鐙呯畵瀹曟粏顦俊鎻掔墕椤啴濡堕崨瀵稿椽闂佺懓鍤栭幏锟�", fire.log.enums.YYLoggerTuJingEnum.tujing_Value_huobiduihuan, 0);
							fire.pb.talk.MessageMgr.psendMsgNotify(roleid, 160403, java.util.Arrays.asList(Integer.toString(money), Integer.toString(newMoney)));
						}
					}
				}
				// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃ê娅ｅ銈冨劚缁绘﹢寮诲☉銏犖ч柛鈩冾焽椤︿即姊洪崫鍕拱闁烩晩鍨堕妴渚�寮撮姀鈩冩珳闂佺硶鍓濋悷顖毼ｉ鍕拻濞达綀顫夐崑鐘绘煕閺傝法鐒哥�规洘鍔欏畷绋课旈敓浠嬫嫅閻斿吋鐓ユ繝闈涙－濡插憡銇勯銏″殗闁哄本娲濈粻娑欑節閸屾埃鎷ゆ繝娈垮櫙缁茬晫锟芥碍婢橀～蹇撁洪鍕獩婵犵數濮寸�涒晠鎮鹃悜鑺ュ�甸柣褍鎲＄�氬綊姊鸿ぐ鎺擄紵缂侊拷娓氾拷閹锋垿鎮㈤崗鑲╁弳濠电娀娼уΛ顓炍ｉ崨濞夸簻妞ゆ劑鍨洪崵鍥煛鐏炵偓绀夌紒鐘崇♁缁绘繈宕橀埡鍐ㄧ悼闂傚倷绀侀幉锟犲蓟閵娾晛绠烘繝濠傛噺椤洟鏌熼幆褜鍤熼柣鐔烘嚀閳规垿鎮╅幓鎺撴濡炪倕绻愰悥鐓庮潖缂佹ɑ濯村〒姘煎灣閸旀悂姊哄ú璇插闁靛牏顭堥悾鐑藉箣閿旇棄锟界兘鏌ｉ幋鐏活亝绂嶅Δ锟介埞鎴︽倷閸欏妫￠梺鍦焾椤嘲鐣烽幇鐗堝仺闁告稑锕﹂崢浠嬫⒑闂堟稓绠氭俊鎻掓嚇瀹曨垵绠涘☉娆戝幗闂佸湱鍎ら幐鎼佸礉閵堝顥嗗鑸靛姈閻撶喐淇婇婵囶仩闁挎稑绉归弻锝夘敇閻旈鐟插銈冨妸閸庣敻骞冨▎鎴嫹閻㈡鐒炬い顐庡啠鏀介柣鎰版涧鐢墎绱掔紒姗堣�挎鐐插暙閳诲酣骞欓崘鈺傛珜闂備浇娉曢崰宥囧垝濞嗘挶锟戒線寮崼鐔告闂佽法鍣﹂幏锟�
				else if (srcmoneytype == fire.pb.game.MoneyType.MoneyType_GoldCoin && this.dealGold()) {
					newMoney = money * 100;
					ret = bag.addSysMoney(newMoney, "1闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃ê娅ｅ銈冨劚缁绘﹢寮诲☉銏犖ч柛鈩冾焽椤︿即姊洪崫鍕拱闁烩晩鍨堕妴渚�寮撮姀鈩冩珳闂佺硶鍓濋悷顖毼ｉ鍕拻濞达綀顫夐崑鐘绘煕閺傝法鐒哥�规洘鍔欏畷绋课旈敓浠嬫嫅閻斿吋鐓ユ繝闈涙－濡插憡銇勯銏″殗闁哄本娲濈粻娑欑節閸屾埃鎷ゆ繝娈垮櫙缁茬晫锟芥碍婢橀～蹇撁洪鍕獩婵犵數濮寸�涒晠鎮鹃悜鑺ュ�甸柣褍鎲＄�氬綊姊鸿ぐ鎺擄紵缂侊拷娓氾拷閹锋垿鎮㈤崗鑲╁弳濠电娀娼уΛ顓炍ｉ崨濞夸簻妞ゆ劑鍨洪崵鍥煛鐏炵偓绀夌紒鐘崇♁缁绘繈宕橀埡鍐ㄧ悼闂傚倷绀侀幉锟犲蓟閵娾晛绠烘繝濠傛噺椤洟鏌熼幆褜鍤熼柣鐔烘嚀閳规垿鎮╅幓鎺撴濡炪倕绻愰悥鐓庮潖缂佹ɑ濯村〒姘煎灣閸旀悂姊哄ú璇插闁靛牏顭堥悾鐑藉箣閿旇棄锟界兘鏌ｉ幋鐏活亝绂嶅Δ锟介埞鎴︽倷閸欏妫￠梺鍦焾椤嘲鐣烽幇鐗堝仺闁告稑锕﹂崢浠嬫⒑闂堟稓绠氭俊鎻掓嚇瀹曨垵绠涘☉娆戝幗闂佸湱鍎ら幐鎼佸礉閵堝顥嗗鑸靛姈閻撶喐淇婇婵囶仩闁挎稑绉归弻锝夘敇閻旈鐟插銈冨妸閸庣敻骞冨▎鎴嫹閻㈡鐒炬い顐庡啠鏀介柣鎰版涧鐢墎绱掔紒姗堣�挎鐐插暙閳诲酣骞欓崘鈺傛珜闂備浇娉曢崰宥囧垝濞嗘挶锟戒線寮崼鐔告闂佽法鍣﹂幏锟�100闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽、鏃堝川椤撗傜处闂傚倸鍊峰鎺旀椤旀儳绶ゅù鐘差儏鎼村﹪鏌ら悡搴☆暢濞存粈绮欏娲嚒閵堝懍娌紓浣割儏閻楁挸鐣峰鍐ｆ斀閻庯綆鍋勯敓钘夌埣閺屾盯骞囬埡浣肝ㄩ梺鐚存嫹濞寸姴顑嗛悡鐔兼煙闁箑骞楃紓宥嗗灴閺岋綀绠涢妷鈺傤�嶉梺閫涚┒閸斿矁鐏掔紓浣割儏閻忔繈锝為崶顒佸�甸悷娆忓绾剧敻鏌ㄩ悢璇残撻柛鎾磋壘椤洭鍩￠崨顔惧幘闂佸憡绺块崕鏌ュ汲閳哄懏鐓曟繛鍡楃箲椤ャ垺鎱ㄦ繝鍛仩缂佽鲸甯掕灒闁煎鍊ゅΣ顒勬⒒娴ｄ警鐒鹃柨鏇樺�曢敃銏ゆ焼瀹ュ棙娅㈤梺鍏间航閸庢娊宕弻銉︾厵闁告垯鍊栫�氾拷", fire.log.enums.YYLoggerTuJingEnum.tujing_Value_huobiduihuan, 0);
					if (ret != 0) {
						fire.pb.talk.MessageMgr.psendMsgNotify(roleid, 160404, java.util.Arrays.asList(Integer.toString(money), Integer.toString(newMoney)));
					}
				}
				
				return ret == 0 ? false : true ;
			}
			
			
			/**
			 * 缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽幃娆戞嫚瑜庣�氬綊鏌涢锝嗙闁哄懏鎮傞弻锕�螣娓氼垱笑闂佸搫妫寸徊楣冦�冮妷鈺傚�烽柛娆忣槸閺嬬姴顪冮妶鍐ㄧ仾闁挎岸鏌嶇憴鍕伌鐎规洖銈告慨锟介柕蹇婂墲閻︾偤姊婚崒姘拷鎼佸磹閻戣姤鍊块柨鏇炲�哥粻鏍煕椤愶絾绀�缁剧偓瀵х换娑橆啅椤旇崵鐩庣紓渚婃嫹闁割偆鍠愰崣蹇斾繆椤栨稑顕滅痪顓炲⒔閻ヮ亪骞嗚閻撳ジ鏌＄仦鍓р槈闁伙絾绻堥弫鎾寸鐎ｎ亞锛涢梺缁樺姇閹碱偆澹曟繝姘叆婵犻潧妫Σ鍝ョ磼閻欐瑥娲﹂悡鐔兼煙闁箑骞楃紓宥嗗灦閵囧嫰濡烽妷顔煎壋缂備浇椴哥敮妤�顕ラ崟顒傜瘈闁告劑鍔嬪ǎ顕�姊绘担鍛婃儓閻炴凹鍋婂畷婵嬪箣閿曪拷缁犳牠鏌曢崼婵愭Ц缁炬儳鍚嬬换娑㈠箣閻戝洣绶垫繛瀵搞�嬮幏锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥ㄧ厱闁斥晛鍟ㄦ禒锔剧磼椤旂懓澧插ǎ鍥э躬閹瑩顢旈崟鑸靛闁哄稁鍘肩粈澶屾喐韫囨洖鍨濆┑鐘宠壘缁狅綁鏌ｅΟ鐑樷枙婵☆偅绮撳铏圭矓閸℃顏存繛鍫熸礋閺屽秹鏌ㄧ�ｎ亞浠搁梺闈涙搐鐎氫即鐛幒妤佸�烽柡澶嬪焾娴兼挾绱撻崒姘拷椋庣矆娓氾拷钘濋梺顒�绉撮弸渚�鎮归崶顏勭毢闁哄棴绠撻弻锝夊閵忊晝鍔哥紓浣哄У閻╊垶寮婚敐鍛傛棃鏁撴禒瀣亱闊洦绋戦崒銊ッ归悩宸剱闁抽攱鍨块弻娑樷攽閸℃浠奸梺鍝勬閻熲晠寮诲☉娆戠瘈闁稿本绋掗崰鎰版⒑鏉炴壆璐伴柛锝忕到閻ｅ嘲顭ㄩ崟顒�顎撻梺鎯х箳濞呫垻妲愰弻銉︹拻濞达綀娅ｇ敮娑㈡煥閺囨娅婄�规洑鍗冲浠嬵敇閻愭妲烽梻浣瑰濞叉牠宕愯ぐ鎺撳亗婵炴垯鍨洪崐鍫曟煟閹伴偊鏉洪柛銈嗙懃閳规垿鍨鹃悙钘変划闂佸搫鑻粔鍫曞箟閹绢喖绀嬫い鎰╁�撶槐婵嬫煟鎼淬値娼愭繛鑼枑缁傚秹宕奸弴鐐存К闂佽法鍠撴慨瀵稿婵傚憡鐓曢悘鐐舵閺嗘瑦绻涚拠褏鐣甸柛鈺傜洴楠炲鎮╅悽纰夌闯濠电偠鎻紞锟芥い鏇熺墵閹偤鎮惧畝锟界壕濂告煟濡搫鑸圭�规挸妫濋弻鈥崇暆閿熶粙宕伴弽褏鏆︽繛鍡樻尭鍥撮梺绯曞墲椤ㄥ繑瀵奸敓锟�
			 * @return true ok
			 */
			public boolean dealHearthStone() {
				// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忓爼鏌ｆ惔銈庢綈婵炴彃绻樺畷鏇㈠箮閼恒儲娅㈤梺鍝勫�堕崐妤冪矓閻㈠憡鐓曢柣妯虹－婢у崬顭跨憴鍕鐎规洜顭堣灃濞达絽鎼獮宥夋⒒娴ｇ瓔鍤冮柛銊ㄦ珪閺呰泛螖閸氳棄顦板鍕箛椤掑偆鍟囬梻浣告惈椤︿即宕烘繝鍥╁彆妞ゆ帒瀚悡娑㈡倶閻愰鍤欓柨鐔诲Г缁诲牓鐛繝鍌楁斀閻庯綆浜為鐓庮渻閵堝棙顥嗛柛瀣姈閺呭爼顢涘锝嗘杸闂佺粯鍔樼亸娆撳箺閻樼數纾兼い鏃囧亹閻忚京绱掓潏鈺佷沪缂佺粯绻堝畷鎯邦樁闁硅姤娲栭埞鎴︽倷閺夋垹浠ч梺鎼炲妿閹虫捇寮锟藉缁樼瑹閿熻棄顭囪閹广垽宕卞☉妯碱槶濠电娀娼ч鍡涘磻閻斿吋鐓涚�广儱楠告禍鐐电棯閹规劖顥夐棁澶愭煥濠靛棙鍣洪柟顖氱墦瀵粙鍨鹃弬銉︽杸闂佸疇妫勫Λ妤佺濠婂牊鐓曢柣鏂挎啞缂嶆垶銇勯弴顏嗙ɑ缂佺粯绻傞～婵嬵敄閳圭偓娅婇柡灞界У濞碱亪骞嶉鐓庮瀴婵＄偑鍊戦崕鑼崲閸繍娼栨繛宸簻缁�鍫ユ煠绾板崬澧悽顖樺劦濮婃椽宕妷銉愶綁鎮介銈囩瘈闁绘侗鍣ｉ獮鍥级鐠侯煈妲版俊鐐�栧Λ浣筋暰闂佸綊鏀卞钘夘潖濞差亜宸濆┑鐘插濡插牓姊洪幐搴㈢┛缂佺姵鎹囬悰顔界節閸パ冨祮闂侀潧楠忕槐鏇㈠储閻㈠憡鈷戦柛娑橈工閻忕喖鏌涙繝鍐⒈闁跨喕濮ら悢顒勫箯閿燂拷
				if (fire.pb.fushi.Module.getIsYYBUser(userid)) {
					return fire.pb.fushi.FushiManager.subFushiFromUser(userid, roleid, money, 0, 0,
							fire.pb.fushi.FushiConst.REASON_SUB_EXCHANGE_CURRENCY, YYLoggerTuJingEnum.tujing_Value_huobiduihuancost, true);
				}
				else {
					xbean.YbNums ybNums = xtable.Fushinum.get(userid);
					if (ybNums == null) {
						return false;
					}
					xbean.YbNum ybNum = ybNums.getRoleyb().get(roleid);
					if (ybNum == null) {
						return false;
					}
					if (ybNum.getNum() < 0 || ybNum.getSysnum() < 0) {
						return false;
					}

					return fire.pb.fushi.FushiManager.subFushiFromUser(userid, roleid, money, 0, 0,
							fire.pb.fushi.FushiConst.REASON_SUB_EXCHANGE_CURRENCY, YYLoggerTuJingEnum.tujing_Value_huobiduihuancost, true);
				}
			}
			
			/**
			 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闂囧鏌ㄥ┑鍡╂Ч濞存嚎鍊濋弻銈夊级閹稿骸浠村┑顔硷攻濡炰粙銆佸Δ鍛櫢闁伙絽鐬奸惌鎾绘煛鐏炶鍔滈柡鍛倐閺岋箑螣娓氼垱笑闂佽法鍠曞Λ鍕焽閿熺姴违濞达絿纭堕弸搴ㄦ煙閹咃紞妞わ富鍙冮幃宄邦煥閸愵亞顔掗柦妯荤箖閵囧嫰寮介妸褋锟芥帞绱掗悩鑽ょ暫鐎殿喖鐖煎畷鐓庘攽閸″繑瀵栭梻浣筋嚃閸犳盯宕戦幇鐗堝剦妞ゅ繐鐗滈弫鍥煟閹扮増娑ч柣鎾跺枛閹鈻撻崹顔界亾濡炪値鍘奸悧鎾汇�佸锟藉畷妤呮偂鎼达絿鐛┑鐘垫暩婵锟芥氨鍏樺畷顖炲炊閵娧呯槇闂佹眹鍨藉褔宕滃畷鍥╃＝鐎广儱鎳忛ˉ銏拷瑙勬礃缁矂鍩㈡惔銊ョ疀妞ゅ繐妫涢悾鎯р攽閻愬樊鍤熷┑顔芥尦椤㈡牠宕卞☉娆忎簵闂佺粯鏌ㄩ崥瀣偂濞嗘挻鐓欐い鏍ф閸燁垰袙閹扮増鈷戦悹鎭掑妼閺嬫瑦淇婇銏狀仼妞ゎ厼娲崹楣冨箛娴ｅ憡顓垮┑鐘垫暩婵數鍠婂澶婄；闁告洦鍨遍悡鐔告叏濮楀棗澧伴柟鐣屽█閹顫濋幇浣圭秷缂備胶绮惄顖炵嵁鐎ｎ喗鍊烽柛顭戝亜濞呇囨⒒娴ｈ櫣甯涢悽顖滃仱瀵煡顢曢妶鍡╂綗闂佸湱鍎ら〃鍡涘磻閹扮増鐓欓悗娑櫭慨鍫ユ煕閵婏箑顕滃ǎ鍥э躬閹晫绮欑捄顭戞Ч婵＄偑鍊栭弻銊︽櫠娴犲绾ч柟闂寸劍閳锋垿姊婚崼鐔剁繁婵＄嫏鍛＜闁绘ê鍟块悘瀛樸亜閵忊剝顥堥柡浣规崌閺佹捇鏁撻敓锟�
			 * @return true ok
			 */
			public boolean dealGold() {
				fire.pb.item.Pack bag = new fire.pb.item.Pack(roleid, false);
				long ret = bag.subGold(-money, "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幈濡炪値鍘介崹鍨濠靛鐓曟繛鍡楃箳缁犲鏌″畝瀣М濠殿噯鎷烽梺闈涚箚閺呮繈宕濋崫銉х＝濞撴艾锕ョ�氬綊姊洪崜鎻掍簽闁哥姴妫欑粋宥咁煥閸喓鍘甸梺缁樺灦閿氶柣蹇嬪劜閵囧嫯绠涙繝鍐╃彇缂備浇椴哥敮锟犲极閹惧顩烽悗锝庝簽椤︺劑姊哄畷鍥ㄥ殌闁靛洦顭囬懞杈ㄧ節濮橆収妫呭銈嗗姂閸ㄧ儤寰勯崟顖涚厵闁告稑锕ら崝銈夋煟椤垵澧扮紒杈ㄦ崌瀹曟帒鈻庨幇顔哄仒濠碉紕鍋涢悺銊╁箖閸岀偛绠栭柣鎴ｆ閻撴稑銆掑顒佸缂傚秴娴风槐鎾诲磼濞嗘垵濡介柦鍐ㄥ船閳规垿顢涘☉娆戠▏闂侀潧妫欑敮鎺楋綖濠靛鍋傞幖杈剧导閸栨牠姊绘担鍛婂暈闁哄被鍔戦獮妤�顭ㄩ崨顕呮綗闂佽鍎抽悺銊﹀垔閹绢喗鐓ｉ煫鍥ㄦ礃閸わ拷缂備焦顨愮换婵嗩潖濞差亜绠归柣鎰絻椤牓姊虹拠鑼缂佽鐗撻獮鍐┿偅閸愨晛锟藉鏌﹀Ο渚Ч鐎规挸绉撮—鍐Χ閸℃ê鏆楅梺鍝ュТ濞撮攱绔熼弴銏╂晬闁绘劗琛ラ幏娲⒑鐠団�崇�婚柛娑卞灱閸熷牊淇婇悙顏勶拷銈夊磻閸曨垁鍥敍閻愯尙鍘洪梺鍦亾閻ｎ亪宕戦崨瀛樼厱闁硅埇鍔嶉弶褰掓煙闁垮銇濋柡宀嬬秮閹晠宕楅崨鏉跨劵闂備礁鎲￠弻銊╂嚐椤栫偛鐓濈�广儱顦粻娑㈡煟濡わ拷閻楀繘宕㈤悽鍛娾拺闁告稑锕ら悘鐔兼煕婵犲啰澧遍柨鐔诲Г閻旑剟骞忛敓锟�", fire.log.enums.YYLoggerTuJingEnum.tujing_Value_huobiduihuancost, 0);
				return ret == 0 ? false : true ;
			}
			
			
		}.submit();
		
		
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 810653;

	public int getType() {
		return 810653;
	}

	public int srcmoneytype; // 源类型 参考game.xml中MoneyType
	public int dstmoneytype; // 目标类型 参考game.xml中MoneyType
	public int money; // 数量

	public CExchangeCurrency() {
	}

	public CExchangeCurrency(int _srcmoneytype_, int _dstmoneytype_, int _money_) {
		this.srcmoneytype = _srcmoneytype_;
		this.dstmoneytype = _dstmoneytype_;
		this.money = _money_;
	}

	public final boolean _validator_() {
		if (srcmoneytype < 1 || srcmoneytype > 10) return false;
		if (dstmoneytype < 1 || dstmoneytype > 10) return false;
		if (money < 1) return false;
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(srcmoneytype);
		_os_.marshal(dstmoneytype);
		_os_.marshal(money);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		srcmoneytype = _os_.unmarshal_int();
		dstmoneytype = _os_.unmarshal_int();
		money = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CExchangeCurrency) {
			CExchangeCurrency _o_ = (CExchangeCurrency)_o1_;
			if (srcmoneytype != _o_.srcmoneytype) return false;
			if (dstmoneytype != _o_.dstmoneytype) return false;
			if (money != _o_.money) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += srcmoneytype;
		_h_ += dstmoneytype;
		_h_ += money;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(srcmoneytype).append(",");
		_sb_.append(dstmoneytype).append(",");
		_sb_.append(money).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CExchangeCurrency _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = srcmoneytype - _o_.srcmoneytype;
		if (0 != _c_) return _c_;
		_c_ = dstmoneytype - _o_.dstmoneytype;
		if (0 != _c_) return _c_;
		_c_ = money - _o_.money;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

