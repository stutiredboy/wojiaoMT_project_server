
package fire.pb.shop;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CBuyNpcShop__ extends mkio.Protocol { }

/** NPC购买协议
*/
// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CBuyNpcShop extends __CBuyNpcShop__ {
	@Override
	protected void process() {
		// protocol handle
		
		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╄兌閿熻棄绠嶉崕閬嵥囬婊呯焼閻庯綆鍋佹禍婊堟煙閸濆嫮肖闁告柨绉甸妵鍕棘閹稿骸鏋犲┑顔硷功缁垶骞忛崨顖涘枂闁告洦鍋傞崫妤呮⒒娴ｄ警鐒鹃悗娑掓櫅椤啴鎸婃径灞炬濠电姴锕ら崯鐘诲几鎼淬劍鐓欓悗娑欘焽缁犮儲淇婇锝囩煉闁诡喖鍢查…銊╁川椤撗勬瘔闂佹眹鍩勯崹閬嶃�冩繝鍥х畺闁炽儲鏋煎Σ鍫熸叏濡厧浜鹃悗姘愁潐椤ㄣ儵鎮欓懠顑胯檸闂佸憡姊归懝鎹愮亙闂佺粯顭堝▍鏇㈠磹閹扮増鐓熸繛鎴濆船濞呭秶锟芥鍠曠划娆撱�佸锟介幃銏ゅ传閸曨偆鐫勯梻鍌氬�风粈渚�骞夐敓鐘茬闁挎梻鏅々鍙夌節婵犲倻澧曢柛鎴犲У缁绘盯骞嬪▎蹇曚痪闂佺粯鎸婚惄顖炲箖濮楋拷閹瑩骞撻幒鍡樺瘱婵犵數鍋涘璺侯焽濞嗘挸鐓橀柟杈鹃檮閺咁剟鏌涢弴銊ヤ簻妤犵偛顑嗙换婵嗏枔閸喗鐝梺褰掝棑閸忔ê顫忓ú顏勬闁靛闄勯悵鏃堟⒑閸濄儱鏋戝┑顖欑矙婵＄敻骞囬弶鍨�垮┑鐐村灦閻熴垽骞忓ú顏呯厽闁绘ê寮舵径鍕喐閺夊灝鏆ｆい銏☆殜婵拷闁斥晛鍟鍨攽閳藉棗鐏ｆい顓炵墛娣囧﹪宕稿Δ浣哄幈闂佸湱鍎ら幐绋棵归濮愪簻闁靛骏绱曞ú鎾煙椤旂晫鎳囩�规洩缍佸畷鎺楁晜閸撗勬闂備礁鎼張顒勬儎椤栨凹鍤曢柟缁㈠枛鎯熼梺闈涳紡閸屾碍鎲㈢紓鍌氬�搁崐鐑芥嚄閼稿灚鍙忛柟缁㈠枓閿熸枻绠撻幃婊堟寠婢跺瞼鏆繝寰锋澘锟芥洟骞婅箛娴板宕奸悢铏诡啎闂佺懓顕崑鐔煎箠閸曨垱鐓曢柣妯哄暱婵秵鎱ㄦ繝鍕妺閻庣數鍘ч埢搴ㄥ箣閻樻劖鍨甸埞鎴︽晬閸曨偂绮х紓渚囧枟閻熴儵顢氶敐鍡欑瘈婵﹩鍘藉▍婊堟⒑缁洖澧查柨姘舵煕閺傛寧鍤囨慨濠冩そ濡啫鈽夊杈╂澖闂備胶纭堕弲娑氾拷姘緲椤曪綁骞庨挊澶屽姶闂佸憡鍔︽禍鐐烘儊閸儲鈷戞慨鐟版搐閻忓弶绻涙担鍐插椤╅攱绻濇繝鍌滃闁绘挶鍎甸弻锟犲炊閵夈儱顬嗙紓浣靛妿缁垶濡甸崟顖氬嵆妞ゅ繐妫涜摫缂傚倷鑳剁划顖滄崲閸岀儑缍栨繝闈涱儛閺佸棝鏌涚仦鎹愬閼叉牠姊婚崒姘拷椋庣矆娓氾拷楠炲鏁撻悩鑼槷闂佺鎻粻鎴犵矆婢舵劕绠归弶鍫濆⒔閹ジ鏌ｅ鍐剧吋闁哄矉缍侀獮鍥敊閻撳骸顬嗛梻浣瑰▕閺�閬嶅垂閸︻厽顫曢柟鐑橆殢閺佸秵绻涢幋鐐垫噮妞わ负鍔岄—鍐Χ鎼粹�茬盎闂佹寧娲︽禍顏勵嚕鐠囨祴妲堟俊顖涚矌閸犳牕鐣峰Δ鍛闁兼祴鏅涘☉褔姊婚崒娆愮グ婵炲娲熷畷浼村即閻旂寮块梺闈涚墕椤︿即宕靛畝鍕厱闁圭偓顨呴幊鎰八囬娑氱瘈闁汇垽娼у瓭濠电偛鐪伴崐婵嬪箯閹达附鍋勯柛婵勫劤椤旀洟姊洪悷閭﹀殶闁稿﹥鍨甸～婵堟崉閸濆嫬娈ら梺鐟板悑閻ｎ亪宕濇惔銊ョ煑闁瑰墽绮悡鏇㈡煏婢跺棙娅撴俊顐ｅ灩缁辨帞锟斤綆浜堕悡濂告煛鐏炵晫肖缂佽鲸甯掕灒閻犲洩灏欓敍鎾寸節濞堝灝鏋涢柨鏇樺妼閳诲秹鏁愰崶褍鐏婂┑鐐叉缁诲棝寮告惔銊︾厵妞ゆ牕妫楅崯顐ョ亣闂傚倸鍊搁崐鐑芥嚄閸洖绠犻柟鎹愵嚙閸氬綊鏌″搴″箹缂佺媭鍨堕弻銊╂偆閸屾稑顏�
		final gnet.link.Role role = gnet.link.Onlines.getInstance().find(this);
		if (role == null)
			return;
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨绘い鎺嬪灪閵囧嫰骞囬姣挎捇鏌熸笟鍨妞ゎ偅绮撳畷鍗炍旈敓浠嬪煕閹烘鈷戠紓浣姑粭褔鏌￠崪浣镐簽婵″弶鍔欓獮妯硷拷娑櫭鎾寸節濞堝灝鏋熼柛銊ャ偢瀹曟垿骞囬弶璺唹闂侀潧绻堥崐鏇㈢嵁閵忥紕绠鹃柟瀵稿仧閹冲懘鏌涘锟芥禍璺侯潖濞差亝顥堟繛鎴ｉ哺閳绘捇姊洪崫銉バｉ柣妤侇殜瀵煡宕奸弴銊︽櫓闂佸憡鎸嗛崟鍓佺闂傚倷娴囬鏍垂鎼淬劌绀嬫い鎰ㄥ墲濡﹪姊婚崒娆戭槮闁圭⒈鍋婂鐢割敆閿熺晫鍙呴梺缁樻椤ユ捇寮抽敃鍌涚厽闁规儳纾畝鎼佹煛閿熻姤绂掔�ｎ偆鍘遍梺闈涱槹閸ㄧ數锟芥凹鍠涢妵鎰洪鍛嫽闂佺鏈悷褔藝閿曞倹鐓欑痪鏉垮船娴滅増銇勯姀锛勫⒌鐎规洏鍔戦、娑橆煥閸涱垰甯梻鍌欑劍閻綊宕硅ぐ鎺撳�舵慨姗嗗墰閺嗭箓鏌涘▎蹇ｆШ缂佺娀绠栭弻鐔猴拷娑欘焽閹冲啴鏌ｈ箛濠冩珕妞ゃ劊鍎甸幃娆擃敂閸曨厺鐥┑鐑囩到濞层倝鏁冮鍫涳拷浣糕槈濮楀棙鍍靛銈嗘尵閸犲酣宕滈崹顐＄箚闁绘劦浜滈敓濮愬�濆畷鎴﹀礋椤栨稓鍘愰梺鎸庣箓閹峰顭囬弽顓熺厱婵犻潧妫楅顐︽煛閸☆厾鐣甸柡灞剧洴婵＄兘濮�閳╁啰褰呯紓鍌欑劍閵囨盯鏁撻懞銉︾伇闁猴拷閼恒儯浜滈柡鍐ㄥ�堕敓钘夘儏椤斿繘濡疯绾剧晫锟藉箍鍎遍幏鎴﹀绩鐠囩潿搴ㄥ炊瑜濋煬顒勬煙椤旂偓娅曠紒顔界懅閹瑰嫰鈥﹂幋鐐愌冣攽閿涘嫬浜奸柛濠冪墵閹兾旈敓浠嬶綖濠靛惟闁冲搫锕ラ弲鈺呮⒑閸︻厼鍔嬫い銊ユ閹繝鎮㈤崗鑲╁幗濠碘槅鍨抽崢褔宕濈�ｎ偁浜滈煫鍥ㄦ礀閳诲牓鏌＄仦鍓р檨闁诡垱鏌ㄩ埥澶婎潨閸喎顏跺┑鐘绘涧椤戝懐绮婚弽銊ょ箚闁靛牆鎳忛崳鍦磼閿熶粙宕奸姀鈥虫瀾闂婎偄娲﹀ú鏍夊鑸电厱闊洦绋掗敍鐔虹磼鐠囧弶顥㈤柡灞炬礋瀹曠厧鈹戦崱鈺�绱戞俊鐐�х拋锝囩不閹捐钃熼柨婵嗙墢閻わ拷闂佽宕橀崺鏍箟婵傚憡鈷戦梺顐ｇ〒閳规帡鏌涢弬璺ㄐら柟骞垮灩閳规垹锟斤綆浜為ˇ銊╂⒑瀹曞洦鍤�闁靛洦锕㈤幖瑙勬償閵婏妇鍘介柟鍏肩暘閸娿倕顭囬幇顓犵闁圭粯甯炵粻鑽わ拷瑙勬礃缁诲倿顢樻總绋跨倞闁靛鍎辩花銉︾節閻㈤潧鈻堟繛浣冲浂鏁勯柛娑卞灣閻棝鎮楅敐搴′簴濞存粍绮撻弻鐔煎级閸噮鏆㈢紓浣割儑缁垶濡甸崟顖氱睄闁跨喍绮欏畷婵單旈崘鈺婃綗闂佽宕橀褏澹曢崗鍏煎弿婵妫楁晶楣冩煙妞嬪骸鍘撮柟顔界矒閹崇偤濡烽妷锔炬殸闂傚倷娴囬崑鎰扳�﹂崼銉﹀�舵慨妯挎硾閻鐓崶銊р檨闁绘挾鍠栭弻鏇＄疀閺囩倫銉ッ归悩宕囨创闁哄矉绻濆畷鍗炍熼懖鈺冨帨闂備礁鎼懟顖滅矓鐟欏嫪绻嗛柣鎴ｆ鍞悷婊勭箘濡叉劙鎮欓悜妯锋嫼闂佸憡绻傜�氼參鏁嶉弮鍫熲拻闁告洦鍋勯顏嗙磼瀹�鍐摵缂佺粯绻堝畷鍫曗�栭顒�娲ㄩ崣鎾绘煕閵夛絽濡介柣鎾卞劜閵囧嫯绠涘顒傚帿婵烇絽娲ら敃顏堝箖濞嗘搩鏁傞柛鏇″煐鐎氬綊鏌曢崼婵愭Ц缁炬儳顭烽弻娑樷槈閸楃偟浠╅梺鎼炲妽缁诲牓寮婚悢鐓庣闁逛即娼у▓顓㈡⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤悡搴ｇ暰閻熸粍绮撳畷鐢告偄閹肩偘绨婚梺鍐叉惈閸燁偊宕㈤幘顔界厵妞ゆ梻鐡斿▓婊堟煛娴ｇ懓濮堥柟顖涙閸ㄩ箖骞囨担閫涙唉缂傚倸鍊搁崐宄邦渻閹烘梹顐介柕鍫濇川娑撳秹鏌熼幑鎰靛殭缂佺姵鐗楁穱濠囧Χ閸涱喖娅ч悗瑙勬尫缁舵岸寮诲☉鈶╋拷锕傚箣濠靛洨浜┑鐘愁問閸犳牗顨ラ幖浣诧拷鏃堝礃椤斿槈褔鐓崶銊﹀暗婵¤缍佸娲箹閻愭彃顬堢紒鍓ц檸閸欏啫鐣峰璺虹闁哄喛鎷烽悗姘皑閿熺晫鎳撴竟濠囧窗濡ゅ懎纾介柣銏犳啞閻撴稑顭跨捄鐚村姛濠⒀勫灴閺屾盯寮捄銊у姱閻庢鍠楅幃鍌炵嵁鐎ｎ喗鏅滈柦妯侯檧閹风兘宕归顐ｎ啍闂佺粯鍔樼亸娆愮閵忋倖鐓曢柡鍐挎嫹缁炬澘绉规俊鐢稿礋椤栨稒娅嗛梺鍓茬厛閸犳牜绮婇锟介幃妤冩喆閸曨剛顦ㄩ梺鎼炲妼閻忔繈鎮鹃悜钘夌闁瑰疇鍩栫敮锟犵嵁閹捐绠虫俊銈忔嫹鐎殿喕鍗抽幃妤冩喆閸曨剛顦ラ梺缁樼墪閵堢鐣峰ú顏勭労闁告劦浜為惁鍫ユ⒑閸涘﹥澶勯柛瀣嚇瀹曟劙鎯�閿燂拷
//		if (npckey != 0) {
//			if (!fire.pb.map.SceneNpcManager.checkDistance(npckey, role.getRoleid()))
//				return;
//		}
//		int npcid = 0;
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕婵犲倹鍋ラ柡灞诲姂瀵挳鎮欑拠褎瀚圭憸鐗堝笒绾惧潡鏌熺�电校闁哥姵鍔欓弻锝呂旈敓浠嬫偋閸℃瑧绠旈柟鐑橆殕閻撴盯鏌涢弴妤佹珔闁告棑绠撻弻锛勪沪閸撗勫垱閻庢鍠楅幐铏繆閹间礁唯鐟滃矂宕Δ鍛拻濞达綀顫夐崑鐘绘煕閺傝法鐒哥�规洘鍔欏畷褰掝敋閸涱喚绋佹繝鐢靛仜濡﹥绂嶉崼鏇炴瀬闁糕剝绋掗悡銉╂煟閺冨倸鍔嬫繛鍛礈缁辨帡顢欓懞銉闂佽鍠氶弲顐ゅ垝濞嗘垶宕夋い顓熷笧楠炪垽姊婚崒娆戠獢婵炰匠鍥ㄥ亱闁糕剝铔嬮崶銊ヮ嚤閻庢稒锚娴滄鈹戦悙鏉戠仧闁搞劍妞介幃锟犲即閵忥紕鍘繝銏ｆ硾閻楀棙淇婃總鍛婄厽闁圭偓娼欐慨澶岀磼鏉堛劌娴柟铏矒閹粙鎮欓惂鍛婂闁圭儤姊荤壕濂稿级閸稑濡介悘蹇ｅ幗閵囧嫰骞橀悙钘変划閻庤娲栧畷顒勫煝鎼淬倗鐤�濠电姴鍊归崐鏇㈡⒒閸屾艾锟介绮堟笟锟介幃鍧楀炊椤掑﹦绋忔繝銏ｅ煐閸旀洟宕归崒鐐村仯閺夌偞濯介鐔兼煕閵堝棭娈滈柡灞剧洴瀵挳濡搁妷銈囨晼闂備礁鎼Λ妤�螞濡ゅ懎鐓橀柟杈鹃檮閸嬫劙鏌熺紒妯虹瑲婵炲牆顭峰娲濞戞艾鈪卞┑鈽嗗亝椤ㄥ﹤顫忔繝姘＜婵﹩鍓ㄩ幏鐑藉箹娴ｅ摜锛欓梺褰掓？缁�浣哄閸︻叏鎷烽悷鏉款仾闁革絿顥愰妵鎰板箳閹寸姴锟界偤鎮峰鍐鐎殿喗濞婇弫鍐磼濞戞艾骞堟俊鐐�ら崢浠嬪垂閸偆顩叉繝闈涱儐閻撴洘绻涢崱妤冪缂佺姴顭烽弻鈥崇暆鐎ｎ剛袦婵犳鍣幏鐑芥⒑闂堟稓绠氶柡鍛箞瀹曟繈宕妷褏锛濇繛鎾磋壘閿曘儳锟芥俺顫夌换婵嬪閿濆懐鍘梺鍛婃⒐閻楃娀骞冮敓鐘参ㄩ柍鍝勫�婚崢鎼佹⒑閹肩偛鍔楅柡鍛♁缁傛帒顭ㄩ崼鐔哄弳闂佺粯妫侀褑顣块梻浣筋嚃閸犳牠宕愰幖浣瑰仼闁绘垼妫勭粻铏繆閵堝繑瀚归柟顖滃枛濮婃椽骞愭惔銏㈠弳婵犫拃鍌滅煓妞ゃ垺鐟╁鎾閳ョ鎷烽悽鍛婄厽闁绘柨鎲＄欢鍙夈亜閵夈儳绠婚柡灞剧洴閹晠鎼归銈庢Ф闂備礁鍚嬪鑺ョ閸洖绠犻柨鐔哄Т鍥撮梺鎼炲劗閺咁亞妲愰弻銉︹拻濞达綀娅ｇ敮娑㈡煟閻旈棿鎲炬鐐茬箻閹粓鎳為妷褍骞堥梻渚�娼ч…鍫ュ磿閹惰棄鏄ラ柨婵嗘祫閹峰嘲鈻撻崹顔界亪濡炪値鍙冮弨杈ㄧ┍婵犲洤绠瑰ù锝呮憸閸樻悂姊虹粙鎸庢拱闁活収鍠氶懞杈ㄧ鐎ｎ偀鎷绘繛杈剧导鐠�锕傛倿妤ｅ啯鐓涢柛顐亜婢ф壆绱掗鐣屾噰妤犵偛顑夐弫鍌滅磼濡粯鐝曢梻鍌欐祰濞夋洟宕抽敃鍌氱闁跨噦鎷�
//		if (buytype == ShopBuyType.NORMAL_SHOP) {
//			npcid = fire.pb.map.SceneNpcManager.getNpcIDByKey(npckey);
//			if (npcid < 0) {
//				xdb.Trace.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂傚洤顦甸弻銊モ攽閸℃瑥顤�濡炪倕绻掓慨椋庢閹烘鏅搁柤鎭掑劤缁★拷闂佺鏈〃鍡涘棘閿熶粙姊绘担铏瑰笡閽冭京鎲搁弶鍨殲缂佸倸绉归幃娆撴倻濡厧骞楅梻浣告贡閸庛倕顫忛悷鎵虫瀺闁哄洢鍨洪悡娆撴煕濞嗗浚妲归柛濠冨姈椤ㄣ儵鎮欏顔煎壎闂佽桨绀侀崯鎾极閹剧粯鍤嶉柕澶樺枟閺侇垶姊婚崒姘拷宄懊归崶顒婄稏濠㈣泛顑囬悵鍫曟煕閳╁叐鎴濃枍閻樺厖绻嗛柕鍫濇噺閸ｅ湱鐥幆褏绉洪柡宀嬬秮楠炲鏁愰崨鍛崌閺岋綁骞樼捄鐑樼亪闂佸搫鏈ú婵堢不濞戞熬鎷烽敐搴濈敖濞寸娀绠栧娲传閸曨剦妫忛梺鍝勬噽婵烇拷鐎殿喖顭烽弫鎰緞鐎ｎ偅鐝抽梻浣稿閸嬪懐鎹㈤崟顖氬偍妞ゆ劑鍊楃壕钘壝归敐鍫燁仩閻㈩垱绋撶槐鎺旀嫚閼碱剙顤�闂侀�涚┒閸旀垿寮幘瀵割浄閻庯綆鍋嗛崣鍡椻攽閻樼粯娑ф俊顐ｇ懇瀹曡櫕绂掔�ｎ偆鍘卞┑顔筋殔濡绂嶉悧鍫熷弿濠电姴鍟妵婵堬拷瑙勬磸閸斿秶鎹㈠┑瀣闁挎繂妫楅绋库攽閻樺灚鏆╅柛瀣☉椤曪綁宕滄担绋跨亰闁瑰吋鐣崝宀�绮堥崱娑欑厵闁绘垶锕╁▓鏃堟⒑閸楃偞鍠橀柡灞炬礃瀵板嫰宕煎┑鍡楊潛闂備礁鍚嬪姗�鎮樺┑瀣厴闁硅揪闄勯崐鐑芥煛婢跺鐏╁ù鐘虫倐濮婃椽鎳￠妶鍛畬闂佹悶鍎滈崘銊ゆ喚闂傚倷鐒﹂惇褰掑垂瑜版帒绠熼柨鐔哄Т绾惧綊鏌ｉ姀鐘冲暈闁绘挾鍠栭弻锝夊棘閹稿骸鏆堢紓浣芥硾瀵爼濡甸崟顔剧杸闁挎繂瀚惄搴☆渻閵堝骸骞栨繛纭风節楠炲啴鎮滈懞銉ヤ罕闂佸壊鍋掗崑鍛存晬閸℃稒鈷掑ù锝囩摂閸ゅ啴鏌涢悩鍐插摵鐎规洘鍨块幃娆撳传閸曞汞鍥ㄧ叆婵犻潧妫Σ鍝ョ磼閿熶粙宕橀鐣屽帗闂佸憡绻傜�氼剟寮冲▎鎰垫闁绘劘灏欐晶锔芥叏婵犲嫮甯涚紒妤冨枛閺佹捇鎸婃径妯煎姺閻熸粍妫冮獮鍐樄鐎规洖宕埥澶娢熼懖鈺傜�梺璇叉捣濞呫垽骞忛悜鑺ョ厱闁哄洢鍔屾晶顖涚箾閸涱偄鐏叉慨濠冩そ閹崇偤濡烽崘鍙ラ偗閽樻繈鏌﹀Ο渚＆闁惧繐婀辩槐锕傛煥閻曞倹瀚� id=" + npckey);
//				return;
//			}
//		}
		
		fire.pb.shop.SGoods goods = fire.pb.shop.Module.sGoodsMap.get(goodsid);
		if (null == goods) {
			mkdb.Trace.info("婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁诡垎鍐ｆ寖缂備緡鍣崹鎶藉箲閵忕姭妲堥柕蹇曞Х椤撴椽姊虹紒妯哄闁诲繑宀稿畷瀹狀槾缂佽鲸鎸婚幏鍛矙濞嗙偓娈洪梻浣侯焾椤戝啴宕愬┑鍡╁殨閻犲洦绁村Σ鍫ユ煏韫囨洖顫嶉柕濠忚礋娴滄粓鏌￠崘銊ワ拷鍝ユ暜閼哥偣浜滄い鎰枑濞呭洨绱掓潏銊﹀鞍缂佹鍠愮换婵嬪礃椤垳绱﹂梻鍌氬�风粈浣圭珶婵犲洤纾婚柛鈩冪☉缁愭鏌熼幑鎰【濠殿噮鍓熼弻銊╂偄閸撲胶鐓撳┑顔硷工椤嘲鐣烽幒鎴僵闁告鍎愰弶鍝ョ磽閸屾瑧顦︽い鎴濇閺侇噣鏁撻悩鍙夌�悗骞垮劚椤︻垳鐚惧澶嬬厱妞ゆ劑鍊曢弸鏃堟煕濮楋拷缁犳牕顫忓ú顏勪紶闁告洖鐏氭瓏婵犵數鍋涢ˇ鏉棵哄Ο鑲╃焿闁圭儤顨呴～鍛存煏閸繃锛嶆慨濠冨缁绘繈濮�閿濆懐鍘梺鍛婃⒐閻楃娀骞冮敓鐘参ㄩ柨鏂垮⒔閻﹀牓姊婚崒姘卞缂佸甯¤棢闁绘劗鍎ら悡娆撴煕韫囨洖甯跺┑顔肩Ч閺岋紕浠﹂崜褎鍒涢悗娈垮櫘閸撴瑩鍩㈡惔銊ョ畾鐟滃秵绔熸惔銊︹拻濞达絿鐡旈崵鍐煕閻樻剚娈滈柕鍡楀暣瀹曘劍娼忛崜褏鈼ゆ繝鐢靛█濞佳囶敄閹版澘鏋侀柛銉墯閻撶喖鏌熼柇锕�澧紒鐙欏洦鐓欓柧蹇ｅ亞閹冲洦鎱ㄦ繝鍕笡闁瑰嘲鎳樺畷銊︾節閸愩劌澹嶉梻鍌欑閹碱偊鎮у鍫濈婵炲棙鍨靛鍙夌節绾版ɑ顫婇柛顭戝灣閹峰啴鏁冮崒姘優濠德板�曢幊蹇涙偂閺囥垺鐓涢柛銉ｅ劚婵″ジ鏌ｈ箛鏇炩枅婵﹥妞藉畷锟犳倷閺夋埈妲辩紓鍌欒兌缁垳鎹㈤崼婢盯宕橀妸銏☆潔濠电偛妫欒摫妞ゃ儻绲炬穱濠囨倷椤忓嫸鎷烽妶澶婄；闁告侗鍨伴弸鍫拷骞垮劚濞诧箑鐣烽崣澶岀瘈闂傚牊渚楅崕鎰版煕鐎ｃ劌濮傛慨濠傤煼瀹曞ジ鎮㈢悰鈩冿級缂傚倷绶￠崰鏍偉閻撳寒娼栨繛宸簼閸嬶繝鏌℃径瀣嚋婵絾鍔欏缁樻媴缁嬭法鐩庣紓鍌氱С缁舵岸鎮伴锟藉畷鍗炍旈崘鈺傜暦闂備礁鎲″ú锕傚磻閸℃稒鏅繝濠傜墛閳锋垹绱撴担濮戭亝鎱ㄥ畝鍕�堕煫鍥风导闁垱顨ラ悙鎼疁鐎殿喗鎸抽幃娆撳煛閸屾稒婢戦梻鍌欒兌缁垶宕濋弽褜鐒芥繛鍡樻尰閸婂爼鏌ㄩ弴鐐诧拷褰掑吹閺囥垺鐓忛柛顐ｇ箥濡插綊鏌ｉ幘瀵告创闁哄被鍔戦幃銏㈡嫚濞堝鎸剧槐鎺楀磼濞戞顑傞梺璺ㄥ枑閺嬭崵绱為崱娑樼；闁糕剝绋戦崒銊╂煕濡ゅ啫浜归柡锟芥禒瀣厽闁归偊鍘界紞鎴︽煟韫囧鍔ら柨鐔凤拷鐕佹綈婵炶绠撳畷婊堟偄閻撳海鐣哄┑顔筋殣閹风兘鏌＄仦鑺ヮ棞妞ゆ挸銈稿畷鍗炩枎韫囨挾鐤勯梻鍌氬�烽懗鍓佸垝椤栨娲冀椤撶偟锛欓梺闈╁瘜閸欏繘骞忓畡閭︽僵闁绘劦鍓欓锟�" +  goodsid  + "]");
			return;
		}
		
		// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╄兌閿熻棄绠嶉崕閬嵥囬婊呯焼閻庯綆鍋佹禍婊堟煙閸濆嫮肖闁告柨绉甸妵鍕棘閹稿骸鏋犲┑顔硷功缁垶骞忛崨顖涘枂闁告洦鍋傞崫妤呮⒒娴ｄ警鐒鹃悗娑掓櫅椤啴鎸婃径灞炬濠电姴锕ら崯鐘诲几鎼淬劍鐓欓悗娑欘焽缁犮儲淇婇锝囩煉闁诡喖鍢查…銊╁川椤撗勬瘔闂佹眹鍩勯崹閬嶃�冩繝鍥х畺闁炽儲鏋煎Σ鍫熸叏濡厧浜鹃悗姘愁潐椤ㄣ儵鎮欓懠顑胯檸闂佸憡姊归懝鎹愮亙闂佺粯顭堝▍鏇㈠磹閹扮増鐓熸繛鎴濆船濞呭秶锟芥鍠曠划娆撱�佸锟介幃銏ゅ传閸曨偆鐫勯梻鍌氬�风粈渚�骞夐敓鐘茬闁挎梻鏅々鍙夌節婵犲倻澧曢柛鎴犲У缁绘盯骞嬪▎蹇曚痪闂佺粯鎸婚惄顖炲箖濮楋拷閹瑩骞撻幒鍡樺瘱婵犵數鍋涘璺侯焽濞嗘挸鐓橀柟杈鹃檮閺咁剟鏌涢弴銊ヤ簻妤犵偛顑嗙换婵嗏枔閸喗鐝梺褰掝棑閸忔ê顫忓ú顏勬闁靛闄勯悵鏃堟⒑閸濄儱鏋戝┑顖欑矙婵＄敻骞囬弶鍨�垮┑鐐村灦閻熴垽骞忓ú顏呯厽闁绘ê寮舵径鍕喐閺夊灝鏆ｆい銏☆殜婵拷闁靛繈鍨洪敍蹇涙⒑閸濆嫷妲兼繛澶嬫礉閸婃挳姊绘担鍛婃喐濠殿喗鎸抽弫鍐Χ婢舵ɑ鏅ｉ梺绋跨箳閸樠呮閻愭祴鏀介柣鎴濇缁舵稓绱掗悩铏磳鐎殿喛顕ч埥澶愬閻樻彃绁梻渚�娼ч…鍫ュ磿閺屻儲鍋熸い鏂跨毞閺�浠嬫煃閵夈儱鏆辩紒鐙欏洦鐓曢幖娣灩閳绘洟鏌嶉妷锔筋棃鐎规洘锕㈤、娆撳床婢诡垰娲﹂悡鏇㈡煙閹佃櫕娅呭┑锛勫帶閳规垿顢欓懞銉ь槬濡炪値浜滈崯瀛樹繆閹壆鐤�闁哄洨鍠庢禒褰掓⒒娴ｄ警鐒剧紒缁樺灴閺佸顪冮妶搴′簻缂佺粯鍨归幑銏犫攽閸♀晜鍍靛銈嗗笒閸嬪﹦妲愰崣澶岀瘈闁汇垽娼ф禒婊勪繆椤愶絿鎳囩�规洘妞藉畷鐓庮熆椤忓海绉い銏″哺閺佹捇鎸婃径妯荤稁濠电偛妯婃禍婊堝箲閼哥偣浜滈柟鎯ь嚟閳句線鎮楀顓犳创婵﹨娅ｇ划娆忊枎閹冨婵犵妲呴崑鍛崲閸繍鍤曟い鎰剁畱缁犺崵绱撴担濮戭亜鈻撻悢鍏尖拺闂傚牊渚楀褍鈹戦垾铏悙闁崇粯鎹囨俊鑸靛緞鐎Ｑ勫缂傚倷绀侀鍫濃枖閺囩姷涓嶉柡灞诲劜閻撱儲鎱ㄥΟ鍨厫闁绘挾鍠栭弻銊モ攽閸♀晜鈻撳┑鈽嗗亝閸ㄥ潡寮婚悢鐓庣煑濠㈣泛顑呴崬澶愭倵鐟欏嫭绀堥柛鐘崇墵閵嗕線寮撮姀鈺傛櫇闂侀潧绻嗗Σ鍛村疮瀹�鍕拻闁稿本鑹鹃敓浠嬵棑缁牊绗熼敓浠嬬嵁閺嶎収鏁冩担宥夊炊閵娿儺鍤ら梺鍝勵槹閸ㄧ敻鎮楅銏″仭婵犲﹤鎳庨。濂告偨椤栨侗娈滅�规洘鍨块崺锟犲川椤旀儳骞楅梻渚�锟芥稑宓嗘繛浣冲嫭娅犻柟娈垮枤绾惧ジ鏌ｅΟ鍨惞闁伙絾妞介弻鈥崇暆閿熶粙宕伴弽顓犲祦闁糕剝鍑瑰銊╂⒑閹肩偛锟芥宕伴弽顓炶摕婵炴垯鍨洪崑鍕煕濠靛嫬鍔氱�殿喓鍔戝娲传閸曨厾浼囬梺鍝ュУ閻楃娀鐛崘顭戠叆闁告侗鍨堕埞蹇涙煟鎼搭垳绉甸柛瀣笒铻為柡宥庡幗閳锋帒霉閿濆牆袚缁绢厼鐖奸弻娑㈡偐閾忣偆顦ㄩ梺閫涚┒閸旀垶淇婇懜闈涚窞婵☆垳绮▍鎾绘⒒娴ｅ憡鎯堢紒瀣╃窔瀹曘垽鎳栭埡鍐箵濠德板�曢幊蹇涙偂濞戞熬鎷烽獮鍨姎濡ょ姵鎮傞悰顔嘉旈崨顔惧幈婵犵數濮撮幊搴ㄦ偂閹扮増鐓欏〒姘仢婵″吋銇勯锝囩煉鐎规洖宕灃闁跨喍绮欓崺娑㈠箳濡や讲鎷洪梺纭呭亹閸嬫盯鏁撻懞銉у⒌闁靛棗鍟换婵嬪炊瑜戦幗鏇炩攽閻愭潙鐏熼柛銊ョ秺瀹曪繝骞庨懞銉у帾婵犵數鍋涢悘婵嬪礉濮橆厹浜滄い鎰靛亗闁垱鎱ㄦ繝鍛仩缂侇喗鐟╅獮鎰償閵忕娀妫烽梻鍌欑閹芥粍鎱ㄩ悽绋跨婵炲棙鍔掔换鍡涙煟閵忋埄鐒剧紒锟界�ｎ偁浜滈柡宥冨妿椤ｅ弶銇勯妷锔剧疄婵﹥妞藉畷婊堟嚑椤掞拷鐢儵姊洪崫銉バｆい銊ワ工閻ｇ兘骞囬柇锔芥櫖闂佺粯鍔楃悰銉╁箯閻戞绠鹃柡澶嬪灥閹垿鏌ｉ悢婵嗘嫅閹烽攱鎷呴崘銊ゆ睏缂備浇椴哥敮锟犮�佸▎鎾村仼閻忕偞鍎冲▍鎴炰繆閻愵亜锟姐倝宕戦崟顓熷床闁圭儤姊归～鏇㈡煙閻戞ê娈鹃柣鏃傚劋鐎氭氨锟界懓澹婇崳顖炲箯閻戣棄绠荤紓浣骨氶幏娲⒑鐠団�崇�婚柛娑卞灱閸炴椽姊绘担渚敯婵炲懏娲熼獮鎰板礈瑜嶉崹婵囥亜閹惧崬鐏柡鍛倐閺岋絽螣缂佹浼囬梺褰掓敱濡炶棄顫忔繝姘＜婵ê宕·锟界紓鍌欑椤戝棛鏁Δ锟介銉╁礋椤栨氨顦板銈嗙墬缁嬫捇宕㈡禒瀣拺闁告劕寮堕幆鍫ユ煥閺囨ê锟芥繈骞冨锟介幃鈺呮倷閹存帞鐩庨梻浣告惈濞村倹绂嶉悙鐢电煋妞ゆ梻鐡斿▓浠嬫煟閹邦剛鎽犵�规洖鏈〃銉╂倷閺夋垶璇為悗瑙勬礀瀹曨剟锝炲鍫濆耿婵☆垵鍋愰瀷闂傚倸鍊搁崐鎼佸磹妞嬪孩顐芥慨姗嗗墻閻掔晫鎲歌箛娑樼闁靛繈鍊曠粻鎶芥煙閻愵剚缍戠�殿喖娼″铏圭磼濡櫣浠奸梺鐑╁墲濡啫顕ｉ锝囩瘈闁搞儯鍔庨崢鐢告⒑鐟欏嫷鍟忛柛鐘崇墵閵嗗倹绺介崨濠勫帗闂備礁鐏濋鍛存倶閹绢喗鐓欐い鏃囧亹缁夌儤顨ラ悙鎵獢妤犵偞甯￠獮瀣攽閹邦噯鎷烽搹顐ょ瘈闁汇垽娼ф禒婊堟煙閸愯尙绠荤�规洘绻傞埢搴ㄥ箻鐎圭姵鎲伴梻浣虹帛濮婂宕㈣缁牓宕熼娑氬帾闂佸壊鍋呯换鍐夊鍕╀簻闊洢鍎茬�氾拷
		if (buytype == ShopBuyType.NORMAL_SHOP) {
			fire.pb.shop.SNpcSale ns = fire.pb.npc.NpcManager.getInstance().getNpcSale(shopid);
			if (ns == null || !ns.getGoodsids().contains(goodsid)) {
				mkdb.Trace.info("NPC婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌熺紒銏犳灍闁稿骸顦…鍧楁嚋闂堟稑顫岀紓浣哄珡閸ャ劎鍘遍梺鍝勭Р閸婃洘鏅堕弻銉﹀�垫慨妯诲墯濞兼劕菐閸パ嶈含濠碘�崇埣瀹曠喖顢橀悙宸�撮梻鍌欑閹诧繝鎮烽妷褎宕叉慨妤嬫嫹鐎殿喖顭烽弫鎰緞婵犲嫷鍚呴梻浣瑰缁诲倸螞椤撶倣娑㈠礋椤撶姷锛滈梺缁樺姦閸撴瑩宕濋妶鍡愪簻妞ゆ挾濮撮崢瀵革拷娈垮枛椤兘寮幇顓炵窞濠电姴瀚弶鍛婁繆閻愵亜锟芥牠鎮ч鐘茬筏闁芥ê顦弸鏃�绻濋棃娑卞剱闁抽攱鍨块弻娑滅疀閹捐櫕鍊紓浣芥硾瀵墎鎹㈠☉姘厹濡炲娴烽惁鍫ユ倵濞堝灝鏋︽い鏇嗗洤鐓″鑸靛姇椤懘鏌嶉埡浣告殲闁绘繃娲熷娲嚒閵堝憛銏＄箾鐠囇呯暢闁靛洦鍔欏畷姗�顢旈崱鏇犵憹闂備胶鍘ч～鏇㈠磹濡ゅ啫顥氶柦妯侯棦瑜版帗鏅查柛娑卞枟閸庢捇鏌″蹇曠瘈婵﹥妞藉畷顐﹀礋椤曞懏钑夐梻浣告啞濮婂綊宕归崸妤�鍨傚Δ锝呭暞閺呮繈鏌涚仦鎯у摵闁轰焦绮岄埞鎴炲箠闁稿﹥鎸剧划鍫熸媴缁洘鐏佸┑鐘绘涧椤戝棝鍩涢幒妤佺厱閻忕偟鍋撻惃鎴濐熆瑜庣粙鎾舵閹烘棑鎷烽敐搴′簻闁诲繑鎸抽弻銊モ攽閸繀绮堕梺浼欑稻缁诲牓寮幘缁樺仼閻忕偟铏庡鐔兼⒑鐟欏嫬鍔ゆい鏇ㄥ弮閹兘鎮烽幍铏杸闂佺粯蓱瑜板啴寮冲▎鎰╀簻闊洦鎸鹃崺锝嗘叏婵犲嫮甯涢柟宄版嚇瀹曘劍绻濋崒娑欑暭濠电姷鏁搁崑鐘活敋濠婂懐涓嶉柟鎯х－閺嗭妇鎲搁悧鍫濈瑲闁绘帟鍋愰敓钘夌畭閸庡崬螞濡や胶顩叉俊銈呮噺閳锋垿鏌涘┑鍡楊仾鐎瑰憡绻堥弻娑㈡偐閾忣偄鏆楅悗娈垮暙閸ャ劍娅㈡繛瀵稿Т椤戝棝鍩涢幒妤佺厱閻忕偟鍋撻惃鎴濐熆瑜庣粙鎾舵閹烘棑鎷烽敐搴′簻婵炴惌鍣ｉ幐濠囨偄閸濄儳鐦堟繝鐢靛Т閸婃悂顢旈妷銉冪懓顭ㄩ崟顓犵厜闂佺粯鎼╅崑濠傜暦閼告妲归幖绮规閸ゃ倝姊婚崒娆戣窗闁告瑥閰ｅ畷褰掑醇閺囩偠鎽曢梺鐐藉劚绾绢參寮抽崱娑欏�甸柨婵嗛婢т即鏌ｉ敃锟介悧鎾诲箖濡ゅ啯鍠嗛柛鏇ㄥ墰椤︺儵鎮楃憴鍕闁告挻绻堥幃姗�骞掑Δ浣叉嫼缂備礁顑堝▔鏇犵不閹惰姤鐓曟俊顖滃Т濞层倝宕归崒鐐粹拺妞ゆ帪鎷风紒澶屾暬閸╂盯骞掗幊銊ョ秺閺佹劙宕堕埡鍌涘晵闂備焦鎮堕崐鏇㈠疮閹绢喖钃熸繛鎴欏灪閸嬫劗锟借娲栧ú銈夊煕閸垻纾藉ù锝嗗灊閸氼偊鏌涚�ｎ剙浠ч柟骞垮灩閳规垹锟斤綆浜為敍婊冣攽閻樿宸ラ悗姘煎弮椤㈡瑩寮撮姀鈾�鎷绘繛杈剧悼椤牓藟韫囨稒鐓曢悗锝庝簼閸ｅ綊鎮￠妶澶嬬厸鐎规搩鍠栫�氼厼鈻撴导瀛樷拻闁稿本鑹鹃敓浠嬵棑濞嗐垹顫濋澶屽姺閻熸粍妫佸Λ鐔奉渻閵堝棙灏柛銊ユ贡婢规洟宕稿Δ锟界痪褔鏌涢顐簻濞存粈绮欓弻锟犲幢閳轰胶浠紓浣虹帛缁诲牓骞冩禒瀣棃婵炵缈伴崕鐢稿蓟閳╁啯濯撮柛娑橈工閺嗗牓姊洪柅娑氣敀闁告梹鍨块妴浣割潨閿熻姤鎱ㄩ敓浠嬫煟濡椿鍟忛柛鐐垫暬濮婄粯鎷呴崨濠傛殘闂佸憡妫戠粻鎾崇暦娴兼潙鍐�妞ゆ劑鍊楅悞濂告⒑閸涘﹤濮﹂柛鐘愁殜閹繝宕橀鑲╅獓闂佺粯鍔欏褔銆傞崗绗轰簻闁挎洖鍊归弫杈╃磼缂佹娲撮柡浣瑰姈閹棃鍩勯崘顏勭秵闂傚倷绀侀幖顐︽儗婢跺苯绶ゅΔ锝呭暙缁犳岸鏌￠崘銊у閸ユ挳鏌熼崗鑲╂殬闁搞劏宕电划鏃堟煥鐎ｎ剛鐦堥梺姹囧灲濞佳勭閿斿墽纾煎ù锝堫潐鐏忥妇锟芥鍠楅悡锟犲箖閳哄懏鍤掗柕鍫濇噽閵堬箓姊绘繝搴′簻婵炶濡囩划娆撳箳濡わ拷閻ら箖鏌熼梻瀵稿妽闁绘挶鍎甸弻锝夊即閻愯鎷烽崷顓ㄦ嫹濮樼偓瀚�?.shopid:" + shopid + "goodsid:" + goodsid);
				return;
			}
		}
		
		fire.pb.shop.utils.ShopParameters params = new fire.pb.shop.utils.ShopParameters();
		params.role = new fire.pb.PropRole(role.getRoleid(), true);
		params.goods = goods;
		params.num = num;
		params.shopId = shopid;
		
		new fire.pb.shop.srv.BuyShopFactory(params, buytype).submit();
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 810633;

	public int getType() {
		return 810633;
	}

	public int shopid; // 商店序号
	public int goodsid; // 商品id
	public int num; // 购买数量
	public int buytype; // 购买类型

	public CBuyNpcShop() {
	}

	public CBuyNpcShop(int _shopid_, int _goodsid_, int _num_, int _buytype_) {
		this.shopid = _shopid_;
		this.goodsid = _goodsid_;
		this.num = _num_;
		this.buytype = _buytype_;
	}

	public final boolean _validator_() {
		if (shopid < 1) return false;
		if (goodsid < 0) return false;
		if (num < 1) return false;
		if (buytype < 0 || buytype > 11) return false;
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(shopid);
		_os_.marshal(goodsid);
		_os_.marshal(num);
		_os_.marshal(buytype);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		shopid = _os_.unmarshal_int();
		goodsid = _os_.unmarshal_int();
		num = _os_.unmarshal_int();
		buytype = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CBuyNpcShop) {
			CBuyNpcShop _o_ = (CBuyNpcShop)_o1_;
			if (shopid != _o_.shopid) return false;
			if (goodsid != _o_.goodsid) return false;
			if (num != _o_.num) return false;
			if (buytype != _o_.buytype) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += shopid;
		_h_ += goodsid;
		_h_ += num;
		_h_ += buytype;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(shopid).append(",");
		_sb_.append(goodsid).append(",");
		_sb_.append(num).append(",");
		_sb_.append(buytype).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CBuyNpcShop _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = shopid - _o_.shopid;
		if (0 != _c_) return _c_;
		_c_ = goodsid - _o_.goodsid;
		if (0 != _c_) return _c_;
		_c_ = num - _o_.num;
		if (0 != _c_) return _c_;
		_c_ = buytype - _o_.buytype;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

