
package fire.pb;

import java.util.Map;

import org.apache.log4j.Logger;

import xbean.PetInfo;
import fire.pb.item.BagTypes;
import fire.pb.item.ItemMaps;
import fire.pb.item.Module;
import fire.pb.main.ConfigManager;
import fire.pb.pet.PetAttr;
import fire.pb.pet.PetColumn;
import fire.pb.pet.PetColumnTypes;
import fire.pb.pet.PetTypeEnum;
import fire.pb.pet.SRefreshPetInfo;
import fire.pb.role.SRoleRColorConfig;
import mkdb.Procedure;




// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CReqUsePetColor__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CReqUsePetColor extends __CReqUsePetColor__ {
	public static final Logger logger = Logger.getLogger("SYSTEM");
	@Override
	protected void process() {
		// protocol handle
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if(roleid < 0) {
			return;
		}
		
		new mkdb.Procedure() {
			@Override
			protected boolean process() throws Exception {
				xbean.Properties prop=xtable.Properties.get(roleid);
				if(prop==null){
					return false;
				}
				Map<Integer, SRoleRColorConfig> sRoleRColorConfig = ConfigManager.getInstance().getConf(SRoleRColorConfig.class);
				if(sRoleRColorConfig==null){
					logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐︽晸閼恒儴澹樻い锔垮嵆婵＄敻宕熼姘鳖唺闂佺懓鐡ㄧ换宥嗙閼测晝纾藉ù锝呮惈鏍￠悷婊勬緲閸熸潙锕㈡笟锟藉娲箰鎼达絿鐣甸梺鐟板暱缁绘帡骞忚ぐ鎺撴櫢闁绘ê纾崢钘夆攽閻樼粯娑ф俊顐ｇ洴瀹曟椽鏁愭径瀣幐闁诲繒鍋犻褎鎱ㄩ崒鐐寸厵妞ゆ柨鎼敓鑺ョ箓閻ｇ兘骞掗幋鏃�顫嶅┑顔筋殔濡梻妲愰敓锟�"+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊勭矊闇夐柡宥庡幗閻撳繐鈹戦悙闈涗壕婵炲懎妫濋弻娑㈠Χ閸涱収浼冮梺鍝勮閸婃鍒掑▎鎴炲磯闁靛鍊楁す铏節閻㈤潧浠滈柟铏姈閹便劑宕归銈傛敵婵犵數濮村ú銈呮纯闂傚鍋勫ú锕傚蓟閵娾晩鏁傞柛顐ｆ礃閳锋帒霉閿濆妫戝☉鎾瑰皺缁辨帡鐓鐘电厯闂佽鍠楅敋妞ゎ偅绻冨蹇涘煛閸愵亝娈介梻鍌欒兌缁垶寮婚妸鈺佽Е閻庯綆鍠栭悿鍓х磼鐎ｎ偓绱╃憸鐗堝笚閸嬫劗锟界懓澹婇崰鏍礈娴煎瓨鈷戦柦妯侯槸閺嗙喖鏌涢悩宕囧⒌鐎殿喖顭峰鎾偄閾忚鍟庨梻浣稿閻撳牓宕伴弽銊﹀弿濠㈣埖鍔栭埛鎴︽煕濠靛棗顏撮柛搴＄箻濮婅櫣鏁鍓滈悗娈垮枛椤兘骞冮姀銈呯闁绘挸鍑介幏椋庣磼濡湱绠氬銈嗙墬缁诲倹绂嶈ぐ鎺撶厽闁挎繂顦板☉褔鏌嶇憴鍕伌闁诡喗鐟╅幊鐘活敆閿熶粙鍩涙繝鍥ㄢ拺闁荤喐婢樺▓鈺呮煙閸戙倖瀚�");
					return false;
				}
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎喘濮婄粯鎷呯憴鍕哗闂佺瀛╁钘夌暦濠婂啠鏋庨柟瀛樼箥濡粓鎮峰鍛暭閻㈩垱顨婇幃鈥斥槈濮樼偓瀚规鐐茬仢閸旀艾螖閻樿櫕鍊愰柣娑卞櫍瀵粙顢橀悢鍝勫籍闂備礁鎲￠崝锔界濠婂牆鍑犳繛鎴欏灪閻撴盯鎮橀悙鎻掆挃婵炲弶娼欓埞鎴︽晬閸曨偄骞嬪銈冨灪閻熲晠骞冮埄鍐╁劅妞ゆ棁濮ょ粊浼存⒒閸屾艾锟界兘鎮為敃鍌氱畺闁割偅娲栫壕褰掓煛閸モ晛顎撻柟宄板槻椤繈顢曢姀鐘点偖婵°倗濮烽崑娑㈠疮椤愶讣缍栨繝濠傜墛閺呯霉閻樺樊鍎忕紒鐘崇墬缁绘盯宕卞Ο璇查瀺闂佹悶鍊曢鍡欐崲濞戙垹閱囬柣鏂款殠閸ゅ顪冮妶鍐ㄥ姎妞わ箓娼ч～蹇曠磼濡顎撴俊鐐差儏缁ㄨ偐鎲伴崱娆戠＝濞达絽鎼牎闂佹悶鍔屽锟犵嵁閸愵喖唯闁冲搫鍊告禍妤呮煙閸忓吋鍎楅柛鐘愁殘缁辩偞鎯旈埦锟介弨浠嬫煟閹邦剙绾ч柍缁樻礀闇夋繝濠傚閻瞼绱掗纰辩吋闁诡喕绮欏畷銊︾節閸曨偄绠ラ梻鍌欒兌缁垶宕归幆鐗堟噷闂備焦濞婇弨杈╂暜閹烘绠掗梻浣虹帛閹稿摜锟芥稈鏅犻獮鏍箛閻楀牏鍘撻柣鐔哥懃鐎氼剟鎮橀幘顔界厵妞ゆ梻鏅幊鍥煙瀹曞洤鈻堟い銏☆殜閺佹挻绂掔�ｅ嫮鍏橀弫鎾寸鐎ｎ偀鎷绘繛杈剧秬椤宕戦悩缁樼厱闁哄倽娉曢悘杈╃磼鏉堚晛浠︾紒缁樼箞瀹曟儼顦抽柣搴墴濮婃椽鎮烽弶搴撴寖缂備緡鍣崹鎶芥晸閻ｅ本鏆╁┑顔芥尦閳ワ妇鎹勯妸锕�纾繛鎾村嚬閸ㄤ即宕滈悽鐢电＜缂備降鍨瑰鍧楁煙閻戣姤鏁辩紒缁樼箞閹粙妫冨ù璁圭稻閵囧嫰寮敓浠嬫偋閻樿尙鏆﹂柟鎯板Г閺呮彃顭跨捄鐚村姛闁告繃顨婂缁樼瑹閸パ冾潻缂備礁顦伴幐鎶藉箖閹稿簺鍋呴柛鎰ㄦ櫇閸樺崬顪冮妶鍡楀Ё缂佹彃澧界划鍫ユ晸娴犲鈷掑ù锝嗘灮妤犲繘鏌涙繝鍐缂佸矁椴哥换婵嬪炊椤儸鍥╁彄闁搞儯鍔嶉悡銉︺亜韫囨挾鍩ｆ慨濠勭帛閹峰懘宕ㄦ繝鍌涙畼闂備浇宕甸崰鍡涘磿閻㈢鏋侀柛鎰靛枛鍞梺瀹犳〃缁插ジ鏁冮崒娑氬幈闂佸搫娲㈤崝宀勬倶閻樼粯鐓曢柟鎷屽煐鐎氬綊姊婚崒娆戠獢婵炰匠鍡楁闂佽绻掗崑鐔煎磻閹炬椿鏁婇柟鎵閳锋帡鏌涚仦鍓ф噯闁稿繐鏈妵鍕敇閻愰潧顤�濡炪們鍔婇崕鐢哥嵁閺嶃劍濯撮悷娆忓閻濇牗淇婇悙顏勶拷鏇犳崲閹扮増鍋嬮柛鈩冪懅娑撳秹鏌″鍐ㄥ缂佽妫濋弻鏇㈠醇濠靛牏顔夐柣搴㈣壘缂嶅﹤顫忛搹鐧告嫹閸︻厼校妞ゃ儱顦伴妵鍕晜鐠囪尙浠搁梺绯曟杺閸ㄥ綊顢橀崗鐓庣窞婵☆垳绮▍宥夋煟閻斿摜鐭婇柣顒�銈搁幊鐐存綇閵娧呯槇濠殿喗锕╅崢楣冨矗閸℃稒鈷戦柛婵嗗婢跺嫰鏌ㄥ鑸电厽闊洦姊婚崣锟介梺鍝勫閸撴繈骞忛崨顖涘枂闁告洦鍋嗛敍鎾绘⒒娴ｈ姤銆冮柣鎺炵畵楠炴垿宕堕锟介弸渚�鏌熼崜褏甯涢柡鍛倐閺屻劑鎮ら崒娑橆伓
				PetColumn petColumn = new PetColumn(roleid, PetColumnTypes.PET,false);
				fire.pb.pet.Pet pet = petColumn.getPet(petkey);
				if(pet==null){
					logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐︽晸閼恒儴澹樻い锔垮嵆婵＄敻宕熼姘鳖唺闂佺懓鐡ㄧ换宥嗙閼测晝纾藉ù锝呮惈鏍￠悷婊勬緲閸熸潙锕㈡笟锟藉娲箰鎼达絿鐣甸梺鐟板暱缁绘帡骞忚ぐ鎺撴櫢闁绘ê纾崢钘夆攽閻樼粯娑ч柨鏇樺劤濞戝灚銈ｉ崘鈺冨帗闁荤喐鐟ョ�氼剟鎮橀幘顔界厵妞ゆ棁顫夊▍濠勶拷瑙勬穿缁叉儳顕ラ崟顒傜瘈閹肩补鎳ｉ悢鍏尖拻闁稿本鐟ㄩ崗灞俱亜椤撶偟澧涙い銊ｅ劦瀹曨偊濡疯閻撳鎮峰鍛暭閻㈩垱甯￠幏鎴︽偄閸濄儳顔曢梺鐟扮摠閻熴儵鎮橀埡鍛厱婵°倓绀侀埢鏇㈡煛鐏炵偓绀冪紒缁樼洴瀹曞綊顢欓悡搴綒缂傚倸鍊烽梽宥夊礉鐎ｎ剙鍨濇繛鍡楁禋濞兼牗绻涘顔荤盎濞磋偐濞�閺屾盯寮撮姀鈩冮敪闂佸憡鎸烽崡鍐差潖濞差亜浼犻柕澶堝劜閻庨箖姊洪崷顓х劸闁哥喎娼￠、姘舵晲閸℃瑧鐦堝┑顔斤供閸樿棄鈻嶅鍫熲拺闁告稑锕﹂惌鍡涙煟閹虹偛顩柨鐔剁矙濞佳囨儔閼测晜顫曢柟鎹愵嚙绾惧吋绻涢崱妯虹仴濠碘�茬矙閺岋箓宕橀缁樺枤闂佸搫鐭夌徊浠嬪煘閹达箑鐐婄憸蹇涱敄閸屾粎纾藉ù锝勭矙閸濇椽鏌熺粙娆剧吋妤犵偛绻樺畷銊╊敍濞戞褰撮梻浣规灱閺呮盯宕导鏉戞辈闁靛缂氱换鍡涙煟閹板吀绨婚柨鐔虹崵閸涱垯绗夐梺瑙勫劤椤曨參銆呴弻銉︾厱妞ゆ劧绲剧粈锟介梺鍝勵儎缁舵岸寮婚悢鐓庣鐟滃繒鏁☉銏＄厱闁靛牆鎳愭晥闂佸搫鏈ú妯肩博閻旂⒈鏁嶉柕鍫濇椤忚埖绻濈喊姗堟嫹閹绘帒鐝熼梺鍛婃⒐閸ㄧ敻锝炶箛鎾佹椽顢旈崟顓у敹闂佺澹堥幓顏嗙礊閸℃稑姹查柨娑樺绾捐棄霉閿濆牊顏犻悽顖涚〒缁辨帞鎷犻懠顒�鈪甸悗娈垮櫘閸嬪﹪鐛Ο纭锋嫹闂堟稑顥忔繛鏉戝閺岋絾鎯旈婊呅ｉ梺绋款儏閹冲酣鍩㈠澶婎潊闁靛牆妫岄幏娲煟閻樺厖鑸柛鏂胯嫰閳诲秹骞囬悧鍫㈠幍闂佸憡鍨崐鏍拷姘炬嫹"+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊勭矊闇夐柡宥庡幗閻撳繐鈹戦悙闈涗壕婵炲懎妫濋弻娑㈠Χ閸涱収浼冮梺鍝勮閸婃鍒掑▎鎴炲磯闁靛鍊楁す铏節閻㈤潧浠滈柟铏姈閹便劑宕归銈傛敵婵犵數濮村ú銈呮纯闂傚鍋勫ú锕傚蓟閵娾晩鏁傞柛顐ｆ礃閳锋帒霉閿濆妫戝☉鎾瑰皺缁辨帡鐓鐘电厯闂佽鍠楅敋妞ゎ偅绻冨蹇涘煛閸愵亝娈介梻鍌欒兌缁垶寮婚妸鈺佽Е閻庯綆鍠栭悿鍓х磼鐎ｎ偓绱╃憸鐗堝笚閸嬫劗锟界懓澹婇崰鏍礈娴煎瓨鈷戦柦妯侯槸閺嗙喖鏌涢悩宕囧⒌鐎殿喖顭峰鎾偄閾忚鍟庨梻浣稿閻撳牓宕伴弽銊﹀弿濠㈣埖鍔栭埛鎴︽煕濠靛棗顏撮柛搴＄箻濮婅櫣鏁鍓滈悗娈垮枛椤兘骞冮姀銈呯闁绘挸鍑介幏椋庣磼濡湱绠氬銈嗙墬缁诲倹绂嶈ぐ鎺撶厽闁挎繂顦板☉褔鏌嶇憴鍕伌闁诡喗鐟╅幊鐘活敆閿熶粙鍩涙繝鍥ㄢ拺闁荤喐婢樺▓鈺呮煙閸戙倖瀚�");
					return false;
				}
				PetInfo petInfo = petColumn.getPetInfo(petkey);
				if (petInfo == null){
					logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐︽晸閼恒儴澹樻い锔垮嵆婵＄敻宕熼姘鳖唺闂佺懓鐡ㄧ换宥嗙閼测晝纾藉ù锝呮惈鏍￠悷婊勬緲閸熸潙锕㈡笟锟藉娲箰鎼达絿鐣甸梺鐟板暱缁绘帡骞忚ぐ鎺撴櫢闁绘ê纾崢钘夆攽閻樼粯娑ч柨鏇樺劤濞戝灚銈ｉ崘鈺冨帗闁荤喐鐟ョ�氼剟鎮橀幘顔界厵妞ゆ棁顫夊▍濠勶拷瑙勬穿缁叉儳顕ラ崟顒傜瘈閹肩补鎳ｉ悢鍏尖拻闁稿本鐟ㄩ崗灞俱亜椤撶偟澧涙い銊ｅ劦瀹曨偊濡疯閻撳鎮峰鍛暭閻㈩垱甯￠幏鎴︽偄閸濄儳顔曢梺鐟扮摠閻熴儵鎮橀埡鍛厱婵°倓绀侀埢鏇㈡煛鐏炵偓绀冪紒缁樼洴瀹曞綊顢欓悡搴綒缂傚倸鍊烽梽宥夊礉鐎ｎ剙鍨濇繛鍡楁禋濞兼牗绻涘顔荤盎濞磋偐濞�閺屾盯寮撮姀鈩冮敪闂佸憡鎸烽崡鍐差潖濞差亜浼犻柕澶堝劜閻庨箖姊洪崷顓х劸闁哥喎娼￠、姘舵晲閸℃瑧鐦堝┑顔斤供閸樿棄鈻嶅鍫熲拺闁告稑锕﹂惌鍡涙煟閹虹偛顩柨鐔剁矙濞佳囨儔閼测晜顫曢柟鎹愵嚙绾惧吋绻涢崱妯虹仴濠碘�茬矙閺岋箓宕橀缁樺枤闂佸搫鐭夌徊浠嬪煘閹达箑鐐婄憸蹇涱敄閸屾粎纾藉ù锝勭矙閸濇椽鏌熺粙娆剧吋妤犵偛绻樺畷銊╊敍濞戞褰撮梻浣规灱閺呮盯宕导鏉戞辈闁靛缂氱换鍡涙煟閹板吀绨婚柨鐔虹崵閸涱垯绗夐梺瑙勫劤椤曨參銆呴弻銉︾厱妞ゆ劧绲剧粈锟介梺鍝勵儎缁舵岸寮婚悢鐓庣鐟滃繒鏁☉銏＄厱闁靛牆鎳愭晥闂佸搫鏈ú妯肩博閻旂⒈鏁嶉柕鍫濇椤忚埖绻濈喊姗堟嫹閹绘帒鐝熼梺鍛婃⒐閸ㄧ敻锝炶箛鎾佹椽顢旈崟顓у敹闂佺澹堥幓顏嗙礊閸℃稑姹查柨娑樺绾捐棄霉閿濆牊顏犻悽顖涚〒缁辨帞鎷犻懠顒�鈪甸悗娈垮櫘閸嬪﹪鐛Ο纭锋嫹闂堟稑顥忔繛鏉戝閺岋絾鎯旈婊呅ｉ梺绋款儏閹冲酣鍩㈠澶婎潊闁靛牆妫岄幏娲煟閻樺厖鑸柛鏂胯嫰閳诲秹骞囬悧鍫㈠幍闂佸憡鍨崐鏍拷姘炬嫹"+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊勭矊闇夐柡宥庡幗閻撳繐鈹戦悙闈涗壕婵炲懎妫濋弻娑㈠Χ閸涱収浼冮梺鍝勮閸婃鍒掑▎鎴炲磯闁靛鍊楁す铏節閻㈤潧浠滈柟铏姈閹便劑宕归銈傛敵婵犵數濮村ú銈呮纯闂傚鍋勫ú锕傚蓟閵娾晩鏁傞柛顐ｆ礃閳锋帒霉閿濆妫戝☉鎾瑰皺缁辨帡鐓鐘电厯闂佽鍠楅敋妞ゎ偅绻冨蹇涘煛閸愵亝娈介梻鍌欒兌缁垶寮婚妸鈺佽Е閻庯綆鍠栭悿鍓х磼鐎ｎ偓绱╃憸鐗堝笚閸嬫劗锟界懓澹婇崰鏍礈娴煎瓨鈷戦柦妯侯槸閺嗙喖鏌涢悩宕囧⒌鐎殿喖顭峰鎾偄閾忚鍟庨梻浣稿閻撳牓宕伴弽銊﹀弿濠㈣埖鍔栭埛鎴︽煕濠靛棗顏撮柛搴＄箻濮婅櫣鏁鍓滈悗娈垮枛椤兘骞冮姀銈呯闁绘挸鍑介幏椋庣磼濡湱绠氬銈嗙墬缁诲倹绂嶈ぐ鎺撶厽闁挎繂顦板☉褔鏌嶇憴鍕伌闁诡喗鐟╅幊鐘活敆閿熶粙鍩涙繝鍥ㄢ拺闁荤喐婢樺▓鈺呮煙閸戙倖瀚�");
					return false;
				}
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻纾嬵唹闁跨喐鏋荤粻鎾汇�佸Δ鍛妞ゆ劑鍊х槐閬嶆⒒娴ｅ憡鍟炴繛璇х畵瀹曟劗锟斤綆锟姐垺妞介、鏃堝礋楠烆垰鍠氶悢鍡涙偣閾忕懓鐨戦柛鏃傚枛閺岋綁濡堕崨顔芥倷闂佸疇顫夐崹鍧椼�佸▎鎴犻┏閻庯綆鍋掗崥鍛存⒒娴ｇ儤鍤�闁搞垺鐓″畷鏌ュ蓟閵夈儳鍘撮梺纭呮彧闂勫嫰寮查鍕厱闁哄洨鍋熸禒娑欍亜閵夛附灏电紒杈ㄦ尰閹峰懘宕崟鎴悼缁辨帞锟斤綆鍋勯悘鎾煕閳瑰灝鍔滅�垫澘瀚换娑㈠閵忕姵鐏堥悗瑙勬处閸嬪﹤鐣烽悢纰辨晢闁跨喍绮欓幆鍐Ω閿斿墽鐦堢紒鐐緲椤﹁京澹曢崸妤佺厱閻庯綆鍋勯悘瀵革拷瑙勬礃閸旀瑥顕ｆ禒瀣垫晣闁绘棁娓圭純鏇熺節瀵伴攱婢橀敓鑺ユ礋楠炲﹨绠涘☉妯烘優閻庣櫢鎷烽柛鏇ㄥ墰閸橀亶姊洪崷顓炰壕妞ゃ劌鎳橀獮濠囧箛閸忣偄娲、娑樷槈濮橀硸鍟庨梺鍝勵槸閻楀棙鏅舵禒瀣畺濠靛倸鎲￠崐鍫曠叓閸パ屽剰濠殿喖鍊归〃銉╂倷閼碱剛顔囬梺浼欑秶缁绘繈鐛澶嬫優妞ゆ劑鍊撶花鎾⒒閸屾瑧顦﹀鐟帮躬閹繝宕奸妷銉х崶濠德板�曢幊蹇涘磹閸洘鐓曟い鎰Т閸旀粓鏌嶉柨瀣仼缂佽鲸甯為敓鏂ょ秵娴滄粓鎯冮垾鎰佹健妞ゆ劧绲块。鏌ユ煏閸パ冾伃鐎殿喗鎸冲畷鍗炍旀担瑙勫�烽梻浣虹帛閹歌崵鎹㈤崼銉ヨ摕闁绘梻鍘х粻鏌ユ煙娴煎瓨娑ф繛鍫幘缁辨挻鎷呴崫鍕碉拷鎾剁磽瀹ュ嫮绐旂�殿喖顭烽弫鎰板川椤忓懐锟藉妫呴銏″闁哄被鍔岄埢宥夊Χ婢跺鍘介柟鍏肩暘閸ㄥ吋绔熷Ο鑲╃＝鐎广儱鎷戦煬顒傦拷娈垮枦椤曆囧煡婢舵劕顫呴柍鈺佸暞閻濇洟姊洪懡銈呅㈡繛璇х畳閵囨劙宕橀鍡曠瑝閻熸粎澧楃敮妤呮偂閺囥垺鐓熼柡鍐ㄧ墛閺侀亶鏌涢悢鍝勪户缂佽鲸甯炵槐鎺懳熼懖鈺冩澖闂備胶纭堕弲婊堟儎椤栫偛鏋侀柟鎯ь嚟椤╃兘鎮楅敐搴濈敖妞わ负鍔戝铏癸拷鍦У閵嗗啯淇婇悙鏉戠瑨閼挎劖銇勯弮锟介崹婵堟崲閸℃稒鐓忛柛顐ｇ箖閹兼劙宕幖浣光拺缂佸顑欓崕鎰磼鐎ｎ偅灏甸柛鎺撳浮瀵噣宕煎┑鍫晪婵＄偑鍊栧ú鏍箠韫囨稑鐤鹃柨婵嗘缁★拷闂傚倸鐗婄粙鎴︽晸閽樺鐓奸柍銉畵瀹曠厧鈹戦幇顒佹珚婵犵數濞�濞佳兠洪姀锛勵洸婵犲﹤鐗婇悡娆戠磽娴ｉ潧鐏╅柣蹇婂墲閵囧嫰顢曢～顔垮惈闂佸搫鏈惄顖炲箖濞嗘挸鍨傛い鎰╁灪閻ｎ剟姊绘担鍝ユ瀮妞ゎ偄顦靛畷褰掑锤濡わ拷缁犳牗绻涢崱妤佺闁哥喎鎳忛妵鍕棘閸喗鍊銈嗘煥缁夋挳鍩為幋锔藉亹闁归绀侀弲閬嶆⒑閸濄儱校婵炶尙鍠庨悾鐑芥晸閻樿尙顦ㄩ梺鑲┾拡閸撴艾鈻撴ィ鍐┾拺闁告繂瀚崒銊╂煕閵娿儳绉洪柟閿嬪灴閹垽宕楅懖鈺佸妇濠电姰鍨奸崺鏍矙閹剧粯鍋╅柛妤冧紳閻熼偊鐓ラ柛鏇炵仛閻や線姊洪崫鍕効缂佹煡绠栭獮鍡涘籍閸偅鏅┑鐘诧工閹叉盯鏁愭径瀣ф嫼闂佸憡绺块崕杈ㄧ墡婵＄偑鍊戦崝宀勬晝閵堝鍋╅柣鎴ｅГ閸嬨劑鏌涘☉姗堟敾婵炲懌鍨藉铏规崉閵娿儲鐝㈤梺鐟板殩閹凤拷?
				if(pet.getKind()!=PetTypeEnum.VARIATION){
					logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐︽晸閼恒儴澹樻い锔垮嵆婵＄敻宕熼姘鳖唺闂佺懓鐡ㄧ换宥嗙閼测晝纾藉ù锝呮惈鏍￠悷婊勬緲閸熸潙锕㈡笟锟藉娲箰鎼达絿鐣甸梺鐟板暱缁绘帡骞忚ぐ鎺撴櫢闁绘ê纾崢钘夆攽閻樼粯娑ф俊顐ｇ洴瀹曟椽鏁愭径瀣幐闁诲繒鍋犻褎鎱ㄩ崒鐐寸厵妞ゆ柨鎼敓鑺ョ箓閻ｇ兘骞掗幋鏃�顫嶅┑顔筋殔濡梻妲愰敓锟�"+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕婵犲倹鍋ラ柡灞诲姂瀵噣鏁撴禒瀣婵犻潧顑呯粻顖氼渻鐎ｎ亝鎹ｇ紒鐘虫⒐缁绘盯骞嬮悙鍡樺灦瀵板嫰宕熼娑氬幈闁诲函绲芥晶搴ｅ姬閿熶粙姊洪崫鍕拱婵炲弶顭囬幑銏犫槈閵忊�筹拷閿嬨亜閹哄秷鍏岀憸鎵枛濮婄粯鎷呴懞銉ｏ拷鍐磼閿熻姤绗熼敓浠嬨�侀弽銊ョ窞闁归偊鍓濋幗鏇㈡⒑闂堟单鍫ュ疾濠婂牆纾婚柛鈩冪♁閻撴洟鎮橀悙鎻掆挃闁宠棄顦伴妵鍕疀閵夛箑顏�1");
					return false;
				}
				if(petInfo.getPetdye1()==colorpos1){
					logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐︽晸閼恒儴澹樻い锔垮嵆婵＄敻宕熼姘鳖唺闂佺懓鐡ㄧ换宥嗙閼测晝纾藉ù锝呮惈鏍￠悷婊勬緲閸熸潙锕㈡笟锟藉娲箰鎼达絿鐣甸梺鐟板暱缁绘帡骞忚ぐ鎺撴櫢闁绘ê纾崢钘夆攽閻樼粯娑ф俊顐ｇ洴瀹曟椽鏁愭径瀣幐闁诲繒鍋犻褎鎱ㄩ崒鐐寸厵妞ゆ柨鎼敓鑺ョ箓閻ｇ兘骞掗幋鏃�顫嶅┑顔筋殔濡梻妲愰敓锟�"+"\t闂傚倸鍊搁崐鎼佸磹瀹勬噴褰掑炊瑜忛弳锕傛煟閵忋埄鐒剧紒鎰殜閺岀喖鏌囬敃锟介弸娑㈡煕閵婏妇绠炴鐐寸墪鑿愭い鎺炴嫹闁诲浚浜濈换娑㈠川椤栨锝吳庨崶褝韬┑鈥崇埣瀹曘劑顢欓崗纰变哗缂傚倸鍊烽懗鑸垫叏閹惰棄纭�闁规儼妫勯拑鐔哥箾閹寸們姘ｉ崼鐔稿弿婵°倧鎷烽柣妤�锕顐﹀箚瑜夐弨浠嬫煟閹邦剙绾ч柛锝堟閳规垿鎮滈崶銊ヮ伓闂傚倷绀侀幖顐︽儗婢跺苯绶ら柛濠勫枔娴滆姤绻濋悽闈涗粶婵☆偅鐟╁畷鏇㈠礃濞村鐏佸銈嗘尪閸ㄦ椽鍩涢幋锔界參婵☆垯璀﹀Σ鎼佹煛閸℃瑥鏋涢柡灞剧洴閹晛鐣烽崶褉鎷伴柣搴㈩問閸犳牠鈥﹂悜钘夌畺闁靛繈鍊栭崑鍌炲箹鏉堝墽绉垫俊鎻掔埣閺岋綁鎮㈤崫銉х厐闂備礁搴滅徊浠嬫偩閻戣姤鍋ㄩ柛娑橈攻濞呫垽姊洪懞銉冾亪藝閽樺锟芥帗绻濆顓犲帾闂佸壊鍋呯换鍌炲汲濞嗘挻鐓曢柡鍐挎嫹婵ǜ鍔庡Σ鎰板箳閺冨倻锛滃┑顔筋殔閻楁劙鏁撻崐鐔哥《闁跨喕濮ら鏍窗閺嶎厸锟斤箓鎮滈挊澶嬬�梺鐟板⒔缁垶宕戦幇鐗堢厾缁炬澘宕晶鍓х磼閸楃偛绾х紒缁樼箞閹粙妫冨ù韬插灲閺岋綀绠涢弬鍨懙閻庤娲樼换鍫濐嚕娴犲鏁冮柕鍫濇祩濡叉悂姊绘担绋款棌闁稿鎳愰幑銏狀吋閸涱偓鎷烽幒鎾剁瘈婵﹩鍘鹃崢顏堟⒑閸撴彃浜濈紒璇插�垮鍐测枎閹惧鍘介棅顐㈡搐閿曘儱鈻嶉崶鈺冪＜閺夊牄鍔岀粭姘憋拷鍨緲鐎氼厾鎹㈠┑瀣妞ゆ挸顦崝宀冪亙闂佺粯锕㈠褎绂掑鍕箚妞ゆ劧绲跨粻鎾绘煟閿濆洤鍘撮柟顔哄灮閸犲﹥娼忛妸锔界彎闂傚倷鑳剁划顖炩�﹂崶顒�鏋侀柟闂寸閸屻劍銇勯弽顐沪闁抽攱甯掗湁闁挎繂鎳忛崯鐐烘偣閹般劌澧查柕鍥у椤㈡﹢鎮欓棃娑辨澑婵＄偑鍊戦崝濠囧磿閻㈠摜宓侀柡宥冨妽婵挳鎮峰▎蹇擃仾妞ゅ繒鍠庨埞鎴︽倷瀹割喖娈舵繝娈垮枟閹告娊銆侀弽顓炵妞ゆ牗姘ㄩ悿鍛繆閵堝繒鍒伴柛鐕佸灦閹�斥槈閵忊�筹拷鍫曟煟閹伴偊鏉洪柛銈嗙懃閳规垿鍨鹃悙钘変划闂佸搫鑻粔褰掑箰婵犲啫绶炴俊顖涗憾閿曞倹鐓ｅù鍏肩懅閹偐绱掓潏銊﹀鞍闁瑰嘲鎳橀幊鏍焺閸愩劎浠奸梺璺ㄥ枙婵倖绌遍崫鍕ㄦ瀺闁哄洨濮靛畷鍙夌節闂堟稓澧曢柡瀣墛娣囧﹪顢涘☉娆嶄户濠电偛鍚嬮崹鍨潖閾忓湱鐭欐繛鍡樺劤閸擃喚绱撴担钘夌厫闁煎綊绠栭幃楣冩倻閽樺鐤�濡炪倖鍨兼慨銈夊棘閿熶粙姊绘担鍛婃喐濠殿垼鍙冨畷鏉课旈崨顔煎壆濡炪倖鐗滈崑娑㈠几娓氾拷閺岀喖宕滆鐢盯鏌￠崨顔藉�愰柡灞诲姂閹倝宕掑☉姗嗕紦?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐︽晸閼恒儴澹樻い锔垮嵆婵＄敻宕熼姘鳖唺闂佺懓鐡ㄧ换宥嗙閼测晝纾藉ù锝呮惈鏍￠悷婊勬緲閸熸潙锕㈡笟锟藉娲箰鎼达絿鐣甸梺鐟板暱缁绘帡骞忚ぐ鎺撴櫢闁绘ê纾崢钘夆攽閻樼粯娑ф俊顐ｇ洴瀹曟椽鏁愭径瀣幐闁诲繒鍋犻褎鎱ㄩ崒鐐寸厵妞ゆ柨鎼敓鑺ョ箓閻ｇ兘骞掗幋鏃�顫嶅┑顔筋殔濡梻妲愰敓锟�");
					fire.pb.talk.MessageMgr.sendMsgNotify(roleid, 160380, null);
					return false;
				}
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎喘濮婄粯鎷呯憴鍕哗闂佺瀛╁钘夌暦濠婂啠鏋庨柟瀛樼箥濡粓鎮峰鍛暭閻㈩垱顨婇幃鈥斥槈濮樼偓瀚规鐐茬仢閸旀艾螖閻樿櫕鍊愰柣娑卞櫍瀵粙顢橀悢鍝勫籍闂備礁鎲￠崝锔界濠婂牆鍑犳繛鎴欏灪閻撴盯鎮橀悙鎻掆挃婵炲弶娼欓埞鎴︽晬閸曨偄骞嬫繝娈垮櫙閹风兘姊洪弬銉︽珔闁哥喐濯介妵鎰版晲婢跺鎷绘繛杈剧到閹芥粎绮旈悜妯镐簻闁靛闄勫畷宀�锟借娲橀〃鍛扮亽闂佹儳绻楅～澶娾枔妤ｅ啯鈷戠紓浣姑悘鈺呮煟閳╁啯顥堢�殿噮鍋婂畷鍫曨敆娴ｅ搫骞楅梻浣哥秺閸嬪﹪宕㈤崗鍏煎弿闁稿瞼鍋為悡鏇㈠箹濞ｎ剙濡洪柟鏌ョ畺閺屽秹濡烽婊呮殼闂佺娅曢〃濠囥�佸☉銏℃櫜闁哥姵澹嬮弲婊呮崲濠靛鍋ㄩ梻鍫熺◥缁爼姊哄Ч鍥у闁稿繑锕㈠顐﹀箻缂佹ê娈熼梺闈涱槶閸庨亶锝為鍫熲拺闁硅偐鍋涢敓鑺ョ墪鐓ら柡宥庡幖閻撴﹢鏌熸潏楣冩闁稿鍔欓幃妤呭捶椤撶倫銏°亜閵夛妇绠樼紒杈ㄦ尰閹峰懘宕崟鎴欏灪閵囧嫰顢橀悩鎻掑箣閻庢鍠栭…鐑藉极閹邦厼绶為悗锝庝簷缁ㄥ姊绘担铏瑰笡闁圭鎽滈懞杈ㄧ附缁嬭法鐛ユ繝鐢靛Т閸婄敻寮ㄦ禒瀣厓闁芥ê顦伴ˉ婊兠瑰鍕煉闁哄矉缍侀、姗�鎮欑拠褎瀚归柟闂寸筏缂嶆牠鐓崶銊﹀婵炲樊浜堕弫鍌炴煕閺囥劋绨介柣鎰躬濮婄粯鎷呴崨濠傛殘濠电偠顕滅粻鎾崇暦閹达箑绠婚悹鍥皺椤斿棝姊绘担鍝ヤ虎妞ゆ垵娲妴鍛存倻閼恒儱锟界敻鏌ㄥ┑鍡樺櫣妞わ絽纾槐鎺旓拷锝庝簽缁犺尙绱掔紒妯肩疄濠殿噯鎷烽梺鎸庣箓閹虫劙宕㈤锔解拺闁告稑锕ラ埛鎰版煕閵娿儲鍋ョ�殿噮鍋婇獮妯兼嫚閼碱剦鍚呴梻浣告贡閸庛倕螞韫囨拹锝夘敋閿熻棄顫忛悜妯侯嚤婵炲棙鍨硅倴缂傚倷鑳剁划顖滄崲閸儳宓侀柛鈩冪☉閻愬﹥銇勯幒鐐村缂佺虎鍙忛幏鐑芥⒒娴ｈ姤纭堕柛锝忕畵楠炲繘鏁撻敓锟�.getBaseId()
				if(!isCanUseColor(pet.getBaseId(),colorpos1)){
					logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐︽晸閼恒儴澹樻い锔垮嵆婵＄敻宕熼姘鳖唺闂佺懓鐡ㄧ换宥嗙閼测晝纾藉ù锝呮惈鏍￠悷婊勬緲閸熸潙锕㈡笟锟藉娲箰鎼达絿鐣甸梺鐟板暱缁绘帡骞忚ぐ鎺撴櫢闁绘ê纾崢钘夆攽閻樼粯娑ф俊顐ｇ洴瀹曟椽鏁愭径瀣幐闁诲繒鍋犻褎鎱ㄩ崒鐐寸厵妞ゆ柨鎼敓鑺ョ箓閻ｇ兘骞掗幋鏃�顫嶅┑顔筋殔濡梻妲愰敓锟�"+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕婵犲倹鍋ラ柡灞诲姂瀵噣鏁撴禒瀣婵犻潧顑呯粻顖氼渻鐎ｎ亝鎹ｇ紒鐘虫⒐缁绘盯骞嬮悙鍡樺灦瀵板嫰宕熼娑氬幈闁诲函绲芥晶搴ｅ姬閿熶粙姊洪崫鍕拱婵炲弶顭囬幑銏犫槈閵忊�筹拷閿嬨亜閹哄秷鍏岀憸鎵枛濮婄粯鎷呴懞銉ｏ拷鍐磼閿熻姤绗熼敓浠嬨�侀弽銊ョ窞闁归偊鍓濋幗鏇㈡⒑闂堟单鍫ュ疾濠婂牆纾婚柛鈩冪♁閻撴洟鎮橀悙鎻掆挃闁宠棄顦伴妵鍕疀閵夛箑顏�2");
					return false;
				}
				
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎喘濮婄粯鎷呯憴鍕哗闂佺瀛╁钘夌暦濠婂啠鏋庨柟瀛樼箥濡粓鎮峰鍛暭閻㈩垱顨婇幃鈥斥槈濮樼偓瀚规鐐茬仢閸旀艾螖閻樿櫕鍊愰柣娑卞櫍瀵粙顢橀悢鍝勫籍闂備礁鎲￠崝锔界濠婂牆鍑犳繛鎴欏灪閻撴盯鎮橀悙鎻掆挃婵炲弶娼欓埞鎴︽晬閸曨偄骞嬪銈冨灪閻熲晠骞冮埄鍐╁劅妞ゆ棁濮ょ粊浼存⒒閸屾艾锟界兘鎳楅崜浣稿灊妞ゆ牗绮嶉弳婊堟煙閻戞﹩娈旈崶鎾⒑瑜版帗锛熺紒锟芥笟锟介幏鎴︽偄閸忚偐鍘介梺鍝勫暙閸婂摜鏁崜浣虹＜闁绘娅曢惃鎴︽煙閼碱剦鐒炬い鎾冲悑瀵板嫭绻濋崘顓犲彂闂備礁鎼ˇ顖炴偋閸愵喖鐤炬い蹇撶墕缁狀垶鏌ｉ幋锝呅撻柛瀣ㄥ姂濮婂宕奸悢鍓佺箒闂佸搫妫崢濂稿煘閹达箑鐓￠柛鈩冦仦缁ㄥ姊洪崫銉ユ瀾婵炲吋鐟╅、姘舵晲閸℃瑧鐦堝┑顔斤供閸樿棄鈻嶉姀銈嗏拺缂備焦锕╅悞楣冩倶韫囨梻鎳囬挊婵喢归悡搴ｆ憼闁抽攱甯￠弻娑氫沪閻愵剛娈ゆ繝鈷�鍕�掔紒杈ㄥ笧閿熸枻缍嗛崑鍛焊閹殿喚纾奸柛灞剧☉濞搭噣鏌涢埡瀣瘈鐎规洏鍔戦、娆戞喆閸曨偒浼栭梻鍌欐祰瀹曞灚鎱ㄩ弶鎳ㄦ椽鎮╃紒妯绘闂佽姤锚椤﹂亶鏁嶅鍚ゅ綊鎮╁▎蹇斿闁抽攱鍨圭槐鎾存媴婵埈浜弻灞筋煥閸涱垳锛滈梺缁樏崯鍧楁倶鐎涙ǜ浜滈柕蹇婏拷鍐叉懙婵犵绱曢崗姗�宕洪敓鐘茬＜婵炴垶鐟禒褔姊婚崒娆愮グ婵炲娲熷畷鎶芥晝閸屾氨顔嗛梺璺ㄥ櫐閹凤拷?
				ItemMaps bagContainer = Module.getInstance().getItemMaps(roleid, BagTypes.BAG, false);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯顢曢敐鍡欙紭闂佽法鍠愰崹婵嬫倿閿旂偓宕叉繝闈涱儏閻愬﹤顪冪�ｎ亝鎹ｉ柍绗哄�曢埞鎴︽偐椤旇偐浼囬梺绯曟櫆閻楃姴鐣峰┑瀣嵆闁绘鏁搁悞鍏肩節閵忥絾纭炬い鎴濆閹广垽宕卞Ο闀愮盎闂佸搫绉查崝搴ｇ不閹捐秮鐟邦煥閸愵亞楔闂佸搫鐭夌紞渚�銆佸锟介幃婊堝幢濡攱鐎伴梻鍌欑閹碱偊鎯夋總绋跨獥闁哄稁鍘肩粻鏍ㄧ節婵犲倸鏋ゆ繛绗哄姂閺屾盯鍩勯崘鍓у姺闂佸搫妫寸粻鎾愁潖缂佹ɑ濯村〒姘煎灣閸斿憡淇婇妶鍥㈤柟鑺ョ矌閸掓帡寮崶銉ゆ睏闂佸湱鍎ら崹濂稿箺閺囩偐鏀介柣鎰綑閻忕喖鏌涢妸銉хШ鐎规洩绻濋獮搴ㄦ嚍閵壯冨妇濠电姷鏁搁崑娑㈡倶濠靛鏅搁柤鎭掑労濞堟粎锟借娲橀悷銊╁Φ閹版澘绠抽柟缁㈠灡鐎氬吋绻濋悽闈涗哗閻忓浚浜、娆愮節閸曨喖小婵＄偛顑呭ù椋庡閸忕浜滈柡鍐ㄥ�瑰▍鏇㈡煙閸愬弶宸濋柨鐔诲Г椤旀牠宕伴弽顓涳拷锕傛煥鐎ｂ晝绠氶梺鍏兼倐濞佳呮閻愭祴鏀介柣妯诲絻椤忓瓨淇婇煫顓炲祮婵﹦绮幏鍛存寠婢舵ɑ顥嶅┑鐘灮閹虫捇鎮ч崱娑樼厺闁哄倸绨卞Σ鍫ユ煏韫囧﹥娅嗛柡鍛矊椤啴濡堕崱妯鸿敿闂佹悶鍔嶅浠嬪箖閿熺姵鍋勯柣鎾虫捣椤旀劙鏌℃径濠勫濠⒀呮櫕婢规洟宕归姘秺閹晛鐣烽崶锝嗩�囬梻渚�娼уú銈囷拷姘嵆閵嗕礁顫滈敓浠嬪箖濞嗘挸绾ч柟瀵稿仧娴滅兘姊婚崒娆愮グ婵℃ぜ鍔戦幃鐐烘晝閸屾氨顔夐梺鎼炲労閸撴瑧绮婚弶搴撴斀闁绘ɑ褰冮弳娆戠磼閸撲礁浠遍柟顔筋殜閺佹劖鎯旈垾宕囶啋婵＄偑鍊戦崹褰掑箠濡警娼栫紓浣股戞刊鏉戙�掑鐓庣仭闁轰緡鍨伴埞鎴︽倷閸欏娅ゅ┑鐐跺皺閸犳牠鎮伴锟介獮鍥级鐠侯煈鍟囧┑鐐舵彧缁蹭粙骞楀鍫濆偍婵炲樊浜濋崐鍨殽閻愯尙浠㈤柛鏃�纰嶉妵鍕晜閸喖绁悗娈垮枟閻擄繝鐛弽銊﹀闁革富鍘煎鎶芥⒒娴ｈ櫣甯涙繛鍙夌墵瀹曟劙宕烽銊﹀婵鍋撶�氾拷
				if(bagContainer==null){
					logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐︽晸閼恒儴澹樻い锔垮嵆婵＄敻宕熼姘鳖唺闂佺懓鐡ㄧ换宥嗙閼测晝纾藉ù锝呮惈鏍￠悷婊勬緲閸熸潙锕㈡笟锟藉娲箰鎼达絿鐣甸梺鐟板暱缁绘帡骞忚ぐ鎺撴櫢闁绘ê纾崢钘夆攽閻樼粯娑ф俊顐ｇ洴瀹曟椽鏁愭径瀣幐闁诲繒鍋犻褎鎱ㄩ崒鐐寸厵妞ゆ柨鎼敓鑺ョ箓閻ｇ兘骞掗幋鏃�顫嶅┑顔筋殔濡梻妲愰敓锟�"+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌ｉ幋锝呅撻柛銈呭閺屾盯顢曢敐鍡欘槬闂佺琚崝搴ㄥ箟閹间礁妫橀悹鎭掑妽濞堟儳顪冮妶鍡欏⒈闁稿鐩弻銊╁Χ閸℃洜绠氶梺闈涚墕鐎氼噣藝閿旂晫绠鹃柛顐墰閸掔増銇勯鍕殻濠碘�崇埣瀹曞崬鈻庤箛锝嗘缂傚倸鍊风欢锟犲闯椤栨粎绀婂〒姘炬嫹闁绘侗鍠涚粻娑樷槈濞嗗骏鎷锋繝姘參婵☆垯璀﹀Σ鎼佹煟鎼搭喖骞栨い顏勫暣婵″爼宕卞Δ锟借闂備礁鎲￠幐鑽ゆ崲閸儱鏋侀柟鍓х帛鐎电姴顭跨捄渚剰濞寸姵鎸冲娲传閸曨厾鍔圭紓浣介哺濞叉绮嬮幒妤佹櫆闁绘劦鍓欓悵浼存⒑閸︻厾甯涢悽顖楁櫊閹骞庨懞銉㈡嫽婵炶揪绲介幗婊堝几閸愨斂浜滈柡鍥ф濞诧箓鎮￠敓浠嬫⒑閹稿海绠撴い锕�宕悾鍨瑹閿熶粙寮婚悢鍏煎�绘俊顖濇娴滃爼姊洪悮瀛樺婵炲濮撮鍡涙偂閺囥垺鐓冮柍杞扮閺嬶箑銆掑顓犳创闁哄本鐩幃婊堝炊閵娿儺浼�");
					return false;
				}
				SRoleRColorConfig sRoleRColorConfig1=sRoleRColorConfig.get(colorpos1);
				if(sRoleRColorConfig1==null){
					logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐︽晸閼恒儴澹樻い锔垮嵆婵＄敻宕熼姘鳖唺闂佺懓鐡ㄧ换宥嗙閼测晝纾藉ù锝呮惈鏍￠悷婊勬緲閸熸潙锕㈡笟锟藉娲箰鎼达絿鐣甸梺鐟板暱缁绘帡骞忚ぐ鎺撴櫢闁绘ê纾崢钘夆攽閻樼粯娑ф俊顐ｇ洴瀹曟椽鏁愭径瀣幐闁诲繒鍋犻褎鎱ㄩ崒鐐寸厵妞ゆ柨鎼敓鑺ョ箓閻ｇ兘骞掗幋鏃�顫嶅┑顔筋殔濡梻妲愰敓锟�"+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊勭矊闇夐柡宥庡幗閻撳繐鈹戦悙闈涗壕婵炲懎妫濋弻娑㈠Χ閸涱収浼冮梺鍝勮閸婃鍒掑▎鎴炲磯闁靛鍊楁す铏節閻㈤潧浠滈柟铏姈閹便劑宕归銈傛敵婵犵數濮村ú銈呮纯闂傚鍋勫ú锕傚蓟閵娾晩鏁傞柛顐ｆ礃閳锋帒霉閿濆妫戝☉鎾瑰皺缁辨帡鐓鐘电厯闂佽鍠楅敋妞ゎ偅绻冨蹇涘煛閸愵亝娈介梻鍌欒兌缁垶寮婚妸鈺佽Е閻庯綆鍠栭悿鍓х磼鐎ｎ偓绱╃憸鐗堝笚閸嬫劗锟界懓澹婇崰鏍礈娴煎瓨鈷戦柦妯侯槸閺嗙喖鏌涢悩宕囧⒌鐎殿喖顭峰鎾偄閾忚鍟庨梻浣稿閻撳牓宕伴弽銊﹀弿濠㈣埖鍔栭埛鎴︽煕濠靛棗顏撮柛搴＄箻濮婅櫣鏁鍓滈悗娈垮枛椤兘骞冮姀銈呯闁绘挸鍑介幏椋庣磼濡湱绠氬銈嗙墬缁诲倹绂嶈ぐ鎺撶厽闁挎繂顦板☉褔鏌嶇憴鍕伌闁诡喗鐟╅幊鐘活敆閿熶粙鍩涙繝鍥ㄢ拺闁荤喐婢樺▓鈺呮煙閸戙倖瀚�");
					return false;
				}
				int cost=sRoleRColorConfig1.getItemnum();
				int itemcode=sRoleRColorConfig1.getItemcode();
				
				int havenum=bagContainer.getItemNum(itemcode, 0);
				if(havenum<cost){
					fire.pb.talk.MessageMgr.sendMsgNotify(roleid, 150058, null);
					return false;
				}
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴闇夐柨婵嗩槹娴溿倝鏌ら弶鎸庡仴婵﹥妞介、妤呮晸閻ｅ瞼鐭撻柡灞诲劜閺呮悂鏌﹀Ο渚Ц闁跨喕妫勫锟犲Υ娴ｇ硶鏋庨柟鎯х－椤︻參鎮峰鍐閽樻繃銇勯弽銊с�掔紒鐘荤畺瀵爼宕煎┑鍡忔寖闂佽鍠涢崑鎰版儉椤忓牜鏁囬柣鎰版涧閻撶喖鎮楀▓鍨灓妞ゎ厼鐗撻、姗�宕楅悡搴ｇ獮婵犵數濮寸�氱兘宕崶銊х瘈闁汇垽娼ч崜宕囩磽瀹ュ懏顥㈢�规洘绮岄埢搴ㄥ箛椤忓棛鐣惧┑鐐差嚟婵挳顢栭崱娑欏亗闁绘柨鍚嬮悡娆撴煟閹寸伝顏堟倶閻斿吋鐓曢悗锝冨妼閻忔煡鏌＄仦闈╂嫹瀹曞洦娈曢梺璺ㄥ枍缁瑥鐣锋导鏉戝唨妞ゆ挾濮寸粊锕傛⒑缁洖澧查柛鎴犳嚀鍗卞┑鐘崇閳锋垿鏌涘┑鍡楊仾妞ゃ儮锟借秮鐟邦煥鎼粹�斥拫闂佽桨鐒﹂幐鑽ょ矉閹烘棑鎷烽敐搴′簼闂佹鍙冮弻鐔兼偂鎼达絾鎲肩紓渚囧枟閹瑰洭鎮伴璺ㄧ杸婵炴垶鐟﹀▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹
				int delnum=bagContainer.removeItemById(itemcode, cost, fire.log.enums.YYLoggerTuJingEnum.tujing_Value_ranse, itemcode, "闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啴鍙勯柕鍡楀暣婵＄柉顦撮柣顓熺懇閺屾盯寮婚婊冿拷褔骞忛悜钘夐敜婵°倧鎷风紒鐙欏洦鐓曟い鎰剁悼閳藉鈹戦垾鑼煓闁哄本绋戦埢搴ょ疀閺囩媭鍟嬫繝娈垮枛閿曘儱顪冮挊澶屾殾鐟滅増甯╅弫瀣煕濞戝崬骞栧鐟邦槹缁绘繈鎮介棃娑楃捕闂佺娅曢崝鏍崲濞戙垺鏅稿ù鐘差儐閻撴盯鎮橀悙鎻掆挃妞ゎ剙鍚嬮妵鍕晝娴ｅ湱褰ч梺闈涙搐鐎氱増淇婇幖浣肝ㄩ柨鏇嫹婵炲牊顨婂楦裤亹閹烘挻鏆犻梺鎼炲妼濞硷繝鐛崘顔碱潊闁靛牆鎳愰ˇ褔姊洪崗鑲┿偞闁哄懏鐩悰顔碱吋婢跺鎷绘繛杈剧到閹诧繝宕悙鐑樼厵缂佸瀵чˉ銏拷瑙勬礈閸犳牠銆侀弴銏℃櫜闁搞儯鍔嶉鍛攽閻樻鏆滅紒杈ㄦ礋瀹曟垿骞嬮敃锟界壕褰掓煙鏉堝墽鐣辩痪鎯х仢閳规垿鎮╃�圭姴顥濈紓浣哄閸ㄥ爼寮婚妸鈺傚亞闁稿本绋戦锟�");
				if(delnum!=cost){
					return false;
				}
				petInfo.setPetdye1(colorpos1);
				petInfo.setPetdye2(colorpos2);
				SReqUsePetColor sReqUsePetColor=new SReqUsePetColor();
				sReqUsePetColor.colorpos1=colorpos1;
				sReqUsePetColor.colorpos2=colorpos2;
				sReqUsePetColor.petkey=petkey;
				Procedure.psendWhileCommit(roleid, sReqUsePetColor);
				// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎喘濮婄粯鎷呴懞銉с�婇梺鍝ュУ閹稿骞堥妸褝鎷烽棃娑欐喐缁炬儳銈搁弻宥夊传閸曨剙娅ら梺鎶芥敱閸ㄥ爼濡甸崟顖氱闁绘劖娼欓鍓佺磽閸屾瑧顦︽い锔垮嵆楠炴劙骞庨挊澶岊唵闂佺鎻梽鍕磻閸曨垱鍊堕煫鍥ф捣閸斿秹鏌￠崒锔藉闂傚倸鍊烽懗鍓佸垝椤栨繃鎳岄柣鐔哥矋濠㈡﹢宕幘顔猴拷渚�寮崼鐔蜂缓闂佸憡绋戦敃锕傚储閸偂绻嗛柣鎰▕閸庡繐螖閻樿櫕鍊愮�规洏鍨婚敓鐣屾暬濞煎骞忔搴㈠枂闁告洦鍓涢ˇ顓㈡⒑缁嬭法绠查柨鏇樺灲婵″瓨鎷呴崜鍙夊缓闂佽法鍠嶇划娆撶嵁閸愩劉鏋庨柟鎯х－閻わ拷闂備礁鐤囧銊х矆娴ｈ鍙忛幖绮规濞撳鏌曢崼婵嬵�楃�殿喓鍔戦弻娑欐償閳藉棛鍚嬮柦妯荤箞閺岀喖骞嗛弶鍟冩捇鏌涙繝鍕毄缂佽鲸甯掕灃濞达綀銆�濡插牓姊虹涵鍛彧闁告梹鐟╅獮鍡欎沪缁涘鍍甸梺鐓庢憸椤ｄ粙骞忛崫鍕垫富闁靛牆妫楅柌婊堟煙閻戠瓔妫戠紒杈ㄥ笚瀵板嫮锟斤綆鍋勯崬澶愭⒑鐠団�虫灓闁稿绋撻崣鍛渻閵堝懐绠伴柟铏姍瀹曘垽鏌嗗鍡忔嫼闁荤喐鐟ョ�氼厾娆㈤弻銉︾厾婵炶尪顕ч悘锔筋殽閻愯韬鐐叉喘瀹曟顢曢姀鈥虫灎闂佽桨鐒﹂幑鍥极閹剧粯鏅搁柨鐕傛嫹
				final SRefreshPetInfo refresh = new SRefreshPetInfo(pet.getProtocolPet());
				psendWhileCommit(roleid, refresh);
				
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴闇夐柨婵嗩槹娴溿倝鏌ら弶鎸庡仴鐎殿喖鐖煎畷鐓庮潩椤撶喓褰呴梻浣规偠閸斿秶鎹㈤崘顔嘉﹂柛鏇ㄥ灠閸愶拷濡炪倖鍔﹀锟界紒顔煎缁辨挻绗熸繝鍐伓濠电姰鍨煎▔娑㈩敄閸曨厽宕查柛鈩冪♁閻撳繘鏌涢锝囩畺闁革絾妞介弻娑㈡晲閸ャ劌娈屽銈傛櫅閵堢鐣烽妸鈺婃晣婵炴垶鐟﹂弶鍛婁繆閻愵亜锟芥牕顫忔繝姘仱闁哄啫鐗婇崐鍧楁煟閹伴潧澧扮紒鐘冲劤椤法鎹勬笟顖氬壋濠电偛寮堕幐鎶藉蓟閻斿吋鐓ラ悗锝庝簽娴煎矂姊虹拠鈥虫灁闁搞劏妫勯悾宄拔旈崨顔兼異闂佸疇妗ㄧ粈浣虹不閵夆晜鈷掗柛灞剧懅椤︼箓鏌熺拠褏绡�妤犵偞鍔欏畷鍗炩槈濡⒈妲规俊鐐�栭崝褏寰婇崸妤�姹叉慨姗嗗厴閺�浠嬫煥濞戞ê顏╁ù婊冦偢閺屾稒绻濋崘銊т紝閻庤娲樺ú妯侯焽韫囨稑鐓涢柛灞捐壘缁ㄣ儲绻濆▓鍨灍妞ゃ劍鍔欓獮蹇旑槹鎼搭垱瀚规繛鍫濈仢閺嬫稒銇勯鐘插幋妤犵偛鍟存慨锟介柕鍫濇娴犲繘鏌ｆ惔銏⑩檨闁挎碍銇勮箛姘【闁宠鍨块幃娆撳级閹寸姳妗撴俊鐐�曞ù姘椤忓牄锟戒線寮崼婵嗙獩濡炪倖姊婚崢褎瀵兼惔銊︹拻濞达綀顫夐崑鐘绘煕鎼淬垻鐭掗柡浣规尰缁傛帞锟斤綆浜為崫妤呮⒑閸忛棿鑸柛搴灡缁傚秴顭ㄩ崼鐔哄幐闂佹悶鍎弲娑欑閿斿浜滈柕澹啩妲愰梺璇″枟椤ㄥ懘锝炲┑瀣�锋い鎺炴嫹妞ゅ骏鎷�
				fire.pb.talk.MessageMgr.sendMsgNotify(roleid, 160432, null);
				
				
				logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞鐟滃繘寮抽敃鍌涚厽闁靛繈鍩勯悞鍓х磼閹邦収娈滈柡宀�鍠栭獮宥夘敊绾拌鲸姣夐梻浣侯焾椤戞垹鎹㈠┑瀣摕闁靛ň鏅涚猾宥夋煕鐏炲墽鐓瑙勬礋濮婃椽宕崟顒夋！缂備緡鍠楅幑鍥ь嚕婵犳碍鏅插璺猴攻椤ユ繈姊洪崷顓х劸閻庢稈鏅犲畷浼村箛閻楀牃鎷虹紓鍌欑劍椤洨绮诲顓犵濠㈣泛顑囧ú鎾煕閳哄啫浠辨鐐差儔閺佸啴鏁撻悾灞筋棜闁稿繗鍋愮弧锟芥繝鐢靛Т閸婅鍒婃總鍛婄厱閹兼惌鍨辩�氾拷 "+roleid+"闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啴鍙勯柕鍡楀暣婵＄柉顦撮柣顓熺懇閺屾盯寮婚婊冿拷褔骞忛悜钘夐敜婵°倧鎷风紒鐙欏洦鐓曟い鎰剁悼閳藉鈹戦垾鑼煓闁哄本绋戦埢搴ょ疀閺囩媭鍟嬫繝娈垮枛閿曘儱顪冮挊澶屾殾鐟滅増甯╅弫瀣煕濞戝崬骞栧鐟邦槹缁绘繈鎮介棃娑楃捕闂佺娅曢崝鏍崲濞戙垺鏅稿ù鐘差儐閻撴盯鎮橀悙鎻掆挃妞ゎ剙鍚嬮妵鍕晝娴ｅ湱褰ч梺闈涙搐鐎氱増淇婇幖浣肝ㄩ柨鏇嫹婵炲牊顨婂楦裤亹閹烘挻鏆犻梺鎼炲妼濞硷繝鐛崘顔碱潊闁靛牆鎳愰ˇ褔姊洪崗鑲┿偞闁哄懏鐩悰顔碱吋婢跺鎷绘繛杈剧到閹诧繝宕悙鐑樼厵缂佸瀵чˉ銏拷瑙勬礈閸犳牠銆侀弴銏℃櫜闁搞儯鍔嶉鍛攽閻樻鏆滅紒杈ㄦ礋瀹曟垿骞嬮敃锟界壕褰掓煙鏉堝墽鐣辩痪鎯ф健瀵爼宕煎顓熺彆閻庤娲栧鍫曞箞閵娿儙鏃傦拷锝庡亜椤忓爼鏌ｆ惔銏╁晱闁哥姵鐗犻垾锕傛倻閽樺鐎悗骞垮劚椤︻垳绮堢�ｎ偁浜滈煫鍥ㄦ尰閸ｇ懓鈹戦娆忓祮婵﹦绮幏鍛存惞閻熸壆顐奸梻浣告啞濡垹绮婚幘宕囨殾婵犲﹤鍟犻弸搴ㄦ煙鐎涙绠ユ俊顐ｇ矒濮婃椽宕橀崣澶嬪創闂佺锕ㄥ畷闈涱嚕瑜旈弫鎾寸鐎ｎ偀鎷洪梻鍌氱墛缁嬫挾绮婚悙鐑樼厱闁靛闄勯妵婵堬拷瑙勬礈閺佸寮幘瀵割浄閻庯綆鍋�閹锋椽姊洪崷顓х劸閻庢稈鏅滃鍕礋椤愶拷閻熼偊鐓ラ幖瀛樼箘閻╁骸顪冮妶鍡樼┛缂傚秳绶氶妴渚�寮撮姀鐙�娼婇梺瀹犳〃閻掞箓宕愰鐐粹拻濞达綀顫夐崑鐘绘煕鎼粹槅鐓兼慨濠佺矙瀹曠喖顢涘槌栨Ч闂備礁鎲￠崝锕傚窗濡ゅ懎鐓曢柟瀛樼贩瑜版帒绀傞柤娴嬫櫆閸ｎ噣姊洪崨濠傜瑐闁告濞婂濠氭晸閻樻煡鍞跺銈嗗姂閸ㄥ綊鍩涚�ｎ喗鈷戦悹鍥ｏ拷铏亶濡炪們鍔岄敃顏堝Υ娴ｅ壊娼╅柤绋跨仛濞呫垽姊洪懞銉冾亪藝閽樺鐒介柡宥庡幗閻擄綁鐓崶銊﹀鞍閻犳劧绱曢惀顏堝箚瑜嶉幃鎴︽煙娓氬灝濡奸摶鏍煥閻旂粯顥夐摶鐐寸箾閸℃ɑ鎯勯柡浣告喘閺屟嗙疀閹剧纭�缂佺偓宕樺Λ鍕箒闂佹寧绻傞幊蹇涘箚閸喆浜滈幖绮瑰墲濠�鏉壳庨崶褝韬鐐存崌楠炴帒鈹戦幘鏉戭伓闂佽法鍣﹂幏锟�"+petkey+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啴鍙勯柕鍡楀暣婵＄柉顦撮柣顓熺懇閺屾盯寮婚婊冿拷褔骞忛悜钘夐敜婵°倧鎷风紒鐙欏洦鐓曟い鎰剁悼閳藉鈹戦垾鑼煓闁哄本绋戦埢搴ょ疀閺囩媭鍟嬫繝娈垮枛閿曘儱顪冮挊澶屾殾鐟滅増甯╅弫瀣煕濞戝崬骞栧鐟邦槹缁绘繈鎮介棃娑楃捕闂佺娅曢崝鏍崲濞戙垺鏅稿ù鐘差儐閻撴盯鎮橀悙鎻掆挃妞ゎ剙鍚嬮妵鍕晝娴ｅ湱褰ч梺闈涙搐鐎氱増淇婇幖浣肝ㄩ柨鏇嫹婵炲憞鍥ㄢ拺闁荤喐婢樼痪褔鏌熼崨濠傗枙鐎殿噮鍋婂畷鎺楁倷閼碱剦鍟嬮梻浣告啞娓氭宕伴弽顓ф晜閻犺桨缍嶉弮鍫熷亹闂傚牊绋愮划鍫曟⒑鐠囪尙绠茬紒璇茬墕閻ｅ嘲鈹戦崱鈺傚兊濡炪倖鎸炬慨鐑筋敊閺囩喓绡�闁靛骏绲介悡鎰磼鐎ｎ偅宕岄柟顕�绠栭幃浠嬪川婵犲嫬骞嶆俊鐐�栧濠氭偤閺傚簱鏋旀繝濠傛嫅閹烽鎲撮崟顒傤槰缂備緡鍠楅幑鍥ь嚕椤愶箑绠荤紓浣股戝▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹"+petInfo.getName()+"\t闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴闇夐柨婵嗩槹娴溿倝鏌ら弶鎸庡仴婵﹥妞介、妤呮晸閻ｅ瞼鐭撻柡灞诲劜閺呮悂鏌﹀Ο渚Ц闁跨喕妫勫锟犲Υ娴ｇ硶鏋庨柟鎯х－椤︻參鎮峰鍐閽樻繃銇勯弽銊с�掔紒鐘荤畺瀵爼宕煎┑鍡忔寖闂佽鍠涢崑鎰版儉椤忓牜鏁囬柣鎰版涧閻撶喖鎮楀▓鍨灓妞ゎ厼鐗撻、姗�宕楅悡搴ｇ獮婵犵數濮寸�氱兘宕崶銊х瘈闁汇垽娼ч崜宕囩磽瀹ュ懏顥㈢�规洘绮岄埢搴ㄥ箛椤忓棛鐣惧┑鐐差嚟婵挳顢栭崱娑欏亗闁绘柨鍚嬮悡娆撴煟閹寸伝顏堟倶閻斿吋鐓曢悗锝冨妼閻忔煡鏌＄仦闈╂嫹瀹曞洦娈曢梺璺ㄥ枍缁瑥鐣锋导鏉戝唨妞ゆ挾濮寸粊锕傛⒑缁洖澧查柛鎴犳嚀鍗卞┑鐘崇閳锋垿鏌涘┑鍡楊仾妞ゃ儮锟借秮鐟邦煥鎼粹�斥拫闂佽桨鐒﹂幑鍥箖閸撗傛勃闁绘劦鍓氶惁搴♀攽閻橆偅濯伴柛鏇炵仛閻ｅ爼鏌ч懡銈呬槐闁哄本鐩獮鍥濞戞瑧浜梻浣芥閸熶即宕伴弽顓炶摕闁哄洨鍠撶粻楣冩煕椤垵鏋涘┑顔碱槸閳规垿鍩勯崘銊хシ闂佺粯顨呴敃銉х矚鏉堛劎绡�闁搞儴鍩栭弲顒�鈹戦悩缁樻锭婵☆偅鏌ㄦ晥婵°倓鑳剁粻楣冩倵閻㈡鐒鹃悽顖濆煐缁绘稓鎷犺椤╊剟鏌熼獮鍨仼闁宠鍨归敓鏂ょ秵娴滅偤宕㈤柆宥嗏拺閻犳亽鍔岄弸宥囩磼椤旂晫鎳冮柣锝呭槻椤粓鏁撴禒瀣槬闁斥晛鍟刊鎾⒑閸噮鍎愰柍缁樻礋濮婄粯鎷呯粵瀣濠殿喗锕粻鎾绘晲閻愭潙绶炲┑鐐村笚濡炰粙寮崘顔肩＜婵ɑ鍞荤槐閬嶆⒒娴ｅ憡鍟炲〒姘殜瀹曞綊骞庨懞銉ュ壒濠电偛妫楃换鍡涘绩娴犲鐓熸俊顖氭惈缁狙冾熆鐠哄搫顏柡灞剧〒閿熸枻绲婚崝灞炬叏閸岀偞鐓涢悘鐐额嚙婵倿鏌熼鍝勶拷婵嗙暦閹烘垟妲堟慨妤�妫旂槐锟�"+itemcode+"闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊勭矊闇夐柡宥庡幗閻撳繐鈹戦悙鑼虎闁告柨鐡ㄧ换娑㈠箻閹颁胶鍚嬮梺鍝勭灱閸犳牠骞冨鍐炬建闁糕剝顭囬弳銉х磽娴ｉ缚妾搁柛娆忕箻楠炲繘鎮滈懞銉㈡嫽婵炶揪绲块悺鏂款焽閹扮増鐓曢幖杈剧到鐢爼鎽堕悙鐑樼厱闁哄洢鍔岄悘锟犳煃闁垮绗氶柕鍥у瀵粙顢曢～顓熷媰闂備胶绮幐鍫曞磿閻㈢钃熼柨婵嗩槸閸楁娊鏌ｉ幇顖ｅ殝闁归鍏樺畷鐑筋敇閵婏箑顏跺┑顔筋焽閸嬫挾锟芥熬鎷�"+cost+"闂傚倸鍊搁崐鎼佸磹瀹勬噴褰掑炊瑜忛弳锕傛煟閵忋埄鐒剧紒鎰殜閺岀喖鏌囬敃锟介弸娑㈡煕閵婏妇绠炴鐐寸墪鑿愭い鎺炴嫹闁诲浚浜濈换娑㈠川椤栨锝吳庨崶褝韬┑鈥崇埣瀹曘劑顢欓崗纰变哗缂傚倸鍊烽懗鑸垫叏閹惰棄纭�闁规儼妫勯拑鐔哥箾閹寸們姘ｉ崼鐔稿弿婵°倧鎷烽柣妤�锕顐﹀箚瑜夐弨浠嬫煟閹邦剙绾ч柛锝堟閳规垿鎮滈崶銊ヮ伓闂傚倷绀侀幖顐︽儗婢跺苯绶ら柛濠勫枔娴滆姤绻濋悽闈涗粶婵☆偅鐟╁畷鏇㈠礃濞村鐏佸銈嗘尪閸ㄦ椽鍩涢幋锔界參婵☆垯璀﹀Σ鎼佹煛閸℃瑥鏋涢柡灞剧洴閹晛鐣烽崶褉鎷伴柣搴㈩問閸犳牠鈥﹂悜钘夌畺闁靛繈鍊栭崑鍌炲箹鏉堝墽绉垫俊鎻掔埣閺岋綁鎮㈤崫銉х厐闂備礁搴滅徊浠嬫偩閻戣姤鍋ㄩ柛娑橈攻濞呫垽姊洪懞銉冾亪藝閽樺锟芥帗绻濆顓犲帾闂佸壊鍋呯换鍌炲汲濞嗘挻鐓曢柡鍐挎嫹婵ǜ鍔庡Σ鎰板箳閺冨倻锛滃┑顔筋殔閻楁劙鏁撻崐鐔哥《闁跨喕濮ら鏍窗閺嶎厸锟斤箓鎮滈挊澶嬬�梺鐟板⒔缁垶宕戦幇鐗堢厾缁炬澘宕晶鍓х磼閸楃偛绾х紒缁樼箞閹粙妫冨ù韬插灲閺岋綀绠涢弬鍨懙閻庤娲樼换鍫濐嚕娴犲鏁冮柕鍫濇祩濡叉悂姊绘担绋款棌闁稿鎳愰幑銏狀吋閸涱偓鎷烽幒鎾剁瘈婵﹩鍘鹃崢顏堟⒑閸撴彃浜濈紒璇插�块、妤呭閵忋垻锛滈梺鐓庢憸閺佺煤閹绢喗鐓涚�癸拷閿熶粙宕伴弽褏鏆︽繛鍡樻尭鍥撮梺绯曞墲椤ㄥ繑瀵奸敓锟� "+colorpos1);
				return true;
			}
		}.submit();
		
		
	}
	
	/**
	 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹哄秶鍔嶆い鏂挎喘濮婄粯鎷呯憴鍕哗闂佺瀛╁钘夌暦濠婂啠鏋庨柟瀛樼箥濡粓鎮峰鍛暭閻㈩垱顨婇幃鈥斥槈濮樼偓瀚规鐐茬仢閸旀艾螖閻樿櫕鍊愰柣娑卞櫍瀵粙顢橀悢鍝勫籍闂備礁鎲￠崝锔界濠婂牆鍑犳繛鎴欏灪閻撴盯鎮橀悙鎻掆挃婵炲弶娼欓埞鎴︽晬閸曨偄骞嬫繝娈垮櫙閹风兘姊洪弬銉︽珔闁哥喐濯介妵鎰版晲婢跺鎷绘繛杈剧到閹芥粎绮旈悜妯镐簻闁靛闄勫畷宀�锟借娲橀〃鍛扮亽闂佹儳绻楅～澶娾枔妤ｅ啯鈷戠紓浣姑悘鈺呮煟閳╁啯顥堢�殿噮鍋婂畷鍫曨敆娴ｅ搫骞楅梻浣哥秺閸嬪﹪宕㈤崗鍏煎弿闁稿瞼鍋為悡鏇㈠箹濞ｎ剙濡洪柟鏌ョ畺閺屽秹濡烽婊呮殼闂佺娅曢〃濠囥�佸☉銏℃櫜闁哥姵澹嬮弲婊呮崲濠靛鍋ㄩ梻鍫熺◥缁爼姊哄Ч鍥у闁稿繑锕㈠顐﹀箻缂佹ê娈熼梺闈涱槶閸庨亶锝為鍫熲拺闁硅偐鍋涢敓鑺ョ墪鐓ら柡宥庡幗缁犳帡姊绘担渚劸缂佺粯鍔欏畷銉э拷锝庡枛绾炬寧淇婇妶鍛櫤闁绘挻绋戦湁闁挎繂鎳忛幉鎼佸冀閿熺姵鈷戦梺顐ｇ〒閳规帡鏌涢弬璺ㄧ劯闁挎繄鍋涢…銊╁醇濠靛棜锟藉灝鈹戞幊閸娧囧箯妞嬪海纾奸柣妯垮皺缁夌儤鎱ㄦ繝鍐┿仢鐎规洏鍔嶇换婵嬪礃閵娿劍鏆遍梻鍌欑閹测�愁潖瑜版帒鍨傞柣銏ゆ交缂嶆牠鐓崶銊﹀婵炲樊浜堕弫鍌炴煕閺囥劌浜為柣娑掓櫅閳规垿鎮╅崹顐ｆ瘎婵犳鍠栭顓㈡晸閼恒儱鍤柛娆忓暙閻ｇ兘鎼归銈庢祫闁诲函缍嗛崑锟介柟閿嬫そ濮婃椽宕ㄦ繝鍐ㄧ）闁诲繐绻戦悷鈺佺暦閵忕姭妲堥柕蹇ョ磿閸橀亶姊洪棃娑辩劸闁告柨顑夊畷銉╊敃閵堝洨锛滃銈嗘⒒閳峰牓宕曡箛鏂讳簻闁规儳鍟块幃鎴狅拷鍨緲鐎氼厾鎹㈠┑瀣闂傚牊绋掗弳顖涚節閻㈤潧孝闁汇儱顦靛鍫曞礌閳╁啫顏堕悷婊勬閻涱喛绠涘☉娆忥拷濠氭煠閹帒鍔ら柛娆忓暣濮婃椽宕ㄦ繝鍌毿曟繛瀛樼矋缁挸顕ｇ粙搴撴闁靛骏绱曢崢鎼佹倵閻у憡瀚归梺璺ㄥ枍缁瑥鐣锋导鏉戝唨鐟滃繘寮抽敂鐣岀瘈濠电姴鍊归敍宥嗕繆閹绘帇鍋㈡慨濠冩そ楠炴牠鎮欑拠褎瀚圭憸鏃堢嵁韫囨稒鐓ラ悗锝傛櫇缁犳岸姊虹紒妯哄Е濞存粍绮撻弫鎾绘嚍閵夈儳浼岄悗瑙勬礃濞叉鎹㈠┑鍡╂僵妞ゆ帒鍋嗛崬鐢告⒒娴ｈ姤纭堕柛锝忕畵楠炲繘鏁撻敓锟�
	 * @param petId
	 * @param colorpos
	 * @return
	 */
	public boolean isCanUseColor(int petId,int colorpos){
		Map<Integer, PetAttr> confs = ConfigManager.getInstance().getConf(PetAttr.class);
		if (confs != null) {
			PetAttr conf = confs.get(petId);
			if (conf != null) {
				String str=conf.getColorselect();
				if(str==null){
					return false;
				}
				String pos[]=str.split(";");
				if(pos==null){
					return false;	
				}
				for(String p:pos){
					String pos1[]=p.split(",");
					if(colorpos==Integer.parseInt(pos1[0])){
						return true;
					}
				}
				
			}
		}
		return false;
	}
	
	

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 786545;

	public int getType() {
		return 786545;
	}

	public int petkey; // 宠物ID
	public int colorpos1; // 部位1
	public int colorpos2; // 部位2

	public CReqUsePetColor() {
	}

	public CReqUsePetColor(int _petkey_, int _colorpos1_, int _colorpos2_) {
		this.petkey = _petkey_;
		this.colorpos1 = _colorpos1_;
		this.colorpos2 = _colorpos2_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(petkey);
		_os_.marshal(colorpos1);
		_os_.marshal(colorpos2);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		petkey = _os_.unmarshal_int();
		colorpos1 = _os_.unmarshal_int();
		colorpos2 = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CReqUsePetColor) {
			CReqUsePetColor _o_ = (CReqUsePetColor)_o1_;
			if (petkey != _o_.petkey) return false;
			if (colorpos1 != _o_.colorpos1) return false;
			if (colorpos2 != _o_.colorpos2) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += petkey;
		_h_ += colorpos1;
		_h_ += colorpos2;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(petkey).append(",");
		_sb_.append(colorpos1).append(",");
		_sb_.append(colorpos2).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CReqUsePetColor _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = petkey - _o_.petkey;
		if (0 != _c_) return _c_;
		_c_ = colorpos1 - _o_.colorpos1;
		if (0 != _c_) return _c_;
		_c_ = colorpos2 - _o_.colorpos2;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

