
package fire.pb.mission;
import fire.pb.battle.PSendCameraUrl;


// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CActiveMissionAIBattle__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CActiveMissionAIBattle extends __CActiveMissionAIBattle__ {
	@Override
	protected void process() {
		// protocol handle
		final long roleid = gnet.link.Onlines.getInstance().findRoleid( this );
		if ( roleid < 0 )
			return;
		final MissionConfig conf = MissionManager.getInstance().getMissionConfig( missionid );
		if (conf == null)
			throw new NullPointerException( "濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓哄┑鐐叉缁绘帡宕濋幘顔解拺閺夌偞澹嗛ˇ锔姐亜閹存繃顥㈠┑锛勬暬瀹曠喖顢涘槌栧晪闂佽崵濮惧▍锝夊磿閵堝鍊靛Δ锝呭暞閳锋垿鏌涘☉姗堝姛闁瑰啿鍟扮槐鎺旂磼濡搫顫戦梺璇茬箰閸熸潙顫忓ú顏勭閹艰揪绲块悾鐢告⒑閻熸澘鏆遍梺甯到椤曪綁骞栨担鑲澭冾熆鐠轰警鍎戦柛妯烘啞缁绘稒娼忛崜褍鍩屾繝銏㈡嚀閿曨亜鐣烽弴銏犵闁挎梻鏅崢鐢告⒑閸︻厾甯涢悽顖涱殜瀹曨垶鎮欓悜妯煎幍濡炪倖鐗楃粙鎺椝夐崼婵冩斀闁斥晛鍟崐鎰攽閿涘嫭鐒挎い锔芥尦閺屸剝寰勬径宀�鐓撳┑顔硷功缁垳绮悢鍏兼櫢闁芥ê顦介悞鐣屾喐閹寸偞娅犳繝闈涱儐閳锋垿鏌涘┑鍡楊仾闁革綀娅ｇ槐鎺楊敊閼恒儱纰嶉梺浼欑悼閸忔﹢鐛崶顒�绾ч悹渚厛閸炲爼姊虹涵鍛棈闁规椿浜炲濠囧锤濡ゅ﹥鏅╅梺鍝勬储閸ㄦ椽宕愰悽鍛婄厽鐟滃秹骞夐敍鍕舵嫹濮橆剛绉洪柡宀嬬稻閹棃顢涘鍛咃綁姊虹粙娆惧剰閻庢矮鍗抽妴渚�寮崼鐔告闂佽法鍣﹂幏锟�=" + missionid + "闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽幃娆戞嫚瑜庣�氬湱鎲搁悧鍫濈瑨缁炬儳娼￠弻鐔猴拷鐢殿焾鏍￠梺鍝ュУ閸旀瑩寮婚敐鍛傛棃鏁撴禒瀣亱闁糕剝鐟х粻鏃堟煙閻戞ɑ鈷掔痪鎯с偢閺屻劑鎮㈢拠娈嬫挾锟藉灚婢樼�氼剟鎮惧┑鍫嫹閿濆骸浜滄い蹇撶埣濮婅櫣鎷惔鈥虫殲闁哥喓鍋ら幃妤�顫濋鍌溞ㄥ┑顔硷龚濞咃綁骞戦崟顖毼╅柕澶涘閿熷�熸缁辨挻绗熼崶褎鐏嶉梺鑽ゅ暱閺呮盯顢氶敐澶樻晝闁挎洩鎷风紒鐘哄吹缁辨挻鎷呮慨鎴簻閳绘捇鎮㈤崗灏栨嫼闂傚倸鐗婇崘鑽ゆ閿熺姵鐓曟繛鎴濆船楠炴牜绱撳鍛棦婵﹤顭峰畷鎺戔枎閹搭厽袦闂備胶顢婇婊呮崲濠靛违闁告劦鍠栧婵嬫煛婢跺鐏╅柡灞界墦濮婅櫣绮旈崱妤�顏存繛鍫熸礋閺屾稓锟斤急鍕彋闂佸搫鐭夌紞渚�鐛�ｎ喗鏅查柛鈾�鏅滈ˉ澶嬩繆閻愵亜锟姐倝宕戦崟顖氱疇婵鎷风�殿喖顭峰鎾閻樿鏁规繝鐢靛█濞佳兠洪妶澶婄柧闁汇垹鎲￠崑鈩冪節婵犲倸顏い銉ョ墢閿熻姤顔栭崰娑㈩敋瑜旈崺銉﹀緞閹邦剦娼婇梺缁樕戦悧鎾诲礉閹达箑钃熼柡鍥风磿閻わ拷婵犵數濮撮崐鎼佸煕婢舵劖鈷戠紓浣诡焽缁犳牠鏌ｅΔ鍐ㄐ㈡い顐㈢箰鐓ゆい蹇撳椤斿洭鏌熼懝鐗堝涧缂佹彃顭烽弫鎾绘嚍閵夈儲璇為梺鍝勬湰缁嬫捇鏁撻弬銈囩У闁稿妫楃叅闁圭虎鍠楅悡鍐煏婢舵盯妾い銉ョ墢閿熷�燁潐濞叉﹢鏁冮姀銈冿拷浣糕枎閹惧啿绨ユ繝銏ｎ嚃閸ㄦ澘煤閿曞倹鍋傞柡鍥ュ灪閻撳啴鏌嶆潪鎵槮鐎殿喖鐡ㄩ幈銊ノ熼幐搴ｃ�愮紓浣哄閸ㄥ爼寮婚敐澶嬪亜缂佸顑欏Λ搴ㄦ⒑閻氬瓨瀚规繛瀵稿Т椤戝棝鎮￠崘顔界厪濠㈣泛鐗嗛崝姘舵煛閸℃矮鍚紒杈ㄥ浮閹亜鈻庤箛鏂款槱闂佺顑冮崝宥夊Φ閸曨垰鍐�闁靛ě鍛帎濠电偛顕慨宥夊炊閵娧冨箞闂備礁婀遍崕銈夊箰缁嬫５褰掝敊閹惧懏瀚归悷娆忓缁�锟介梺闈涚墛閹倿鐛崘顔碱潊闁绘ê鐏氬▓婵嬫⒑鐟欏嫷鍟忛柛鐘虫礈閼洪亶寮堕幋鏃�鏂�闂佺粯蓱椤旀牠寮冲鍛＜閺夊牄鍔嶇粈瀣拷瑙勬礃閸ㄥ潡鐛锟藉畷婊勬媴閾忚娈介梻鍌欑濠�閬嶅Υ鐎ｎ喖绠柨鐕傛嫹" );
		if(activetype == 0){
			if (conf.exeIndo.share == 0) {
				fire.pb.team.Team team = fire.pb.team.TeamManager.selectTeamByRoleId(roleid);
				if (team != null){
					fire.pb.talk.MessageMgr.sendMsgNotify(roleid, 174001, null);
					Module.logger.info("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂啰绠荤�殿喗濞婇弫鍐磼濞戞艾骞楅梻渚�娼х换鍫ュ春閸曨垱鍊块柛鎾楀懐锛滈梺褰掑亰閸欏骸鈻撳鍫熺厸鐎癸拷閿熶粙宕伴弽顓犲祦鐎广儱顦介弫濠勭棯閹峰矂鍝烘慨锝咁樀濮婄粯鎷呮笟顖滃姼濡炪倖鍨堕崹褰掑箲閵忕姭鏀介悗锝庝海閹芥洟姊洪棃娴ュ牓寮插☉姘卞暗鐎广儱顦伴悡鏇㈡倶閻愭彃鈷旈柣鎿冨灠椤法鎲撮崟顒傤槹濠殿喖锕ュ钘夌暦椤愶箑绀嬫い鎺戭槹閿涗胶绱撻崒娆戣窗闁哥姵顨婇獮鎴﹀炊瑜滈崵鏇炩攽閻樺磭顣查柡鍛絻椤法鎹勯悮瀛樻暰濡炪們鍎茬换鍫濐潖濞差亜鎹舵い鎾楀懎濮奸梺璇插缁嬪牓寮查悩鑼殾濞村吋娼欑粻娑㈡煟濡わ拷閻楀啴骞忛搹鍦＝闁稿本鐟ч崝宥嗐亜椤撶偞宸濈紒顔款嚙椤繈顢橀悩娈垮晭濠电姰鍨煎▔娑㈩敄閸ヮ灐娲箻椤旂晫鍘遍梺鍐叉惈閸燁偅绂掓潏顭戞闁绘劕妯婇崕鏃堟煛娴ｇ鏆ｉ柡浣规崌閹墽浠︾粵瀣棥濠电娀娼ч崐鎼佸箟閿熺姵鍋傞柕澶嗘櫆閻撴盯鏌涢幇鈺佸濠㈣泛瀚妵鍕Ψ閵夘喗效闂侀潧娲ょ�氼垳绮诲☉銏犖ㄩ柨鏇嫹妞ゅ骏鎷�" + roleid + "]濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁橈耿瀵鏁愭径濠勵吅濠电姴鐏氶崝鏍礊濡ゅ懏鈷戦悹鎭掑妼閺嬫瑦淇婇銏狀伃鐎规洘鍔欏畷鐑筋敇閻樼數鍔归梻浣告贡閸庛倕螞閹达箑绠柣鎴ｅГ閺呮煡骞栫划鐧告嫹閼碱剙鍤┑鐘垫暩閸嬫盯骞婂畝鍕瀭闁芥ê顦藉鏍ㄧ箾瀹割喕绨奸柛銈呯Ч閺屾洘寰勬繝鍌涚亾婵炲瓨绮犳禍锝呂涢悢濂夋富闁靛牆妫涙晶閬嶆煕鐎ｎ偆鈽夐弫鍫ユ煛鐏炶鍔氱紒鐙欏洦鐓曟い鎰剁悼閳藉鈹戦敍鍕电劸闂囧绻濇繝鍌氼伀闁活厽甯￠弻锝夊箼閸愩劋鍠婇悗瑙勬礉閸╂牠藝閻楀牊鍎熼柍钘夋濞堝ジ姊婚崒姘拷椋庢閿熺姴鐭楅幖娣妼閸ㄥ倿鏌涢锝嗙闁藉啰鍠栭弻銊モ槈濡警浠瑰┑鐐茬焾娴滎亪寮诲☉銏犵婵°倧鎷烽柣顒�鍚嬬�靛ジ宕堕埡鍐紳闂佺鏈悷銊╁礂鐏炶В鏀芥い鏃傚亾閺嗩剟鏌熼姘伃妞ゃ垺鐩幃娆撴濞戞哎鍋婂┑鐘殿暯濡插懘宕归悽绋跨；闁归偊鍘规禒姘舵煙閹澘袚闁稿鍓濈换娑㈠幢濡ゅ啰顔囧銈呯箚閺呮粓濡甸崟顔剧杸闁规崘娉涢悡鐔封攽椤旂》鏀绘俊鐐舵閻ｅ嘲顭ㄩ崼鐔锋濡炪倖甯幏鐑芥偨椤栨ê鍔︽慨濠冩そ瀹曨偊濡烽妷鎰剁悼閿熺晫娅㈤幏椋庣磼鐎ｎ偒鍎ラ柛銈嗘礋閺岀喖骞嗛弶鍟冩捇鏌￠崨顔剧疄闁哄本绋撴禒锕傚礈瑜嬮敓鑺ュ浮閺屾稑螣閸︻厾鐓撳┑顔硷龚濞咃絽鈽夐悽绋垮窛妞ゆ柨鍚嬮柨顓犵磽閸屾瑧鍔嶉柣鎿勭磿缁寮介渚婄磽婵犵數濮伴崹濂稿春閺嶎厼绀夐柡鍥╁Х娑撳秵鎱ㄥΟ鍨厫闁绘挾鍠栭弻锟犲磼濮樺彉铏庨梺璇″枟閸ㄥ潡寮诲☉姘炬嫹閿涘崬鍟埛澶岀磽娴ｈ櫣甯涚紒璇插暟閹广垹鈹戠�ｎ亞锛滃┑顔斤供閸樹粙顢欏鍥╃＝闁稿本鐟ㄩ崗灞解攽椤旇姤灏﹂柍銉畵閹粓鎸婃径搴㈡啺闂備胶绮濠氬煕閸儱鏋佺�广儱妫欓崣蹇斾繆椤栨哎浠掗柛姘煎亜闇夐柣鎾冲閸犳ɑ鎱ㄦ繝鍛仩闁圭懓瀚版俊鎼佸Ψ閿旀拝鎷锋ィ鍐┾拺闁告繂瀚烽崕鎾讹拷瑙勬礈閺佺危閹扮増鍊烽柛婵嗗閼板灝鈹戦悙鏉戠仸妞ゎ厼娲幃浼村Ψ閵夈垺鏂�闁圭儤濞婂畷鎰板即閵忕姷鐤囬柟鍏肩暘閸斿秹宕戦崒鐐寸厸闁搞儯鍎遍悘顏堟煟閹惧鎳囬柡宀嬬秮楠炲鎮滈崶锔捐繑婵犵數鍋涢悧濠偯洪悢鐓庤摕闁挎繂顦粻濠氭倵濞戞瑯鐒芥い锔垮嵆濮婃椽宕崟顓犱紘闂佸摜濮甸悧鏇㈩敋閿濆閱囬柡鍥╁仜閻庮厼顪冮妶鍡橆梿婵☆偄瀚伴弫鎾绘寠婢跺宕崇紓浣介哺閹稿骞忛崨瀛橆棃婵炴垶锕╅悗铏繆閻愵亜锟姐倝宕㈡ィ鍐ㄧ婵☆垯璀﹂崵鏇炩攽閻樺磭顣查柡鍜佸墴閺屾盯寮撮垾宕囧帿闁诲孩鑹剧紞濠囧蓟閵娿儮鏀介柛鈩冧緱閿熻姤顨呴湁婵犲﹤瀚粻鐐烘煛瀹�瀣М妤犵偞锕㈠畷锟犳倷閹绘崼鏇㈡⒒娴ｅ憡鎯堥柤娲诲灣缁棃宕奸弴鐐电枀闂佸湱铏庨崰鏍矆鐎ｎ偁浜滈柟鎵虫櫅閿熻姤鎸惧Σ鎰攽閸ワ妇绠氶梺缁樺姦娴滄粓鏁撻懞銉ョ伌鐎规洜鎳撶叅妞ゅ繐鎳庢禒顓㈡⒑閸愬弶鎯堥柟鍐叉捣缁鎮╃紒妯煎幗闂佸綊鍋婇崜姘跺箚閸儱鑸规い鏍仦閳锋垿姊婚崼鐔剁繁婵☆垰鐗撻弻娑㈠Ω閵娿倕鎯堥梺璺ㄥ枙婵倝鎳濋崜褏绀婂┑鐘叉搐閽冪喖鏌ｉ弬鍨倯闁绘帊绮欓弻銊╁即椤忓懎顏堕柣搴㈩問閸犳岸宕戦幘鑸靛床婵炴垯鍨归柋鍥ㄧ節婵犲倹鍣介柣鎾存崌濮婃椽宕崟顓犲姽缂傚倸绉崇欢姘舵偘椤旀拝鎷烽敐搴濈按闁猴拷娴犲鐓曢柕澶嬪灥閺堫剝鈪搁梻鍌氬�峰ù鍥敋瑜忛敓鑺ョ▓閺呮盯锝炲┑瀣╅柍杞拌兌閻ゅ洭姊虹憴鍕妞ゆ泦鍥ㄥ亗婵鎷烽柡宀�鍠愬蹇斻偅閸愨晩锟藉秹姊虹粙鍖″姛闁稿繑锕㈠濠氬Χ婢跺﹦顔愭繛杈剧秬椤鏌ㄩ鐐╂斀闁绘劖娼欏В鍡涙煕濞戝崬鐏ｉ柨娑欑箞濮婅櫣绮欓幐搴㈡嫳濠殿喗菧閸斿矂鎯冮鍌滅＝闁稿本鐟︾粊浼存煕閳哄倻澧紒宀勪憾瀹曨偊宕熸惔銏㈡创濠殿噯鎷烽梺闈涚墕濡矂骞忓ú顏呪拺闁煎鍊曢弸鎴炵節閵忊槄鑰块柛鈺傜洴瀵噣宕掑鍜冪床婵＄偑鍊栧ú鏍箠鎼淬劍鍊堕柨鏃�鎷濋幏椋庢喆閸曨剛顦ㄩ梺鎼炲妼濞尖�愁嚕椤愶箑绠荤紓浣姑禍褰掓倵鐟欏嫭绀�婵炲眰鍊濋悰顔碱吋婢跺鎷绘繛杈剧导鐠�锕傚绩閻楀牄浜滄い鎰╁焺濡拷閻庤娲樼换鍫ュ极閸愵喖纾兼慨姗嗗墯閸庮亝绻濋悽闈涗粶婵☆偅鐟╁畷褰掑捶椤撶儐妫滄繝闈涘�搁幉锟犳偂閻斿摜绠鹃柛鈩兠慨澶愭煙閸愭彃鏆炵紒缁樼〒閹风姾顦撮柣锝囨暬閺岀喖顢氶崱娆戠槇閻庤娲橀敃銏ゃ�佸▎鎾村仼閻忕偠妫勭粻鐐测攽閻樺灚鏆╁┑鐑囨嫹濠电偘鍖犻崗鐐☉铻栭柛婊�鐒﹂弲婊堟⒑閸愬弶鎯堥柟鍐茬箻閹繝濡烽埡鍌滃幗闂佸搫鍟崐鑽ゆ暜濞戞瑣浜滈柕澶堝労濡插綊鏌曢崶褍顏い銏★耿閹晠骞撻幒鎴狀吅闂佽姘﹂～澶娒哄Ο渚富闁兼亽鍎扮换鍡涙煟閹达絽袚闁哄懏绻堥弻銊╂偄閻戞ɑ鐝┑鐐叉閸ㄤ粙骞冨▎鎾村�绘俊顖滃帶楠炲秹姊婚崒娆戣窗闁告瑥绻掔划濠氬箣閿旀儳绁﹀┑顔筋殣閹风兘鏌＄仦鍓р槈閾伙綁鏌涘┑鍡楊伂闁糕晝鍋ゅ铏癸拷鍦濞兼劙鏌涢妸銉﹀仴妤犵偛鍟埢搴ㄥ箻瀹曞洨鍘┑鐘灱閸╂牞鎽銈冨劵缁茶法妲愰幘璇茬＜婵炲棙甯掗崢锛勭磽娓氬洤娅橀柛銊ㄦ硾閻ｇ柉銇愰幒鎾虫畱濡炪倖鐗楅崘鑽ゆ閹剧粯鈷掗柛灞剧懅缁愭梹绻涙担鍐叉噺瀹曟煡鏌涢埄鍐檨闁哄懏鎮傞弻娑欑節閸曨偅鐎婚梺姹囧姀濞咃絿妲愰幒妤佸亹閻庡湱濮撮ˉ婵嗩渻閵堝簼绨婚柛鐔风摠娣囧﹪宕奸弴鐐茶�垮┑掳鍊ч幏閿嬨亜椤愩垺鍠樻慨濠冩そ楠炴牠鎮欓幓鎺濈�崇紓鍌氬�哥粔鎾晝閵堝鏁嬮柨婵嗩槸缁狀噣鏌ら幁鎺戝姕婵炲懏绮嶇换婵嬪閿濆棛銆愬銈嗗灥濞差厼鐣烽姀銈嗩棃婵炴垼椴哥�靛矂姊洪棃娑氬婵☆偅鐟╅崺娑㈠箳濡や胶鍘搁梺鍛婄矆缁�浣圭閻楀牜娈介柣鎰嚋闊剛锟借娲栭悥濂搞�佸Δ浣瑰闁告繂瀚粻銉モ攽閿涘嫬浜奸柛濠冪墪铻炲ù锝呮憸閺嗭箓鏌ｉ姀鐘冲暈闁稿孩顨嗙换娑㈠幢濡闉嶉梺缁樻尰閻燂箓濡甸崟顖氱睄闁搞儜鍐╁劒闂備焦妞块崢浠嬫偡閳哄懎钃熼柣鏃傗拡閺佸﹪鏌ゆ慨鎰拷妤呮偂閹炬枼鏀介柍钘夋娴滄粓鏌涢悤浣镐喊闁糕斂鍎插鍕箾閵忋垹鏋涢柟铏墵閸╋繝宕掑顓犲讲闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ょ紓宥咃躬瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁绘劦鍓欓崝銈囩磽瀹ュ拑韬�殿喖顭烽幃銏ゅ礂鐏忔牗瀚介梺璇查叄濞佳勭珶婵犲伣锝夘敋閿熻棄顫忛崫鍕懷囧炊瑜濋幏鐑藉Χ婢跺﹦鐛ラ梺鍝勭▉閸樼晫绮婚幒妤佲拻濞达絼璀﹂悞鍓х磼缂佹ê濮嶇�规洏鍎抽敓鏂ょ秵閸撴稓绮堟繝鍥ㄧ厵閻庣數顭堝暩缂佺偓鍎抽妶鎼佸蓟閻斿吋鐒介柨鏇嫹鐎殿喚鍋撶换娑㈠醇閻旇櫣鐓佸銈冨妸閸庣敻骞冨▎鎴嫹閻㈡鐒鹃柍顏勭秺閺屻倝骞愭惔鈥愁潔闂侀潧娲ょ�氫即鐛幒妤佸�烽柡澶嬪焾娴兼挻绻濋悽闈浶ユい锝勭矙閺佹捇鎮剧仦鎴掔紦闂佺顑冮崹浠嬪蓟閳ュ磭鏆嗛悗锝庡墰琚︽俊鐐�戦崹娲晝閵忋倕绠栭柕鍫濇婵挳鏌涢敂璇插箺婵犮垺甯″濠氬磼濞嗘埈妲梺鍦拡閸嬪﹪骞婇悢纰辨晬婵犲﹤鎳愰悡瀣偡濠婂懎顣奸悽顖涘浮瀵即濡烽埡鍌滃帗闂佸疇妗ㄧ粈渚�寮抽悙娴嬫斀妞ゆ牗绋掔亸锕傛煛鐏炲墽鈽夐柍钘夘槸椤粓宕奸悢鍛婃瘞濠碉紕鍋戦崐鏍蓟閵娧呯煋闁割煈鍋嗛埞宥呪攽閻樺弶澶勯柛濠囨敱閵囧嫯绠涢幘鎰佷紥闂佸綊顥撻崗姗�鐛崶顒�绾ч悹鎭掑妽閻擄絾绻濋悽闈涗沪闁搞劌鐖奸弫鍐煛閸涱厼鎯為梺鍝勬储閸ㄦ椽鎮￠弴鐔翠簻闁规澘澧庣粙鑽ょ磼閿熶粙鏁撻懞銉ょ箚婵°倧鎷烽柟铏～蹇撁洪鍕獩婵犵數濮撮崯顐λ囬埡鍛拺闁硅偐鍋涙俊钘夘熆閻熺増顥犻柛鎺撳笧閹风姴霉鐎ｎ偒娼旈梻渚�娼ф蹇曟閺囥垹鍌ㄦい蹇撴噽缁★拷闂佹眹鍨藉褎绂掑鍫熺厽闊洦姊荤粻鐐碉拷瑙勬礃缁诲倿锝炲┑瀣殝闁汇垽娼х敮妤呮煟鎼达絾鍤�閻庢矮鍗冲畷鎴炵節閸嬬晫鍠栭弫鎾寸鐎ｎ偀鎷洪柣鐘叉礌閿熷�熸珪閻忓秴顪冮妶鍐ㄥ闁绘鎹囬悰顔藉緞閹邦剛顔掑銈嗘閸嬫劙藝閺夋娓婚柕鍫濇缁楁帡鏌涚�ｎ亝顥滈崡鍗灻归悡搴ｆ憼闁抽攱甯掗湁闁挎繂鐗婇鐘绘偨椤栨稓娲撮柡宀�鍠撻崰濠囧础閻愭壆鏁栭梻浣烘嚀缁犲秹宕硅ぐ鎺戠厴闁硅揪绠戦獮銏ゆ煃鏉炴壆鍔嶆い鎾虫健濮婃椽鎳￠妶鍛呫垺绻涚拠褍顩紒顔硷躬瀵爼骞婄粵鍦М鐎规洖銈告俊鐑芥晜閹冨闂傚倸顭崑鍕洪敃锟界叅闁哄诞鍕槑闂傚倸鍊烽悞锕�顪冮崸妤�纾婚柛鏇ㄥ弿閹峰嘲顫濋鐔哄嚒濡炪値鍋勭换鎰弲濡炪倕绻愰幊搴㈢椤撱垺鈷掑〒姘搐瀵法绱掗悩鍐茬仴闁崇粯鎹囧畷濂稿即閻斿弶瀚肩紓鍌欑椤戝棝顢栧▎鎾崇？闁硅揪闄勯悡鏇㈡倵閿濆啫濡奸柨鐔诲Г濞茬喖骞冩ィ鍐╁�荤紒娑橆儐閺咁剟姊虹紒妯哄闁宦板妼閳诲秹濮�閵堝棌鎷洪柣鐘充航閸斿苯鈻嶉幇鐗堢厵闁告垯鍊栫�氾拷" + missionid + "]闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽幃娆戞嫚瑜庣�氬湱鎲搁悧鍫濈瑨缁炬儳娼￠弻鐔猴拷鐢殿焾鏍￠梺鍝ュУ閸旀瑩寮婚敐鍛傛棃鏁撴禒瀣亱闁糕剝鐟х粻鏃堟煙閻戞ɑ鈷掔痪鎯с偢閺屻劑鎮㈢拠娈嬫挾锟藉灚婢樼�氼剟鎮惧┑鍫嫹閿濆骸浜滄い蹇撶埣濮婅櫣鎷惔鈥虫殲闁哥喓鍋ら幃妤�顫濋鍌溞ㄥ┑顔硷龚濞咃綁骞戦崟顖毼╅柕澶涘閿熷�熸缁辨挻绗熼崶褎鐏嶉梺鑽ゅ暱閺呮盯顢氶敐澶樻晝闁挎洩鎷风紒鐘哄吹缁辨挻鎷呮慨鎴簻閳绘捇鎮㈤崗灏栨嫼闂傚倸鐗婃笟妤�危閸洘鐓曢幖绮癸拷瀹犲煘閻炴碍鐟╅弻娑㈩敃閻樻彃濮曢梺鎶芥敱閸ㄥ潡寮诲☉妯锋婵鐗嗘慨娑㈡⒑閻熸澘鏆遍柛鐔告尦瀵鈽夐姀鈥充簽婵炶揪缍侀弲鏌ュ窗婵犲洦鈷戦悹鍥ｏ拷铏彎缂備胶濮甸悧鐘荤嵁閸愵喖閿ゆ俊銈咃攻閺咁剙鈹戦埥鍡楃仴妞ゎ偄顦甸幆鍫ｇ疀濞戞瑢鎷绘繛杈剧到閹诧紕鎷归敓鐘崇厱閹煎瓨绋戦敓鑺ヮ殜楠炴垿濮�閵堝懐顦ㄥ銈嗘閸嬫劙寮昏濮婃椽妫冨☉姘辩杽闂佺锕ラ悧鐘诲春濞戙垹绠ｉ柨鏃傛櫕閸樺崬鈹戦悙鏉戠仸闁挎洦鍋婂銊ф嫚瀹割喚鍞甸柣鐘叉惈閹碱偊顢旈銏＄厸閻忕偛澧介妴鎺楁煥閻斿憡鐏紓宥呮缁傚秴鈹戠�ｎ亜鎯為梺鎼炲労閸撴氨锟界數濞�閺岋綁寮崹顔藉�梺缁樻尪閸庣敻寮婚敐澶婂嵆闁绘劘顕滈幏鐑藉捶椤撱劍瀚规慨妯煎亾鐎氾拷?,闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ剙浠遍柟顔ㄥ洦鍋愭慨鐟版祫閹烽攱绗熼敓钘夘嚕閹绢喖顫呴柍鈺佸暞閻濇洟姊绘担钘壭撻柨姘亜閿旇鏋ょ紒杈ㄦ瀵挳鎮欓埡鍌涙澑闂備胶绮敋闁诲繑宀稿鎶藉煛娴ｅ弶鏂�濡炪倖妫侀崑鎰板箺閻樼粯鍊甸梻鍫熺◤閸嬨垻锟借娲忛崝鎴︺�佸Δ鍛闁稿繒顑曟禒銏狀渻閵堝啫鐏俊顐㈠暙閻ｇ兘鎮㈢喊杈ㄦ櫍閻熸粌绉归獮鍐醇閵夛腹鎷婚梺绋挎湰閻熴劑宕楀畝锟界槐鎺楊敋閸涱厾浠搁梺鐐藉劵缁犳挸鐣烽崼鏇ㄦ晢闁跨喍绮欏鍛婄瑹閿熶粙寮婚悢鍏尖拻閻庣數顭堟俊浠嬫⒑缁嬫鍎岄柡鍛█瀵濡舵径濠佺炊闂侀潧顧�闂勫嫬袙閸曨厾纾藉ù锝呭级椤鏌熸搴″幋婵﹦绮粭鐔兼晸閽樺鐒界憸搴ㄣ�冮妷銊х杸闁哄洨鍋熺粵蹇旂箾鐎电孝妞ゆ垵妫濆畷鎴﹀磼閻愬鍘甸梺瑙勵問閸犳牠銆傛總鍛婄厽闁规儳鐡ㄧ粈瀣煛瀹�瀣瘈鐎规洘锕㈤獮鎰償閳藉棔绱︽繝鐢靛Х閺佹悂宕戝☉姗嗗殨闁告挷绀侀崹婵嬪箹濞ｎ剙濡肩紒锟介崱娑欑厵闁绘垶锕╁▓鏃堟⒑閸楃偞鍠橀柡灞炬礃瀵板嫰宕煎┑鍡椥戞俊鐐�ч梽鍕熆濮楋拷閳ユ棃宕橀鍢壯囨煕閳╁啰鎳冩い顐庡懐纾藉ù锝呭閸庢劙鏌熼悷鐗堟悙闁伙絿鍏樻慨锟介柕鍫濇閸斿爼鎮楅獮鍨姎婵☆偄鐭傞獮蹇撁洪鍛幗闁硅偐琛ラ崜婵堟嫻閳ユ枼鏀芥い鏃傚亾閺嗩剟鎸婇悢濂夌唵閻犺桨璀﹂崕搴ｇ磼鐠囧弶顥為柕鍥у楠炲洭宕滄担鐩掞絽鈹戦悙鑼缂侇喗鎹囧濠氭晲閸涱亝顫嶉梺鍛婎殘閸嬬偤鎮橀崼銉︾叄濞村吋鐟х粔顕�鏌＄仦璇诧拷鏇㈡箒闁诲函缍嗛崑鍛存偟閺囥垺鈷戦柟绋挎捣閳藉绱掔紒妯忣亪锝炶箛娑欐優閻熸瑥瀚弸鍌炴⒑閸涘﹥澶勯柛瀣閹便劑濮�閵堝棌鎷洪梺鑽ゅ枑濠㈡﹢寮虫潏鈺冪＜缂備焦锚濞搭噣鏌℃担瑙勫磳闁瑰磭鍋ゆ俊鐤槻闁哄棴绻濆娲偡閺夋寧顔�闂佺懓鍤栭幏锟�" );
					return;
				}
			}
			
			if ( !fire.pb.map.SceneNpcManager.checkDistance( npckey, roleid ) )
				return;
			
			final int npcid = fire.pb.npc.NpcServiceManager.getNpcIDByKey( npckey );
			if (npcid == -1)
				return;
		
			MissionColumn sml = new MissionColumn( roleid, true );
		
			RoleMission mission = sml.getMission(missionid);
			if ( mission == null ) {
				Module.logger.debug( "婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄闁挎繂妫Λ鍕⒑閸濆嫷鍎庣紒鑸靛哺瀵鎮㈤崗灏栨嫽闁诲酣娼ф竟濠偽ｉ鍓х＜闁诡垎鍐ｆ寖缂備緡鍣崹鎶藉箲閵忕姭妲堥柕蹇曞Х椤撴椽姊虹紒妯哄闁诲繑宀稿畷瀹狀槾缂佽鲸鎸婚幏鍛矙濞嗙偓娈洪梻浣侯焾椤戝啴宕愬┑鍡╁殨閻犲洦绁村Σ鍫ユ煏韫囨洖顫嶉柕濠忚礋娴滄粓鏌￠崘銊ワ拷鍝ユ暜閼哥偣浜滄い鎰枑濞呭洨绱掓潏銊﹀鞍缂佹鍠愮换婵嬪礃椤垳绱﹂梻鍌氬�风粈浣圭珶婵犲洤纾婚柛鈩冪☉缁愭鏌熼幑鎰【濠殿噮鍓熼弻銊╂偄閸撲胶鐓撳┑顔硷工椤嘲鐣烽幒鎴僵闁告鍎愰弶鍝ョ磽閸屾瑧顦︽い鎴濇閺侇噣鏁撻悩鍙夌�悗骞垮劚椤︻垳鐚惧澶嬬厱妞ゆ劑鍊曢弸鏃堟煕濮楋拷缁犳牕顫忓ú顏勪紶闁告洖鐏氭瓏婵犵數鍋涢ˇ鏉棵哄Ο鑲╃焿闁圭儤顨呴～鍛存煏閸繃锛嶆慨濠冨缁绘繈濮�閿濆懐鍘梺鍛婃⒐閻楃娀骞冮敓鐘参ㄩ柨鏂垮⒔閻﹀牓姊婚崒姘卞缂佸甯¤棢闁绘劗鍎ら悡娆撴煕韫囨洖甯跺┑顔肩Ч閺岋紕浠﹂崜褎鍒涢悗娈垮櫘閸撴瑩鍩㈡惔銊ョ畾鐟滃秵绔熸惔銊︹拻濞达絿鐡旈崵鍐煕閻樻剚娈滈柕鍡楀暣瀹曘劍娼忛崜褏鈼ゆ繝鐢靛█濞佳囶敄閹版澘鏋侀柛銉墯閻撶喖鏌熼柇锕�澧紒鐙欏洦鐓欓柧蹇ｅ亞閹冲洦鎱ㄦ繝鍕笡闁瑰嘲鎳樺畷銊︾節閸愩劌澹嶉梻鍌欑閹碱偊鎮у鍫濈婵炲棙鍨靛鍙夌節绾版ɑ顫婇柛顭戝灣閹峰啴鏁冮崒姘優濠德板�曢幊蹇涙偂閺囥垺鐓涢柛銉ｅ劚婵″ジ鏌ｈ箛鏇炩枅婵﹥妞藉畷锟犳倷閺夋埈妲辩紓鍌欒兌缁垳鎹㈤崼婵堟殾鐟滅増甯╅弫鍐煥濠靛棙鍤囬柣搴㈡そ濮婅櫣鎷犻幓鎺濆妷闂佽偐鎳撴晶鐣屾閻愬绡�闁搞儜鍡樻啺闂備胶鍋ㄩ崕杈╁椤撱垹姹查柕鍫濇娴滄粓鏌￠崒姘变虎闁诡喗鍨块弻娑㈡晲閸パ冨缂備胶绮惄顖氱暦婵傜唯鐟滃繘寮抽鈶╂斀妞ゆ梻銆嬮弨缁樹繆閻愯埖顥夐柣锝囧厴椤㈡洟鏁冮敓鐣岀矆鐎ｎ偁浜滈柡鍥╁仦閸ｆ椽鏌﹂幋婵愭█婵﹦绮幏鍛瑹椤栨粌濮奸梺璇插缁嬪牓寮查悩璇茬畺闁跨喓濮甸弲鎼佹煟濡灝鐨洪柣锝嗘そ濮婅櫣鎹勯妸銉︾亖婵犳鍠楅幐鍐茬暦閿熺姴绠柤鎭掑劤閸橆亪妫呴銏″偍闁稿骸纾竟鏇㈠锤濡や胶鍘卞┑鈽嗗灣缁垶宕愰幇顓熷弿濠电姴鍟妵婵堬拷瑙勬磸閸斿秶鎹㈠┑瀣＜婵ê鍚嬬紞鍌炴⒒閸屾瑧顦﹂柟纰卞亰楠炲﹨绠涢弴鐐茬亰闁瑰吋鐣崹濠氥�呴弻銉︾厵闂傚倸顕崝宥夋煕鐎ｃ劌濮傞柡宀嬬秮婵拷闁绘ê鍚�缁敻姊洪幐搴ｂ槈缂佺粯锚椤繘鎼归崷顓狅紲濠碘槅鍨伴幖顐ヮ杺闂傚倷绀侀幉锟犲箰婵犳碍鍋￠柍鍝勬噷閿熸垝绀侀～婵嬵敆婢跺苯寮抽梻浣告啞娓氭宕归幎鑺ユ櫖婵犲﹤鎳愮壕浠嬫煕鐏炲墽鎳呴柛鏂跨У閵囧嫰顢橀悙瀛樻倷闁绘挶鍊濋幃妤呮偨閸涘﹣姘﹂梺鍦厴椤ユ捇骞夐幘顔肩妞ゆ帒鍋嗗Σ顒勬⒒娓氾拷濞佳囨偋婵犲洤绠栭柛宀�鍋熷畵渚�鏌涢幇闈涙灈妞ゎ偄鎳橀弻宥夋寠婢跺妫￠柡浣哥墦濮婃椽宕烽鐐蹭粯闂佸鏉垮闁瑰箍鍨藉畷姗�顢欓悮瀛樺濞达綀鍊介悢鍏煎殐闁冲搫鍠涚槐鎶芥⒒娴ｄ警鐒鹃柡鍫墴閹虫繃銈ｉ崘鈺傛婵炲濮撮鎰涢幋鐘电＜妞ゆ棁鍋愭晶娑氱磼濡ゅ啫鏋涢柡浣规尰缁傛帞锟斤綆浜為悾楣冩倵閻у憡瀚归梺鍛婃处閸嬪棝鏁嶅鍐ｆ斀闁绘劖娼欓悘锕傛煕閹寸姵鍤�閻撱倝鏌熼梻瀵稿妽闁抽攱鍨块弻娑㈠箻閺夋垹绁锋繛瀛樼矋缁诲啰鎹㈠☉銏犵煑濠㈣泛鑻埛宀勬倵濞堝灝鏋欓柛妤勬珪娣囧﹪鎮滈挊澶屽幐闂佺鏈划宀勭嵁閸儲鈷掑ù锝呮啞閹牊绻涚仦鍌氱伈鐎规洘绻傞悾婵嬪礋椤掞拷閿熻棄鐖奸弻锝呂熼崗鍏兼瘎缂佺偓鍎抽妶鎼佸蓟閵娾晜鍋勯柛鎾茶兌閻撴捇鎮楃憴鍕闁挎洏鍨介妴渚�寮崼婵嗙獩濡炪倖鎸鹃崰鎾绘晸娴犲鐣烘慨濠勭帛缁绘繃鎯旈垾鑼泿婵犵數鍋犻婊呯不閹寸姴寮叉繝鐢靛Т閿曘倝鎮ф繝鍥х？婵°倕鎳忛悡鏇㈡煃閳轰礁鏆熼柍鍙ョ窔閺岋綁骞橀崡鐐插Е闂佸搫鐭夌紞浣割嚕閹绢喗鍊烽悹鍥囧嫬顏堕梺闈╁瘜閸欏繘骞忓畡閭︽僵闁绘劦鍓欓锟�" );
				return;
			}
			final int status = mission.getState();
		
			if ( npcid == conf.exeIndo.npcID && status == MissionStatus.PROCESSING ) {
				if ( !checkEnterBattle( roleid, conf ) ) {
					return;
				}
				final int aiid = conf.aiInfo.aIID;
				new MissionBattle(roleid, aiid, 
						new MissionBattleEndHandler(missionid, conf.aiInfo.battleResult, roleid),
						conf.scenarioInfo.animationID).submit();
			}
		} else if (activetype == 1) {
			//TODO:闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱闁靛牆鎳庨顓㈡煛鐏炲墽娲存い銏℃礋閺佹劙宕卞▎妯恍氱紓鍌氬�烽懗鑸垫叏闁垮绠鹃柨鐔剁矙閺屸�崇暆閿熶粙宕伴弽褏鏆︽繝濠傛－濡查箖鏌ｉ姀鈺佺仭闁烩晩鍨跺璇测槈濮樼偓瀚归柨婵嗗暙婵″ジ鏌ㄩ悢璇残撶紒璇茬墕椤曪絾绻濆顒�宓嗛梺缁樻濞咃綁顢欓弴銏♀拺闁告捁灏欓崢娑㈡煕閻樺磭澧甸柍銉︾墬瀵板嫰骞囬娑欏闂備浇宕甸崰鎰熆濮楋拷瀵娊鏌嗗鍡欏幗濡炪倖鎸鹃崑娑㈡晸閼恒儲鍊愰柨婵堝仩缁犳盯寮撮悩纰夌床婵犵妲呴崹鐢割敋瑜旈、鎾诲箻缂佹ǚ鎷洪梺鍛婄☉閿曪箓鍩ユ径鎰叆闁哄洦锚閸旓妇锟借娲樺ú鐔肩嵁濮楋拷楠炲洦鎷呴悷鎵В闂傚倷绶氬褔鎮ч崱妞㈡稑螖閸涱喖锟藉爼鏌曟径娑橆洭缂佺姴澧介敓鐣屾嚀婢瑰﹪宕伴弽顓犲祦闁哄稁鍘介悡鐔兼煥濠靛棭妲归柡渚�浜堕幃妤呮濞戞牕浠悗娈垮枛閻栧ジ鐛�ｎ亖鏀介柛鈩冪懀閸嬫牠姊婚崒姘拷椋庢濮橆剦鐒界憸蹇涘箲閵忋倕绠抽柟鐐綑瀵潡姊洪崜鎻掍簴闁稿孩鐓″鎻掆攽鐎ｎ偆鍘遍柣蹇曞仜婢т粙濡撮幒妤佺厱婵☆垰鍚嬮弳顒佹叏婵犲懏顏犵紒杈ㄥ笒椤粓宕卞Ο鍏兼闂傚倷鑳剁划顖炪�冮崨瀛樻櫇闁挎洩鎷烽柍璇查叄婵拷闁靛牆鎳撻幗鏇㈡⒑闂堟侗妾у┑鈥虫喘瀹曘垽宕￠悙鈺傛杸闁圭儤濞婂畷鎰板箻閸撲胶鐒兼繛鎾寸啲閹风兘鏌涢埞鍨伈鐎殿喗鎸虫慨锟介柨娑樺楠炴劙鏌ｆ惔锝嗩仧闁归鍏橀幃妤呮晲鎼粹�愁潾閻炴熬闄勬穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆鈽夐悡銈嗐亜閹绢垰浜鹃柨鐔稿灊缁�渚�锝炲鍫熸櫢濞寸姴顑呯粻鏍ㄧ箾閸℃ɑ灏伴柛瀣ㄥ姂閺岋綁骞囬钘夋畬婵炲濯崢濂稿煘閹达附鍋愰柛顭戝亝濮ｅ嫭绻濆▓鍨灆闁告鍟块悾椋庢喆閸曨參妾梻鍌氱墐閺呮繄绮欒箛鏃傜瘈闁靛骏绲介悡鎰版煕閺冿拷閻楃姴鐣烽幋鐙呮嫹閿濆骸鏋熼柣鎾跺枑娣囧﹪顢涘鍐ㄥ闂佸磭绮ú妯兼崲濞戙垹绀傞柤娴嬫櫅椤呯磽娴ｈ櫣甯涚紒瀣灴椤㈡瑨绠涘☉杈ㄦ櫓闂佺厧顫曢崐妤�鈻旈崸妤佺厽閹艰揪绲鹃崵锟介梺纭咁嚋缁辨洟骞戦姀銈呯＜闁绘劘灏欓崢鎾⒑绾懏褰ч梻鍕瀹曟垿骞囬悧鍫㈠幍缂傚倷鐒﹂敋缂佹纰嶇换娑㈠醇閻旇櫣鐓夊┑顔硷攻濡炰粙骞冮悜钘夌骇闁圭宸╅埡渚囨富闁靛牆楠搁獮鏍煕閵忥紕鍙�闁挎繄鍋犵粻娑㈠箻娴ｈ銇濇い銏℃瀹曠喖顢旈崱娆忥拷鐐烘⒒閸屾瑧绐旀繛浣冲泚鍥敇閵忕姷锛熷┑鐐村灟閸ㄦ椽寮查弻銉︾厱闁斥晛鍟伴幊鍛亜閺冿拷濞茬喎顫忓ú顏呭殐闁冲湱鍋撶�氭盯姊洪崨濠冨鞍闁荤啿鏅涢锝夊川婵犲啫鍔呴梺闈涱煭婵″洭宕㈡禒瀣拺闁圭娴风粻鎾绘煙閸愭煡顎楅崡鍗炩攽閻樺磭顣查柟铏哺閺屸�愁吋鎼粹�崇闂佺粯鎸诲ú妯兼崲濞戙垹绠ｆ繝闈涙閸╃偤姊洪崫鍕靛剳闁哥姵鍔楅幑銏犫槈閵忕姴绐涘銈嗗姂閸ㄧ粯瀵奸崼婵冩斀妞ゆ梻銆嬫Λ姘箾閸滃啰绉鐐村灴瀹曠喖顢涘В灏栨櫊閺屾洘寰勫☉姗嗘喘閻熸粎澧楀畝绋款潖缂佹ɑ濯撮柣鎴灻▓宀勬⒑閹肩偛锟芥牠鎮ч悩鑽ゅ祦闊洦绋掗弲鎼佹煥閻曞倹瀚�
			final int aiid = conf.aiInfo.aIID;
			new PSendCameraUrl(aiid,roleid).submit();
		}
	}
	
	private static boolean checkEnterBattle( final long roleid, final MissionConfig conf ) {
		fire.pb.team.Team team = fire.pb.team.TeamManager.selectTeamByRoleId( roleid );
		if ( team == null && conf.exeIndo.teamState == 2 ) {
			return false;
		}
		if ( team != null && !team.isAbsentMember( roleid ) && conf.exeIndo.teamState == 0 ) {
			Module.logger.error( "濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃缂侇噮鍨抽幑銏犫槈閵忕姷顓哄┑鐐叉缁绘帡宕濋幘顔解拺閺夌偞澹嗛ˇ锔姐亜閹存繃顥㈠┑锛勬暬瀹曠喖顢涘槌栧晪闂佽崵濮惧▍锝夊磿閵堝鍊靛Δ锝呭暞閳锋垿鏌涘☉姗堝姛闁瑰啿鍟扮槐鎺旂磼濡搫顫戦梺璇茬箰閸熸潙顫忓ú顏勭閹艰揪绲块悾鐢告⒑閻熸澘鏆遍梺甯到椤曪綁骞栨担鑲澭冾熆鐠轰警鍎戦柛妯烘啞缁绘稒娼忛崜褍鍩屾繝銏㈡嚀閿曨亜鐣烽弴銏犵闁挎梻鏅崢鐢告⒑閸︻厾甯涢悽顖涱殜瀹曨垶鎮欓悜妯煎幍濡炪倖鐗楃粙鎺椝夐崼婵冩斀闁斥晛鍟崐鎰攽閿涘嫭鐒挎い锔芥尦閺屸剝寰勬径宀�鐓撳┑顔硷功缁垳绮悢鍏兼櫢闁芥ê顦介悞鐣屾喐閹寸偞娅犳繝闈涱儐閳锋垿鏌涘┑鍡楊仾闁革綀娅ｇ槐鎺楊敊閼恒儱纰嶅銈嗘穿缂嶄礁顕ｆ繝姘ㄩ柕澹苯鏅ｆ繝鐢靛仩閹活亞寰婇挊澶涜�块梺顒�绉撮惌妤呮煕閳╁啰鈾侀柍閿嬪灩缁辨挻鎷呴懖鈩冨灩缁牓鏁撴禒瀣拺缂佸灏呭銉︾節閿熶粙鏌嗗鍡樻闂佸吋浜介崕鎶藉疮閺屻儲鐓欓柛鎴欏�栫�氾拷" + conf.missionId + "濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆい顓犲厴瀵鏁愭径濠勭杸濡炪倖甯婇悞锕傚磿閹剧粯鈷戦柟鑲╁仜婵″ジ鏌涙繝鍌涘仴鐎殿喛顕ч埥澶愬閳哄倹娅囬梻浣瑰缁诲倸螞濞戔懞鍥Ψ瑜忕壕钘壝归敐鍛儓鐏忓繘姊洪崨濠庢畷濠电偛锕ら锝囨嫚濞村顫嶅┑鈽嗗灦閺�閬嶅棘閿熶粙姊绘担鍛婂暈婵炶绠撳畷鎴﹀礋椤掍礁寮块梺闈涚箞閸婃牠鍩涢幋鐐电闁煎ジ顤傞崵娆愵殽閻愭惌娈滈柡宀�鍠栭幃鐑芥偋閸繃鐏庨柣搴㈩問閸犳牠鈥﹂悜钘夋瀬闁归偊鍘肩欢鐐测攽閻樻彃顏撮柛姘嚇濮婄粯鎷呴悷閭﹀殝缂備浇顕ч崐姝岀亱濡炪倖鎸鹃崐锝呪槈閵忕姷顦板銈嗘尵婵兘鏁嶅┑鍥╃闁瑰墽顥愭竟姗�鏌ㄩ弴妯哄姢闁跨喕濮ら懝鍓х礊婵犲偆娼栭柧蹇撴贡閻瑩鏌熺粙鍨劉闁圭柉浜槐鎾存媴閸撴彃鍓遍柣銏╁灙閿熻棄纾弳锕傛煥濠靛棛澧㈤柣銈忔嫹闂備礁鎼崐鍛婃櫠閻ｅ瞼涓嶆慨妯垮煐閳锋垿姊婚崼鐔恒�掑褎娲熼弻鐔风暋闁箑鍓堕悗瑙勬礃濞茬喖鐛崶顒佸亱闁割偅绻愰幏鐑藉垂椤愶絽寮垮┑顔筋殔濡鏅堕幍顔剧＜濠㈣泛顑嗛妵婵嬫煛瀹�锟介崰鏍�佸▎鎴犻┏閻庯綆鍋嗛弳銉╂⒒娴ｅ摜锛嶇紒顕呭灦楠炴垿宕惰閺嗭妇鎲搁悧鍫濅刊闁轰礁锕弻锝夋晲閸涱収娈梻渚囧弾閸ㄨ泛顫忔繝姘＜婵炲棙鍔楅妶鏉款渻閵堝棙鑲犻柛娑卞枛鎼村﹪姊虹涵鍛涧闂傚嫬瀚板畷鐢典沪鏉炴寧妫冮弫鎰板川椤撶喓浜鹃梻浣芥〃缁�渚�顢栨径鎰摕闁哄洨鍠庣欢鐐烘煕閳╁叐鎴︽偟閺冨倻纾藉〒姘攻鐎氬綊鏌ｆ惔顖滅У闁稿鐒︾粋宥咁煥閸喓鍘搁悗骞垮劚閸燁偅淇婃禒瀣厽闁靛绠戦悘鎾煛瀹�瀣М濠碘剝鍎肩粻娑㈠棘濞嗗彞绱﹀┑鐘垫暩婵兘銆傞鐐潟闁哄洢鍨圭壕濠氭煙鏉堝墽鐣辩痪鎯х秺閺屸�愁吋鎼粹�崇缂備胶濮抽崡鎶藉蓟閻斿吋鈷掗悗鍨摃缁犵偤姊洪幖鐐插姶闁告挻鐟ч惀顏囶槼濞ｅ洤锕、鏇㈠椤厾椹虫繝纰夌磿閸嬬姴螞閸曨垼鏁嬮柨婵嗘椤╃兘鎮楅敐鍛粵闁哄拑缍佸铏圭磼濡椿姊垮┑鐐叉嫅缂嶄礁顕ｉ幎钘夘潊闁靛牆妫岄幏濠氭⒑缁嬫寧婀伴柤褰掔畺閺佹捇鎮剧仦钘夊箣闂佺娅曢〃濠傜暦濠婂嫭濯寸紒瀣硶娴滅増淇婇悙顏勶拷鏍偋濠婂牆纾绘繛鎴炴皑娑撳秹鏌熷▓鍨灓缁炬儳銈搁幃妤呮晲鎼粹�插缂備焦澧庨弲婵嬪箟閹间焦鍋嬮柛顐ｇ箘閻熸煡姊虹紒妯诲蔼闁稿海鏁婚獮鍐ㄎ旈崨顔芥珳闁硅偐琛ラ敓鑺ュ墯濞煎姊绘担鐟板濞存粍鐟╁畷锟犲礃瀹割喗缍庣紓鍌欑劍钃卞┑顖涙尦閺岋箑螣娓氼垱笑闂佽鍨抽崑銈咁潖濞差亜浼犻柕澶堝剾閿濆鐓曢柡鍐挎嫹妞ゃ劌锕ら悾宄邦潩鐠鸿櫣顔婂┑掳鍊ч幏椋庣磼閻樼數甯涢柟渚垮姂閹兘鎮ч崼鈧亽闂備礁缍婇ˉ鎾诲礂濡櫣鏆﹂柟鐑橆殕閸婄兘鎮楀☉娅虫垿鎮甸弽顓熲拻濞达絼璀﹂悞楣冩煛閸偄澧扮紒顔界懇楠炲鏁傞懞銉︻仧闂備浇濮ら敋妞わ缚鍗冲畷鎴﹀Ψ閳哄倻鍘搁柣蹇曞仩椤曆勬叏閸屾粣鎷峰▓鍨珮闁告挾鍠庨悾鐤亹閹烘繃鏅╅柣鐔哥懃鐎氼剟鎯侀柆宥嗏拻闁稿本鐟ч崝宥嗕繆閻愬弶鍋ョ�规洏鍨虹缓浠嬪级閸℃鍠橀柟顔炬櫕缁瑩鎳楅娑欏暫闂傚倷绶氬褑澧濋梺鍝勬噺缁挸鐣烽幋锕�骞㈡繛鎴炵懅閸橀亶鏌ｈ箛鏇炰粶濠⒀傜矙閸┿儲寰勭�ｃ劋绨婚棅顐㈡储閸庤尙锟芥熬鎷�?" );
			fire.pb.talk.MessageMgr.sendMsgNotify( roleid, 141711, null );
			return false;
		}
		if ( conf.exeIndo.hasOtherLimit == 1 ) {
			final SSpecialScenarioQuestConfig sconf = conf.getSpecialScenarioQuestConfig();
			if ( sconf == null )
				return false;
			if ( sconf.缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃闁硅櫕鎹囬垾鏃堝礃椤忓孩瀚归柨婵嗙凹缁ㄧ粯銇勯幒瀣仾闁靛洤瀚伴獮鍥敂閸℃瑧鍘梻浣告惈鐞氼偊宕濋幋锕�绠栭柕蹇嬪�曟导鐘绘煕閺囩喎鐏熼柛銊ヮ煼閹拷妞ゅ繐鐗嗙粻鏌ユ煙娴煎瓨娑ф繛鍫幖椤啴濡舵惔鈥崇濠电偟銆嬬换婵嬬嵁婵犲偆鐓ラ柛顐ゅ櫏濡啫鈹戦悙鏉戠仸妞ゎ厼瀚板鎾閳撅拷閹锋椽鏌℃径灞戒沪濠㈢懓妫濊棟闁挎柨顫曟禍婊堟煙鐎涙绠栭柛鐘成戦〃銉╂倷瀹割喗鈻堝Δ鐘靛仦閻楁骞忛崨鏉戜紶闁靛／鍕М闂傚倸鍊风粈浣圭珶婵犲洤纾婚柛娑卞灡瀹曟煡鏌涢弴銊ョ仭闁稿鏅犻弻娑樷攽閸℃浠遍梺鐚存嫹濞寸姴顑呯粻鎶芥煙閹増顥夌痪鎯х秺閺岋繝宕堕妷銉т患闂佹眹鍊ら崰鏍箒闂佺粯鎸稿ù鐑藉箺閻樼粯鐓曢幖娣焺濞堟洜绱掔紒妯兼创鐎规洖宕灒閻犲洦鐓￠悗娲⒒娴ｈ櫣甯涢柟绋挎憸閹广垹顫滈敓钘夘嚕鐠囨祴妲堥柕蹇曞Х閸欙拷闂備胶纭堕崜婵嬨�冮崨顖滀笉婵炲樊浜濋悡鐔煎箹濞ｎ剙鐏柛鐔哥叀閺岀喖宕欓妶鍡楊伓2 == 2 ) {
				// 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鎯у⒔閹虫捇鈥旈崘顏庢嫹閿濆簼绨奸柟鐧哥秮閺岋綁顢橀悙鎼闂侀潧妫欑敮鎺楋綖濠靛鍊锋い鎺炴嫹妞ゅ繗鍩栨穱濠囧Χ閸ヮ灝銉╂煕鐎ｎ偆娲撮挊婵嬫煟閵忋埄鐒鹃柡瀣╄兌閿熻棄绠嶉崕閬嵥囬婊呯焼閻庯綆鍋佹禍婊堟煙閸濆嫮肖闁告柨绉甸妵鍕棘閹稿骸鏋犲┑顔硷功缁垶骞忛崨顖涘枂闁告洦鍋傞崫妤呮⒒娴ｄ警鐒鹃悗娑掓櫅椤啴鎸婃径灞炬濠电姴锕ら崯鐘诲几鎼淬劍鐓欓悗娑欘焽缁犮儲淇婇锝囩煉闁诡喖鍢查…銊╁川椤撗勬瘔闂佹眹鍩勯崹閬嶃�冩繝鍥х畺闁炽儲鏋煎Σ鍫熸叏濡厧浜鹃悗姘愁潐椤ㄣ儵鎮欓懠顑胯檸闂佸憡姊归懝鎹愮亙闂佺粯顭堝▍鏇㈠磹閹扮増鐓熸繛鎴濆船濞呭秶锟芥鍠曠划娆撱�佸锟介幃銏ゅ传閸曨偆鐫勯梻鍌氬�风粈渚�骞夐敓鐘茬闁挎梻鏅々鍙夌節婵犲倻澧曢柛鎴犲У缁绘盯骞嬪▎蹇曚痪闂佺粯鎸婚惄顖炲箖濮楋拷閹瑩骞撻幒鍡樺瘱婵犵數鍋涘璺侯焽濞嗘挸鐓橀柟杈鹃檮閺咁剟鏌涢弴銊ヤ簻妤犵偛顑呴—鍐Χ閸愩劎浠鹃梺鑽ゅ暱閺呯娀鐛崘顔肩労闁告劏鏅涢崝鍛渻閵堝棙鈷愰柛銊︾箓椤繈鏁傞崜褏锛濋梺绋挎湰閼归箖鏁撻懞銉﹀�愮�规洘鍔栭ˇ鐗堟償閵忊晛浠洪梻渚�娼ч悧鍡浰囬婊呬笉妞ゆ牜鍋為悡鐔兼煙鏉堝墽鍒扮悮姘舵⒑缂佹ɑ灏版繛鑼枛瀵鏁撻悩鑼�為梺闈涱槶閸庨亶鈥栭崼銉︹拺閻犲洦鐓￠悰婊呯磼缂佹绠炵�殿喖顭烽弫鎰緞婵犲嫷鍟嬮梺鑽ゅЬ濞咃綁宕曢妶澶嬪�堕柛顐犲劜閳锋垿鏌涘┑鍡楊伀闁诲繘浜堕弻娑㈡偐閾忣偄纾抽梺杞扮劍閹瑰洭骞冮崜褌娌柣鎰靛墯閻︽捇姊绘担鍛婃儓闁硅櫕鎸炬禍绋库枎瀵邦偓缍侀獮鍥偋閸喎鍔掓俊鐐�栭崝妤佹叏瀹曞洩濮冲┑鐘崇椤ュ﹥銇勯幇鈺佺仾濠㈣泛瀚伴弻鐔煎传閵夈儰澹曢梺鍝勬嚀濞夋盯鍩ユ径鎰潊闁挎稑瀚獮鍫濃攽閻樺灚鏆╁┑顔芥尦楠炲﹥鎯旈妸锕�浜楅梺褰掑亰閸犳氨澹曢懖鈺冪＝濞达綀顕栭悞鑺ョ箾閹绘帞鎽犳い銊ｅ劦閹瑥顔忛鐓庡闂備礁鐤囬褍顫濋敂鍓т笉婵炴垯鍨归崡铏叏濡潡鍝洪柨娑樼箻濮婂宕掑顒婃嫹閻戣姤鍤勯柛顐ｆ磵閿熸枻绠撳畷濂稿Ψ閿旇姤鐝栭梻浣瑰濞叉牠宕愰幖浣稿嚑濞达絿纭堕弨浠嬫煟濡櫣鏋冨瑙勶耿閺岋箓宕橀鍕�剧紓浣虹帛閻╊垶鐛�ｎ亖鏋庨煫鍥ㄦ磻閻ヮ亪姊绘担鍛婃儓闁瑰啿绻掗崚鎺楀箻鐠囪尙鐣洪悷婊呭鐢帡鎮欐繝鍥ㄧ厪濠电偛鐏濋崝銈囩磼娓氾拷椤ユ挾妲愰幘瀛樺闁告繂瀚呴姀銏㈢＝鐎广儱鎷戦煬顒傦拷娈垮枦椤曆囧煡婢舵劕顫呴柍銉ュ帠缁ㄥ姊婚崒娆戭槮闁诲繑绻堥、鏍川閺夋垶杈堥梺鍓插亖閸ㄨ崵澹曢挊澹濆綊鏁愰崼鐕佷哗闁汇埄鍨辩粙鎾舵閹烘梹瀚氶柤纰卞墮閳敻鎮楃憴鍕闁圭⒈鍋婇崺銉﹀緞閹邦剦娼婇梺鏂ユ櫅閸燁垶顢旈悢鍏尖拻濞达綀妫勮闂佹寧纰嶉妵鍕晜鐠恒劎鐓撻悗瑙勬磸閸庢娊鏁撻弬銈囩У闁哥姵顨婇幃锟犲即閵忥紕鍘撻梺瀹犳〃缁�渚�寮搁妶鍡欑闁割偅绋戦悘鈺呮婢跺瞼妫い鎾卞灪閺侀亶鎮楀鐐
				final int fightpetkey =
					xtable.Properties.selectFightpetkey( roleid );
				fire.pb.pet.PetColumn pc = new fire.pb.pet.PetColumn( roleid, 
						fire.pb.pet.PetColumnTypes.PET, true );
				xbean.PetInfo pi = pc.getPetInfo( fightpetkey );
				if ( pi == null || 
						(sconf.activeparams != null && 
						!sconf.activeparams.contains( pi.getId() ) ) ) {
					fire.pb.talk.MessageMgr.sendMsgNotify( roleid, sconf.emsg, conf.exeIndo.npcID, null );
					return false;
				}
			}
		}
		return true;
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 805452;

	public int getType() {
		return 805452;
	}

	public int missionid; // 任务id
	public long npckey; // npc的key
	public int activetype; // 激活类型:0进入AI战斗,1观看战斗录像

	public CActiveMissionAIBattle() {
	}

	public CActiveMissionAIBattle(int _missionid_, long _npckey_, int _activetype_) {
		this.missionid = _missionid_;
		this.npckey = _npckey_;
		this.activetype = _activetype_;
	}

	public final boolean _validator_() {
		if (missionid < 1001 || missionid >  999999) return false;
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(missionid);
		_os_.marshal(npckey);
		_os_.marshal(activetype);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		missionid = _os_.unmarshal_int();
		npckey = _os_.unmarshal_long();
		activetype = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CActiveMissionAIBattle) {
			CActiveMissionAIBattle _o_ = (CActiveMissionAIBattle)_o1_;
			if (missionid != _o_.missionid) return false;
			if (npckey != _o_.npckey) return false;
			if (activetype != _o_.activetype) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += missionid;
		_h_ += (int)npckey;
		_h_ += activetype;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(missionid).append(",");
		_sb_.append(npckey).append(",");
		_sb_.append(activetype).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CActiveMissionAIBattle _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = missionid - _o_.missionid;
		if (0 != _c_) return _c_;
		_c_ = Long.signum(npckey - _o_.npckey);
		if (0 != _c_) return _c_;
		_c_ = activetype - _o_.activetype;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

