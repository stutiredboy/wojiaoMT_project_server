
package fire.pb.clan.fight;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CGetClearTime__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/**
 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊炲銈嗗笒椤︿即寮查鍫熷仭婵犲﹤鍟版晥濠电媴鎷峰〒姘炬嫹婵﹨娅ｇ槐鎺懳熼搹閫涚礃婵犵妲呴崑鍕拷姘緲椤曪綁宕ㄦ繝鍕嚌闂佽法鍠嶇划娆忣嚕鐠囨祴妲堟俊顖炴敱椤秴鈹戦绛嬫當闁绘锕顐﹀箚瑜夐弨浠嬫煟閹邦剙绾ч柛锝堟閳规垿顢欓懖鈺�绮电紓浣哥焷妞村摜鎹㈠┑瀣倞妞ゎ剦鍎搁崶銊у幈濠电偞鍨靛畷顒勫几濞戞瑧绠鹃柛婊冨暟缁★拷濠殿喖锕ㄥ▍锝夊箲閸曨垰惟闁靛濡囨禍鐐寸節绾版ɑ顫婇柛瀣閿熻姤纰嶅姗�鎮鹃悜绛嬫晬闁绘劘灏欐鍥⒑閻熼偊鍤熷┑顕�娼ч埢鎾淬偅閸愨斁鎷洪梻鍌氱墛閸楁洟宕奸妷銉ф煣濠电偞鍨跺銊ノ涢婊勫枑闁哄啫鐗嗛拑鐔兼煟閺冨倸鐨戦柟椋庡厴閹棄鈻撶捄銊ュЪ濠电偛顕刊瀛樹繆閸ヮ剙绠栨い鏇嫹闁轰焦鍔栧鍕拷锛卞嫬顏烘繝鐢靛仩閹活亞寰婇崸妤佸仱闁哄啫鐗嗛崥瑙勭箾閸℃ê鐏╃痪鎹愬亹缁辨挻鎷呮慨鎴簻闇夋い鏃�鎷濋幏椋庢喆閸曨剛顦ㄩ梺鎼炲妿閺佸宕洪妷锕�绶炲┑鐐靛亾閻庡姊鸿ぐ鎺戜喊闁告ɑ宕橀妵鎰板垂椤旇鏂�闂佺粯鍔曞Ο濠囧吹閻斿皝鏀芥い鏃囧Г鐏忥附銇勯姀锛勫⒌鐎规洏鍔庨敓鑺ョ♁閿氬ù婊勵殔閳规垿鎮╃紒妯婚敪濡炪倖鍨靛Λ婵嬪箖閳ユ枼妲堥柕蹇ョ磿閸橀亶姊虹憴鍕棎闁哄懏绋掓穱濠囧垂椤曞懐鍞甸悷婊冮叄閹嫰顢涢悙鑼舵憰濠电偞鍨堕悷褏寮ч敓浠嬫⒑閸涘﹥澶勯柛鎾磋壘琚欓柛顐犲劜閳锋垿鏌涘┑鍡楊伂妞ゎ偓绠撻弻娑㈠棘鐠恒劎鍔梺绯曟櫇閸嬨倝鐛�ｎ喗鏅濋柨鐔剁矙閻涱噣濮�閿涘嫮顔曢梺鐟邦嚟閸嬫盯寮ィ鍐╃厵鐎瑰嫭婢樺Σ濠氭懚閺嶎厽鐓ラ柣鏂垮閻瑦绻濋敓鑺ユ媴缁洘鏂�闂佺粯锚濡﹪鎮￠銏＄厵闁绘垹鐡斿Λ鎴犵磼鏉堛劌娴い銏＄懇閹墽浠﹂幆褎鐝伴梺璇插椤旀牠宕板☉銏╂晪鐟滄棃宕洪妷锕�绶炲┑鐘插閸嶇敻姊虹紒妯哄Е闁告挻鐟╅、鏃堝醇閺囩啿鎷洪梺鍦焾濞撮绮婚幘缈犵箚妞ゆ劧绲块幊鍥煙椤曞棛绡�濠碉紕鍏橀崺锟犲磼濮樼偓瀚归柛顭戝亝閸欏繑淇婇婊冨付閻㈩垰鐖奸弻锛勶拷锝冨妼閿熻姤顨堝Σ鎰板箳濡ゅ﹥鏅╅梺鍛婃寙閸愵亶鍋ч梻鍌欑窔濞佳囨偋閻愮數绀婂ù锝呮憸閺嗭附鎱ㄥΔ瀣闂佺硶鏅换婵嗙暦濮楋拷婵℃悂濡疯閸氬姊婚崒姘拷鎼佸磹閻戣姤鍤勯柛顐ｆ磸閿熸垝鐒︾换婵嬪炊妞嬪海鈼ゅ┑鐘灱閸╂牠宕濋弴鐘电焼濠㈣埖鍔栭悡娑氾拷骞垮劚妤犳悂鐛Δ鍛厱閻庯綆鍓欓弸鎴︽煏閸パ冾伂缂佺姵鐩獮妯兼崉娓氼垱婢戦梻鍌欒兌缁垶骞愮拠瑁佹椽鎮㈤悡搴ゆ憰闂佸搫娲㈤崹褰掓煁閸ャ劎绡�闂傚牊绋掗幖鎰箾閸涱偄锟芥牜鎹㈠┑瀣潊闁挎繂妫涢妴鎰版煟鎼淬垹鍤柛鐘宠壘鍗遍柟鐗堟緲缁犳娊鏌￠崘銊ワ拷濠氭晬濠婂啠鏀介柍钘夋閻忕娀鏌涘顒夊剶鐎规洘鑹鹃埥澶愬閳ョ鎷烽悽鍛婂仭婵炲棗绻愰顏嗙棯閻愵剚鍊愰柡灞剧洴瀵噣鏁撴禒瀣瀭闁秆勵殔杩濇繛杈剧到婢瑰﹤顭囬妸鈺傜叆闁绘棁顕ц闂侀�涚┒閸旀垿寮幘瀵割浄閻庯綆鍋嗛崢钘夆攽閳藉棗鐏ユい鏇嗗懎绶ら柤濮愬�ч幏宄扳枔閸喗鐏撻梺绋跨箲閿氭い顐㈢箻閹煎湱鎲撮崟顐ゅ酱闂備礁婀辩划顖滄暜閳哄懎绀夊璺侯煬濞撳鏌曢崼婵囶棡闁抽攱鍔欓弻锝呂旈崘銊愩垽鏌ｉ敐鍥у幋妤犵偛娴风划鐢碉拷锝庡亝濞呮棃姊绘担鑺ョ《闁哥姵娲栬灋闁告洦鍨遍崑鈺呮煟閹达絾顥夌紒鐙呯秮閺岋綁骞囬鑺ユ瘎闂佷紮绠戦悧鎾愁潖濞差亜绠归柣鎰絻婵⊙囨⒑閸涘﹣绶遍柛銊ュ船琚欓柛銉墯閳锋垿鏌ゆ慨鎰拷鏇㈠几閹寸姷纾兼い鏃囧亹鏁堥悗娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭幃锝夋⒒娴ｈ櫣甯涢柛銊ュ悑閹便劑濡舵径濠勶紱闂佺鐬奸崑娑氱不瑜版帗鍊垫繛鎴炵懀閿熺晫鍋ら獮瀣晝閿熻棄螞濮楋拷閺屻劑鎮㈤崜浣虹厯濠殿喖锕︾划顖炲箯閸涱垳鐭欐繛鍡欏亾椤ユ垿姊绘担渚劸妞ゆ垵鎳橀獮濠囧箛椤旂厧鐏婂┑鐐叉閹稿摜绮婚敐澶嬬厽闁归偊鍙庨崯蹇旂箾閹绘帗鍟炵紒缁樼〒閿熺晫鏁搁…鍫㈡暜閸洘鐓熼幒鎶藉礉閹达箑鏄ユ繛鎴欏灩缁犺櫕淇婇妶鍕厡闁告﹢浜堕弻锝堢疀閺囩偘绮舵繝鈷�鍌滅煓妤犵偛锕畷銊╊敊鏉炴壆鐩庨梻浣瑰濡線宕戦幇鐗堝仼闁汇垹鎲￠悡娑氾拷鐧告嫹闁跨喍绮欏畷浼村箻鐠囪尙鐛ユ繝鐢靛Т濞层倗娑甸敓浠嬫⒑缂佹ê濮堟繝銏★耿瀵悂宕奸妷锔惧幗闁瑰吋鐣崐銈咁焽閹邦厾绠鹃悹鍥囧懐鏆ら悗瑙勬礀缂嶅﹤鐣锋總绋垮嵆婵鐗婄�氱懓銆掑鐐閻庢鍠楅幐铏叏閿熶粙鏌嶉埡浣告殲闁绘繃娲熷缁樻媴閽樺－鎾绘煥濮橆厹浜滈柨鏃囶嚙濞呭秶锟借娲橀悷锔剧矉閹烘棑鎷烽敐搴′簮闁归绮换娑欐綇閸撗呅氬┑鐐叉嫅缁插潡寮灏栨闁靛骏绱曢崢鐢电磽娴ｅ壊鍎愰悗绗涘洤绠熼柟闂寸劍閻撱儵鏌ｉ弬鍨闁归鍏橀幃銈嗘媴閸涘﹦鏆熼梻鍌欒兌椤牓顢栭崨顖ゆ嫹濮橆偄宓嗙�规洘妞芥俊鐑芥晝閿熺晫娆㈤悙鐑樼厵闂侇叏绠戞晶缁樼箾閻撳函韬慨濠冩そ瀵剟濡烽敂鐣屽絽闂備礁鎽滈崳銉╁垂閸洏锟戒線寮崼鐔蜂簻闂佺绻愰惃鐑藉箯缂佹绠鹃弶鍫濆⒔缁夘剙鈹戦鍝勶拷妤�鈽夐悽绋块唶闁哄洨鍠撻崢閬嶆⒑閹稿海绠撶紒缁樺浮閹箖宕归顐ｎ啍闂佺粯鍔樼亸娆戠不婵犳碍鐓涘ù锝堫潐瀹曞矂鏌℃担瑙勫磳闁轰焦鎹囬弫鎾绘晸閿燂拷 by changhao
 *
 */
public class CGetClearTime extends __CGetClearTime__ {
	@Override
	protected void process() {
		// protocol handle
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		mkdb.Procedure getcleartime = new mkdb.Procedure()
		{
			@Override
			protected boolean process()
			{	
				int curweek = fire.pb.activity.clanfight.ActivityClanFightManager.getInstance().curweek.get();
				if (curweek == -1)
				{
					return false;
				}
				
				long cur = System.currentTimeMillis();
				
				long monday0000 = fire.pb.activity.clanfight.ActivityClanFightManager.GetMonday0000ByTime(cur);
				curweek = curweek % 24;;
				int r = 24 - curweek;
				
				long day1 = 24 * 3600 * 1000;
				
				long end = monday0000 + day1 * 7 * r;
				
				SGetClearTime msg = new SGetClearTime();
				msg.cleartime = end;
								
				mkdb.Procedure.psendWhileCommit(roleid, msg);

				return true;
			}
		
		};
		
		getcleartime.submit();
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 808545;

	public int getType() {
		return 808545;
	}


	public CGetClearTime() {
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CGetClearTime) {
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CGetClearTime _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

