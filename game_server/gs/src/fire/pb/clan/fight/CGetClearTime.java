
package fire.pb.clan.fight;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CGetClearTime__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

/**
 * 闂傚倸鍊搁崐鎼佸磹閹间礁纾圭�瑰嫭鍣磋ぐ鎺戠倞妞ゆ帒顦伴弲顏堟偡濠婂啰效婵狅拷娓氾拷濮婅櫣绱掑Ο铏逛紘濠碘槅鍋勭�氭澘顕ｉ崨濠勭懝闁跨喍绮欏璇测槈濡攱顫嶅┑顔筋殔閻楀﹪寮幆褉鏀介柣鎰级閸ｈ棄鈹戦鑲╀粵缂佸矁椴哥换婵嬪炊椤儸鍥ㄧ厱婵炴垵宕弸娑欑箾閸滃啰绡�婵﹨娅ｉ幑鍕Ω閵夛妇浜炴繝纰樻閸嬪嫮锟芥碍婢橀悾鐑筋敍閻愯尙楠囬梺鐟邦嚟婵潧鈻撴ィ鍐┾拺闂傚牊鍗曢崼銉ョ柧婵炴垶姘ㄥΛ顖滄喐閺冨牆钃熼柣鏃傚皑閹风兘鎮藉▓璺ㄥ姼婵炲濯存俊鍥箖椤曪拷閺佹劖寰勭�Ｑ勫濠电偠鎻徊鍧楁偤閺冨牆鍚规繛鍡樺灩绾捐偐绱撴担濮戭亜霉椤旀拝鎷风憴鍕闁搞劎鏁婚崺銉﹀緞婵炵偓鐎婚梺褰掑亰閸樻崘銇愰崹顔规斀闁绘劕妯婇崵鐔封攽椤旇姤灏︽い銏＄墵瀹曘劎锟芥稒锚娴滄鈹戦悩缁樻锭妞ゆ垵妫濋幃鈥斥槈閵忥紕鍘遍梺瑙勫閺呮稒淇婇崹顕呯唵鐟滃酣鎯勯鐐茶摕婵炴垶鐟х弧锟介梺鍛婃处閸撴艾袙閸儲鈷戦柛婵嗗椤箓鏌涢弬璺ㄧ劯闁糕晝鍋ら獮瀣晝閿熶粙鐛姀锛勭闁瑰鍋涢弫楣冩煙瀹勬澘妲婚摶鏍煥閻斿墎鐭欐繝锟芥担绯曟斀闁绘ê妯婇悡顓㈡煙閻戠瓔妫戠紒杈ㄥ浮椤㈡瑩鎮剧仦鎯ф珰闁诲孩顔栭崰娑㈩敋瑜旈崺銉﹀緞婵犲孩鍍甸梺缁樺姦閸撴瑩顢旈崼鏇熲拺闁圭娴风粻鎾翠繆椤愶絿鎳囬柟顕嗙節婵＄兘鍩￠崒姘炬嫹閸偅鍙忔俊顖滃帶鐢爼鏌＄�ｃ劌锟芥妲愰幒妤婃晩闁告挆鍐偧闂備線娼ч悧鐐电礊娴ｅ摜鏆︽慨妤嬫嫹闁糕晪绻濆畷姗�濡搁妷褜鍚嬮梻鍌氬�搁崐鐑芥嚄閸洏锟戒焦绻濋崶椋庣◤婵犮垼鍩栭崝鏇犵矆婢舵劖鐓涚�广儱楠搁獮妤呮煕鐎ｎ剙鏋戦柕鍥у缁犳盯骞樼捄渚澑闂備胶绮幐璇裁洪悢鐓庤摕闁哄洢鍨归柋鍥ㄧ節闂堟稒鎼愭繛鍛�栫换婵嬪閿濆棛銆愰柣搴㈠嚬閸犳艾危閹版澘绠抽柡鍐ㄥ�婚敍婊冣攽閳藉棗鐏犻柛姘儔瀹曟艾鈽夐姀鈥筹拷鐢告偡濞嗗繐顏痪鐐倐閺屾盯寮敓浠嬪垂閸ф违濞达絽澹婂銊╂煥閻旇袚闁逛究鍔戦弫鎾寸鐎ｎ偆鍘藉┑鈽嗗灥椤曆呭緤閼姐倧鎷峰▓鍨灓闁稿繑锚椤繘鎼圭憴鍕彴闂佸湱绮敮鈺呭礉婢跺娓婚柕鍫濇閳锋劙鏌ｅΔ鍐ㄐ㈤柣锝囧厴楠炲海绮电�ｎ偅娅旈梻浣芥硶閸犳洖螞閸曨垱鍋╅柣鎴ｆ缁狅綁鏌ｉ幇顔芥毄闁伙箑鐗撳娲箹閻愭彃濡ч梺鍛婁緱閸ㄥ崬袙閸ヮ剚鈷戦柤濮愬�曢弸鎴犵磼椤旇偐效鐎殿喖顭锋俊鎼佸煛閸屾矮鎮ｉ梻浣虹帛閸ㄥ吋鎱ㄩ妶澶婄；闁稿瞼鍋涚粻褰掓倵濞戞瑣锟界偤骞嬮敃锟藉Λ姗�鏌ㄩ悢鍓佺煓婵﹦绮幏鍛矙濞嗙偓顥戦梻浣侯焾椤戝懘骞婇幇顔煎灊婵炲棙鎸哥粻锝夋煟閹邦収鍟忔繛鎻掓啞缁绘稓锟界數顭堢敮鍫曟煟鎺抽崝鎴﹀春濞戙垹绠虫俊銈勮兌閸橀亶鏌ｈ箛鏇炰粶濠⒀傜矙楠炲﹪宕ㄩ杞扮盎闂佹寧妫侀崑鎰版偩閻㈠憡鐓涚�癸拷閿熶粙宕伴幘璇茬獥濠电姴娲ょ涵锟介梺缁樺姈濠㈡﹢寮搁崼銉︾厽閹兼番鍊ゅ鎰箾鐠囇呯暤鐎规洖缍婂畷濂稿即濮楀牊瀚瑰〒姘炬嫹鐎殿喗鎸虫慨锟介柍鈺佸暞閻濇洟姊绘担钘壭撻柨姘亜閿旇娅嶇�规洘鐟︾粋鎺旓拷锝庡亐閹风粯绻涙潏鍓хК婵炲拑绲块弫顔尖槈閵忥紕鍘电紓浣割儐鐎笛囧箟閹间焦鐓ラ柣鏂垮殩閹风兘鎮ゆ担鍛婄暟闂備胶顭堥鍛拷姘嵆瀹曟椽濡烽敃锟界欢鐐烘煙闁箑澧绘繛鐓庯躬濮婃椽寮妷锔界彅闂佸摜鍣ラ崹鍫曘�侀弮鍫熷亜闁稿繐鐨烽幏缁樼箾鏉堝墽绉┑顔哄�楀☉鐢稿醇閺囩喓鍘遍梺鎸庣箓缁绘帡鎮鹃崹顐闁绘劘灏欑粻濠氭煛娴ｈ宕岄柡浣规崌閺佹捇鏁撻敓锟� by changhao
 *
 */
public class CGetClearTime extends __CGetClearTime__ {
	@Override
	protected void process() {
		// protocol handle
		final long roleid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (roleid < 0)
			return;
		mkdb.Procedure getcleartime = new mkdb.Procedure()
		{
			@Override
			protected boolean process()
			{	
				int curweek = fire.pb.activity.clanfight.ActivityClanFightManager.getInstance().curweek.get();
				if (curweek == -1)
				{
					return false;
				}
				
				long cur = System.currentTimeMillis();
				
				long monday0000 = fire.pb.activity.clanfight.ActivityClanFightManager.GetMonday0000ByTime(cur);
				curweek = curweek % 24;;
				int r = 24 - curweek;
				
				long day1 = 24 * 3600 * 1000;
				
				long end = monday0000 + day1 * 7 * r;
				
				SGetClearTime msg = new SGetClearTime();
				msg.cleartime = end;
								
				mkdb.Procedure.psendWhileCommit(roleid, msg);

				return true;
			}
		
		};
		
		getcleartime.submit();
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 808545;

	public int getType() {
		return 808545;
	}


	public CGetClearTime() {
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CGetClearTime) {
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CGetClearTime _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

