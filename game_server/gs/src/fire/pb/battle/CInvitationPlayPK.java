
package fire.pb.battle;

import java.util.Arrays;
import java.util.List;
import java.util.Map;
import java.lang.Math;

import gnet.link.Onlines;
import fire.pb.GameSystemConfig;
import fire.pb.PropRole;
import fire.pb.StateCommon;
import fire.pb.SysConfigType;
import fire.pb.battle.pvp.PvPHelperManager;
import fire.pb.buff.BuffAgent;
import fire.pb.buff.BuffConstant;
import fire.pb.buff.BuffRoleImpl;
import fire.pb.main.ConfigManager;
import fire.pb.map.GridPos;
import fire.pb.map.MapConfig;
import fire.pb.map.Role;
import fire.pb.map.RoleManager;
import fire.pb.scene.AreaInfo;
import fire.pb.talk.MessageMgr;
import fire.pb.team.Team;
import fire.pb.team.TeamManager;
import fire.pb.util.MapUtil;
import fire.pb.main.ConfigManager;
import fire.pb.battle.SPKDrop;
import org.apache.log4j.Logger;




// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __CInvitationPlayPK__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class CInvitationPlayPK extends __CInvitationPlayPK__ {
	public static final Map<Integer, SPKDrop> PKDropConfig_CFGS = ConfigManager.getInstance().getConf(SPKDrop.class);
	static private final Logger logger = Logger.getLogger("BATTLE");
	@Override
	protected void process() {
		// protocol handle
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌曢崼婵愭Ц缂佺媭鍨堕弻銊╂偆閸屾稑顏�?闂傚倸鍊搁崐宄懊归崶褏鏆﹂柛顭戝亝閸欏繘鏌℃径瀣婵炲樊浜滃洿婵犮垼娉涢敃銈囪姳閵夆晜鈷戦柛婵嗗椤箓鏌涙惔銊ゆ喚鐎规洖缍婂畷鎺楁倷闂堟稑绲奸梻浣规偠閸庮垶宕濆鍥╃焼闁跨喕妫勯—鍐Χ閸愩劌濮烽梺鐟板殩閹凤拷?
		final long hostid = gnet.link.Onlines.getInstance().findRoleid(this);
		if (hostid<0){
			return;
		}
		//闂傚倸鍊搁崐鎼佸磹閻戣姤鍤勯柛顐ｆ礀閸屻劎鎲搁弮鍫澪ラ柛鎰ㄦ櫆閸庣喖鏌曡箛瀣労婵炶尙顭堥埞鎴︽偐鐠囇冧紣闂佺懓鍟跨换鎰版偩閻戣棄绠甸柟瑙勵殔缂嶅﹪寮幇鏉垮窛妞ゆ棁娉曢、鍛存⒒娴ｅ摜锛嶇紒顕呭灠椤繑绻濆顓熸闂佽姤锚椤﹂亶鎮鹃銏＄厱閹兼番鍔嬮幉楣冩煙椤斻劌娲ら獮銏＄箾閹寸伝顏堝磻瀹ュ鈷戦柛锔诲弨濡炬悂鏌涢悩鎰佹疁闁糕晜鐩獮瀣晜閻ｅ苯寮抽梻浣虹帛濞叉牠宕愰崷顓ㄦ嫹濮樼偓瀚�?闂傚倸鍊搁崐宄懊归崶褏鏆﹂柛顭戝亝閸欏繘鏌℃径瀣婵炲樊浜滄儫闂佸疇妗ㄥù鍥箺閺囩喓绡�闁靛骏绲介悡鎰版煕閺冿拷濞茬喎鐣烽妷褎鍠嗛柛鏇ㄥ幘閻﹀牊绻濋悽闈浶㈤柛濠冩倐瀵悂濡舵径瀣幈闂佺粯娲栭崐鍦拷姘炬嫹?
		if(hostid==objectid){
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 166006, 0, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return;
		}
		//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴閺佹劙宕ㄩ褏锟借京绱撻崒娆愮グ妞ゆ泦鍏炬稑鈹戠�ｎ亣鎽曞┑鐐村灦閻喖鈻介鍫熺厱闁圭偓銇炵欢銈夊箯閻戣棄绠抽柟鐐藉妿閹虫捇鈥﹂妸锔藉劅闁挎稑瀚鎾绘⒒娴ｅ憡鎯堥柣顓烆槺閹广垹鈹戦崱娆愭闂佺粯鎸哥花鍫曞绩娴犲鐓欓梺顓ㄧ畱楠炴劙鏌＄�ｎ亝鍣虹紒缁樼箓椤曘儵寮搁顫嫹閵堝鍚归悗锝庡枟閳锋帡鏌涢弴銊ヤ簻妞ゅ浚鍋婇弻銊╂偄閻戞ɑ鐝梺杞扮劍閹倸鐣烽姀锝庢▌濡炪們鍨洪敃銏ゅ箠濠靛绠ユい鏃傚亾濠㈡垿姊绘担鍛婃儓婵炲眰鍔嶉崚濠囶敇閻愬稄绲介悾锟犲箥閾忣偅鏉搁梻浣虹帛閸旀牕顭囧▎鎾村�堕柨鏇炲�归悡娆戠磼鐎ｎ偄顕滈柟鎻掓憸缁辨帡顢欓懞銉濠碘槅鍋勯崯顐︽箒缂備焦绋戝﹢杈╃矓椤旂瓔娈介柣鎰嚟婢ь剟鏌熷畡鐗堝殗鐎规洘顨嗗鍕拷锝庝簽濡差垶姊婚崒姘拷鐑芥嚄閸撲礁鍨濇い鏍仜閽冪喖鏌曟繛鐐珔閻熸瑱绠撻幃妤呮晲鎼搭垱瀚规い鏍ㄧ☉濞搭喗顨ラ悙鍙夊枠闁诡啫鍥ч唶闁靛繒濮寸粻浼存⒒閸屾瑧顦﹂柟璇х節瀹曟繈鏁傞悾宀婃锤濠电姴锕ょ�氼喗鏅堕敍鍕＝闁稿本鐟ㄩ崗宀勬煣韫囨捇鍙勭�规洏鍨虹缓浠嬪川婵犲倷鍑藉┑鐘绘涧閸婂鈥﹂崼銉﹀珔闁绘柨鍚嬮悡銉╂煟閺囩偛锟藉湱锟芥熬鎷�?闂傚倸鍊搁崐宄懊归崶褏鏆﹂柛顭戝亜閸ㄦ棃鏌熺紒銏犳灈缂佺媭鍨堕弻銊╂偆閸屾稑顏�?
		Team hostTeam = TeamManager.selectTeamByRoleId(hostid);
		if (hostTeam != null && hostTeam.isNormalMember(hostid)){
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 120061, 0, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return;
		}
		
		//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴椤㈡瑩鎮℃惔顔芥祰闂傚倷鑳堕…鍫燁殽閸濄儻鎷峰☉鎺撴珚濠碉紕鏁诲畷鐔碱敍濮樿京娼夐梻浣侯焾閺堫剛绮欓幒妤佸仧妞ゅ繐鐗婇埛鎴︽煙閼测晛浠滃┑鈥炽偢閺屾洟宕奸悢绋匡拷鎰拷娈垮枛椤兘寮幘缁樺亹闁肩⒈鍓﹀Σ褰掓⒒閸屾艾锟芥悂鎮ф繝鍕煓闁规儳顕々鐑芥煃閸濆嫭鍣洪柍閿嬪灴閹綊宕堕敐蹇斿鐎规洖娲ｉ幋椋庣磽閸屾瑦绁伴柛鈺傜墵閹虫繃銈ｉ崘鐐櫔闂佹寧绻傞ˇ顖炲垂閸屾稏浜滈柟鎵虫櫅閻忣喚绱掗幇顔间槐婵﹪缂氶妵鎰板箳閹存粌鏋堥梻浣告啞钃辩紒顔芥尭椤曪綁骞橀钘夛拷鍫曟偣閸ヮ亜鐨虹紒澶嬫そ閺岀喖顢欓悷鏉库拤闂佽鍨卞Λ鍐极閹版澘纾兼繛鎴炵啲閹风兘宕妷褏锛濋梺绋挎湰閻燂妇绮婇弶娆炬富闁哄鍨堕幉鎼佹煙楠炲灝鐏茬�规洜鍘ч…鍧楊敂閸涱垱鍒涢梺杞扮劍閹瑰洭寮幘缁樻櫢闁跨噦鎷�?闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼柇锕�鍔掓繛宸簻缁狅絾绻濋姀锛勭畵缂傚秴锕顐﹀箻缂佹ɑ娅㈤梺璺ㄥ櫐閹凤拷?闂傚倸鍊搁崐椋庣矆娓氾拷楠炲鏁撻悩鑼槷闂佹寧娲栭崐鎼佸磼閵娿儍褰掓偐瀹割喖鍓鹃梺杞版閻掞箓骞堥妸銉庣喖宕归鎯у缚闂備胶绮幐楣冨窗閺嶎厼钃熺�广儱顦导鐘绘煕閺団剝纭惧ù鍏煎姍濮婃椽宕崟闈涘壋闂佸摜濮甸悧鐘差嚕婵犳碍鏅插璺猴工閸炪劑姊哄Ч鍥х伄闁轰焦鐡曢埅鐢告⒑鐠囧弶鍞夋い顐㈩槸鐓ゆ繝濠傜墕缁�鍌涗繆椤栨繍鍞虹紒璇叉閺岀喖姊荤�靛壊妲梺缁樻尰閻╊垶寮诲☉姘勃闁芥ê顧�閹风兘鎮烽幊濠冩そ瀵粙顢橀悢铏规殺闂傚倸鍊烽懗鍓佸垝椤栫偛绠扮紒瀣紩閻熸壆鏆嬮柟娈垮枟閻︽捇姊婚崒姘拷鐑芥嚄閸洖鍌ㄧ憸鏃堝箖濡警娼╅悹鍝勬惈閻庮參姊虹粔鍡楀濞堟梻绱掗悩鍐插摵闁哄本鐩獮鍥濞戞瑧浜紓鍌欑筏閹风兘鎮楅敐搴′簴濞存粍绮撻弻鐔煎箲閹邦厾銆愰梺璺ㄥ枔閻℃棃宕戞繝鍥ф瀬闁告劦鍠栫壕鍏肩箾閹寸偠澹樻鐐茬Ч濮婄粯鎷呴懞銉с�婇梺闈╃秶缁犳捇鐛箛娑欐櫢闁跨噦鎷�?
		Team guestteam = TeamManager.selectTeamByRoleId(objectid);
		if(guestteam!=null){
			//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴椤㈡瑩鎮℃惔顔戒氦闂傚倷绀侀幉锟犳偡閵夆晜鏅濋柕澶嗘櫅妗呴梺鍛婃处閸ㄤ即宕橀敓浠嬫⒑闂堟丹娑氫沪閻愵剦鍟囬梻鍌氬�烽懗鍫曗�﹂崼鐕佹闁归棿鐒﹂弲婵囥亜韫囨挾澧曢柦鍐枑缁绘盯骞嬪▎蹇曚痪闂佸搫鎳忕划鎾诲蓟濞戞ǚ鏀介柛鈩冾殢娴犵厧顪冮妶搴′簻婵炲眰鍊濋崺鐐哄箣閿旂瓔锟芥劕顪冮妶鍡樼缂侇喗鎸搁～蹇旂鐎ｎ亞顦板銈嗘尪閸斿秶锟芥艾缍婇弻锝夊閵堝棙閿柣銏╁灥閸╂牠濡甸崟顖氱闁绘劘妫勬禒顕�鎮楃憴鍕闁哥姵鐗犻妴浣糕枎閹炬潙浜楅柟鑹版彧缁插潡寮抽悩缁樷拻闁稿本鑹鹃敓鐣屽厴閹偤鏁傞幘鍛缂佹绋戦幊鎰版儗濞嗘挻鐓欓弶鍫ョ畺濡绢噣鏌涢妶鍡楀闁靛洤瀚板浠嬵敃椤厽婢�闂備浇娉曢崰鏇炍涢崟顖氱疇闁规儳鍤㈤崶顒�鎹舵い鎾卞妽鐎氳绻涢崼婵堜虎闁哄鍊栭妵鍕敇閻愰潧鈪甸梺鐐藉劵缁犳挻淇婇幖浣哥厸濞达絼璀﹀Σ浼存⒒娴ｇ鏆遍柟纰卞亞閿熻姤鍑归崜鐔肩嵁閸℃稑閱囬柕澶涜吂閹峰姊虹粙鎸庢拱闁煎綊绠栭弫鎾绘嚍閵夛箑锟芥劗锟借娲﹂崹杈╋拷闈涖偢瀵爼骞嬮悩闈涚倞闂佽楠哥粻宥夊磿閸楃伝娲晝閸岋妇绋忛梺鍝勬储閸ㄦ椽鎮￠悢鍏肩厵闂侇叏绠戞晶濠氭煕閵堝洤鏋涢柡灞界Ф缁辨帒螣閻戔晜瀚婚梻渚�娼уú銈囷拷姘嵆閻涱喖顫滈敓钘夌暦閿熺姵鍊烽柛蹇撴憸濡垱绻濋悽闈涗粶妞ゆ洦鍘介幈銊╂偨閸涘﹥娅囬梺闈涚箞閸婃洜绮婚弽顓熺厽闁硅揪绲鹃ˉ澶愭煕濡ゅ嫭鐝柟渚垮妼铻ｉ柛婵嗗閸╃偞绻濆鏋�栭ˉ澶愭煃鐟欏嫬鐏撮柟顔界懇閹崇娀顢楁担鐟版灈闂傚倷鑳堕崕鐢稿疾閳哄懎鍨傞柛顐ｆ礃閸嬫ɑ銇勯弴顏呭濡ょ姷鍋涢澶愬极閸愵喗鏅稿ù鐘差儜缂嶆牠鏌涘☉妯兼憼闁绘挸绻橀弻娑㈩敃閿濆洨鐣洪梺缁樻惈閹风兘姊绘担鍛婃儓婵炲眰鍨藉畷鐟懊洪鍕幈闂佸湱鍎ら〃鍡涙偂閵夆晜鐓熼柡鍐ㄥ�搁崝瀣箾閸涱喗绀嬮柡宀�鍠栭幃鐑藉级濞嗗彞绱斿┑鐘殿暯閸撴繈骞冮崒鐐叉瀬闁稿瞼鍋為崐閿嬨亜閹哄秶璐伴柛鐔峰川d
			if(guestteam.isNormalMember(objectid)){
				objectid = guestteam.getTeamLeaderId();
			}
		}
		Role hostRole = RoleManager.getInstance().getRoleByID(hostid);
		if (hostRole == null)
			return ;
		
		Role gRole = RoleManager.getInstance().getRoleByID(objectid);
		if (gRole == null){
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 145001, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return ;
		}
		if(hostTeam != null && guestteam == null )
		{
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid,194038, null);
			return;
		}
		//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴椤㈡瑩鎮℃惔顔芥祰闂傚倷鐒﹂幃鍫曞磹閺囥垺鏅濋柕澶嗘櫅妗呴梺鍛婃处閸犳岸鎮块敓浠嬫⒑閸︻厼浜鹃柛鎾寸鐎靛ジ鏁撻悾宀�纾介柛灞剧懆閸忓苯鈹戦鐐毄闁轰緡鍣ｉ弫鎾绘偐閼艰埖鎲伴梻浣芥硶閸犳挻鎱ㄧ�靛摜鐭嗛悗锝庡枟閳锋帡鏌涢銈呮灁闁靛棙甯掗湁闁绘﹩鍋呭▍濠冩叏婵犲懏顏犻柟椋庡█閸ㄦ儳鐣烽崶锔藉煕缂傚倸鍊峰ù鍥春閺嶎厽鍤屽Δ锝呭暞閸嬧晠鏌ｉ幋锝呅撻柛濠傤煼閺岋箑螣閻氬绀嗛梺鍐叉惈閹冲繘鎮¤箛鎿冪唵閻犻缚娅ｆ晶鏇㈡煕閺傝法鎽犲ǎ鍥э躬椤㈡洟濮�閳ヨ櫕鐏庢繝娈垮枛閿曘儱顪冮挊澶屾殾妞ゆ劧绠戠粈瀣亜閹捐泛浜归柟鍑ょ節濮婄粯鎷呴崨濠傛殘闂佸湱顭堥悥鐓庣暦濠靛洦鍎熼柍顓滃劵缂嶄線鐛崶顒夋晞闁兼亽鍎查弶鎼佹⒑鐠囨彃鍤辩紓宥呮缁傚秴鈹戦崱娆愭閻庡箍鍎遍ˇ浼村煕閹达附鈷掗柛顐ゅ枍缁堕亶鏌ｉ幒妤冪暫闁哄本绋掗幆鏃堝Ω閵堝棗鏋ら梺鑺ヮ焽閸犳捇鏁撻悾灞绢仧闁归鍏橀弻娑㈠即閵娿儱顫梺鍛娚戦幃鍌氼潖濞差亜绀堥柟缁樺笂閼割亪姊虹粙娆惧剰閻庢凹鍙冨鏌ュ醇閺囥劍鏅┑鐐村灦椤ㄥ牏绮诲顒夋富闁靛牆妫楁慨澶娾攽椤旇姤灏﹂柡浣规崌閹崇偤濡烽敂缁㈡Ч闂備胶纭堕弬鍌炲垂閽樺鍤曟い鏇嫹鐎规洜鍘ч埞鎴﹀幢濡ゅ啨鍋栭梻鍌氬�烽懗鍓佸垝椤栫偛绀夋俊顖炴？閻掑﹥绻涢崱妤冪闁哄棗妫欑换娑㈠箣濞嗗繒浠鹃梺鎶芥敱鐢帡濡撮幒鎴僵妞ゆ帊鐒﹂幃娆愮箾鐎涙鐭嬫い銊ユ閹广垹鈽夐姀鐘甸獓闂佺懓顕崑娑㈠几閻樺樊娓婚柕鍫濆暙閻忣亞锟界櫢鎷烽柟闂撮檷閿熸垝绀佽灃闁告侗鍠楀▍銏ゆ⒑閸忛棿鑸柛搴㈠絻閳诲秹鏁撻敓锟�?
		MapConfig cfg = ConfigManager.getInstance().getConf(MapConfig.class).get(hostRole.getMapId());
		if(cfg.dynamic ==1){
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid,162002, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return ;
		}
		//缂傚倸鍊搁崐鎼佸磹閹间礁纾归柣鎴ｅГ閸婂潡鏌ㄩ弴顏呭濡炪値鍋勭换鎴犳崲濠靛棭娼╂い鎺戝亰缁遍亶姊绘担铏瑰笡闁告梹顨堥幑銏犫攽閸喎搴婇梺绯曞墲閻燂箓宕伴幇鐗堢厸闁稿本绻冪涵鍫曟煛閸☆厾鐣甸柡宀嬬秮楠炲鏁愰崱鈺傤棄濠电偟顥愰崑鎰箾閿熶粙鏌＄仦鍓ф创鐎殿喗鎸虫俊鎼佸Ψ閵夘喗浜ら梻浣筋嚙閸戠晫绱為崶顒�绠柣鎴ｅГ閳锋帡鏌涚仦鍓ф噮闁告柨绉归弻鐔碱敊閼测晛鐓熼悗瑙勬礃濞茬喖鐛惔銊﹀癄濠㈣泛鐭夌槐閬嶆⒒娴ｅ憡璐￠柛瀣尵濞嗐垽鎮欏ù瀣潔闂侀潧绻掓慨鍫ｎ樄闁哄本绋戦埥澶愬矗濡厧鍤梻浣筋嚙缁绘劙宕弶鎴綎婵炲樊浜滄导鐘绘煕閺囥劌澧紒鎰洴濮婅櫣绮欏▎鎯у壉闂佺儵鏅╅崹鍫曠嵁閸愩剮鏃堝川椤斿吋鐣伴梻浣稿暱閹碱偊宕鐐存櫖闊洦绋掗埛鎴︽偣閹帒濡兼繛鍛姍閺岀喖宕欓妶鍡楊伓?
		if (PvPHelperManager.isPvPMap(hostRole.getMapId())) {
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid,162002, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return ;
		}

		// 闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴椤㈡瑩鎮℃惔顔戒氦闂傚倷绀侀幉锟犳偡閵夆晜鏅濋柕澶嗘櫅妗呴梺鍛婃处閸ㄤ即宕橀敓浠嬫⒑闂堟丹娑氫沪閻愵剦鍟囬梻鍌氬�烽懗鍫曗�﹂崼鐕佹闁归棿鐒﹂弲婵囥亜韫囨挾澧曢柦鍐枑缁绘盯骞嬪▎蹇曚痪闂佸搫鎳忕划鎾诲蓟濞戞ǚ鏀介柛鈩冾殢娴犵厧顪冮妶搴″闁绘鎸搁～蹇涙倻濡警鍤ゅ┑鐐叉閸ㄥ綊濡堕悜鑺モ拺闁告稑锕ラ埛鎰版煕閵娧勬毈闁诡喗鍎抽悾锟犲箯閺冿拷濡啫鐣烽妸鈺婃晣闁搞儻绲惧▍濠囨煛鐏炵偓绀冪�垫澘瀚埥澶婎潩鏉堛劍顔忛梻浣筋嚙閸戠晫绱為崶顒�绠柣鎴ｅГ閳锋帡鏌涚仦鍓ф噮闁告柨绉归弻鐔碱敊閼测晛鐓熼悗瑙勬礃濞叉ê顭囪箛娑辨晝闁绘椴搁惈蹇涙⒒娴ｈ櫣甯涢柛鏃�顨婂畷鏇㈠Χ婢跺﹤鎯為梺鍓插亖閸庢煡鎮￠妷鈺傜厽闁哄洨鍋涢敓钘夋贡閿熻姤鐔幏锟�
		if(hostRole.getMapId() == PKDropConfig_CFGS.get(1).safeMapid)
		{
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid,162002, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
		}
		
		//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴椤㈡瑩鎮℃惔顔芥祰闂傚倷鐒﹂幃鍫曞磹閺囥垺鏅濋柕澶嗘櫅妗呴梺鍛婃处閸犳岸鎮块敓浠嬫⒑閸︻厼浜鹃柛鎾寸鐎靛ジ鏁撻悾宀�纾介柛灞剧懆閸忓苯鈹戦鐐毄闁轰緡鍣ｉ弫鎾绘偐閼艰埖鎲伴梻浣芥硶閸犳挻鎱ㄧ�靛摜鐭嗛悗锝庡枟閳锋帡鏌涢銈呮灁闁靛棙甯掗湁闁绘﹩鍋呭▍濠冩叏婵犲懏顏犻柟椋庡█閸ㄦ儳鐣烽崶锔藉煕缂傚倸鍊峰ù鍥春閺嶎厽鍤屽Δ锝呭暞閸嬧晠鏌ｉ幋锝呅撻柛濠傤煼閺岋箑螣閻氬绀嗛梺鍐叉惈閹冲繘鎮￠妷鈺傜厸闁搞儲婀圭花濂告倵濮橆剛绉烘慨濠呮閹风娀鎳犻鍌ゅ敼闂備胶鍎甸弲鈺呭垂鐠轰警鍤曞┑鐘崇閺呮悂鏌ｅΟ鍨毢闁挎稒绮岄埞鎴︽倷閺夋垹浼囨俊鐐茬摠閹倿骞冩ィ鍐╁�婚柤鎭掑劗閹锋椽姊虹涵鍛汗闁稿绋掓穱濠囧箹娴ｅ湱鍘遍梺鍝勫枦閹风兘鏌涢妸銉﹀仴闁绘侗鍠楃换婵嬪炊瑜忛鎺楁煟閻樺弶澶勭憸鏉垮暟缁絽鈽夐姀鈾�鎷绘繛鎾磋壘濞层倕顕ｉ崸妤佲拻闁告洦鍋勯顐ょ磼鏉堚晛浠辩�规洖宕埥澶娾枎鐏炴儳顏归梻鍌欐祰閻偊宕橀埡浣规畼闂佽瀛╅悢顒勫箯閿燂拷?
		BuffAgent hostAgent = new BuffRoleImpl(hostid, true);
		if (hostAgent.existBuff(BuffConstant.StateType.STATE_REPLAY)||hostAgent.existBuff(BuffConstant.StateType.STATE_BATTLE_FIGHTER)||hostAgent.existBuff(BuffConstant.StateType.STATE_BATTLE_WATCHER)) {
			MessageMgr.sendMsgNotify(hostid, 160494, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return;
		}
		xbean.Properties hostprop=xtable.Properties.select(hostid);
		if(hostprop.getCruise() > 0 ) {
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 162102, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return ;
		}
		
		if (hostAgent.existBuff(500343)) {
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 144999, 0, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return;
		}
		
		//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴婵拷闁斥晛鍟拌ぐ锝夋⒒娴ｅ憡璐￠柛蹇旓耿瀵劑鏌嗗鍛唵闂佸憡绋掑娆戠矆閸愵喗鐓熼柟浼存涧婢ф壆绱掓径灞藉幋婵﹦绮幏鍛村川婵犲啫鍓甸梻浣规た閸撴瑩濡剁粙璺ㄦ殾濞村吋娼欓崘锟介悷婊勭矒瀹曠敻寮撮悘璇茬秺瀹曟宕楅悡搴″闂備浇妗ㄧ粈浣虹矓閻㈢绠為柕濞垮労濞笺劑鏌涢埄鍐炬當缂佺姴缍婂娲川婵犲啫钄奸梺鍛婃⒐閸ㄧ敻锝炶箛鎾佹椽顢旈崪浣诡棃闂備礁鍟块幖顐わ拷姘煎櫍钘濆ù鐓庣摠閳锋垿鏌涘☉姗堟敾闁绘挶鍎靛铏规暜椤旀儳鍩岄梺浼欑悼閸忔﹢骞冩禒瀣窛濠电姴鍟鐔兼⒒娴ｈ姤纭堕柛锝忕畵楠炲繘鏁撻敓锟�
		if (!StateCommon.isOnlineBuffer(objectid)) {
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 145001, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return;
		}
		xbean.Properties guestprop=xtable.Properties.select(objectid);
		if(guestprop.getCruise() > 0) {
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 162103, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return ;
		}
		
		// 闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴閺佹劙宕ㄩ褏锟界兘姊绘担鍝ワ紞缂侇噮鍨拌灋闁告劦鍠栭拑鐔兼煛閸ャ儱鐏╅梺鍗炴处閵囧嫰骞掑鍥舵М濡炪倕楠忛幏锟�?闂傚倸鍊搁崐椋庣矆娓氾拷楠炲鍩勯崘顏嗘嚌濠德板�曢幊搴ｇ矆閸喓绠鹃柟瀛樼懃閻掓椽鏌℃担鍛婂缂佺粯绋戦蹇涱敊閼姐倕鍤梻浣瑰▕閺�杈╂暜閿熺姴钃熸繛鎴炵煯濞岊亪鏌熼鍡楀暞閻︽捇姊绘担瑙勫仩闁稿﹥顨婂畷浼村箛椤旇棄搴婂┑鐐村灟閸ㄥ綊鏌嬮崶顒佺厽闁哄啫鐗滃Λ鎴澝归悩灞傚仮婵﹥妞藉畷鐑筋敇閻旈攱鐣梺璇插閸戝綊宕滈悢鐓庢槬闁绘劕鎼粻锝夋煥閺囶亝瀚归梻浣稿船濞诧箓濡甸崟顖氱疀闁宠桨绶ら幏鐤樄妤犵偛绻橀幃婊堟嚍閵夛附顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
		if (!fire.pb.battle.PSendInvitePlayPK.checkRoleDistance(hostid, objectid)){
            fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 120063, 0, null);
            sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
            return ;
		}
		
		//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴椤㈡瑩鎮℃惔顔戒氦闂傚倷绀侀幉锟犳偡閵夆晜鏅濋柕澶嗘櫅妗呴梺鍛婃处閸ㄤ即宕橀敓浠嬫⒑闂堟丹娑氫沪閻愵剦鍟囬梻鍌氬�烽懗鍫曗�﹂崼鐕佹闁归棿鐒﹂弲婵囥亜韫囨挾澧曢柦鍐枛閺屻劑鎮㈤崫鍕戙垻绱掗敓鐣岋拷锝庡枟閳锋帡鏌涢銈呮灁闁靛棙甯掗湁闁绘ɑ鐟ラ幊鎰閽樺褰掓晲閸偅缍堥梺缁樻尪閸庣敻寮婚敐鍡楃疇闂佸憡鏌ㄥù鐑藉礆閹烘垟鏋庨柟閭﹀墰缁愮偤姊虹憴鍕凡闁诲繑宀稿鎻掝煥閸啿鎷洪梺鍛婃尰瑜板啯绂嶉悙鐑樼厱闁绘棃娼婚懓璺拷娈垮枟閹告娊骞冨Ο鍏煎珰闁肩⒈鍓涙闂備浇顕栭崰鎺楀礈濠靛绠氶柡鍐ㄧ墛閺咁剟鏌ら崜鎻掑闁跨喕濮ら悧婊堝箲閵忕姭妲堥柕蹇曞█閸炲爼姊虹紒妯活棃妞ゃ儲鎸荤�佃偐浠︽潪鎸庢閹晠妫冨☉妤冩崟婵＄偑鍊栭崹鐢杆囬悽鍛婂仒妞ゆ洩鎷风�规洖鐖奸、妤佸緞鐎ｎ偅鐝滄繝鐢靛仩閹活亞寰婃禒瀣疅闁跨喓濮甸崐鐢告煥閻曞倹瀚�
		if (guestteam != null){
			if(guestteam.getTeamLeaderId()==hostid){
				fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 160460, null);//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝夋交閼板潡寮堕崼姘珔闁搞劍绻冮妵鍕冀椤愵澀绮剁紓渚婃嫹濠㈣泛顑勭换鍡涙煏閸繃鍣洪柛锝囨嚀椤╁ジ宕ㄩ娑欐杸濡炪倖姊归弸缁樼瑹濞戙垺鐓曟慨妤嬫嫹缂佺姵鐗犲畷娲閵堝懐鐫勯梺绋跨焿闂勫嫮锟芥俺顫夐〃銉╂倷閼碱兛铏庨梺鍛婃⒐瀹�鎼佸蓟閿濆憘鏃堟晸閽樺）娑樷攽閸℃瑦娈鹃梺闈涚箞閸婃洜绮荤紒妯镐簻闁哄啫娉﹂幒妤�绠繛宸簼閳锋垿鎮归幁鎺戝婵炲懏鍔欓弻鐔煎礄閵堝棗顏�?闂傚倸鍊搁崐宄懊归崶褏鏆﹂柛顭戝亝閸欏繘鏌℃径瀣婵炲樊浜滃洿婵犮垼娉涢敃銈囪姳閵夆晜鈷戦柛婵嗗椤箓鏌涙惔銈勫惈缂侇喖顭峰浠嬵敇閻斿搫骞嶉梻浣筋嚃閸ㄥ酣宕橀悙顒侇啈缂傚倷鑳堕崑鎾诲磿閹惰棄围闁归棿绀侀拑鐔哥箾閹存瑥鐏╅柛妤佸▕閺屾洘绻涢崹顔煎Б婵炲濯崣鍐箖鐠轰警娼╂い鎾跺Х閻ゅ嫬鈹戦纭锋敾婵＄偠妫勮灋闁告劦鍠栭悡娑㈡煕鐏炴儳鍤ù纭锋嫹?
				sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
				return;
			}
			if(hostTeam!=null){
				if(guestteam.getTeamId()==hostTeam.getTeamId()){
					fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 160460, null);//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝夋交閼板潡寮堕崼姘珔闁搞劍绻冮妵鍕冀椤愵澀绮剁紓渚婃嫹濠㈣泛顑勭换鍡涙煏閸繃鍣洪柛锝囨嚀椤╁ジ宕ㄩ娑欐杸濡炪倖姊归弸缁樼瑹濞戙垺鐓曟慨妤嬫嫹缂佺姵鐗犲畷娲閵堝懐鐫勯梺绋跨焿闂勫嫮锟芥俺顫夐〃銉╂倷閼碱兛铏庨梺鍛婃⒐瀹�鎼佸蓟閿濆憘鏃堟晸閽樺）娑樷攽閸℃瑦娈鹃梺闈涚箞閸婃洜绮荤紒妯镐簻闁哄啫娉﹂幒妤�绠繛宸簼閳锋垿鎮归幁鎺戝婵炲懏鍔欓弻鐔煎礄閵堝棗顏�?闂傚倸鍊搁崐宄懊归崶褏鏆﹂柛顭戝亝閸欏繘鏌℃径瀣婵炲樊浜滃洿婵犮垼娉涢敃銈囪姳閵夆晜鈷戦柛婵嗗椤箓鏌涙惔銈勫惈缂侇喖顭峰浠嬵敇閻斿搫骞嶉梻浣筋嚃閸ㄥ酣宕橀悙顒侇啈缂傚倷鑳堕崑鎾诲磿閹惰棄围闁归棿绀侀拑鐔哥箾閹存瑥鐏╅柛妤佸▕閺屾洘绻涢崹顔煎Б婵炲濯崣鍐箖鐠轰警娼╂い鎾跺Х閻ゅ嫬鈹戦纭锋敾婵＄偠妫勮灋闁告劦鍠栭悡娑㈡煕鐏炴儳鍤ù纭锋嫹?
					sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
					return;
				}
			}
		}
		//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴婵拷闁斥晛鍟拌ぐ鍥р攽閿涘嫬浠ч柟铏崌瀹曨垶宕稿浼欐嫹閿旂偓宕夐柕濠忕畱绾绢垶姊洪幆褏绠版繝锟介柆宥呯妞ゆ牜鍋為埛鎴犵磽娴ｅ顏堝窗閺囥垺鐓欓柛鎴欏�栫�氾拷
		if(hostTeam!=null){
			List<Long> hostteamMembers = hostTeam.getNormalMemberIds();
			for (Long mem : hostteamMembers) {
				PropRole role = new PropRole(mem, true);
				if (role.getLevel() < CSendInvitePlayPK.PVP_LEVEL) {
					fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 162001 ,Arrays.asList(CSendInvitePlayPK.PVP_LEVEL+""));
					sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
					return ;
				}
			}
		}else{
			//闂傚倸鍊搁崐鎼佸磹閻戣姤鍤勯柛顐ｆ礀閸屻劎鎲搁弮鍫澪ラ柛鎰ㄦ櫆閸庣喖鏌曡箛瀣労婵炶尙顭堥埞鎴︽偐鐠囇冧紣闂佺懓鍟跨换鎰版偩閻戣棄绠甸柟瑙勵殔缂嶅﹪寮幇鏉块唶闁绘洑妞掗崫妤�鈹戦敍鍕户闁硅櫕鎹囧畷顖炲锤濡炰紮鎷烽敂鐐磯闁靛绠戠壕顖炴⒑閹呯婵狅拷闁秴绀夋い鏍仦閳锋垹绱撴担璇＄劷闁冲彞绶氶弻鐔煎川婵犲啫锟芥劙鏌涢埞鍨姕鐎垫澘瀚伴獮鍥敆閸屻倕鏅梺璇叉唉椤煤閺嵮�鏋栭柨鏇炲�稿敮闂佸啿鎼崐濠氬储闁秵鈷戠憸鐗堝笒娴滀即鏌涢幙鍕暤闁诡喒鍓濈缓浠嬪川婵犲嫬骞愬┑鐐舵彧缁蹭粙骞楀鍡楋拷鏉戔攽閻愬樊鍤熷┑顖氼嚟缁骞樼拠鑼暫濠电偛妫欓幖鈺呭极閸℃せ鏀介柣妯哄级瀹告繄锟借娲︽禍婊堝煘閹达附鍋愰柛顭戝亝濮ｅ嫰姊虹粙娆惧剱闁烩晩鍨靛Λ鐔兼⒑閸濆嫷妲归柨娑欐礀鐓ゆい蹇撴噹娴滄粓姊虹紒妯诲碍婵炲鍏橀弫宥呪枎閹惧鍘介柟鍏兼儗閸ㄥ磭绮旈悽鍛婄厱闁规儳鐡ㄩ惃鎴︽煥閻旇袚闁绘棏鍓熼獮蹇涙晸閿燂拷?
			PropRole propRole = new PropRole(hostid, true);
			if(propRole.getLevel()< CSendInvitePlayPK.PVP_LEVEL){
				fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 162000 ,null);
				sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
				return ;
			}
		}
		if(guestteam!=null){
			List<Long> guestteamMembers = guestteam.getNormalMemberIds();
			for (Long mem : guestteamMembers) {
				PropRole role = new PropRole(mem, true);
				if (role.getLevel() < CSendInvitePlayPK.PVP_LEVEL) {
					fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 160322 ,Arrays.asList(CSendInvitePlayPK.PVP_LEVEL+""));
					sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
					return ;
				}
			}
		}else{
			//闂傚倸鍊搁崐鎼佸磹閻戣姤鍤勯柛顐ｆ礀绾惧潡鏌ｉ姀銏╃劸闁汇倝绠栭弻宥夊传閸曨剙娅ｇ紓浣瑰姈椤ㄥ棙绌辨繝鍥ч柛娑卞枛濞呫倝姊虹粙娆惧剰妞わ妇鏁诲濠氬Ω閵夈垺鏂�闂佺硶鍓濋敋缂佹劖绋掓穱濠囨倷閸偄娈岄梺鍝ュ枎濞硷繝鍨鹃敂鐐磯闁靛绠戠壕顖炴⒑閹呯婵狅拷闁秴绀夋い鏍仦閳锋垹绱撴担璇＄劷闁冲彞绶氶弻鐔煎川婵犲啫锟芥劙鏌涢埞鍨姕鐎垫澘瀚伴獮鍥敆閸屻倕鏅梺璇叉唉椤煤閺嵮�鏋栭柨鏇炲�稿敮闂佸啿鎼崐濠氬储闁秵鈷戠憸鐗堝笒娴滀即鏌涢幙鍕暤闁诡喒鍓濈缓浠嬪川婵犲嫬骞愬┑鐐舵彧缁蹭粙骞楀鍡楋拷鏉戔攽閻愬樊鍤熷┑顖氼嚟缁骞樼拠鑼暫濠电偛妫欓幖鈺呭极閸℃せ鏀介柣妯哄级瀹告繄锟借娲︽禍婊堝煘閹达附鍋愰柛顭戝亝濮ｅ嫰姊虹粙娆惧剱闁烩晩鍨靛Λ鐔兼⒑閸濆嫷妲归柨娑欐礀鐓ゆい蹇撴噹娴滄粓姊虹紒妯诲碍婵炲鍏橀弫宥呪枎閹惧鍘介柟鍏兼儗閸ㄥ磭绮旈悽鍛婄厱闁规儳鐡ㄩ惃鎴︽煥閻旇袚闁绘棏鍓熼獮蹇涙晸閿燂拷?
			PropRole propRole = new PropRole(objectid, true);
			if(propRole.getLevel()< CSendInvitePlayPK.PVP_LEVEL){
				fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 160491 ,null);
				sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
				return ;
			}
		}
		// 濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴濐潟閿熻棄鍊圭粋鎺旓拷锝庡亝濞呫垽姊洪懞銉冾亪藝椤栫偛姹查梺顒�绉甸悡銉╂煟閺冨倻甯涙い銉ヮ槺缁辨挸顓奸崪鍐惈濡ょ姷鍋涢崯顐ョ亽闁荤姴娲╃亸娆戠玻閻愬绡�闁汇垽娼у瓭婵°倗濮烽…鍫ュ煝閹捐惟鐟滃繒澹曢挊澹濆綊鏁愰崱妤冪シ婵犫拃鍡楃毢缂佽鲸甯￠、娆撴嚍閵夈儳锛撴俊銈囧Х閸嬫稑螞濠靛棛鏆︽慨妤嬫嫹妞ゃ垺鐟╅幊鏍煛婵犲唭褍鈹戦敍鍕杭闁稿﹥娲滈幑銏ゅ箛閺夎法鐤囬梺褰掑亰閸忔﹢寮ㄩ敃鍌涚厱闁哄洢鍔岄悘锟犳煃闁垮鐏撮柡灞剧☉閳规垿宕卞Δ濠佺磻濠电姭鎷冮崟顒傤槰闂侀潧娲ょ�氫即寮崒婊勫珰闁肩⒈鍏涘鎾斥攽閻樻鏆滅紒杈ㄦ礋瀵偆鎷犻懠顒佹闂佸壊鍋呭ú鏍ㄥ劔闁荤喐绮嶇划宀�鍙呴梺褰掓？閻掞箓鎮″▎鎾寸厱闊洦鑹炬禍褰掓煛閸℃﹫鑰块柡灞剧♁缁绘盯宕归鍡樺闁哄洠鎳囬敓鏂ょ畵瀹曞爼顢楅敓鐣岀矆閸縿锟芥帒顫濋濠冩暰闁诲孩淇洪～澶屾崲濞戙垹閱囨繝闈涚墔閾忓酣姊洪崫鍕靛剭闁稿﹥绻堝濠氭晲婢跺娅囬梺璺ㄥ枍缁瑩鍨鹃敃鍌涘�婚柦妯侯槼閹芥洟姊洪幐搴ｇ畵妞わ富鍨遍崕顐︽⒒娓氾拷濞佳囁囬銏犵？闁绘垶顭囬々鐑芥煟閻旂顥愰柡锟介懞銉ｄ簻闁哄啫鍊告禍鐐亜韫囨洖鏋涢柡宀�鍠栧畷娆撳Χ閸℃浼�20缂傚倸鍊搁崐鎼佸磹閹间礁纾归柣鎴ｅГ閸ゅ嫰鏌涢幘鑼瓘闁瑰嘲鍢查～婵嬵敆閸屾粠鍟嬮柣搴ゎ潐濞插繘宕濋幋锔猴拷浣糕枎閹炬潙锟介攱銇勯幒宥囪窗闁哥喎鎳樺濠氬磼濮橆剨鎷锋搴ｇ焼濞撴熬鎷锋鐐差樀閺佸秹宕熼浣诡唶婵犲痉鏉匡拷鏇㈠箠韫囨稑纾婚柨鐔哄У閻撳繘鏌涢锝囩畺鐎瑰憡绻勭槐鎺楁偐閾忣偆鍙嗗銈庡弨濞夋洟骞戦崟顒傜懝妞ゆ牗鑹炬竟瀣繆閻愵亜锟芥劙寮插鍫熷亗闁跨喓濮撮拑鐔哥箾閹存瑥鐒洪柡浣稿暣閺屻劌鈹戦崱妯虹獩闂佷紮绲块弫鍝ユ閹惧瓨濯寸紒娑橆儏閺佷粙鏌ｉ悩娆忕У鐎氾拷
		if(hostRole != null && gRole != null )
		{
			int levelLimit = PKDropConfig_CFGS.get(1).levelLimit;
			PropRole role = new PropRole(hostid, true);
			PropRole guestrole = new PropRole(objectid, true);
			if ( Math.abs(role.getLevel() - guestrole.getLevel()) >= levelLimit) {
				fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 194037 ,null);
				sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
				return ;
			}
		}
		
		
		//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴椤㈡瑩鎮℃惔顔芥祰闂傚倷鑳堕…鍫燁殽閸濄儻鎷峰☉鎺撴珚濠碉紕鏁诲畷鐔碱敍濮樿京娼夐梻浣侯焾閺堫剛绮欓幒妤佸仧妞ゅ繐鐗婇埛鎴︽煙閼测晛浠滃┑鈥炽偢閺屾洟宕奸悢绋匡拷鎰拷娈垮枛椤兘寮幘缁樺亹闁肩⒈鍓﹀Σ褰掓⒒閸屾艾锟芥悂鎮ф繝鍕煓闁规儳顕々鐑芥煃閸濆嫭鍣洪柍閿嬪灴閹綊宕堕敐蹇斿鐎规洖娲ｉ幋椋庣磽閸屾瑦绁伴柛鈺傜墵閹虫繃銈ｉ崘鈺佷患闂佺粯鍨兼慨銈夊磹婵犳碍鐓㈡俊顖滃皑缁辨岸鏌嶉崫鍕櫤闁绘挶鍎甸弻锟犲礃閵婏妇銈╅梺鎼炲�栭悷銉╁煘閹达箑鐓�婵炲棗绻戞径鍕煟閹捐泛鏋涢柡灞炬礉缁犳稒绻濋崘鈺冨絽闂備浇顕ф蹇曞緤妤ｅ啫桅闁告洦鍨奸弫鍥煟閹扮増娑фい锝嗘そ濮婃椽骞愭惔銏紭闂佹悶鍔嬬划娆撴偘椤旂⒈娼ㄩ柨鐔剁矙閵嗕礁鈻庨幘鏉戞異闂佸疇妗ㄧ欢銈夊箯閻戣姤鏅搁柨鐕傛嫹?
		MapConfig cfg2 = ConfigManager.getInstance().getConf(MapConfig.class).get(gRole.getMapId());
		if(cfg2.dynamic ==1){
			//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗ù锝夋交閼板潡寮堕崼姘珔闁搞劍绻冮妵鍕冀椤愵澀绮剁紓渚婃嫹濠㈣泛顑勭换鍡涙煏閸繃鍣洪柛锝囨嚀椤╁ジ宕ㄩ娑欐杸濡炪倖姊婚悺鏃堟倿妤ｅ啯鐓曢柍鍝勫�绘晶鐢碉拷瑙勬礃濞叉﹢骞嗛弮鍫濈劦妞ゆ垼娉曢惄搴ㄦ⒒娴ｅ憡鎯堥柛鐕佸亰瀹曟劙鎮烽幍铏�洪梺鍝勬储閸ㄦ椽鎮￠弴銏＄厪濠电偛鐏濋崝姗�鏌涚�ｃ劌鐏查柡灞革拷宕囨殕閻庯綆鍓欓崺宀勬⒑瀹曞洦鍤�闁哥喐鎸抽獮鍐ㄢ枎閹垮啯鏅㈡繛杈剧到閹碱偆寰婇挊澶嗘斀闁挎稑瀚禍濂告煕婵犲啰澧电�殿喖顭锋俊姝岊槾闁活厽鎹囬弻锝夊閵忊剝姣勯梺娲诲幗閻熴儵鈥︾捄銊﹀磯濞撴凹鍨抽崣鏇㈡⒑閸涘﹨澹樻い鎴濐樀瀵鈽夊Ο閿嬵潔闂佸憡顨堥崑鐐烘倶閺囥垺鈷戦柛娑橈工閸ゎ剟鏌涚�ｎ亜顏柛鈺冨仱楠炲鏁傜紒妯绘珦闂備椒绱徊浠嬫儔婵傚壊鏁婇柛銉㈡櫇绾捐棄霉閿濆牊顥夌紒鎲嬪缁辨帡顢欓悾灞惧櫚濡ょ姷鍋涢崯瀛樹繆閻戣棄鐓涘〒姘炬嫹闁哥偛鐖煎娲传閸曨剙绐涢梺绋款儑閸嬫盯鎮鹃棃娑卞悑濠㈣泛顑傞幏娲⒑閸涘﹦绠撻悗姘槻鍗辩憸鐗堝笚閸婄數绱掑Δ浣衡槈闁硅櫕鍔欓幆灞惧緞閹邦厾鍙嗛梺缁樻礀閸婂湱锟芥熬鎷�
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid,140436, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return ;
		}
		//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴椤㈡瑩鎮℃惔顔戒氦闂傚倷绀侀幉锟犳偡閵夆晜鏅濋柕澶嗘櫅妗呴梺鍛婃处閸ㄤ即宕橀敓浠嬫⒑闂堟丹娑氫沪閻愵剦鍟囬梻鍌氬�烽懗鍫曗�﹂崼鐕佹闁归棿鐒﹂弲婵囥亜韫囨挾澧曢柦鍐枑缁绘盯骞嬪▎蹇曚痪闂佸搫鎳忕划鎾诲蓟濞戞ǚ鏀介柛鈩冾殢娴犵厧顪冮妶搴″妞わ箓娼ч～蹇撁洪鍕槶闂佽偐鈷堥崜娆戞暜閵夆晜鈷戦柛娑橈攻鐏忕敻鏌涢悩鏌ュ弰妞ゃ垺宀搁弫鎰緞濡粯娅岄梻浣芥硶閸犲酣鏁撻悾灞芥灁濞存粍鐟ラ埞鎴︽倷閼搁潧娑х紓浣藉紦缁瑩鐛Δ锟介…銊╁礋椤撗勭カ闂備浇顫夋竟鍡樻櫠濡ゅ懎鐓曢柟杈鹃檮閻撴洟鐓崶銊﹀碍闁诡喗鍨圭槐鎺楁嚋閻㈤潧寮ㄩ梺鍝勭灱閸犳牠骞栬ぐ鎺濇晝闁挎繂鎳愰敍鎾绘⒒娴ｇ懓顕滅紒璇插瀹曟垿濡堕崨顖涙闂佸壊鍋呭ú锕傚极閸℃稒鐓ラ柣鏃傚劋濞呮洜绱掗纰辩吋闁轰焦鎹囬弫鎾绘晸閿燂拷?     闂傚倸鍊搁崐宄懊归崶顒夋晪鐟滃繘鎳為柆宥嗗殐闁宠桨鑳剁粵蹇旂節閻㈤潧校闁绘棏鍓涚槐鐐哄冀瑜滈悢鍡涙煠閹间焦娑у┑顔兼喘閺岋箓宕橀鍕亪闂佸搫鐭夌紞浣割嚕椤曪拷瀹曟帒顫濋璺ㄥ笡闂傚倷绀佸﹢閬嶅箠閹剧粯鍋夊┑鍌滎焾閽冪喖鏌￠崶鈺佹灁缂佲槄鎷烽梻濠庡亜濞诧箑煤濠婂牆姹查柣妯肩帛閳锋垿鎮归崶顏勭毢缂佺姵鐓￠弻锝夊煛婵犲倻浠搁悗娈垮枛椤兘寮幘缁樺亹闁肩⒈鍓ㄧ槐鍙夌節閻㈤潧浠﹂柛銊ュ悑閵囨棃骞栨担鐟颁患闂佸壊鍋呭ú姗�鍩涢幋鐘冲枑闁绘鐗嗙粭姘舵煛娴ｇ鑸规い顓炴健閹兘鎮ч崼顐ｏ紗婵°倗濮烽崑娑⑺囬悽鍝ュ祦婵鎷锋い銏＄懇閹虫牠鍩＄�ｎ剙绨ユ繝鐢靛Х閺佹悂宕戦悙鍝勫瀭闁割偅娲嶉敓鏂ょ畵瀹曞爼濡歌濞村嫬鈹戦悩璇у伐閻庢凹鍠氱划缁樸偅閸愨晝鍘甸柣搴ｆ暩椤牊绂掗敃鍌涘�堕煫鍥风到楠炴绱掓潏銊ョ瑲鐎垫澘瀚禒锕傛寠婢跺﹦顓洪梺璇叉唉椤煤濮楋拷閵嗗啴宕ㄦ潏鍓х◤濠电姴锕ら悧濠囧疾閹间焦鐓㈡俊顖欒濡叉椽鏌￠崱顓犵暤闁哄被鍔岄埞鎴﹀幢閳哄倐锔剧磽娴ｅ搫顎撶紓宥勭窔瀵濡搁埡鍌氫簽闂佺鏈粙鎴︻敂閿燂拷?婵犵數濮烽弫鎼佸磻閻愬搫绠板┑鐘崇閸嬪嫭銇勯幒鎴濐仼缂佺媭鍨堕弻锝夊箣閿濆憛鎾绘煟閹惧瓨绀�闁宠鍨块幃鈺呭箵閹哄秶鏁栭梻浣侯焾鐎涒晠宕归崸妤�钃熼柣鏃傚帶缁�鍕煏閸繃顥滄い蹇ユ嫹?
		BuffAgent guestAgent = new BuffRoleImpl(objectid, true);
		if (guestAgent.existBuff(BuffConstant.StateType.STATE_REPLAY)||guestAgent.existBuff(BuffConstant.StateType.STATE_BATTLE_FIGHTER)||guestAgent.existBuff(BuffConstant.StateType.STATE_BATTLE_WATCHER)) {
			MessageMgr.sendMsgNotify(hostid, 144987, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return;
		}
		if (guestAgent.existBuff(500343)) {
			fire.pb.talk.MessageMgr.sendMsgNotify(hostid, 144999, 0, null);
			sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			return;
		}
		//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴椤㈡瑩鎮℃惔顔戒氦闂傚倷绀侀幉锟犳偡閵夆晜鏅濋柕澶嗘櫅妗呴梺鍛婃处閸ㄤ即宕橀敓浠嬫⒑闂堟丹娑氫沪閻愵剦鍟囬梻鍌氬�烽懗鍫曗�﹂崼鐕佹闁归棿鐒﹂弲婵囥亜韫囨挸顏存繛鍏肩墬缁绘稑顔忛缁樺枤闂佽桨绀侀敃顏堝蓟閻旇櫣鐭欓柛顭戝枤濡叉澘鈹戦埥鍡椾簻閻庢凹鍓熼崺鐐哄箣閿旇棄浜奸梺鍛婁緱閸犳牠顢旈懜鍏哥箚闁绘劦浜滈敓鑺ユ礈閹广垽骞囬悧鍫濅罕闂佺硶鍓濋悷褎绋夊鍛斀闁稿本纰嶉崯鐐烘煟閹惧瓨绀嬮柟顔斤耿閹瑩寮堕幋鐙�妲板┑鐘灱椤鏁冮姀鐙�娼栭柣鎴灻杈╃磽閸垹校闁哥姵宀稿娲传閸曨噮娼堕梺鍛婃煥閻倿宕洪妷锕�绶炲┑鐐灮閸犳牕鐣疯ぐ鎺濇晪闁告侗鍓涚壕鐐節绾板纾块柛瀣灴瀹曟劙骞囬弶鎸庣�銈呯箰閻楀棝鎮欐繝鍕枑鐎广儱顦崥褰掓煙鐎涙濡囬柡锟芥禒瀣厽婵☆垱顑欓崵瀣拷瑙勬偠閸庣敻寮诲☉銏″亞濞达絽鎽滄禒鎼佹⒑缂佹ɑ鎯勯柛鎾跺枛閵嗕礁螖閸涱厾顦板銈嗗笒閸婃悂鐛澶嬧拻濞达絿顭堥ˉ蹇涙煟閹惧磭澧︾�规洑鍗冲浠嬵敇閻斿憡顏熼梻浣稿悑娴滀粙宕曢幎钘夌闁告劦鍠楅悡蹇涙煕閵夛絽濡煎┑顔肩У椤ㄣ儵鎮欐潏鎹愶拷鎸庛亜閵忥紕鎳囬柟绋匡攻瀵板嫭绻濋崒銈嗩棆闂傚倸鍊峰ù鍥敋瑜忛敓鑺ョ▓閺呮繄鍒掑▎鎾崇婵°倓鐒﹀▍鏃�绻濋悽闈浶為柛銊у帶閳绘柨鈽夊杈╃厠閻熸粎澧楃敮鎺楁嫅閻斿摜绠鹃柟瀛樼懃閻忊晝绱掗悩鍐测枙闁哄瞼鍠撻敓鐣屾暩椤牊绂掑鍛＜闁归偊鍘鹃埥澶嬨亜椤忓嫬鏆ｅ┑鈥崇埣瀹曟﹢濡搁妷銉渐闂傚倷绀侀幉鈥愁潖瑜版帗鍋￠柍杞扮贰閸ゆ洘銇勯幇鈺佺労闁告艾顑夐弻娑㈠Ψ椤栫偞顎嶉梺鍛婃礀閸熸壆妲愰幘瀛樺闁革富鍘稿Σ鍫濐渻閵堝棗鐏ユ俊顐ｇ箞閻涱噣寮介鐐电杸闂佺粯顨呴悧鍐箯濞差亝鈷戦柛娑橈功缁犳捇鎮楀鍗炲幋鐎规洘娲熼獮鍥敊閸撗嶇床婵＄偑鍊栧Λ渚�宕戦幇顓熸珷闁靛繈鍨荤壕鍏笺亜閺囩偞鍣规鐐搭殘閿熻棄鐏氬妯硷拷姘嵆閻涱噣宕堕澶嬫櫌闂佽法鍠曞Λ鍕敋閿濆懐鏆嬮梺顓ㄩ檮鐎靛矂姊洪棃娑氬婵☆偅绋掗弲鍫曨敆閸屾粍锛忛梺鍝勵槼濞夋洘鏅ラ梻浣虹帛閹尖晠宕滈悢绗猴拷浣肝旈崨顓狀槹濡炪倖甯掗崐鎼佺嵁瀹ュ鈷掑ù锝囶焾椤ュ繘鏌ｉ幘宕囧ⅵ鐎规洑鍗冲浠嬵敇閻斿憡顏熼梻浣稿悑娴滀粙宕曢幎钘夌闁告劦鍠楅悡蹇涙煕閵夛絽濡煎┑顔肩У椤ㄣ儵鎮欐潏鎹愶拷鎸庛亜閵忥紕鎳呯紒顔炬暩閿熸枻缍嗛崑锟介柟闈╂嫹?闂傚倸鍊搁崐宄懊归崶褏鏆﹂柣銏㈩焾缁愭鏌熼柇锕�鍔掓繛宸簻缁狅綁鏌ｅΟ鍏兼毄闁绘帒鍚嬬换娑㈠箻鐎电鏆￠梺鍦厴椤ユ捇鏁撻崐鐕佹綈婵炲弶绻堥敐鐐村緞瀹�锟介惌澶愭煙閻戞ɑ顥栭柟椋庡厴閺佹劖鎯斿┑鍫濆毈婵＄偑鍊戦崕鑼崲閸岀偐锟芥棃宕橀鍢壯囨煕閳╁叐鎴﹀磿閹惧墎纾藉ù锝勭矙閸濈儤绻涢懠顒�鏋涙鐐插暞鐎靛ジ寮堕幋鐘插箰闂備礁鎲￠崝锔界閻愮儤鏅繝濠傜墛閳锋垹绱掔�ｎ偄顕滄繝锟芥导瀛樼厽闁绘梹绻傜�氼噣鍩㈤弮鍫熺厾缁炬澘宕晶鎵棯閹佸仮鐎殿喖鐖煎畷鐓庘槈濡警鐎风紓鍌欒兌婵兘宕戦妶澶婅摕闁挎繂鎳夊Σ鍫ユ煕濡ゅ啫浠﹂柣婵囩箞閹鈻撻崹顔界亾闂佽桨绀侀…鐑界嵁閸愨晝顩烽悗锝庡亜娴犳椽姊洪崜鑼帥闁稿瀚埢宥夊閵堝棌鎷婚梺绋挎湰閻熝囁囬敃鍌涚厵缁炬澘宕禍鐐烘煥閻旇袚婵ǜ鍔戝畷妤�螣閾忚娈鹃柣鐔哥懃鐎氼剟顢氶柆宥嗙厸濠㈣泛顑呴悘鈺呮煟閿濆洤浜剧紒缁樼洴楠炴锟界數顭堥弳锟犳⒑閸︻厼鍘存い銉︽崌閺佹捇宕愰悤浣圭秷濠电偛寮剁划鎾崇暦濡わ拷铻ｉ悹浣哥－缁犳岸姊鸿ぐ鎺擄紵缂侊拷娴ｅ憡鏆滈梻鍌欑劍鐎笛兠洪埡鍛闁绘垼濮ら悡銉╂煟閺傚灝顣抽柣顓熺懃闇夋繝濠傚暟閸╋絾顨ラ悙鎻掓殭妞ゎ偅绮撻弫鎾寸鐎ｎ亝鐎梺鐟板⒔缁垶寮查幖浣圭叆闁绘洖鍊圭�氾拷?
		GridPos hpos = hostRole.getPos().toGridPos();
		AreaInfo hareaInfo = MapUtil.getAreaInfo(hostRole.getMapId(), hpos.getX(), hpos.getY());
		GridPos gpos = gRole.getPos().toGridPos();
		AreaInfo gareaInfo = MapUtil.getAreaInfo(hostRole.getMapId(), gpos.getX(), gpos.getY());
		if(hareaInfo!=null&&hareaInfo.isQiecuoArea()&&gareaInfo!=null&&gareaInfo.isQiecuoArea()){
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢紒鎰殕缁绘盯骞嬮悙鍨櫗闂佸憡鐟ョ换姗�寮婚弴銏犻唶婵犻潧娲ら弲鐢告⒑閹稿海绠撴い锔诲灣缁鎮烽幊濠傜秺閺佹劙宕ㄩ鍏兼畼闁诲氦顫夐幐鍝ョ矓閻熼偊娼栨繛宸簼椤ュ牊绻涢幋锝勫惈闁告瑦宀稿濠氬磼濮橆剦浠奸柣搴㈢煯閸楁娊鎮伴锟藉畷鍗炩槈濡⒈妲版俊鐐�栧濠氬疾椤愶箑鍌ㄩ柛妤冨亹閺�浠嬫煟閹邦剙绾фい銉︾矌缁辨帞绱掑Ο鍝勵潕闂佸吋妞芥禍鍫曞箠閿熺姴围闁搞儮鏅槐鏌ユ⒑閸濆嫷妲搁柣妤�瀚板畷婵囨償閿濆洣绗夐梺缁樺姉閸庛倝鎮″▎鎰╀簻闁哄秲鍔忔竟妯汇亜韫囷絽浜伴柡灞诲姂閹垻鎷犲▓瀣尵缁辨帞锟斤綆鍋勫ù顕�鏌℃担鍓插剱缂佺粯绻堟慨锟介柨婵嗘閵嗘劗绱撴担鍓叉Ц缂傚秴锕悰顕�宕橀鍛幑闂佸憡绮堥悞锔界搹婵犵數濮烽弫鍛婃叏娴兼潙鍨傛繛宸簼閺呮繈鏌曡箛鏇炐ラ柡鍡閻ヮ亪顢橀悙鏉戞闂佹眹鍊ч幏鐑芥⒒娴ｅ憡鎯堟繛灞傚姂瀹曟洟骞囬鈺傜☉椤劑宕奸悢鍝勫箺闂佺懓鍚嬮幆宀勫垂瀹曞洨鐭撻柛顐ｆ礃閻撴瑩鏌涢幋娆忥拷鏍拷姘炬嫹?闂傚倸鍊搁崐椋庣矆娓氾拷楠炴牠顢曢妶蹇斿婵鍘ф晶浼存煙楠炲灝鐏叉鐐村浮瀵噣鏁撴禒瀣辈婵犲﹤鐗婇悡銉╂煟閺囩偛锟藉湱锟芥熬鎷�
			new PSendInvitePlayPK(hostid,objectid).submit();
		}
		else{
			//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣规偠閸庢椽宕滃▎鎴濐棜鐟滅増甯楅悡娑氾拷骞垮劚妤犳悂鐛弽顓熺參闁告劦浜滈弸娑㈡煛鐏炲墽娲村┑锛勫厴婵拷闁斥晛鍟拌ぐ锝夋⒒娴ｅ憡璐￠柛蹇旓耿瀵劑鏌嗗鍛唵闂佸憡绋掑娆戠矆閸愵喗鐓熼柟浼存涧婢ф壆绱掓径灞藉幋婵﹦绮幏鍛村川婵犲啫鍓甸梻浣规た閸撴瑩濡剁粙璺ㄦ殾濞村吋娼欓崘锟介悷婊勭矒瀹曠敻寮撮悘璇茬秺瀹曟宕楅悡搴″闂備浇妗ㄧ粈浣虹矓閻㈢绠為柕濞垮労濞笺劑鏌涢埄鍐炬當缂佺姴缍婂娲川婵犲啫钄奸梺鍛婃⒐閸ㄧ敻锝炶箛娑欐優闁革富鍘鹃悡鎾绘煟閻樺厖鑸柛鏂块叄椤㈡瑦寰勭�ｎ剛鐦堥梺姹囧灲濞佳勭濠婂牊鐓ラ柡鍥敓鑺ョ洴閹锟斤綆鍠楅埛鎴︽煕閿旇寮ㄦ俊鐐倐閺屾盯鎮╁畷鍥р拡缂備緡鍠栭悧鎾崇暦閸楃偐妲堟繛鍡樺灥楠炲牓姊绘笟锟藉褔藝椤撱垹鍨傞柛婵嗗閺嬪秹鏌熼崜褏绡�缂佽妫欓妵鍕箛闂堟稑顫柣搴㈢啲閹凤拷
			Integer refQcVal = GameSystemConfig.getSysConfig(objectid, SysConfigType.refuseqiecuo);
			if(refQcVal != null && refQcVal.intValue() == 1){
				fire.pb.talk.MessageMgr.sendMsgNotify(hostid,160426 , null);
				sendremoveTickTime(hostid);//闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌ㄩ悢鍝勑㈢痪鎯ь煼閺屾稑鈽夐崡鐐插濠电偛鐨烽弲鐘诲蓟閺囩喓绠鹃柣鎰靛墯閻濇洟姊虹粙娆惧剰闁稿﹤娼″濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閹烘鈷戠憸鐗堝俯濡垿鏌涜箛鏃撹�块柟顔诲嵆椤㈡岸鏁撻挊澶屾殾鐟滅増甯╅弫濠囨煕濞嗗秴鍔ゆ俊顐灦濮婂宕掑▎鎺戝帯缂佺虎鍘奸悥鐓庮嚕閹绘帩鐓ラ柛娑卞灣閻撴捇姊虹憴鍕婵炲鐩畷鐟扳攽鐎ｎ偆鍘撻梺鍛婄箓鐎氼厽鍒婃總鍛婄厸濞达絽鎽滄牎闂侀�涚┒閸斿矂锝炲鍫濆耿婵°倧鎷锋い顐亰濮婅櫣鎷犻垾铏亾闂佸憡顭嗛崶褏鍘撮梺纭呮彧闂勫嫰宕愰悜鑺ョ厸濠㈣泛顑呴悘鈺伱归悩铏唉婵﹨娅ｇ槐鎺戭潨閸℃鏆ユ繝纰樻閸嬪懐鎹㈤崼銉у祦闁告劦鍠楅崐閿嬨亜閹寸偛鍔ゅù婊勭箞濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩ柊锝夊箚閸儱绀嬫い鏍ㄧ〒閸樹粙姊虹紒姗嗙劷闁稿簺鍊濋、鏃堟偐缂佹鍘遍柟鐓庣摠缁嬫垿鏁撻懞銉х疄妤犵偛鍟撮幃浠嬪川婵犲啯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
				return;
			}
			PropRole propRole = new PropRole(hostid, true);
			String roleName=propRole.getName();//闂傚倸鍊搁崐鎼佸磹閻戣姤鍤勯柛鎾茬閸ㄦ繃銇勯弽銊с�掗柣婵嗙埣閺岋繝宕堕妷銉т患闂佹眹鍊楅崑鎾舵崲濞戙垹绠ｆ繛鍡楃箳閸旀挳姊烘潪鎵槮闁挎洩绠撻弫鎾绘寠婢跺瞼鏆涢梺绋块叄娴滄儼妫熷銈嗙墬缁秹宕伴崱娑欑叆闁哄喛鎷烽柟閿嬬箞楠炲繘鎮滈悾灞界ウ闂佸壊鐓堥崰鏍ㄦ叏鎼粹檧鏀介柣鎰▕濡狙呯磼閻樿櫕宕岀�殿噮鍋婇獮妯肩磼濡粯顏熼梻浣芥硶閸ｏ箓骞忛敓锟�
			int roleLv=propRole.getLevel();//缂傚倸鍊搁崐鎼佸磹閹间礁纾归柣鎴ｅГ閸婂潡鏌ㄩ弬鍨挃闁活厽鐟╅弻鐔封枎闄囬褍煤閿曪拷椤洩绠涘☉鎺炴嫹閿曞倸绠ｉ柣鎴濇閺咁剟姊婚崒娆愮グ婵炲娲熷畷鎶芥晝閸屾氨顔嗛梺璺ㄥ櫐閹凤拷
			int curTeamNum=0;//闂傚倸鍊峰ù鍥х暦閻㈢绐楅柟閭﹀枛閸ㄦ繈骞栧ǎ顒�鐏繛鍛У娣囧﹪濡堕崨顔兼缂備胶濮抽崡鎶藉蓟濞戞ǚ妲堟慨妤�鐗婇弫鎯р攽閻愬弶鍣藉┑鐑囨嫹闂佸搫鐭夌徊鍊熺亽闂佸吋绁撮弲娑氱箔閿熺姵鈷戦柟鎯板Г閺侀亶鏌熼悷鐗堝枠鐎殿喖顭烽弫鎰緞婵犲喚妫熼梻浣稿閻撳牓宕抽锟藉鎶藉閵忋垻锛濇繛鎾磋壘閿曘儳锟芥俺顫夌换婵嬫偨闂堟刀銏犆归悡搴㈠殗闁诡喚鍏橀弻鍥晜閹冩辈闂傚倷绀侀幉鈩冪瑹濡ゅ懎鍌ㄩ柛蹇涙？缁诲棙绻涘顔荤凹闁抽攱鍨块弻娑樷攽閸℃浠鹃梺鎸庣♁濡啴寮婚悢鐓庣闁靛牆妫楅锟�
			//闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閸愯弓鐢婚梻浣瑰濞叉牠宕愰幖浣稿瀭闁稿瞼鍋為悡銉╂煟閺囩偛锟藉湱锟芥熬鎷�?婵犵數濮烽弫鎼佸磻閻愬搫绠板┑鐘崇閸嬪嫭銇勯幒鎴濐仼缂佺媭鍨堕弻锝夊箣閿濆憛鎾绘煟閹惧瓨绀�闁宠鍨块幃鈺呭箵閹哄秶鏁栭梻浣侯焾鐎涒晠宕归崸妤�钃熼柣鏃傚帶缁�鍕煏閸繃顥滄い蹇ユ嫹?
			SInvitationPlayPK sInvitationPlayPK = new SInvitationPlayPK();
			//160422	5	闂傚倸鍊搁崐鎼佸磹閻戣姤鍤勯柛鎾茬閸ㄦ繃銇勯弽銊с�掗柣婵嗙埣閺岋繝宕堕妷銉т患闂佹眹鍊楅崑鎾舵崲濞戙垹绠ｆ繛鍡楃箳閸旀挳姊烘潪鎵槮闁挎洦浜濠氬Ω閳哄倸浜為梺绋挎湰缁嬫垿顢旈敓锟�$parameter1$($parameter2$缂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌曢崼婵愭Ц缂佺媭鍨堕弻銊╂偆閸屾稑顏�?)闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌曢崼婵愭Ц缂佺媭鍨堕弻銊╂偆閸屾稑顏�?闂傚倸鍊搁崐宄懊归崶褏鏆﹂柛顭戝亝閸欏繘鏌℃径瀣婵炲樊浜滈悡娑樏归敐鍥舵殰闁归鍏橀獮鎺懳旈敓浠嬪箲閼哥偣浜滈柟鎹愭硾鍟搁梺浼欑到閻栧ジ寮婚敐鍫㈢杸闁哄洨鍋橀幋鐑芥⒑缁嬫鍎愰柟绋款煼瀹曟碍绻濋崶褏顔掑銈嗘⒒閺咁偊宕㈤挊澶嗘斀闁宠棄妫楅悘銉︺亜閺囧棗鎳庣欢銈呪攽閻樺磭顣查柣鎾跺枛楠炴牕菐椤掞拷閿熻姤娲樼粋宥堛亹閹烘挾鍘介梺闈涱樈閸犳洟鏌囬鐐寸厸濞达綀顫夊畷宀勬煛娴ｈ宕岄柡浣规崌閺佹捇鏁撻敓锟�?	闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣告贡閸庛倝宕靛顑炴椽顢旈崟搴樻櫊閺屽秶锟界锟藉啿鏋ゆ俊顖ゆ嫹婵°倗濮烽崑娑樏洪鐑嗗殨闁告挷鐒﹀畷澶嬨亜椤撶喎鐏ラ柡鍌︽嫹闂傚倸鍊搁崐椋庣矆娴ｈ櫣绀婂┑鐘叉搐绾捐鈹戦悩鍙夋悙缂佹劖顨婇弻鐔煎箚瑜滈崵鐔搞亜閳哄啫鍘撮柡灞诲姂閹倝宕掑☉姗嗕紦
			//160423	5	$parameter1$闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮闁汇値鍠栭湁闁稿繐鍚嬬紞鎴犵磼閹邦収娈橀柨鐔绘缁犲秹宕曢崡鐏绘椽鏁冮崒锔剧◤闂佸搫娲㈤崹娲偂閵夆晜鐓熼柡鍥╁仜閿熻棄婀遍敓鑺ョ啲閹凤拷($parameter2$缂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌曢崼婵愭Ц缂佺媭鍨堕弻銊╂偆閸屾稑顏�?,$parameter3$/5)闂傚倸鍊搁崐鎼佸磹閹间礁纾瑰瀣椤愪粙鏌曢崼婵愭Ц缂佺媭鍨堕弻銊╂偆閸屾稑顏�?闂傚倸鍊搁崐宄懊归崶褏鏆﹂柛顭戝亝閸欏繘鏌℃径瀣婵炲樊浜滈悡娑樏归敐鍥舵殰闁归鍏橀獮鎺懳旈敓浠嬪箲閼哥偣浜滈柟鎹愭硾鍟搁梺浼欑到閻栧ジ寮婚敐鍫㈢杸闁哄洨鍋橀幋鐑芥⒑缁嬫鍎愰柟绋款煼瀹曟碍绻濋崶褏顔掑銈嗘⒒閺咁偊宕㈤挊澶嗘斀闁宠棄妫楅悘銉︺亜閺囧棗鎳庣欢銈呪攽閻樺磭顣查柣鎾跺枛楠炴牕菐椤掞拷閿熻姤娲樼粋宥堛亹閹烘挾鍘介梺闈涱樈閸犳洟鏌囬鐐寸厸濞达綀顫夊畷宀勬煛娴ｈ宕岄柡浣规崌閺佹捇鏁撻敓锟�?	闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫宥夊礋椤掍焦顔囬梻浣告贡閸庛倝宕靛顑炴椽顢旈崟搴樻櫊閺屽秶锟界锟藉啿鏋ゆ俊顖ゆ嫹婵°倗濮烽崑娑樏洪鐑嗗殨闁告挷鐒﹀畷澶嬨亜椤撶喎鐏ラ柡鍌︽嫹闂傚倸鍊搁崐椋庣矆娴ｈ櫣绀婂┑鐘叉搐绾捐鈹戦悩鍙夋悙缂佹劖顨婇弻鐔煎箚瑜滈崵鐔搞亜閳哄啫鍘撮柡灞诲姂閹倝宕掑☉姗嗕紦
			if (hostTeam != null){
				//濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴濐潟閿熻棄鍊圭粋鎺旓拷锝庡亝濞呫垽姊洪懞銉冾亪藝椤栫偛姹查梺顒�绉甸悡銉╂煟閺冨倻甯涙い銉ヮ槺缁辨挸顓奸崪鍐惈濡ょ姷鍋涢崯顐ョ亽闁荤姴娲╃亸娆戠玻閻愮儤鐓熼幖鎼灣缁夌敻鏌涜箛鏃撹�跨�殿喗鎮傚浠嬵敇閻斿嚖鎷烽崹顐闁绘劘灏欐禒銏ゆ煕閺冿拷绾板秵绌辨繝鍥舵晝闁挎繂娲﹂崳顕�姊洪懡銈呮殌闁搞儯鍔夐幏濠氭⒑缁嬫寧婀伴柤褰掔畺閺佹捇鎳為妷锕�锟芥劗锟借娲﹂崹杈╋拷闈涖偢瀵爼骞嬮悩闈涚倞闂傚倷绀侀幖顐ょ矙娓氾拷瀹曘垽鎮￠獮顔ㄥ洤钃熼柕澶涜吂閹峰搫顪冮妶鍡楅嚋闁圭兘顥撶槐鎺撳緞鐏炵偓姣堥悗娈垮枟閻擄繝銆佸Δ鍛妞ゆ帪鎷烽柨鐔绘閻栧ジ寮婚敐澶婄疀闁绘鐗婇柨顓熺箾鐎涙鐭掔紒鐘崇墵瀵鏁愭径瀣珳闁硅壈鎻槐鏇熺椤栨粎纾藉ù锝勭矙閸濇椽鎮介妤嬫嫹瀹曞洦娈鹃梺鍦劋閸ㄧ喖寮ㄦ禒瀣厱闁斥晛鍠氬▓鏇㈡煕鎼搭喕绨肩紒缁樼箞閹粙妫冨☉妤冩崟闂備胶绮〃鍛存晝椤忓嫮鏆︾憸鐗堝笒缁�鍫澝归敐鍫燁仩闁绘帒娼￠幃妤呯嵁閸喖濮庡┑鈽嗗亜闁帮絽鐣烽幋鐐电瘈闁告劦浜為鏇㈡⒑缁洖澧查柨姘舵煕閺傝锟芥繈寮婚悢纰辨晩缁炬澘宕崜杈╃磽娴ｈ櫣甯涢柣鈺婂灦閻涱喚锟斤綆鍠楅崐鐑芥煛婢跺鐏︽繛鍫亰濮婄粯鎷呮笟顖滃姼缂備降鍔嶅钘夌暦閹版澘鍗抽柣鎰皺閵堫偊姊婚崒娆戭槮缂傚秴锕よ灋閻犳亽鍔庨惌鍡椕归敐鍥у妺闁稿繑绮撻弻銊╂偄閸撲胶鐓撳┑顔硷攻濡炶棄鐣烽锕�绀嬫い鎺炴嫹妞わ腹鏅濈槐鎺楁倷椤掍胶鍑＄紓浣割槸缂嶅﹪鐛崱娑樼倞妞ゆ帊鐒﹀▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹
				if(!hostTeam.isAbsentMember(hostid)){
					curTeamNum=hostTeam.getNormalMemberIds().size();
				}
			}
			sInvitationPlayPK.sourceid=hostid;
			sInvitationPlayPK.rolelevel=roleLv;
			sInvitationPlayPK.rolename=roleName;
			sInvitationPlayPK.teamnum=curTeamNum;
			Onlines.getInstance().send(objectid, sInvitationPlayPK);
		}
		
	}
	

	/**
	 * 闂傚倸鍊搁崐鎼佸磹妞嬪海鐭嗗〒姘炬嫹妤犵偛顦甸弫鎾绘偐閸愯弓鐢婚梻浣瑰濞叉牠宕愰幖浣稿瀭闁稿瞼鍋為悡銉╂煟閺囩偛锟藉湱锟芥熬鎷�?婵犵數濮烽弫鎼佸磻閻樿绠垫い蹇撴缁躲倝鏌ら幁鎺戝姢闁绘繆娉涢埞鎴︽偐閸欏鎮欓柣鐔哥懕缁犳捇寮诲☉妯兼殕闁跨喍绮欏畷鎴︽倷閻戞ê浜楀┑鐐叉閹稿鎮″▎鎴犵＝濞达綁娼ч悘鈺傜箾閸涱啝鎴炵┍婵犲浂鏁冮柨婵嗘噽娴犳悂姊洪棃娑欐悙閻庢凹鍨崇划璇测槈閵忊剝娅滈梺鍛婁緱閸樻悂骞忛锔解拻濞达綀濮ら妴鍐磼閿熻姤鎷呴搹鍦厠闂佸湱铏庨崰妤呭磻閳哄倻绡�闂傚牊渚楅崕蹇曠磼閿熶粙宕橀鐣屽幍濡炪倖鐗曞Λ妤冿拷姘煎幖閳绘捇濮�閵堝棌鎷绘繛杈剧悼閻℃棃宕靛▎寰棃鎮╅崣澶嬪枑缂備緡鍠涢褔顢橀崗鐓庣窞濠电姴鍊婚敓绛嬪幖閳规垿鎮欓崣澶嗘灆婵炲瓨绮嶇划鎾愁嚕娴兼潙唯闁挎柨澧介鏇㈡⒑閻熼偊鍤熼柛瀣仱閹啴骞嬮敂鐣屽幈濠德板�撻懗鍫曘�傞弻銉︾厪闁搞儜鍐句純閻庢鍠曠划娆愪繆閹间礁惟闁靛鍠楅ˉ銈囩磽閸屾艾锟介绮堟担鍓插殨闁告挷绶ら幏椋庣箔濞戞ɑ鍣虹�规洖寮剁换娑㈠箣濞嗗繒浠肩紓浣哄缁插墽鎹㈠┑瀣棃婵炴垶鑹鹃。鍝勵渻閵堝繒绋绘俊鐐舵椤繘鎮滃Ο渚殼濠电偛妫欓崹纭呪叺缂傚倸鍊烽懗鑸垫叏閻㈠憡鍋嬮柡鍥ュ焺閺佸鏌ㄥ┑鍡╂▓闁轰礁锕弻锝夊箛闂堟稑顫╃紒鍓ц檸閸ㄨ泛顫忛搹鍦＜婵☆垵娅ｆ禒绋款渻閵堝骸骞栨繛娴嬫櫊婵＄敻骞囬悧鍫熸闂佽法鍣﹂幏锟�
	 * @param roleid
	 */
	public static void sendremoveTickTime(long roleid){
		SInvitationPlayPKResult sInvitationPlayPKResult=new SInvitationPlayPKResult();
		gnet.link.Onlines.getInstance().send(roleid, sInvitationPlayPKResult);
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 793687;

	public int getType() {
		return 793687;
	}

	public long objectid;

	public CInvitationPlayPK() {
	}

	public CInvitationPlayPK(long _objectid_) {
		this.objectid = _objectid_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(objectid);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		objectid = _os_.unmarshal_long();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof CInvitationPlayPK) {
			CInvitationPlayPK _o_ = (CInvitationPlayPK)_o1_;
			if (objectid != _o_.objectid) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)objectid;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(objectid).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(CInvitationPlayPK _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(objectid - _o_.objectid);
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

