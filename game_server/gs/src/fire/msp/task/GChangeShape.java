
package fire.msp.task;




import fire.pb.item.PEquipRideProc;
import fire.pb.item.Pack;
import fire.pb.move.SAddUserScreen;
import fire.pb.scene.manager.RoleManager;
import fire.pb.scene.movable.Role;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __GChangeShape__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class GChangeShape extends __GChangeShape__ {
	@Override
	protected void process() {
		// protocol handle
		fire.pb.scene.movable.Role  role = 
			fire.pb.scene.manager.RoleManager.getInstance().getRoleByID(playerid);
		if(role == null) return;
		if(null == role.getScene()) return;
		
		if(changetype == 0) {
			fire.pb.move.STransfromShape send = new fire.pb.move.STransfromShape();
			send.shape = shape;
			send.playerid = playerid;
			if(role.getModeid() == shape){
				role.setTransformid(0);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屾盯骞囬姘卞闂佹眹鍨归…宄邦潖缂佹ɑ濯撮柣鐔煎亰閸ゅ鈹戦悙鎻掔骇闁绘濮撮悾鐑藉箛閻楀牆浠洪梺鍛婄☉閿曘儱鈻嶉姀銈嗏拺闁告繂瀚敓钘夌埣瀹曟劕螖閸涱喖浠奸梺姹囧灮椤ｎ噣骞忔搴㈠枂闁告洦鍓涢ˇ銉╂⒑闂堟稓澧曢柟娴嬪墲缁岃鲸绻濋崶銊ワ拷濠氭煠閹帒鍔滄繛鍛缁辨捇宕掑▎鎴濆闂佹寧娲嶉弲娑滅亱闂佸憡绋戦悺銊╁煕閹烘鐓曢悘鐐插⒔閹冲懏銇勯敂鑲╃暤闁哄本鐩幃銏ゆ煥鐎ｎ亙娣俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐ゅ垝婵犳碍鍋愰悹鍥皺椤旀劕鈹戦悜鍥╃У闁告挻鐟︽穱濠冪鐎ｎ偆鍘辨繝鐢靛Т閸婄危婵犳碍鐓冮悷娆忓閻忔挳鏌熼瑙勬珚鐎规洩绲惧鍕節鎼粹懣鐔兼⒒閸屾瑨鍏岀紒顕呭灦楠炴劖銈ｉ崘銊х崶闂佸搫绋侀崢濂告嫅閻斿吋鐓熼柡鍌氱仢閹垿鏌ｉ幒宥囩煓闁哄被鍔戝鎾敂閸涱収浼撳┑掳鍊楁慨鐑藉磻閻愮儤鍋嬫繝濠傛噺椤洟鏌熼悜姗嗘當缂佺姷鏁婚弻鐔兼倻濡偐鐣奸梺鍛婅壘椤戝顫忓ú顏勪紶闁告洦鍘鹃崝鍦磽娴ｈ櫣甯涚紒璇插�块幃楣冩倻閽樺顔婂┑掳鍊ч幏椋庣磼閿熶粙宕橀鐣屽帾婵犵數濮寸换鎺楁偩鏉堛劊浜滈柨鏃囶潐濞呭﹥鎱ㄦ繝鍛仩缂佽鲸甯掕灒閻犲洦鐓￠悗铏圭磽閸屾瑧顦︽い鎴濇瀹曞綊宕稿Δ锟介悘鎶芥煥閺冨倸浜剧�规洖顦甸弻鏇熺節韫囨洜鏆犵紒鍓ц檸閸ㄨ泛顫忓ú顏勭畾鐟滃繒绮婚幎鑺ョ厵闁惧浚鍋呭畷宀勬煏閸℃锟藉摜鍙呭銈呯箰閹冲骞忓ú顏呪拺闁告稑锕﹂埥澶愭煥閺囨ê鍔﹂柟顕嗙節閹垽宕楅懖鈺佸箞濠电姷鏁告慨鎾疮閻楀牊娅犻梺顒�绉甸悡娆愵殽閻愯尙浠㈤柣蹇婃櫊閺屽秹鎸婃径妯烩枅婵犳鍣幏鐑芥⒑缂佹﹩鐒炬い鏇嗗洤鏋佺憸鐗堝笚閳锋帒霉閿濆牊顏犻悽顖涚♁娣囧﹪顢曢姀鐘虫闁芥鍠栭弻鐔兼倷椤掍胶绋囧銈嗘礉娴滎剟鏁撻悾灞绢仧闁归鍏橀弻娑㈠即閵娿儱顫╅梺璺ㄥ枙濡嫰鎮樺杈ㄥ床婵炴垯鍨归柋鍥ㄧ節闂堟稓澧旈柧蹇撻叄濮婃椽宕崟闈涘妧闂傚倸瀚�氼厾绮氭潏銊х瘈闁搞儴鍩栭弲婵嬫⒑闂堟稓绠冲┑顖ｅ幗鐎靛ジ宕橀瑙ｆ嫼闁荤姴娲犻敓鍊熸珪閻濇繄绱撴担鍝勑ｉ柣妤冨Т椤曪綁顢曢敃锟界粻鑽ょ磽娴ｅ顏呯瑜版帗鈷戦柤娴嬫杹閹凤繝鏌涢幙鍕暤鐎规洏鍎抽敓鏂ょ秵閸嬪倻鎹㈤崱娑欑厽闁规澘鍚�缁ㄥ鏌ㄩ悢璇残撻柣妤佹礉閻忓绻涙潏鍓хК妞ゎ偄顦靛畷锝堢疀濞戞瑧鍘梺鍓插亝缁诲秴危閹间焦鐓熼柕鍫濋濞呭秹鏌＄仦鐐缂佺姵绋撻敓鏂ょ秵娴滅兘骞忛悜钘夊唨妞ゆ挾鍋熼崢閬嶆⒑閸︻厼鍔嬮柛銈嗕亢閵囨劙骞掗幘瀛樼彸闂備焦鎮堕崕顖炲礉鐏炶В鏋旈悘鐐电摂濞撳鏌曢崼婵囶棡缂侊拷閸愵亞纾兼い鏂垮悑閹癸絾淇婇崣澶婂妤犵偞甯″顕�骞橀弶鎴紦闂備焦瀵х换鍌涱殽閸涘﹦顩叉繝濠傜墛閻撶喖鐓崶銊︽儎闁搞倗鍠栭弻銊╂偄鐠囨畫鎾淬亜閺冿拷閻楃姴鐣烽弶娆炬僵閻犺櫣鍎ら悗顒佺節閻㈤潧校闁告繂閰ｉ弫鎾诲箣閹烘棏妲柧缁樼墵閺屾稑鈽夐崡鐐茬闂佹寧绋掔划宀勫煘閹达附鍋愰悹鍥囧啩绱ｉ梻浣告憸閸ｃ儵宕戦崱娑樼疅闁圭虎鍠楅弲婵嬫煥閻斿墎鐭欓柛鈺冨仱楠炲鏁傞挊澶夋睏闂備礁澹婇悡鍫ュ磻閸涱厜鎺楀礋椤掑倻鐦堝┑鐐茬墕閻忔繈寮搁妶澶嬬厸濞达綀顫夐崐鎰拷瑙勬礈婢ф鎹㈠┑瀣＜闁靛牆鎳忛崐顖氣攽閻橆喖鐏辨繛澶嬬洴閺佸啴鏁冮崒姘亶闂備緡鍓欑粔鐢稿煕閹达附鐓曟繝闈涙椤忊晠鏌￠崱妯兼噰闁哄矉绲借灃闁跨喍绮欓弫鍐敂閸繄鐣洪梻鍕川缁鈽夊Ο閿嬵潔濠电偛妫欓崹鐢哥嵁閸喍绻嗛柣鎰典簻閿熻姤鐗犲畷婵婎槾鐎垫澘锕﹂幑鍕Ω瑜岀粭澶愭⒑閸濆嫮鈻夐柛妯圭矙閹繝寮撮姀锛勫弳濠电娀娼уΛ娆撳闯濞差亝鍋ｉ柟鏉垮绾捐法绱掓潏銊ョ瑲婵炵厧绻樻俊鎼佹晝閿熺晫鍠婂鍜佹富闁靛牆妫欑亸顓㈡煏閸埄鐒鹃柣锝囧厴閹垻鍠婃潏銊︽珝闂備胶绮敃銏狀焽瑜庨幆鏃�绻濋崒妤佹杸闂佺粯蓱椤旀牠寮抽娑楃箚闁圭粯甯楅崵鍥╋拷瑙勬礃閸ㄥ灝鐣烽悢纰辨晬婵浜弸鍐╃節濞堝灝鏋熸い銊﹀姍楠炲繑顦版惔顖涘婵炲牆鐏濆▍姗�鏌涚�ｎ亷韬柣娑卞枛铻ｉ柤娴嬫櫇閿涙粌鈹戦埥鍡楃仯缂侇噮鍨堕、鏃堟偄閸忓皷鎷绘繛杈剧秬婵倗娑甸崼鏇熺厱闁挎繂绻掗悾鍨殽閻愯尙绠婚柡浣规崌閺佹捇鏁撻敓锟�?
			}
			else
				role.setTransformid(shape);
			role.sendWhoSeeMeAndMe(send);
			Role addRole = RoleManager.getInstance().getRoleByID(role.getRoleID());
			SAddUserScreen sadduser = new SAddUserScreen();
			sadduser.rolelist.add(addRole.getRoleBasic());
			gnet.link.Onlines.getInstance().send(role.getRoleID(), sadduser);
		} else if(changetype == 1) {
			//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘劙婀侀梺绋跨箰閸氬绱為幋锔界厱闁靛鍎遍敓钘夋健瀵鏁愭径濠勵啋閻庤娲栧ú銈夊传濞差亝鈷戦柛婵嗗閸庢劙鏌ｅΔ渚囨畼闁瑰箍鍨归埥澶愬閻樻鍚呴梻浣虹帛閸旀瑥顭囪瀵娊鏁撻悩鏂ユ嫼闂佽崵鍠愬妯何ｆ繝姘厱闁靛骏绱曢崣锟介梺鎸庣箘閸嬫盯鍩為幋鐙呮嫹閿濆骸浜滃ù婊勵殜閺岀喖宕楅懖鈺傛闂佹悶鍔嶅Σ鎺楀Φ閹邦厽鍎熸い顐幘缁犳岸姊洪棃娑氬婵炲眰鍊曢弳鈺呮⒒娴ｄ警鐒炬い鎴濇閹嫰顢涘杈ㄦ濡炪倖鐗滈崕鎰板极瀹ュ棛绠鹃柟瀵稿仜閻掑綊鏌￠敓浠嬫惞椤愩倗鐦堥梺姹囧灲濞佳冪摥闂佽瀛╃喊宥夊箖閸岀偟宓侀煫鍥ㄧ♁閸婂鏌﹀Ο渚Ч鐎规挸绉撮—鍐Χ閸℃ê鏆楁繝娈垮枛绾绢參鎳為柆宥呯妞ゆ棁袙閹峰姊虹粙鎸庢拱闁煎綊绠栭弫鎾绘寠婢跺﹥些闂傚洤顦甸弻娑㈠Ψ閹存繃鍣烘繛鍫ョ畺濮婃椽宕滈懠顒�甯ラ梺绋款儏閹虫ê鐣烽敐鍫㈢杸婵炴垶鐟ч崢闈涱渻閵堝棛澧俊顐ｆ尦楠炲繘鎮滈懞銉у幐闁诲函缍嗘禍鐐存櫏闂備礁鎼悮顐﹀礉瀹�鍕厴闁硅揪绠戦獮銏ゆ煃閸濆嫬锟芥劙鏁傞崜褏锛濇繛杈剧悼閹虫挻鎱ㄩ崼鐔翠簻闁靛鍎婚煬顒傦拷娈垮枛椤兘宕归幆褏鏆﹂柛銉ｅ妽椤旀挻淇婇悙顏勶拷鏍洪弽顬稑鈻庨幋顖涘婵﹩鍓涚粔鐑樻叏婵犲啯銇濈�规洦鍋婂畷鐔兼濞戞ê顥庡┑鐘殿暯濡插懘宕戦崟顖氱柈闁哄鍩堥崵鏇炩攽閻樺疇澹橀幆鐔兼⒑閸愬弶鎯堥柛濠傛啞缁傚秹鎮欓悜妯锋嫼缂備礁顑嗙�笛冿耿閹殿喚纾奸悗锝庡亜閻忓瓨銇勯姀鈩冾棃闁轰焦鎹囬弫鎾绘晸閿燂拷
			if(shape == 0) {
				fire.pb.mission.SNpcFollowEnd send = new fire.pb.mission.SNpcFollowEnd();
				send.npcid = shape;
				role.send(send);
			} else {
				fire.pb.mission.SNpcFollowStart send = new fire.pb.mission.SNpcFollowStart();
				send.npcid = shape;
				role.send(send);
			}
		} else if(changetype == 2) {
			//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘劙婀侀梺绋跨箰閸氬绱為幋锔界厱闁靛鍎遍敓钘夋健瀵鏁愭径濠勵啋閻庤娲栧ú銈夊传濞差亝鈷戦柛婵嗗閸庢劙鏌ｅΔ渚囨畼闁瑰箍鍨归埥澶愬閻樻鍚呴梻浣虹帛閸旀瑥顭囪瀵娊鏁撻悩鏂ユ嫼闂佽崵鍠愬妯何ｆ繝姘厱闁靛骏绱曢崣锟介梺鎸庣箘閸嬫盯鍩為幋鐙呮嫹閿濆骸浜滃ù婊勵殜閺岀喖宕楅懖鈺傛闂佹悶鍔嶅Σ鎺楀Φ閹邦厽鍎熸い顐幘缁犳岸姊洪棃娑氬婵炲眰鍊曢弳鈺呮⒒娴ｄ警鐒炬い鎴濇閹嫰顢涘杈ㄦ濡炪倖鐗滈崕鎰板极瀹ュ棛绡�濠电姴鍊搁鈺呭箹閺夋埊宸ラ柍瑙勫灴閹晝绱掑Ο濠氭暘婵＄偑鍊栭崹鐢稿箠濮楋拷楠炲啫鈻庨幇顔剧槇闂佸憡娲﹂崜娆撳几閹达附鍊垫鐐茬仢閸旀碍銇勯敂鍨祮鐎规洘鍨块幃銏ゆ⒐閹邦喚鐣炬俊鐐�栭悧妤冩崲閸岀偛瑙﹂柛锔诲幘绾惧ジ鏌嶉挊澶嬪櫤閻庢艾缍婂濠氬磼濞嗘垹鐛㈠┑鐐板尃閸曞灚顔旈棅顐㈡处濞叉牜娆㈤妶澶嬬厱闁圭偓顨呯�氼剟宕㈢憴鍕箚闁靛牆绻掗崚浼存煕閻曚礁鐏﹂柟顕嗙節婵＄兘鍩￠崒婊冨箰闂備焦鎮堕崕娲偂娓氾拷椤㈡棃宕煎┑鍫Х闂備線娼ч悧鍡椕洪妸褍顥氬┑鍌滎焾缁狙囨煕椤愶絿顣叉繛鍛噹闇夐柣姗嗗亝濞呭洨绱掓潏銊ユ诞闁诡喒鏅涢悾鐑藉炊閵娿儱鐏″┑掳鍊楁慨鐑藉磻閻愮儤鏅濋柕蹇嬪�楀畵渚�鏌涢妷顔煎⒒闁轰礁娲弻锝夊即濮樺崬濡藉銈冨劚閻楁挸顫忕紒妯诲缂佹稑顑呭▓鎰版⒑閸濄儱校閻㈩垪锟芥剚鍤曢柡灞诲劜閸嬫劙鏌ょ喊鍗炲婵炲牊鍎抽埞鎴︻敊缁涘顓洪梺褰掝棑閸忔﹢寮婚悢椋庢殾闁搞儜锟介弸鍛渻閵堝啫鐏柣妤冨█閻涱噣骞囬鐔峰妳闂佺偨鍎寸亸娆撳礄鐟欏嫮绡�闁汇垽娼у暩闂佽桨绀侀幉锟犲箞閵娾晜鍊婚柦妯侯槹閻庮剟姊鸿ぐ鎺擄紵缂侊拷娴ｅ搫顥氱紓浣诡焽缁犻箖鏌熺�涙鎳冮柣蹇ｄ邯閺屾稓锟斤綆浜堕崕蹇涙煃鐟欏嫬鐏撮柟顔规櫊瀹曪絾寰勭�ｎ偄锟界兘姊绘担瑙勫仩闁告柨鐭傚畷鎰板锤濡わ拷閽冪喐绻涢幋鏃�鍣伴柨鐔告灮缁犳捇鐛�ｎ亖鏀介柛銉㈡櫅閽傚姊婚崒娆戝妽闁诡喖鐖煎畷鎰板冀椤�虫惈椤粓鏁撻懞銉ょ箚闁汇垻顭堢粈瀣亜閺嶃劍鐨戦柣顐㈠濮婅櫣绮欓幐搴㈡嫳闂佹椿鍙庨崰妤冪博閻旂厧鍗抽柕蹇婏拷绛规嫹閻㈠憡鍋℃繛鍡楃箰椤忣亞绱掗敓浠嬫晸閽樺娓婚柕鍫濈箰椤╊剟鏌℃担绛嬪殭妞ゆ洩绲剧换婵嗩潩椤戔斁鏅犻弻宥夊传閸曨偓鎷烽崨濠勵洸闁绘劗鍎ら埛鎴犵磼鐎ｎ偄顕滄繝锟介幍顔剧＜閻庯綆鍋勯悘瀛樸亜閵忊剝顥堥柡浣规崌閺佹捇鏁撻敓锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鎯у⒔缁垳鎹㈠☉銏犵闁绘垵妫涢崝顖氣攽閻愭潙鐏﹂懣銈夋煛鐎ｎ亪鍙勯柡宀�鍠栭幃娆擃敆娴ｈ櫣鈻忓┑鐐差嚟婵參宕ｉ崘顔肩畺鐎瑰嫰鍋婇悡銉╂煕閺囥劌澧伴柛娆忔濮婄儤瀵煎▎鎴炲仹闂佺绻戣摫濞ｅ洤锕幃婊堟寠婢跺苯骞愰梻浣侯焾閺堫剛绮欓幒妤婃晜闁绘柨鍚嬮埛鎺懨归敐鍫澬撶痪顓炵埣閺屾盯鏁愯箛鏇犳殼濡ょ姷鍋涚换姗�寮幘缁樻櫢闁跨噦鎷�
			xbean.TransfromInfo ti = xtable.Transfromroles.select(playerid);
			int rideid = 0;
			if (ti != null) {
				rideid = ti.getRide();
			}
			fire.pb.move.STransfromShape send = new fire.pb.move.STransfromShape();
			send.shape = shape;
			send.playerid = playerid;
			if(role.getModeid() == shape) {
				role.setTransformid(0);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姍閺屾盯骞囬姘卞闂佹眹鍨归…宄邦潖缂佹ɑ濯撮柣鐔煎亰閸ゅ鈹戦悙鎻掔骇闁绘濮撮悾鐑藉箛閻楀牆浠洪梺鍛婄☉閿曘儱鈻嶉姀銈嗏拺闁告繂瀚敓钘夌埣瀹曟劕螖閸涱喖浠奸梺姹囧灮椤ｎ噣骞忔搴㈠枂闁告洦鍓涢ˇ銉╂⒑闂堟稓澧曢柟娴嬪墲缁岃鲸绻濋崶銊ワ拷濠氭煠閹帒鍔滄繛鍛缁辨捇宕掑▎鎴濆闂佹寧娲嶉弲娑滅亱闂佸憡绋戦悺銊╁煕閹烘鐓曢悘鐐插⒔閹冲懏銇勯敂鑲╃暤闁哄本鐩幃銏ゆ煥鐎ｎ亙娣俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐ゅ垝婵犳碍鍋愰悹鍥皺椤旀劕鈹戦悜鍥╃У闁告挻鐟︽穱濠冪鐎ｎ偆鍘辨繝鐢靛Т閸婄危婵犳碍鐓冮悷娆忓閻忔挳鏌熼瑙勬珚鐎规洩绲惧鍕節鎼粹懣鐔兼⒒閸屾瑨鍏岀紒顕呭灦楠炴劖銈ｉ崘銊х崶闂佸搫绋侀崢濂告嫅閻斿吋鐓熼柡鍌氱仢閹垿鏌ｉ幒宥囩煓闁哄被鍔戝鎾敂閸涱収浼撳┑掳鍊楁慨鐑藉磻閻愮儤鍋嬫繝濠傛噺椤洟鏌熼悜姗嗘當缂佺姷鏁婚弻鐔兼倻濡偐鐣奸梺鍛婅壘椤戝顫忓ú顏勪紶闁告洦鍘鹃崝鍦磽娴ｈ櫣甯涚紒璇插�块幃楣冩倻閽樺顔婂┑掳鍊ч幏椋庣磼閿熶粙宕橀鐣屽帾婵犵數濮寸换鎺楁偩鏉堛劊浜滈柨鏃囶潐濞呭﹥鎱ㄦ繝鍛仩缂佽鲸甯掕灒閻犲洦鐓￠悗铏圭磽閸屾瑧顦︽い鎴濇瀹曞綊宕稿Δ锟介悘鎶芥煥閺冨倸浜剧�规洖顦甸弻鏇熺節韫囨洜鏆犵紒鍓ц檸閸ㄨ泛顫忓ú顏勭畾鐟滃繒绮婚幎鑺ョ厵闁惧浚鍋呭畷宀勬煏閸℃锟藉摜鍙呭銈呯箰閹冲骞忓ú顏呪拺闁告稑锕﹂埥澶愭煥閺囨ê鍔﹂柟顕嗙節閹垽宕楅懖鈺佸箞濠电姷鏁告慨鎾疮閻楀牊娅犻梺顒�绉甸悡娆愵殽閻愯尙浠㈤柣蹇婃櫊閺屽秹鎸婃径妯烩枅婵犳鍣幏鐑芥⒑缂佹﹩鐒炬い鏇嗗洤鏋佺憸鐗堝笚閳锋帒霉閿濆牊顏犻悽顖涚♁娣囧﹪顢曢姀鐘虫闁芥鍠栭弻鐔兼倷椤掍胶绋囧銈嗘礉娴滎剟鏁撻悾灞绢仧闁归鍏橀弻娑㈠即閵娿儱顫╅梺璺ㄥ枙濡嫰鎮樺杈ㄥ床婵炴垯鍨归柋鍥ㄧ節闂堟稓澧旈柧蹇撻叄濮婃椽宕崟闈涘妧闂傚倸瀚�氼厾绮氭潏銊х瘈闁搞儴鍩栭弲婵嬫⒑闂堟稓绠冲┑顖ｅ幗鐎靛ジ宕橀瑙ｆ嫼闁荤姴娲犻敓鍊熸珪閻濇繄绱撴担鍝勑ｉ柣妤冨Т椤曪綁顢曢敃锟界粻鑽ょ磽娴ｅ顏呯瑜版帗鈷戦柤娴嬫杹閹凤繝鏌涢幙鍕暤鐎规洏鍎抽敓鏂ょ秵閸嬪倻鎹㈤崱娑欑厽闁规澘鍚�缁ㄥ鏌ㄩ悢璇残撻柣妤佹礉閻忓绻涙潏鍓хК妞ゎ偄顦靛畷锝堢疀濞戞瑧鍘梺鍓插亝缁诲秴危閹间焦鐓熼柕鍫濋濞呭秹鏌＄仦鐐缂佺姵绋撻敓鏂ょ秵娴滅兘骞忛悜钘夊唨妞ゆ挾鍋熼崢閬嶆⒑閸︻厼鍔嬮柛銈嗕亢閵囨劙骞掗幘瀛樼彸闂備焦鎮堕崕顖炲礉鐏炶В鏋旈悘鐐电摂濞撳鏌曢崼婵囶棡缂侊拷閸愵亞纾兼い鏂垮悑閹癸絾淇婇崣澶婂妤犵偞甯″顕�骞橀弶鎴紦闂備焦瀵х换鍌涱殽閸涘﹦顩叉繝濠傜墛閻撶喖鐓崶銊︽儎闁搞倗鍠栭弻銊╂偄鐠囨畫鎾淬亜閺冿拷閻楃姴鐣烽弶娆炬僵閻犺櫣鍎ら悗顒佺節閻㈤潧校闁告繂閰ｉ弫鎾诲箣閹烘棏妲柧缁樼墵閺屾稑鈽夐崡鐐茬闂佹寧绋掔划宀勫煘閹达附鍋愰悹鍥囧啩绱ｉ梻浣告憸閸ｃ儵宕戦崱娑樼疅闁圭虎鍠楅弲婵嬫煥閻斿墎鐭欓柛鈺冨仱楠炲鏁傞挊澶夋睏闂備礁澹婇悡鍫ュ磻閸涱厜鎺楀礋椤掑倻鐦堝┑鐐茬墕閻忔繈寮搁妶澶嬬厸濞达綀顫夐崐鎰拷瑙勬礈婢ф鎹㈠┑瀣＜闁靛牆鎳忛崐顖氣攽閻橆喖鐏辨繛澶嬬洴閺佸啴鏁冮崒姘亶闂備緡鍓欑粔鐢稿煕閹达附鐓曟繝闈涙椤忊晠鏌￠崱妯兼噰闁哄矉绲借灃闁跨喍绮欓弫鍐敂閸繄鐣洪梻鍕川缁鈽夊Ο閿嬵潔濠电偛妫欓崹鐢哥嵁閸喍绻嗛柣鎰典簻閿熻姤鐗犲畷婵婎槾鐎垫澘锕﹂幑鍕Ω瑜岀粭澶愭⒑閸濆嫮鈻夐柛妯圭矙閹繝寮撮姀锛勫弳濠电娀娼уΛ娆撳闯濞差亝鍋ｉ柟鏉垮绾捐法绱掓潏銊ョ瑲婵炵厧绻樻俊鎼佹晝閿熺晫鍠婂鍜佹富闁靛牆妫欑亸顓㈡煏閸埄鐒鹃柣锝囧厴閹垻鍠婃潏銊︽珝闂備胶绮敃銏狀焽瑜庨幆鏃�绻濋崒妤佹杸闂佺粯蓱椤旀牠寮抽娑楃箚闁圭粯甯楅崵鍥╋拷瑙勬礃閸ㄥ灝鐣烽悢纰辨晬婵浜弸鍐╃節濞堝灝鏋熸い銊﹀姍楠炲繑顦版惔顖涘婵炲牆鐏濆▍姗�鏌涚�ｎ亷韬柣娑卞枛铻ｉ柤娴嬫櫇閿涙粌鈹戦埥鍡楃仯缂侇噮鍨堕、鏃堟偄閸忓皷鎷绘繛杈剧秬婵倗娑甸崼鏇熺厱闁挎繂绻掗悾鍨殽閻愯尙绠婚柡浣规崌閺佹捇鏁撻敓锟�?
			}
			else {
				role.setTransformid(shape);
			}
			role.sendWhoSeeMeAndMe(send);	
			if(rideid > 0){
				final Pack bag = (Pack)fire.pb.item.Module.getInstance().getItemMaps(role.getRoleID(), fire.pb.item.BagTypes.BAG, true);
				if (bag.getItemNum(rideid, 0) > 0) 
					new PEquipRideProc(playerid, rideid, -1).submit();
			}
			Role addRole = RoleManager.getInstance().getRoleByID(role.getRoleID());
			SAddUserScreen sadduser = new SAddUserScreen();
			sadduser.rolelist.add(addRole.getRoleBasic());
			gnet.link.Onlines.getInstance().send(role.getRoleID(), sadduser);
		} else if (changetype == 3) {
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍敓鐣屾嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐差渻閵堝棗绗掗柨鏇缁瑨绠涢弮鍌滅槇闂侀潧楠忕徊鍓ф兜閻愵兙浜滈柟瀛樼箖閸犳﹢鏌曢崱妤佸殗妤犵偞鎹囬獮鎴澪旈敓鐣岀礊婵犲洤绠栭柍杞扮贰閸熷懏銇勯弮鍌氬付濠㈢懓鐗忕槐鎾存媴閸濆嫪澹曢梺绋垮婵炲﹪骞冨Ο琛℃斀閻庯綆鍋嗛悾鎶芥⒒閸屾瑨鍏屾い顓炵墢閹广垽骞囬弶鑳曢柣搴秵閸撴稓绮堟繝鍥ㄧ厵閻庣數顭堝暩缂佺偓鍎抽妶鎼佸蓟閿濆憘鐔兼惞閻у摜绀婇梻浣告啞閻熼亶骞忛悜鑺モ拻濞达絽鎲￠幆鍫ユ煛閸偄澧悡銈嗙節闂堟稓澧㈠☉鎾崇У缁绘盯骞嬮悙闈涙殹闂佸綊顥撻崗姗�寮幇顓熷劅婵犻潧娲ら敓鏂ょ秮濮婇缚銇愰幒婵囶棖闂佺绻戦敋妞ゆ洩缍侀獮姗�顢欓挊澶夋睏闂備焦鐪归崹濠氬极閹间礁绀夐悹楦裤��閺�浠嬫煟濮楀棗鏋涢柣蹇涗憾閺屾盯鍩￠崒婊冣拰閻庤娲樼换鍫濐嚕娴犲鏁囬柣鏃囨腹缁ㄧ敻姊绘担鍛婂暈闁告棑绠撳畷鏉课旈崨顔间簵闂佸憡鍔﹂崰鏍棯瑜旈弻锝夊箛椤撶喓绋囧銈冨劚椤戝棝濡甸崟顖涙櫆闁兼祴鏅濋弳銈夋⒑閸濆嫮鐒跨紒缁樼箓閻ｇ兘宕￠悙鈺傜�婚棅顐㈡搐鐎涒晠宕熼崘顔解拻濞撴熬鎷锋繛浣冲厾娲Χ閸ラ攱瀚规慨妯煎帶閻忥箓鏌熼鍝勭仾缂佹鍠栭弫鎾寸鐎ｎ亣鎽曞┑鐐村灦閿曗晠鎮￠妷鈺傜厱闁规壋鏅涙俊鑺ョ箾閸喓鍙�闁哄矉绲鹃幆鏃堝閿濆拋妫熸繝鐢靛閹风兘姊洪锟界粔鐢稿磿婢跺浜滈煫鍥ㄦ尵婢ф洜绱掗悪娆忓缁犻箖鏌涢埄鍐噧濞存粓绠栧顐﹀醇閵夛腹鎷洪柣鐘叉处瑜板啴顢楅姀銈嗙厽闁哄啯鍨垫晶瀛橆殽閻愯尙绠婚柡浣规崌閺佹捇鏁撻敓锟�?婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婎潊闁绘ê妯婂Λ宀勬⒑鏉炴壆顦﹂柨鏇ㄤ邯瀵鍨鹃幇浣告倯闁硅偐琛ラ敓钘夌－椤旀劗绱撻崒娆戝妽闁告梹鐗犻妴鍐╃節閸パ嗘憰闂佺偨鍎查崜姘跺触鐎ｎ喖绠圭紒顔炬閹风兘宕樺顔煎Η闂傚倸鍊峰ù鍥ь浖閵娧呯焼濞达絿灏ㄩ幏宄邦潩椤愩垹绁悗娈垮枦椤曆囧煡婢跺á鐔兼煥鐎ｅ灚缍岄梻鍌欑閹诧繝銆冮崼銉ョ；闁绘柨鎽滈々閿嬨亜閹惧崬鐏柣鎾跺枛楠炴牕菐椤掞拷閻忓崬顭跨憴鍕嗘垿濡甸崟顖ｆ晣闁绘ɑ褰冮獮瀣倵濞堝灝鏋涙い顓犲厴瀹曟椽宕熼姘鳖槰闂侀潧臎閸涱垰绁﹂梻鍌欒兌閹虫捇宕ョ�ｎ喖绠氱�癸拷閸曨偄鐎梺鍓插亝濞叉﹢宕戝Ο鑽ょ瘈濠电姴鍊绘晶娑㈡煃闁垮鐏撮柟顔肩秺楠炰線骞掗幋婵愮�抽梻浣告惈椤戝棝宕归崸妤�钃熼柨娑樺閹风兘鏁愭惔婵囧枤闂佺粯鎸搁崥瀣�冮妷鈺傚�烽柤纰卞墰椤旀帡姊烘潪鎵妽闁圭懓娲顐﹀箻缂佹ɑ娅㈤梺璺ㄥ櫐閹凤拷?
		//	role.setCruiseid(shape);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幈濡炪値鍘介崹鍨濠靛鐓曟繛鍡楃箳缁犳娊鏌ㄩ悢鍑ゆ嫹閻曚焦缍堝┑鐐插级閻楁洜鍙呴梺闈浥堥弲婊堝磿濡ゅ懏鐓曢柍鈺佸枤濡懐鎲搁悧鍫濈瑲闁哄懏鐓￠弻娑㈩敃椤愵澀绨肩紓鍌氱Т閻楀棝鍩為幋锔藉�烽柛娆忣槸濞呇勭節濞堝灝鏋熼柟绋垮暱閿曘垺绗熼敓钘夘潖閾忓湱纾兼俊顖氭禋娴滄粏鐏掓繝鐢靛Т濞层倗澹曢崸妤佺厵闁规鍠栭。濂告煟閹惧瓨绀嬮柟顔筋殜閺佹劙宕ㄩ鐔凤拷搴ㄦ⒒娓氬洤寮鹃柛銊ョ埣瀵鏁嶉崟顏呭媰闂佸憡鎸嗛崟顐㈢仭闂傚倷鑳剁涵鍫曞疾濞戞熬鎷峰顓熺凡闁伙絽鍢查～婊堟晸娴犲绠栨繛鍡樻惄閺佸棗顭跨捄鐚存敾闁稿﹥娲熷濠氬磼濮橆剨鎷锋搴ｇ焼濞撴熬鎷锋鐐搭殔椤劑宕煎┑鍫㈠炊闂佺懓鍚嬮悾顏堝礉瀹�锟界划濠氭偐閾忣偄寮垮┑掳鍊曢鍡欙拷姘秺閹鈻撻崹顔界仌濡炪倖娉﹂崶鑸垫櫍闂佺绻掗崢褏娆㈤悙娴嬫斀闁绘ɑ褰冮鈺傤殽閻愭潙濮囬柍瑙勫灴閹瑩鎳滈棃娑欓敪缂傚倷娴囧鎾跺垝濞嗘挾宓佸鑸靛姇閻忔娊鏌￠崒妯哄姕闁诲繋绶氬娲礈閹绘帊绨煎┑鐐插级閿曘垽宕哄☉銏犵闁绘鏁搁敍婊冾渻閵堝棛澧紒瀣笧缁牓宕橀埡鍐啎闂佸憡渚楅崢浠嬎夐悙鐑樼厪闁搞儜鍐句純婵犵鍓濋幃鍌涗繆閻戠瓔鏁嶆繝闈涙閸庢捇姊虹拠鎻掝劉妞ゆ梹鐗犲畷浼村冀椤撴冻鎷烽敃鍌涘�婚柦妯侯槹閻庮剟姊洪崷顓烆暭婵犮垺锚椤斿繐鈹戠�ｎ偆鍘遍柣蹇曞仜婢т粙鎯屾繝鍥ㄧ厸閻庯綆鍋嗛妴鎺楁煥閻斿嚖鎷烽悤浣圭秷濠电偛寮堕悧婊呮閻愬绡�闁搞儯鍎婚幏閿嬫媴缁洘鐎婚梺瑙勫劤绾绢參鎮炬ィ鍐╁仭婵犲﹤鍟拌倴缂備浇椴搁幑鍥极閹剧粯鏅搁柨鐕傛嫹?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撶紓浣哄У濠㈡﹢鍩為幋锔藉亹鐎规洖娴傞弳锟犳⒑閹肩偛锟芥洟鎳熼婵堜簷闂備焦瀵х换鍌炲箠鎼淬劌姹查柣鎰劋閻撴盯鏌涘☉鍗炴灓缂佺姷鍋ら弻锛勪沪鐠囨彃顫囬悗娈垮櫘閸撶喎鐣疯ぐ鎺濇晩閻熸瑥瀚惁閬嶆⒒閸屾瑧鍔嶆俊鐐叉健瀹曘垽鎮￠獮顒佺☉铻栭柛娑卞幘閸樻挳姊洪悷閭﹀殶闁稿绋撳▎銏ゆ倷濞村鏂�闂佺粯蓱瑜板啴顢旈妶澶嬬厸闁跨喍绮欓幃鐑芥晸缁茬對al()
		//	role.setCruiseid2(shape2);
			//role.setCruiseid3(shape3);
		//	Role addRole = RoleManager.getInstance().getRoleByID(role.getRoleID());
		//	SAddUserScreen sadduser = new SAddUserScreen();
		//	sadduser.rolelist.add(addRole.getRoleBasic());
		//	role.sendWhoSeeMeAndMe(sadduser);
			//gnet.link.Onlines.getInstance().send(role.getRoleID(), sadduser);
		}
		else if (changetype == 4)
		{
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊炲銈嗗笒椤︿即寮查鍫熷仭婵犲﹤鍟版晥濠电媴鎷峰〒姘炬嫹婵﹨娅ｇ槐鎺懳熼搹閫涚礃婵犵妲呴崑鍕拷姘煎枤閸掓帗绻濆顓炰汗缂傚倷鐒﹂…鍥储閻㈠憡鈷戠痪顓炴媼濞兼劙鏌涢弮鎾剁暤鐎规洟娼ч埢搴ㄥ箻閺夋埊鎷烽崹顐ｅ弿婵妫楁晶缁樹繆閹绘帞绉洪柡灞炬礋瀹曟儼顦叉い蹇ｅ幗椤ㄣ儵鎮欓弶鎴炶癁濡ょ姷鍋涢鍛村煘閹达箑绠涙い蹇撴噹娴滄繈姊婚崒姘拷鐑芥倿閿曞倸绠栭柛顐ｆ礀缁�澶岋拷鐧告嫹闁告洦鍋嗛敍娆撴偡濠婂懎顣奸悽顖涘笧缁鎮欓悜妯煎帾婵犵數鍋涢悘婵嬪礉鐎涙绠剧紒妤�鎼慨鍌炴煛鐏炲墽娲撮柛鈺佸瀹曟﹢鎮欓鍌涙缂傚倸鍊烽懗鑸垫叏妤ｅ喚鏁嬬憸鏃堝灳閺冨牆绀冩い鏂挎瑜旈弻娑氫沪閸撗�妾ㄩ梺缁樼箖閻楃姴顫忛搹鍦煓閻犳亽鍔庨澶愭⒑閹稿孩纾搁柛銊ょ矙閹即顢氶敓钘夌暦濮楋拷椤㈡ê顭ㄩ敓钘壭уΔ鍛拺闁革富鍘奸崝瀣煕閵娿儳绉虹�规洘鍔欓幃娆撴倻濡攱瀚奸梻鍌氬�搁悧濠冪瑹濡ゅ懏鍊垮Δ锝呭暞閻撴洟骞栨潏鍓х？闁挎稑绉剁槐鎺楊敊绾嘲浼愰梺浼欑秶缁绘繈寮婚崶顒佹櫆闁芥ê顦卞Σ锝夋⒒閸屾瑧绐旀繛浣冲洦鍋嬮柛鈩冿供濞堜粙鏌涘☉姗堝姛妞も晜鐓￠弻鈥愁吋鎼粹�崇闂佺粯鎸诲ú鏍煘閹达附鍋愰柟缁樺笚濞堝墎绱撴担鍝勑ラ柛瀣枛閺佹捇鎳為妷顔兼櫛闂佸摜濮甸悧鐘诲灳閿曞倹鍊婚柦妯侯槺閻ｆ椽姊洪棃娑氱疄闁稿﹥鐗犲畷鎴﹀冀椤撶喎锟藉灚绻涢幋鐑嗕痪妞ゅ繐鐗滈弫鍌炴偣妤﹁￥锟斤拷闁猴拷娴犲鐓熼柟閭﹀幗缂嶆垿鏌ｈ箛銉х暤闁哄矉缍侀幃銈嗘媴閸濄儰妗撻梻浣筋嚃閸犳岸宕戦妶澶婄濠电姴鍟欢鐐翠繆椤栨粌甯堕柡浣规倐閺岋綁鎮㈤崫銉х厑缂備浇顕ч悧鎾绘偘椤旇法鐤�婵炴垶鐟﹀▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏄ラ柛鏇ㄥ灠缁�鍐┿亜韫囨挻顥為柛銈呮湰缁绘繂顕ラ柨瀣凡闁跨喕濮ゅú鐔肩嵁婵犲啯鍎熼柨婵嗘川閻掑ジ姊洪崜鎻掍簽闁哥姵鎸剧划缁樸偅閸愨晝鍘甸柣搴㈢♁椤洭骞婇崘顔界厽闊浄绲奸柇顖炴煛鐏炲墽銆掗柨鐔告灮缁茶姤鏅舵惔锝呭К闁跨喍绮欏娲传閸曨厾浼囬梺鍝ュУ閻楃娀鎮伴锟藉畷鍗烆潩閸忓す鈺備繆閻愵亜锟窖呭緤閻ｅ苯顥氭い鎾卞灪閸庡銇勮箛鎾跺缂佺姵姘ㄩ幉鍝ワ拷锝庡枛绾惧鏌曡箛瀣拷鏍偂濞戞熬鎷烽惂鍛婂闁诲函缍嗛崜娑溾叺濠德板�楁慨鐑藉磻濞戞◤娲敇閻愬秵鐩畷姗�濡搁姀鈽嗘綌婵犳鍠楅〃鍛涘▎鎰洸闁靛牆鎳夐弨浠嬫煥濞戞ê顏╁ù婊冦偢閺屾稒绻濋崘顏勨吂闁绘挶鍊栨穱濠囶敍濠婂啫浠橀梺鎼炲妽缁诲嫰鏁撻挊澶岀暛闁稿骸宕灋婵炴垯鍨归悡妯硷拷骞垮劚閹冲寮ㄦ禒瀣厽婵☆垰鎼痪褍顭跨捄鍝勵伃闁哄本绋掔换婵嬪礋椤愩垹绠ｉ梻浣告惈閻ジ宕伴幘鑸殿潟闁圭儤鍤﹂悢璁挎椽顢旈崟顒傛澓闂傚倸鍊风粈浣虹礊婵犲泚澶愬箻鐠囪尙顦у┑鈽嗗灥濞咃綁寮抽敂鐐枑闁绘鐗嗘穱顖炴煛娴ｉ潻韬柡宀嬬秮楠炲洭妫冨☉姗嗘浇婵＄偑鍊栧鐟懊洪悢濂夋綎缂備焦蓱婵挳鏌ｉ悢鐓庝喊闁搞倕顑囩槐鎾存媴缁涘娈梺绋匡龚閸庤螞閻斿娓婚柕鍫濇婢ч亶鏌涚�ｎ偆銆掔紒顔肩墦瀹曟﹢顢欓悾灞藉汲闂備胶绮弻銊︽櫠鎼淬劍鍎楁繛鍡樺姈閸欏繐鈹戦悩鎻掓殲闁靛洦绻冩穱濠囶敃閵忕姵娈梺瀹犳椤︽澘顭囪箛娑樼厸濞达絽鎽滅粙濠氭⒒閸屾艾锟藉嘲霉閸ヮ剦鏁嬬憸蹇涘箲閵忋倕绠ｉ柣妯哄暱鎼村﹪姊洪崜鎻掍簽闁哥姴绉堕幑銏ゅ幢濞戞瑧鍘介梺闈涚墕妤犳悂鎮樻潏銊ょ箚缂備緡婢�闁垱鎱ㄦ繝鍥╃窗闁靛洦鍔欓獮鎺戔攽閸ヨ埖顥涢梻鍌欒兌椤牏鎹㈤幋锔芥櫔闂備椒绱徊鍧楀礂濮楋拷楠炲啫顭ㄩ崨顖炩攺闁诲函缍嗛崑鍛枍瀹ュ鈷掑ù锝堟鐢盯鏌ㄩ弴妤佹珚鐎规洘濞婇、娑㈡倷閼碱剦鍞甸梻鍌欑閻忔繈顢栭崶鈺佸К闁跨喍绮欏娲箹閻愭彃濮岄梺鍛婃煥闁帮絽鐣烽姀銈嗙劶鐎广儱妫岄幏娲煟閻斿摜鎳冮悗姘煎墴瀹曟繈濡堕崱鎰盎闂佸搫娲㈤崝宀勭嵁濡偐纾兼い鏃傗拡閻撳ジ鏌熼鐣屾噰闁诡喗绮岃灒闁绘挸楠哥粻銉モ攽閿涘嫬浜奸柛濠冪墵瀵濡搁埡浣侯啇濡炪倖鍔х粻鎴犵矆婢舵劖鐓ラ柡鍥╁仜閿熻棄缍婇幃鈥斥槈濡繐缍婇弫鎰板醇椤愶絿绉烽柣搴ゎ潐濞叉牠鎯岄崒鐐茶摕闁斥晛鍟刊鎾偡濞嗗繐顏╃痪鐐▕濮婄儤娼幍顔煎闂佸湱鎳撳ú顓烆嚕椤愶箑绠荤紓浣股戝▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹
			if(role.getCruiseid() == shape || role.getCruiseid() == 0) {
				role.setCruiseid(0);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幈濡炪値鍘介崹鍨濠靛鐓曟繛鍡楃箳缁犳娊鏌ㄩ悢鍑ゆ嫹閻曚焦缍堝┑鐐插级閻楁洜鍙呴梺闈浥堥弲婊堝磿濡ゅ懏鐓曢柍鈺佸枤濡懐鎲搁悧鍫濈瑲闁哄懏鐓￠弻娑㈩敃椤愵澀绨肩紓鍌氱Т閻楀棝鍩為幋锔藉�烽柛娆忣槸濞呇勭節濞堝灝鏋熼柟绋垮暱閿曘垺绗熼敓钘夘潖閾忓湱纾兼俊顖氭禋娴滄粏鐏掓繝鐢靛Т濞层倗澹曢崸妤佺厵闁规鍠栭。濂告煟閹惧瓨绀嬮柟顔筋殜閺佹劙宕ㄩ鐔凤拷搴ㄦ⒒娓氬洤寮鹃柛銊ョ埣瀵鏁嶉崟顏呭媰闂佸憡鎸嗛崟顐㈢仭闂傚倷鑳剁涵鍫曞疾濞戞熬鎷峰顓熺凡闁伙絽鍢查～婊堟晸娴犲绠栨繛鍡樻惄閺佸棗顭跨捄鐚存敾闁稿﹥娲熷濠氬磼濮橆剨鎷锋搴ｇ焼濞撴熬鎷锋鐐搭殔椤劑宕煎┑鍫㈠炊闂佺懓鍚嬮悾顏堝礉瀹�锟界划濠氭偐閾忣偄寮垮┑掳鍊曢鍡欙拷姘秺閹鈻撻崹顔界仌濡炪倖娉﹂崶鑸垫櫍闂佺绻掗崢褏娆㈤悙娴嬫斀闁绘ɑ褰冮鈺傤殽閻愭潙濮囬柍瑙勫灴閹瑩鎳滈棃娑欓敪缂傚倷娴囧鎾跺垝濞嗘挾宓佸鑸靛姇閻忔娊鏌￠崒妯哄姕闁诲繋绶氬娲礈閹绘帊绨煎┑鐐插级閿曘垽宕哄☉銏犵闁绘鏁搁敍婊冾渻閵堝棛澧紒瀣笧缁牓宕橀埡鍐啎闂佸憡渚楅崢浠嬎夐悙鐑樼厪闁搞儜鍐句純婵犵鍓濋幃鍌涗繆閻戠瓔鏁嶆繝闈涙閸庢捇姊虹拠鎻掝劉妞ゆ梹鐗犲畷浼村冀椤撴冻鎷烽敃鍌涘�婚柦妯侯槹閻庮剟姊洪崷顓烆暭婵犮垺锚椤斿繐鈹戠�ｎ偆鍘遍柣蹇曞仜婢т粙鎯屾繝鍥ㄧ厸閻庯綆鍋嗛妴鎺楁煥閻斿嚖鎷烽悤浣圭秷濠电偛寮堕悧婊呮閻愬绡�闁搞儯鍎婚幏閿嬫媴缁洘鐎婚梺瑙勫劤绾绢參鎮炬ィ鍐╁仭婵犲﹤鍟拌倴缂備浇椴搁幑鍥极閹剧粯鏅搁柨鐕傛嫹?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撶紓浣哄У濠㈡﹢鍩為幋锔藉亹鐎规洖娴傞弳锟犳⒑閹肩偛锟芥洟鎳熼婵堜簷闂備焦瀵х换鍌炲箠鎼淬劌姹查柣鎰劋閻撴盯鏌涘☉鍗炴灓缂佺姷鍋ら弻锛勪沪鐠囨彃顫囬悗娈垮櫘閸撶喎鐣疯ぐ鎺濇晩閻熸瑥瀚惁閬嶆⒒閸屾瑧鍔嶆俊鐐叉健瀹曘垽鎮￠獮顒佺☉铻栭柛娑卞幘閸樻挳姊洪悷閭﹀殶闁稿绋撳▎銏ゆ倷濞村鏂�闂佺粯蓱瑜板啴顢旈妶澶嬬厸闁跨喍绮欓幃鐑芥晸缁茬對al()
				role.setCruiseid2(0);
				role.setCruiseid3(0);
				Role addRole = RoleManager.getInstance().getRoleByID(role.getRoleID());
				SAddUserScreen sadduser = new SAddUserScreen();
				sadduser.rolelist.add(addRole.getRoleBasic());
				role.sendWhoSeeMe(sadduser);
				//gnet.link.Onlines.getInstance().send(role.getRoleID(), sadduser);
			}
		} else if (changetype == 5) {
				//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊鐒﹂崕鎾绘⒑閹肩偛濡奸柛濠傛健瀵鈽夐姀鈺傛櫇闂佹寧绻傚Λ娑⑺囬妷褏纾藉ù锝呮惈瀛濈紓鍌氱Т閿曨亜顕ｇ拠宸悑濠㈣泛锕ｇ槐鍫曟⒑閸涘﹥澶勯柛鎾寸懃閳诲秹鏁愭径瀣ф嫼濠电偠灏褔鐛Δ浣典簻闁靛鍎婚煬顒傦拷娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭花浠嬫⒒娴ｄ警鐒鹃柡鍫墰缁瑩骞嬮敂缁樻櫆闂佽法鍣﹂幏锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮撮姀鈩冩珖闂佽法鍠撻弲顐ゅ垝閿濆憘鏃�鎷呴搹璇″晭闂備胶鎳撻悺銊╂偡閵夆晜鍊堕柍鍝勫暟绾惧ジ鏌ｅ▎娆愬闂佹悶鍔忓▔娑綖韫囨拋娲敂閸曨偆锟筋厼顪冮妶鍡樼闁瑰啿閰ｅ畷婊冪暦閸モ晝锛濇繛杈剧到閹碱偊鍩㈤崼銏㈢＜闁绘ê纾晶鐢碉拷娈垮枛椤兘骞冮姀銈嗘優闁革富鍙忕槐鍙夌節绾版ɑ顫婇柛銊╂涧閳诲秹鏁愭径瀣画闂佸搫琚崕鏌ュ煕閹寸姷纾奸悗锝庡亽閸庛儵鏌涙惔锛勑ч柡灞剧♁閹棃濮�閻橆偅鐏嗛梻浣芥〃閻掞箓骞戦崶顒�绠犻柣鎰惈鍞銈嗘煥閸氬鈻嶅☉銏♀拻濞撴熬鎷锋繛鑹板吹缁辩偤宕卞☉妯虹�梺鍓插亝濞叉粌鐣垫笟锟介悡顐﹀炊閵娧�妾ㄩ梺鍝勬噺閹倿寮婚妸鈺傚亞闁稿本绋戦锟�? by changhao
				role.setCruiseid(shape);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幈濡炪値鍘介崹鍨濠靛鐓曟繛鍡楃箳缁犳娊鏌ㄩ悢鍑ゆ嫹閻曚焦缍堝┑鐐插级閻楁洜鍙呴梺闈浥堥弲婊堝磿濡ゅ懏鐓曢柍鈺佸枤濡懐鎲搁悧鍫濈瑲闁哄懏鐓￠弻娑㈩敃椤愵澀绨肩紓鍌氱Т閻楀棝鍩為幋锔藉�烽柛娆忣槸濞呇勭節濞堝灝鏋熼柟绋垮暱閿曘垺绗熼敓钘夘潖閾忓湱纾兼俊顖氭禋娴滄粏鐏掓繝鐢靛Т濞层倗澹曢崸妤佺厵闁规鍠栭。濂告煟閹惧瓨绀嬮柟顔筋殜閺佹劙宕ㄩ鐔凤拷搴ㄦ⒒娓氬洤寮鹃柛銊ョ埣瀵鏁嶉崟顏呭媰闂佸憡鎸嗛崟顐㈢仭闂傚倷鑳剁涵鍫曞疾濞戞熬鎷峰顓熺凡闁伙絽鍢查～婊堟晸娴犲绠栨繛鍡樻惄閺佸棗顭跨捄鐚存敾闁稿﹥娲熷濠氬磼濮橆剨鎷锋搴ｇ焼濞撴熬鎷锋鐐搭殔椤劑宕煎┑鍫㈠炊闂佺懓鍚嬮悾顏堝礉瀹�锟界划濠氭偐閾忣偄寮垮┑掳鍊曢鍡欙拷姘秺閹鈻撻崹顔界仌濡炪倖娉﹂崶鑸垫櫍闂佺绻掗崢褏娆㈤悙娴嬫斀闁绘ɑ褰冮鈺傤殽閻愭潙濮囬柍瑙勫灴閹瑩鎳滈棃娑欓敪缂傚倷娴囧鎾跺垝濞嗘挾宓佸鑸靛姇閻忔娊鏌￠崒妯哄姕闁诲繋绶氬娲礈閹绘帊绨煎┑鐐插级閿曘垽宕哄☉銏犵闁绘鏁搁敍婊冾渻閵堝棛澧紒瀣笧缁牓宕橀埡鍐啎闂佸憡渚楅崢浠嬎夐悙鐑樼厪闁搞儜鍐句純婵犵鍓濋幃鍌涗繆閻戠瓔鏁嶆繝闈涙閸庢捇姊虹拠鎻掝劉妞ゆ梹鐗犲畷浼村冀椤撴冻鎷烽敃鍌涘�婚柦妯侯槹閻庮剟姊洪崷顓烆暭婵犮垺锚椤斿繐鈹戠�ｎ偆鍘遍柣蹇曞仜婢т粙鎯屾繝鍥ㄧ厸閻庯綆鍋嗛妴鎺楁煥閻斿嚖鎷烽悤浣圭秷濠电偛寮堕悧婊呮閻愬绡�闁搞儯鍎婚幏閿嬫媴缁洘鐎婚梺瑙勫劤绾绢參鎮炬ィ鍐╁仭婵犲﹤鍟拌倴缂備浇椴搁幑鍥极閹剧粯鏅搁柨鐕傛嫹?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌熼梻瀵割槮缁炬儳顭烽弻锝夊箛椤掍焦鍎撶紓浣哄У濠㈡﹢鍩為幋锔藉亹鐎规洖娴傞弳锟犳⒑閹肩偛锟芥洟鎳熼婵堜簷闂備焦瀵х换鍌炲箠鎼淬劌姹查柣鎰劋閻撴盯鏌涘☉鍗炴灓缂佺姷鍋ら弻锛勪沪鐠囨彃顫囬悗娈垮櫘閸撶喎鐣疯ぐ鎺濇晩閻熸瑥瀚惁閬嶆⒒閸屾瑧鍔嶆俊鐐叉健瀹曘垽鎮￠獮顒佺☉铻栭柛娑卞幘閸樻挳姊洪悷閭﹀殶闁稿绋撳▎銏ゆ倷濞村鏂�闂佺粯蓱瑜板啴顢旈妶澶嬬厸闁跨喍绮欓幃鐑芥晸缁茬對al()
				role.setCruiseid2(shape2);
				role.setCruiseid3(shape3);
				Role addRole = RoleManager.getInstance().getRoleByID(role.getRoleID());
				SAddUserScreen sadduser = new SAddUserScreen();
				sadduser.rolelist.add(addRole.getRoleBasic());
				role.sendWhoSeeMe(sadduser);
				//gnet.link.Onlines.getInstance().send(role.getRoleID(), sadduser);
			}

	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 739900;

	public int getType() {
		return 739900;
	}

	public long playerid; // 玩家id
	public int shape;
	public int shape2;
	public int shape3;
	public int changetype; // 0是变身，1是npc跟随，2有座骑时，3巡游，4取消巡游

	public GChangeShape() {
	}

	public GChangeShape(long _playerid_, int _shape_, int _shape2_, int _shape3_, int _changetype_) {
		this.playerid = _playerid_;
		this.shape = _shape_;
		this.shape2 = _shape2_;
		this.shape3 = _shape3_;
		this.changetype = _changetype_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(playerid);
		_os_.marshal(shape);
		_os_.marshal(shape2);
		_os_.marshal(shape3);
		_os_.marshal(changetype);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		playerid = _os_.unmarshal_long();
		shape = _os_.unmarshal_int();
		shape2 = _os_.unmarshal_int();
		shape3 = _os_.unmarshal_int();
		changetype = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof GChangeShape) {
			GChangeShape _o_ = (GChangeShape)_o1_;
			if (playerid != _o_.playerid) return false;
			if (shape != _o_.shape) return false;
			if (shape2 != _o_.shape2) return false;
			if (shape3 != _o_.shape3) return false;
			if (changetype != _o_.changetype) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)playerid;
		_h_ += shape;
		_h_ += shape2;
		_h_ += shape3;
		_h_ += changetype;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(playerid).append(",");
		_sb_.append(shape).append(",");
		_sb_.append(shape2).append(",");
		_sb_.append(shape3).append(",");
		_sb_.append(changetype).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(GChangeShape _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(playerid - _o_.playerid);
		if (0 != _c_) return _c_;
		_c_ = shape - _o_.shape;
		if (0 != _c_) return _c_;
		_c_ = shape2 - _o_.shape2;
		if (0 != _c_) return _c_;
		_c_ = shape3 - _o_.shape3;
		if (0 != _c_) return _c_;
		_c_ = changetype - _o_.changetype;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

