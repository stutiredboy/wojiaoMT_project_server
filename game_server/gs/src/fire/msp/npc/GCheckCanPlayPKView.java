
package fire.msp.npc;

import java.util.HashMap;
import java.util.LinkedList;
import java.util.Map;
import java.util.Set;

import org.apache.log4j.Logger;

import fire.pb.battle.BattleType;
import fire.pb.battle.QCmodelType;
import fire.pb.main.ConfigManager;
import fire.pb.npc.SLeitaiLevel;
import fire.pb.scene.Scene;
import fire.pb.scene.SceneClient;
import fire.pb.scene.SceneManager;
import fire.pb.scene.movable.Role;
import fire.pb.scene.sPos.GridPos;
import fire.pb.scene.sPos.Position;
import fire.pb.team.Team;
import fire.pb.team.TeamManager;






// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __GCheckCanPlayPKView__ extends mkio.Protocol { }

// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class GCheckCanPlayPKView extends __GCheckCanPlayPKView__ {
	
	public static final Logger logger = Logger.getLogger("BATTLE");
	public static final int CQMAPID=1615;//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩胶锟藉箍鍎遍ˇ顖滅矆鐎ｎ偁浜滈柟鍝勭Ф閸斿秵銇勯弬鎸庡枠婵﹦绮幏鍛村川婵犲懐顢呴梻浣侯焾缁ㄦ椽宕愬┑鍡欐殾闂傚牊渚楀鈺傘亜閹寸姴浠︽俊鐐扮矙閵嗕線寮崼婵堫槹闁圭厧鐡ㄨ摫婵炲懎锕弻锛勪沪閻ｅ睗銈夋煥閻旂儤娅曟い锝勭矙閺佹捇鎸婃径濠冩瘣闂佸搫顑冮崐鏍ㄧ┍婵犲浂鏁嶉柕鍫濇椤忚埖绻濆閿嬫緲閿熻姤顨嗛幈銊╂倻閽樺锛涘┑鐐村灦閳笺倕煤椤忓秵鏅ｉ梺缁樺灥濡鈻撻妸鈺傗拺闁告挻褰冩禍婵囩箾閸欏澧辩紒顔剧帛鐎靛ジ寮堕幋鐙�鍟囬梺鍝勵槸閻楀棙鏅堕悾灞筋棜闁秆勵殕閻撳繘鏌涢锝囩畼闁糕晪绲鹃幈銊︾節閸屻倗鍚嬮悗瑙勬礃鐢帡鍩㈡惔銊ョ妞ゆ挾鍟樺鍫熲拻濞达絽鎲＄拹锟犳煃瀹勬壆澧︾�规洘鍨剁换婵嬪川椤曞懏锛堥梻鍌氬�峰ù鍥綖婢舵劦鏁婇柡宥庡幖闂傤垱銇勯弽顐粶缂佺媭鍨伴—鍐拷锝庝簼閹癸絿绱掗悩铏拹缂佺粯鐩獮瀣倷閸℃ê鐏寸�规洝娅曠粋鎺旓拷锝庡亞閸樿棄顪冮妶鍡樺暗闁稿孩鍔曡灒闁跨喍绮欏娲传閸曨剚鎷辩紓浣割儐閻楃姾妫熼梺鎯ф禋閸嬪倻鎹㈤崱娑欏仯闁搞儱娲ょ�氼剟顢旈敓锟�
	public static Map<Integer,SLeitaiLevel> sLeitaiLevelmap=ConfigManager.getInstance().getConf(SLeitaiLevel.class);
	
	public static final int MAX_NUM=50;
	
	@Override
	protected void process() {
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩胶锟藉箍鍎遍ˇ顖滅矆鐎ｎ偁浜滈柟鍝勭Ф閸斿秵銇勯弬鎸庡枠婵﹦绮幏鍛喆閸曨偂鍝楅梻浣侯焾鐎涒晛顪冮挊澶屾殾婵犲﹤鍟犻弸搴ㄦ煙鐎涙绠ユ俊顐ｇ矒閹嘲顭ㄩ崨顓ф毉闁汇埄鍨遍〃濠囧箖閳ユ枼妲堟慨妯煎亾鐎氳顨ラ悙鑼虎闁告梹鑹捐灃闁绘娅曢崐鎰版煟濞戝崬娅嶇�殿喕绮欓、姗�鎮㈤崫鍕睄闂傚倷绀侀幉锟犲礉閿旂晫顩叉繝濠傜墕閸戠姵绻涢幋娆忕仾闁绘挻鐩幃姗�鎮欓幓鎺嗘寖濠电偛寮跺娆撳煘閹达附鏅柛鏇ㄥ亜楠炲绻濆▓鍨珯闁归鍏樺娲棘閵夛附鐝旈梺鍝ュ枑婵粙濡甸幇鐗堟櫜濠㈣泛顑傞幏缁樼箾鏉堝墽鍒伴柟鑺ョ矌缁棃鎮滃Ο闀愮盎闂侀潧顧�闂勫嫬鐣峰畝锟介敓鍊燁潐濞叉﹢銆冮崨杈剧稏婵犲﹤鐗婇弲绋棵归悩宸剰缂佺姵鐗曢湁闁稿繐鍚嬮崕妤呮煛娴ｅ壊鍎旈柡灞诲姂閹垻绱掑鍡橆棄闂備椒绱徊鍧楀蓟婢舵劕桅闁圭増婢樼粻铏節闂堟稒澶勬繛鍛崌濮婄粯鎷呴崨濠傛殘闂佽崵鍣︾紞浣哥暦閺囥垹绀冮柛娆忓�归惄顖炪�佸☉銏″�风紒顔款潐鐎氫粙姊绘担渚劸闁哄牜鍓熼幃鐑藉Ω閳轰胶顦ч悗鐧告嫹闁跨喍绮欓幆锟芥い蹇撶墱閺佸洭鏌ｉ幇鐗堟锭闁绘挾鍠栭幃妤�鈻撻崹顔界亶閻熸粍婢橀崯鎾灳閿曞倸惟闁宠桨绀佺粣娑橆渻閵堝棛澧紒顔奸叄瀹曘垽顢涢悙绮规嫽婵炶揪绲块悺鏂款焽閹邦噯鎷风憴鍕闁挎岸鏌嶇紒妯荤叆闁宠棄顦垫慨锟介柣妯垮皺閿熺瓔鍘奸埞鎴︽偐缂佹ɑ閿銈嗗灥濡繈骞冮敓鐘茬妞ゆ梻鏅崢鍗炩攽閻樼粯娑ф俊顐ｎ殜椤㈡棃顢旈崟銊︽杸濡炪倖鐗楅崫搴ㄥ磻閵忋倖鐓涢悘鐐殿焾婢ф煡鏌熷畡鐗堝殗鐎规洦鍋婃俊鐑藉箛閸撲胶袦闂佸搫鐬奸崰鎰箔閻旂厧鍨傛い鏃傗拡閻庤櫕淇婇悙顏勶拷銈夊磻閸涱垰鍨濋柟鎯х－閺嗭箓鏌涘Δ鍐拷锝夊籍閸喐娅㈡繛瀵稿Т椤戞垹绱為弽銊ｄ簻闁规澘鐖煎顕�鏌涙繝鍕毈闁哄矉缍�椤︽煡鏌熺拠褏纾块柨鐔诲Г濮樸劑骞婇幘璇茬厴闁硅揪闄勯崐鐑芥煛婢跺鐏╁ù鐘欏洦鈷戦柟鑲╁仜婵¤姤淇婇悙鎵煓鐎规洖鎼埥澶愬閻樻鍞洪梻浣烘嚀閻°劑鎮烽柆宥呯闁绘垼妫勭粻鎶芥煙閹碱厼骞楅柛宥夋涧椤啴濡堕崱妤冪憪闂佺粯甯粻鎾荤嵁閸愩劉鏋庨柟閭﹀枤椤旀洟鏌ｆ惔銏⑩檨妞ゎ厼娲幆宀�锟斤綆鍋佹禍婊堟煏婵炲灝鍔甸棅顒夊墰閿熻姤顔栭崰鏍�﹂柨瀣╃箚闁割偅娲栭悙濠囨⒑閸噮鍎忔い蹇撶埣濮婃椽妫冮埡浣烘В闂佸憡锚閸氬鎮ф惔锝囩＝濞达綁缂氬鎼佹煕濞嗗繐鏆熺紒顔碱煼瀵粙顢橀悙鑸垫啺闁诲骸绠嶉崕鍗灻洪妸褍顥氶柛蹇涙？缁诲棙銇勯弽銊х闁搞倖鐟ч惀顏堝箚瑜嶉弳閬嶆懚閺嶎厽鐓熸慨妤嬫嫹婵炰匠鍕浄婵犲﹤瀚ㄦ禍婊堟煙鐎涙绠ユ俊顖ゆ嫹闁诲孩顔栭崳顕�宕戞繝鍌滄殾闁圭儤鍩堥悡銉╂煕閺囥劌浜濋柣搴弮濮婄粯鎷呴悷閭﹀殝缂備浇顕ч崐姝岀亱濠德板�曢幏瀣极閸屾稓绠剧�瑰壊鍠曠花濂告煃闁垮娴柡灞剧〒娴狅箓宕滆閸ｎ喚绱撴担鐟板婵﹤婀遍幑銏犫槈濞嗘劕顎撻梺鍛婂姇瀵墎绮堝畝鍕叆闁绘柨鎲￠悘顔剧磼閻樿櫕宕岄柕鍡曠椤粓鏁撻懞銉﹀弿闁跨喍绮欓弻宥夊箻閸涱喖顏堕梻浣告贡椤牓宕弶鎴綎婵炲樊浜滃婵嗏攽閻樻彃鏆欐い锔规櫊濮婃椽骞栭悙鎻掝潎婵炲瓨绮忓▔娑㈡偩閻戣棄绠涙い鎾跺Х閻﹀牆鈹戦鏂や緵闁告﹢绠栧畷锝夊幢濞戞瑢鎷洪梺鍛婄箓鐎氼厼顔忓┑瀣厱閻庯綆鍋嗗ú鎾煛娴ｈ宕岄柟绋匡攻瀵板嫬鐣濋敓鑺ヮ殭闂傚倷娴囬鏍闯椤栨粍宕叉繝闈涙－閸ゆ洟鏌熺紒銏犳灍闁稿瀚伴弻褑绠涢幘纾嬬濠碘剝褰冨ú銈夊煘閹达附鍋愰柛顭戝亝濮ｅ嫭绻濆▓鍨灍闁圭鍟块悾鐑藉箛閺夎法顔愭繛杈剧到閹测剝娼忛崼銉︹拺缂備焦蓱閻撱儵鏌涘顒夊剶闁诡噯绻濋幃銏ゆ嚃閳轰礁绲奸梻浣规偠閸庮垶宕濇惔銊ョ厽闁靛鏅滈悡娆撴煛鐏炶鍔ら柣锝嗘そ閺岋紕浠﹂棃鈺傚鐎规洖娲﹀▓鏇㈡煟鎼搭垳绉甸柛鎾寸閳敻姊婚崒娆掑厡缁绢厼鐖煎鎻掆槈濮樼偓瀚规慨姗嗗幗缁舵煡鏌ｉ敐鍛Щ妞ゎ偅绮撻弫鎾绘嚍閵夈倗绠氬┑顔界箓閻牆危濞差亝鈷戦悹鍥ｏ拷铏彲缂傚倸绉崇粈渚�锝炶箛鏇犵＜婵☆垵顕ч鎾绘⒑闂堚晛鐦滈柛妯圭矙閹筹綁宕堕浣叉嫼缂備礁顑嗙�笛囧箲閿濆鐓曢幖瀛樼☉閿熻姤顨堥崚鎺旓拷锝庝憾閸氬顭跨捄渚剱婵炲懏绮嶇换婵嬪閵忊槅浠х紓浣哄У閸ㄧ數鍙呭銈嗘尵閸嬬喖寮抽敃鍌涚叆闁绘柨鎼牎闂佺锕ら悥濂稿蓟閵堝棙鍙忛柟閭﹀墾閹风兘寮介鐐叉優闂佽法鍠曞Λ鍕�旈崘顔嘉ч幖绮癸拷宕囶唹闂備礁鎲″褰掑垂閻㈠憡鍋╅柣鎴ｅГ閸嬪嫮鐥幏宀勫摵闁哄懏绻堝娲箰鎼达絿鐣甸梺缁橆殔缁绘劙鈥栨繝鍥╅柍鍝勫�甸幏娲煟閻樺弶鎼愮�殿喖鐖煎畷顒佸緞鐎ｃ劋绨诲銈嗗姂閸╁嫬危閹间焦鍋傞柕鍫濐槹閻撳啴鏌涘┑鍡楊仼闁哄棙鐟х槐鎺楃叕閹绘帪鎷峰┑瀣摕婵炴垯鍨圭粻缁樹繆閵堝繑瀚归柣搴㈠嚬閸撴岸骞嗛弮锟界换婵嬪磼濡や焦鏉搁梻浣虹帛椤洨鍒掗姘ｆ鐟滃酣濡甸崟顖氱婵犻潧娲ゅ▍褏绱撴笟鍥ф灈闁绘鎸搁悾鐑藉箳濡や礁锟界兘鎮楅悽娈跨劸閻㈩垱顨婂缁樼瑹閿熻棄顭囪钘濇い鎾卞灩缁�澶岋拷鐧告嫹闁告洦鍓欓崜顓㈡⒑閹呯婵狅拷鏉堚晛顥氬┑鍌氭啞閻撴瑩姊洪銊х暠妤犵偞顨婇弻宥夋煥鐎ｎ亝璇為梺鍝勮閸旀垿骞冮姀銈呯闁靛牆妫楅鍫曟⒑缂佹ɑ纾婚柣鎺炲缁辩偤宕煎┑鍐╂杸闂佺粯鍔栬ぐ鍐棯瑜忕槐鎺楊敊閼恒儱纾抽梺鎼炲姂缁犳牠寮崘顔肩＜婵娉涢弫褰掓⒒娴ｇ懓顕滅紒璇插�哥叅闁挎繂娲╂慨鎶芥⒑閸噮鍎戠紒鈽呮嫹闂備焦鐪归崹钘夘焽瑜庣粋鎺楀煛閸涱喚鍘靛┑鐐跺蔼椤斿﹦鑺遍悾宀�纾奸弶鍫氭櫅娴犻亶鏌℃担瑙勫磳闁瑰磭鍋ゆ俊鐑芥晲閸曨厾娉垮┑锛勫亼閸婃牠宕濋幋锕�鏄ラ柛鏇ㄥ�犻悢鍏兼櫢闁芥ê顦藉〒濠氭煏閸繂鏆欓柣蹇ｄ邯閺岋綁鎮㈤弶鎴濆Е濡炪們鍨洪敃銏犵暦濡ゅ懏鍋傞幖杈剧悼閻涱噣姊虹拠鎻掑毐闁诡兙鍎靛畷鐔碱敃椤愶紕妞界紓鍌氬�搁崐鎼佸磹閻戣姤鍤勯柛顐ｆ礃閹偤骞栧ǎ顒�濡奸柛灞诲妼閳规垿宕掑搴ｅ姼缂備胶濯崹鍫曞箖濡ゅ懏鏅查幖绮瑰墲閻忓牓姊洪崨濠呭缂傚秴锕璇测槈閵忕姷鐤�闂傚倸鐗婄粙鎺楁倶瀹ュ鈷戠紓浣股戠亸鐗堢箾閼碱剙鏋涚�殿喖顭烽弫鎰板川閸屾粌鏋旈柟椋庡█楠炴捇骞掑┑鍥ㄧグ婵犵數濮烽弫鎼佸磻濞戙垺鍋嬪┑鐘蹭迹濞戙垹绀冮柕濞у嫭顔曢梻浣芥硶閸犳挻鎱ㄩ悽鍛婂�块柤娴嬫櫔閹风兘鐛崹顔煎濠碘槅鍋呴惄顖氱暦閵忋倖鍋ㄩ柛娑樑堥幏濠氭⒑缁嬫寧婀伴柤褰掔畺閺佹捇鎳為妷锕�锟芥劖銇勯姀鈥冲摵妞ゃ垺锕㈤崺妤呭传閸曨剙鏋犻梺杞扮閸熸潙鐣烽幒鎴旀婵☆垰婀遍弫鎯р攽閻樺灚鏆╅柛瀣☉铻炴繛鍡樻尰閸嬶紕鎲搁弮鍫濈畺濡わ絽鍟崑銊╂煕濞戞﹫鍔熼柛妯绘倐閺岋綀绠涢弴鐐板摋濡炪倖娉﹂崟顒�寮块梺绋挎湰缁綁骞忓畡鎵虫灁闁割煈鍠楅悵顕�姊洪棃鈺冪Ф缂佽弓绮欓幃楣冩倻閽樺顔婇梺瑙勬儗閸橀箖宕ｉ崱娑欌拺闁告稑锕ユ径鍕煕閹惧鎳囩�殿喗鐓￠幃浠嬪川婵炵偓瀚介梻浣侯焾閺堫剟鎮疯钘濋柨鏇炲�归悡娆愮箾閺夋埈鍎滈柟宄板槻椤潡宕熼鍌涘垱濡ょ姷鍋涢澶愬极閸愵喗鏅搁柣锝呯灱娑撳秵銇勯弽銊ュ毈婵炴挸顭烽幃妤呮晲鎼存繄鍑归梺鍦缁插潡鎯�椤忓牆绠查柟閭﹀弾濡嫰姊婚崶褜妯�闁哄被鍔岄埞鎴﹀幢濞嗗繆鎷℃繝鐢靛仜閸氬宕濆▎鎾崇畺婵°倧鎷锋い顐ｇ箞椤㈡﹢鎮㈡笟顖浶ч梻鍌欑閹碱偊鎯夋總绋跨獥闁哄诞鍛濠电偛妫欓幐绋挎纯闂備胶纭堕崜婵嬨�冭箛鏂款嚤闁跨噦鎷�?
		if(modeltype!=QCmodelType.ONE_FIGHT&&modeltype!=QCmodelType.TEAM_FIGHT&&modeltype!=QCmodelType.WATCH_FIGHT){
			logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩胶锟藉箍鍎遍ˇ顖滅矆鐎ｎ偁浜滈柟鍝勭Ф閸斿秵銇勯弬鎸庡枠婵﹦绮幏鍛村川婵犲懐顢呴梻浣侯焾缁ㄦ椽宕愬┑鍡欐殾闂傚牊渚楀鈺傘亜閹寸姴浠︽俊鐐扮矙閵嗕線寮崼婵堫槹闁圭厧鐡ㄨ摫婵炲懎锕弻锛勪沪閻ｅ睗銈夋煥閻旂儤娅曟い锝勭矙閺佹捇鎸婃径濠冩瘣闂佸搫顑冮崐鏍ㄧ┍婵犲浂鏁嶉柕鍫濇椤忚埖绻濆閿嬫緲閿熻姤顨嗛幈銊╂倻閽樺锛涘┑鐐村灦閳笺倕煤椤忓秵鏅ｉ梺閫炲苯澧鹃柟鐑芥敱缁楃喖鏁撻挊澶樺殨濞寸姴顑愰弫鍥煟閹扮増娑ф鐐村姍濮婄粯鎷呴崨濠傛殘闂佸憡姊归崹鍨暦濠靛棭鍚嬪璺侯儏閿熻棄鐖奸弻娑㈩敃閻樻彃濮曢梺鎶芥敱閸ㄥ潡寮婚悢鍏煎殐闁宠桨妞掔划鑸电節濞堝灝鏋涢柛濠呭吹濡叉劙骞掑Δ浣镐汗閻庤娲栧ú銈夊煕鐏炶娇鏃堟偐闂堟稐娌梺缁橆殘閸嬨倖淇婇悽绋跨疀闁哄娉曢濠傗攽閻樼粯娑ф繛璇х畱閳诲秹宕堕妸銈囩畾闂佺粯鍔︽禍婊堟晸婵劕锟芥繂鐣烽幋锕�绠虫俊銈忔嫹闁稿被鍔戦弻锕�螣閻氬绀嗛梺缁樻煥閹芥粎寮ч敓浠嬫⒑閹肩偛鍔橀柛鏂款樀楠炲繑绻濆顓涙嫼缂備礁顑嗙�笛冿耿娴煎瓨鐓熼柣鏇炲�搁々顒傜磼椤旂》韬柟顔ㄥ洤閱囨繝濠傛噽閻ｇ偓绻濈喊澶岀？闁稿鍠栧畷銏ｎ槼闁逛究鍔戝畷鎺楁倷鐎电骞嶉梻浣瑰劤濞存岸宕戦幒鎴旀灁婵犲﹤鐗婇悡娆撴煣韫囷絽浜為柣顓熷笧閿熷�燁潐濞叉牜绱炴繝鍥ワ拷渚�寮撮姀鈩冩珳闂佹悶鍎滈崘锝嗙�兼繝鐢靛Х閺佸憡鎱ㄩ幘顔藉剦濠㈣埖鍔曠痪褔鏌涢弽銈呭⒉閻庢艾婀遍幉鎼佸籍閸垹绁﹂棅顐㈡处缁嬫帡宕愭繝姘厾闁诡厽甯掗崝銈夋煕濡湱鐭欐慨濠冩そ楠炴劖鎯旈敐鍥╂殼闂備胶顢婂▍鏇㈠礉閺嶎偆鐭夐柟鐑樺灍濡插牊鎱ㄥΟ澶稿惈闁挎稒绮岄埞鎴炲箠闁稿﹥娲熷畷顖烆敃閿曪拷閸戠姵绻涢幋娆忕仾闁绘挻绋戦湁闁挎繂鐗滃鎰版倶韫囨柨顥嬬紒杈ㄥ浮瀹曟帒鈽夊Ο纰卞剬闂備浇娉曢崰鎰板几閼姐倗绀婇柛鈩冾焽椤╂煡鏌ㄥ┑鍡╂Ц缂佺姵妞介弻锟犲炊閵夈儳浠鹃梺鎶芥敱閸ㄥ灝顫忔繝姘唶闁绘柨澧庣换渚�姊虹紒妯烘诞缂佺姵鐗犲璇测槈濞嗘劕鍔呭銈嗘煥閸氬鎮靛┑瀣�垫繛鍫濈仢閺嬫盯鏌熺拠褏绡�妤犵偛妫濆顕�宕煎顏佹櫊閺屻劑寮敓浠嬪磿閹剁晫宓佺�广儱顦伴埛鎺懨归敐鍫燁仩閻㈩垱鐩弻娑㈠Ω閵壯冪厽闂佺偨鍎荤粻鎾崇暦閸洖鐓涢柛鎰屽懐鎲归梻鍌欐祰椤宕曢幎绛嬫晪妞ゆ挾濮锋稉宥呂旈敐鍛殲闁绘挻娲橀妵鍕箛閸撲焦鍋у銈忕到瀵墎鎹㈠☉銏犲窛妞ゆ挶鍔嶉弫楣冩⒑闁稓鈹掗柛鏂跨Ф閹广垹鈹戠�ｎ亞顦ㄩ梺宕囨嚀閵囨﹢鎼规惔顫箚闁靛牆娲ゅ暩闂佺顑囬崑銈呯暦濠靛鍐�妞ゆ挾鍋熼悾楣冩⒑閸濆嫬鏆欓柣妤�锕鏌ュ蓟閵夛妇鍘遍柣蹇曞仜瑜扮偟娆㈡潏銊х闁稿繐鍚嬮ˉ鍫熸叏婵犲偆鐓肩�规洘甯掗埢搴ㄥ箣椤撶啘婊堟⒒娴ｅ憡璐￠柍宄扮墦瀹曟垶绻濋崶褏鐣洪悷婊冪Ч閳ワ箓濡搁埡渚�鍞跺┑鐘绘涧閻楁粌危閼哥數绡�闁汇垽娼ч埢鍫熺箾娴ｅ啿娴傞弫鍕煕濞戞鎽犻柛瀣典簼閵囧嫰寮▎鐐稐婵炲瓨绮嶇划鎾诲蓟閳ユ剚鍚嬮幖绮癸拷鑼泿濠电偛顕刊瀵哥不閹捐钃熺�广儱顦伴悡銉╂倵閿濆簼绨藉ù鐘哄亹缁辨挻鎷呮禒瀣懙闁汇埄鍨遍〃鍛搭敋閵夆晛绀嬫い鎺戝�婚惁鍫ユ⒑閸涘﹤濮夐柛瀣崌钘熼柨婵嗩槹閳锋垿鎮归崶銊ョ祷妞ゆ帇鍨介弻銈堛亹閹烘梻鏆悗瑙勬礃閻撯�愁嚕婵犳艾唯闁靛／鍐ㄧ闂傚倷绀佸﹢閬嶅磻閹捐绀堟慨妯垮煐閸嬪倿鏌曟径鍡樻珕闁绘挻娲橀妵鍕箛閳轰緤鎷烽弴銏犲嚑闁哄啫鐗婇悡鏇熶繆椤栨粌鍔嬮柛鐔哄仧缁辨帞绱掑Ο灏栨濠电偟鍘х换妯虹暦濠婂棭妲鹃悶姘鹃檮缁绘繈鎮介棃娑楁埛闂佸憡顭嗛崶锝忔嫹閿曪拷閻ｏ繝骞嶉鑺ヮ啎婵犵數濞�濞佳囶敄閸℃稑纾婚柛鏇ㄥ灡閻撴洟鐓崶銊ㄥ濞存粌缍婇弻娑樜熼崗鍏兼瘓濠殿喖锕ュ钘夌暦閵婏妇绡�闁稿本绮堥幋鐑芥⒒娴ｄ警鐒鹃柨鏇樺劦閹冾煥閸喐娅㈤梺鍏间航閸庢娊宕弻銉︾厵闁告垯鍊栫�氾拷?");
			return ;
		}
		
		if(sLeitaiLevelmap==null){
			logger.error("闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩胶锟藉箍鍎遍ˇ顖滅矆鐎ｎ偁浜滈柟鍝勭Ф閸斿秵銇勯弬鎸庡枠婵﹦绮幏鍛村川婵犲懐顢呴梻浣侯焾缁ㄦ椽宕愬┑鍡欐殾闂傚牊渚楀鈺傘亜閹寸姴浠︽俊鐐扮矙閵嗕線寮崼婵堫槹闁圭厧鐡ㄨ摫婵炲懎锕弻锛勪沪閻ｅ睗銈夋煥閻旂儤娅曟い锝勭矙閺佹捇鎸婃径濠冩瘣闂佸搫顑冮崐鏍ㄧ┍婵犲浂鏁嶉柕鍫濇椤忚埖绻濆閿嬫緲閿熻姤顨嗛幈銊╂倻閽樺锛涘┑鐐村灦閳笺倕煤椤忓秵鏅ｉ梺閫炲苯澧鹃柟鐑芥敱缁楃喖鏁撻挊澶樺殨濞寸姴顑愰弫鍥煟閹扮増娑ф鐐村姍濮婄粯鎷呴崨濠傛殘闂佸憡姊归崹鍨暦濠靛棭鍚嬪璺侯儏閿熻棄鐖奸弻娑㈩敃閻樻彃濮曢梺鎶芥敱閸ㄥ潡寮婚悢鍏煎殐闁宠桨妞掔划鑸电節濞堝灝鏋涢柛濠呭吹濡叉劙骞掑Δ浣镐汗閻庤娲栧ú銈夊煕鐏炶娇鏃堟偐闂堟稐娌梺缁橆殘閸嬨倖淇婇悽绋跨疀闁哄娉曢濠傗攽閻樼粯娑ф繛璇х畱閳诲秹宕堕妸銈囩畾闂佺粯鍔︽禍婊堟晸婵劕锟芥繂鐣烽幋锕�绠虫俊銈忔嫹闁稿被鍔戦弻锕�螣閻氬绀嗛梺缁樻煥閹芥粎寮ч敓浠嬫⒑閹肩偛鍔橀柛鏂款樀楠炲繑绻濆顓涙嫼缂備礁顑嗙�笛冿耿娴煎瓨鐓熼柣鏇炲�搁々顒傜磼椤旂》韬柟顔ㄥ洤閱囨繝濠傛噽閻ｇ偓绻濈喊澶岀？闁稿鍠栧畷銏ｎ槼闁逛究鍔戝畷鎺楁倷鐎电骞嶉梻浣瑰劤濞存岸宕戦幒鎴旀灁婵犲﹤鐗婇悡娆撴煣韫囷絽浜為柣顓熷笧閿熷�燁潐濞叉牜绱炴繝鍥ワ拷渚�寮撮姀鈩冩珳闂佹悶鍎滈崘锝嗙�兼繝鐢靛Х閺佸憡鎱ㄩ幘顔藉剦濠㈣埖鍔曠痪褔鏌涢弽銈呭⒉閻庢艾婀遍幉鎼佸籍閸垹绁﹂棅顐㈡处缁嬫帡宕愭繝姘厾闁诡厽甯掗崝銈夋煕濡湱鐭欐慨濠冩そ楠炴劖鎯旈敐鍥╂殼闂備胶顢婂▍鏇㈠礉閺嶎偆鐭夐柟鐑樺灍濡插牊鎱ㄥΟ澶稿惈闁挎稒绮岄埞鎴炲箠闁稿﹥娲熷畷顖烆敃閿曪拷閸戠姵绻涢幋娆忕仾闁绘挻绋戦湁闁挎繂鐗滃鎰版倶韫囨柨顥嬬紒杈ㄥ浮瀹曟帒鈽夊Ο纰卞剬闂備浇娉曢崰鎰板几閼姐倗绀婇柛鈩冾焽椤╂煡鏌ㄥ┑鍡╂Ц缂佺姵妞介弻锟犲炊閵夈儳浠鹃梺鎶芥敱閸ㄥ灝顫忔繝姘唶闁绘柨澧庣换渚�姊虹紒妯烘诞缂佺姵鐗犲璇测槈濞嗘劕鍔呭銈嗘煥閸氬鎮靛┑瀣�垫繛鍫濈仢閺嬫盯鏌熺拠褏绡�妤犵偛妫濆顕�宕煎顏佹櫊閺屻劑寮敓浠嬪磿閹剁晫宓佺�广儱顦伴埛鎺懨归敐鍫燁仩閻㈩垱鐩弻娑㈠Ω閵壯冪厽闂佺偨鍎荤粻鎾崇暦閸洖鐓涢柛鎰屽懐鎲归梻鍌欐祰椤宕曢幎绛嬫晪妞ゆ挾濮锋稉宥呂旈敐鍛殲闁绘挻娲橀妵鍕箛閸撲焦鍋у銈忕到瀵墎鎹㈠☉銏犲窛妞ゆ挶鍔嶉弫楣冩⒑闁稓鈹掗柛鏂跨Ф閹广垹鈹戠�ｎ亞顦ㄩ梺宕囨嚀閵囨﹢鎼规惔顫箚闁靛牆娲ゅ暩闂佺顑囬崑銈呯暦濠靛鍐�妞ゆ挾鍋熼悾楣冩⒑閸濆嫬鏆欓柣妤�锕鏌ュ蓟閵夛妇鍘遍柣蹇曞仜瑜扮偟娆㈡潏銊х闁稿繐鍚嬮ˉ鍫熸叏婵犲偆鐓肩�规洘甯掗埢搴ㄥ箣椤撶啘婊堟⒒娴ｅ憡璐￠柍宄扮墦瀹曟垶绻濋崶褏鐣洪悷婊冪Ч閳ワ箓濡搁埡渚�鍞跺┑鐘绘涧閻楁粌危閸洘鈷掑ù锝堟鐢稒淇婇锛勭獢鐎规洘鍨块獮鍥敆閸屾稒顔撳┑鐐存尰閻旑剟骞忛悜鑺ョ厸閻忕偤娼婚幏鐑藉箛娴ｅ憡鍊梺纭呭亹鐞涖儵鏁撻挊澶岋紞妞ゆ梹鍔欏铏规嫚閳ュ磭浠梺鍝ュУ閻楁洟锝炶箛娑欐優闁谎冩啞鐎氬綊鏌涢敂璇插箹閺嶏繝姊洪棃娑欘棞闁哥喐鎸冲濠氬Χ婢跺﹦顦ㄩ梺鑲┾拡閸撴瑩鎮￠悢鍏尖拺閻犲洠锟借櫕鐝紓浣虹帛缁诲牓鎮伴鎾呮嫹閿濆骸鏋熼柡鍛矒閹嘲鈻庡▎鎴犐戦柣搴㈣壘閵堢顫忓ú顏呭殥闁靛牆鎳忛悗楣冩⒑閼姐倕鏋傞柛搴㈠▕閺佹捇鎳為妷锔炬闂佺绻戦敋闁伙絿鍏橀、娑樷攽閸垺婢戞繝鐢靛仦閸ㄥ爼鎮疯瀹曘垽鏌嗗鍡忔嫼缂傚倷鐒﹂埣銈夘敂閸繄鏌堥梺绉嗗嫷娈斿ù鑲╁█閺岋綁骞嬮悜鍥︾返濠电偛鐗呯划娆撳蓟閿濆绠涙い鎺戭槸濞堣埖绻濋埛锟介崨顔芥瘓闂佸搫鐬奸崰鏍箹瑜版帩鏁冮柕鍫濇噳閹蜂即姊绘担铏广�婇柡鍜佷簽閹广垹鈹戦崱娆愭濠殿喗顨愰幏閿嬨亜閵忊剝鈷愰柟顖涙閺佹劙宕ㄩ姘儧闂傚倸鍊搁崐鎼佸磹閹间礁纾归柣鎴ｅГ閸ゅ嫰鏌涢幘鑼槮闁搞劍绻冮妵鍕冀椤愵澀娌梺绋款儜缁绘繈寮婚妸鈺佸嵆闁绘劘顕滈幏鐤亹閹烘垹锛涢梺璺ㄥ枔婵敻鎮¤箛鎿冪唵閻犻缚娅ｆ晶鏇㈡煕閹垮啫骞楃紒缁樼☉椤斿繘顢欓懡銈囨晨闂佹悶鍎查幐鍐差潖濞差亜绠归柣鎰絻婵矂姊洪崨濠冪叆缂佸鎸抽崺銏ゅ箻閺夋埈鍤ら柣搴㈢♁閿氶柨鐔烘櫕閺佸骞冨畡鎵虫瀻闊洦鎼╂禒鍓х磽娓氬﹥瀚归梺璺ㄥ枙濡嫰鍩為幋锔藉�烽柤纰卞墯閸曢箖姊洪崨濠冪叆閻庢稈鏅濈划鈺呮偄閻撳骸宓嗛梺缁樻煣鐠�锕�霉閸曨垱鐓熼幖鎼灣缁夌敻鏌涚�ｎ亝顥㈢�规洏鍨介弻鍡楊吋閸″繑瀚奸柣鐔哥矌婢ф鏁幒鎾额洸濞寸厧鐡ㄩ悡鏇熶繆椤栨稐鑸柛瀣ㄥ灮閿熷�燁潐濞叉鎹㈤崼鐔剁箚闁兼悂娼х欢鐐烘倵閿濆骸澧鐐村姍濮婅櫣鎷犻幓鎺戞瘣缂備浇灏慨銈夊疾閼稿灚鍎熼柕濠忕畱娴犲ジ姊哄Ч鍥х仼闁硅绻濋幃鈥斥槈閵忊�筹拷鍫曟煟閹扮増娑уù婊冨⒔缁辨帡鏁撻悾宀嬫嫹閿濆骸澧鹃柟鐑筋棑閹叉挳宕熼鍌ゆЧ濠电偛鐡ㄧ划宀勬偉婵傜违濞达絽澹婂銊╂煥閻斿墎鐭欐鐐插暣婵拷闁挎稑瀚板顔界節閵忥絾纭炬い锕侀哺瀵板嫰鏁撻敓锟�");
			return ;
		}
		int levelmin=0;
		int levelmax=1000;
		SLeitaiLevel sLeitaiLevel = sLeitaiLevelmap.get(levelindex);
		if(sLeitaiLevel!=null){
			levelmin=sLeitaiLevel.getLevelmin();
			levelmax=sLeitaiLevel.getLevelmax();
		}
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忓爼鏌ｆ惔銈庢綈婵炴彃绻樺畷鏇㈠箮閼恒儲娅㈤梺鍝勫�堕崐妤冪矓閻㈠憡鐓曢柣妯虹－婢у崬顭跨憴鍕鐎规洜顭堣灃濞达絽鎼獮宥夋⒒娴ｇ瓔鍤冮柛銊ㄦ珪閺呰泛螖閸氳棄顦板鍕箛椤掑偆鍟囬梻浣告惈椤︿即宕烘繝鍥╁彆妞ゆ帒瀚悡娑㈡倶閻愰鍤欓柨鐔诲Г椤ㄥ﹤鐣烽悧鍫㈢瘈闁搞儜鍜佹敤闂備胶绮崝鏇炍熸繝鍌ょ劷闁兼亽鍎扮换鍡涙煟閹板吀绨婚柨鐔诲Г閻楃姴鐣峰┑瀣闁哄倸鐏濋悘濠傗攽閻愬弶顥滄繛瀛樺哺瀹曠敻寮撮姀锛勫幈濡炪倖鍔х徊鍓х矆閿熶粙姊绘担绋胯埞婵炶绠撴俊鐢稿礋椤栨氨鐤�闂佸壊鐓堥崑鍡欑玻閺冨倻纾藉ù锝夋涧婵″ジ鏌ｆ幊閸斿酣骞戦姀鐘婵鍋撶�氳绻涢幋鐐垫噽闁绘帊绮欓弻锝夘敇閻戝洤濮涚紓浣介哺閹告悂顢樻總绋挎そ闁告劦鍘奸幆鍫ユ煟鎼淬埄鍟忛柛鐘崇墵閳ワ箓鎮滈挊澶岀暫闂侀潧绻堥崐鏍磻閸岀偛绠归弶鍫濆⒔閹ジ鏌￠崱鏇炲祮闁哄矉缍侀幃銏ゅ传閵壯呭帎缂傚倷绀侀ˇ閬嶅箠閹炬椿鏁嬮柨婵嗩槹閹偞銇勯幇鍓佹偧缂佸鐖煎娲濞戣京鍙氱紓浣藉蔼閸嬫劙鎳炴潏銊х瘈婵﹩鍘搁幏娲⒒閸屾氨澧涚紒瀣尰閺呭爼寮撮姀锛勫幍闂佸憡鍔樼亸娆戠不閼姐倧鎷风憴鍕闁轰浇顕ч悾鐑藉醇閺囥劍鏅㈡繛杈剧到閹碱偊鐛幇鐗堚拺閻犲洩灏欑粻鎶芥煕鐎ｎ偆鈾侀柡鍛埣閹稿﹥绔熷┑鍥ㄣ仢妤犵偞锕㈤、娆撴偩鐏炶棄绠版繝鐢靛仩閹活亞寰婇崸妞伙拷锕傚醇閵夛附娅㈤梺鑺ッˇ浼村磻閵夆晜鐓熸繛鎴濆船濞呭秶锟借娲栧畷顒勶綖濠靛绀傚璺哄帨閺呮盯鍩為幋锔藉亹婵炲牊瀵уВ宀勬⒑鐠恒劌鏋庨柨鐔烘櫕閸犳劙鎮甸鍫熺厵妞ゆ牗姘ㄦ晶锕傛煛鐏炵晫肖闁瑰弶鎸冲畷鐔碱敃閵堝嫮绀夐梻鍌欐祰椤曟牠宕板Δ鍛仭闁宠桨鑳堕弳锕傛煥濠靛棙顥滅紒鍓佸仜閳规垿鎮╅幓鎺撶亾婵炲濯崣鍐潖婵犳艾纾兼繛鍡樺姉閵堜即鎮楃憴鍕闁轰浇顕ч悾鐑筋敍閻愭煡鏁滃┑掳鍊ч幏鐑芥煟閵堝洤浜剧紒缁樼洴楠炲鈻庤箛鏇炲Ф闂備浇妗ㄧ粈渚�顢栨径鎰摕闁靛鍎弨浠嬫煕閳╁喛渚涙俊顐ゅ仜椤啴濡堕崱妯碱槹婵炲瓨绮岄悥鐓庮嚕婵犳碍鍋勯柛婵嗗閻庢娊姊洪崨濠庢畼闁稿绋撶划璇裁洪鍛嫼闂佸憡绻傜�氼厽鍒婃總鍛婄厱闁规儳顕幊鍥煕閳哄啫浠辨鐐差儔閺佸倿鎸婃径娑欏闁绘垼濮ら悡娑橆熆鐠轰警鍎忛柣蹇婃櫅闇夐柣妯挎珪閸婃劖鎱ㄦ繝鍐┿仢妤犵偞鍔栭幆鏃堝椤喚绌块梻鍌欑閹碱偊骞婇幇顓熷弿闁圭虎鍣弫瀣煥濠靛棭妲哥紒鐙�鍣ｉ弻銈夊箒閹烘垵濮曞┑鐐叉噷閸ㄨ棄顫忛搹鍦＜婵☆垱娲橀崹鍨嚕閸涘﹦闄勭紒瀣硶椤斿棗鈹戦悙鍙夆枙濞存粍绻堥崺娑㈠箣閿旂晫鍘卞┑鐐村灦閿曨偊宕濋悢铏圭＜闁绘娅曞畷宀勬煙椤旂瓔娈旀い顐ｇ箞閹剝鎯旈姀顫喚闂傚倷绀侀幖顐﹀箠鎼淬劍鍋夐柣鎾冲瘨閸ゆ洟鏌熺紒銏犳灍闁稿瀚槐鎾诲醇閵忕姌銉╂煟閳轰線鍙勬慨濠勭帛閹峰懘鎮烽柇锕�娈濇繝鐢靛仜瀵爼宕归悽绯曪拷鏃堝礃椤旇偐顔婂┑掳鍊ч幏鐑芥偡濞嗘瑩妾柕鍥у楠炲洭宕奸弴鐕侊拷宥夋⒑缂佹ɑ灏扮紒瀣灴婵℃挳骞掗幋顓熷兊濡炪倖甯婇悞锕傚箖濞嗗繆鏀介柣鎰级閸ｅ湱绱掓径濠勭Ш鐎殿喖顭烽幃銏ゅ礂閻撳簼绨甸梺纭呭閹活亞寰婇幐搴闂傚倸鍊峰ù鍥敋閺嶎厼鍨傚ù鍏兼綑绾惧綊鏌涢…鎴濇灓闁哄棴绠撻弻鏇熺節韫囨搩娲紓浣叉閹风兘姊绘担渚劸閻炴凹鍋婂畷鎰板箻閼告娼熼梺鎸庢煥婢х晫澹曟禒瀣厱閻忕偛澧介幊鍡涙煕韫囨挾鐒搁柡灞熷棛鐤�闁规崘顕у浼存倵鐟欏嫭纾搁柛銊ㄦ缂傛捇鎮惧畝锟介惌娆撴偣娓氼垳鍘涢柛鐐垫暬濮婅櫣鎷犻幓鎺戞瘣缂傚倸绉村Λ婵嗙暦娴兼潙鍐�妞ゆ挾鍠庢禒鎯ь渻閵堝棙绌块柟椋庡厴閺岋紕浠﹂崜褎鍒涙繝纰夌磿閸忔ɑ鎱ㄩ敓浠嬫煃閳轰礁鏆熺憸鏉挎川缁辨挻鎷呴崫鍕闂佺瀛╂繛濠冧繆閸撲胶鐭欐繛鍡樺劤濞堛劑姊洪崜鎻掍簼婵炲弶鐗犻弻瀣炊閵娧咁啎闂佺懓顕导婵嬵敂閸熬鎷烽弽顐嫹閿濆骸澧扮痪鎹愭闇夐柨婵嗘噺閹牓宕幖浣光拺缂佸顑欓崕宥夋煕婵犲啰绠撴い鏇稻缁绘繂顫濋鐔哥彸闂備礁鎲℃笟妤佺濠靛缍栫�广儱顦伴埛鎴︽煕濞戞﹩鐓繛鍫燂耿閺屾稓锟斤綆鍓欐禒閬嶆煙椤曪拷濞佳囧煘閹寸媴鎷烽敐搴′簻闁跨喕妫勯悘姘辨崲濞戙垹閱囨繝闈涚墔閾忓酣姊洪崫鍕靛剭闁稿﹥绻堝濠氬焺閸愨晛顎撻梺鍛婃崄鐏忔瑩宕ョ�ｎ�棃鎮╅棃娑楃捕闂佸摜鍣ラ崹宕囧垝鐎ｎ喖绠抽柡鍐╂尰鐎氬綊鏌ㄥ┑鍡涱�楀ù婊勭矊闇夐柣妯挎珪閵囨繃鎱ㄦ繝鍐┿仢鐎规洘绮撻幊鐘活敆閿熺晫鏁妷鈺傗拺缂佸顑欓崕蹇涙倵濮樼厧澧撮柛鈹垮灩椤撳吋寰勬繝搴㈢秱闂備線娼ч悧鍡椢涘畝鍕濠电姵纰嶉埛鎴犵磼鐎ｎ偄顕滄繝锟芥导瀛樼厽闁绘梹绻傚▔姘跺炊椤掍焦娅囬梺绋挎湰缁嬫捇宕㈤悽鐢电＜闁绘劦鍓氱欢鑼拷瑙勬处閸撴氨绮嬪澶嬪�烽柣鎴烆焽閸欏棝姊虹紒妯活梿妞ゆ泦鍡╂毐濠电姵顔栭崰妤勫綘闂佸憡姊归崹鐢告偩瀹勬嫈鏃堟晸閸婄喓浜介梻浣瑰劤缁绘锝炴径濞炬灁濡わ絽鍟崑鈩冪節婵犲倹鍣规い锝呫偢閹粙顢涘☉妯碱儌闂佹眹鍎烘禍锝壦囪ぐ鎺撶厸閻忕偛澧藉ú瀵革拷娈垮枛椤兘銆佸Ο渚叆闁告劖瀵х�氬湱鎲搁弮鍫㈠祦闊洦绋掗崐濠氭煢濡警妲烘い鏂挎喘閺岀喖鎮℃惔锝嗘喖缂備礁顑嗛崝妤呮嚍鏉堛劎绡�婵﹩鍙庡Λ鍛渻閵堝棗濮傞柛銊у劋瀵板嫰宕熼娑氬幍闂佸憡绺块崕杈ㄧ妤ｅ啯鐓涢柛娑卞幘閸╋絿锟芥鍠楅幐鎶藉箖閳哄懏鍋ㄧ痪鏉款槺鎼村﹪姊婚崒娆掑厡缂侇噮鍨堕弫瀣⒑濞茶绨烽柛妤�鍟块悾鐑藉箣閿曪拷椤懘鏌曢崼婵囶棤闁告ɑ鎮傞弻锝堢疀閺囩偘绮舵繝鈷�鍌滅煓濠碘剝鎸抽獮鎺楀箠閵娿儳绉洪柟顕呬邯瀹曘劑顢涘鍕啌濠德板�楁慨鐑藉磻閻愬搫鍨傞柛褎顨堝畵渚�鏌涢妷顔煎⒒闁轰礁妫楅…璺ㄦ崉娓氼垰鍓惧┑鈽嗗亖閸旀垵顫忔繝姘＜婵﹩鍓ㄩ幏鐑藉箹娴ｅ摜锛欓梺缁樺灱婵倝宕愰崸妤佺叆闁哄浂浜濈�氱懓顪冮妶搴″箹闁诲繑绻嗛悘鎺楁⒑閹呯妞ゎ偄顦埢鎾诲箚瑜滃〒濠氭煏閸繃顥滅紒妤佸浮閹顫濋悡搴♀拫闂佽鍣换婵嬪垂妤ｅ啫绠涘ù锝呮惈閺佹悂姊绘担绋挎倯闁诡喖鍊搁…鍥槼闁逛究鍔戝畷鍫曞煛閸愵亷绱查梻浣虹帛閿氶柟纰卞亰瀹曘儵宕烽鐘碉紲闁哄鐗勯崝宀�绮幒妤佺厓闁芥ê顦藉Σ鍛娿亜椤愶絿绠炴い銏★耿閹瑧锟介潧鎲″▓顔尖攽閻樺灚鏆╁┑顔炬暬椤㈡瑩寮介鐐电崶濠德板�曢崯浼存儗濞嗘挻鐓欓弶鍫濆⒔閻ｉ亶鏌ｉ幘杈捐�块柡宀�鍠愬蹇斻偅閸愨晩锟藉秹姊虹粙鍖″姛闁稿繑锕㈠濠氬Χ閸パ勭�抽梺鍛婎殘閸嬫盯锝為埡鍛拺闁告劖褰冨Σ濠氭煥閺囥劋绨绘い顐㈢箰鐓ゆい蹇撴噹娴狀參姊洪崫鍕垫Ч閻庣瑳鍥舵晩闁跨喍绮欏缁樻媴閻戞ê娈岄梺鎼炲�栭悧鐘荤嵁韫囨稒鏅搁柨鐕傛嫹
		LinkedList<Long> rolelistid=new LinkedList<Long>();//缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿喗鎸抽幃娆戞嫚瑜庣�氬綊鏌涢锝嗙闁哄懏鎮傞弻锕�螣娓氼垱笑闂佸搫妫寸徊楣冦�冮妷鈺傚�烽柛娆忣槸閺嬬姴顪冮妶鍐ㄧ仾闁荤啿鏅涢悾鐑芥晲婢跺á銊ф喐韫囨稑绠熺憸鐗堝笚閳锋帡鏌涚仦鍓ф噯闁稿繐鏈妵鍕閻欏懓鍚Δ鐘靛仦閹瑰洭銆侀弮鍫濆耿婵炲棗娴烽悷婵嬫⒒娴ｇ儤鍤�妞ゆ洦鍘介幈銊╂煥鐎ｎ兘鏋栭悗骞垮劚椤︿即鎮″☉姘炬嫹楠炲灝鍔氬Δ鐘虫倐閻涱噣寮介銈囷紲闂佺粯眉鐠�锕�顭囬幇顔剧＜缂備焦顭囧ú鎾煛娴ｇ懓濮堥柟顖涙閸ㄩ箖骞囨担閫涙唉濠电姷鏁告慨鎾儉婢舵劕围闁告侗鍓氶惈蹇曠磽閸屾瑦绁板鏉戞憸閺侇噣鏁撻悩鑼暫濡炪倕绻愮�氀囧几鎼淬劎鍙撻柛銉ｅ妽閻撱儲銇勯敂瑙勬珚婵﹨娅ｇ槐鎺懳熺拠鑼暡闂備礁鎽滈崰鎰板箰閸愬樊鍤曞┑鐘宠壘閸楁娊鏌ｉ弮鍫缂佹劗鍋ゅ娲礈閹绘帊绨肩紓浣筋嚙閸婂綊骞堥妸锔藉劅闁挎繂娲ㄩ敍婵囩箾鏉堝墽鍒伴柟纰卞亰閹敻鏁撻悩宕囧幈闂佸搫娲﹂〃鍡椻枍閸愵亞纾奸柕濞垮労閻撳吋鎱ㄦ繝鍥╃窗闁靛洦鍔欓獮鎺楀箣濠婂啯鐎虫繝鐢靛仜閻°劎鍒掓惔銊ョ；闁靛牆顦粻姘舵倶閻愮紟鎺楀几鎼淬劍鐓欓柟顖嗗苯娈堕梺鍛娚戦幃鍌炲箖濡ゅ懏鍎岄柛娑橈工椤忓爼姊虹拠鎻掑毐缂傚秴妫濆畷婊冣槈濠ф儳寰嶆繝鐢靛Х閺佸憡鎱ㄩ悜濮愶拷鍌涚鐎ｎ亞顦┑鐘绘涧椤戝懐绮婚弽顓熺厱閻忕偛澧介埣銉х磼鐠囧弶顥㈤柡宀嬬秮楠炲鏁愰崱鈺傤棄闂佸摜鍎愰崹浼粹�旈崘顔嘉ч柛鈩冿供濮婂潡鎮楃憴鍕婵炰匠鍡欎罕婵＄偑鍊栭悧妤冪矙閹捐泛濮柨鐔剁矙濮婂搫效閸パ呬紙濠电偘鍖犻崱蹇撳胶闂傚倸鍊烽懗鍫曞箠閹捐搴婇柡灞诲劚閻ゎ噣鏌℃径瀣仼闁哄棴闄勯幈銊ノ旂�ｎ偄顏舵俊鐐�戦崹娲箲閸ヮ兙锟戒礁鈽夐姀鐘茶�垮┑掳鍊撶粈渚�鎮甸弮鍫熲拺闁荤喐婢樺Σ濠氭煕閵忥紕鍙�闁糕斂鍨介獮妯兼嫚閹绘帞锟筋厼顪冮妶鍡樷拻闁哄拋鍋呯粋宥夘敂閸啿鎷绘繛杈剧悼閻℃棃宕靛▎鎴犵＜缂備焦锚閻忔挳鏌熼搹顐ょ畺闁靛牞缍佸畷姗�鎮欓浣圭彣闂傚倷绶氬褔藝椤愶箑鐤炬繛鎴炴皑閻棝鎮楅敐搴′簴濞存粍绮撻弻鐔煎箚瑜滈崵鐔虹磼閻樺磭澧甸柡灞剧洴瀵挳鎮欓崣澶嬵啋婵犳鍠栭敃銊モ枍閿濆洤鍨濇繛鍡樻尭缁�宀勬煃閵夈儱鏆辨い顐ゅ█濮婄粯鎷呴崨濠冨枑婵犳鍠氶弫濠氱嵁閹达箑鐐婃い蹇撴媼濡劍绻濋悽闈涗粶妞ゆ洦鍙冨畷銏ｎ樄闁诡喗妞芥俊鎼佸煛娴ｅ搫骞堥梻浣侯攰閹活亪姊介崟顖氱；闁挎繂顦伴悡鏇㈡煏婢舵稓鍒板┑陇鍋愮槐鎺楀箵閹烘繄鍚嬮梺鍝勬湰閻╊垱淇婇懜闈涚窞濠㈣泛顑呴弸銈夋⒒娴ｅ憡鎯堥柣顒�銈稿畷浼村冀瑜忛弳锔界箾閸℃ɑ灏崶鎾⒑缁洖澧叉い銊ョ箲鐎靛ジ鏁撻敓锟�?
		HashMap<Long, Long> watchfight=new HashMap<Long, Long>();
		Scene scene = SceneManager.getInstance().getSceneByID(CQMAPID);
		Set<Integer> aroundIndexs = new java.util.HashSet<Integer>();
		aroundIndexs.add(3);
		aroundIndexs.add(65539);
		Map<Long, Role> roles=scene.getAllRolesInScreens(aroundIndexs);
		int num=0;
		for(Role role : roles.values()){
			GridPos hostGridPos = role.getPos().toGridPos();
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣仱閹囨偐濮瑰浄鎷锋笟锟藉鎾閻樻爠鍥╁彄闁搞儯鍔嶉悡銉︺亜韫囨碍纭鹃柍瑙勫灴椤㈡瑩鎯岄顐＄盎闁伙絿鍏橀、妤呭礋椤愩垹浜堕梺璇叉捣閺佽顭囨繝姘濡炲瀛╅崰鍡涙煕閺囥劌澧版い锔诲枛椤啴濡舵惔鈥茬盎濡炪倧绠撴禍鍫曞极閹惧顩烽悗锝庡亝闁款參姊洪棃娑氬ⅱ妞ゎ厼鐗撻、姘舵晲婢跺﹪鍞堕梺鍝勬川閸嬬喖顢樺ú顏呪拺缂備焦鈼ら鍫熷�舵慨姗嗗劮閹烘挻鍎熼柕蹇嬪灮閻﹀牓姊哄Ч鍥х伈婵炰匠鍕浄闁挎洖鍊归悡娆戠磼鐎ｎ偒鍎ラ柣鎾炽偢閺岀喖顢欓崫鍕紙濡炪們鍨洪〃濠傜暦閻旂⒈鏁冮柕鍫濋閺佸憡绻濈喊澶岀？闁稿鐩、鏍川閺夋垹顦╂繛瀵稿Т椤戝懐绮婚姘兼富閻庯綆浜滈銏ゆ煕閻樺弶顥㈤柡灞剧洴瀵挳濡搁妷銉骄婵＄偑鍊х�靛矂宕ｉ崘顭戞綎闁惧繐婀遍惌娆撴偣閹帒濡挎い鏂款樀閺岋箓宕橀妸銉ㄥ煘闁兼寧鍔欓弻娑㈠Ψ閹存繄啸闁告凹鍋勮灃闁绘﹢娼ф禒锕傛煟濡や緡娈滄鐐茬箻瀹曘劑顢涘☉妯荤�梻浣告啞濞诧箓宕滃☉婧夸汗闁糕剝绋掗埛鎺楁煕鐏炲墽鎳呮い锔肩畵閺屾稑顫濋澶婂壉缂備礁鍊哥粔鐢电矉閹烘棑鎷烽敐搴濈敖闁挎稓鍠栧缁樼瑹閸パ冾潻缂備礁顦顓犲垝閸儱閱囬柣鏃傜節缁ㄥ姊虹憴鍕姢鐎规洦鍓熼幃姗�顢旈崼鐔哄帗闂備礁鐏濋鍛箔閹烘鐓忛柛鈩兠粭鎺撱亜椤愶絿绠為柟顔界懇椤㈡鏁撴禒瀣垫晜闁煎摜鏁哥弧锟介梺姹囧灲濞佳勭瑜旈弻娑樜熼悩鍙夌闁跨喐鏋荤粻鎾诲箖濠婂牊鍋╅悘鐐垫櫕閵堬箓姊绘繝搴′簻婵炶濡囩划娆撳箳濡わ拷閻ら箖鏌熼梻瀵稿妽闁绘挶鍎甸弻锝夊即閻愯鎷烽崷顓ㄦ嫹濮樼偓瀚�?
			if (!role.getScene().getMapInfo().getBlockInfo().checkCanQiecuo(hostGridPos.getX(), hostGridPos.getY())) {
				continue;
			}
			//缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚敐澶婄闁挎繂鎲涢幘缁樼厱濠电姴鍊归崑銉╂煛鐏炶濮傜�殿噮鍓熷畷褰掝敊鐟欏嫬鐦遍梻鍌欑劍濡炲潡宕㈡禒瀣仭闁冲搫鎳庨拑鐔兼煟閺傝法娈遍柡瀣叄濮婁粙宕堕澶嬫櫔閻熸粌绉堕崣鍛存⒑閹稿孩绌块柟鐑芥敱閵囧嫰顢橀悙瀵糕敍缂備胶濮电粙鎴﹀煡婢舵劕绠抽柣鎰綑椤忓爼姊洪幐搴㈢闁稿﹤鎽滅划濠氭晲婢跺鍘介梺鐟扮摠缁诲啴藟濠婂牊鐓涢柛婊�绀佹晶瀛樻叏婵犲偆鐓肩�规洘甯掗埢搴ㄥ箣濠靛棭鐎撮梻鍌欐祰椤曟牠宕伴弽顓熷亯闁绘挸娴烽弳锕傛煛閸モ晙绱虫繛宸憾閺佸倿鏌涢弴銊ュ季婵¤尪鍩栫换婵嬫偨闂堟稐绮跺┑鈽嗗亝閻熲晠鐛幇鏉跨濞达絿鎳撻崜鐟扳攽鎺抽崐褔骞忛悜鑺ョ厓閻熸瑥瀚悘鎾煙椤旇娅婃鐐存崌楠炴帡骞橀幖顓炴偐濠电姷鏁搁崑娑㈡偤閵娧冨灊鐎广儱娲ら崹婵嬫煙閹规劦鍤欓柦鍐枛閺屽秹濡烽敃锟芥晶顖炴煕濮橆剦鍎旈柡灞剧洴楠炲洭鍩℃担鍓茬�虫俊鐐�ら崜娆擃敄閸涚补锟芥棃宕橀鍢壯囩叓閸ャ劍绀堥拑閬嶆⒒娴ｈ櫣甯涢柟纰卞亞閹广垹鈹戦崱鈺佹闁荤姴娲︾粊鏉懳ｉ崼鐔虹闁糕剝锚婵洭鏌涢弬鎸庡殗婵﹨娅ｉ敓钘夋贡婵敻藟婢舵劖鐓欓柛鎰絻椤掋垽鏌熸笟鍨闁宠棄顦～婵囨綇閳哄闂繝鐢靛仩閹活亞寰婇懖鈺佸灊婵炲棙鎸告导鐘崇箾瀹割喕绨奸柛瀣ㄥ妽閵囧嫰寮介妸褉妲堢紓浣广仜閺呯娀寮婚敐鍫㈢杸闁规崘娅曞▓濠氭⒑閸濆嫮鐒跨紒鏌ョ畺楠炲棝寮崼顐ｆ櫖濠电姴锕ら幉娑㈡晲婢跺鎷洪梺鍛婄☉閿曘儳浜告导瀛樼厽闁冲搫锕ら悘鐘炽亜閺囶亞绉鐐查叄閹崇偤濡烽妷銈嗙潖缂傚倸鍊搁崐鐑芥倿閿曚礁缍旈梻浣哥秺閺�鍗烆渻娴犲钃熼柨婵嗩槹閸嬫劙鏌涘▎蹇ｆШ妞わ箓浜跺铏规崉閵娿儲鐎婚梺璺ㄥ枔閺咁偊宕伴幇鐗堝仧妞ゅ繐鐗婇悡鐔肩叓閸ャ劍灏靛褎娲熼弻宥囨喆閸曨偆浼岄梺璇″枟閻熴儵顢欒箛娑辨晩闁稿繒鈷堥崯锟介梻鍌氬�烽懗鍫曗�﹂崼銏″床闁硅揪闄勯弲婵嬫煏韫囧锟芥牠宕戝Ο姹囦簻闁哄啫娲﹂ˉ澶岀磼閸撲礁浠遍柡宀�鍠栭弻鍥晝閿熶粙鐛弽顬＄懓顭ㄩ崼婊勫枤濠殿喖锕ュ钘夌暦濠婂牆绠甸柟鍝勭Ф閺佹牠姊绘担鍛婃喐濠殿喗鎸抽弻濠囨晲婢跺牞鎷锋笟锟介獮妯兼嫚閼碱剦鍟嬬紓鍌氬�烽悞锕佸綔闂佸綊鏀卞钘夘潖婵犳艾纾兼慨妯哄船椤ｇ敻姊洪崫鍕櫤闁烩晩鍨堕獮鍡樻媴閸撹尙鍙嗛梺鍓插亞閸犳捇宕㈤崡鐐╂斀闁宠棄妫楅悘鐘崇節閿熶粙鏌嗗鍡楀壒濠电偛妫欓崺濠囧箯妞嬪孩鍠嗛柛鏇ㄥ墰椤︻參姊洪崫銉バｉ柣妤冨Т椤曪綁顢曢敃锟界粻鑽ょ磽娴ｈ偂鎴濃枍閵忋倖鈷戦悹鎭掑妼濞呮劙鏌熼崙銈嗗
			if(role.getLevel()<fire.pb.battle.CSendInvitePlayPK.PVP_LEVEL){
				continue;
			}
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩胶锟藉箍鍎遍ˇ顖滅矆鐎ｎ偁浜滈柟鍝勭Ф閸斿秵銇勯弬鎸庡枠婵﹦绮幏鍛喆閸曨偂鍝楅梻浣侯焾鐎涒晛顪冮挊澶屾殾婵犲﹤鍟犻弸搴ㄦ煙鐎涙绠ユ俊顐ｇ矒閹嘲顭ㄩ崨顓ф毉闁汇埄鍨遍〃濠囧箖閳ユ枼妲堟慨妯煎亾鐎氳顨ラ悙鑼虎闁告梹鑹捐灃闁绘娅曢崐鎰版煟濞戝崬娅嶇�殿喕绮欓、姗�鎮㈤崫鍕睄闂傚倷绀侀幉锟犲礉閿旂晫顩叉繝濠傜墕閸戠姵绻涢幋娆忕仾闁绘挻鐩幃姗�鎮欓幓鎺嗘寖濠电偛寮跺娆撳煘閹达附鏅柛鏇ㄥ亜楠炲顪冮妶鍐ㄧ仾闁荤啿鏅犻獮鍐焺閸愨晛鍔呭銈嗘⒐閸ㄦ繂顫濋敂鍓х＝闁稿本鑹鹃敓鑺ユ倐瀹曟劖顦版惔銏╁仺闂侀潧鐗嗛ˇ顖滅不椤栫偞鐓熼柟杈剧到琚氶梺缁樻尰濞茬喖寮诲澶婄厸濞达絽鎲″▓鍫曟⒑閸愭彃缍栫紒鑸靛哺瀵鏁愭径濠勵啋闁荤姾娅ｉ崕銈夋倵妤ｅ啯鈷戦梺顐ｇ〒閳规帡鏌涢弬璺ㄧ劮闁诲繐鍟村铏规崉閵娿儲鐎虹紓渚囧枟閻熲晠鐛崘顓фЪ缂備胶绮换鍫濈暦閻斿吋鍤嬮梻鍫熶緱娴兼挻绻濆▓鍨灍妞ゎ厼娲畷鎴﹀箻鐠佽瀚规慨妯煎亾鐎氾拷?濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻愰湁闁稿繐鍚嬬紞鎴︽煕閵娿儱锟藉潡寮婚敐澶婄鐎规洖娲ら崫娲⒑閸濆嫷鍎愰柣妤侇殘閹广垹鈽夐姀鐘殿吅濠电偛妫楃换鎺撶妤ｅ啯鈷戠紒瀣仢椤掋垽鏌＄仦璇插闁糕晝鍋ら獮瀣晝閿熺晫澹曢崗鑲╃瘈濠电姴鍊归幑锝夋煕閺傛寧鎲哥紒杈ㄦ尰閹峰懘宕崟鎴欏灮缁辨挸顓奸崪鍐惈閻庢鍠栭…閿嬩繆閸洖瑙﹂柕鍫濇噺鐠愶繝鏌ㄩ悢鍛婄伄缂傚秴妫濆畷鎴﹀川鐎涙ê浠ч梺鍝勭▉閸嬪棛澹曟總鍛婄厽闁逛即娼ф晶顕�鏌涢弬璇诧拷婵嬪蓟閺囥垹閱囬柣鏃傤焾閿熻姤鍔楅敓鑺ヮ問閸犳牠鈥﹂柨瀣╃箚闁归棿绀侀悡娑㈡煕鐏炲墽鐓紒銊ょ矙濮婄粯鎷呮笟顖滃姼闂佸搫鐗滈崜娑氬垝濞嗘挸绠ｉ柨鏃傜帛閺呮粓姊虹捄銊ユ珢闁瑰嚖鎷�?
			if(role.getLevel()<levelmin||role.getLevel()>levelmax){
				continue;
			}
			if(school>0){
				if(role.getSchoolId()!=school){
					continue;
				}
			}
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮村杈┬㈤梻浣规偠閸庢椽宕滈敃鍌氭瀬闁告劦鍠楅悡銉╂煛閸ユ湹绨奸悗姘秺濮婂搫效閸パ嶆嫹濡ゅ懎纾婚柟鎹愬煐瀹曞弶绻涢幋娆忕仼缂佺媴缍侀弻锝夊箛閵婏附鐝曢梺鎸庣☉閻楀棝鍩為幋锔藉�烽柛娆忣槴閺嬫瑦绻涚�涙鐭嬬紒璇茬墕椤曪綁骞撻幒鍡樻杸闁诲函缍嗛崑鍡涘储闁秵鐓熼煫鍥ㄦ礀娴犙囨煕鐎ｎ偅宕岄柟顖氬暣楠炲鎮欓鍐泿闂備礁鎼崐鍦拷绗涘洤鍚归柛銉ｅ妽閸欏繐鈹戦悩鎻掓殲闁靛洦绻冩穱濠囶敃閵忕姵娈梺瀹犳椤︻垶锝炲┑瀣垫晢濠㈣泛顑嗛惁鎺撶節绾板纾块柛瀣灴瀹曟劘顦寸紒杈ㄦ尭椤繄鎹勯搹璇℃敤闂備礁鎲￠崝妯间焊濞嗘挸姹查柨鏇炲�归悡鏇熴亜椤撶喎鐏ュù婊呭仧缁辨帡鍩ラ崨顔碱伓闂傚倸鍊风粈渚�骞夐敓鐘茬鐟滃繒妲愰幘鎰佹僵閺夊牜鍋勫皬濠电姷鏁告慨鐢靛枈瀹ュ＆澶嬬節閸愶缚绨婚梺瑙勫閺呮盯鎮橀鍕电唵閻犲搫鎼顓㈡煛瀹�锟介崰鏍х暦閵婏妇绡�闁告劦鐓夐幏鐑藉箛椤撴粈绨婚梺闈涚箚閸撴繈藟閸喆浜滈柕蹇婂墲缁�瀣攽閳ュ磭鍩ｇ�规洖鐖奸崺锛勶拷锝庡墮缁ㄣ儵姊婚崒姘拷鐑芥嚄閸撲礁鍨濇い鏍仦閸嬶繝鏌曟径鍡樻珔缂佺姷濞�閻擃偊宕堕妸锔锯敍闂佺懓鍢查崲鏌ワ綖濠靛鍊锋い鎺炴嫹妞ゅ骏鎷�
			if(role.getRoleID()==hostid){
				continue;
			}
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩胶锟藉箍鍎遍ˇ顖滅矆鐎ｎ偁浜滈柟鍝勭Ф閸斿秵銇勯弬鎸庡枠婵﹦绮幏鍛喆閸曨偂鍝楅梻浣侯焾鐎涒晛顪冮挊澶屾殾婵犲﹤鍟犻弸搴ㄦ煙鐎涙绠ユ俊顐ｇ矒閹嘲顭ㄩ崨顓ф毉闁汇埄鍨遍〃濠囧箖閳ユ枼妲堟慨妯煎亾鐎氳顨ラ悙鑼虎闁告梹鑹捐灃闁绘娅曢崐鎰版煟濞戝崬娅嶇�殿喕绮欓、姗�鎮㈤崫鍕睄闂傚倷绀侀幉锟犲礉閿旂晫顩叉繝濠傜墕閸戠姵绻涢幋娆忕仾闁绘挻鐩幃姗�鎮欓幓鎺嗘寖濠电偛寮跺娆撳煘閹达附鏅柛鏇ㄥ亜楠炲顪冮妶鍐ㄧ仾闁荤啿鏅犻獮鍐焺閸愨晛鍔呭銈嗘婵倗绮婃导瀛樷拻闁稿本鑹鹃敓鐣屽厴閹虫宕奸弴妤嬫嫹閿曞倸閱囬柕澶樺枟閺呯偤姊虹化鏇炲⒉闁荤噦绠戦悾鐑藉蓟閵夛妇鍘卞銈嗗姉婵挳宕濆鑸电參闁告劦浜滈弸鏃堟煥閻旂粯顥夌紒鐘茬Ч瀹曟洟宕￠悙宥嗙☉閳诲酣骞囬鐐蹭紟婵犵數濮撮敃銈夋偋婵犲洦鍋傛繛鍡樺姉缁犻箖鏌涢锝囩畼濞寸姰鍨介弻锛勶拷锝堟硾椤╊剛绱掓潏銊ユ诞妤犵偛娲、妯款槼闁汇倓绀侀埞鎴︻敊绾攱鏁惧┑锛勫仩濡嫰鎮鹃悜绛嬫晝闁挎洩鎷烽崬顖炴⒑闂堟侗妾у┑鈥虫穿閵囨劕顫濋懜纰樻嫽婵炶揪绲介幗婊呯矓閻戞ǜ浜滈柕澶涢檮瀹曞瞼锟借娲橀〃鍛扮亽婵炴挻鍑归崹杈╃礊鎼达絿纾介柛灞剧懅閸斿秹鎷戦崡鐐╂斀妞ゆ牗绋掔亸锕傛煛鐏炲墽鈽夐柍钘夘槸椤粓宕奸悢鍛婃瘞闂傚倷鑳堕…鍫拷娑掓櫊楠炴垿宕堕锟介拑鐔兼煥濠靛棙顥為柛搴ｅ枛閺屾洝绠涢妷褏锛熷┑鐐茬墑閸婃繂顫忛搹鍦煓閻犳亽鍔庨澶愭⒑閹稿骸鍝洪柡宀嬬秮閺佹劖寰勫Ο娲绘闂備胶鎳撳鍫曞箰閸愯尙鏆﹂柣鏃傗拡閺佸啯銇勯幇鈺佺仾妞ゆ梹鎹囧濠氬磼濞嗘埈妲梺鍦拡閸嬪﹨妫熸繛鏉戝悑濞兼瑩宕归崒婊勫枑闁绘鐗嗙粭姘舵煕鐎Ｑ勬珚闁哄矉缍侀獮鍥濞戞﹩娼剧紓鍌欒兌婵烇拷缂佺姵鐗曢锝夊醇閺囩偤鍞跺┑鐘绘涧濡矂骞愰崘顏嗙＝濞达絽澹婂Ο鍫ユ煕閹惧瓨鐨戦柟骞垮灩閳藉濮�閻樼偨浠㈤梻浣告啞閸旓附绂嶅┑瀣；鐟滃海鎹㈠┑瀣潊闁挎繂瀛╃紞鍫濃攽閻愭彃绾фい顓炴川缁辨捇骞樼�靛壊娴勯柣搴秵娴滄粎绮ｅ☉娆戠瘈闁汇垽娼у瓭闁诲孩鍑归崜鐔兼偘椤曪拷瀹曞ジ濡烽敂瑙勫濠电偠鎻徊浠嬪箟閿熺姴绠氶柛顐ゅ枔缁犻箖鎮橀悙鎻掞拷鎼佹倶閼碱剨鎷风憴鍕缂佽鍊块幃鎯р攽鐎ｎ亞顦板銈嗗釜閹风兘鏌ㄩ悢缁橆棄闁绘牕銈稿濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔界妤ｅ啯鈷戠紒瀣儥閸庢劙鏌ｅΔ渚囨畼闁瑰箍鍨归埞鎴狅拷锝庡亽濡啫鈹戦悙鏉戠仴鐎规洦鍓熷畷婊堟焼瀹ュ棌鎷洪梺瑙勫劶婵倝寮柆宥嗙厱闁靛鍎查崑銉э拷娈垮枛椤兘骞冮姀銈嗘優闁革富鍘鹃崢顖炴⒒娴ｅ憡璐℃い顓炵墢閿熻姤绋堥弲娑㈡偩閻戣棄绠柤鎭掑劗閹锋椽鏌ｆ惔鈩冭础濠殿喚鏁昏棢濠㈣泛顑冩禍婊堟煥閺冨倸浜鹃柡鍡╁墰閿熻姤顔栭崰鏍�﹂悜钘夋瀬闁归偊鍘肩欢鐐翠繆椤栨粎甯涙繛鍛У缁绘繈鎮介棃娑掓瀰濠电偘鍖犻崶銊︽珖闂侀潧鐗嗛ˇ顖炲磼閵娾晜鐓ラ柣鏂挎惈鏍￠梺鎶芥敱閸ㄥ潡寮婚敐澶嬪亜缂佸顑欏Λ鍡涙⒑娴兼瑧绉甸柛娆忓暣瀵鈽夐姀鐘栤晠鏌曟繝蹇撶槣婵☆偄瀚板鐑樺濞嗘垵鍩岄梺鎼炲灪閻擄繝鏁愰悙宸叆闁割偆鍠愬▍銏＄箾鐎电孝妞ゆ垵鎳橀幃姗�骞庨懞銉у弳闂佸搫娲ㄩ崑娑㈡晸閽樺鎲哥紒顔碱煼閺佹劖寰勭�ｎ剙骞楁繝纰樻閸ㄧ敻顢氳瀵板﹦绱掑Ο璇插伎闁荤喐鐟ョ�氼噣宕ｉ敓钘夆攽椤旂》宸ユい顓炲槻閻ｇ兘骞掗幋鏃�鐎婚梺鐟邦嚟婵嘲鐣烽崣澶岀瘈闁汇垽娼ф禒鎺楁煕閺嶎偄鈻堢�规洖鐖兼俊鎼佸Ψ閵堝洨绉块梻鍌氬�烽懗鍓佹兜閸洖绀堟繝闈涱儐閹叉﹢鎮楅敐搴℃灈闁绘劕锕ラ妵鍕箳閻愭潙顏剁紓鍌欒兌婵參宕归幎鑺ユ櫢闁伙絽鏈鐔兼煙瀹勬澘妲婚柍瑙勫灴閹晠骞撻幒鎾搭唹缂傚倷绶氶·鍌炲矗閸愵煈娼栧┑鐘宠壘绾惧吋鎱ㄥ鍡楀⒕闁归鍏橀獮鏍ㄦ媴閸濄儻绱┑锛勫仜椤戝懐锟芥稈鏅犻、鏇㈡嚍閵夛箑寮垮┑顔筋殔濡鏅舵繝姘厽闁圭儤娲橀ˉ澶愭煃鐟欏嫬鐏撮柟顔规櫇閿熻棄婀辨慨鎾夊┑鍫㈢＝濞达絽鎼宀勬煕閵娿儳鍩ｇ�殿喖顭锋俊鎼佸煛閸屾矮绨介梻浣侯焾閺堫剛绮欓幋锔绘晜闁跨噦鎷�?
			Team host_Team = TeamManager.selectTeamByRoleId(role.getRoleID());
			if (host_Team != null && host_Team.isNormalMember(role.getRoleID())){
				continue;
			}
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩胶锟藉箍鍎遍ˇ顖滅矆鐎ｎ偁浜滈柟鍝勭Ф閸斿秵銇勯弬鎸庡枠婵﹦绮幏鍛喆閸曨偂鍝楅梻浣侯焾鐎涒晛顪冮挊澶屾殾婵犲﹤鍟犻弸搴ㄦ煙鐎涙绠ユ俊顐ｇ矒閹嘲顭ㄩ崨顓ф毉闁汇埄鍨遍〃濠囧箖閳ユ枼妲堟慨妯煎亾鐎氳顨ラ悙鑼虎闁告梹鑹捐灃闁绘娅曢崐鎰版煟濞戝崬娅嶇�殿喕绮欓、姗�鎮㈤崫鍕睄闂傚倷绀侀幉锟犲礉閿旂晫顩叉繝濠傜墕閸戠姵绻涢幋娆忕仾闁绘挻鐩幃姗�鎮欓幓鎺嗘寖濠电偛寮跺娆撳煘閹达附鏅柛鏇ㄥ亜楠炲绻濆▓鍨珯闁归鍏樺娲棘閵夛附鐝旈梺鍝ュ枑婵粙濡甸幇鐗堟櫜濠㈣泛顑傞幏缁樼箾鏉堝墽鍒伴柟鑺ョ矌缁棃鎮滃Ο闀愮盎闂侀潧顧�闂勫嫬鐣峰畝锟介敓鍊燁潐濞叉﹢銆冮崨杈剧稏婵犲﹤鐗婇弲绋棵归悩宸剳鐎规挷绶氶弻娑㈠箛閵婏附鐝栧銈傛櫇閸忔﹢骞冨Δ鍛櫜閹煎瓨绻勯惄搴ㄦ⒑鐠囨彃鐦ㄩ柛妯恒偢閳ユ棃宕橀鍢壯囨煕閳╁喚娈旀い顐㈡喘濮婃椽骞栭悙鎻掝瀴濠碉紕鍋樼划娆撶嵁閸愨斂鍋呴柛鎰亾閺呫垽姊虹粙鎸庢拱缂侇喖閰ｉ弫宥呪攽鐎ｎ偀鎷虹紓浣割儐鐎笛冿耿娴煎瓨鐓熼柣鏂垮级濞呭懏銇勯锟介敃顏堝箖濠婂牊鍤嶉柕澹啫绠為梻鍌欑閹碱偊宕愰挊澶嗘灃闁哄洨鍋炲В鍕⒒閸屾瑧绐旀繛浣冲厾娲晝閸屾氨顦┑鐐叉缁绘帡寮抽敂鑺ュ弿婵°倕顑嗙�氱懓顪冮妶鍐ㄧ仾闁挎洏鍨介獮鍐煛閸屾稓绉跺銈嗗姂閸ㄥ宕濋悽鍛娾拻闁稿本鑹鹃敓鑺ユ倐瀹曟劙骞栨担鍝ワ紮闂佺粯鍨兼慨銈夊吹閸曨垱鐓曟い鎰剁稻缁�锟界紒鐐劤椤兘寮婚弴鐔虹闁绘劦鍓氶悵鏃傜磼閻愵剙鍔ゆ繛纭风節瀵鍩勯崘銊х獮闁诲函缍嗘禍鐐寸閸洘鈷戦柛婵嗗閸庡繒绱掓径濠勭Ш鐎殿喖顭烽弫鎾绘偐閼碱剙锟界偤姊洪棃娑辨Ф闁稿氦娅曠粋鎺楁嚃閳哄啰锛滈梺缁樺姦閸撴瑩宕濋妶鍡愪簻妞ゆ挾濮撮崢瀵革拷娈垮枛椤攱淇婇幖浣哥厸闁稿本鐭花浠嬫⒒娴ｄ警鐒鹃柡鍫墰缁瑩骞嬮敂缁樻櫆闂佽法鍣﹂幏锟�
			if(modeltype==QCmodelType.TEAM_FIGHT){
				//缂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻鐔兼⒒鐎靛壊妲紒鐐劤缂嶅﹪寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閹冣挃闁硅櫕鎹囬垾鏃堝礃椤忓孩瀚归柨婵嗙凹缁ㄥジ鏌熼惂鍝ョМ闁哄矉缍侀、姗�鎮欓幖顓燁棧闂傚倸娲らˇ鐢稿蓟閵娿儮鏀介柛鈩兩戦幃娆撴⒑濮瑰洤濡介柛銊ユ健瀵鎮㈡搴㈡疂闂佸搫顦扮�笛傜昂濠碉紕鍋戦崐銈夊磻閸涱垱宕查柛顐犲劘閿熸垝绀侀～婊堟晸娴犲绠栭柕蹇嬪�曟导鐘绘煕閺囥劌浜濇い鎾炽偢濮婂宕掑▎鎴М闂佺顕滅换婵嬪Υ閸愨晝绡�闁告劦浜跺ú鎼佹⒑閸撴彃浜濇繛鍙夌墵閹锋垿鎮㈤崗鑲╁帾婵犵數鍋熼崑鎾斥枍閸涘瓨鐓曟俊銈勭閳绘洟鏌″畝瀣М妤犵偛娲、娑㈡晲閸涱喚鏉洪梻鍌欑缂嶅﹪藟閹捐钃熷鑸靛姇妗呴梺鍦濠㈡绮婚幎鑺ョ厵閻庣數顭堟牎闂佺粯鎼徊鐐┍婵犲洦鍊锋い蹇撳閹风兘寮介锝嗘闂佸湱鍎ゅΛ鎴﹀箯瀹勯偊娼╅柣鎾抽缁秹鎮楃憴鍕闁告梹鐟ラ悾閿嬬附缁嬪灝宓嗛梺缁樻煥閹碱偊鐛Δ鍛拻濞达絽鎽滅粔娲煕鐎ｎ亷韬�规洘绮岄埥澶娾枎閹搭厽绁繝鐢靛仦閸ㄥ爼鎮疯缁粯銈ｉ崘鈺冨幈濠电偞鍨靛畷顒勫几閻旇櫣纾奸柨鐔剁矙瀹曞ジ濮�閵忣澁绱查梺鍝勵槸閻楀嫰宕濈仦鐭綊顢氶敓浠嬪蓟閻旂⒈鏁婇悷娆忓閻濇岸鎮楃憴鍕闁挎洏鍨介獮濠囨偐濞茬粯鏅為梺鍦焾鐎涒晠鍩㈤弴鐔虹瘈缁炬澘顦辩壕鍧楁煕鐎ｎ偄鐏寸�规洘鍔欐俊鍫曞幢濞嗘ɑ閿ゆ繝鐢靛Т閿曘倝鎮ч崱娑欏仾妞ゆ洩鎷烽柟顔筋殔閳藉鈻嶉鈥充汗闁瑰箍鍨藉畷鍗炩槈濞嗘垵骞堟俊鐐�栭崝褏寰婇崜褏鐭嗛柨鐔剁矙濮婅櫣绱掑Ο鍝勵潓闂佹寧娲︽禍顏勵嚕鐠囧樊鍚嬮柛鈩兠～锟犳⒑閻熸澘妲婚柤娲诲灦瀹曘垽鍨鹃幇浣瑰瘜闂侀潧鐗嗗Λ妤佹叏閸ヮ剚鐓曟慨姗嗗墻閸庢垿鏌熼獮鍨仼闁宠鍨垮畷鐓庘攽閸モ晪鎷烽崘娴嬫斀妞ゆ梻鐡斿▓鏃堟煟濡わ拷閿曪箓鏁撻懞銉ㄥ缂傚秴锕璇测槈閵忕姷鐤�濡炪倖鐗楀銊バ掗姀鈥茬箚闁靛牆娲ゅ瓭濠电偛妯婇崢濂革綖韫囨稒鎯為悷娆忓閻濅即姊洪悙钘夊姤婵炲懏娲熼幃姗�宕奸妷锔规嫼缂備礁顑呯亸鍛村绩婵犳碍鐓欐い鏃傚帶閿熻棄娼℃俊瀛樻媴閸撳弶鍍甸梺鑲╊焾閻忔艾鈻嶅鍕瘈闁靛骏绲剧涵楣冩煥閺囨ê锟芥繈骞冨Δ鍜佹晣闁绘垵妫欑�靛矂姊洪棃娑氬婵☆偅顨嗛幈銊╁磼閻愬鍘遍梺闈涱焾閸斿矂宕ラ崷顓犵＜妞ゆ洖妫涚粔顕�鏌熼鐣屾噰闁诡喗绮岃灒闂佸灝顑呴褰掓⒑閼姐倕鏋戠紒顔煎閺呰泛螖閸愨晜娈伴梺鍦劋閹搁箖銆呴幓鎹楀綊鎮℃惔锝嗘喖闂佺粯鎸诲ú妯荤┍婵犲浂鏁嶆繝闈涙閹偤姊哄ú璇插箺閻㈩垳鍋ら弫鎾绘嚍閵夘喖鏅遍梺鍝ュУ椤ㄥ﹪鐛幇鏉跨闁芥ê顦遍悾鍝勨攽閳藉棗鐏犻柛姘儑閿熻姤纰嶅畝鎼佸蓟閵堝洤鏋堥柛妤冨仜椤偅淇婇妶鍡橆棃婵﹦绮幏鍛驳鐎ｎ亝鐣伴梻浣告憸婵數鏁垾宕囨殾婵犲﹤鍟犻弨浠嬫倵閿濆簼绨介柣锝夌畺濮婃椽宕崟顐ｆ闂佺粯顨呴敃顏勵嚕閺屻儺鏁嗛柛鏇ㄥ墰閸橀箖姊洪崨濠冨鞍鐟滄澘鍟弲鍫曨敋閿熶粙寮婚妸鈺傚亜閻犲洦鐣幘缁樼厽婵°倓鑳堕惌鎺擃殽閻愭潙鐏村┑顕嗘嫹闂佺粯锕╅崑鍛达綖瀹ュ鈷戦梻鍫熺〒缁犲啿鈹戦悜鍥ㄥ闂備礁鎽滈崑鐘测枖濞戔懇锟芥棃宕橀鍢壯囨煕閳╁喚娈橀柣鐔稿姉缁辨挻绗熸繝鍐伓濠电偞鎸婚悢顒勫箯闁垮浜滈柕蹇婂墲椤ュ牓鏌℃担瑙勫磳闁轰焦鎹囬弫鎾绘晸閿燂拷
				if(host_Team == null){
					continue;
				}
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮村杈┬㈤梻浣规偠閸庢椽宕滈敃鍌氭瀬闁告劦鍠楅悡銉╂煛閸ユ湹绨奸悗姘秺濮婂搫效閸パ嶆嫹濡ゅ懎纾婚柟鎹愬煐瀹曞弶绻涢幋娆忕仼缂佺媴缍侀弻锝夊箛閵婏附鐝曢梺鎸庣☉閻楀棝鍩為幋锔藉�烽柛娆忣槴閺嬫瑦绻涚�涙鐭嬬紒璇茬墕椤曪綁骞撻幒鍡樻杸闁诲函缍嗛崑鍡涘储闁秵鐓熼煫鍥ㄦ礀娴犙囨煕鐎ｎ偅宕岄柟顖氬暣楠炲鎮欓鍐泿闂備礁鎼崐鍦拷绗涘洤鍚归柛銉ｅ妽閸欏繐鈹戦悩鎻掓殲闁靛洦绻冩穱濠囶敃閵忕姵娈梺瀹犳椤︻垶锝炲┑瀣垫晢濠㈣泛顑嗛惁鎺撶節绾板纾块柛瀣灴瀹曟劘顦撮柨鐔剁矙濞佳囨儗閸屾氨鏆﹂柣鐔稿閺嗭箓鏌涢妷鎴濆暟娴滄澘鈹戦悩鍨毄濠殿喚鏁婚幊婵嬪礈瑜忛惌鍡涙煕閹板吀鎮嶉柟椋庡厴閹兘寮跺▎鐐棏闂備礁鎽滄慨闈涚暆缁嬭法鏆︽い鎺戝閸嬨劑鏌涘☉妯戝牓骞忓ú顏呪拺缂佸娉曠粻浼存煕濮橆剦鍎旂�规洘鍔欓獮鍥敇閻樻鍟庡┑鐐舵彧缁蹭粙宕捄顭掓嫹濮樼厧寮�规洩缍�缁犳稑鈽夊▎鎴濆箞婵＄偑鍊栭崝褏寰婇幐搴濈箚闁搞儺鍓氶悡娑㈡煥閻斿墎鐭欓柟宕囧仱婵＄兘鏁愰崟顓犳晨闂傚倷绀侀幖顐﹀疮椤愶箑纾归柣鐔稿閺嬪秹鏌￠崶銉ョ仾闁绘挾鍠愰妵鍕箻鐠虹儤鐎荤紓浣诡殕瀹�鎼佸蓟閻斿摜鐟归柛顭戝枛椤绱撴担铏瑰笡缂佽鐗嗛悾鐑藉箳濡わ拷鍥撮梺鎼炲劀閸曨偓鎷烽鐐粹拺閻犲洤寮堕崬澶嬨亜椤愩埄妲搁悡銈嗘叏濡ゅ瀚归梺杞扮閸熷瓨鎱ㄩ敓浠嬫煏閸繂鏋﹂柟鐑芥敱缁楃喖鏁撻挊澶樺殨妞ゆ洩鎷风�规洜鍘ч埞鎴﹀醇椤愶及褍鈹戦敍鍕杭闁稿﹥鐗滈弫顕�骞掑Δ锟界壕褰掓煟閹达絽袚闁绘帟濮ら妵鍕冀椤愵澀娌梺鎶芥敱鐢繝寮诲☉姘勃闁告挆鍕珮婵＄偑鍊х拋锝囩不閹捐钃熼柣鏂挎惈閺嬪牓鏌涘Δ鍐ㄤ粧缂併劌顭烽弻褔鎳￠妶鍛勃缂備胶绮换鍫澪涢崘銊㈡婵炲棗绻掗悰鈺備繆閻愵亜锟芥劙寮插鍫熷亗闁跨喓濮撮拑鐔哥箾閹存瑥鐒洪柡浣稿暣閺屻劌鈹戦崱姗嗘￥濡炪倧瀵岄崣鍐箖濡ゅ啯鍠嗛柛鏇ㄥ墮閻喚绱撴担钘夌厫鐎癸拷閹间胶宓侀柛鎰╁壆閺冨牆宸濇い鏃囧Г閻濇娊姊虹涵鍛汗閻炴稏鍎靛畷婊冣攽鐎ｎ偄锟藉爼鏌涢鐘茬伄缁炬崘妫勯湁闁挎繂鎳忛幆鍫ュ冀閿涘嫮纾藉ù锝呭閸庢劙鎮介妤�澧插ǎ鍥э躬閹晫绮欑捄顭戞Ч婵＄偑鍊栭悧妤�顫濋妸鈺婃晩濠电姴娲﹂崐鍨殽閻愯尙浠㈤柛鏃�纰嶇换娑㈠级閹存繐鎷风粙鍨カ婵＄偑鍊栧ú鈺呭箯闁垮鍙忓┑鐘插暞閵囨繄锟借娲﹂崑濠傜暦閻斿吋顥堟繛鎴灻灇闂傚倸鍊烽懗鍫曞箠閹捐鍚归柡宥庡幖缁狀垶鏌ㄩ悤鍌涘
				if(host_Team.getTeamLeaderId()!=role.getRoleID()){
					continue;
				}
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮村杈┬㈤梻浣规偠閸庢椽宕滈敃鍌氭瀬闁告劦鍠楅悡銉╂煛閸ユ湹绨奸悗姘秺濮婂搫效閸パ嶆嫹濡ゅ懎纾婚柟鎹愬煐瀹曞弶绻濋棃娑欏窛缂佲槄鎷烽梻浣侯焾閺堫剛鍒掑畝鍔肩兘鏁撴禒瀣拻濞达絼璀﹂悞鐐亜閹寸偛鐏╅柟骞垮灩閳规垹锟斤綆浜ｉ幗鏇㈡倵楠炲灝鍔氭い锔诲灡鐎靛ジ鎮╃紒妯煎幈闂佸搫娲㈤崝灞炬櫠椤旂晫绠鹃柛婊冨暟缁夘喗鎱ㄦ繝鍌ょ吋鐎规洘甯掗～婵嬵敄鐠恒劍鏅奸梻鍌欑劍閹爼宕濆畝鍕亯闁绘挸瀵掗崵鏇炩攽閻樺磭顣查柡鍛絻椤法鎹勯悮鏉戝濡炪倖鎸诲钘夘潖濞差亜绠伴幖杈剧悼閻ｇ敻姊洪悷鏉跨骇闁烩晩鍨堕悰顔嘉熼崨闈涢叄椤㈡牜鎹勯妸褎鏅ㄩ梻鍌氬�风欢姘焽瑜旇棟濞寸姴顑呴崹鍌炲级閸碍娅旈柟宄板槻椤繈鎮欓锟介锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧湱锟界懓瀚崳纾嬨亹閹烘垹鍊為悷婊冪箻瀵娊鏁冮崒娑氬幗闂侀潧绻堥崺鍕倿閸撗呯＜闁归偊鍙庡▓婊堟煛瀹�锟介崰鏍蓟閸ヮ剚鏅濋柨鐔剁矙瀹曟繈骞掗幘鍓侇啎閻庣懓澹婇崰鏇犺姳閼姐倗纾奸柣娆忔噽缁夘噣鏌″畝瀣埌閾伙綁鏌涜箛鎾虫倯婵絽瀚板铏圭磼濡櫣鐟ㄩ梺鍛婅壘椤戝洭骞戦姀鐘闁靛繒濮烽鎺楁煟鎼达絾鏆╂い顓炵墦瀵娊鏁撻悩鏂ユ嫼闂侀潻瀵岄崢濂稿储鐎涙ǜ浜滈柕澶涢檮瀹曞矂鏌℃担瑙勫磳鐎规洘鍔欓幃銈嗘媴閸︻厾啸濠电姷鏁搁崑娑橆嚕閸撲焦宕查柛顐犲劜閺呮煡鏌ｉ幇顓熺稇缂佸墎鍋熼敓鐣屾閹风兘鏌ㄩ悢鍓佺煓闁诡垰鏈鍕箛椤撶姴骞嶉梻浣虹帛閸ㄦ儼鎽銈冨劜閻楃娀寮婚悢鍓叉Ч閹肩补锟藉啿绠ｉ梻浣芥〃閻掞箓宕濋弽顓炵畾闁哄倸绨遍弨浠嬫煕椤愶絿绠撴慨锝呯墕閳规垿鏁嶉崟顐℃澀闂佺锕ラ崹鍨暦閺囥垺鍤戞い鎺嶇鎼村﹪姊虹粙璺ㄧ伇闁稿鍔欓弫鎾绘嚍閵夛富妫冮悗瑙勬礃閿曘垽銆佸▎鎾冲簥濠㈣鍨板ú锕傛偂閺囥垺鐓冮柍杞扮楠炴ɑ銇勮箛鎾跺婵懓寮舵穱濠囧Χ閸涱喖娅ら梺鎶芥敱閸ㄥ湱妲愰幒鏃撴嫹閿濆骸浜介柛搴涘劦閺屾稒鎯旈姀鐘典紝闂佸搫鏈惄顖炲箖閳哄懏鎯炴い鎰╁灪濞堫偊姊绘担鍛婂暈閻㈩垱顨堥弫顕�鍨鹃幇浣告濡炪倖娲╅幏鐑芥煛娴ｈ宕岄柟顔藉劤閻ｆ繈鏁撻悾灞绢潟闁挎洩鎷烽棁澶愭煟濡儤鈻曢柛搴＄箳閿熺晫鎳撻幉锛勬崲閸岀偛鐓橀柟杈鹃檮閸嬫劙鏌熺紒妯轰刊濞寸姷鍘ц灃闁绘﹢娼ф禒婊堟煟濡や焦灏い顐㈢箳缁辨帒螣鐠囧樊锟芥挾绱撴担鍦槈妞ゆ垵妫涚槐鐐哄醇閵夛腹鎷虹紓浣割儏濞硷繝顢撳Δ鍐／缂備降鍨归獮妤冪磼閺冨倸鏋涚�殿喗鎸虫慨锟介柍鍝勫�瑰▍宥夋⒒娴ｅ搫浠洪柛搴㈠▕椤㈡寮婚妷銉ь唵婵＄偛顑呴崙浠嬪箯瀹勬壋妲堟繛鍡橆焽閸旈绱撴担鍙夘潐闁归鍏樺缁樻媴閸︻厽鑿囬梺鎼炲姀濡嫰鈥﹂崶顏嶆Ъ缂備礁鍊圭敮鎺椻�﹂妸鈺侀唶闁绘柨鎼獮妤佺節瀵伴攱婢橀敓绐栧洤绠柣鎴ｅГ閻撱儵鏌￠崶銉ュ缂併劌顭烽弻锝夋晲閸ャ劎鍔归梺闈涙处閸旀瑩鐛幒妤�绠ｆ繝闈涚墳閹风兘顢橀悜鍡樺瘜闂侀潧鐗嗗Λ娆戠矆閿熶粙姊洪悷鏉挎毐缂佺粯甯炲Σ鎰版倷鐎涙ê鍔呴梺闈涚箞閸ㄥ鎯侀崼銉︹拻闁稿本姘ㄦ晶娑氱磼鐎ｎ偄鐏撮柡浣规崌閹崇偤濡烽敃锟介敓鑺ュ姈椤ㄣ儵鎮欏顔解枅闂佽桨鐒﹂幑鍥箖閳哄懏鍤戞い鎺戯功楠炪垽姊婚崒娆戭槮闁规祴锟借秮娲晝閸屾艾鐎梻渚囧墮缁夌敻宕戦崒鐐寸厸闁搞儯鍎遍悘顏堟煟閹惧鎳囬柡宀�鍠撻幉鎾礋椤愩埄娼撻梻浣芥鐎氼剟濡堕幖浣歌摕婵炴垶绮庨悿锟介梺瑙勫劤閻°劑骞忛柆宥嗏拺闂傚牊绋掗幖鎰版倵濮橆偄宓嗙�殿噮鍋婂畷鎺戭煥閸曨偆褰撮梻浣藉亹閳峰牓宕楀☉姗嗘禆闁规儳顕弧锟藉┑鐐茬墕閻忔繈寮稿☉銏＄叆闁哄洦锚閸旀碍銇勯鍕殻闁圭锕ュ鍕沪閻愵剦鍟庡┑锛勫亼閸婃牠宕濊缁骞嬮悩鐢电劶闁诲函缍嗛崑浣圭濠婂牊鐓欏ù鐓庣摠濞懷兠瑰鍕垫畼缂佽鲸甯楀蹇涘Ω瑜忛悿鍕攽椤旂》鍔熺紒顕呭灦楠炲繘宕ㄩ娑樻瀭闂佸憡娲﹂崑鍌炲传濡ゅ懏鈷掑ù锝呮啞閸熺偤鏌＄仦璇插妞ゃ垺鐗楀鍕節閸曨剚顔曢梻浣芥硶閸犳挻鎱ㄧ�靛摜涓嶆い鏇嫹闁哄矉缍侀弫鎰板川閺夋浼冪紓鍌欐缁躲倗绮婚幘鎰佹綎闁惧繒鎳撶�垫煡鏌￠崶鈺佷粶闁冲嘲顦—鍐Χ鎼粹�崇濠电偛妯婇崣鍐嵁閸愵喗鍋い鏍煎Ч妤呮⒑閸︻厼鍔嬮柟鎼佺畺瀹曪綁宕卞☉娆屾嫼缂傚倷鐒﹁摫闁抽攱甯炵槐鎺楊敋閸涱厾浠搁柦妯煎枎椤法鎹勬笟顖氬壄婵炲瓨绮嶇划鎾诲蓟閿熺姴鐐婇柡鍫㈡暩閺佹牜绱撴担鍓插剰妞ゎ厾鍏橀獮鍐ㄎ旈崨顕呮濠电偞鍨堕悧鏇熺椤斿槈鏃堟偐闂堟稐娌梺缁橆殘婵烇拷闁靛棔绀侀～婊堟晸娴犲绠栭柕蹇嬪�曞婵嗏攽閻樻彃顏╃�点倕鎼埞鎴︽偐閸偅姣勬繝娈垮枤閸忔ê顕ｉ锕�宸濆┑鐘插椤旀洟姊虹捄銊ユ灆濠殿喓鍊楅幑銏犫槈濞嗘劕顎撻梺鍛婂姈瑜板啴骞冮埡鍌滅闁瑰鍊戝璺哄嚑閹兼番鍔嶉悡娆撴煕椤垵鏋涢柡鍡欏仱閺岋繝宕ㄩ鍛彋濠殿喖锕ュ浠嬬嵁閺嶎厽鍊烽柟缁樺笒鑲栭梻鍌欑閹诧繝骞愮拠鑼殕缂佸娉曢弳锕傛煙閹殿喖顣奸柛瀣ㄥ姂閺屾稑鈽夊鍫濅紣婵炲濯崢濂稿煘閹达附鍊烽柛娆忣樈濡偟绱撴担铏瑰笡闁告梹鐟╅妴渚�寮崼顐ｆ櫇闂佹寧姊婚弲顐﹀储閻㈠憡鈷戦柤鎭掑剭椤忓煻鍥敍閻愬弶杈堝┑鐐叉閸旀垶绂嶅鍕╀簻闊洦鎸搁鈺呮煛閸☆厾鎮奸柨鐔诲Г椤旀牠宕伴弽顓熷亯濠靛倸鎽滃畵渚�鎮楅敐搴℃灍闁稿﹦鍏橀弻娑樷枎韫囷絾效闂佷紮绲介妶绋款潖婵犳艾纾兼繛鍡樺焾濡差噣姊洪崷顓涙嫛闁稿锕悰顔界節閸パ咁啋闂佸搫鍊堕崕鏌ユ倶閸愩劉鏀介柣鎰綑閻忕喖鏌涢埡浣割伃鐎殿噮鍋婂畷鍫曨敆娴ｅ搫骞堥梻濠庡亜濞诧箑煤閺嶎偅鏆滈柛鎾茶兌绾惧ジ鏌涢幘鑼槮濞寸姵绮撻弻宥囨喆閸曨偆浼岄梺璇″枓閺呯娀鐛幘璇茬闁圭偓鎯岄崬鑼磽閸屾艾锟藉嘲顪冮幒鏃傜焼濞撴熬鎷烽柟顔哄劦閹剝鎯旈鐣岀▉缂傚倸鍊烽悞锕傗�﹂崶顒佸仭鐟滅増甯楅悡銉╂煟閺冨倻甯涙い銉ヮ槹閵囧嫰顢橀悙瀵糕敍濡炪倧绠戦悥濂稿蓟濞戙垺鏅查柛娑卞灣妤旀繝娈垮枛閿曘儱顪冮挊澶屾殾闁靛濡囩弧锟介梺鍛婂姦閻撳牆危闁秵鈷掑ù锝呮啞閸熺偞銇勯鐐靛閾荤偤鏌涢弴銊ョ仩闁绘挻绻堥弻鐔煎箲閹伴潧娈紓浣哄Х閹虫捇婀侀梺鎸庣箓閹冲海鏁妸鈺傜厵鐎瑰嫰鍋婇悡鍏兼叏婵犲懏顏犵紒顔界懇楠炴劖鎯旈姀鈥愁伆闂傚倷鑳堕崢褏绱炴繝鍕笉闁哄稁鍘奸弸渚�鏌熼崜褏甯涢柛銈呯Ч閺屾洘寰勫☉姘辨殸闂佽法鍠曟慨銈夊礉濡ゅ懏鏅搁柛濠勫櫏濞兼劖绻涚拠褏鐣电�规洝顫夊蹇涘煛鐎ｎ偄顏堕梻鍌氱墛缁嬪繘宕戦姀顫嫹濞堝灝鏋涢柣鏍с偢閻涱喚锟斤綆鍠楅崑鎰版⒒閸喓銆掗柛濠勫仱濮婄粯鎷呯粵瀣婵°倗濮撮幗婊呭垝鐠囧樊鍚嬪璺猴功閿涚喖姊洪崨濠庢畼濞村吋绻傜叅妞ゅ繐鎳忓▍鍥⒑缁嬭法鐒垮┑鈥虫川缁瑨绠涘☉娆屾嫼闂佸憡绻傜�氼參宕掗妸鈺傜厱闁靛闄勯妵婵嬫煙椤曞棛绡�濠碉紕鍏橀崺锟犲磼濠婂啫绠洪梻鍌欑閹碱偄煤閵娾晛纾绘繛鎴欏灪閺呮悂鏌﹀Ο渚Ч閻犳劧绻濋弻銊╂偄鐠囨畫鎾绘煟閺冩垵澧存鐐茬箻閺佹捇鏁撻敓锟�
				Team selfTeam = TeamManager.selectTeamByRoleId(hostid);
				if(selfTeam!=null){
					if(host_Team.getTeamId()==selfTeam.getTeamId()){
						continue;
					}
				}
				if(fire.pb.buff.Module.existState(role.getRoleID(), fire.pb.buff.BuffConstant.StateType.STATE_BATTLE_FIGHTER)){			
					continue;
				}
				rolelistid.add(role.getRoleID());
				num++;
			}else if(modeltype==QCmodelType.WATCH_FIGHT){
				watchFightView(role,watchfight);
				num=watchfight.size();
			}else if(modeltype==QCmodelType.ONE_FIGHT){
				//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簼閹癸綁鏌ｉ鐐搭棞闁靛棙甯掗～婵嬫倷椤掞拷椤忚埖淇婇妶鍥ラ柛瀣洴钘濋柣銏㈩焾閺嬩線鏌熼崜褏甯涢柛瀣姈閵囧嫰寮撮悙鎼！闁诲孩鑹剧紞濠囧蓟濞戙垹绠涢梻鍫熺♁閻忓牆螖閻橀潧浜奸柛銊у劋缁岃鲸绻濋崶銊ワ拷鐑芥倵濞戞瑯鐒芥い锔哄妼閳规垿鏁嶉崟顐＄钵缂備緡鍠楅悷鈺呭箖娴兼惌鏁婇柟鎯ф噺鐎氬綊鏌ㄥ┑鍡欏嚬闁规煡绠栭弻锝夊棘閹稿寒妫￠梺闈涙搐鐎氫即鐛�ｎ噮鏁囬柣鎰▕濞煎姊虹拠鎻掝劉闁告垵缍婂畷婊冣槈濡攱鐎婚梺闈涚箞閸婃牠宕愰悜鑺ョ厽闁瑰鍎愰悞浠嬫煕濡吋鏆慨濠勭帛缁楃喖宕惰娴煎海绱撴担鍝勑ｉ柛銊ユ健閹即顢欓崲澶嬫⒐閹峰懘鎼圭拠鈥虫櫗闂傚倷绀侀幉鈩冪瑹濡ゅ懎绐楁慨姗嗗幗濞呯娀鏌ｉ姀鐘冲暈闁绘挻鐟﹂妵鍕籍閸屾粍鎲樺┑鐐茬墛缁捇寮婚悢纰辨晬婵﹩鍓ㄩ幏鐑藉垂椤旂偓娈鹃梺闈涱煭婵″洨寮ч敓浠嬫⒑缁嬭儻顫﹂柛濠冩尵濡叉劙鏁冮崒娑掓嫽闂佺鏈懝楣冩晸娴犲妫戠紒顔肩墛缁楃喖鏁撴禒瀣祦濠㈣埖鍔栭弲鎼佹煟濡灝鐨烘い锔诲櫍濮婃椽骞愭惔鈶╂嫽闂佸搫鎷嬮崑濠囧Υ閸涙潙钃熼柕澶涘閸樹粙姊鸿ぐ鎺戜喊闁哥姵鐗犲畷婵堬拷锝庡枟閻撴洟鎮楅敍鍗炲閻濇岸姊洪崫鍕拱缂佸鍨块崺鐐哄箣閿曪拷楠炪垺淇婇妶鍜冩婵″弶鍔欏缁樻媴閸濆嫮娈ら梺鐟板槻閸㈡煡婀侀梺缁樏Ο濠囧磿閹扮増鐓熼柟鎹愭硾閺嬫垵菐閸パ嶈含妞ゃ垺绋戦…銊╁礃閵娿儺鐎遍梻鍌欑绾绢厾鍒掗姣椽鎮㈤悡搴ゆ憰闂佹寧绻傞ˇ顖滅不閾忣偂绻嗛柕鍫濇噹閺嗙喖鏌￠崱鈺佷喊婵﹥妞藉畷顐﹀礋椤掍焦瀚崇紓鍌欑椤戝棛鏁悙鍝勭闁靛繒濮弨浠嬫倵閿濆簼绨芥い锔哄姂濮婅櫣绱掑Ο鍝勑曢梺鍛婃尰閻╊垰顕ｉ幎绛嬫晣闁靛繆妾ч幏缁樼箾鏉堝墽鍒伴柟璇х節瀹曨垶鎮欓悜妯轰缓濡炪倖鐗楁笟妤�鈻撳锟介弻鈩冪瑹閸パ勭彎濡ょ姷鍋炵敮鎺曠亙婵犵數濮撮崯顖氣枍瀹ュ鈷掑ù锝勮閻掑墽绱掔紒妯烘诞鐎规洏鍨奸ˇ瀛樼箾閸℃劕鐏查柟顔界懇閹粌螣閻氬瓨瀚归柣銏犳啞閻撱儲绻涢幋鐏活亪鎳滆ぐ鎺撳�垫慨妯煎帶婢ф挳鏌熼娆愮グ妞わ箒顫夐幈銊︾節閸屻倗鍚嬮悗瑙勬礃鐢帡鍩㈡惔銊ョ闁瑰瓨绻傞懙鎰磽閸屾艾锟介娆㈤敓鐘查棷妞ゆ洩鎷风�规洖缍婇獮蹇撶暆閿熻姤绂嶉柆宥嗏拻濞达絽鎲￠崯鐐烘煕閺冩挾鐣电�规洑鍗冲浠嬵敃閵堝浄绱查梻浣稿暱閹碱偊骞婃惔锝囨／鐟滄棃寮诲☉銏╂晝闁挎繂娴傞弳鈥斥攽閻愬弶鍣烘俊顐㈠暣瀵鎮㈡搴㈡疂闂佸搫顦扮�笛傜昂濠碉紕鍋戦崐銈夊磻閸涱垱宕查柛顐犲劘閿熸垝绀侀～婊堟晸娴犲绠栭柍鍝勬噹缁犵敻鏌熼悜妯荤叆闁硅棄顑夊濠氬磼濮橆剨鎷锋搴ｇ焼濞撴熬鎷锋鐐寸墵椤㈡洟鏁冮敓鐣岋拷姘槹閵囧嫰骞掗幋婵愪痪闂佺楠哥�涒晠濡甸崟顖氬唨妞ゆ劦婢�缁爼姊洪崫鍕靛剮缂佽埖宀稿璇测槈濡吋娈曢梺璺ㄥ枍缁瑥鐣烽幋婵冩婵炲棗娴氶崵銈夋⒑缂佹﹩鐒界紒顕呭灦閹繝寮撮姀锛勫幐闂佹悶鍎崕杈ㄤ繆閻撳篃鐟邦煥閿熺晫鍒掑▎鎾宠摕闁挎繂妫欓崕鐔兼煏韫囧鎷烽崘鍙夋暘濠电姵顔栭崰鏍晝閿旀儳鍨濇い鏍仜缁狀垶鏌涘☉鍗炵仯闁活厽鐟︾换娑㈠幢濞嗗繋澹曞銈冨劜閸ㄥ灝顫忕紒妯诲闁惧繒鎳撶粭锟犳⒑閻熺増鍟為柟顔煎�块獮鍐樄妤犵偞锚閻ｇ兘宕堕妸锔诲晭濠电姷鏁告慨鎾晝閵堝鍋嬪┑鐘叉搐绾惧鏌涢弴銊ヤ簮闁猴拷娴犲鐓曢悘鐐村劤閸ゎ剚淇婇幓鎺撳暈缂佺粯鐩畷鐓庘槈濡警鐎虫俊鐐�ゆ禍婊堝疮鐎涙ü绻嗛柛顐ｆ礀楠炪垺淇婇妶鍛櫣婵炲牊绻堝缁樻媴閸濄儳楔濡炪們鍎查幑鍥х暦濡わ拷椤粓鏁撴禒瀣祦婵°倕鎳庨柋鍥煛閸モ晛浠滈柛鐐妼椤啴濡堕崱妯烘殫闂佸摜濮甸幑鍥х暦閵忋倖鐒肩�广儱妫岄幏铏圭磼缂併垹骞栭柟鍐查叄閹偞绂掔�ｎ偆鍘遍梺鍝勫�藉▔鏇炵摥闂備礁鐤囬褏绮旈悷鎵殾闁割偅娲﹂弫鍡椕归敐鍛儓妤犵偞鍔欏缁樻媴閾忓箍锟藉﹪鏌涢幘瀵哥疄闁诡喚鍏樻俊鐑藉煛娴ｅ搫骞掗梻浣稿閸嬪棝宕伴幇鏉跨煑闊洦鎸撮弨浠嬫煟濡搫绾ч柛锝囧劋閵囧嫯绠涢弴鐐愩儳绱掓潏銊ョ瑲婵炵厧绻樻俊鎼佸Ψ瑜忛幊鍡涙⒑閸欍儳涓茬紒韫矙婵℃挳骞掗幋顓熷兊闂佺粯鎸稿ù閿嬬椤撶儐娓婚柕鍫濆暙閸旂數绱掔紒妯肩畵妞ゎ偄绻掔槐鎺懳熺拠宸拷鎾绘⒑閸涘﹦鈽夐柨鏇樺劦瀹曟洟骞樼紒妯锋嫼闂佽崵鍠愬姗�寮虫潏鈺冪＜缂備焦锕懓鎸庮殽閻愬弶顥㈢�规洜鍠栭、娑㈡晲閸℃ɑ鐝梻鍌欒兌缁垶宕濋敂鐣岊洸闁绘垼妫勭粻顖炴⒑閸噮鍎愬┑顖氼嚟缁辨帡顢涘☉娆戭槰闂佽楠搁…宄邦潖閾忚鍠嗛柛鏇ㄥ亜婵垽姊虹�癸附婢樻俊濂告煃鐠囪尙效濠殿噯鎷烽梺闈涚墕濡矂骞忓ú顏呯厽闁绘ê鍘栭懜顏堟煕閺傝儻瀚伴柍璇茬Ч楠炲洭鎮ч崼銏犲箥闂備礁鎲￠崹顖炲磹閺嶎偓鎷峰鐐
				if(host_Team != null){
					continue;
				}
				if(fire.pb.buff.Module.existState(role.getRoleID(), fire.pb.buff.BuffConstant.StateType.STATE_BATTLE_FIGHTER)){			
					continue;
				}
				rolelistid.add(role.getRoleID());
				num++;
			}
			if(num>=MAX_NUM){
				break;
			}
		}	
		SceneClient.pSend(new MCheckCanPlayPKView(hostid, modeltype, school, levelindex, rolelistid, watchfight));
	}
	
	/**
	 * 濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮婚悢鍏尖拻閻庨潧澹婂Σ顔剧磼閻愵剙鍔ゆ繛纭风節瀵鎮㈤悮瀛樺闁汇垺顔栭悞楣冨疮閸濄儳纾藉〒姘攻鐎氳绻濋悽闈浶㈡繛璇х畵閹繝濡烽埡鍌滃幗闂佸搫鍟ù鍌炲吹濞嗘垶鍋栨慨妯垮煐閳锋垿姊婚崼鐔衡檨闁瑰吋鍔欓幃妤�顫濋鐔哄嚒濡炪倖娲╃紞渚�鐛锟介、娆撴偂鎼淬倧鎷烽崹顔规斀閹烘娊宕愯楠炲繘鏌ㄧ�ｃ劋绨婚棅顐㈡祫缁插ジ鏌囬鐐寸厸閻忕偛澧介埥澶愭煃鐠囧弶鍞夌紒鐘崇洴瀵挳鎮敓浠嬪疮鐎ｎ喗鈷掑ù锝呮啞閹牓鏌ｉ鐑嗘Ш缂佽京鍋炵粭鐔兼晸娴犲鍋樻い鏇嫹鐎规洖鐖奸、妤佸緞鐎ｎ偅鐝滈梻鍌欒兌椤牓寮甸鍕仭鐟滃酣濡靛▎鎾崇闁兼亽鍎幏缁樼箾鏉堝墽鍒伴柟璇х節楠炲绮欐惔鎾存杸濡炪倖妫佹慨銈囩礊閹达附鎳氶柣鎰嚟缁★拷闂傚倸鐗婃笟妤呭磿韫囨稒鐓㈤柛鎰典簻閺嬫垹绱掔紒妯兼创妤犵偛顑夐幃娆撴偨闂堟稑缍嗗┑鐘垫暩閸嬫盯鎯岄崼鐔侯洸妞ゅ繐鐗嗛拑鐔哥箾閹存瑥鐏╃紒鐘电帛娣囧﹪濡堕崪浣稿壉闁诲孩姘ㄩ幊鎾诲煘閹达箑鐒洪柛鎰╁妿缁佺兘姊虹紒姗嗘畷闁瑰憡鎮傞敐鐐剁疀濞戞瑦鍎柣鐔哥懃鐎氼剟鎮垫导瀛樷拺闁兼祴鏂侀幏锟犳煕閹惧娲存い銏＄懄瀵板嫰骞囬娑欏闂備胶绮崹鐔煎疾濠婂啠鏋嶉柟鍓х帛閻撴洟鏌曟繛鍨缁绢厾鍋撻妵鍕即椤忓棛蓱缂備胶绮换鍌烇綖濠靛鏁囬柣鏂挎憸瑜板憡绻濋悽闈浶為柛銊у帶閳绘柨鈽夊鍛�曢梻鍌欑閸熷潡骞栭锕�绠犻煫鍥ㄧ♁閸嬪倿鐓崶銊︽儎闁绘柨妫濋幃瑙勩偊閹稿寒浠╂繝鈷�鍕闁哄本鐩顕�鏁撻挊澶樼劷婵炲棙鎸荤粻鎺旂磽娴ｉ缚妾搁柛娆忓暣瀵劍娼忛埡瀣婵﹩鍓涚粔鐑樻叏婵犲偆鐓肩�规洘甯掗埢搴ㄥ箣濠靛棭鐎撮梻鍌欑劍濡炴寧绂嶅鍛濠电姴鍊婚弳锔界箾瀹割喕绨荤紒锟界�ｎ偁浜滈柡宥冨姀婢规﹢鏌ｆ惔顔煎籍婵﹤顭峰畷鎺戭潩閸楃儐鏉哥紓鍌欑椤戝懘鎮ч幘鎰佸殨缂佸顑欓崥瀣熆鐠轰警鍎戦柛娆忔閳规垿鎮╃紒妯婚敪濠碘槅鍋掗崢鐓庡祫閻熸粎澧楃敮妤呮偂濞戙垺鐓曟繛鎴濆船閺嬬喖鏌涙繝鍐ㄥ闁哄备锟藉磭鏆嗛悗锝庡墰閻﹀牓鎮楃憴鍕閻㈩垱甯熼悘鎺楁⒑缂佹澹橀柣掳鍔庨敓鑺ヨ壘缂嶅﹪寮婚垾鎰佸悑閹肩补锟芥彃顥氶梻浣烘嚀閸㈡煡宕查弻銉稏婵犻潧顑嗛崐閿嬨亜閹虹偞瀚瑰銈呴獜閹凤拷?
	 * @param role
	 * @param watchfight
	 */
	private  void watchFightView(Role role,HashMap<Long, Long> watchfight){
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮村杈┬㈤梻浣规偠閸庢椽宕滈敃鍌氭瀬闁告劦鍠楅悡銉╂煛閸ユ湹绨奸悗姘秺濮婂搫效閸パ嶆嫹濡ゅ懎纾婚柟鎹愬煐瀹曞弶绻涢幋娆忕仼缂佺媴缍侀弻锝夊箛閵婏附鐝曢梺鎸庣☉閻楀棝鍩為幋锔藉�烽柛娆忣槴閺嬫瑦绻涚�涙鐭嬬紒璇茬墕椤曪綁骞撻幒鍡樻杸闁诲函缍嗛崑鍡涘储闁秵鐓熼煫鍥ㄦ礀娴犙囨煕鐎ｎ偅宕岄柟顖氬暣楠炲鎮欓鍐泿闂備礁鎼崐鍦拷绗涘洤鍚归柛銉ｅ妽閸欏繐鈹戦悩鎻掓殲闁靛洦绻冩穱濠囶敃閵忕姵娈梺瀹犳椤︻垶锝炲┑瀣垫晢濠㈣泛顑嗛惁鎺楁⒒閸屾艾锟界兘鎳楅崼鏇炵疇闁规崘顕ч悿顕�鏌涜椤у倿宕堕渚囨濠电偞鍨靛畷顒�鈻撻妸锔剧瘈闁汇垽娼ф牎缂佺偓婢樼粔鐟邦嚕閹绘巻鏀介悗锝庡亞閸橀亶鏌ｈ箛鏇炰粶濠⒀傜矙婵℃挳骞掑Δ浣哄幈濠碘槅鍨崇划顖氱暦鐏炵偓鍙忓┑鐘叉噺椤忕娀鏌ㄩ悢缁橆棄婵狅拷鏉堛劍鍙忛柣銏㈩焾杩濋梺鍛婂姦娴滅偟澹曟總鍛婄叆闁绘棁顕ц缂備焦顨堥崰鏍极閹剧粯瀵犲鑸得▓銊╂⒑鐟欏嫬鍔跺┑顔哄�濆畷鎰版倻閼恒儳鍘介梺闈涚箞閸ㄦ椽寮抽埡鍛叆婵炴垶鐟ч惌鎺撴叏婵犲懏顏犵紒杈ㄥ笒铻ｉ煫鍥风导闁垳锟借娲﹂崹璺虹暦瑜版帩鏁婃慨姗嗗墰缁夌儤銇勯姀鈥冲摵闁轰焦鎸荤粋鎺旓拷锝庝海閹芥洟姊洪幐搴ｂ槈閻庢凹浜滈埢浠嬵敂閸喓鍘遍梺鍦亾椤ㄥ懐锟芥凹鍓熷畷褰掓焼瀹ュ棌鎷绘繛杈剧秬婵倝濡撮崘顏嗙＜闁跨喕濮ょ粭鐔兼晸閽樺鏆﹂柟鐗堟緲閸ㄥ倹銇勯弮鍌氫壕婵炲牊鍎抽—鍐Χ閸℃衼缂備胶濮甸崹鍦垝閸澁鎷烽敐搴′簴濞存粍绮撻弻鐔稿鐎涙ɑ閿繛瀛樼矌閸嬨倝寮婚妸鈺傚亜閻犲洦鐣幘缁樼厵缂佸鐏濋弳杈ㄣ亜椤愩垻绠崇紒杈ㄥ笒铻ｉ悹鍥ф▕閿熻姤鎸剧槐鎾存媴閸撴彃鍓卞銈嗗灦閻熴儴鐏嬮悗鐧告嫹闁告洦鍏橀幏铏圭磽閸屾瑧鍔嶉拑閬嶆倶韫囷絽寮柡宀嬬到铻栧ù锝囨嚀绾板秹姊烘导娆戝埌闁搞垺鐓￠垾锕傚Ω閳轰線鍞堕梺缁樻濞撳湱鑺辩拠娴嬫斀闁绘绮☉褔鏌涙繝鍐╁�愰挊婵囥亜閺嶃劌鐒归柡瀣閺屾洘绻涢崹顔煎Ф濠电偞鎸搁…鐑藉蓟閺囥垹閱囨繝闈涙祩濡偤姊绘担绋跨骇缂侇喗鎹囧濠氭偄閸撳弶效闁硅偐琛ラ敓钘夊暱缁狅綁姊绘担渚敯婵☆偄瀚伴幃銉╂偂鎼搭喖娈ㄦ繛瀵稿Т椤戞劙寮崶顒佺厽闁哄倹瀵ч幆鍫燁殽閻愯尙澧︽慨濠勭帛閹峰懏绗熼娑欐殲闂備胶纭堕弲娑樏洪鐐垫殾婵犻潧妫崥瀣煕濞戝彉绨奸柣搴㈡そ濮婃椽骞栭悙鎻掑Ф闂佸憡鎸诲畝鎼佸箖閳ユ枼妲堥柕蹇ョ磿閸橀亶姊洪弬銉︽珔闁哥喍鍗抽獮濠囧礃椤旂晫鍘撻柣鐘叉穿鐏忔瑦鏅跺☉銏＄厵濞撴艾鐏濇俊鐣岀磼缂佹绠炵�规洏鍔戦、姘跺川椤掞拷閹藉绱撻崒姘拷宄懊归崶銊ｄ粓闁告縿鍎查弳婊堟煙閻戞ɑ绀堝ù婊嗘閳规垿鎮欑�涙ê闉嶉梺鍛婂灥缂嶅﹤鐣疯ぐ鎺撶劶鐎规挶鍎遍ˇ鐢稿极閹剧粯鍋愰柡鍌樺劜鐎氳棄鈹戦悙鑸靛涧缂佽弓绮欓獮澶愭晸閻樿尙鐣鹃梺鍓插亖閸庢煡鎮″▎鎾寸厱闁归偊鍨伴惃铏圭磼閻樺樊鐓奸柡宀�鍠栭、娑橆潩椤掑绱旀俊鐐�戦崹娲儎椤栫偛绠栨繛鍡樻惄閺佸倿骞栧ǎ顒�鐏╂い蹇氬煐缁绘稒娼忛崜褎鍋х紒缁㈠幖閻栫厧顕ｉ崨濠冨劅闁靛濡囬崢鐢告⒑鐠団�崇�婚柛娑卞枟閸犳牗绻濋悽闈涗粶闁瑰啿鐭傚畷褰掓寠婢舵ɑ缍庨梺鎯х箺椤鐣锋径鎰厪濠电偛鐏濋崝婊堟煟濠靛嫬鐏叉慨濠冩そ閹兘寮堕幐搴敤闂備胶鎳撻崵鏍箯閿燂拷
		//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻鐔兼⒒鐎靛壊妲紒鐐劤椤兘寮婚敐澶婄疀妞ゆ帊鐒﹂崕鎾绘⒑閹肩偛濡奸柛濠傛健瀵鈽夐姀鈺傛櫇闂佹寧绻傚Λ娑⑺囬妷褏纾藉ù锝呮惈灏忛梺鍛婎殕婵炲﹤顕ｇ拠娴嬫婵☆垶鏀遍弬锟介梻浣告啞濞诧箓宕戦崟顒佸弿闁靛繈鍊栭埛鎴炵箾閼奸鍤欐鐐搭殜閺岀喖鎮烽悧鍫濇灎閻庢鍠栭…鐑藉春閸曨垰绀冮柕濞у懐宓侀梻浣筋嚙閸戠晫绱為崱妯碱洸闁绘劕鎼崒銊╂煙閹殿喖顣奸柍閿嬪灴閺屻倕霉鐎ｎ偅鐝斿銈忕到閵堟悂骞冨Δ鍐當婵炴垶蓱閹兼劕顩奸崨瀛樷拺闁告稑锕ユ径鍕煕閻樺啿鍝洪柟顔兼健閺佹挻绂掔�ｎ偀鎷洪柣鐔哥懃鐎氼剛绮堥崘鈺冪濠㈣泛顑囧ú鎾煏閸℃锟藉潡骞栬ぐ鎺戞嵍妞ゆ挾濯寸槐鍐测攽閻愯埖褰х紒韫矙楠炴牠顢曢敂缁樻櫅闂佽鍎虫晶搴ｅ婵傚憡鐓犵痪鏉垮船婢ь喖霉濠婂啫鈷旂紒杈ㄥ笒閻ｆ繈宕橀鍏兼嚈缂傚倷鑳剁划顖滄崲閸繄鏆﹂柛顐ｆ礃閸ゅ鏌涢…鎴濅簼闁绘繍鍋勯埞鎴︽偐閸偅姣勬繝娈垮枟閹告娊寮崘顔嘉у璺猴功閻ゅ洭鏌熼懝鐗堝涧缂佽尪娉曠划濠氬籍閸喓鍙嗛梺缁樻煥閹碱偅鐗庨梻浣瑰▕閺�閬嶅垂閸ф绠栫憸鐗堝笒閻愬﹥銇勮箛鎾愁伀婵絻鍨荤槐鎾存媴閸濆嫅锝咁熆閻熺増顥犳俊鍙夊姍楠炴帡骞樺畷鍥╃嵁闂佽鍑界紞鍡涘磻閸曨垰鑸瑰鑸靛姈閳锋垹绱掗娑欑闁哄妞介弻娑欐償閵忕姷绁峰銈嗘磸閸庨潧鐣烽悢纰辨晬婵浜弶鍛婁繆閻愵亜锟芥牠骞愭ィ鍐ㄧ獥闁逛即鍋婇弫鍌炴煟閺傚灝鎮戦柍閿嬪笒闇夐柨婵嗙墕琚氱紒缁㈠幖閻栧ジ寮诲☉銏℃櫜闊洦娲滈弳銈呂旈悩闈涗粶缂佺粯锕㈠顐﹀箻缂佹ɑ娅㈤梺璺ㄥ櫐閹凤拷?
		if(!fire.pb.buff.Module.existState(role.getRoleID(), fire.pb.buff.BuffConstant.StateType.STATE_BATTLE_FIGHTER)){			
			return;
		}
		//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬬偤鎮ч悩姹囷拷渚�寮村杈┬㈤梻浣规偠閸庢椽宕滈敃鍌氭瀬闁告劦鍠楅悡銉╂煛閸ユ湹绨奸悗姘秺濮婂搫效閸パ嶆嫹濡ゅ懎纾婚柟鎹愬煐瀹曞弶绻涢幋娆忕仼缂佺媴缍侀弻锝夊箛閵婏附鐝曢梺鎸庣☉閻楀棝鍩為幋锔藉�烽柛娆忣槴閺嬫瑦绻涚�涙鐭嬬紒璇茬墕椤曪綁骞撻幒鍡樻杸闁诲函缍嗛崑鍡涘储闁秵鐓熼煫鍥ㄦ礀娴犙囨煕鐎ｎ偅宕岄柟顖氬暣楠炲鎮欓鍐泿闂備礁鎼崐鍦拷绗涘洤鍚归柛銉ｅ妽閸欏繐鈹戦悩鎻掓殲闁靛洦绻冩穱濠囶敃閵忕姵娈梺瀹犳椤︻垶锝炲┑瀣垫晢濠㈣泛顑嗛惁鎺撶節绾板纾块柛瀣灴瀹曟劘顦撮柨鐔剁矙濞佳囨儗閸屾氨鏆﹂柣鐔稿閺嗭箓鏌涢妷鎴濆暟娴滄澘鈹戦悩鍨毄濠殿喚鏁婚幊婵嬪礈瑜忛惌鍡涙煕閹板吀鎮嶉柟椋庡厴閹兘寮跺▎鐐棏闂備礁鎽滄慨闈涚暆缁嬭法鏆︽い鎺戝閸嬨劑鏌涘☉姗堝姛闁告ü绮欏铏圭磼濮楀棛鍔烽梺绋跨昂閸婃繃淇婇幘顔肩妞ゆ棁妫勬禒顖炴⒑鐠恒劌鏋嶇紒顔界懇瀵偊宕橀鑺ユ闂佽姤锚椤︻垳绮婇锝囩瘈闁汇垽娼ф禒婊勪繆椤栨熬鏀荤紒鍌氱Т閳规垹锟斤綆鍋勬禍妤呮⒑缂佹ɑ鐓ラ柛姘儔閹繝鎮㈤崗鑲╁幐闂佺鏈粙鎴︻敋濠婂牊鐓欓柟缁樺笚閹插摜绱掓潏銊ユ诞闁诡喒鏅犲Λ鍐ㄢ槈濡や緡娼熼梻鍌欑閹碱偅寰勯崶顒佹櫢闁芥ê顦遍敍宥夋煛閸℃顥㈤柟顔筋殜閺佹劖鎯旈垾鎰佹骄闂備椒绱粻鎴︽偋閹捐绠栨俊銈呭暞閸犲棝鏌涢弴銊ュ妞わ富鍙冨娲传閵夈儛锝夋煟濡や焦绀夐柣蹇擃儔濮婃椽宕ㄦ繝鍌氼潎闂佸憡鏌ㄩˇ顖氬祫闂佸壊鍋嗛崰鎰板矗韫囨梹鍙忔俊銈忔嫹婵☆偅顨嗙粋宥呪攽鐎ｎ偆鍘遍梺鍐叉惈閸婅煤鐎涙ɑ鍙忓┑鐘插鐢盯鏌熷畡鐗堝櫧缂侇喚鏁搁敓鏂ょ秵娴滄繈顢欓崟顖涒拻闁稿本鐟чˇ锕傚箹鐎涙鐭岀�垫澘锕ョ粋鎺旓拷锛卞秵瀚归柨鏇炲�搁悙濠冦亜韫囨挾校闁宠鐭傚缁樻媴缁涘娈愰梺鎼炲妺閸楁娊骞嗗畝鍕＜婵椴稿▓楣冩⒑閸︻厼鍔嬮柛鈺佺墕椤洭鍩￠崨顔惧幗闂佽鍎抽崯鍧楊敆閵徛颁簻闁圭偓娼欓婊兦庨崶褝韬柟顔界懇椤㈡棃宕熼懜闈涱伓闂佸搫绋侀崑鍛村汲濠婂牊鐓欓柣鎴炆戦ˉ鏍煙瀹勬澘妲绘い顐ｇ箞閹剝鎯旈埦锟介幏顐ｄ繆閵堝洤啸闁稿鍋ゅ畷褰掑锤濡わ拷缁犵姵绻濇繝鍌滃闁稿﹦鍏樺娲敃閿濆洢锟芥帡鏌ｉ埡渚�鍙勬慨濠勭帛閹峰懐绮电�ｎ偆绉烽柣搴ゎ潐濞叉﹢鏁嬮梺宕囩帛閺屻劑鍩ユ径鎰潊闁绘ɑ褰冨▓銈夋⒒娴ｅ憡鎯堥柛鐕佸亰閹勭節閸ャ劌浜楀┑鐐村灟閸ㄦ椽鎮￠弴銏＄厓闁芥ê顦伴ˉ婊勵殽閻愭惌娈滈柟顔筋殔椤繈鎮欓锟介锟�
		Long battleid = xtable.Roleid2battleid.select(role.getRoleID());
		if (battleid==null){//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴楠炴﹢鎳犻澶嬓滈梻浣规偠閸斿秶鎹㈤崘顔嘉﹂柛鏇ㄥ灠閸愶拷闂侀潧臎娓氬﹥瀚归柟鐑橆殕閻撶喐绻濋棃娑欘棤闁糕晪缍侀弻鈥崇暆鐎ｎ剛鐦堥悗瑙勬礀閻栧吋淇婇悜钘壩ㄧ憸宀勫箖閿濆鈷掑ù锝呮贡濠�浠嬫煕婵犲喚娈滅�规洘鍨块獮姗�鎳滈棃娑樼哎婵犵數鍋為崹顖炲垂閸︻厾涓嶉柨婵嗘缁犻箖鏌涢埄鍐炬畼缂佺姵濞婇弻娑㈠籍閿熶粙骞愰崘宸綎闁绘垶蓱婵粓鏌熷▓鍨珮婵″樊鍣ｅ娲箰鎼淬垻鈹涚紓浣哄У閹瑰洤顕ｉ锕�绠荤紓浣姑惂鍕節閵忥絾纭鹃柣顒�銈稿鍐测槈閵忊檧鎷虹紓浣割儏濞硷繝宕ｉ崟顐�鐟邦煥閸曨偄濮稿┑鈽嗗亞閸犲酣鈥旈崘顔嘉ч柛鈩冪懃閳峰牓姊虹粙娆惧剳闁稿鍊曢悾鐑藉即閻愬秵姊归幏鍛槹鎼达絿鏆伴梻鍌欑窔濞佳囨偋閸℃瑱鎷峰顓熺凡妞ゎ剙锕ら悾锟犲箠婵犲嫭鍤�妞ゎ厹鍔戝畷鐔碱敇閻橀潧甯ㄩ梻鍌欑閹碱偅寰勯崶顒佹櫢闁兼亽鍎辨晶顖炴煕濮橆剦鍎旈柡灞剧洴楠炲洭鍩℃担鍓茬�虫俊鐐�ら崜娆擃敄閸モ晜顫曢柟鎯х摠婵挳鏌涘┑鍡楃彅闁挎繂顦伴悡娆撴煟閻斿搫顣奸柛鐘愁焽閿熻姤顔栭崰娑㈩敋瑜旈崺銉﹀緞婵炪垻鍠庨…銊╁川椤撶喓浜栫紓鍌欐祰妞村摜鏁幒鏇犱航闂備礁鎲＄换鍌滐拷姘煎弮瀵偊顢旈崼鐔叉嫽闂佺鏈悷褔藝閿曞倹鐓欑痪鏉垮船娴滀即鏌熼姘拱鐎垫澘瀚禒锕傚箚瑜嶇花銉︾節閻㈤潧鈻堟繛浣冲吘娑樷槈閵忕姵杈堥梺鎸庢礀閸婂綊鎮￠悢鍏肩厸闁稿本姘ㄦ禒銏ゆ煙椤旇棄鐏﹂柕鍥у婵＄兘濡疯椤わ拷缂傚倷鑳剁划顖炴儎椤栫偟宓侀悗锝庡枟閸婄兘鏌ｉ姀銈嗘锭鐟滄澘閰ｅ缁樻媴閸涘﹤鏆堥梺缁橆殕椤ㄥ﹪骞冭閹晛顔忛鐣岀▉缂傚倸鍊烽悞锕佹懌婵犳鍨卞娆撳Υ閹烘埈娼╅柣鎾虫捣娴狀垶姊洪崨濠冣拻妞ゎ厼鐗撻垾鏃堝礃椤斿槈褔鏌涢埄鍐炬畼濞寸姵鎮傚娲箹閻愭彃顬堝┑鐙呮嫹闁告鍊ｉ敐澶婄疀闁绘鐗嗛敓鐣屽厴閹鈽夊▍顓т邯椤㈡捇骞樼紒妯锋嫼闂佸憡绋戦敃锔剧磽濮樿埖鐓曢幖娣灩缁插鏌嶇紒妯诲磳妤犵偛妫滈ˇ顕�鏌￠敓鑺ョ鐎ｎ偆鍘介梺褰掑亰閸撴瑧鐥閵囧嫰濡疯娴犻亶鏌″畝锟介崰鏍х暦閵婏妇绡�闁告劦鐓夐幏鐑藉箛椤曞棙瀚归悷娆忓缁岃法绱掗幓鎺戔挃闁瑰箍鍨归埞鎴狅拷锝庝簽閸婄偤姊虹�圭姵銆冪紒锟芥担鍝勭筏濠靛倸鎲￠埛鎺懨归敐鍫綈闁稿濞�閺屾稒鎯旈敐鍡樻瘓闁芥鍠栭弻鐔煎箚瑜嶉。鎶芥煟椤撶喓鎳囬柡灞诲�栭幈銊╁箛椤掑﹥瀚规俊銈呭暙椤ユ岸鏌ｉ敐鍛効闁归鍏橀悰顕�宕归鐓庮潛闂備胶鎳撻崯璺ㄦ崲濡寧锛傞梻渚�娼х换鍡涘礈濠靛鐭楅煫鍥ㄦ尨閺�浠嬫煟濡绲婚柡鍡欏仱閺屾洟宕堕妸褏鐤勯梺鍝勭灱閸犳牠銆佸▎鎾崇畾鐟滃秹鐛�ｎ�棃鎮╅棃娑楃捕缂備礁顦紞濠囧Υ娴ｇ硶鏋庨柟鐐綑濞堢喖姊洪棃娑辨Ф闁稿孩鐓￠幃姗�宕奸悢铏圭槇缂佺偓婢橀ˇ杈╁閸ф鐓曢悗锝庡亜閻忓锟借娲橀崝娆愪繆閼搁潧绶炲┑鐘插閸橆剟姊绘繝搴′簻婵炶濡囩划娆撳箣閻樺吀绗夊銈嗙墱閸嬬偤鎮￠妷鈺傜厽闁哄洨鍋涢敓钘夋贡閿熻姤鐔幏锟�?闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾剧懓顪冪�ｎ亝鎹ｉ柣顓炴閵嗘帒顫濋悙顒�顏舵俊銈囧Х閸嬫盯藝閻㈢鏋佺�广儱顦粈瀣亜閹捐泛啸闁告﹩鍨跺缁樻媴閸涘﹨纭�闂佺绨洪崐婵嬬嵁閹邦厹鍋呴柛鎰ㄦ櫅娴犙囨⒑閸撴彃浜濇繛鍙夛耿閹繝寮撮姀锛勫帗闂佸疇妗ㄧ粈渚�寮抽悢鍏肩厵闁告劕寮堕崳褰掓煃閽樺妯�妤犵偞锚閻ｇ兘宕堕崱鎰伈闁哄苯绉堕幉鎾礋椤愩倓绱濋梻浣筋嚃閸犳帡寮插☉銏″仼闁绘垼妫勯悙濠囨煠缁嬭法浠涙い鏃�鍔欏濠氬磼濞嗘帒鍘＄紓渚囧櫘閸ㄥ爼鐛幇顔藉珰閻熶椒鐒﹀浠嬪箖閵忋倕绀傞柣鎾崇凹缁ㄥ灚淇婇悙顏勶拷鏍礉瑜忕划濠氬箣閿旇棄锟藉嘲鈹戦悩鎻掝仾闁哥姵鍔栫换婵囩節閸屾粌顣虹紒鐐劤濞硷繝鎮￠锕�鐐婇柕濞э拷濡俱劑姊虹紒妯诲鞍婵炶尙鍠栧濠氭晸閻樿尙锛滃┑鐘茬仛閸旀洖鈻撻銏♀拺闁告稑锕ラ埛鎰磼椤旇姤宕岀�殿喖顭峰鎾閻橀潧锟界偤鎮峰鍐фい銏℃椤㈡﹢鎮㈢紙鐘电泿闂備線娼х换鍡涘礈濠靛牏鐭嗛悗锝庝簴閺�鑺ャ亜閺囩偞顥為悗姘秺濮婄粯鎷呴崫鍕紦闂佺瀛╁娆撳煝瀹ュ鍗抽柕蹇婏拷绛规嫹閸洖绠归柟纰卞幗缁舵氨绱掔拠鍙夘棦闁哄本娲熷畷鐓庘攽閸ャ劍鍊烽梺鍝ュ枑閹倸顫忛搹鍦煓婵炲棙鍎抽崜閬嶆⒑閻戔晜娅撻柛銊ョ埣婵″瓨绗熼敓钘夘嚕娴犲鏁囬柣鎰皺閻涒晠姊绘担绛嬫綈妞ゆ梹鐗犲畷浼村即閵忊�虫疂濡炪倕绻愰悧濠囧煕閹烘鐓曢悘鐐插⒔閹冲棝鏌涜箛鎾存拱闁靛洤瀚伴、姗�鎮欓棃娑掑彙闂備胶鎳撶粻宥夊垂绾懐浜欓梻浣告啞娓氭宕㈡ィ鍐╂櫖婵炴垯鍨洪埛鎴︽煕閿旇骞栨い锝呭悑缁绘繈濮�閳浜濋弲銉╂⒑閸濆嫯顫﹂柛搴㈢叀閹繝濡烽埡鍌滃幗闂佸搫娲ㄩ崑娑㈡晸閽樺璐￠柨鐔诲Г閻旑剟骞忛敓锟�
			battleid = xtable.Watcherid2battleid.select(role.getRoleID());
		}
		if(battleid == null){
			return;
		}
		Integer battleType = xtable.Battle.selectBattletype(battleid);
		if(battleType == null || battleType != BattleType.BATTLE_PVP){
			return;
		}
		Map<Integer, xbean.Fighter> fighters = xtable.Battle.selectFighters(battleid);
		if(fighters == null) {
			return;
		}
		if(fighters.get(1)!=null&&fighters.get(1).getUniqueid()==role.getRoleID()){
			if(fighters.get(15)!=null&&fighters.get(15).getFightertype() == xbean.Fighter.FIGHTER_ROLE){
				watchfight.put(role.getRoleID(), fighters.get(15).getUniqueid());
			}
		}
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 730439;

	public int getType() {
		return 730439;
	}

	public long hostid;
	public int modeltype; // 模块类型
	public int school; // 删选的职业 -1表示全职业
	public int levelindex; // 删选的角色等级区间 0表示全选

	public GCheckCanPlayPKView() {
	}

	public GCheckCanPlayPKView(long _hostid_, int _modeltype_, int _school_, int _levelindex_) {
		this.hostid = _hostid_;
		this.modeltype = _modeltype_;
		this.school = _school_;
		this.levelindex = _levelindex_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(hostid);
		_os_.marshal(modeltype);
		_os_.marshal(school);
		_os_.marshal(levelindex);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		hostid = _os_.unmarshal_long();
		modeltype = _os_.unmarshal_int();
		school = _os_.unmarshal_int();
		levelindex = _os_.unmarshal_int();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof GCheckCanPlayPKView) {
			GCheckCanPlayPKView _o_ = (GCheckCanPlayPKView)_o1_;
			if (hostid != _o_.hostid) return false;
			if (modeltype != _o_.modeltype) return false;
			if (school != _o_.school) return false;
			if (levelindex != _o_.levelindex) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += (int)hostid;
		_h_ += modeltype;
		_h_ += school;
		_h_ += levelindex;
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(hostid).append(",");
		_sb_.append(modeltype).append(",");
		_sb_.append(school).append(",");
		_sb_.append(levelindex).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	public int compareTo(GCheckCanPlayPKView _o_) {
		if (_o_ == this) return 0;
		int _c_ = 0;
		_c_ = Long.signum(hostid - _o_.hostid);
		if (0 != _c_) return _c_;
		_c_ = modeltype - _o_.modeltype;
		if (0 != _c_) return _c_;
		_c_ = school - _o_.school;
		if (0 != _c_) return _c_;
		_c_ = levelindex - _o_.levelindex;
		if (0 != _c_) return _c_;
		return _c_;
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}

