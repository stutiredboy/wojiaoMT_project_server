package gnet.link;

import fire.log.Logger;

import fire.pb.EnterWorldThread;
import fire.pb.main.Gs;

// {{{ RPCGEN_IMPORT_BEGIN
// {{{ DO NOT EDIT THIS
import com.locojoy.base.Marshal.OctetsStream;
import com.locojoy.base.Marshal.MarshalException;

abstract class __Dispatch__ extends mkio.Protocol { }

/** link to gs
*/
// DO NOT EDIT THIS }}}
// RPCGEN_IMPORT_END }}}

public class Dispatch extends __Dispatch__ {
	
	static private final Logger logger=Logger.getLogger("SYSTEM");

	@Override
	public void dispatch(Stub stub) throws Exception {
		int error = Kick.E_PROTOCOL_UNKOWN;
		try {
			Stub stub2 = ((Coder) (getManager().getCoder()))
					.getStub(this.ptype);
			mkio.Protocol p = stub2.newInstance();
			OctetsStream octstram = OctetsStream.wrap(this.pdata);
			p.unmarshal(octstram);
			p.setConnection(this.getConnection());
			p.setContext(this);
			if(Gs.isShutDown.get())
				return;//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄婵犲灚鍔栫紞妤呮⒑鐠恒劌鏋欐俊顐㈠瀹曟劙宕烽鐘电効闂佸湱鍎ゅΛ鎴﹀箯閻戣姤鏅查幖绮癸拷鑼嚬婵犵數鍋涢幊宀勫垂閽樺娼栨繛宸簼閸ゅ秹鏌曟径濠傛灓濞存粠浜ｅΛ鐔奉渻閵堝棛澧遍柛瀣☉鏁堥柡灞诲劜閳锋垶銇勯幒鐐村缂備礁顦遍弫濠氬箖閿熺姴唯闁冲搫鍊婚崢浠嬫⒑閸濆嫬鏆欓柛濠呭吹閺侇喖鈽夊▎宥勭盎闂侀潧顦崕鍝勎ｉ搹鍦＜閺夊牄鍔嶇亸顓熴亜閹剧偨鍋㈢�规洦浜畷姗�顢橀悙鏉戝壍婵犲痉鏉匡拷妤佹叏閻戣棄纾绘繛鎴欏灩閻ゎ喗銇勯幇鈺佸姢濞存粈绮欏娲嚒閵堝憛銏＄箾濞村娅囧ù婊咁焾閳诲酣骞嬮悩闈涚闂備胶绮崝鏇㈩敋椤撶姴濮柨鐔剁矙濮婂搫效閸パ呬紙濠电偘鍖犻崘顏呮噧闂傚倷娴囬褏锟芥稈鏅濈划娆撳醇閵夈儳鏌у┑鐐村灍閸嬫捇鏁撻挊澶嬪櫤缂佽櫣鏅划娆戞嫚闁款垱娅婇柡灞界Ч瀹曨偊宕熼顒佸闁汇垻顭堢粻顖涚箾瀹割喕绨奸柍閿嬪灴閺屾盯鏁傜拠鎻掑闂佺粯甯為崑鎾舵崲濞戙垹绠绘い鏇炴噺椤ユ牜绱撴笟鍥ф灈妞ゎ厾鍏橀悰顔嘉熼懖鈺冿紲濠碘槅鍨抽崢褔鐛澶嬧拻濞达絽鎲￠崯鐐烘煕閺冿拷椤洦绂嶇粙搴撴瀻闁瑰濮崇粭澶嬬節閻㈤潧校缁炬澘绉归幃锟犳偄閸忚偐鍘甸梺鍓茬厛閸犳牠寮冲▎蹇ｇ唵鐟滃秹鎮洪妸鈺佄﹂柛鏇ㄥ灠椤懘鏌嶉挊澶嬵棡闁汇倓绶氶幃妤冩喆閸曨剛顦梺鍝ュУ閻楃娀濡存担鑲濇棃宕ㄩ鐙呯床婵犳鍠楅敃鈺呭礈濞戙垺鍋柛鏇ㄥ灡閳锋帡鏌涚仦鎹愬闁跨喕濮ら幃鍌炲灳閿曞偆鏁嗛柛鏇ㄥ亞閿涙盯姊洪崨濠冨闁稿﹤顑呯叅妞ゅ繐鎳忓▍鍥⒑缁嬫寧婀板ǎ鍥ㄦそ楠炴寮撮姀鈾�鎷洪梻鍌氱墛閸楁洟宕奸妷銉ф煣濠电偞鍨崹娲磻閸屾稓绡�闂傚牊渚楅崕鎰版煟閹惧娲撮柡灞剧洴婵＄兘濮�閳╁啰褰呴梻浣告惈椤戝懐绮旈崜浣诡潟闁圭儤姊圭�氭岸鏌涘▎蹇ｆ▓婵☆偓绻濆娲濞戞瑦鎮欓柣搴㈢煯閸楁娊鎮伴锟藉畷鍫曨敆閿熺晫绮堥崼婢濆綊鏁愰崼婵堛偣闂佺鎻梽鍕偂閻旇偐鍙撻柛銉ｅ妽瀹曞矂鏌ｅ☉娆戠煂缂佽鲸甯￠幃鈺呮惞椤愩垻锛撻柣搴㈩問閸犳牠鈥﹂悜钘夋槬闁告洦鍨扮粈鍐煃鏉炴壆璐伴柨鐔诲Г閹瑰洤顫忓ú顏勫窛濠电姴瀚槐浼存⒑缁嬪灝顒㈤柣鈺婂灡娣囧﹪宕奸弴鐐缎曢梺闈涚墕閹虫劗绮斿ú顏呯厵妞ゆ洖鎳嶉柇顖滐拷瑙勬磸閸旀垿銆佸☉姗嗙叆闁告洦鍓﹂崯宀勬⒒閸屾艾锟介绮堟担闈╄�块梺顒�绉敓鏂ょ畵瀹曞ジ濡烽敂鑺ョ彇闂備線娼чˇ顓㈠磿濞差亜鍚规俊銈呮噺閻撴洟鏌￠崶銉ュ妤犵偞甯楃换娑樼暆婵犱線鍋楅梺鍝勬湰缁嬫牜绮诲☉銏犲嵆闁绘劘寮撶划顖炴⒒娴ｈ櫣甯涢柟姝岊嚙鐓ら柡宥庡幖閻撴﹢鏌熸潏楣冩闁稿鍔欓弻娑⑩�﹂幋婵呯凹濠殿噯绲界�氭澘顫忛搹鍦煓婵炲棙鍎抽崜鎶芥⒑缁嬫鍎嶉柛濠冩礋閹箖鎮块妯规睏闂佸湱鍎ら崹鍧楀船閸洘鈷戦柛婵嗗瀹告繈鏌涚�ｎ剙鏋涙い銏＄懇瀹曞爼顢楁担鍙夊闂備礁鎲＄粙鎴︽晝閿斿墽纾芥慨妯垮煐閻撴洟骞栧ǎ顒�鐏╅柍缁樻礋閺岀喖顢涘杈╁姱濡ょ姷鍋為…鍥╂閹烘嚦鐔兼偂鎼达紕顔戦梻鍌氬�风欢姘焽瑜忛幑銏ゅ箳閹炬潙寮块梻浣哥仢椤戝洭銆呴柨瀣闁瑰瓨鐟ラ悘顏堟煟閹惧娲撮柡灞剧洴閸╁嫰宕橀崜褍濮洪梻浣规た閸樼晫鏁敓鐘茶摕闁炽儱纾弳鍡涙煥閻斿墎鐭欑�规洑鍗抽獮姗�鎳滃▓鎸庣稐闂備礁婀遍崕銈夈�冮崨杈剧稏闁告稑鐡ㄩ悡鐔镐繆椤栨繃顏犻柨娑樼Т闇夋繝濠傜凹闁垱鎱ㄦ繝鍕笡闁瑰嘲鎳愰幉鎾礋閳猴拷閹寸兘姊绘担鍛婂暈閻绱掗鐣屾噰濠碘剝鎸冲畷姗�顢欓悡搴わ拷鍨攽閳藉棗鐏犻柣銊у厴瀵劑鎼归銈囩槇闂佹眹鍨藉褍鐡繝鐢靛仩椤曟粎绮婚幘宕囨殾闁规壆澧楅崐濠氭煠閹帒鍔楅柟宄邦煼濮婃椽宕滈幓鎺嶇敖闂佸摜濮甸幑鍥春閿濆唯闁靛鍠氶崬鐢告煟閻斿摜鎳冮悗姘煎幘缁牏锟斤綆鍠楅悡娆愩亜閺冨倻鎽傛繛鍫燂耿閺岀喖宕ｆ径瀣攭閻庤娲滈崰鏍�佸Δ鍛＜闁靛牆鏌婇悙鐑樷拺闁煎鍊曢弸鎴犵磼椤旇偐孝妞ゎ厼鐏濋～婊堟晸閽樺鏆︽い鏍仜缁狙囨煙閹碱厼鐏ラ柨鐔绘閻忔繈濡撮幒鎴僵闁绘劦鍓欓鑸电節濞堝灝鏋涢柨鏇樺劚椤啯绂掔�ｎ剙绁﹂梺褰掑亰閸樹粙宕曢悢鍏肩叆婵犻潧妫欏婵嬫煛閸℃劕锟芥牜鎹㈠┑鍫濇瀳婵☆垱妞垮鎴︽⒑缁嬫鍎忛柟铏耿楠炲啴鎮块锝喰梻浣告啞鐢鏁垾宕囨殾濠靛倻顭堝敮闂佹寧妫佹慨銈夘敂閻斿皝鏀介柣鎰▕閸ょ喎鈹戦鑺ュ唉妞ゃ垺鐗犲畷鍗炩槈濡》绱梻浣圭湽閸ㄥ綊骞夐敓鐘茬；闁斥晛鍟扮粻楣冩煕閳╁喚娈樼紒鐘靛閵囧嫯绠涢敐鍕晼缂備浇椴哥敮锟犲极閹惧顩烽悗锝庝簽椤︺劑姊哄畷鍥ㄥ殌闁靛洦顭囬懞杈ㄧ節濮橆厸鎷洪梻鍌氱墛娓氭鎮炴ィ鍐╃厱閹兼番鍊栭悵顏堟煛閸涱厾鍩ｉ柡浣稿�荤划鐢碉拷锝庡亽閸熷秹姊绘担铏瑰笡闁告梹顭囨禍绋库枎閹寸姳绗夐梺瑙勫劶婵倝鎮￠妷鈺傜厽闁哄倹瀵ч崯鐐烘煟韫囷絽鏋ょ紒杈ㄦ尭椤撳ジ宕ㄩ鍛紗闁诲氦顫夊ú妯荤箾婵犲洢锟戒礁顫濋懜鍨闂佽姤锚椤︿粙宕甸弴鐔翠簻闁规澘澧庨幃鑲╃磼閳藉懏瀚归梻鍌欑劍閹爼宕曢鐐茬閹兼番鍔岄崒銊╂煟閹伴潧澧扮紒鈽呮嫹婵犵數鍋涢悧鍡涙倶濠靛鍑犻柣鏂垮悑閻撴洟鏌￠崘鎸庡濠电偠灏欓崰鏍ь嚕椤愶箑绠荤紓浣姑▓鐔兼⒑闂堟侗妾у┑鈥虫喘钘濆ù鐓庣摠閸婂灚绻涢崼婵堜虎闁哄鍠栭弻锝夊箼閸曨厾鐦堥悗娈垮櫘閸嬪﹪鐛Ο鑲╃＜婵☆垳绮鐔兼⒒娴ｈ姤纭堕柛锝忕畵楠炲繘鏁撻敓锟�
			
			if(logger.isDebugEnabled())
				logger.debug(new StringBuilder("Recv : class=").append(p.getClass().getName()).append(" size=").append(octstram.size()));
			
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁惧墽鎳撻—鍐拷锝庝簻椤掋垺銇勯幇顖毿撻柟渚垮妼椤粓宕卞Δ锟介埛鎺楁⒑缂佹ê绗╂俊顐㈠閸╃偤骞嬮敂钘変汗閻庤娲栧ù鍌炲汲閿熺姵鈷戦柟鎯板Г閺佽鲸淇婇銏犳殻鐎殿喛顕ч埥澶愬閻樻彃绁梻渚�娼ч…鍫ュ磿娴煎瓨鍤嬫い蹇撶墛閳锋垹绱撴担鑲℃垿鎮￠妷锔跨箚妞ゆ劧绲块幊鍕磼瀹�鍐摵缂佺粯绻堝畷鍫曟嚋閸偅鐝┑鐘愁問閸犳褰犻梺绋挎唉妞村摜绮嬮幒鎳ㄦ椽顢旈崨顏呭闂備胶鍘ч～鏇㈠磹閺囥垹鍑犳繛鎴欏灪閻撴洟鎮楅敐搴濇倣鐎规悶鍎查妵鍕敇閻愭潙鏋犳繝纰樺墲閹倿宕洪敓鐘茬＜婵犲﹤鍟Ч鏌ユ⒒閸屾瑨鍏岀紒顕呭灠椤繘鎳￠妶鍛亰濡炪倖鐗滈崐娑欏緞鐎ｎ亞绐為梺褰掑亰閸橀箖宕㈡禒瀣拺闁圭娴风粻鎾寸箾鐏炲倸锟芥繂鐣烽姀顫嫹濞戞鑲╂崲閸℃稒鐓欓悷娆忓婵啴鏌涘鐓庝簽缂佽鲸甯楀蹇涘Ω閵夛箒鐧侀梻浣筋嚃閸犳帡寮插☉銏″仼闁绘垼妫勯悙濠囨煥濠靛棙锛嶆繛鍏兼煥閳规垿鏁嶉崟顐℃澀闂佺顭堥崐婵嗙暦閹达箑宸濇い鏍ㄧ☉鎼村﹪姊洪崜鎻掍簴闁稿氦浜划濠氬冀椤撶喓鍘撻梺瀹犳〃缁�渚�寮抽悙鐑樼厱閹艰揪绲介弸娑㈡煛鐏炵偓绀夌紒鐘崇♁缁绘繈宕掑锝嗗珶濠碉紕鍋戦崐鏍涢幋锕�绠柨鐕傛嫹
			if(fire.pb.scene.MapThread.getInstance().tryAdd(p,stub2))
				return;
			
			//婵犵數濮烽弫鍛婃叏閻戣棄鏋侀柛娑橈攻閸欏繘鏌ｉ幋锝嗩棄闁哄绶氶弻娑樷槈濮楀牊鏁鹃梺鍛婄懃缁绘﹢寮婚敐澶婄婵犲灚鍔栫紞妤呮⒑鐠恒劌鏋欐俊顐㈠瀹曟劙宕烽鐘电効闂佸湱鍎ゅΛ鎴﹀箯閻戣姤鏅查幖绮癸拷鑼嚬婵犵數鍋涢幊宀勫垂閽樺娼栨繛宸簼閸ゅ秹鏌曟径濠傛灓濞存粠浜ｅΛ鐔奉渻閵堝棛澧遍柛瀣☉鏁堥柡灞诲劜閳锋垶銇勯幒鐐村缂備礁顦遍弫濠氬箖閿熺姴唯闁冲搫鍊婚崢浠嬫⒑閸濆嫬鏆欓柛濠呭吹閺侇喖鈽夊▎宥勭盎闂侀潧顦崕鍝勎ｉ搹鍦＜閺夊牄鍔嶇亸顓熴亜閹剧偨鍋㈢�规洦浜畷姗�顢橀悙鏉戝壍婵犲痉鏉匡拷妤佹叏閻戣棄纾绘繛鎴欏灩閻ゎ喗銇勯幇鈺佸姢濞存粈绮欏娲嚒閵堝憛銏＄箾濞村娅囧ù婊咁焾閳诲酣骞嬮悩闈涚闂備胶绮崝妤呭磿閵堝鐓曢柟瀵稿У閸犳劙鏌ｅΔ锟介悧鍡欑箔閹烘嚚鐟邦煥閿熶粙宕￠幎钘夎摕婵炴垯鍨圭粻濠氭倵闂堟稒鍟為柛锛卞喚娓婚柕鍫濇缁岃法绱掗煫顓犵煓闁诡噣绠栭弫鎾绘偐瀹曞洤濮洪梻浣瑰濡礁螞閸曨垱鍎婃繝濠傜墛閳锋帒銆掑鐐濠电偘鍖犻崶銊ヤ罕闂佺硶鍓濋妵鍌氣槈濡攱顫嶅┑鐐叉閸旀牠鎮靛畡閭︽富闁靛牆妫楃粭鎺楁煕婵犲懎鍚瑰瑙勬礋瀹曟绮潪鎵泿闂備礁鎼崯顐⒚洪妶鍡欘洸鐟滅増甯掗弸渚�鏌涢锝囩婵炴挸顭烽弻鏇㈠醇濠靛棙娈梺璇叉禋娴滄繃绌辨繝鍥舵晝闁靛繒濮靛▓鏌ユ⒑闁稓鈹掗柛鏃�鍨垮顐﹀箻鐎靛壊娴勯柣搴秵閸嬪棝宕㈤鍫熲拺闁告挻褰冩禍婵堢磼鐠囨彃鏆ｉ挊鐔兼煙鏉堥箖妾柣鎾寸懅閿熺晫鎳撶�氫即宕戞繝鍥ㄥ亗闁稿繐鍚嬮崣蹇撯攽閻樻彃鏆為柕鍥ㄧ箘閿熷�燁潐濞插繘宕濆鍥ㄥ床婵犻潧顑呯粈鍐┿亜椤撶喎鐏︾悮鈺呮⒒閸屾艾锟界兘鎳楅崼鏇楋拷锕傚醇閵夘喗鏅為梺鍛婄♁濞兼瑧绮婚悩鍏呯箚妞ゆ牗绋戦婊堟煥濞戞ê锟藉湱鎹㈠┑瀣仺闂傚牊鍒�閵忋倖鐓ラ柡鍥敓鑺ョ箞閻涱喛绠涘☉妯碱吅闂佹寧娲╅幏椋庣磼閻欙拷閸ㄤ即鈥旈崘顏庢嫹閿濆簼绨绘い鎺嬪灲閺屾盯鎮╅崣澶樻＆闂佸搫鏈惄顖氼嚕閹绢喖惟闁靛鍎哄鐐繆閻愵亜锟窖呮嫻閻旂厧绀夌�癸拷閸曨煉鎷烽弮鍫濈妞ゆ柨妲堣閺屾盯骞囬埡浣割瀳濡炪値鍓欓悧鎾愁潖閾忓湱纾兼慨妤�妫欓悾鐑芥⒑閸︻厽鍤�婵炲樊鍙冮獮鍐╁閹碱厽鏅╅柣鐘充航閸斿酣寮堕幖浣光拺闁告繂瀚粊鈺伱瑰鍕畼闁跨喕濮ら懝鍓х礊婵犲洤钃熼柕濞垮劗閺�浠嬫煕閳╁啩绶遍柨鐔诲Г椤ㄥ棛鎹㈠☉銏犲窛妞ゆ洖妫滈敓钘夋健閺岋紕浠︾粙鍨拤闂佺懓鍢查幊妯虹暦濠婂牆绠甸柟鐑樺灥椤ユ捇姊婚崒娆戭槮闁圭⒈鍋婂鐢割敆閸曨剙鍓銈嗙墱閸嬫盯寮伴妷鈺傜厱闁哄洢鍔岄悘鐘电磼閿熶粙宕橀埞澶哥盎闂婎偄娲﹂幐濠氬闯鐟欏嫮绠鹃柛娑卞暆閹寸偟鈹嶅┑鐘叉处閸婇攱銇勮箛鎾愁伒闁归鏌夐ˇ鎾煥閻斿墎鐭欐繛浣冲洦鍎楅柛灞炬皑閺嗭箓鏌熼幆鏉啃撻柡鍛叀閺屾稑顭ㄩ敓浠嬫倿閿斿墽绀婇幖娣灮缁★拷闂佹眹鍨藉褎鐗庨梻浣藉亹閹虫挻鏅堕懞銉х彾闁哄洢鍨圭粈鍌炴煕韫囨洖甯剁�殿喖鐏濋埞鎴︻敊缁涘鐣跺┑鈽嗗亝椤ㄥ﹪鎮伴纰辨建闁跨喍绮欏濠氬即閵忕娀鍞跺銈嗗姦濠拷闁哥姴锕ら埞鎴︻敊绾柉鍚紓鍌氬�瑰畝鍛婁繆閻㈢绠涢柡澶庢硶椤斿﹤鈹戦悩缁樻锭婵炴潙鍊歌灋闁哄稁鍘介埛鎺懨归敐鍕劅闁绘帒澧界槐鎺旂磼濡櫣浼岄梺杞扮閸熷瓨鎱ㄩ敓浠嬫煏閸繃鎼愮紒渚婄畵濮婃椽宕ㄦ繝鍌毿曢梺鍝ュУ椤ㄥ﹤鐣烽幇顓犵瘈婵﹩鍘鹃崣鍐ㄢ攽閳藉棗鐏熼悹锟介敃锟藉嵄闁告縿鍎婚幏椋庢喆閸曨剙纰嶅┑鈽嗗亝椤ㄥ﹪宕洪悙鍝勭闁挎梻绮弲鈺呮⒑濞茶寮鹃柛瀣笚缁傚秹顢旈崟顓熸濡炪倖鐗滈崑娑㈡煥閵堝棔绻嗛柕鍫濈箲鐎氬綊姊虹粙鑳潶闁告梹鍨垮濠氬Ω閵夈垺顫嶅┑鈽嗗灟鐠�锔藉閿熺晫绱撴担鍝勪壕鐎规洘锚铻為柛鏇ㄥ灡缁犳帡姊绘担鐟邦嚋缂佽鍊哥叅闁挎洖鍊搁崥褰掓煥閻斿墎鐭欐慨濠勫劋濞碱亪骞嶉鐓庮瀴闂備胶顭堢�涒晜绻涙繝鍥ф槬闁绘劕鎼粻锝夋煥閺囶亝瀚归梺璇茬箲婵炲﹪寮昏缁犳盯鏁愰崨顒傜泿闂備礁鎼鍥ㄧ箾閿熻姤鎱ㄦ繝鍕妺婵炵⒈浜獮宥夘敊閻撳寒鐎撮梻鍌欑濠�閬嶅箠閹捐秮娲敇閵忋垹绁︽繝鐢靛Т濞诧箓宕愰悜鑺ョ厱婵犻潧妫楅悵瀣煏婵炑冨閺嬫垶绻濋姀锝嗙【妞ゎ収鍓熼幃妤呭醇閺囩喓鍘繝鐢靛仧閸嬫挸鈻嶉崱娑欑厽闁规崘娉涢弸鎴︽煏閸パ冾伂缂佺姵鐩獮姗�骞囨担椋庣濠电姴鐥夐妶鍛版暱濠电偛鎷戠徊鍨ｉ幇鏉跨闁规儳顕粔鍫曟⒑闂堟侗鐒鹃柛搴ゅ皺閹风娀鎮欓悜妯猴拷鍨箾閸繄浠㈡繛鍛耿閺屾盯骞樼�靛憡鍒涘Δ鐘靛仦閸ㄥ灝鐣烽悢纰辨晬婵絽鐨烽弲鐘诲蓟閵娾晛绫嶉柛銉厛濡嫰姊洪崫鍕靛剱缂佸鎸惧Σ鎰板箻鐠囪尙锛滃┑顔斤供閸撱劑骞忛柨瀣垫Ч閹艰揪绲块悞鍏肩箾閹惧鍟查柟鐑芥敱閵囧嫰濮�閿涘嫬鈷岄悗瑙勬磸閸斿矂锝為姀銈呂ч柛娑卞枛閺嬬娀姊洪崫鍕婵☆偅顨婇、妯荤附缁嬪灝鑰垮┑鈽嗗灡濡炴寧绂掕濮婂宕掑▎鎴М闂佸湱鈷堥崑濠傜暦閹版澘閱囬柡鍥╁仧閿涙瑥鈹戞幊閸婃洟宕导瀛樺剹闁瑰墽绮埛鎺楁煕椤愩倕鏋欓柨鐔稿灊缁瑩骞冮悜鑺ョ劷闁挎梹鍎冲鎶芥⒒娴ｅ憡鍟炴繛璇х畵瀹曘垺銈ｉ崘鈺佷簵婵犮垼鍩栭崝鏍磹閸偆绠鹃柛顐ｇ箘娴犮垽鏌＄�ｎ剙鏋旈柟鍙夋倐瀵爼宕归鑺ヮ啋闂備胶纭堕弬鍌炲垂濞差亜绠氶柡鍐ㄧ墕鎯熼梺闈涳紡鐏炶姤娅旈梻鍌欐祰椤曆兠归悜钘夋瀬闁归棿璁查敓鏂ょ畵瀹曞ジ濡疯缁侊箓鎮楅獮鍨姎婵炲眰鍔庢竟鏇熺鐎ｎ偆鍘遍柣蹇曞仜婢т粙骞婇崨瀛樼厱闁哄倽娉曟牎闂侀潧娲ょ�氱増淇婇幖浣肝ㄩ柨鏃傜帛閿熴儳绱撻崒娆戣窗闁哥姵顨婇幃鐑藉煛閸涱垰绁﹂柣搴秵娴滃爼鎮㈤崱妯镐簻闊洦鎸婚崳鑺ョ箾閹绘帞鎽犻柕鍥у婵拷闁宠棄鎳撻敓钘夌仢閳规垿顢氶崱妯侯伓闂傚倷鑳剁划顖炴晝閵忕媭鐒界憸鏃堢嵁濡ゅ喛鎷烽敐搴℃灍闁抽攱甯掗湁闁挎繂鐗嗚缂佺虎鍘奸悥濂稿蓟濞戙垺鏅查煫鍥ㄦ礈閺嗐倕螖閻橀潧浠滅紒缁橈耿瀵偊骞樼紒妯绘闂佽法鍣﹂幏锟�
			if(EnterWorldThread.getInstance().tryAdd(p))
				return;
			//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳缍婇弻锝夊箣閿濆憛鎾绘煕閵堝懎顏柡灞剧洴椤㈡洟鏁愰崱娆欑喘闂備浇娉曢崰鎰板垂濠靛鍊块柨鏃傚亾瀹曞弶绻濋棃娑卞剰缁炬儳顭烽弻銈夊箒閹烘垵濮㈠┑鐐村絻椤曨參鏁撻崐鐕佹綈婵炲弶绮撳畷浼村冀椤撴粣鎷锋笟锟藉鎾偑閸涱喖顏堕梺鎸庣箓妤犲憡绂嶉悙鐑樼厓闁芥ê顦藉Ο锟介梺鍝勮嫰缁夊爼骞忛悩璇茶摕闁靛鍎遍崣濠冧繆閵堝洤啸闁稿鍋ら弫瀣⒑娴兼瑧鎮奸柛蹇斆悾鐑藉醇閺囩偟鍘搁梺绋挎湰缁綁骞忛悜绛嬫晝闁挎棁袙閹峰姊虹粙鎸庢拱闁荤噦濡囩划濠囨偋閸垻顔曟繝銏ｆ硾椤戝棛绮堢�ｎ剨鎷风憴鍕；闁告濞婇悰顔嘉熺涵閿嬪婵炴垶顏鍕靛殨闁秆勵殕閻撶喖骞栧ǎ顒�濡芥繛鎳峰洦鐓欓悹鍥囧懐鐦堥悗瑙勬礃椤ㄥ懘鈥﹂妸鈺侀唶闁绘柨鎼鎶芥⒒娴ｈ櫣甯涢柡灞诲妽閺呰埖鎯旈妸锕�鍓瑰┑鐐叉閸旀帞鎹㈤崱妯镐簻闁规壋鏅涢悘顏堟煕閵堝懏澶勯柕鍥у婵拷闁斥晛鍟伴ˇ鐗堢節濞堝灝娅欓柟椋庡厴濮婃椽鎮欓挊澶婂闂佸憡鎸婚懝鎯у祫闂備緡鍓欑粔鐢稿煕閹烘嚚褰掓晲閸涱喖鏆堥梺鍝ュ枔閸嬨倝寮诲☉銏犖╃憸搴ㄥ汲閳哄啰纾奸弶鍫氭櫅娴狅妇绱掔紒妯肩疄鐎规洘甯掗…銊╁礋椤掑鏅繝纰夌磿閸嬫垿宕愰弽顐ｆ殰闁圭儤妫戦幏宄邦潩閻撳骸绫嶉悗娈垮枟閻擄繝鐛弽銊﹀闁革富鍘煎鎶芥⒒娴ｈ櫣甯涙繛鍙夌墵瀹曟劙宕烽銊﹀婵鍋撶�氾拷
			if(fire.pb.shop.srv.market.MarketThread.getInstance().tryAdd(p))
				return;
			
			p.dispatch(stub);
			return;
		} catch (mkio.MarshalError e) {
			error = Kick.E_MARSHAL_EXCEPTION;
			//if(logger.isDebugEnabled())
				logger.error(new StringBuilder("Dispatch : error=E_MARSHAL_EXCEPTION ptype=")
											.append(this.ptype)	);
		} catch (Throwable e) {
			error = Kick.E_PROTOCOL_EXCEPTION;
			//if(logger.isDebugEnabled())
				logger.error(new StringBuilder("Dispatch : error=E_PROTOCOL_EXCEPTION ptype=")
											.append(this.ptype)	);
		}
		
		Kick kick = new Kick();
		kick.error = error;
		kick.action = Kick.A_DELAY_CLOSE;
		kick.linksid = this.linksid;
		kick.send(super.getConnection());
		
		logger.error(new StringBuilder("Kick User error=").append(error).append(" action=").append(Kick.A_DELAY_CLOSE).append(" linksid=").append(this.linksid)	);
		
	}

	@Override
	protected void process() {
		throw new UnsupportedOperationException();
	}

	// {{{ RPCGEN_DEFINE_BEGIN
	// {{{ DO NOT EDIT THIS
	public static final int PROTOCOL_TYPE = 65541;

	public int getType() {
		return 65541;
	}

	public int linksid;
	public int userid;
	public int ptype;
	public com.locojoy.base.Octets pdata;

	public Dispatch() {
		pdata = new com.locojoy.base.Octets();
	}

	public Dispatch(int _linksid_, int _userid_, int _ptype_, com.locojoy.base.Octets _pdata_) {
		this.linksid = _linksid_;
		this.userid = _userid_;
		this.ptype = _ptype_;
		this.pdata = _pdata_;
	}

	public final boolean _validator_() {
		return true;
	}

	public OctetsStream marshal(OctetsStream _os_) {
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		_os_.marshal(linksid);
		_os_.marshal(userid);
		_os_.marshal(ptype);
		_os_.marshal(pdata);
		return _os_;
	}

	public OctetsStream unmarshal(OctetsStream _os_) throws MarshalException {
		linksid = _os_.unmarshal_int();
		userid = _os_.unmarshal_int();
		ptype = _os_.unmarshal_int();
		pdata = _os_.unmarshal_Octets();
		if (!_validator_()) {
			throw new VerifyError("validator failed");
		}
		return _os_;
	}

	public boolean equals(Object _o1_) {
		if (_o1_ == this) return true;
		if (_o1_ instanceof Dispatch) {
			Dispatch _o_ = (Dispatch)_o1_;
			if (linksid != _o_.linksid) return false;
			if (userid != _o_.userid) return false;
			if (ptype != _o_.ptype) return false;
			if (!pdata.equals(_o_.pdata)) return false;
			return true;
		}
		return false;
	}

	public int hashCode() {
		int _h_ = 0;
		_h_ += linksid;
		_h_ += userid;
		_h_ += ptype;
		_h_ += pdata.hashCode();
		return _h_;
	}

	public String toString() {
		StringBuilder _sb_ = new StringBuilder();
		_sb_.append("(");
		_sb_.append(linksid).append(",");
		_sb_.append(userid).append(",");
		_sb_.append(ptype).append(",");
		_sb_.append("B").append(pdata.size()).append(",");
		_sb_.append(")");
		return _sb_.toString();
	}

	// DO NOT EDIT THIS }}}
	// RPCGEN_DEFINE_END }}}

}
